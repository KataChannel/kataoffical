# 🗺️ Phase 2 Component Architecture Map

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     Rau Sạch Trần Gia - Price Management System         │
│                              Phase 2 Components                          │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  NAVIGATION MENU                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│  📊 Dashboard                                                            │
│  📋 Bảng giá                                                            │
│  ⬆️  Cập nhật hàng loạt  ────────────┐                                  │
│  🔔 Cảnh báo giá (3)    ─────────────┼────┐                            │
│  📈 Phân tích           ─────────────┼────┼────┐                        │
│  ⚖️  So sánh giá        ─────────────┼────┼────┼────┐                   │
└──────────────────────────────────────┼────┼────┼────┼───────────────────┘
                                       │    │    │    │
                   ┌───────────────────┘    │    │    │
                   ▼                        │    │    │
         ┌──────────────────────────┐       │    │    │
         │ BULK PRICE UPDATE        │       │    │    │
         ├──────────────────────────┤       │    │    │
         │ ┌──────────────────────┐ │       │    │    │
         │ │ Configuration Form   │ │       │    │    │
         │ │ - Banggia select     │ │       │    │    │
         │ │ - Update type        │ │       │    │    │
         │ │ - Reason input       │ │       │    │    │
         │ └──────────────────────┘ │       │    │    │
         │ ┌──────────────────────┐ │       │    │    │
         │ │ Actions              │ │       │    │    │
         │ │ [Download Template]  │ │       │    │    │
         │ │ [Import Excel]       │ │       │    │    │
         │ │ [Add Manual Row]     │ │       │    │    │
         │ │ [Apply Bulk Change]  │ │       │    │    │
         │ └──────────────────────┘ │       │    │    │
         │ ┌──────────────────────┐ │       │    │    │
         │ │ Summary Stats        │ │       │    │    │
         │ │ Total: 50            │ │       │    │    │
         │ │ Success: 45          │ │       │    │    │
         │ │ Failed: 5            │ │       │    │    │
         │ │ Change: +100,000đ    │ │       │    │    │
         │ └──────────────────────┘ │       │    │    │
         │ ┌──────────────────────┐ │       │    │    │
         │ │ Price Table          │ │       │    │    │
         │ │ ┌─┬───┬────┬────┬──┐ │ │       │    │    │
         │ │ │✓│SP1│10k │12k │+2│ │ │       │    │    │
         │ │ │✓│SP2│15k │14k │-1│ │ │       │    │    │
         │ │ │✗│SP3│8k  │9k  │+1│ │ │       │    │    │
         │ │ └─┴───┴────┴────┴──┘ │ │       │    │    │
         │ └──────────────────────┘ │       │    │    │
         │ [Preview] [Apply Changes]│       │    │    │
         └──────────────────────────┘       │    │    │
                                            │    │    │
                        ┌───────────────────┘    │    │
                        ▼                        │    │
              ┌──────────────────────────┐       │    │
              │ PRICE ALERTS             │       │    │
              ├──────────────────────────┤       │    │
              │ LEFT COLUMN              │       │    │
              │ ┌──────────────────────┐ │       │    │
              │ │ Create Alert Form    │ │       │    │
              │ │ - Alert type         │ │       │    │
              │ │ - Banggia            │ │       │    │
              │ │ - Product (optional) │ │       │    │
              │ │ - Thresholds         │ │       │    │
              │ │ - Channels           │ │       │    │
              │ │   □ In-app           │ │       │    │
              │ │   □ Email            │ │       │    │
              │ │   □ SMS              │ │       │    │
              │ │ [Create Alert]       │ │       │    │
              │ └──────────────────────┘ │       │    │
              │ ┌──────────────────────┐ │       │    │
              │ │ Active Alerts (5)    │ │       │    │
              │ │ ● Tăng giá - BG1     │ │       │    │
              │ │   [Toggle] [Delete]  │ │       │    │
              │ │ ● Giảm giá - BG2     │ │       │    │
              │ │   [Toggle] [Delete]  │ │       │    │
              │ └──────────────────────┘ │       │    │
              │                          │       │    │
              │ RIGHT COLUMN             │       │    │
              │ ┌──────────────────────┐ │       │    │
              │ │ Notifications (3)    │ │       │    │
              │ │ [Mark All Read]      │ │       │    │
              │ │ ────────────────────│ │       │    │
              │ │ ▶ 📈 Rau xanh +20%  │ │       │    │
              │ │   10k → 12k          │ │       │    │
              │ │   2 hours ago        │ │       │    │
              │ │ ────────────────────│ │       │    │
              │ │ ▶ 📉 Rau cải -10%   │ │       │    │
              │ │   15k → 13.5k        │ │       │    │
              │ │   1 day ago          │ │       │    │
              │ └──────────────────────┘ │       │    │
              └──────────────────────────┘       │    │
                                                 │    │
                             ┌───────────────────┘    │
                             ▼                        │
                   ┌──────────────────────────┐       │
                   │ PRICE ANALYTICS          │       │
                   ├──────────────────────────┤       │
                   │ ┌──────────────────────┐ │       │
                   │ │ Filters              │ │       │
                   │ │ Banggia: [All ▼]     │ │       │
                   │ │ Period: [30 days ▼]  │ │       │
                   │ └──────────────────────┘ │       │
                   │ ┌────┬────┬────┬────┐   │       │
                   │ │ 50 │8.5%│ 12 │+2M │   │       │
                   │ │Chgs│Vol │Ords│Rev │   │       │
                   │ └────┴────┴────┴────┘   │       │
                   │ ┌──────────────────────┐ │       │
                   │ │ Price Volatility     │ │       │
                   │ │ ┌──┬───┬───┬───┬──┐ │ │       │
                   │ │ │SP│Avg│Min│Max│%│  │ │       │
                   │ │ │1 │11k│9k │13k│44│ │ │       │
                   │ │ │2 │14k│12k│16k│33│ │ │       │
                   │ │ └──┴───┴───┴───┴──┘ │ │       │
                   │ └──────────────────────┘ │       │
                   │ ┌──────────────────────┐ │       │
                   │ │ Order Impacts        │ │       │
                   │ │ ┌───┬────┬────┬───┐ │ │       │
                   │ │ │DH │Bef │Aft │Dif│ │ │       │
                   │ │ │001│500k│520k│+20│ │ │       │
                   │ │ │002│750k│735k│-15│ │ │       │
                   │ │ └───┴────┴────┴───┘ │ │       │
                   │ └──────────────────────┘ │       │
                   │ ┌──────────────────────┐ │       │
                   │ │ Revenue Analysis     │ │       │
                   │ │ ┌────┬────┬────┬──┐ │ │       │
                   │ │ │Mon │Act │Proj│Df│ │ │       │
                   │ │ │Jan │45M │42M │+3│ │ │       │
                   │ │ │Dec │38M │40M │-2│ │ │       │
                   │ │ └────┴────┴────┴──┘ │ │       │
                   │ └──────────────────────┘ │       │
                   │ [Export Excel] [PDF]     │       │
                   └──────────────────────────┘       │
                                                      │
                                  ┌───────────────────┘
                                  ▼
                        ┌──────────────────────────┐
                        │ PRICE COMPARISON         │
                        ├──────────────────────────┤
                        │ ┌──────────────────────┐ │
                        │ │ Filters              │ │
                        │ │ Banggia:             │ │
                        │ │ ☑ Bán lẻ            │ │
                        │ │ ☑ Bán sỉ            │ │
                        │ │ ☑ VIP               │ │
                        │ │ Products: [Select]   │ │
                        │ └──────────────────────┘ │
                        │                          │
                        │ TAB: Comparison          │
                        │ ┌──────────────────────┐ │
                        │ │ Comparison Table     │ │
                        │ │ ┌──┬───┬───┬───┬──┐ │ │
                        │ │ │  │BG1│BG2│BG3│Δ │ │ │
                        │ │ │SP│12k│10k│11k│20│ │ │
                        │ │ │  │Max│Min│Avg│% │ │ │
                        │ │ └──┴───┴───┴───┴──┘ │ │
                        │ │ Legend:              │ │
                        │ │ 🟢 Lowest            │ │
                        │ │ 🔴 Highest           │ │
                        │ └──────────────────────┘ │
                        │                          │
                        │ TAB: Predictions         │
                        │ ┌──────────────────────┐ │
                        │ │ Trend Forecasts      │ │
                        │ │ ┌──┬───┬──┬──┬──┬─┐ │ │
                        │ │ │  │Now│30│60│90│T│ │ │
                        │ │ │SP│12k│13│14│15│↗│ │ │
                        │ │ │  │   │  │  │  │%│ │ │
                        │ │ │  │   │  │  │  │85│ │ │
                        │ │ └──┴───┴──┴──┴──┴─┘ │ │
                        │ │ Confidence:          │ │
                        │ │ ████████░░ 85%       │ │
                        │ └──────────────────────┘ │
                        │ [Export Report]          │
                        └──────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  DASHBOARD WIDGET                                                        │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────┐                             │
│  │ 🔔 Thay Đổi Giá Gần Đây          [↗️]  │                             │
│  ├────────────────────────────────────────┤                             │
│  │ 📈 Rau xanh                     +20%    │                             │
│  │    10,000đ → 12,000đ                   │                             │
│  │    Vừa xong                            │                             │
│  ├────────────────────────────────────────┤                             │
│  │ 📉 Rau cải                      -10%    │                             │
│  │    15,000đ → 13,500đ                   │                             │
│  │    1 giờ trước                         │                             │
│  ├────────────────────────────────────────┤                             │
│  │ [Xem tất cả (5)]                       │                             │
│  └────────────────────────────────────────┘                             │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  SHARED SERVICES                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│  PriceHistoryService                                                     │
│  - bulkUpdatePrices()                                                    │
│  - verifyOrderPrices()                                                   │
│  - getPriceHistory()                                                     │
│  - getCurrentPrice()                                                     │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  COLOR CODING SYSTEM                                                     │
├─────────────────────────────────────────────────────────────────────────┤
│  🔴 Red    = Increase, High Risk, Negative                              │
│  🟢 Green  = Decrease, Low Risk, Positive                               │
│  🟡 Orange = Medium Risk, Warnings                                      │
│  🔵 Blue   = Information, Neutral                                       │
│  ⚪ Gray   = Stable, No Change                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## Component Dependencies

```
BulkPriceUpdateComponent
  ├── PriceHistoryService
  ├── MatDialog
  ├── MatSnackBar
  └── xlsx library

PriceAlertsComponent
  ├── PriceHistoryService (future)
  ├── MatDialog
  └── MatSnackBar

PriceAlertsWidgetComponent
  ├── Router
  └── Notification Service (future)

PriceAnalyticsComponent
  ├── PriceHistoryService (future)
  └── MatDatepicker

PriceComparisonComponent
  ├── PriceHistoryService (future)
  └── Chart library (future)
```

## Data Flow

```
User Action
    ↓
Component
    ↓
Service (PriceHistoryService)
    ↓
API Call (HTTP)
    ↓
Backend Server
    ↓
Database
    ↓
Response
    ↓
Component State Update
    ↓
UI Refresh
```

---

**Created**: January 10, 2025  
**Version**: 2.0.0  
**Purpose**: Visual reference for Phase 2 architecture
