# kataoffical
# github
git add .
git commit -m "update"
git push

npx create-nx-workspace@latest kataoffical --preset=angular-nest

npx bun add @prisma/client
npx bun add -d prisma
npx bun prisma migrate dev --name all1.1 --skip-generate
npx prisma db push
npx bun prisma generate 
npx ts-node prisma/scriptdb/exportData.ts
npx ts-node prisma/scriptdb/seed.ts
npx ts-node prisma/scriptdb/backup.ts
npx ts-node prisma/scriptdb/restore.ts
npx ts-node prisma/scriptdb/user.ts

npm install -g npm-check-updates
npx npm-check-updates
npx npm-check-updates -u

docker builder prune -af
docker image prune -a -f
docker volume prune -a -f
docker network prune -f

docker network ls
docker network inspect multi_service_crm_v2_app-network

docker stats multi_service_crm_v2-redis-1

docker exec -it admin_ui_app /bin/bash
docker exec -it admin_ui_app /bin/sh
docker run -it tazagroup-admin-ui /bin/bash

--- Simulated Nx Structure and Config Files Created Successfully (with Landing Page & Bun Dockerfiles)! ---      
--- [!!!] REQUIRED NEXT STEPS (Using Bun) ---
1. Ensure you are inside the 'duanv1' directory.
2. Install root dependencies: bun install
3. Run 'nx generate' commands (can use 'bun nx g ...'):
   (Adjust options as needed. Script assumes these directory structures)

   # Backend Apps (NestJS):
   npx nx add @nx/nest
   bun nx g @nx/nest:app shared-core-api --directory=apps/shared-core-api --projectNameAndRootFormat=as-provided 
   bun nx g @nx/nest:app academy-api --directory=apps/academy-api --projectNameAndRootFormat=as-provided
   bun nx g @nx/nest:app landing-page-builder-api --directory=apps/landing-page-builder-api --projectNameAndRootFormat=as-provided

   # Frontend Apps (Angular):
   npx nx add @nx/angular
   bun nx g @nx/angular:app admin-ui --directory=apps/admin-ui --style=scss --routing --prefix=admin --projectNameAndRootFormat=as-provided
   bun nx g @nx/angular:app spa-ui --directory=apps/spa-ui --style=scss --routing --prefix=spa --projectNameAndRootFormat=as-provided
   # (Landing Page UI integrated into admin-ui)

   # Shared Libraries (Example):
   bun nx g @nx/js:lib shared/dto --directory=libs/shared/dto --publishable --importPath=@duanv1/shared/dto --projectNameAndRootFormat=as-provided
   bun nx g @nx/js:lib landing-page/interfaces --directory=libs/landing-page/interfaces --publishable --importPath=@duanv1/landing-page/interfaces --projectNameAndRootFormat=as-provided

4. IMPORTANT: After generating, the 'nx generate' commands WILL OVERWRITE Dockerfiles etc.
   **COPY THE CONTENTS** from the files generated by **THIS SCRIPT**
   and **PASTE/REPLACE** into the corresponding files created/overwritten by 'nx generate'.
5. Review files (.env, docker-compose.yml, Nginx, Prisma schemas, Dockerfiles).
   Ensure Prisma 'binaryTargets' include "linux-musl-openssl-3.0.x" for Alpine.
6. Add Prisma dependencies using Bun:
   bun add @prisma/client
   bun add -d prisma
7. Dockerfiles now include 'bunx prisma generate'. Building images should generate clients.
   For manual generation during dev: bun nx run <backend-app>:prisma-generate
8. Configure 'baseHref' in Angular apps' project.json to match Nginx paths.
9. Develop Landing Page builder module in 'admin-ui'.
10. Run: docker-compose up -d --build
    (First build installs deps and generates Prisma clients via Docker).

Optimize-VHD -Path "C:\Users\Admin\AppData\Local\Docker\wsl\disk\docker_data.vhdx" -Mode Full