import{c as Ft}from"./chunk-C5TPX4JJ.js";import{a as j,b as Tt,c as Et,e as It,f as At,g as U,h as N,i as Q}from"./chunk-FGSMX4RS.js";import{a as yt}from"./chunk-7EWBI3JX.js";import{a as Bt}from"./chunk-U25RZHHK.js";import{a as Ct}from"./chunk-VESX5EBZ.js";import{a as G,b as K,c as jt,d as $,h as Z}from"./chunk-4U2P6WBJ.js";import{a as Zt}from"./chunk-TAV3WY2S.js";import{a as H,b as q,c as Ot,d as X}from"./chunk-QMRSJ7JC.js";import{a as St,b as Lt,c as Dt}from"./chunk-KB5W7DYD.js";import{b as Ht}from"./chunk-NR2TUH7E.js";import{c as qt}from"./chunk-YT2W7ZO3.js";import{a as Vt}from"./chunk-IIEAWFBT.js";import{a as wt}from"./chunk-B7WZKTHG.js";import{a as kt}from"./chunk-7RWCIHFI.js";import{a as ft,b as vt,c as xt,e as V}from"./chunk-J46V5OPK.js";import{b as zt,g as Rt,j as Pt,n as W,p as Ut,u as Nt,v as Y,x as Qt,y as J}from"./chunk-BXIQR7JC.js";import{a as Mt,b as B}from"./chunk-TQQP66X2.js";import{I as S,p as ut,r as bt}from"./chunk-GWK5CNU7.js";import{b as _t,d as P,e as gt}from"./chunk-ZWGXNZFM.js";import{n as w}from"./chunk-J6GTHUTS.js";import{Ac as ht,Bc as pt,Da as nt,Db as A,Ec as M,Mb as O,Nb as s,Qb as ct,Sb as ot,Vb as lt,Wb as st,Xb as t,Yb as a,Zb as v,bc as x,da as E,fc as d,gb as y,gc as g,ia as C,lb as c,mc as F,nc as z,oc as R,qa as at,qb as b,ra as h,rc as k,sa as p,sc as o,tc as _,uc as mt,xb as f,yb as I,zc as dt}from"./chunk-NRHAEK6V.js";import{g as $t,j as T}from"./chunk-6DNLS54U.js";var Xt={Logoimage:"/images/logo-full.svg"};var D=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=I({type:r});static \u0275inj=E({imports:[S,S]})}return r})();var Wt=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=I({type:r});static \u0275inj=E({imports:[bt,S,xt,Vt,D]})}return r})();var tt=class r{constructor(e,i){this.dialogRef=e;this.data=i;this.Detail=i}Detail={};onClick(){this.dialogRef.close({Detail:this.Detail})}static \u0275fac=function(i){return new(i||r)(b(G),b(K))};static \u0275cmp=f({type:r,selectors:[["app-deletedialog"]],decls:13,vars:1,consts:[[1,"p-4","flex","flex-col","space-y-2"],[1,"font-bold","text-xl"],[1,"flex","flex-row","space-x-2","items-center","w-full","p-4"],[1,"font-bold","text-red-500"],[1,"relative","flex","flex-row","space-x-2","justify-center"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],["mat-dialog-close","false",1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded"]],template:function(i,n){i&1&&(t(0,"div",0)(1,"span",1),o(2,"Xo\xE1"),a(),t(3,"div",2)(4,"span"),o(5,"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn xo\xE1 "),a(),t(6,"span",3),o(7),a()(),t(8,"div",4)(9,"button",5),d("click",function(){return n.onClick()}),o(10," \u0110\u1ED3ng \xFD "),a(),t(11,"button",6),o(12," Hu\u1EF7 "),a()()()),i&2&&(c(7),_(n.Detail.Title||n.Detail.email))},dependencies:[w,Y,W,J,Z,$],encapsulation:2})};var te=()=>({standalone:!0}),ee=(r,e)=>e.id;function ie(r,e){if(r&1){let i=x();t(0,"mat-form-field",3)(1,"mat-label"),o(2),a(),t(3,"input",8),pt("ngModelChange",function(l){let m=h(i).$implicit,u=g();return ht(u.Detail[m.value],l)||(u.Detail[m.value]=l),p(l)}),a()()}if(r&2){let i=e.$implicit,n=g();c(2),_(i.Title),c(),dt("ngModel",n.Detail[i.value]),s("ngModelOptions",M(4,te))("placeholder",i.Title)}}function ae(r,e){r&1&&(t(0,"span",4),o(1,"There are no items."),a())}var et=class r{constructor(e,i){this.dialogRef=e;this.data=i;this.Detail=i.Detail,this.Forms=i.Forms}Detail={};Forms=[];FillSlug(){this.Detail.Slug=qt(this.Detail.Title)}onSaveClick(){this.dialogRef.close({Detail:this.Detail})}static \u0275fac=function(i){return new(i||r)(b(G),b(K))};static \u0275cmp=f({type:r,selectors:[["app-updatedialog"]],decls:12,vars:1,consts:[[1,"p-8","lg:w-[50vw]","w-[80vw]","max-h-[90vh]","flex","flex-col","space-y-8"],[1,"relative","font-bold","text-xl"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],["appearance","outline",1,"w-full"],[1,"p-2","text-center"],[1,"relative","flex","flex-row","space-x-2","justify-center"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],["mat-dialog-close","false",1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded"],["matInput","",3,"ngModelChange","ngModel","ngModelOptions","placeholder"]],template:function(i,n){i&1&&(t(0,"div",0)(1,"span",1),o(2,"C\u1EADp Nh\u1EADt"),a(),t(3,"div",2),lt(4,ie,4,5,"mat-form-field",3,ee,!1,ae,2,0,"span",4),a(),t(7,"div",5)(8,"button",6),d("click",function(){return n.onSaveClick()}),o(9," \u0110\u1ED3ng \xDD "),a(),t(10,"button",7),o(11," \u0110\xF3ng "),a()()()),i&2&&(c(4),st(n.Forms))},dependencies:[w,Y,Nt,Ut,W,zt,Rt,Pt,J,Qt,Z,$,Ht],encapsulation:2})};function re(r,e){if(r&1){let i=x();t(0,"mat-tree-node")(1,"div",6)(2,"a",7),o(3),a(),t(4,"mat-menu",null,0)(6,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Update(l.Item))}),t(7,"div",9)(8,"span",10),o(9,"edit"),a(),t(10,"span"),o(11,"S\u1EEDa"),a()()(),t(12,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Delete(l.Item))}),t(13,"div",9)(14,"span",11),o(15,"delete"),a(),t(16,"span"),o(17,"Xo\xE1"),a()()()()()()}if(r&2){let i=e.$implicit;c(2),s("routerLink",i.Item.slug),c(),_(i.Item.title)}}function ce(r,e){if(r&1){let i=x();t(0,"mat-tree-node",12)(1,"div",6)(2,"a",13),o(3),a(),t(4,"a",14)(5,"span",15),o(6),a()(),t(7,"mat-menu",null,1)(9,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Update(l.Item))}),t(10,"div",9)(11,"span",10),o(12,"edit"),a(),t(13,"span"),o(14,"S\u1EEDa"),a()()(),t(15,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Delete(l.Item))}),t(16,"div",9)(17,"span",11),o(18,"delete"),a(),t(19,"span"),o(20,"Xo\xE1"),a()()()()()()}if(r&2){let i=e.$implicit,n=g(2);s("cdkTreeNodeTypeaheadLabel",i.title),c(2),s("routerLink",i.Slug),c(),_(i.Item.title),c(),O("aria-label","Toggle "+i.Item.title),c(2),mt(" ",n.treeControl.isExpanded(i)?"expand_more":"chevron_right"," ")}}function le(r,e){if(r&1&&(t(0,"mat-tree",2),A(1,re,18,2,"mat-tree-node",4)(2,ce,21,5,"mat-tree-node",5),a()),r&2){let i=g();s("dataSource",i.dataSource)("treeControl",i.treeControl),c(2),s("matTreeNodeDefWhen",i.hasChild)}}function se(r,e){r&1&&(t(0,"span",3),o(1,"Ch\u01B0a C\xF3 D\u1EEF Li\u1EC7u"),a())}var it=class r{ListMenu=[];UpdateEmit=new nt;DeleteEmit=new nt;_transformer=(e,i)=>({expandable:!!e?.children&&e?.children.length>0,Item:e,level:i});treeControl=new j(e=>e.level,e=>e.expandable);treeFlattener=new N(this._transformer,e=>e.level,e=>e.expandable,e=>e?.children);dataSource=new Q(this.treeControl,this.treeFlattener);dialog=C(jt);constructor(){}hasChild=(e,i)=>i.expandable;ngOnChanges(e){this.ListMenu=e.ListMenu.currentValue,this.dataSource.data=this.ListMenu,this.treeControl.expandAll()}Update(e){e.Parent=this.ListMenu,this.dialog.open(et,{data:e}).afterClosed().subscribe(n=>{n!="false"&&this.UpdateEmit.emit(n.Detail)})}Delete(e){this.dialog.open(tt,{data:e}).afterClosed().subscribe(n=>{n!="false"&&this.DeleteEmit.emit(n.Detail)})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=f({type:r,selectors:[["app-treemenu"]],inputs:{ListMenu:"ListMenu"},outputs:{UpdateEmit:"UpdateEmit",DeleteEmit:"DeleteEmit"},features:[at],decls:2,vars:1,consts:[["menu1","matMenu"],["menu2","matMenu"],[1,"!bg-white","p-2",3,"dataSource","treeControl"],[1,"p-2","text-center"],[4,"matTreeNodeDef"],["matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"w-full","flex","items-center","justify-between"],["routerLinkActive","!bg-slate-200",1,"hover:bg-slate-200","rounded-lg","p-2","truncate","flex-grow",3,"routerLink"],["mat-menu-item","",3,"click"],[1,"flex","flex-row","items-center"],[1,"material-symbols-outlined","text-blue-500","mr-2"],[1,"material-symbols-outlined","text-red-500","mr-2"],["matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],[1,"hover:bg-slate-200","rounded-lg","p-2","truncate","flex-grow",3,"routerLink"],["mat-icon-button","","matTreeNodeToggle",""],[1,"material-symbols-outlined"]],template:function(i,n){i&1&&A(0,le,3,3,"mat-tree",2)(1,se,2,0,"span",3),i&2&&ot(n.ListMenu.length>0?0:1)},dependencies:[U,Et,At,It,Tt,V,vt,B,w,P,gt,X,q,H],styles:['mat-tree-node[aria-level="2"][_ngcontent-%COMP%]{padding-left:20px}mat-tree-node[aria-level="3"][_ngcontent-%COMP%]{padding-left:40px}mat-tree-node[aria-level="4"][_ngcontent-%COMP%]{padding-left:60px}'],changeDetection:0})};var Kt=$t(Zt());var me=["drawer"],de=["drawer1"],he=()=>["/admin/profile"],pe=()=>["/admin/account"],Gt=class r{constructor(e,i,n){this._breakpointObserver=e;this._UserService=i;this._ErrorLogService=n}isFullscreen=!1;showFiller=!1;Config=Xt;User={};version=(0,Kt.default)().format("hh:mm:ss dd/mm/yyyy");_transformer=(e,i)=>({expandable:!!e?.children&&e?.children.length>0,title:e.title,level:i,node:e});treeControl=new j(e=>e.level,e=>e.expandable);treeFlattener=new N(this._transformer,e=>e.level,e=>e.expandable,e=>e?.children);dataSource=new Q(this.treeControl,this.treeFlattener);_MenuService=C(Bt);hasChild=(e,i)=>i.expandable;drawer;drawer1;_snackBar=C(wt);ListMenu=[];ngOnInit(){return T(this,null,function*(){yield this._UserService.getProfile().then(e=>T(this,null,function*(){if(e){this.User=e;let i=this.User?.permissions?.map(n=>n.name);yield this._MenuService.getTreeMenu(i),this.ListMenu=this._MenuService.ListMenu(),this.dataSource.data=this._MenuService.ListMenu()}})),this._breakpointObserver.observe([kt.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.drawer.close()):(this.drawer.mode="side",this.drawer.open())})})}logout(){this._UserService.logout().then(e=>{e&&setTimeout(()=>{window.location.reload()},100)})}ClearCache(){return T(this,null,function*(){let e=localStorage.getItem("token"),i=localStorage.getItem("permissions");localStorage.clear(),e&&localStorage.setItem("token",e),i&&localStorage.setItem("permissions",i),yield this._ErrorLogService.ClearRedisCache(),this._snackBar.open("Xo\xE1 Cache Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}static \u0275fac=function(i){return new(i||r)(b(ut),b(yt),b(Ct))};static \u0275cmp=f({type:r,selectors:[["app-adminmain"]],viewQuery:function(i,n){if(i&1&&(F(me,7),F(de,7)),i&2){let l;z(l=R())&&(n.drawer=l.first),z(l=R())&&(n.drawer1=l.first)}},decls:91,vars:22,consts:[["drawer",""],["menu","matMenu"],["menu1","matMenu"],["drawer1",""],["autosize","",1,"!w-screen","!h-screen"],["mode","side","position","start"],[1,"relative","h-full","flex","flex-col","space-y-2"],[1,"relative","flex","flex-col","space-y-2","p-2",3,"href"],["alt","Logo",1,"h-10","object-fill",3,"src"],[1,"relative","h-full","overflow-auto","p-2"],[3,"ListMenu"],[1,"relative","w-full","justify-between","flex","flex-row","space-x-2","items-center","p-2"],[1,"flex","flex-row","space-x-2"],["alt","Avatar",1,"max-w-14","max-h-14","object-cover","rounded-full",3,"src"],[1,"flex","flex-col"],[1,"font-bold"],[1,"italic","text-xs"],[1,"italic","text-[8px]"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"relative","flex","flex-col","w-full","h-full","primary"],[1,"relative","flex","flex-row","space-x-2","justify-between","items-center","p-1","bg-[#3154A1]"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"flex","flex-row","space-x-2","items-center","p-4"],["mat-menu-item","",3,"href"],["mode","over","position","end"]],template:function(i,n){if(i&1){let l=x();t(0,"mat-drawer-container",4)(1,"mat-drawer",5,0)(3,"div",6)(4,"a",7),v(5,"img",8),a(),t(6,"div",9),v(7,"app-treemenu",10),a(),t(8,"div",11)(9,"div",12),v(10,"img",13),t(11,"div",14)(12,"div",15),o(13),a(),t(14,"div",16),o(15),a(),t(16,"div",16),o(17),a(),t(18,"div",17),o(19),a()()(),t(20,"button",18)(21,"mat-icon"),o(22,"more_vert"),a()(),t(23,"mat-menu",null,1)(25,"a",19)(26,"mat-icon"),o(27,"account_circle"),a(),t(28,"span"),o(29,"Profile"),a()(),t(30,"a",19)(31,"mat-icon"),o(32,"account_circle"),a(),t(33,"span"),o(34,"Account"),a()(),t(35,"button",20)(36,"mat-icon"),o(37,"settings"),a(),t(38,"span"),o(39,"Settings"),a()(),t(40,"button",21),d("click",function(){return h(l),p(n.logout())}),t(41,"mat-icon"),o(42,"logout"),a(),t(43,"span"),o(44,"Logout"),a()()()()()(),t(45,"div",22)(46,"div",23)(47,"div",24)(48,"button",25),d("click",function(){h(l);let u=k(2);return p(u.toggle())}),t(49,"mat-icon"),o(50,"menu"),a()(),t(51,"button",26)(52,"mat-icon"),o(53,"search"),a()()(),t(54,"div",24)(55,"button",25),d("click",function(){return h(l),p(n.ClearCache())}),t(56,"mat-icon"),o(57,"cached"),a()(),t(58,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(59,"mat-icon"),o(60,"dashboard"),a()(),t(61,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(62,"mat-icon"),o(63,"notifications"),a()(),t(64,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(65,"mat-icon"),o(66,"chat"),a()(),t(67,"button",18)(68,"mat-icon"),o(69,"account_circle"),a()(),t(70,"mat-menu",null,2)(72,"div",27),v(73,"img",13),t(74,"div",14)(75,"div",15),o(76),a(),t(77,"div",16),o(78),a(),t(79,"div",16),o(80),a()()(),t(81,"a",28),o(82,"Th\xF4ng Tin"),a(),t(83,"button",20),o(84,"C\xE0i \u0110\u1EB7t"),a(),t(85,"button",21),d("click",function(){return h(l),p(n.logout())}),o(86,"\u0110\u0103ng Xu\u1EA5t"),a()()()(),v(87,"router-outlet"),a(),t(88,"mat-drawer",29,3),v(90,"div",6),a()()}if(i&2){let l=k(24),m=k(71);c(4),s("href","admin/welcome",y),c(),s("src",n.Config.Logoimage,y),c(2),s("ListMenu",n.ListMenu),c(3),s("src",n.User==null?null:n.User.Avatar,y),c(3),_(n.User==null?null:n.User.Hoten),c(2),_(n.User==null?null:n.User.Vitri),c(2),_(n.User==null?null:n.User.email),c(2),_(n.version),c(),s("matMenuTriggerFor",l),c(5),s("routerLink",M(20,he)),c(5),s("routerLink",M(21,pe)),c(37),s("matMenuTriggerFor",m),c(6),s("src",n.User==null?null:n.User.Avatar,y),c(3),_(n.User==null?null:n.User.Hoten),c(2),_(n.User==null?null:n.User.Vitri),c(2),_(n.User==null?null:n.User.email),c(),s("href","/admin/profile",y),c(7),ct(n.isFullscreen?"!w-screen":"!w-1/3")}},dependencies:[U,Dt,St,Lt,V,ft,B,Mt,_t,X,q,H,Ot,Ft,D,Wt,w,P,it],encapsulation:2})};export{Gt as a};
