type Query {
  # Universal resolvers
  findMany(
    modelName: String!
    where: JSON
    orderBy: JSON
    skip: Int
    take: Int
    include: JSON
    select: JSON
  ): JSON

  findUnique(
    modelName: String!
    where: JSON!
    include: JSON
    select: JSON
  ): JSON

  modelMetadata(modelName: String!): JSON

  health: JSON

  getAvailableModels: [String!]!

  testSelectQuery(modelName: String!): JSON!

  # Dashboard resolvers
  aggregateDonhang(batdau: String, ketthuc: String): AggregateResult
  aggregateDathang(batdau: String, ketthuc: String): AggregateResult
  aggregateSanpham: AggregateResult
  aggregateKhachhang: AggregateResult
  aggregateNhacungcap: AggregateResult
  
  dailyMonthlyReport(
    batdau: String!
    ketthuc: String!
    groupBy: String!
  ): [DailyMonthlyReportItem!]!
  
  topProductsByQuantity(
    batdau: String!
    ketthuc: String!
    limit: Int!
  ): [TopProductItem!]!
  
  topProductsByValue(
    batdau: String!
    ketthuc: String!
    limit: Int!
  ): [TopProductItem!]!
}

type Mutation {
  createOne(
    modelName: String!
    data: JSON!
    include: JSON
    select: JSON
  ): JSON

  updateOne(
    modelName: String!
    where: JSON!
    data: JSON!
    include: JSON
    select: JSON
  ): JSON

  deleteOne(
    modelName: String!
    where: JSON!
  ): JSON

  batchCreate(
    modelName: String!
    data: [JSON!]!
  ): JSON

  batchUpdate(
    modelName: String!
    items: [JSON!]!
  ): JSON

  batchDelete(
    modelName: String!
    ids: [String!]!
  ): JSON

  clearDataLoaderCache(modelName: String): JSON

  createRecord(data: JSON!, modelName: String!): JSON!

  deleteRecord(modelName: String!, where: JSON!): JSON!

  updateRecord(data: JSON!, modelName: String!, where: JSON!): JSON!
}

# Dashboard types
type AggregateResult {
  _count: CountResult
  _sum: SumResult
}

type CountResult {
  _all: Int
}

type SumResult {
  tongtien: Float
  tongvat: Float
}

type DailyMonthlyReportItem {
  period: String!
  totalDonhang: Int!
  totalRevenue: Float!
  totalProfit: Float!
}

type TopProductItem {
  sanpham: ProductInfo!
  totalQuantity: Float!
  totalValue: Float!
}

type ProductInfo {
  id: String!
  title: String
  masp: String
}

scalar JSON
scalar DateTime
