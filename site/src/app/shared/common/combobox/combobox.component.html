<div class="relative w-full">
    <div class="relative">
        <input
            type="text"
            [(ngModel)]="searchTerm"
            (keyup)="filterItems($event)"
            (click)="toggleDropdown()"
            [placeholder]="placeholder"
            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white transition-colors duration-300"
        />
        @if (selectedItem)
        {
            <button
                (click)="clearSelection()"
                class="absolute right-8 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-all duration-300"
            >
                ✕
            </button>
        }
        <button
            (click)="toggleDropdown()"
            class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 transition-colors duration-300"
        >
            ▼
        </button>
    </div>

    <div class="absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto dropdown {{ isOpen ? 'block' : 'hidden' }}">
        <ul class="divide-y divide-gray-100">
            @for (item of filteredItems; track item)
            {
                <li
                    (click)="selectItem(item)"
                    class="px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors duration-300"
                >
                    {{ item[displayField] }}
                </li>
            }
            @if (!filteredItems.length)
            {
                <li class="px-4 py-2 text-gray-500">
                    No results found
                </li>
            }
        </ul>
    </div>
</div>