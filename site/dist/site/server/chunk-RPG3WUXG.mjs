import './polyfills.server.mjs';
import{a as ie}from"./chunk-EAUW4EGV.mjs";import{a as ne}from"./chunk-TFQ7EZ26.mjs";import{a as te}from"./chunk-OJE3I62Y.mjs";import"./chunk-PDYHWB5Z.mjs";import"./chunk-UNZ2764M.mjs";import{b as ee}from"./chunk-T52EWUNQ.mjs";import"./chunk-DLPB5WQD.mjs";import"./chunk-OTS6ZCGN.mjs";import"./chunk-FH7OS6DF.mjs";import"./chunk-AA2DI344.mjs";import"./chunk-N7HVX2RE.mjs";import"./chunk-EAWATF7W.mjs";import{h as O}from"./chunk-7WVLK7NL.mjs";import{b as $}from"./chunk-U4C5JQFR.mjs";import"./chunk-ZUAIVIEL.mjs";import"./chunk-KYGAVK76.mjs";import{d as Y,e as Z}from"./chunk-JZQCFZAG.mjs";import{d as U}from"./chunk-CATKLGCT.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-UFJIYV3D.mjs";import{b as L}from"./chunk-M6HKJU2S.mjs";import"./chunk-7TFSUZVW.mjs";import"./chunk-OXVTSTST.mjs";import{a as k,d as F}from"./chunk-SHC3MXGU.mjs";import"./chunk-TWGDF6AH.mjs";import"./chunk-7EE7XTXV.mjs";import"./chunk-UF55REJY.mjs";import{a as X,f as H,g as q,i as J,j as Q}from"./chunk-DU7T7LQG.mjs";import{b as K,f as R,i as j,k as z,m as G}from"./chunk-MOFNWV3Q.mjs";import{a as P,b as N}from"./chunk-N4NXCYSC.mjs";import"./chunk-Q7G3UJA2.mjs";import"./chunk-YTRXHA5W.mjs";import{c as A,e as I,f as W}from"./chunk-2WH4WIRM.mjs";import"./chunk-7EXRZSZG.mjs";import"./chunk-V4V65LHO.mjs";import"./chunk-SVM2HAAI.mjs";import"./chunk-INK5SBFN.mjs";import{Ac as S,Pb as D,Qb as x,Sb as y,Sc as B,Tb as M,Ub as b,Vb as u,Wb as n,Xb as a,ac as E,ec as g,fc as d,gb as m,ka as f,pa as s,qa as c,sb as T,tc as l,uc as v,vc as V,yc as h,za as w,zc as _}from"./chunk-LD2AVDEF.mjs";import"./chunk-W2PR56MU.mjs";import{j as C}from"./chunk-RIAI3ORJ.mjs";function oe(p,i){if(p&1){let e=E();n(0,"button",1),g("click",function(){s(e);let t=d();return c(t.handleSanphamAction())}),n(1,"mat-icon"),l(2,"save"),a()()}}function re(p,i){if(p&1){let e=E();n(0,"button",1),g("click",function(){s(e);let t=d();return c(t.toggleEdit())}),n(1,"mat-icon"),l(2,"edit"),a()()}}function le(p,i){if(p&1){let e=E();n(0,"div",6)(1,"div",8),l(2,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),n(3,"div",9)(4,"button",10),g("click",function(){s(e);let t=d();return c(t.DeleteData())}),l(5,"\u0110\u1ED3ng \xDD"),a(),n(6,"button",11),g("click",function(){s(e);let t=d();return c(t.toggleDelete())}),l(7,"Hu\u1EF7 B\u1ECF"),a()()()}}function me(p,i){if(p&1&&(n(0,"mat-option",15),l(1),a()),p&2){let e=i.$implicit;u("value",e.id),m(),v(e.title)}}function pe(p,i){if(p&1){let e=E();n(0,"div",3)(1,"mat-form-field",12)(2,"mat-label"),l(3),a(),n(4,"input",21),S("ngModelChange",function(t){let o=s(e).$implicit;return _(o.type,t)||(o.type=t),c(t)}),a()(),n(5,"mat-form-field",12)(6,"mat-label"),l(7),a(),n(8,"input",22),S("ngModelChange",function(t){let o=s(e).$implicit;return _(o.gia,t)||(o.gia=t),c(t)}),a()(),n(9,"mat-form-field",12)(10,"mat-label"),l(11,"T\u1EEB"),a(),n(12,"input",23),S("ngModelChange",function(t){let o=s(e).$implicit;return _(o.min,t)||(o.min=t),c(t)}),a()(),n(13,"mat-form-field",12)(14,"mat-label"),l(15,"\u0110\u1EBFn"),a(),n(16,"input",24),S("ngModelChange",function(t){let o=s(e).$implicit;return _(o.max,t)||(o.max=t),c(t)}),a()(),n(17,"button",25),g("click",function(){let t=s(e).$index,o=d(2);return c(o.removeBacgia(t))}),n(18,"mat-icon"),l(19,"remove_circle"),a()()()}if(p&2){let e=i.$implicit,r=i.$index,t=d(2);m(3),V("\u0110i\u1EC1u Ki\u1EC7n ",r+1),m(),h("ngModel",e.type),u("disabled",!t.isEdit()),m(3),V("Gi\xE1 ",r+1),m(),h("ngModel",e.gia),u("disabled",!t.isEdit()),m(4),h("ngModel",e.min),u("disabled",!t.isEdit()),m(4),h("ngModel",e.max),u("disabled",!t.isEdit())}}function se(p,i){if(p&1){let e=E();n(0,"div",7)(1,"mat-form-field",12)(2,"mat-label"),l(3,"Ti\xEAu \u0110\u1EC1"),a(),n(4,"input",13),S("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().title,t)||(o.DetailSanpham().title=t),c(t)}),a()(),n(5,"mat-form-field",12)(6,"mat-label"),l(7,"Danh M\u1EE5c"),a(),n(8,"mat-select",14),S("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().danhmucId,t)||(o.DetailSanpham().danhmucId=t),c(t)}),M(9,me,2,2,"mat-option",15,y),a()(),n(11,"div",3)(12,"mat-form-field",12)(13,"mat-label"),l(14,"\u0110\u01A1n V\u1ECB T\xEDnh"),a(),n(15,"input",16),S("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().donvitinh,t)||(o.DetailSanpham().donvitinh=t),c(t)}),a()(),n(16,"button",1),g("click",function(){s(e);let t=d();return c(t.addBacgia())}),n(17,"mat-icon"),l(18,"add_circle"),a()()(),M(19,pe,20,10,"div",3,y),n(21,"mat-form-field",12)(22,"mat-label"),l(23,"Tr\u1EA1ng Th\xE1i"),a(),n(24,"mat-select",14),S("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().status,t)||(o.DetailSanpham().status=t),c(t)}),n(25,"mat-option",17),l(26,"Nh\xE1p"),a(),n(27,"mat-option",18),l(28,"\u0110\xE3 Xu\u1EA5t B\u1EA3n"),a(),n(29,"mat-option",19),l(30,"\u0110\xE3 L\u01B0u Tr\u1EEF"),a()()(),n(31,"mat-form-field",12)(32,"mat-label"),l(33,"M\xF4 T\u1EA3"),a(),n(34,"textarea",20),S("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().description,t)||(o.DetailSanpham().description=t),c(t)}),a()()()}if(p&2){let e=d();m(4),h("ngModel",e.DetailSanpham().title),u("disabled",!e.isEdit()),m(4),h("ngModel",e.DetailSanpham().danhmucId),u("disabled",!e.isEdit()),m(),b(e.ListDanhmuc()),m(6),h("ngModel",e.DetailSanpham().donvitinh),u("disabled",!e.isEdit()),m(4),b(e.DetailSanpham().bacgia),m(5),h("ngModel",e.DetailSanpham().status),u("disabled",!e.isEdit()),m(10),h("ngModel",e.DetailSanpham().description),u("disabled",!e.isEdit())}}var ae=class p{_ListSanphamComponent=f(ie);_SanphamService=f(te);_DanhmucService=f(ne);_route=f(k);_router=f(F);_snackBar=f(L);DetailSanpham=this._SanphamService.DetailSanpham;isEdit=w(!1);isDelete=w(!1);sanphamId=this._SanphamService.sanphamId;ListDanhmuc=this._DanhmucService.ListDanhmuc;constructor(){this._route.paramMap.subscribe(i=>{let e=i.get("id");this._SanphamService.setSanphamId(e)}),B(()=>C(this,null,function*(){let i=this._SanphamService.sanphamId();yield this._DanhmucService.getAllDanhmuc(),i||(this._router.navigate(["sanpham"]),this._ListSanphamComponent.drawer.close()),i==="new"?(this.DetailSanpham.set({bacgia:[]}),this._ListSanphamComponent.drawer.open(),this.isEdit.update(e=>!e),console.log("Creating new sanpham",this.DetailSanpham()),this._router.navigate(["sanpham","new"])):(yield this._SanphamService.getSanphamBy({id:i,isOne:!0}),this._ListSanphamComponent.drawer.open(),this._router.navigate(["sanpham",i]))}))}ngOnInit(){return C(this,null,function*(){yield this._DanhmucService.getAllDanhmuc()})}addBacgia(){this.DetailSanpham.update(i=>(i.bacgia=i.bacgia||[],i.bacgia.push({type:"",min:0,max:0,gia:0}),i))}removeBacgia(i){this.DetailSanpham.update(e=>(e.bacgia=e.bacgia||[],i>-1&&e.bacgia.splice(i,1),e))}handleSanphamAction(){return C(this,null,function*(){this.sanphamId()==="new"?yield this.createSanpham():yield this.updateSanpham()})}createSanpham(){return C(this,null,function*(){try{yield this._SanphamService.CreateSanpham(this.DetailSanpham()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(i=>!i)}catch(i){console.error("L\u1ED7i khi t\u1EA1o sanpham:",i)}})}updateSanpham(){return C(this,null,function*(){try{yield this._SanphamService.updateSanpham(this.DetailSanpham()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(i=>!i)}catch(i){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt sanpham:",i)}})}DeleteData(){return C(this,null,function*(){try{yield this._SanphamService.DeleteSanpham(this.DetailSanpham()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["sanpham"])}catch(i){console.error("L\u1ED7i khi x\xF3a sanpham:",i)}})}goBack(){this._router.navigate(["sanpham"]),this._ListSanphamComponent.drawer.close()}trackByFn(i,e){return e.id}toggleEdit(){this.isEdit.update(i=>!i)}toggleDelete(){this.isDelete.update(i=>!i)}FillSlug(){this.DetailSanpham.update(i=>(i.slug=$(i.title),i))}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=T({type:p,selectors:[["app-detailsanpham"]],decls:12,vars:5,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"grid","grid-cols-1","gap-4"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],[3,"value"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u01A1n V\u1ECB T\xEDnh",3,"ngModelChange","ngModel","disabled"],["value","draft"],["value","published"],["value","archived"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xF4 T\u1EA3",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110i\u1EC1u Ki\u1EC7n",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Gi\xE1",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Kho\u1EA3ng Gi\xE1 T\u1EEB",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Kho\u1EA3ng Gi\xE1 \u0110\u1EBFn",3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"button",1),g("click",function(){return r.goBack()}),n(2,"mat-icon"),l(3,"arrow_back"),a()(),n(4,"div",2),l(5),a(),n(6,"div",3),D(7,oe,3,0,"button",4),D(8,re,3,0,"button",4),a()(),n(9,"div",5),D(10,le,8,0,"div",6),D(11,se,35,10,"div",7),a()),e&2){let t;m(5),v(((t=r.DetailSanpham())==null?null:t.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),m(2),x(r.isEdit()?7:-1),m(),x(r.isEdit()?-1:8),m(2),x(r.isDelete()?10:-1),m(),x(r.isDelete()?-1:11)}},dependencies:[q,H,X,Q,J,G,K,z,R,j,N,P,W,I,A,Z,Y,U,O,ee],encapsulation:2})};export{ae as DetailSanphamComponent};
