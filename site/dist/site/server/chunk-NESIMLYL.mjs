import './polyfills.server.mjs';
import{b as Pe}from"./chunk-HZ2GCX6P.mjs";import{b as ce,e as C,f as de,g as _e,h as fe,i as ge,j as Ce,l as he,m as Se,o as ye,p as we,r as Me,s as xe,u as be,v as Ie,w as De,x as h}from"./chunk-ZX5K2QFS.mjs";import{c as U}from"./chunk-P7BNCLK3.mjs";import{e as ue}from"./chunk-GDR2TRV5.mjs";import{b as G}from"./chunk-D6B4XHBJ.mjs";import{b as ee,c as te,d as ie}from"./chunk-TIYKGFPF.mjs";import{f as le,g as me,i as se,j as pe}from"./chunk-FLLXSNSA.mjs";import{b as ae,f as ne,i as oe,m as re}from"./chunk-ZSB4DDWX.mjs";import{a as Y,b as Z}from"./chunk-FDRI42WS.mjs";import{c as W,e as J,f as X}from"./chunk-WL3ZDLJJ.mjs";import{q as Q,u as q}from"./chunk-RO5ZX6QD.mjs";import{Ac as A,Ec as j,Fa as L,Ic as v,Kc as F,Pb as y,Qb as w,Sb as z,Tb as V,Ub as N,Vb as p,Wb as n,Xb as o,Yb as M,Zb as R,_b as B,ac as x,ec as g,fc as s,gb as r,jc as b,ka as k,kc as I,lc as D,pa as d,pc as P,qa as _,sb as K,tc as l,uc as E,vc as f,xc as H,yb as S,yc as O,zc as $}from"./chunk-LD2AVDEF.mjs";import{a as T}from"./chunk-RIAI3ORJ.mjs";var Fe=["drawer"],Te=()=>({standalone:!0});function ke(t,a){if(t&1){let i=x();n(0,"th",22)(1,"span",23),l(2),o(),n(3,"app-searchfilter",24),g("OutFilter",function(m){d(i);let c=s(2);return _(c.onOutFilter(m))}),o()()}if(t&2){let i=s().$implicit,e=s();r(2),f(" ",e.ColumnName[i]," "),r(),p("icon","filter_alt")("ListItem",e.ListItem)("ListFilter",e.ListFilter)("filterItem",e.FilterHederColumn(e.dataSource.filteredData,i))}}function Le(t,a){if(t&1&&(n(0,"span",26),l(1),o()),t&2){let i=s().index;r(),f(" ",i+1," ")}}function Ke(t,a){if(t&1&&(n(0,"span",26),l(1),v(2,"date"),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",F(2,1,i[e],"dd/MM/yyyy")," ")}}function ze(t,a){t&1&&(n(0,"mat-icon",27),l(1,"check_circle"),o())}function Ve(t,a){t&1&&(n(0,"mat-icon",28),l(1,"cancel"),o())}function Ne(t,a){if(t&1&&(n(0,"span",26),y(1,ze,2,0,"mat-icon",27)(2,Ve,2,0,"mat-icon",28),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),w(i[e]?1:2)}}function Re(t,a){if(t&1&&(n(0,"span",26),l(1),v(2,"date"),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",F(2,1,i[e],"dd/MM/yyyy")," ")}}function Be(t,a){if(t&1&&(n(0,"span",26),l(1),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",i[e]," ")}}function He(t,a){if(t&1&&(n(0,"td",25),y(1,Le,2,1,"span",26)(2,Ke,3,4,"span",26)(3,Ne,3,1,"span",26)(4,Re,3,4,"span",26)(5,Be,2,1,"span",26),o()),t&2){let i,e=s().$implicit;r(),w((i=e)==="STT"?1:i==="createdAt"?2:i==="isActive"?3:i==="updatedAt"?4:5)}}function Oe(t,a){if(t&1&&(R(0,5),S(1,ke,4,5,"th",20)(2,He,6,1,"td",21),B()),t&2){let i=a.$implicit;p("matColumnDef",i)}}function $e(t,a){t&1&&M(0,"tr",29)}function Ae(t,a){t&1&&M(0,"tr",30)}function je(t,a){t&1&&(n(0,"tr",31)(1,"td",32),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}var Ee=class t{ListItem=[];displayedColumns=[];ColumnName={};totalItems=0;pageSize=10;currentPage=1;totalPages=1;FilterColumns=JSON.parse(localStorage.getItem("NhacungcapColFilter")||"[]");isFilter=!1;sort;drawer;filterValues={};dataSource=new h([]);_snackBar=k(G);ngOnChanges(a){a.ListItem&&a.ListItem.currentValue,a.displayedColumns&&a.displayedColumns.currentValue&&(this.displayedColumns=[...this.displayedColumns]),a.ColumnName&&a.ColumnName.currentValue&&(this.ColumnName=T({},this.ColumnName)),console.log(this.ListItem),this.totalItems=this.ListItem.length,this.pageSize=this.pageSize||10,this.currentPage=1,this.totalPages=Math.ceil(this.totalItems/this.pageSize),this.calculateTotalPages(),this.updateDataSource()}updateDataSource(){this.dataSource=new h([...this.ListItem]),this.dataSource.sort=this.sort}ngAfterViewInit(){this.dataSource&&(this.dataSource.sort=this.sort)}onOutFilter(a){this.dataSource=new h([...a]),this.dataSource.sort=this.sort}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(a,i){a>this.ListItem.length?(this.pageSize=this.ListItem.length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.ListItem.length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=a,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),i.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let a=(this.currentPage-1)*this.pageSize,i=a+this.pageSize,e=this.ListItem.slice(a,i);this.dataSource.data=e}FilterHederColumn(a,i){return a.filter((m,c,u)=>c===u.findIndex(ve=>ve[i]===m[i]))}ListFilter=[];static \u0275fac=function(i){return new(i||t)};static \u0275cmp=K({type:t,selectors:[["app-ktable"]],viewQuery:function(i,e){if(i&1&&(b(C,5),b(Fe,7)),i&2){let m;I(m=D())&&(e.sort=m.first),I(m=D())&&(e.drawer=m.first)}},inputs:{ListItem:"ListItem",displayedColumns:"displayedColumns",ColumnName:"ColumnName",totalItems:"totalItems",pageSize:"pageSize",currentPage:"currentPage",totalPages:"totalPages"},features:[L],decls:38,vars:15,consts:[["menuHienthi","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-col","space-y-2","h-full","w-full","p-2"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","ListFilter","filterItem"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(i,e){if(i&1){let m=x();n(0,"div",2)(1,"div",3)(2,"table",4),V(3,Oe,3,1,"ng-container",5,z),S(5,$e,1,0,"tr",6)(6,Ae,1,0,"tr",7)(7,je,3,0,"tr",8),o()(),n(8,"div",9)(9,"div",10)(10,"span",11),l(11,"\u0110ang Xem "),n(12,"strong"),l(13),o(),l(14," - "),n(15,"strong"),l(16),o(),l(17),o(),n(18,"div",12)(19,"span",13,0),l(21),o(),n(22,"mat-menu",null,1)(24,"div",14),g("click",function(u){return d(m),_(u.stopPropagation())}),n(25,"span"),l(26,"S\u1ED1 L\u01B0\u1EE3ng"),o(),n(27,"mat-form-field",15)(28,"input",16),A("ngModelChange",function(u){return d(m),$(e.pageSize,u)||(e.pageSize=u),_(u)}),o()(),n(29,"button",17),g("click",function(){d(m);let u=P(20);return _(e.onPageSizeChange(e.pageSize,u))}),l(30,"\xC1p D\u1EE5ng"),o()()(),n(31,"div",18)(32,"button",19),g("click",function(){return d(m),_(e.onPreviousPage())}),n(33,"mat-icon"),l(34,"keyboard_arrow_left"),o()(),n(35,"button",19),g("click",function(){return d(m),_(e.onNextPage())}),n(36,"mat-icon"),l(37,"keyboard_arrow_right"),o()()()()()()()}if(i&2){let m=P(23);r(2),p("dataSource",e.dataSource),r(),N(e.displayedColumns),r(2),p("matHeaderRowDef",e.displayedColumns),r(),p("matRowDefColumns",e.displayedColumns),r(7),E((e.currentPage-1)*e.pageSize+1),r(3),E(e.currentPage*e.pageSize>e.totalItems?e.totalItems:e.currentPage*e.pageSize),r(),H(" trong s\u1ED1 ",e.totalItems," m\u1EE5c, ",e.currentPage,"/",e.totalPages," Trang"),r(2),p("matMenuTriggerFor",m),r(2),f("Hi\u1EC7n Th\u1ECB : ",e.pageSize," m\u1EE5c"),r(7),O("ngModel",e.pageSize),p("ngModelOptions",j(14,Te)),r(4),p("disabled",e.currentPage===1),r(3),p("disabled",e.currentPage===e.totalPages)}},dependencies:[me,le,pe,se,De,fe,Ce,we,he,ge,Me,Se,ye,xe,be,Ie,_e,C,de,ie,ee,te,U,Z,Y,X,J,W,ue,q,Q,re,ae,ne,oe,ce,Pe],encapsulation:2,changeDetection:0})};export{Ee as a};
