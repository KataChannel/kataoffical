import './polyfills.server.mjs';
import{a as Ft,b as It}from"./chunk-P22NQBYG.mjs";import{a as yt}from"./chunk-4QZFV4MY.mjs";import{a as Mt}from"./chunk-HW244P5R.mjs";import"./chunk-PSHGOKP5.mjs";import"./chunk-PDYHWB5Z.mjs";import{b as Et}from"./chunk-NZM5LIWJ.mjs";import{a as St,b as vt}from"./chunk-OKUFWN4D.mjs";import"./chunk-DLPB5WQD.mjs";import"./chunk-XY5UI64D.mjs";import"./chunk-FH7OS6DF.mjs";import{d as mt,g as gt,h as _t,i as pt,j as ut,l as dt,m as ht,o as ft,p as xt,r as Ct,s as Bt,u as bt,v as wt,w as Dt}from"./chunk-WF25PO5H.mjs";import"./chunk-GGXHJH5E.mjs";import{h as it}from"./chunk-GYQ6BKOH.mjs";import"./chunk-YXYJLRNJ.mjs";import"./chunk-KYGAVK76.mjs";import{e as ct}from"./chunk-X5TXYAJU.mjs";import{b as st}from"./chunk-U4C5JQFR.mjs";import"./chunk-33FMIKPT.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-S5JHVVBA.mjs";import{b as q}from"./chunk-JGFUH6PZ.mjs";import"./chunk-ZPDI4CY6.mjs";import"./chunk-7TFSUZVW.mjs";import"./chunk-SNVRSA35.mjs";import{a as j,d as z}from"./chunk-4ZQMVDHB.mjs";import"./chunk-EK5A2XZ7.mjs";import"./chunk-MG5U2VFQ.mjs";import"./chunk-TFD6IDUK.mjs";import"./chunk-CREX4RSV.mjs";import"./chunk-WZNDKZHB.mjs";import{a as nt,f as at,g as ot,i as rt,j as lt}from"./chunk-2J4WIHCE.mjs";import{b as Y,f as Z,i as tt,m as et}from"./chunk-VH6NPZHM.mjs";import{a as J,b as Q}from"./chunk-7H7JVPRL.mjs";import"./chunk-KANEWG3T.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-CI4HSATZ.mjs";import"./chunk-BIKAY2OS.mjs";import{c as G,f as U,h as X}from"./chunk-LJYSFIIY.mjs";import"./chunk-UVYJEC4L.mjs";import"./chunk-DKQSFLT4.mjs";import"./chunk-NEJOI6A7.mjs";import{n as P,x as H,y as W}from"./chunk-QSYHBSRR.mjs";import{$b as K,Ac as m,Bc as B,Cb as A,Cc as b,Fc as T,Gc as k,Hc as V,Ib as C,Kc as L,Na as F,Oc as v,Qc as E,Ub as g,Zb as R,ac as O,bc as $,cc as l,dc as c,ec as I,fc as D,gc as S,ic as h,la as d,mc as u,nc as r,nd as N,pb as s,ua as _,va as p}from"./chunk-U47UC6MM.mjs";import"./chunk-KB5IWD3E.mjs";import{a as M,j as f}from"./chunk-RIAI3ORJ.mjs";var Tt=()=>[];function Vt(n,e){if(n&1){let t=h();l(0,"button",1),u("click",function(){_(t);let a=r();return p(a.handleBanggiaAction())}),l(1,"mat-icon"),m(2,"save"),c()()}}function Lt(n,e){if(n&1){let t=h();l(0,"button",1),u("click",function(){_(t);let a=r();return p(a.toggleEdit())}),l(1,"mat-icon"),m(2,"edit"),c()()}}function At(n,e){if(n&1){let t=h();D(0),l(1,"div",8)(2,"div",9),m(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),c(),l(4,"div",10)(5,"button",11),u("click",function(){_(t);let a=r();return p(a.DeleteData())}),m(6,"\u0110\u1ED3ng \xDD"),c(),l(7,"button",12),u("click",function(){_(t);let a=r();return p(a.toggleDelete())}),m(8,"Hu\u1EF7 B\u1ECF"),c()()(),S()}}function Rt(n,e){if(n&1&&(l(0,"th",25)(1,"span",26),m(2),c()()),n&2){let t=r().$implicit,i=r(2);s(2),b(" ",i.ColumnName[t]," ")}}function Kt(n,e){if(n&1){let t=h();l(0,"span",28)(1,"span"),m(2),c(),l(3,"button",34),u("click",function(){_(t);let a=r().$implicit,o=r(3);return p(o.RemoveSanpham(a))}),l(4,"mat-icon"),m(5,"delete"),c()()()}if(n&2){let t=r().index;s(2),b("",t+1," ")}}function Ot(n,e){if(n&1&&(l(0,"div",29),m(1),c()),n&2){let t=r().$implicit,i=r().$implicit;s(),B(t[i].title)}}function $t(n,e){if(n&1){let t=h();l(0,"div",35),u("blur",function(a){_(t);let o=r(),x=o.$implicit,w=o.index,y=r(3);return p(y.updateBlurValue(a,w,x,"sldat","number"))}),m(1),v(2,"number"),c()}if(n&2){let t=r().$implicit,i=r().$implicit;g("contentEditable",!0),s(),b(" ",E(2,2,t[i]||0,"1.0-2")," ")}}function Nt(n,e){if(n&1&&(l(0,"div",31),m(1),v(2,"number"),c()),n&2){let t=r().$implicit,i=r().$implicit;s(),B(E(2,1,t[i]||0,"1.0-2"))}}function Pt(n,e){if(n&1&&(l(0,"div",31),m(1),v(2,"number"),c()),n&2){let t=r().$implicit,i=r().$implicit;s(),B(E(2,1,t[i]||0,"1.0-2"))}}function Ht(n,e){if(n&1){let t=h();l(0,"div",36),u("blur",function(a){_(t);let o=r(),x=o.$implicit,w=o.index,y=r(3);return p(y.updateBlurValue(a,w,x,"ghichu","string"))}),m(1),c()}if(n&2){let t=r().$implicit,i=r().$implicit;g("contentEditable",!0),s(),b(" ",t[i]||""," ")}}function Wt(n,e){if(n&1&&(l(0,"span",33),m(1),c()),n&2){let t=r().$implicit,i=r().$implicit;s(),b(" ",t[i]," ")}}function jt(n,e){if(n&1&&(l(0,"td",27),C(1,Kt,6,1,"span",28)(2,Ot,2,1,"div",29)(3,$t,3,5,"div",30)(4,Nt,3,4,"div",31)(5,Pt,3,4,"div",31)(6,Ht,2,2,"div",32)(7,Wt,2,1,"span",33),c()),n&2){let t,i=r().$implicit;s(),R((t=i)==="stt"?1:t==="sanpham"?2:t==="sldat"?3:t==="slgiao"?4:t==="slnhan"?5:t==="ghichu"?6:7)}}function zt(n,e){if(n&1&&(D(0,19),C(1,Rt,3,1,"th",23)(2,jt,8,1,"td",24),S()),n&2){let t=e.$implicit;g("matColumnDef",t)}}function Gt(n,e){n&1&&I(0,"tr",37)}function Ut(n,e){n&1&&I(0,"tr",38)}function Xt(n,e){n&1&&(l(0,"tr",39)(1,"td",40),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),c()())}function qt(n,e){if(n&1){let t=h();D(0),l(1,"div",13)(2,"div",3)(3,"mat-form-field",14)(4,"mat-label"),m(5,"Ti\xEAu \u0110\u1EC1"),c(),l(6,"input",15),V("ngModelChange",function(a){_(t);let o=r();return k(o.DetailBanggia().title,a)||(o.DetailBanggia().title=a),p(a)}),c()(),l(7,"app-searchfilter",16),u("OutFilter",function(a){_(t);let o=r();return p(o.onOutFilterSanpham(a))}),c(),l(8,"app-searchfilter",16),u("OutFilter",function(a){_(t);let o=r();return p(o.onOutFilterKhachhang(a))}),c()(),l(9,"div",17)(10,"table",18),O(11,zt,3,1,"ng-container",19,K),C(13,Gt,1,0,"tr",20)(14,Ut,1,0,"tr",21)(15,Xt,3,0,"tr",22),c()()(),S()}if(n&2){let t,i,a,o=r();s(6),T("ngModel",o.DetailBanggia().title),g("disabled",!o.isEdit()),s(),g("ListItem",o.ListSanpham())("CountItems",(t=o.DetailBanggia())==null||t.sanpham==null?null:t.sanpham.length)("fieldsearch","title")("title","S\u1EA3n Ph\u1EA9m")("ListFilter",L(19,Tt))("filterItem",o.ListSanpham())("isEdit",o.isEdit),s(),g("ListItem",o.ListKhachhang())("CountItems",(i=o.DetailBanggia())==null||i.khachhang==null?null:i.khachhang.length)("fieldsearch","title")("title","Kh\xE1ch H\xE0ng")("ListFilter",L(20,Tt))("filterItem",o.ListKhachhang())("isEdit",o.isEdit),s(2),g("dataSource",(a=o.DetailBanggia())==null?null:a.sanpham),s(),$(o.displayedColumns),s(2),g("matHeaderRowDef",o.displayedColumns),s(),g("matRowDefColumns",o.displayedColumns)}}var kt=class n{_ListBanggiaComponent=d(It);_BanggiaService=d(Ft);_KhachhangService=d(yt);_SanphamService=d(Mt);_route=d(j);_router=d(z);_snackBar=d(q);constructor(){this._route.paramMap.subscribe(e=>{let t=e.get("id");this._BanggiaService.setBanggiaId(t)}),N(()=>f(this,null,function*(){let e=this._BanggiaService.banggiaId();yield this._KhachhangService.getAllKhachhang(),yield this._SanphamService.getAllSanpham(),e||(this._router.navigate(["banggia"]),this._ListBanggiaComponent.drawer.close()),e==="new"?(this.DetailBanggia.set({}),this._ListBanggiaComponent.drawer.open(),this.isEdit.update(t=>!t),this._router.navigate(["banggia","new"])):(yield this._BanggiaService.getBanggiaBy({id:e,isOne:!0}),this._ListBanggiaComponent.drawer.open(),this._router.navigate(["banggia",e]))}))}DetailBanggia=this._BanggiaService.DetailBanggia;isEdit=F(!1);isDelete=F(!1);banggiaId=this._BanggiaService.banggiaId;ListKhachhang=this._KhachhangService.ListKhachhang;ListSanpham=this._SanphamService.ListSanpham;displayedColumns=[];ColumnName={stt:"#",sanpham:"S\u1EA3n ph\u1EA9m",giaban:"Gi\xE1 b\xE1n"};updateBlurValue(e,t,i,a,o){let x=e.target,w=o==="number"?Number(x.innerText.trim())||0:x.innerText.trim()}RemoveSanpham(e){}ngOnInit(){return f(this,null,function*(){yield this._KhachhangService.getAllKhachhang(),yield this._SanphamService.getAllSanpham(),this.displayedColumns=Object.keys(this.ColumnName)})}handleBanggiaAction(){return f(this,null,function*(){this.banggiaId()==="new"?yield this.createBanggia():yield this.updateBanggia()})}createBanggia(){return f(this,null,function*(){try{yield this._BanggiaService.CreateBanggia(this.DetailBanggia()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi t\u1EA1o banggia:",e)}})}updateBanggia(){return f(this,null,function*(){try{yield this._BanggiaService.updateBanggia(this.DetailBanggia()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt banggia:",e)}})}DeleteData(){return f(this,null,function*(){try{yield this._BanggiaService.DeleteBanggia(this.DetailBanggia()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["banggia"])}catch(e){console.error("L\u1ED7i khi x\xF3a banggia:",e)}})}goBack(){this._router.navigate(["banggia"]),this._ListBanggiaComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.DetailBanggia.update(e=>(e.slug=st(e.title),e))}onOutFilterSanpham(e){console.log("OutFilter event:",e),this.DetailBanggia.update(t=>{let i=M({},t);return console.log(e),i.sanphamIds=e.map(a=>a.id),i.sanpham=e.map(a=>({sanphamId:a.id,title:a.title,giaban:a.giaban})),console.log("Updated Banggia:",i),i})}onOutFilterKhachhang(e){console.log("OutFilter event:",e),this.DetailBanggia.update(t=>{let i=M({},t);return console.log(e),i.khachhangIds=e.map(a=>a.id),i.khachhang=e.map(a=>({khachhangId:a.id,title:a.title,email:a.email})),console.log("Updated Banggia:",i),i})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=A({type:n,selectors:[["app-detailbanggia"]],decls:14,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"grid","grid-cols-1","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"OutFilter","ListItem","CountItems","fieldsearch","title","ListFilter","filterItem","isEdit"],[1,"w-full","overflow-auto"],["mat-table","",1,"!border","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","whitespace-nowrap","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,""],[1,"sldat-input","p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"text-end"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],["mat-icon-button","","color","warn",3,"click"],[1,"sldat-input","p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){if(t&1&&(l(0,"div",0)(1,"button",1),u("click",function(){return i.goBack()}),l(2,"mat-icon"),m(3,"arrow_back"),c()(),l(4,"div",2),m(5),c(),l(6,"div",3)(7,"mat-slide-toggle",4),V("ngModelChange",function(o){return k(i.DetailBanggia().isActive,o)||(i.DetailBanggia().isActive=o),o}),m(8),c(),C(9,Vt,3,0,"button",5)(10,Lt,3,0,"button",5),c()(),l(11,"div",6),C(12,At,9,0,"ng-container",7)(13,qt,16,21,"ng-container",7),c()),t&2){let a;s(5),B(((a=i.DetailBanggia())==null?null:a.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),s(2),T("ngModel",i.DetailBanggia().isActive),g("disabled",!i.isEdit()),s(),B(i.DetailBanggia().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),g("ngIf",i.isEdit()),s(),g("ngIf",!i.isEdit()),s(2),g("ngIf",i.isDelete()),s(),g("ngIf",!i.isDelete())}},dependencies:[ot,at,nt,lt,rt,et,Y,Z,tt,Q,J,X,U,G,ct,it,W,P,H,vt,St,Et,Dt,_t,ut,xt,dt,pt,Ct,ht,ft,Bt,bt,wt,gt,mt],encapsulation:2})};export{kt as DetailBanggiaComponent};
