import './polyfills.server.mjs';
import{a as Z,b as q,c as J,d as Q}from"./chunk-2GZPT4PV.mjs";import"./chunk-SEDU3VZT.mjs";import"./chunk-HQ3AH36S.mjs";import"./chunk-Y2756MZK.mjs";import{a as U}from"./chunk-R3ZTSBMR.mjs";import"./chunk-RCOFY3Z4.mjs";import"./chunk-73IBRO6I.mjs";import{b as N}from"./chunk-5BGV5II6.mjs";import"./chunk-ZPDI4CY6.mjs";import"./chunk-7TFSUZVW.mjs";import"./chunk-JBY2G2QH.mjs";import"./chunk-5AGSEX5U.mjs";import"./chunk-WZNDKZHB.mjs";import{a as H,c as V,f as K,g as R,i as X,j as O}from"./chunk-MOJJCF5U.mjs";import"./chunk-Z5BJAH3K.mjs";import{b as z,g as L,j as W,n as j}from"./chunk-O7ETER24.mjs";import{a as G,b as I}from"./chunk-ZYDV2UQJ.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-IDFPNT6P.mjs";import"./chunk-LTQWV7CQ.mjs";import"./chunk-UQMWAB3A.mjs";import{a as A,d as B,f as T}from"./chunk-I77QNQJW.mjs";import"./chunk-JLBEIWBU.mjs";import"./chunk-SA2SQ5BQ.mjs";import"./chunk-PWB5C3IB.mjs";import{o as F}from"./chunk-I33RYIED.mjs";import"./chunk-3262HF7H.mjs";import{Bc as s,Cc as g,Db as D,Gc as h,Hc as w,Ic as _,Jb as v,Na as M,Ub as c,Vb as u,_b as x,dc as i,ec as o,fc as f,jc as k,la as m,mb as y,nc as d,oc as b,qb as l,ua as E,va as S,vb as P}from"./chunk-UMNV2BXK.mjs";import"./chunk-KB5IWD3E.mjs";import"./chunk-RIAI3ORJ.mjs";function ee(p,a){if(p&1&&f(0,"img",5),p&2){let n=b();u("src",n.getTrustUrl("https://lh3.googleusercontent.com/d/"+n.account.Avatar),y)}}function te(p,a){if(p&1&&f(0,"img",5),p&2){let n=b();u("src",n.getTrustUrl("https://tazagroup.vn/assets/images/tazagroup-logo-trangchu.svg"),y)}}function ie(p,a){if(p&1){let n=k();i(0,"div",24)(1,"span"),s(2,"Drop file Here"),o(),i(3,"span",25),d("click",function(){let r=E(n).openFileSelector;return S(r())}),s(4,"Ch\u1ECDn File"),o()()}}var Y=class p{constructor(a){this.sanitizer=a}isLoading=!1;account={};isEditAvatar=!1;files=[];profile=M({});hideCurrentPassword=!0;hideNewPassword=!0;hideConfirmPassword=!0;user={oldpass:"",newpass:"",confirmnewpass:""};_UserService=m(U);_uploadService=m(Z);_snackBar=m(N);Detail={};getTrustUrl(a){return this.sanitizer.bypassSecurityTrustResourceUrl(a)}handlePaste(a){this.isLoading=!0;let n=a.clipboardData?.items;if(n)for(let e=0;e<n.length;e++){let r=n[e];if(r.type.indexOf("image")!==-1){let t=r.getAsFile();if(t){console.log("Pasted image:",t);let $=new File([t],`${this.account.email.split("@")[0]}_${new Date().getTime()}.png`,{type:t.type});this._uploadService.uploadDriver($).then(C=>{console.log(C),this.account.Avatar=C.fileId,this.isLoading=!1,this.isEditAvatar=!1,this._UserService.updateUser(this.account)})}}}}dropped(a){this.isLoading=!0,this.files=a;for(let n of a)n.fileEntry.isFile&&n.fileEntry.file(r=>{this._uploadService.uploadDriver(r).then(t=>{console.log(t),this.account.Avatar=t.fileId,this.isLoading=!1,this.isEditAvatar=!1,this._UserService.updateUser(this.account)})})}ChangePass(){if(console.log(this.user),this.user.oldpass==""||this.user.newpass==""||this.user.confirmnewpass=="")this._snackBar.open("Vui l\xF2ng \u0111i\u1EC1n \u0111\u1EE7 th\xF4ng tin","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});else if(this.user.newpass!=this.user.confirmnewpass)this._snackBar.open("X\xE1c Nh\u1EADn M\u1EADt Kh\u1EA9u M\u1EDBi Kh\xF4ng Gi\u1ED1ng Nhau","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});else{let a={id:this._UserService.profile().id,oldpass:this.user.oldpass,newpass:this.user.newpass};this._UserService.changepass(a).then(n=>{n.statusCode===200?(this._snackBar.open(n.message,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.user={oldpass:"",newpass:"",confirmnewpass:""}):this._snackBar.open(n.message,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}}static \u0275fac=function(n){return new(n||p)(P(F))};static \u0275cmp=D({type:p,selectors:[["app-general"]],decls:49,vars:17,consts:[[1,"w-full","h-full","lg:grid","lg:grid-cols-2","gap-8","p-2"],[1,"w-full","flex","flex-col","gap-4","rounded-lg","p-4","bg-slate-50"],[1,"text-lg","font-bold"],[1,"relative","w-40","h-40","cursor-pointer","rounded-full","bg-slate-300","p-2","mx-auto"],[1,"w-full","h-full"],["lazyLoad","","loading","lazy",1,"w-full","h-full","object-cover",3,"src"],[1,"w-full","h-full","rounded-full","absolute","opacity-0","group-hover:!opacity-80","bg-black","top-0","right-0","flex","flex-row","justify-center","space-x-2","items-center","py-3",3,"paste"],[1,"!relative"],["browseBtnLabel","Browse files","dropZoneLabel","Drag and drop your files here",1,"whitespace-nowrap",3,"onFileDrop","showBrowseBtn"],["ngx-file-drop-content-tmp",""],[1,"flex","flex-row","justify-center","items-center","gap-2"],["mat-flat-button","","color","primary",1,"flex","flex-row","gap-2"],["mat-flat-button","","color","warn",1,"flex","flex-row","gap-2"],[1,"w-full","rounded-lg","p-4","bg-slate-50"],[1,"w-full","flex","flex-col","gap-4"],[1,"grid","grid-cols-1","gap-2"],["appearance","outline",1,"w-full"],["matInput","","id","currentPassword","name","currentPassword",3,"ngModelChange","type","ngModel"],["mat-icon-button","","color","primary","matSuffix","",3,"click"],["matInput","","id","newPassword","name","newPassword",3,"ngModelChange","type","ngModel"],["matInput","","id","confirmPassword","name","confirmPassword",3,"ngModelChange","type","ngModel"],[1,"flex","justify-end"],["mat-raised-button","","color","primary","type","submit",1,"w-full","sm:w-auto",3,"click"],[1,"w-full","col-span-2","gap-4","rounded-lg","p-4","bg-slate-50"],[1,"!text-white","p-4","flex","flex-col","space-y-3"],[1,"font-bold","p-2","rounded-lg","border",3,"click"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"span",2),s(3,"H\xECnh \u0110\u1EA1i di\u1EC7n"),o(),i(4,"div",3)(5,"div",4),v(6,ee,1,1,"img",5)(7,te,1,1,"img",5),o(),i(8,"div",6),d("paste",function(t){return e.handlePaste(t)}),i(9,"div",7)(10,"ngx-file-drop",8),d("onFileDrop",function(t){return e.dropped(t)}),v(11,ie,5,0,"ng-template",9),o()()()(),i(12,"div",10)(13,"button",11)(14,"span"),s(15,"Upload"),o()(),i(16,"button",12)(17,"span"),s(18,"Reset"),o()()()(),i(19,"div",13)(20,"div",14)(21,"span",2),s(22,"Thay \u0111\u1ED5i m\u1EADt kh\u1EA9u"),o(),i(23,"div",15)(24,"mat-form-field",16)(25,"mat-label"),s(26,"M\u1EADt kh\u1EA9u hi\u1EC7n t\u1EA1i"),o(),i(27,"input",17),_("ngModelChange",function(t){return w(e.user.oldpass,t)||(e.user.oldpass=t),t}),o(),i(28,"button",18),d("click",function(){return e.hideCurrentPassword=!e.hideCurrentPassword}),i(29,"mat-icon"),s(30),o()()(),i(31,"mat-form-field",16)(32,"mat-label"),s(33,"M\u1EADt kh\u1EA9u m\u1EDBi"),o(),i(34,"input",19),_("ngModelChange",function(t){return w(e.user.newpass,t)||(e.user.newpass=t),t}),o(),i(35,"button",18),d("click",function(){return e.hideNewPassword=!e.hideNewPassword}),i(36,"mat-icon"),s(37),o()()(),i(38,"mat-form-field",16)(39,"mat-label"),s(40,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi"),o(),i(41,"input",20),_("ngModelChange",function(t){return w(e.user.confirmnewpass,t)||(e.user.confirmnewpass=t),t}),o(),i(42,"button",18),d("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),i(43,"mat-icon"),s(44),o()()(),i(45,"div",21)(46,"button",22),d("click",function(){return e.ChangePass()}),s(47,"\u0110\u1ED5i m\u1EADt kh\u1EA9u"),o()()()()(),f(48,"div",23),o()),n&2&&(l(6),x(e.account.Avatar?6:7),l(4),u("showBrowseBtn",!0),l(17),u("type",e.hideCurrentPassword?"password":"text"),h("ngModel",e.user.oldpass),l(),c("aria-label","Hide password")("aria-pressed",e.hideCurrentPassword),l(2),g(e.hideCurrentPassword?"visibility_off":"visibility"),l(4),u("type",e.hideNewPassword?"password":"text"),h("ngModel",e.user.newpass),l(),c("aria-label","Hide password")("aria-pressed",e.hideNewPassword),l(2),g(e.hideNewPassword?"visibility_off":"visibility"),l(4),u("type",e.hideConfirmPassword?"password":"text"),h("ngModel",e.user.confirmnewpass),l(),c("aria-label","Hide password")("aria-pressed",e.hideConfirmPassword),l(2),g(e.hideConfirmPassword?"visibility_off":"visibility"))},dependencies:[Q,J,q,R,K,H,V,O,X,T,B,A,j,z,L,W,I,G],encapsulation:2})};export{Y as GeneralComponent};
