import './polyfills.server.mjs';
import{a as Fr}from"./chunk-PT7BRMIW.mjs";import{b as Dr}from"./chunk-NZM5LIWJ.mjs";import{b as Mr,c as Rr}from"./chunk-DLPB5WQD.mjs";import{a as mr,b as gr,c as _r,d as yr,e as et,f as wr,g as Cr,h as Er,i as br,j as Sr,l as Tr,m as xr,o as Lr,p as Ir,r as qr,s as vr,u as kr,v as Ar,w as Br,x as Tt}from"./chunk-WF25PO5H.mjs";import{a as Pr}from"./chunk-XY5UI64D.mjs";import{c as ir,d as rr,f as nr,h as or}from"./chunk-GYQ6BKOH.mjs";import{a as Hi,b as zi,c as Yi}from"./chunk-YXYJLRNJ.mjs";import{e as dr}from"./chunk-X5TXYAJU.mjs";import{a as fr,b as pr,c as St}from"./chunk-U4C5JQFR.mjs";import{a as Pi}from"./chunk-73IBRO6I.mjs";import{a as Vi}from"./chunk-S5JHVVBA.mjs";import{a as Ri,b as Ui}from"./chunk-JGFUH6PZ.mjs";import{a as Qi}from"./chunk-ZPDI4CY6.mjs";import{a as V}from"./chunk-7TFSUZVW.mjs";import{a as Xe}from"./chunk-SNVRSA35.mjs";import{b as Mi,d as Ze}from"./chunk-4ZQMVDHB.mjs";import{a as $i,b as Ki,c as Wi,d as Ji}from"./chunk-TFD6IDUK.mjs";import{a as ar,b as sr,f as lr,g as cr,i as ur,j as hr}from"./chunk-2J4WIHCE.mjs";import{b as Zi,f as Xi,i as er,m as tr}from"./chunk-VH6NPZHM.mjs";import{a as ji,b as Gi}from"./chunk-7H7JVPRL.mjs";import{c as Fi,f as Ni,h as Oi}from"./chunk-LJYSFIIY.mjs";import{q as Di}from"./chunk-DKQSFLT4.mjs";import{o as Bi}from"./chunk-NEJOI6A7.mjs";import{n as vi,u as ki,y as Ai}from"./chunk-QSYHBSRR.mjs";import{$b as Ti,Ac as g,Bc as ge,Cb as He,Cc as Y,Ec as Ii,Fc as Ye,Ga as Ci,Gc as je,Hc as Ge,Ib as z,Kc as $e,Na as Ve,Oc as Ke,Qc as We,Rc as Je,Ub as k,Xb as bi,Yb as Si,Zb as ze,ac as Et,bc as bt,cc as d,dc as p,ec as de,fa as yi,fc as xi,gc as Li,ic as O,ka as Ue,la as W,mc as q,nc as _,nd as qi,pb as w,ta as wi,tb as Ei,tc as fe,ua as x,ub as Ct,uc as pe,va as L,vc as me,zc as J}from"./chunk-U47UC6MM.mjs";import{a as qe,b as yt,c as B,e as m,g as _i,h as wt,j as v}from"./chunk-RIAI3ORJ.mjs";var xt=m((oc,Or)=>{"use strict";Or.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Z=m(oe=>{"use strict";var Lt,Zo=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];oe.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};oe.getSymbolTotalCodewords=function(e){return Zo[e]};oe.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};oe.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Lt=e};oe.isKanjiModeEnabled=function(){return typeof Lt<"u"};oe.toSJIS=function(e){return Lt(e)}});var it=m(Q=>{"use strict";Q.L={bit:1};Q.M={bit:0};Q.Q={bit:3};Q.H={bit:2};function Xo(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return Q.L;case"m":case"medium":return Q.M;case"q":case"quartile":return Q.Q;case"h":case"high":return Q.H;default:throw new Error("Unknown EC Level: "+i)}}Q.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Q.from=function(e,t){if(Q.isValid(e))return e;try{return Xo(e)}catch{return t}}});var Vr=m((lc,Ur)=>{"use strict";function Qr(){this.buffer=[],this.length=0}Qr.prototype={get:function(i){let e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let t=0;t<e;t++)this.putBit((i>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};Ur.exports=Qr});var zr=m((cc,Hr)=>{"use strict";function ve(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}ve.prototype.set=function(i,e,t,r){let n=i*this.size+e;this.data[n]=t,r&&(this.reservedBit[n]=!0)};ve.prototype.get=function(i,e){return this.data[i*this.size+e]};ve.prototype.xor=function(i,e,t){this.data[i*this.size+e]^=t};ve.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};Hr.exports=ve});var Yr=m(rt=>{"use strict";var ea=Z().getSymbolSize;rt.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=ea(e),n=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let a=1;a<t-1;a++)o[a]=o[a-1]-n;return o.push(6),o.reverse()};rt.getPositions=function(e){let t=[],r=rt.getRowColCoords(e),n=r.length;for(let o=0;o<n;o++)for(let a=0;a<n;a++)o===0&&a===0||o===0&&a===n-1||o===n-1&&a===0||t.push([r[o],r[a]]);return t}});var $r=m(Gr=>{"use strict";var ta=Z().getSymbolSize,jr=7;Gr.getPositions=function(e){let t=ta(e);return[[0,0],[t-jr,0],[0,t-jr]]}});var Kr=m(I=>{"use strict";I.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ae={N1:3,N2:3,N3:40,N4:10};I.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};I.from=function(e){return I.isValid(e)?parseInt(e,10):void 0};I.getPenaltyN1=function(e){let t=e.size,r=0,n=0,o=0,a=null,s=null;for(let l=0;l<t;l++){n=o=0,a=s=null;for(let c=0;c<t;c++){let u=e.get(l,c);u===a?n++:(n>=5&&(r+=ae.N1+(n-5)),a=u,n=1),u=e.get(c,l),u===s?o++:(o>=5&&(r+=ae.N1+(o-5)),s=u,o=1)}n>=5&&(r+=ae.N1+(n-5)),o>=5&&(r+=ae.N1+(o-5))}return r};I.getPenaltyN2=function(e){let t=e.size,r=0;for(let n=0;n<t-1;n++)for(let o=0;o<t-1;o++){let a=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);(a===4||a===0)&&r++}return r*ae.N2};I.getPenaltyN3=function(e){let t=e.size,r=0,n=0,o=0;for(let a=0;a<t;a++){n=o=0;for(let s=0;s<t;s++)n=n<<1&2047|e.get(a,s),s>=10&&(n===1488||n===93)&&r++,o=o<<1&2047|e.get(s,a),s>=10&&(o===1488||o===93)&&r++}return r*ae.N3};I.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*ae.N4};function ia(i,e,t){switch(i){case I.Patterns.PATTERN000:return(e+t)%2===0;case I.Patterns.PATTERN001:return e%2===0;case I.Patterns.PATTERN010:return t%3===0;case I.Patterns.PATTERN011:return(e+t)%3===0;case I.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case I.Patterns.PATTERN101:return e*t%2+e*t%3===0;case I.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case I.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}I.applyMask=function(e,t){let r=t.size;for(let n=0;n<r;n++)for(let o=0;o<r;o++)t.isReserved(o,n)||t.xor(o,n,ia(e,o,n))};I.getBestMask=function(e,t){let r=Object.keys(I.Patterns).length,n=0,o=1/0;for(let a=0;a<r;a++){t(a),I.applyMask(a,e);let s=I.getPenaltyN1(e)+I.getPenaltyN2(e)+I.getPenaltyN3(e)+I.getPenaltyN4(e);I.applyMask(a,e),s<o&&(o=s,n=a)}return n}});var qt=m(It=>{"use strict";var X=it(),nt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ot=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];It.getBlocksCount=function(e,t){switch(t){case X.L:return nt[(e-1)*4+0];case X.M:return nt[(e-1)*4+1];case X.Q:return nt[(e-1)*4+2];case X.H:return nt[(e-1)*4+3];default:return}};It.getTotalCodewordsCount=function(e,t){switch(t){case X.L:return ot[(e-1)*4+0];case X.M:return ot[(e-1)*4+1];case X.Q:return ot[(e-1)*4+2];case X.H:return ot[(e-1)*4+3];default:return}}});var Wr=m(st=>{"use strict";var ke=new Uint8Array(512),at=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)ke[t]=e,at[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)ke[t]=ke[t-255]})();st.log=function(e){if(e<1)throw new Error("log("+e+")");return at[e]};st.exp=function(e){return ke[e]};st.mul=function(e,t){return e===0||t===0?0:ke[at[e]+at[t]]}});var Jr=m(Ae=>{"use strict";var vt=Wr();Ae.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)r[n+o]^=vt.mul(e[n],t[o]);return r};Ae.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let n=r[0];for(let a=0;a<t.length;a++)r[a]^=vt.mul(t[a],n);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};Ae.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=Ae.mul(t,new Uint8Array([1,vt.exp(r)]));return t}});var en=m((gc,Xr)=>{"use strict";var Zr=Jr();function kt(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}kt.prototype.initialize=function(e){this.degree=e,this.genPoly=Zr.generateECPolynomial(this.degree)};kt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=Zr.mod(t,this.genPoly),n=this.degree-r.length;if(n>0){let o=new Uint8Array(this.degree);return o.set(r,n),o}return r};Xr.exports=kt});var At=m(tn=>{"use strict";tn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var Bt=m(K=>{"use strict";var rn="[0-9]+",ra="[A-Z $%*+\\-./:]+",Be="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Be=Be.replace(/u/g,"\\u");var na="(?:(?![A-Z0-9 $%*+\\-./:]|"+Be+`)(?:.|[\r
]))+`;K.KANJI=new RegExp(Be,"g");K.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");K.BYTE=new RegExp(na,"g");K.NUMERIC=new RegExp(rn,"g");K.ALPHANUMERIC=new RegExp(ra,"g");var oa=new RegExp("^"+Be+"$"),aa=new RegExp("^"+rn+"$"),sa=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");K.testKanji=function(e){return oa.test(e)};K.testNumeric=function(e){return aa.test(e)};K.testAlphanumeric=function(e){return sa.test(e)}});var ee=m(A=>{"use strict";var la=At(),Mt=Bt();A.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};A.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};A.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};A.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};A.MIXED={bit:-1};A.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!la.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};A.getBestModeForData=function(e){return Mt.testNumeric(e)?A.NUMERIC:Mt.testAlphanumeric(e)?A.ALPHANUMERIC:Mt.testKanji(e)?A.KANJI:A.BYTE};A.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};A.isValid=function(e){return e&&e.bit&&e.ccBits};function ca(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return A.NUMERIC;case"alphanumeric":return A.ALPHANUMERIC;case"kanji":return A.KANJI;case"byte":return A.BYTE;default:throw new Error("Unknown mode: "+i)}}A.from=function(e,t){if(A.isValid(e))return e;try{return ca(e)}catch{return t}}});var ln=m(se=>{"use strict";var lt=Z(),ua=qt(),nn=it(),te=ee(),Rt=At(),an=7973,on=lt.getBCHDigit(an);function ha(i,e,t){for(let r=1;r<=40;r++)if(e<=se.getCapacity(r,t,i))return r}function sn(i,e){return te.getCharCountIndicator(i,e)+4}function da(i,e){let t=0;return i.forEach(function(r){let n=sn(r.mode,e);t+=n+r.getBitsLength()}),t}function fa(i,e){for(let t=1;t<=40;t++)if(da(i,t)<=se.getCapacity(t,e,te.MIXED))return t}se.from=function(e,t){return Rt.isValid(e)?parseInt(e,10):t};se.getCapacity=function(e,t,r){if(!Rt.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=te.BYTE);let n=lt.getSymbolTotalCodewords(e),o=ua.getTotalCodewordsCount(e,t),a=(n-o)*8;if(r===te.MIXED)return a;let s=a-sn(r,e);switch(r){case te.NUMERIC:return Math.floor(s/10*3);case te.ALPHANUMERIC:return Math.floor(s/11*2);case te.KANJI:return Math.floor(s/13);case te.BYTE:default:return Math.floor(s/8)}};se.getBestVersionForData=function(e,t){let r,n=nn.from(t,nn.M);if(Array.isArray(e)){if(e.length>1)return fa(e,n);if(e.length===0)return 1;r=e[0]}else r=e;return ha(r.mode,r.getLength(),n)};se.getEncodedBits=function(e){if(!Rt.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;lt.getBCHDigit(t)-on>=0;)t^=an<<lt.getBCHDigit(t)-on;return e<<12|t}});var dn=m(hn=>{"use strict";var Pt=Z(),un=1335,pa=21522,cn=Pt.getBCHDigit(un);hn.getEncodedBits=function(e,t){let r=e.bit<<3|t,n=r<<10;for(;Pt.getBCHDigit(n)-cn>=0;)n^=un<<Pt.getBCHDigit(n)-cn;return(r<<10|n)^pa}});var pn=m((bc,fn)=>{"use strict";var ma=ee();function _e(i){this.mode=ma.NUMERIC,this.data=i.toString()}_e.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};_e.prototype.getLength=function(){return this.data.length};_e.prototype.getBitsLength=function(){return _e.getBitsLength(this.data.length)};_e.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,o*3+1))};fn.exports=_e});var gn=m((Sc,mn)=>{"use strict";var ga=ee(),Dt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ye(i){this.mode=ga.ALPHANUMERIC,this.data=i}ye.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ye.prototype.getLength=function(){return this.data.length};ye.prototype.getBitsLength=function(){return ye.getBitsLength(this.data.length)};ye.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=Dt.indexOf(this.data[t])*45;r+=Dt.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(Dt.indexOf(this.data[t]),6)};mn.exports=ye});var yn=m((Tc,_n)=>{"use strict";var _a=ee();function we(i){this.mode=_a.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}we.getBitsLength=function(e){return e*8};we.prototype.getLength=function(){return this.data.length};we.prototype.getBitsLength=function(){return we.getBitsLength(this.data.length)};we.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)};_n.exports=we});var Cn=m((xc,wn)=>{"use strict";var ya=ee(),wa=Z();function Ce(i){this.mode=ya.KANJI,this.data=i}Ce.getBitsLength=function(e){return e*13};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let t=wa.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),i.put(t,13)}};wn.exports=Ce});var En=m((Lc,Ft)=>{"use strict";var Me={single_source_shortest_paths:function(i,e,t){var r={},n={};n[e]=0;var o=Me.PriorityQueue.make();o.push(e,0);for(var a,s,l,c,u,h,f,y,C;!o.empty();){a=o.pop(),s=a.value,c=a.cost,u=i[s]||{};for(l in u)u.hasOwnProperty(l)&&(h=u[l],f=c+h,y=n[l],C=typeof n[l]>"u",(C||y>f)&&(n[l]=f,o.push(l,f),r[l]=s))}if(typeof t<"u"&&typeof n[t]>"u"){var b=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(b)}return r},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],r=e,n;r;)t.push(r),n=i[r],r=i[r];return t.reverse(),t},find_path:function(i,e,t){var r=Me.single_source_shortest_paths(i,e,t);return Me.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(i){var e=Me.PriorityQueue,t={},r;i=i||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Ft<"u"&&(Ft.exports=Me)});var vn=m(Ee=>{"use strict";var S=ee(),Tn=pn(),xn=gn(),Ln=yn(),In=Cn(),Re=Bt(),ct=Z(),Ca=En();function bn(i){return unescape(encodeURIComponent(i)).length}function Pe(i,e,t){let r=[],n;for(;(n=i.exec(t))!==null;)r.push({data:n[0],index:n.index,mode:e,length:n[0].length});return r}function qn(i){let e=Pe(Re.NUMERIC,S.NUMERIC,i),t=Pe(Re.ALPHANUMERIC,S.ALPHANUMERIC,i),r,n;return ct.isKanjiModeEnabled()?(r=Pe(Re.BYTE,S.BYTE,i),n=Pe(Re.KANJI,S.KANJI,i)):(r=Pe(Re.BYTE_KANJI,S.BYTE,i),n=[]),e.concat(t,r,n).sort(function(a,s){return a.index-s.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function Nt(i,e){switch(e){case S.NUMERIC:return Tn.getBitsLength(i);case S.ALPHANUMERIC:return xn.getBitsLength(i);case S.KANJI:return In.getBitsLength(i);case S.BYTE:return Ln.getBitsLength(i)}}function Ea(i){return i.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function ba(i){let e=[];for(let t=0;t<i.length;t++){let r=i[t];switch(r.mode){case S.NUMERIC:e.push([r,{data:r.data,mode:S.ALPHANUMERIC,length:r.length},{data:r.data,mode:S.BYTE,length:r.length}]);break;case S.ALPHANUMERIC:e.push([r,{data:r.data,mode:S.BYTE,length:r.length}]);break;case S.KANJI:e.push([r,{data:r.data,mode:S.BYTE,length:bn(r.data)}]);break;case S.BYTE:e.push([{data:r.data,mode:S.BYTE,length:bn(r.data)}])}}return e}function Sa(i,e){let t={},r={start:{}},n=["start"];for(let o=0;o<i.length;o++){let a=i[o],s=[];for(let l=0;l<a.length;l++){let c=a[l],u=""+o+l;s.push(u),t[u]={node:c,lastCount:0},r[u]={};for(let h=0;h<n.length;h++){let f=n[h];t[f]&&t[f].node.mode===c.mode?(r[f][u]=Nt(t[f].lastCount+c.length,c.mode)-Nt(t[f].lastCount,c.mode),t[f].lastCount+=c.length):(t[f]&&(t[f].lastCount=c.length),r[f][u]=Nt(c.length,c.mode)+4+S.getCharCountIndicator(c.mode,e))}}n=s}for(let o=0;o<n.length;o++)r[n[o]].end=0;return{map:r,table:t}}function Sn(i,e){let t,r=S.getBestModeForData(i);if(t=S.from(e,r),t!==S.BYTE&&t.bit<r.bit)throw new Error('"'+i+'" cannot be encoded with mode '+S.toString(t)+`.
 Suggested mode is: `+S.toString(r));switch(t===S.KANJI&&!ct.isKanjiModeEnabled()&&(t=S.BYTE),t){case S.NUMERIC:return new Tn(i);case S.ALPHANUMERIC:return new xn(i);case S.KANJI:return new In(i);case S.BYTE:return new Ln(i)}}Ee.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(Sn(r,null)):r.data&&t.push(Sn(r.data,r.mode)),t},[])};Ee.fromString=function(e,t){let r=qn(e,ct.isKanjiModeEnabled()),n=ba(r),o=Sa(n,t),a=Ca.find_path(o.map,"start","end"),s=[];for(let l=1;l<a.length-1;l++)s.push(o.table[a[l]].node);return Ee.fromArray(Ea(s))};Ee.rawSplit=function(e){return Ee.fromArray(qn(e,ct.isKanjiModeEnabled()))}});var zt=m(kn=>{"use strict";var ht=Z(),Ot=it(),Ta=Vr(),xa=zr(),La=Yr(),Ia=$r(),Vt=Kr(),Ht=qt(),qa=en(),ut=ln(),va=dn(),ka=ee(),Qt=vn();function Aa(i,e){let t=i.size,r=Ia.getPositions(e);for(let n=0;n<r.length;n++){let o=r[n][0],a=r[n][1];for(let s=-1;s<=7;s++)if(!(o+s<=-1||t<=o+s))for(let l=-1;l<=7;l++)a+l<=-1||t<=a+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?i.set(o+s,a+l,!0,!0):i.set(o+s,a+l,!1,!0))}}function Ba(i){let e=i.size;for(let t=8;t<e-8;t++){let r=t%2===0;i.set(t,6,r,!0),i.set(6,t,r,!0)}}function Ma(i,e){let t=La.getPositions(e);for(let r=0;r<t.length;r++){let n=t[r][0],o=t[r][1];for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a===-2||a===2||s===-2||s===2||a===0&&s===0?i.set(n+a,o+s,!0,!0):i.set(n+a,o+s,!1,!0)}}function Ra(i,e){let t=i.size,r=ut.getEncodedBits(e),n,o,a;for(let s=0;s<18;s++)n=Math.floor(s/3),o=s%3+t-8-3,a=(r>>s&1)===1,i.set(n,o,a,!0),i.set(o,n,a,!0)}function Ut(i,e,t){let r=i.size,n=va.getEncodedBits(e,t),o,a;for(o=0;o<15;o++)a=(n>>o&1)===1,o<6?i.set(o,8,a,!0):o<8?i.set(o+1,8,a,!0):i.set(r-15+o,8,a,!0),o<8?i.set(8,r-o-1,a,!0):o<9?i.set(8,15-o-1+1,a,!0):i.set(8,15-o-1,a,!0);i.set(r-8,8,1,!0)}function Pa(i,e){let t=i.size,r=-1,n=t-1,o=7,a=0;for(let s=t-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!i.isReserved(n,s-l)){let c=!1;a<e.length&&(c=(e[a]>>>o&1)===1),i.set(n,s-l,c),o--,o===-1&&(a++,o=7)}if(n+=r,n<0||t<=n){n-=r,r=-r;break}}}function Da(i,e,t){let r=new Ta;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),ka.getCharCountIndicator(l.mode,i)),l.write(r)});let n=ht.getSymbolTotalCodewords(i),o=Ht.getTotalCodewordsCount(i,e),a=(n-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let s=(a-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return Fa(r,i,e)}function Fa(i,e,t){let r=ht.getSymbolTotalCodewords(e),n=Ht.getTotalCodewordsCount(e,t),o=r-n,a=Ht.getBlocksCount(e,t),s=r%a,l=a-s,c=Math.floor(r/a),u=Math.floor(o/a),h=u+1,f=c-u,y=new qa(f),C=0,b=new Array(a),E=new Array(a),T=0,gt=new Uint8Array(i.buffer);for(let he=0;he<a;he++){let _t=he<l?u:h;b[he]=gt.slice(C,C+_t),E[he]=y.encode(b[he]),C+=_t,T=Math.max(T,_t)}let Ie=new Uint8Array(r),D=0,N,$;for(N=0;N<T;N++)for($=0;$<a;$++)N<b[$].length&&(Ie[D++]=b[$][N]);for(N=0;N<f;N++)for($=0;$<a;$++)Ie[D++]=E[$][N];return Ie}function Na(i,e,t,r){let n;if(Array.isArray(i))n=Qt.fromArray(i);else if(typeof i=="string"){let c=e;if(!c){let u=Qt.rawSplit(i);c=ut.getBestVersionForData(u,t)}n=Qt.fromString(i,c||40)}else throw new Error("Invalid data");let o=ut.getBestVersionForData(n,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let a=Da(e,t,n),s=ht.getSymbolSize(e),l=new xa(s);return Aa(l,e),Ba(l),Ma(l,e),Ut(l,t,0),e>=7&&Ra(l,e),Pa(l,a),isNaN(r)&&(r=Vt.getBestMask(l,Ut.bind(null,l,t))),Vt.applyMask(r,l),Ut(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:n}}kn.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Ot.M,n,o;return typeof t<"u"&&(r=Ot.from(t.errorCorrectionLevel,Ot.M),n=ut.from(t.version),o=Vt.from(t.maskPattern),t.toSJISFunc&&ht.setToSJISFunction(t.toSJISFunc)),Na(e,n,r,o)}});var Yt=m((vc,Bn)=>{"use strict";var Oa=B("util"),An=B("stream"),H=Bn.exports=function(){An.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};Oa.inherits(H,An);H.prototype.read=function(i,e){this._reads.push({length:Math.abs(i),allowLess:i<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};H.prototype.write=function(i,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let t;return Buffer.isBuffer(i)?t=i:t=Buffer.from(i,e||this._encoding),this._buffers.push(t),this._buffered+=t.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};H.prototype.end=function(i,e){i&&this.write(i,e),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};H.prototype.destroySoon=H.prototype.end;H.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};H.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};H.prototype._processReadAllowingLess=function(i){this._reads.shift();let e=this._buffers[0];e.length>i.length?(this._buffered-=i.length,this._buffers[0]=e.slice(i.length),i.func.call(this,e.slice(0,i.length))):(this._buffered-=e.length,this._buffers.shift(),i.func.call(this,e))};H.prototype._processRead=function(i){this._reads.shift();let e=0,t=0,r=Buffer.alloc(i.length);for(;e<i.length;){let n=this._buffers[t++],o=Math.min(n.length,i.length-e);n.copy(r,e,0,o),e+=o,o!==n.length&&(this._buffers[--t]=n.slice(o))}t>0&&this._buffers.splice(0,t),this._buffered-=i.length,i.func.call(this,r)};H.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let i=this._reads[0];if(i.allowLess)this._processReadAllowingLess(i);else if(this._buffered>=i.length)this._processRead(i);else break}this._buffers&&!this.writable&&this._end()}catch(i){this.emit("error",i)}}});var Gt=m(jt=>{"use strict";var ie=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];jt.getImagePasses=function(i,e){let t=[],r=i%8,n=e%8,o=(i-r)/8,a=(e-n)/8;for(let s=0;s<ie.length;s++){let l=ie[s],c=o*l.x.length,u=a*l.y.length;for(let h=0;h<l.x.length&&l.x[h]<r;h++)c++;for(let h=0;h<l.y.length&&l.y[h]<n;h++)u++;c>0&&u>0&&t.push({width:c,height:u,index:s})}return t};jt.getInterlaceIterator=function(i){return function(e,t,r){let n=e%ie[r].x.length,o=(e-n)/ie[r].x.length*8+ie[r].x[n],a=t%ie[r].y.length,s=(t-a)/ie[r].y.length*8+ie[r].y[a];return o*4+s*i*4}}});var $t=m((Ac,Mn)=>{"use strict";Mn.exports=function(e,t,r){let n=e+t-r,o=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-r);return o<=a&&o<=s?e:a<=s?t:r}});var Kt=m((Bc,Pn)=>{"use strict";var Qa=Gt(),Ua=$t();function Rn(i,e,t){let r=i*e;return t!==8&&(r=Math.ceil(r/(8/t))),r}var be=Pn.exports=function(i,e){let t=i.width,r=i.height,n=i.interlace,o=i.bpp,a=i.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],n){let s=Qa.getImagePasses(t,r);for(let l=0;l<s.length;l++)this._images.push({byteWidth:Rn(s[l].width,o,a),height:s[l].height,lineIndex:0})}else this._images.push({byteWidth:Rn(t,o,a),height:r,lineIndex:0});a===8?this._xComparison=o:a===16?this._xComparison=o*2:this._xComparison=1};be.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};be.prototype._unFilterType1=function(i,e,t){let r=this._xComparison,n=r-1;for(let o=0;o<t;o++){let a=i[1+o],s=o>n?e[o-r]:0;e[o]=a+s}};be.prototype._unFilterType2=function(i,e,t){let r=this._lastLine;for(let n=0;n<t;n++){let o=i[1+n],a=r?r[n]:0;e[n]=o+a}};be.prototype._unFilterType3=function(i,e,t){let r=this._xComparison,n=r-1,o=this._lastLine;for(let a=0;a<t;a++){let s=i[1+a],l=o?o[a]:0,c=a>n?e[a-r]:0,u=Math.floor((c+l)/2);e[a]=s+u}};be.prototype._unFilterType4=function(i,e,t){let r=this._xComparison,n=r-1,o=this._lastLine;for(let a=0;a<t;a++){let s=i[1+a],l=o?o[a]:0,c=a>n?e[a-r]:0,u=a>n&&o?o[a-r]:0,h=Ua(c,l,u);e[a]=s+h}};be.prototype._reverseFilterLine=function(i){let e=i[0],t,r=this._images[this._imageIndex],n=r.byteWidth;if(e===0)t=i.slice(1,n+1);else switch(t=Buffer.alloc(n),e){case 1:this._unFilterType1(i,t,n);break;case 2:this._unFilterType2(i,t,n);break;case 3:this._unFilterType3(i,t,n);break;case 4:this._unFilterType4(i,t,n);break;default:throw new Error("Unrecognised filter type - "+e)}this.write(t),r.lineIndex++,r.lineIndex>=r.height?(this._lastLine=null,this._imageIndex++,r=this._images[this._imageIndex]):this._lastLine=t,r?this.read(r.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var Nn=m((Mc,Fn)=>{"use strict";var Va=B("util"),Dn=Yt(),Ha=Kt(),za=Fn.exports=function(i){Dn.call(this);let e=[],t=this;this._filter=new Ha(i,{read:this.read.bind(this),write:function(r){e.push(r)},complete:function(){t.emit("complete",Buffer.concat(e))}}),this._filter.start()};Va.inherits(za,Dn)});var Se=m((Rc,On)=>{"use strict";On.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var Zt=m((Pc,Qn)=>{"use strict";var Wt=[];(function(){for(let i=0;i<256;i++){let e=i;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Wt[i]=e}})();var Jt=Qn.exports=function(){this._crc=-1};Jt.prototype.write=function(i){for(let e=0;e<i.length;e++)this._crc=Wt[(this._crc^i[e])&255]^this._crc>>>8;return!0};Jt.prototype.crc32=function(){return this._crc^-1};Jt.crc32=function(i){let e=-1;for(let t=0;t<i.length;t++)e=Wt[(e^i[t])&255]^e>>>8;return e^-1}});var Xt=m((Dc,Un)=>{"use strict";var M=Se(),Ya=Zt(),R=Un.exports=function(i,e){this._options=i,i.checkCRC=i.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[M.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[M.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[M.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[M.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[M.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[M.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};R.prototype.start=function(){this.read(M.PNG_SIGNATURE.length,this._parseSignature.bind(this))};R.prototype._parseSignature=function(i){let e=M.PNG_SIGNATURE;for(let t=0;t<e.length;t++)if(i[t]!==e[t]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};R.prototype._parseChunkBegin=function(i){let e=i.readUInt32BE(0),t=i.readUInt32BE(4),r="";for(let o=4;o<8;o++)r+=String.fromCharCode(i[o]);let n=!!(i[4]&32);if(!this._hasIHDR&&t!==M.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new Ya,this._crc.write(Buffer.from(r)),this._chunks[t])return this._chunks[t](e);if(!n){this.error(new Error("Unsupported critical chunk type "+r));return}this.read(e+4,this._skipChunk.bind(this))};R.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};R.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};R.prototype._parseChunkEnd=function(i){let e=i.readInt32BE(0),t=this._crc.crc32();if(this._options.checkCRC&&t!==e){this.error(new Error("Crc error - "+e+" - "+t));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};R.prototype._handleIHDR=function(i){this.read(i,this._parseIHDR.bind(this))};R.prototype._parseIHDR=function(i){this._crc.write(i);let e=i.readUInt32BE(0),t=i.readUInt32BE(4),r=i[8],n=i[9],o=i[10],a=i[11],s=i[12];if(r!==8&&r!==4&&r!==2&&r!==1&&r!==16){this.error(new Error("Unsupported bit depth "+r));return}if(!(n in M.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(o!==0){this.error(new Error("Unsupported compression method"));return}if(a!==0){this.error(new Error("Unsupported filter method"));return}if(s!==0&&s!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=n;let l=M.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:t,depth:r,interlace:!!s,palette:!!(n&M.COLORTYPE_PALETTE),color:!!(n&M.COLORTYPE_COLOR),alpha:!!(n&M.COLORTYPE_ALPHA),bpp:l,colorType:n}),this._handleChunkEnd()};R.prototype._handlePLTE=function(i){this.read(i,this._parsePLTE.bind(this))};R.prototype._parsePLTE=function(i){this._crc.write(i);let e=Math.floor(i.length/3);for(let t=0;t<e;t++)this._palette.push([i[t*3],i[t*3+1],i[t*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};R.prototype._handleTRNS=function(i){this.simpleTransparency(),this.read(i,this._parseTRNS.bind(this))};R.prototype._parseTRNS=function(i){if(this._crc.write(i),this._colorType===M.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(i.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let e=0;e<i.length;e++)this._palette[e][3]=i[e];this.palette(this._palette)}this._colorType===M.COLORTYPE_GRAYSCALE&&this.transColor([i.readUInt16BE(0)]),this._colorType===M.COLORTYPE_COLOR&&this.transColor([i.readUInt16BE(0),i.readUInt16BE(2),i.readUInt16BE(4)]),this._handleChunkEnd()};R.prototype._handleGAMA=function(i){this.read(i,this._parseGAMA.bind(this))};R.prototype._parseGAMA=function(i){this._crc.write(i),this.gamma(i.readUInt32BE(0)/M.GAMMA_DIVISION),this._handleChunkEnd()};R.prototype._handleIDAT=function(i){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-i,this._parseIDAT.bind(this,i))};R.prototype._parseIDAT=function(i,e){if(this._crc.write(e),this._colorType===M.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);let t=i-e.length;t>0?this._handleIDAT(t):this._handleChunkEnd()};R.prototype._handleIEND=function(i){this.read(i,this._parseIEND.bind(this))};R.prototype._parseIEND=function(i){this._crc.write(i),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var ei=m(Hn=>{"use strict";var Vn=Gt(),ja=[function(){},function(i,e,t,r){if(r===e.length)throw new Error("Ran out of data");let n=e[r];i[t]=n,i[t+1]=n,i[t+2]=n,i[t+3]=255},function(i,e,t,r){if(r+1>=e.length)throw new Error("Ran out of data");let n=e[r];i[t]=n,i[t+1]=n,i[t+2]=n,i[t+3]=e[r+1]},function(i,e,t,r){if(r+2>=e.length)throw new Error("Ran out of data");i[t]=e[r],i[t+1]=e[r+1],i[t+2]=e[r+2],i[t+3]=255},function(i,e,t,r){if(r+3>=e.length)throw new Error("Ran out of data");i[t]=e[r],i[t+1]=e[r+1],i[t+2]=e[r+2],i[t+3]=e[r+3]}],Ga=[function(){},function(i,e,t,r){let n=e[0];i[t]=n,i[t+1]=n,i[t+2]=n,i[t+3]=r},function(i,e,t){let r=e[0];i[t]=r,i[t+1]=r,i[t+2]=r,i[t+3]=e[1]},function(i,e,t,r){i[t]=e[0],i[t+1]=e[1],i[t+2]=e[2],i[t+3]=r},function(i,e,t){i[t]=e[0],i[t+1]=e[1],i[t+2]=e[2],i[t+3]=e[3]}];function $a(i,e){let t=[],r=0;function n(){if(r===i.length)throw new Error("Ran out of data");let o=i[r];r++;let a,s,l,c,u,h,f,y;switch(e){default:throw new Error("unrecognised depth");case 16:f=i[r],r++,t.push((o<<8)+f);break;case 4:f=o&15,y=o>>4,t.push(y,f);break;case 2:u=o&3,h=o>>2&3,f=o>>4&3,y=o>>6&3,t.push(y,f,h,u);break;case 1:a=o&1,s=o>>1&1,l=o>>2&1,c=o>>3&1,u=o>>4&1,h=o>>5&1,f=o>>6&1,y=o>>7&1,t.push(y,f,h,u,c,l,s,a);break}}return{get:function(o){for(;t.length<o;)n();let a=t.slice(0,o);return t=t.slice(o),a},resetAfterLine:function(){t.length=0},end:function(){if(r!==i.length)throw new Error("extra data found")}}}function Ka(i,e,t,r,n,o){let a=i.width,s=i.height,l=i.index;for(let c=0;c<s;c++)for(let u=0;u<a;u++){let h=t(u,c,l);ja[r](e,n,h,o),o+=r}return o}function Wa(i,e,t,r,n,o){let a=i.width,s=i.height,l=i.index;for(let c=0;c<s;c++){for(let u=0;u<a;u++){let h=n.get(r),f=t(u,c,l);Ga[r](e,h,f,o)}n.resetAfterLine()}}Hn.dataToBitMap=function(i,e){let t=e.width,r=e.height,n=e.depth,o=e.bpp,a=e.interlace,s;n!==8&&(s=$a(i,n));let l;n<=8?l=Buffer.alloc(t*r*4):l=new Uint16Array(t*r*4);let c=Math.pow(2,n)-1,u=0,h,f;if(a)h=Vn.getImagePasses(t,r),f=Vn.getInterlaceIterator(t,r);else{let y=0;f=function(){let C=y;return y+=4,C},h=[{width:t,height:r}]}for(let y=0;y<h.length;y++)n===8?u=Ka(h[y],l,f,o,i,u):Wa(h[y],l,f,o,s,c);if(n===8){if(u!==i.length)throw new Error("extra data found")}else s.end();return l}});var ti=m((Nc,zn)=>{"use strict";function Ja(i,e,t,r,n){let o=0;for(let a=0;a<r;a++)for(let s=0;s<t;s++){let l=n[i[o]];if(!l)throw new Error("index "+i[o]+" not in palette");for(let c=0;c<4;c++)e[o+c]=l[c];o+=4}}function Za(i,e,t,r,n){let o=0;for(let a=0;a<r;a++)for(let s=0;s<t;s++){let l=!1;if(n.length===1?n[0]===i[o]&&(l=!0):n[0]===i[o]&&n[1]===i[o+1]&&n[2]===i[o+2]&&(l=!0),l)for(let c=0;c<4;c++)e[o+c]=0;o+=4}}function Xa(i,e,t,r,n){let o=255,a=Math.pow(2,n)-1,s=0;for(let l=0;l<r;l++)for(let c=0;c<t;c++){for(let u=0;u<4;u++)e[s+u]=Math.floor(i[s+u]*o/a+.5);s+=4}}zn.exports=function(i,e){let t=e.depth,r=e.width,n=e.height,o=e.colorType,a=e.transColor,s=e.palette,l=i;return o===3?Ja(i,l,r,n,s):(a&&Za(i,l,r,n,a),t!==8&&(t===16&&(l=Buffer.alloc(r*n*4)),Xa(i,l,r,n,t))),l}});var Gn=m((Oc,jn)=>{"use strict";var es=B("util"),ii=B("zlib"),Yn=Yt(),ts=Nn(),is=Xt(),rs=ei(),ns=ti(),j=jn.exports=function(i){Yn.call(this),this._parser=new is(i,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=i,this.writable=!0,this._parser.start()};es.inherits(j,Yn);j.prototype._handleError=function(i){this.emit("error",i),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};j.prototype._inflateData=function(i){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=ii.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,r=Math.max(t,ii.Z_MIN_CHUNK);this._inflate=ii.createInflate({chunkSize:r});let n=t,o=this.emit.bind(this,"error");this._inflate.on("error",function(s){n&&o(s)}),this._filter.on("complete",this._complete.bind(this));let a=this._filter.write.bind(this._filter);this._inflate.on("data",function(s){n&&(s.length>n&&(s=s.slice(0,n)),n-=s.length,a(s))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(i)};j.prototype._handleMetaData=function(i){this._metaData=i,this._bitmapInfo=Object.create(i),this._filter=new ts(this._bitmapInfo)};j.prototype._handleTransColor=function(i){this._bitmapInfo.transColor=i};j.prototype._handlePalette=function(i){this._bitmapInfo.palette=i};j.prototype._simpleTransparency=function(){this._metaData.alpha=!0};j.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};j.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};j.prototype._complete=function(i){if(this.errord)return;let e;try{let t=rs.dataToBitMap(i,this._bitmapInfo);e=ns(t,this._bitmapInfo),t=null}catch(t){this._handleError(t);return}this.emit("parsed",e)}});var Kn=m((Qc,$n)=>{"use strict";var U=Se();$n.exports=function(i,e,t,r){let n=[U.COLORTYPE_COLOR_ALPHA,U.COLORTYPE_ALPHA].indexOf(r.colorType)!==-1;if(r.colorType===r.inputColorType){let C=function(){let b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]!==256}();if(r.bitDepth===8||r.bitDepth===16&&C)return i}let o=r.bitDepth!==16?i:new Uint16Array(i.buffer),a=255,s=U.COLORTYPE_TO_BPP_MAP[r.inputColorType];s===4&&!r.inputHasAlpha&&(s=3);let l=U.COLORTYPE_TO_BPP_MAP[r.colorType];r.bitDepth===16&&(a=65535,l*=2);let c=Buffer.alloc(e*t*l),u=0,h=0,f=r.bgColor||{};f.red===void 0&&(f.red=a),f.green===void 0&&(f.green=a),f.blue===void 0&&(f.blue=a);function y(){let C,b,E,T=a;switch(r.inputColorType){case U.COLORTYPE_COLOR_ALPHA:T=o[u+3],C=o[u],b=o[u+1],E=o[u+2];break;case U.COLORTYPE_COLOR:C=o[u],b=o[u+1],E=o[u+2];break;case U.COLORTYPE_ALPHA:T=o[u+1],C=o[u],b=C,E=C;break;case U.COLORTYPE_GRAYSCALE:C=o[u],b=C,E=C;break;default:throw new Error("input color type:"+r.inputColorType+" is not supported at present")}return r.inputHasAlpha&&(n||(T/=a,C=Math.min(Math.max(Math.round((1-T)*f.red+T*C),0),a),b=Math.min(Math.max(Math.round((1-T)*f.green+T*b),0),a),E=Math.min(Math.max(Math.round((1-T)*f.blue+T*E),0),a))),{red:C,green:b,blue:E,alpha:T}}for(let C=0;C<t;C++)for(let b=0;b<e;b++){let E=y(o,u);switch(r.colorType){case U.COLORTYPE_COLOR_ALPHA:case U.COLORTYPE_COLOR:r.bitDepth===8?(c[h]=E.red,c[h+1]=E.green,c[h+2]=E.blue,n&&(c[h+3]=E.alpha)):(c.writeUInt16BE(E.red,h),c.writeUInt16BE(E.green,h+2),c.writeUInt16BE(E.blue,h+4),n&&c.writeUInt16BE(E.alpha,h+6));break;case U.COLORTYPE_ALPHA:case U.COLORTYPE_GRAYSCALE:{let T=(E.red+E.green+E.blue)/3;r.bitDepth===8?(c[h]=T,n&&(c[h+1]=E.alpha)):(c.writeUInt16BE(T,h),n&&c.writeUInt16BE(E.alpha,h+2));break}default:throw new Error("unrecognised color Type "+r.colorType)}u+=s,h+=l}return c}});var Zn=m((Uc,Jn)=>{"use strict";var Wn=$t();function os(i,e,t,r,n){for(let o=0;o<t;o++)r[n+o]=i[e+o]}function as(i,e,t){let r=0,n=e+t;for(let o=e;o<n;o++)r+=Math.abs(i[o]);return r}function ss(i,e,t,r,n,o){for(let a=0;a<t;a++){let s=a>=o?i[e+a-o]:0,l=i[e+a]-s;r[n+a]=l}}function ls(i,e,t,r){let n=0;for(let o=0;o<t;o++){let a=o>=r?i[e+o-r]:0,s=i[e+o]-a;n+=Math.abs(s)}return n}function cs(i,e,t,r,n){for(let o=0;o<t;o++){let a=e>0?i[e+o-t]:0,s=i[e+o]-a;r[n+o]=s}}function us(i,e,t){let r=0,n=e+t;for(let o=e;o<n;o++){let a=e>0?i[o-t]:0,s=i[o]-a;r+=Math.abs(s)}return r}function hs(i,e,t,r,n,o){for(let a=0;a<t;a++){let s=a>=o?i[e+a-o]:0,l=e>0?i[e+a-t]:0,c=i[e+a]-(s+l>>1);r[n+a]=c}}function ds(i,e,t,r){let n=0;for(let o=0;o<t;o++){let a=o>=r?i[e+o-r]:0,s=e>0?i[e+o-t]:0,l=i[e+o]-(a+s>>1);n+=Math.abs(l)}return n}function fs(i,e,t,r,n,o){for(let a=0;a<t;a++){let s=a>=o?i[e+a-o]:0,l=e>0?i[e+a-t]:0,c=e>0&&a>=o?i[e+a-(t+o)]:0,u=i[e+a]-Wn(s,l,c);r[n+a]=u}}function ps(i,e,t,r){let n=0;for(let o=0;o<t;o++){let a=o>=r?i[e+o-r]:0,s=e>0?i[e+o-t]:0,l=e>0&&o>=r?i[e+o-(t+r)]:0,c=i[e+o]-Wn(a,s,l);n+=Math.abs(c)}return n}var ms={0:os,1:ss,2:cs,3:hs,4:fs},gs={0:as,1:ls,2:us,3:ds,4:ps};Jn.exports=function(i,e,t,r,n){let o;if(!("filterType"in r)||r.filterType===-1)o=[0,1,2,3,4];else if(typeof r.filterType=="number")o=[r.filterType];else throw new Error("unrecognised filter types");r.bitDepth===16&&(n*=2);let a=e*n,s=0,l=0,c=Buffer.alloc((a+1)*t),u=o[0];for(let h=0;h<t;h++){if(o.length>1){let f=1/0;for(let y=0;y<o.length;y++){let C=gs[o[y]](i,l,a,n);C<f&&(u=o[y],f=C)}}c[s]=u,s++,ms[u](i,l,a,c,s,n),s+=a,l+=a}return c}});var ri=m((Vc,Xn)=>{"use strict";var P=Se(),_s=Zt(),ys=Kn(),ws=Zn(),Cs=B("zlib"),re=Xn.exports=function(i){if(this._options=i,i.deflateChunkSize=i.deflateChunkSize||32*1024,i.deflateLevel=i.deflateLevel!=null?i.deflateLevel:9,i.deflateStrategy=i.deflateStrategy!=null?i.deflateStrategy:3,i.inputHasAlpha=i.inputHasAlpha!=null?i.inputHasAlpha:!0,i.deflateFactory=i.deflateFactory||Cs.createDeflate,i.bitDepth=i.bitDepth||8,i.colorType=typeof i.colorType=="number"?i.colorType:P.COLORTYPE_COLOR_ALPHA,i.inputColorType=typeof i.inputColorType=="number"?i.inputColorType:P.COLORTYPE_COLOR_ALPHA,[P.COLORTYPE_GRAYSCALE,P.COLORTYPE_COLOR,P.COLORTYPE_COLOR_ALPHA,P.COLORTYPE_ALPHA].indexOf(i.colorType)===-1)throw new Error("option color type:"+i.colorType+" is not supported at present");if([P.COLORTYPE_GRAYSCALE,P.COLORTYPE_COLOR,P.COLORTYPE_COLOR_ALPHA,P.COLORTYPE_ALPHA].indexOf(i.inputColorType)===-1)throw new Error("option input color type:"+i.inputColorType+" is not supported at present");if(i.bitDepth!==8&&i.bitDepth!==16)throw new Error("option bit depth:"+i.bitDepth+" is not supported at present")};re.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};re.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};re.prototype.filterData=function(i,e,t){let r=ys(i,e,t,this._options),n=P.COLORTYPE_TO_BPP_MAP[this._options.colorType];return ws(r,e,t,this._options,n)};re.prototype._packChunk=function(i,e){let t=e?e.length:0,r=Buffer.alloc(t+12);return r.writeUInt32BE(t,0),r.writeUInt32BE(i,4),e&&e.copy(r,8),r.writeInt32BE(_s.crc32(r.slice(4,r.length-4)),r.length-4),r};re.prototype.packGAMA=function(i){let e=Buffer.alloc(4);return e.writeUInt32BE(Math.floor(i*P.GAMMA_DIVISION),0),this._packChunk(P.TYPE_gAMA,e)};re.prototype.packIHDR=function(i,e){let t=Buffer.alloc(13);return t.writeUInt32BE(i,0),t.writeUInt32BE(e,4),t[8]=this._options.bitDepth,t[9]=this._options.colorType,t[10]=0,t[11]=0,t[12]=0,this._packChunk(P.TYPE_IHDR,t)};re.prototype.packIDAT=function(i){return this._packChunk(P.TYPE_IDAT,i)};re.prototype.packIEND=function(){return this._packChunk(P.TYPE_IEND,null)}});var ro=m((Hc,io)=>{"use strict";var Es=B("util"),eo=B("stream"),bs=Se(),Ss=ri(),to=io.exports=function(i){eo.call(this);let e=i||{};this._packer=new Ss(e),this._deflate=this._packer.createDeflate(),this.readable=!0};Es.inherits(to,eo);to.prototype.pack=function(i,e,t,r){this.emit("data",Buffer.from(bs.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,t)),r&&this.emit("data",this._packer.packGAMA(r));let n=this._packer.filterData(i,e,t);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(o){this.emit("data",this._packer.packIDAT(o))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(n)}});var co=m((De,lo)=>{"use strict";var no=B("assert").ok,Te=B("zlib"),Ts=B("util"),oo=B("buffer").kMaxLength;function le(i){if(!(this instanceof le))return new le(i);i&&i.chunkSize<Te.Z_MIN_CHUNK&&(i.chunkSize=Te.Z_MIN_CHUNK),Te.Inflate.call(this,i),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,i&&i.maxLength!=null&&(this._maxLength=i.maxLength)}function xs(i){return new le(i)}function ao(i,e){e&&process.nextTick(e),i._handle&&(i._handle.close(),i._handle=null)}le.prototype._processChunk=function(i,e,t){if(typeof t=="function")return Te.Inflate._processChunk.call(this,i,e,t);let r=this,n=i&&i.length,o=this._chunkSize-this._offset,a=this._maxLength,s=0,l=[],c=0,u;this.on("error",function(C){u=C});function h(C,b){if(r._hadError)return;let E=o-b;if(no(E>=0,"have should not go down"),E>0){let T=r._buffer.slice(r._offset,r._offset+E);if(r._offset+=E,T.length>a&&(T=T.slice(0,a)),l.push(T),c+=T.length,a-=T.length,a===0)return!1}return(b===0||r._offset>=r._chunkSize)&&(o=r._chunkSize,r._offset=0,r._buffer=Buffer.allocUnsafe(r._chunkSize)),b===0?(s+=n-C,n=C,!0):!1}no(this._handle,"zlib binding closed");let f;do f=this._handle.writeSync(e,i,s,n,this._buffer,this._offset,o),f=f||this._writeState;while(!this._hadError&&h(f[0],f[1]));if(this._hadError)throw u;if(c>=oo)throw ao(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+oo.toString(16)+" bytes");let y=Buffer.concat(l,c);return ao(this),y};Ts.inherits(le,Te.Inflate);function Ls(i,e){if(typeof e=="string"&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");let t=i._finishFlushFlag;return t==null&&(t=Te.Z_FINISH),i._processChunk(e,t)}function so(i,e){return Ls(new le(e),i)}lo.exports=De=so;De.Inflate=le;De.createInflate=xs;De.inflateSync=so});var ni=m((zc,ho)=>{"use strict";var uo=ho.exports=function(i){this._buffer=i,this._reads=[]};uo.prototype.read=function(i,e){this._reads.push({length:Math.abs(i),allowLess:i<0,func:e})};uo.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let i=this._reads[0];if(this._buffer.length&&(this._buffer.length>=i.length||i.allowLess)){this._reads.shift();let e=this._buffer;this._buffer=e.slice(i.length),i.func.call(this,e.slice(0,i.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}});var po=m(fo=>{"use strict";var Is=ni(),qs=Kt();fo.process=function(i,e){let t=[],r=new Is(i);return new qs(e,{read:r.read.bind(r),write:function(o){t.push(o)},complete:function(){}}).start(),r.process(),Buffer.concat(t)}});var yo=m((jc,_o)=>{"use strict";var mo=!0,go=B("zlib"),vs=co();go.deflateSync||(mo=!1);var ks=ni(),As=po(),Bs=Xt(),Ms=ei(),Rs=ti();_o.exports=function(i,e){if(!mo)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t;function r(D){t=D}let n;function o(D){n=D}function a(D){n.transColor=D}function s(D){n.palette=D}function l(){n.alpha=!0}let c;function u(D){c=D}let h=[];function f(D){h.push(D)}let y=new ks(i);if(new Bs(e,{read:y.read.bind(y),error:r,metadata:o,gamma:u,palette:s,transColor:a,inflateData:f,simpleTransparency:l}).start(),y.process(),t)throw t;let b=Buffer.concat(h);h.length=0;let E;if(n.interlace)E=go.inflateSync(b);else{let N=((n.width*n.bpp*n.depth+7>>3)+1)*n.height;E=vs(b,{chunkSize:N,maxLength:N})}if(b=null,!E||!E.length)throw new Error("bad png - invalid inflate data response");let T=As.process(E,n);b=null;let gt=Ms.dataToBitMap(T,n);T=null;let Ie=Rs(gt,n);return n.data=Ie,n.gamma=c||0,n}});var bo=m((Gc,Eo)=>{"use strict";var wo=!0,Co=B("zlib");Co.deflateSync||(wo=!1);var Ps=Se(),Ds=ri();Eo.exports=function(i,e){if(!wo)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t=e||{},r=new Ds(t),n=[];n.push(Buffer.from(Ps.PNG_SIGNATURE)),n.push(r.packIHDR(i.width,i.height)),i.gamma&&n.push(r.packGAMA(i.gamma));let o=r.filterData(i.data,i.width,i.height),a=Co.deflateSync(o,r.getDeflateOptions());if(o=null,!a||!a.length)throw new Error("bad png - invalid compressed data response");return n.push(r.packIDAT(a)),n.push(r.packIEND()),Buffer.concat(n)}});var So=m(oi=>{"use strict";var Fs=yo(),Ns=bo();oi.read=function(i,e){return Fs(i,e||{})};oi.write=function(i,e){return Ns(i,e)}});var Lo=m(xo=>{"use strict";var Os=B("util"),To=B("stream"),Qs=Gn(),Us=ro(),Vs=So(),F=xo.PNG=function(i){To.call(this),i=i||{},this.width=i.width|0,this.height=i.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,i.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Qs(i),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new Us(i),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};Os.inherits(F,To);F.sync=Vs;F.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};F.prototype.parse=function(i,e){if(e){let t,r;t=function(n){this.removeListener("error",r),this.data=n,e(null,this)}.bind(this),r=function(n){this.removeListener("parsed",t),e(n,null)}.bind(this),this.once("parsed",t),this.once("error",r)}return this.end(i),this};F.prototype.write=function(i){return this._parser.write(i),!0};F.prototype.end=function(i){this._parser.end(i)};F.prototype._metadata=function(i){this.width=i.width,this.height=i.height,this.emit("metadata",i)};F.prototype._gamma=function(i){this.gamma=i};F.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};F.bitblt=function(i,e,t,r,n,o,a,s){if(t|=0,r|=0,n|=0,o|=0,a|=0,s|=0,t>i.width||r>i.height||t+n>i.width||r+o>i.height)throw new Error("bitblt reading outside image");if(a>e.width||s>e.height||a+n>e.width||s+o>e.height)throw new Error("bitblt writing outside image");for(let l=0;l<o;l++)i.data.copy(e.data,(s+l)*e.width+a<<2,(r+l)*i.width+t<<2,(r+l)*i.width+t+n<<2)};F.prototype.bitblt=function(i,e,t,r,n,o,a){return F.bitblt(this,i,e,t,r,n,o,a),this};F.adjustGamma=function(i){if(i.gamma){for(let e=0;e<i.height;e++)for(let t=0;t<i.width;t++){let r=i.width*e+t<<2;for(let n=0;n<3;n++){let o=i.data[r+n]/255;o=Math.pow(o,1/2.2/i.gamma),i.data[r+n]=Math.round(o*255)}}i.gamma=0}};F.prototype.adjustGamma=function(){F.adjustGamma(this)}});var Fe=m(ce=>{"use strict";function Io(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}ce.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:Io(e.color.dark||"#000000ff"),light:Io(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};ce.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};ce.getImageWidth=function(e,t){let r=ce.getScale(e,t);return Math.floor((e+t.margin*2)*r)};ce.qrToImageData=function(e,t,r){let n=t.modules.size,o=t.modules.data,a=ce.getScale(n,r),s=Math.floor((n+r.margin*2)*a),l=r.margin*a,c=[r.color.light,r.color.dark];for(let u=0;u<s;u++)for(let h=0;h<s;h++){let f=(u*s+h)*4,y=r.color.light;if(u>=l&&h>=l&&u<s-l&&h<s-l){let C=Math.floor((u-l)/a),b=Math.floor((h-l)/a);y=c[o[C*n+b]?1:0]}e[f++]=y.r,e[f++]=y.g,e[f++]=y.b,e[f]=y.a}}});var qo=m(G=>{"use strict";var Hs=B("fs"),zs=Lo().PNG,ai=Fe();G.render=function(e,t){let r=ai.getOptions(t),n=r.rendererOpts,o=ai.getImageWidth(e.modules.size,r);n.width=o,n.height=o;let a=new zs(n);return ai.qrToImageData(a.data,e,r),a};G.renderToDataURL=function(e,t,r){typeof r>"u"&&(r=t,t=void 0),G.renderToBuffer(e,t,function(n,o){n&&r(n);let a="data:image/png;base64,";a+=o.toString("base64"),r(null,a)})};G.renderToBuffer=function(e,t,r){typeof r>"u"&&(r=t,t=void 0);let n=G.render(e,t),o=[];n.on("error",r),n.on("data",function(a){o.push(a)}),n.on("end",function(){r(null,Buffer.concat(o))}),n.pack()};G.renderToFile=function(e,t,r,n){typeof n>"u"&&(n=r,r=void 0);let o=!1,a=(...l)=>{o||(o=!0,n.apply(null,l))},s=Hs.createWriteStream(e);s.on("error",a),s.on("close",a),G.renderToFileStream(s,t,r)};G.renderToFileStream=function(e,t,r){G.render(t,r).pack().pipe(e)}});var vo=m(dt=>{"use strict";var Ys=Fe(),js={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},Gs={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function $s(i,e,t){return i&&e?t.BB:i&&!e?t.BW:!i&&e?t.WB:t.WW}dt.render=function(i,e,t){let r=Ys.getOptions(e),n=js;(r.color.dark.hex==="#ffffff"||r.color.light.hex==="#000000")&&(n=Gs);let o=i.modules.size,a=i.modules.data,s="",l=Array(o+r.margin*2+1).join(n.WW);l=Array(r.margin/2+1).join(l+`
`);let c=Array(r.margin+1).join(n.WW);s+=l;for(let u=0;u<o;u+=2){s+=c;for(let h=0;h<o;h++){let f=a[u*o+h],y=a[(u+1)*o+h];s+=$s(f,y,n)}s+=c+`
`}return s+=l.slice(0,-1),typeof t=="function"&&t(null,s),s};dt.renderToFile=function(e,t,r,n){typeof n>"u"&&(n=r,r=void 0);let o=B("fs"),a=dt.render(t,r);o.writeFile(e,a,n)}});var Ao=m(ko=>{"use strict";ko.render=function(i,e,t){let r=i.modules.size,n=i.modules.data,o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",s="",l=Array(r+3).join(a),c=Array(2).join(a);s+=l+`
`;for(let u=0;u<r;++u){s+=a;for(let h=0;h<r;h++)s+=n[u*r+h]?o:a;s+=c+`
`}return s+=l+`
`,typeof t=="function"&&t(null,s),s}});var Po=m(Ro=>{"use strict";var Ks="\x1B[47m",Ws="\x1B[40m",si="\x1B[37m",li="\x1B[30m",ue="\x1B[0m",Js=Ks+li,Zs=Ws+si,Xs=function(i,e,t){return{"00":ue+" "+i,"01":ue+e+"\u2584"+i,"02":ue+t+"\u2584"+i,10:ue+e+"\u2580"+i,11:" ",12:"\u2584",20:ue+t+"\u2580"+i,21:"\u2580",22:"\u2588"}},Bo=function(i,e,t,r){let n=e+1;if(t>=n||r>=n||r<-1||t<-1)return"0";if(t>=e||r>=e||r<0||t<0)return"1";let o=r*e+t;return i[o]?"2":"1"},Mo=function(i,e,t,r){return Bo(i,e,t,r)+Bo(i,e,t,r+1)};Ro.render=function(i,e,t){let r=i.modules.size,n=i.modules.data,o=!!(e&&e.inverse),a=e&&e.inverse?Zs:Js,c=Xs(a,o?li:si,o?si:li),u=ue+`
`+a,h=a;for(let f=-1;f<r+1;f+=2){for(let y=-1;y<r;y++)h+=c[Mo(n,r,y,f)];h+=c[Mo(n,r,r,f)]+u}return h+=ue,typeof t=="function"&&t(null,h),h}});var Fo=m(Do=>{"use strict";var el=Ao(),tl=Po();Do.render=function(i,e,t){return e&&e.small?tl.render(i,e,t):el.render(i,e,t)}});var ui=m(Oo=>{"use strict";var il=Fe();function No(i,e){let t=i.a/255,r=e+'="'+i.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function ci(i,e,t){let r=i+e;return typeof t<"u"&&(r+=" "+t),r}function rl(i,e,t){let r="",n=0,o=!1,a=0;for(let s=0;s<i.length;s++){let l=Math.floor(s%e),c=Math.floor(s/e);!l&&!o&&(o=!0),i[s]?(a++,s>0&&l>0&&i[s-1]||(r+=o?ci("M",l+t,.5+c+t):ci("m",n,0),n=0,o=!1),l+1<e&&i[s+1]||(r+=ci("h",a),a=0)):n++}return r}Oo.render=function(e,t,r){let n=il.getOptions(t),o=e.modules.size,a=e.modules.data,s=o+n.margin*2,l=n.color.light.a?"<path "+No(n.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",c="<path "+No(n.color.dark,"stroke")+' d="'+rl(a,o,n.margin)+'"/>',u='viewBox="0 0 '+s+" "+s+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,f),f}});var Qo=m(ft=>{"use strict";var nl=ui();ft.render=nl.render;ft.renderToFile=function(e,t,r,n){typeof n>"u"&&(n=r,r=void 0);let o=B("fs"),s='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+ft.render(t,r);o.writeFile(e,s,n)}});var Uo=m(pt=>{"use strict";var hi=Fe();function ol(i,e,t){i.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function al(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}pt.render=function(e,t,r){let n=r,o=t;typeof n>"u"&&(!t||!t.getContext)&&(n=t,t=void 0),t||(o=al()),n=hi.getOptions(n);let a=hi.getImageWidth(e.modules.size,n),s=o.getContext("2d"),l=s.createImageData(a,a);return hi.qrToImageData(l.data,e,n),ol(s,o,a),s.putImageData(l,0,0),o};pt.renderToDataURL=function(e,t,r){let n=r;typeof n>"u"&&(!t||!t.getContext)&&(n=t,t=void 0),n||(n={});let o=pt.render(e,t,n),a=n.type||"image/png",s=n.rendererOpts||{};return o.toDataURL(a,s.quality)}});var Ho=m(Ne=>{"use strict";var sl=xt(),di=zt(),Vo=Uo(),ll=ui();function fi(i,e,t,r,n){let o=[].slice.call(arguments,1),a=o.length,s=typeof o[a-1]=="function";if(!s&&!sl())throw new Error("Callback required as last argument");if(s){if(a<2)throw new Error("Too few arguments provided");a===2?(n=t,t=e,e=r=void 0):a===3&&(e.getContext&&typeof n>"u"?(n=r,r=void 0):(n=r,r=t,t=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(t=e,e=r=void 0):a===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,c){try{let u=di.create(t,r);l(i(u,e,r))}catch(u){c(u)}})}try{let l=di.create(t,r);n(null,i(l,e,r))}catch(l){n(l)}}Ne.create=di.create;Ne.toCanvas=fi.bind(null,Vo.render);Ne.toDataURL=fi.bind(null,Vo.renderToDataURL);Ne.toString=fi.bind(null,function(i,e,t){return ll.render(i,t)})});var Go=m(ne=>{"use strict";var zo=xt(),pi=zt(),cl=qo(),Yo=vo(),ul=Fo(),jo=Qo();function Oe(i,e,t){if(typeof i>"u")throw new Error("String required as first argument");if(typeof t>"u"&&(t=e,e={}),typeof t!="function")if(zo())e=t||{},t=null;else throw new Error("Callback required as last argument");return{opts:e,cb:t}}function hl(i){return i.slice((i.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function mt(i){switch(i){case"svg":return jo;case"txt":case"utf8":return Yo;case"png":case"image/png":default:return cl}}function dl(i){switch(i){case"svg":return jo;case"terminal":return ul;case"utf8":default:return Yo}}function Qe(i,e,t){if(!t.cb)return new Promise(function(r,n){try{let o=pi.create(e,t.opts);return i(o,t.opts,function(a,s){return a?n(a):r(s)})}catch(o){n(o)}});try{let r=pi.create(e,t.opts);return i(r,t.opts,t.cb)}catch(r){t.cb(r)}}ne.create=pi.create;ne.toCanvas=Ho().toCanvas;ne.toString=function(e,t,r){let n=Oe(e,t,r),o=n.opts?n.opts.type:void 0,a=dl(o);return Qe(a.render,e,n)};ne.toDataURL=function(e,t,r){let n=Oe(e,t,r),o=mt(n.opts.type);return Qe(o.renderToDataURL,e,n)};ne.toBuffer=function(e,t,r){let n=Oe(e,t,r),o=mt(n.opts.type);return Qe(o.renderToBuffer,e,n)};ne.toFile=function(e,t,r,n){if(typeof e!="string"||!(typeof t=="string"||typeof t=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!zo())throw new Error("Too few arguments provided");let o=Oe(t,r,n),a=o.opts.type||hl(e),l=mt(a).renderToFile.bind(null,e);return Qe(l,t,o)};ne.toFileStream=function(e,t,r){if(arguments.length<2)throw new Error("Too few arguments provided");let n=Oe(t,r,e.emit.bind(e,"error")),a=mt("png").renderToFileStream.bind(null,e);Qe(a,t,n)}});var mi=m((su,$o)=>{"use strict";$o.exports=Go()});var tt=class i{constructor(e,t,r){this._StorageService=e;this.router=t;this._ErrorLogService=r}ListQuanlyqrcode=Ve([]);DetailQuanlyqrcode=Ve({});quanlyqrcodeId=Ve(null);setQuanlyqrcodeId(e){this.quanlyqrcodeId.set(e)}socket=Ri(`${V.APIURL}`,{transports:["websocket"],reconnectionAttempts:5,timeout:5e3});SendEmail(e){return v(this,null,function*(){try{let t={to:e.email,name:e.name,qrcode:e.qrcode},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=yield fetch(`${V.APIURL}/mail/sendemail`,r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let o=yield n.json();console.log(o),o.statusCode===200&&(e.isSentEmail=!0,this.updateQuanlyqrcode(e)),this.getAllQuanlyqrcode(),this.quanlyqrcodeId.set(o.id)}catch(t){return this._ErrorLogService.logError("Failed to CreateQuanlyqrcode",t),console.error(t)}})}CreateQuanlyqrcode(e){return v(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},r=yield fetch(`${V.APIURL}/quanlyqrcode`,t);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);let n=yield r.json();r.ok||this.handleError(r.status),this.getAllQuanlyqrcode(),this.quanlyqrcodeId.set(n.id)}catch(t){return this._ErrorLogService.logError("Failed to CreateQuanlyqrcode",t),console.error(t)}})}getAllQuanlyqrcode(){return v(this,null,function*(){let t=yield(yield this.initDB()).getAll("quanlyqrcodes"),r=this._StorageService.getItem("quanlyqrcodes_updatedAt")||"0";if(t.length>0&&Date.now()-new Date(r).getTime()<5*60*1e3)return this.ListQuanlyqrcode.set(t),t;try{let n={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`}},o=yield fetch(`${V.APIURL}/quanlyqrcode/last-updated`,n);if(!o.ok)return this.handleError(o.status),t;let{updatedAt:a}=yield o.json();if(a<=r)return this.ListQuanlyqrcode.set(t),t;console.log(a,r);let s=yield fetch(`${V.APIURL}/quanlyqrcode`,n);if(!s.ok)return this.handleError(s.status),t;let l=yield s.json();return yield this.saveQuanlyqrcodes(l),this._StorageService.setItem("quanlyqrcodes_updatedAt",a),this.ListQuanlyqrcode.set(l),l}catch(n){return this._ErrorLogService.logError("Failed to create getAllQuanlyqrcode",n),console.error(n),t}})}listenQuanlyqrcodeUpdates(){this.socket.on("quanlyqrcode-updated",()=>v(this,null,function*(){console.log("\u{1F504} D\u1EEF li\u1EC7u s\u1EA3n ph\u1EA9m thay \u0111\u1ED5i, c\u1EADp nh\u1EADt l\u1EA1i cache..."),this._StorageService.removeItem("quanlyqrcodes_updatedAt"),yield this.getAllQuanlyqrcode()}))}initDB(){return v(this,null,function*(){return yield Pi("QuanlyqrcodeDB",1,{upgrade(e){e.createObjectStore("quanlyqrcodes",{keyPath:"id"})}})})}saveQuanlyqrcodes(e){return v(this,null,function*(){let r=(yield this.initDB()).transaction("quanlyqrcodes","readwrite"),n=r.objectStore("quanlyqrcodes");yield n.clear(),e.forEach(o=>n.put(o)),yield r.done})}getQuanlyqrcodeBy(e){return v(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(e)},r=yield fetch(`${V.APIURL}/quanlyqrcode/findby`,t);r.ok||this.handleError(r.status);let n=yield r.json();this.DetailQuanlyqrcode.set(n)}catch(t){return this._ErrorLogService.logError("Failed to getQuanlyqrcodeBy",t),console.error(t)}})}updateQuanlyqrcode(e){return v(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},r=yield fetch(`${V.APIURL}/quanlyqrcode/${e.id}`,t);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);let n=yield r.json();r.ok||this.handleError(r.status),this.getAllQuanlyqrcode(),this.getQuanlyqrcodeBy({id:n.id})}catch(t){return this._ErrorLogService.logError("Failed to updateQuanlyqrcode",t),console.error(t)}})}DeleteQuanlyqrcode(e){return v(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}},r=yield fetch(`${V.APIURL}/quanlyqrcode/${e.id}`,t);r.ok||this.handleError(r.status),this.getAllQuanlyqrcode()}catch(t){return this._ErrorLogService.logError("Failed to DeleteQuanlyqrcode",t),console.error(t)}})}handleError(e){let t="L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh";switch(e){case 401:t="Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i";break;case 403:t="B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp";break;case 500:t="L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau";break}let r=JSON.stringify({code:e,title:t});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}static \u0275fac=function(t){return new(t||i)(Ue(Xe),Ue(Ze),Ue(Vi))};static \u0275prov=yi({token:i,factory:i.\u0275fac,providedIn:"root"})};var xe=_i(mi(),1);var fl=["qrcElement"],Ko=(()=>{class i{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Ci,this.context=null}ngOnChanges(){return v(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((r,n)=>{(0,xe.toDataURL)(this.qrdata,t,(o,a)=>{o?n(o):r(a)})})}toCanvas(t,r){return new Promise((n,o)=>{(0,xe.toCanvas)(t,this.qrdata,r,a=>{a?o(a):n("success")})})}toSVG(t){return new Promise((r,n)=>{(0,xe.toString)(this.qrdata,t,(o,a)=>{o?n(o):r(a)})})}renderElement(t){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return v(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,n=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let a=this.renderer.createElement("canvas");this.context=a.getContext("2d"),this.toCanvas(a,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(a,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(a,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,n),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),n!==this.centerImage.height&&(this.centerImage.height=n),o!==this.centerImage.width&&(this.centerImage.width=o);let s=this.centerImage;s&&(s.onload=()=>{this.context?.drawImage(s,a.width/2-o/2,a.height/2-n/2,o,n)})}this.renderElement(a),this.emitQRCodeURL(a)}).catch(s=>{console.error("[angularx-qrcode] canvas error:",s)});break}case"svg":{let a=this.renderer.createElement("div");this.toSVG(t).then(s=>{this.renderer.setProperty(a,"innerHTML",s);let l=a.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(s=>{console.error("[angularx-qrcode] svg error:",s)});break}case"url":case"img":default:{let a=this.renderer.createElement("img");this.toDataURL(t).then(s=>{this.alt&&a.setAttribute("alt",this.alt),this.ariaLabel&&a.setAttribute("aria-label",this.ariaLabel),a.setAttribute("src",s),this.title&&a.setAttribute("title",this.title),this.renderElement(a),this.emitQRCodeURL(a)}).catch(s=>{console.error("[angularx-qrcode] img/url error:",s)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let r=t.split(";base64,"),n=r[0].split(":")[1],o=atob(r[1]),a=new Uint8Array(o.length);for(let s=0;s<o.length;++s)a[s]=o.charCodeAt(s);return new Blob([a],{type:n})}emitQRCodeURL(t){let r=t.constructor.name;if(r===SVGSVGElement.name){let l=t.outerHTML,c=new Blob([l],{type:"image/svg+xml"}),u=URL.createObjectURL(c),h=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(h);return}let n="";r===HTMLCanvasElement.name&&(n=t.toDataURL("image/png")),r===HTMLImageElement.name&&(n=t.src);let o=this.convertBase64ImageUrlToBlob(n),a=URL.createObjectURL(o),s=this.sanitizer.bypassSecurityTrustUrl(a);this.qrCodeURL.emit(s)}static{this.\u0275fac=function(r){return new(r||i)(Ct(Ei),Ct(Bi))}}static{this.\u0275cmp=He({type:i,selectors:[["qrcode"]],viewQuery:function(r,n){if(r&1&&fe(fl,7),r&2){let o;pe(o=me())&&(n.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[wi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,n){r&1&&de(0,"div",null,0),r&2&&bi(n.cssClass)},encapsulation:2,changeDetection:0})}}return i})();var Jo=_i(mi());var pl=["drawer"],gi=()=>({standalone:!0}),ml=(i,e)=>e.key;function gl(i,e){if(i&1){let t=O();d(0,"button",47),q("click",function(n){let o=x(t).$implicit;return _(2).toggleColumn(o),L(n.stopPropagation())}),d(1,"mat-icon"),g(2),p(),d(3,"span"),g(4),p()()}if(i&2){let t=e.$implicit;w(2),ge(t.isShow?"check_box":"check_box_outline_blank"),w(2),ge(t.value)}}function _l(i,e){if(i&1){let t=O();d(0,"button",48),q("click",function(){x(t);let n=_(2),o=J(45);return L(n.openDeleteDialog(o))}),d(1,"mat-icon"),g(2,"delete"),p()()}}function yl(i,e){if(i&1){let t=O();d(0,"button",49),q("click",function(){x(t);let n=_(2),o=J(49);return L(n.openSentEmailDialog(o))}),d(1,"mat-icon"),g(2,"forward_to_inbox"),p()()}}function wl(i,e){if(i&1){let t=O();d(0,"div",29)(1,"div",30)(2,"button",31),q("click",function(){x(t);let n=_();return L(n.create())}),d(3,"mat-icon"),g(4,"add_circle"),p()(),d(5,"button",32)(6,"mat-icon"),g(7,"tune"),p()(),d(8,"mat-menu",null,2)(10,"div",33)(11,"mat-form-field",34)(12,"input",35),q("input",function(n){x(t);let o=_();return L(o.doFilterColumns(n))})("click",function(n){return x(t),L(n.stopPropagation())}),p(),d(13,"mat-icon",36),g(14,"search"),p()()(),d(15,"div",37),Et(16,gl,5,2,"button",38,ml),p()(),d(18,"button",39),q("click",function(){x(t);let n=_();return L(n.isSearch=!n.isSearch)}),d(19,"mat-icon"),g(20,"search"),p()(),d(21,"button",40),q("click",function(){x(t);let n=_();return L(n.ExportExcel(n.Listquanlyqrcode(),"Quanlyqrcode"))}),d(22,"mat-icon"),g(23,"file_download"),p()(),d(24,"button",41),q("click",function(){x(t);let n=J(28);return L(n.click())}),d(25,"mat-icon"),g(26,"file_upload"),p()(),d(27,"input",42,6),q("change",function(n){x(t);let o=_();return L(o.ImporExcel(n))}),p(),d(29,"button",43),q("click",function(){x(t);let n=_(),o=J(47);return L(n.OpenLoadDrive(o))}),d(30,"mat-icon"),g(31,"cloud_download"),p()(),d(32,"span",44),g(33),p(),z(34,_l,3,0,"button",45)(35,yl,3,0,"button",46),p()()}if(i&2){let t=J(9),r=_();w(5),k("matMenuTriggerFor",t),w(11),bt(r.FilterColumns),w(17),Y(" ",r.Listquanlyqrcode().length," S\u1EA3n Ph\u1EA9m "),w(),k("ngIf",r.EditList.length>0),w(),k("ngIf",r.EditList.length>0)}}function Cl(i,e){if(i&1){let t=O();d(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"mat-icon"),g(5,"search"),p()(),d(6,"input",54),q("keyup",function(n){x(t);let o=_();return L(o.applyFilter(n))}),p()(),d(7,"button",55),q("click",function(){x(t);let n=_();return L(n.isSearch=!n.isSearch)}),d(8,"mat-icon"),g(9,"cancel"),p()()()()}}function El(i,e){if(i&1){let t=O();d(0,"th",58)(1,"span",59),g(2),p(),d(3,"app-searchfilter",60),q("OutFilter",function(n){x(t);let o=_(2);return L(o.onOutFilter(n))}),p()()}if(i&2){let t=_().$implicit,r=_();w(2),Y(" ",r.ColumnName[t]," "),w(),k("icon","filter_alt")("ListItem",r.Listquanlyqrcode())("ListFilter",r.ListFilter)("filterItem",r.FilterHederColumn(r.dataSource.filteredData,t))}}function bl(i,e){if(i&1){let t=O();d(0,"span",65),q("click",function(){x(t);let n=_().$implicit,o=_(2);return L(o.goToDetail(n))}),g(1),p()}if(i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",t[r]," ")}}function Sl(i,e){i&1&&(d(0,"span",67),g(1,"mark_email_read"),p())}function Tl(i,e){if(i&1&&(d(0,"span",63),z(1,Sl,2,0,"span",66),d(2,"span"),g(3),p()()),i&2){let t=_().$implicit,r=_().$implicit;w(),k("ngIf",t.isSentEmail),w(2),ge(t[r])}}function xl(i,e){if(i&1){let t=O();d(0,"span")(1,"qrcode",68),q("click",function(n){x(t);let o=_().$implicit,a=_(2);return L(a.downloadQRCode(o,n))}),p()()}if(i&2){let t=_().$implicit;w(),k("qrdata",t.qrcode)("width",100)("errorCorrectionLevel","M")}}function Ll(i,e){if(i&1&&(d(0,"span",64),g(1),Ke(2,"date"),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",We(2,1,t[r],"dd/MM/yyyy")," ")}}function Il(i,e){if(i&1&&(d(0,"span",64),g(1),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",t[r],"% ")}}function ql(i,e){i&1&&(d(0,"mat-icon",69),g(1,"check_circle"),p())}function vl(i,e){i&1&&(d(0,"mat-icon",70),g(1,"cancel"),p())}function kl(i,e){if(i&1&&(d(0,"span",64),z(1,ql,2,0,"mat-icon",69)(2,vl,2,0,"mat-icon",70),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),ze(t[r]?1:2)}}function Al(i,e){i&1&&(d(0,"mat-icon",69),g(1,"check_circle"),p())}function Bl(i,e){i&1&&(d(0,"mat-icon",70),g(1,"cancel"),p())}function Ml(i,e){if(i&1&&(d(0,"span",64),z(1,Al,2,0,"mat-icon",69)(2,Bl,2,0,"mat-icon",70),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),ze(t[r]?1:2)}}function Rl(i,e){if(i&1&&(d(0,"span",64),g(1),Ke(2,"date"),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",We(2,1,t[r],"dd/MM/yyyy")," ")}}function Pl(i,e){if(i&1&&(d(0,"span",64),g(1),Ke(2,"date"),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",We(2,1,t[r],"dd/MM/yyyy")," ")}}function Dl(i,e){if(i&1&&(d(0,"span",64),g(1),p()),i&2){let t=_().$implicit,r=_().$implicit;w(),Y(" ",t[r]," ")}}function Fl(i,e){if(i&1&&(d(0,"td",61),z(1,bl,2,1,"span",62)(2,Tl,4,2,"span",63)(3,xl,2,3,"span")(4,Ll,3,4,"span",64)(5,Il,2,1,"span",64)(6,kl,3,1,"span",64)(7,Ml,3,1,"span",64)(8,Rl,3,4,"span",64)(9,Pl,3,4,"span",64)(10,Dl,2,1,"span",64),p()),i&2){let t,r=_().$implicit;w(),ze((t=r)==="qrcode"?1:t==="email"?2:t==="STT"?3:t==="createdAt"?4:t==="haohut"?5:t==="isActive"?6:t==="isSentEmail"?7:t==="updatedAt"?8:t==="checkedAt"?9:10)}}function Nl(i,e){if(i&1&&(xi(0,14),z(1,El,4,5,"th",56)(2,Fl,11,1,"td",57),Li()),i&2){let t=e.$implicit;k("matColumnDef",t)}}function Ol(i,e){i&1&&de(0,"tr",71)}function Ql(i,e){if(i&1){let t=O();d(0,"tr",72),q("click",function(){let n=x(t).$implicit,o=_();return L(o.AddToEdit(n))}),p()}if(i&2){let t=e.$implicit,r=_();Si("hover:bg-slate-100 ",r.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function Ul(i,e){i&1&&(d(0,"tr",73)(1,"td",74),g(2,"Kh\xF4ng t\xECm th\u1EA5y"),p()())}function Vl(i,e){i&1&&(d(0,"mat-dialog-content")(1,"div",75)(2,"div",76),g(3,"X\xE1c Nh\u1EADn"),p(),d(4,"div"),g(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),p(),d(6,"div",77)(7,"button",78),g(8,"\u0110\u1ED3ng \xDD"),p(),d(9,"button",79),g(10,"Hu\u1EF7 B\u1ECF"),p()()()())}function Hl(i,e){if(i&1){let t=O();d(0,"mat-dialog-content",80)(1,"div",81)(2,"mat-form-field",34)(3,"mat-label"),g(4,"IdSheet"),p(),d(5,"input",82),Ge("ngModelChange",function(n){x(t);let o=_();return je(o.IdSheet,n)||(o.IdSheet=n),L(n)}),p()(),d(6,"mat-form-field",34)(7,"mat-label"),g(8,"SheetName"),p(),d(9,"input",83),Ge("ngModelChange",function(n){x(t);let o=_();return je(o.SheetName,n)||(o.SheetName=n),L(n)}),p()(),d(10,"button",84),q("click",function(){x(t);let n=_();return L(n.LoadDrive())}),d(11,"mat-icon"),g(12,"refresh"),p()()(),d(13,"div",85),de(14,"app-ktable",86),p(),d(15,"div",87)(16,"button",78),g(17,"\u0110\u1ED3ng \xDD"),p(),d(18,"button",79),g(19,"Hu\u1EF7 B\u1ECF"),p()()()}if(i&2){let t=_();w(5),Ye("ngModel",t.IdSheet),k("ngModelOptions",$e(7,gi)),w(4),Ye("ngModel",t.SheetName),k("ngModelOptions",$e(8,gi)),w(5),k("ListItem",t.ImportIteam)("ColumnName",t.ImportColumnName)("displayedColumns",t.ImportdisplayedColumns)}}function zl(i,e){i&1&&(d(0,"mat-dialog-content")(1,"div",75)(2,"div",76),g(3,"X\xE1c Nh\u1EADn"),p(),d(4,"div"),g(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n g\u1EEDi email \u0111\u1EBFn kh\xE1ch m\u1EDDi \u0111\xE3 ch\u1ECDn kh\xF4ng?"),p(),d(6,"div",77)(7,"button",78),g(8,"\u0110\u1ED3ng \xDD"),p(),d(9,"button",79),g(10,"Hu\u1EF7 B\u1ECF"),p()()()())}var Le=class Le{displayedColumns=[];ColumnName={STT:"STT",isSentEmail:"\u0110\xE3 G\u1EEDi Email",qrcode:"M\xE3 QR",code:"M\xE3 X\xE1c Nh\u1EADn",name:"H\u1ECD T\xEAn",phone:"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",email:"Email",checkedAt:"Checkin",createdAt:"Ng\xE0y T\u1EA1o"};FilterColumns=JSON.parse(localStorage.getItem("QuanlyqrcodeColFilter")||"[]");Columns=[];totalItems=0;pageSize=10;currentPage=1;totalPages=1;paginator;sort;drawer;_QuanlyqrcodeService=W(tt);_breakpointObserver=W(Di);_GoogleSheetService=W(Pr);_StorageService=W(Xe);_router=W(Ze);_dialog=W(ir);Listquanlyqrcode=this._QuanlyqrcodeService.ListQuanlyqrcode;EditList=[];dataSource=new Tt([]);quanlyqrcodeId=this._QuanlyqrcodeService.quanlyqrcodeId;_snackBar=W(Ui);CountItem=0;isSearch=!1;constructor(){qi(()=>{this.dataSource.data=this.Listquanlyqrcode(),this.totalItems=this.Listquanlyqrcode().length,this.calculateTotalPages()})}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnInit(){return v(this,null,function*(){this._QuanlyqrcodeService.listenQuanlyqrcodeUpdates(),yield this._QuanlyqrcodeService.getAllQuanlyqrcode(),this.displayedColumns=Object.keys(this.ColumnName),this.updateDisplayData(),this.dataSource=new Tt(this.Listquanlyqrcode()),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer()})}refresh(){return v(this,null,function*(){yield this._QuanlyqrcodeService.getAllQuanlyqrcode()})}downloadQRCode(e,t){Jo.toDataURL(e.qrcode,{width:300,errorCorrectionLevel:"M"},(r,n)=>{if(r){console.error("L\u1ED7i khi t\u1EA1o m\xE3 QR:",r);return}let o=document.createElement("a");o.href=n,o.download=`${e.name}_qrcode.png`,o.click()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("QuanlyqrcodeColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDrawer(){this._breakpointObserver.observe([Qi.Handset]).subscribe(e=>{e.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(r=>r.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(e,t){return e.filter((n,o,a)=>o===a.findIndex(s=>s[t]===n[t]))}doFilterHederColumn(e,t){this.dataSource.filteredData=this.Listquanlyqrcode().filter(n=>n[t].toLowerCase().includes(e.target.value.toLowerCase()));let r=e.target.value.toLowerCase()}ListFilter=[];ChosenItem(e,t){let r=this.dataSource.filteredData.filter(o=>o[t]===e[t]);this.ListFilter.filter(o=>o[t]===e[t]).length>0?this.ListFilter=this.ListFilter.filter(o=>o[t]!==e[t]):this.ListFilter=[...this.ListFilter,...r]}ChosenAll(e){e.forEach(t=>{!!this.ListFilter.find(n=>n.id===t.id)?this.ListFilter=this.ListFilter.filter(n=>n.id!==n.id):this.ListFilter.push(t)})}ResetFilter(){this.ListFilter=this.Listquanlyqrcode()}EmptyFiter(){this.ListFilter=[]}CheckItem(e){return!!this.ListFilter.find(t=>t.id===e.id)}ApplyFilterColum(e){this.dataSource.data=this.Listquanlyqrcode().filter(t=>this.ListFilter.some(r=>r.id===t.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,e.closeMenu()}onOutFilter(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),localStorage.setItem("QuanlyqrcodeColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(r=>r.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/quanlyqrcode","new"])}openDeleteDialog(e){this._dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(r=>{r=="true"&&this.DeleteListItem()})}DeleteListItem(){this.EditList.forEach(e=>{this._QuanlyqrcodeService.DeleteQuanlyqrcode(e)}),this.EditList=[],this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}AddToEdit(e){this.EditList.find(r=>r.id===e.id)?this.EditList=this.EditList.filter(r=>r.id!==e.id):this.EditList.push(e)}CheckItemInEdit(e){return this.EditList.some(t=>t.id===e.id)}goToDetail(e){this.drawer.open(),this._QuanlyqrcodeService.setQuanlyqrcodeId(e.id),this._router.navigate(["admin/quanlyqrcode",e.id])}OpenLoadDrive(e){this._dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(r=>v(this,null,function*(){r=="true"&&(console.log(this.ImportIteam),yield Promise.all(this.ImportIteam.map(n=>this._QuanlyqrcodeService.CreateQuanlyqrcode(yt(qe({},n),{slug:pr(n.title),email:n.email.toLowerCase(),qrcode:St(12,!1),code:St(6,!1)})))).then(()=>{this._snackBar.open("Import Successful","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}))}))}IdSheet=this._StorageService.getItem("IdSheet")||"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk";SheetName=this._StorageService.getItem("SheetName")||"SPImport";ImportIteam=[];ImportColumnName={};ImportdisplayedColumns=[];LoadDrive(){return v(this,null,function*(){let e={IdSheet:this.IdSheet,SheetName:this.SheetName,ApiKey:V.GSApiKey};this._StorageService.setItem("IdSheet",this.IdSheet),this._StorageService.setItem("SheetName",this.SheetName);let t=yield this._GoogleSheetService.getDrive(e);this.ImportIteam=fr(t.values),this.ImportColumnName=Object.fromEntries(t.values[0].map((r,n)=>[r,t.values[1][n]])),this.ImportdisplayedColumns=t.values[0]})}DoImportData(e){return v(this,null,function*(){let t=e.map(s=>({title:s.title?.trim()||"",masp:s.masp?.trim()||"",giagoc:Number(s.giagoc)||0,dvt:s.dvt?.trim()||"",soluong:Number(s.soluong)||0,soluongkho:Number(s.soluongkho)||0,haohut:Number(s.haohut)||0,ghichu:s.ghichu?.trim()||""})),r=Array.from(new Map(t.map(s=>[s.masp,s])).values()),n=this._QuanlyqrcodeService.ListQuanlyqrcode(),o=n.map(s=>s.masp),a=r.map(s=>s.masp).filter(s=>!o.includes(s));yield Promise.all(r.map(s=>v(this,null,function*(){let l=n.find(c=>c.masp===s.masp);if(l){let c=qe(qe({},l),s);yield this._QuanlyqrcodeService.updateQuanlyqrcode(c)}else yield this._QuanlyqrcodeService.CreateQuanlyqrcode(s)}))),yield Promise.all(n.filter(s=>!r.some(l=>l.masp===s.masp)).map(s=>this._QuanlyqrcodeService.updateQuanlyqrcode(yt(qe({},s),{isActive:!1})))),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ImporExcel(e){return v(this,null,function*(){let t=yield Rr(e);this.DoImportData(t)})}ExportExcel(e,t){let r=e.map(n=>({title:n.title,masp:n.masp,giagoc:n.giagoc,dvt:n.dvt,soluong:n.soluong,soluongkho:n.soluongkho,haohut:n.haohut,ghichu:n.ghichu}));Mr(r,t)}trackByFn(e,t){return t.id}openSentEmailDialog(e){this._dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(r=>{r=="true"&&(console.log(this.EditList),this.EditList.forEach(n=>{this._QuanlyqrcodeService.SendEmail(n)}))})}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e,t){e>this.Listquanlyqrcode().length?(this.pageSize=this.Listquanlyqrcode().length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.Listquanlyqrcode().length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=e,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),t.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize,r=this.Listquanlyqrcode().slice(e,t);this.dataSource.data=r}static \u0275fac=function(t){return new(t||Le)};static \u0275cmp=He({type:Le,selectors:[["app-listquanlyqrcode"]],viewQuery:function(t,r){if(t&1&&(fe(_r,5),fe(et,5),fe(pl,7)),t&2){let n;pe(n=me())&&(r.paginator=n.first),pe(n=me())&&(r.sort=n.first),pe(n=me())&&(r.drawer=n.first)}},decls:50,vars:19,consts:[["drawer",""],["menuHienthi","matMenuTrigger"],["menu","matMenu"],["DeleteDialog",""],["LoadDriveDialog",""],["SentEmailDialog",""],["uploadfile",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],["class","border p-1 cursor-pointer w-full relative flex lg:flex-row lg:space-y-2 space-y-0 flex-col space-x-2 justify-between items-center bg-white rounded-lg",4,"ngIf"],["class","border p-1 py-2 w-full flex flex-row space-x-2 items-center",4,"ngIf"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"border","p-1","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","color","primary","mat-icon-button","",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","T\xECm Ki\u1EBFm","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click",4,"ngIf"],["matTooltip","G\u1EEDi Email","color","primary","mat-icon-button","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click"],["matTooltip","G\u1EEDi Email","color","primary","mat-icon-button","",3,"click"],[1,"border","p-1","py-2","w-full","flex","flex-row","space-x-2","items-center"],[1,"flex","items-center"],[1,"relative","w-full"],[1,"absolute","text-blue-600","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["type","text","placeholder","Vui l\xF2ng T\xECm Ki\u1EBFm",1,"w-full","max-w-2xl","border","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","ps-10","p-2.5",3,"keyup"],["mat-icon-button","","color","warn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","ListFilter","filterItem"],["mat-cell",""],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","flex","flex-row","space-x-2","items-center"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],[3,"click","qrdata","width","errorCorrectionLevel"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],[1,"!w-screen","!h-screen","!max-h-screen","!relative","!flex","flex-col","space-y-8","items-center","justify-center"],[1,"relative","flex","flex-row","space-x-2","items-center"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp IdSheet",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp SheetName",3,"ngModelChange","ngModel","ngModelOptions"],["matTooltip","Load D\u1EEF Li\u1EC7u","color","primary","mat-icon-button","",3,"click"],[1,"relative","h-full","w-full","overflow-auto"],[3,"ListItem","ColumnName","displayedColumns"],[1,"relative","flex","flex-row","space-x-2","items-center","justify-center"]],template:function(t,r){if(t&1){let n=O();d(0,"mat-drawer-container",7)(1,"mat-drawer",8,0),de(3,"router-outlet"),p(),d(4,"div",9),z(5,wl,36,4,"div",10)(6,Cl,10,0,"div",11),d(7,"div",12)(8,"table",13),Et(9,Nl,3,1,"ng-container",14,Ti),z(11,Ol,1,0,"tr",15)(12,Ql,1,3,"tr",16)(13,Ul,3,0,"tr",17),p()(),d(14,"div",18)(15,"div",19)(16,"span",20),g(17,"\u0110ang Xem "),d(18,"strong"),g(19),p(),g(20," - "),d(21,"strong"),g(22),p(),g(23),p(),d(24,"div",21)(25,"span",22,1),g(27),p(),d(28,"mat-menu",null,2)(30,"div",23),q("click",function(a){return x(n),L(a.stopPropagation())}),d(31,"span"),g(32,"S\u1ED1 L\u01B0\u1EE3ng"),p(),d(33,"mat-form-field",24)(34,"input",25),Ge("ngModelChange",function(a){return x(n),je(r.pageSize,a)||(r.pageSize=a),L(a)}),p()(),d(35,"button",26),q("click",function(){x(n);let a=J(26);return L(r.onPageSizeChange(r.pageSize,a))}),g(36,"\xC1p D\u1EE5ng"),p()()(),d(37,"div",27)(38,"button",28),q("click",function(){return x(n),L(r.onPreviousPage())}),d(39,"mat-icon"),g(40,"keyboard_arrow_left"),p()(),d(41,"button",28),q("click",function(){return x(n),L(r.onNextPage())}),d(42,"mat-icon"),g(43,"keyboard_arrow_right"),p()()()()()()()(),z(44,Vl,11,0,"ng-template",null,3,Je)(46,Hl,20,9,"ng-template",null,4,Je)(48,zl,11,0,"ng-template",null,5,Je)}if(t&2){let n=J(29);w(),k("position","end"),w(4),k("ngIf",!r.isSearch),w(),k("ngIf",r.isSearch),w(2),k("dataSource",r.dataSource),w(),bt(r.displayedColumns),w(2),k("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),w(),k("matRowDefColumns",r.displayedColumns),w(7),ge((r.currentPage-1)*r.pageSize+1),w(3),ge(r.currentPage*r.pageSize>r.totalItems?r.totalItems:r.currentPage*r.pageSize),w(),Ii(" trong s\u1ED1 ",r.totalItems," m\u1EE5c, ",r.currentPage,"/",r.totalPages," Trang"),w(2),k("matMenuTriggerFor",n),w(2),Y("Hi\u1EC7n Th\u1ECB : ",r.pageSize," m\u1EE5c"),w(7),Ye("ngModel",r.pageSize),k("ngModelOptions",$e(18,gi)),w(4),k("disabled",r.currentPage===1),w(3),k("disabled",r.currentPage===r.totalPages)}},dependencies:[cr,lr,ar,sr,hr,ur,Br,Er,Sr,Ir,Tr,br,qr,xr,Lr,vr,kr,Ar,Cr,et,wr,yr,Ko,Ji,Ki,$i,Wi,Yi,Hi,zi,Mi,Gi,ji,Oi,Ni,Fi,dr,Ai,vi,ki,tr,Zi,Xi,er,gr,mr,or,rr,nr,Dr,Fr],encapsulation:2,changeDetection:0})};wt([Yl()],Le.prototype,"FilterHederColumn",1),wt([jl(300)],Le.prototype,"doFilterHederColumn",1);var Wo=Le;function Yl(){return function(i,e,t){let r=t.value,n=new Map;return t.value=function(...o){let a=JSON.stringify(o);if(n.has(a))return n.get(a);let s=r.apply(this,o);return n.set(a,s),s},t}}function jl(i=300){return function(e,t,r){let n=r.value,o;return r.value=function(...a){clearTimeout(o),o=setTimeout(()=>{n.apply(this,a)},i)},r}}export{tt as a,Wo as b};
