import './polyfills.server.mjs';
import{a as Ft,b as Tt}from"./chunk-2Y46YB4L.mjs";import{a as yt}from"./chunk-N2W37QQT.mjs";import{a as Mt}from"./chunk-OJE3I62Y.mjs";import"./chunk-PDYHWB5Z.mjs";import{b as Et}from"./chunk-UNZ2764M.mjs";import{a as vt,b as St}from"./chunk-T52EWUNQ.mjs";import"./chunk-DLPB5WQD.mjs";import"./chunk-OTS6ZCGN.mjs";import"./chunk-FH7OS6DF.mjs";import{d as mt,g as gt,h as dt,i as pt,j as ut,l as _t,m as ht,o as Ct,p as ft,r as xt,s as Bt,u as bt,v as wt,w as Dt}from"./chunk-AA2DI344.mjs";import"./chunk-N7HVX2RE.mjs";import"./chunk-EAWATF7W.mjs";import{h as it}from"./chunk-7WVLK7NL.mjs";import{b as st}from"./chunk-U4C5JQFR.mjs";import"./chunk-ZUAIVIEL.mjs";import"./chunk-KYGAVK76.mjs";import{e as ct}from"./chunk-JZQCFZAG.mjs";import"./chunk-CATKLGCT.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-UFJIYV3D.mjs";import{b as q}from"./chunk-M6HKJU2S.mjs";import"./chunk-7TFSUZVW.mjs";import"./chunk-OXVTSTST.mjs";import{a as j,d as z}from"./chunk-SHC3MXGU.mjs";import"./chunk-TWGDF6AH.mjs";import"./chunk-7EE7XTXV.mjs";import"./chunk-UF55REJY.mjs";import{a as nt,f as at,g as ot,i as lt,j as rt}from"./chunk-DU7T7LQG.mjs";import{b as Y,f as Z,i as tt,m as et}from"./chunk-MOFNWV3Q.mjs";import{a as J,b as Q}from"./chunk-N4NXCYSC.mjs";import"./chunk-Q7G3UJA2.mjs";import"./chunk-YTRXHA5W.mjs";import{c as G,e as U,f as X}from"./chunk-2WH4WIRM.mjs";import"./chunk-7EXRZSZG.mjs";import"./chunk-V4V65LHO.mjs";import"./chunk-SVM2HAAI.mjs";import{s as N,t as W}from"./chunk-INK5SBFN.mjs";import{Ac as V,Ec as L,Ic as v,Kc as S,Pb as x,Qb as B,Sb as R,Sc as H,Tb as K,Ub as O,Vb as p,Wb as r,Xb as c,Yb as T,Zb as $,_b as P,ac as h,ec as u,fc as l,gb as s,ka as _,pa as g,qa as d,sb as A,tc as m,uc as b,vc as w,yb as F,yc as k,za as M,zc as I}from"./chunk-LD2AVDEF.mjs";import"./chunk-W2PR56MU.mjs";import{a as y,j as C}from"./chunk-RIAI3ORJ.mjs";var kt=()=>[];function Vt(n,e){if(n&1){let t=h();r(0,"button",1),u("click",function(){g(t);let a=l();return d(a.handleBanggiaAction())}),r(1,"mat-icon"),m(2,"save"),c()()}}function Lt(n,e){if(n&1){let t=h();r(0,"button",1),u("click",function(){g(t);let a=l();return d(a.toggleEdit())}),r(1,"mat-icon"),m(2,"edit"),c()()}}function At(n,e){if(n&1){let t=h();r(0,"div",7)(1,"div",9),m(2,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),c(),r(3,"div",10)(4,"button",11),u("click",function(){g(t);let a=l();return d(a.DeleteData())}),m(5,"\u0110\u1ED3ng \xDD"),c(),r(6,"button",12),u("click",function(){g(t);let a=l();return d(a.toggleDelete())}),m(7,"Hu\u1EF7 B\u1ECF"),c()()()}}function Rt(n,e){if(n&1&&(r(0,"th",24)(1,"span",25),m(2),c()()),n&2){let t=l().$implicit,i=l(2);s(2),w(" ",i.ColumnName[t]," ")}}function Kt(n,e){if(n&1){let t=h();r(0,"span",27)(1,"span"),m(2),c(),r(3,"button",33),u("click",function(){g(t);let a=l().$implicit,o=l(3);return d(o.RemoveSanpham(a))}),r(4,"mat-icon"),m(5,"delete"),c()()()}if(n&2){let t=l().index;s(2),w("",t+1," ")}}function Ot(n,e){if(n&1&&(r(0,"div",28),m(1),c()),n&2){let t=l().$implicit,i=l().$implicit;s(),b(t[i].title)}}function $t(n,e){if(n&1){let t=h();r(0,"div",34),u("blur",function(a){g(t);let o=l(),f=o.$implicit,D=o.index,E=l(3);return d(E.updateBlurValue(a,D,f,"sldat","number"))}),m(1),v(2,"number"),c()}if(n&2){let t=l().$implicit,i=l().$implicit;p("contentEditable",!0),s(),w(" ",S(2,2,t[i]||0,"1.0-2")," ")}}function Pt(n,e){if(n&1&&(r(0,"div",30),m(1),v(2,"number"),c()),n&2){let t=l().$implicit,i=l().$implicit;s(),b(S(2,1,t[i]||0,"1.0-2"))}}function Ht(n,e){if(n&1&&(r(0,"div",30),m(1),v(2,"number"),c()),n&2){let t=l().$implicit,i=l().$implicit;s(),b(S(2,1,t[i]||0,"1.0-2"))}}function Nt(n,e){if(n&1){let t=h();r(0,"div",35),u("blur",function(a){g(t);let o=l(),f=o.$implicit,D=o.index,E=l(3);return d(E.updateBlurValue(a,D,f,"ghichu","string"))}),m(1),c()}if(n&2){let t=l().$implicit,i=l().$implicit;p("contentEditable",!0),s(),w(" ",t[i]||""," ")}}function Wt(n,e){if(n&1&&(r(0,"span",32),m(1),c()),n&2){let t=l().$implicit,i=l().$implicit;s(),w(" ",t[i]," ")}}function jt(n,e){if(n&1&&(r(0,"td",26),x(1,Kt,6,1,"span",27)(2,Ot,2,1,"div",28)(3,$t,3,5,"div",29)(4,Pt,3,4,"div",30)(5,Ht,3,4,"div",30)(6,Nt,2,2,"div",31)(7,Wt,2,1,"span",32),c()),n&2){let t,i=l().$implicit;s(),B((t=i)==="stt"?1:t==="sanpham"?2:t==="sldat"?3:t==="slgiao"?4:t==="slnhan"?5:t==="ghichu"?6:7)}}function zt(n,e){if(n&1&&($(0,18),F(1,Rt,3,1,"th",22)(2,jt,8,1,"td",23),P()),n&2){let t=e.$implicit;p("matColumnDef",t)}}function Gt(n,e){n&1&&T(0,"tr",36)}function Ut(n,e){n&1&&T(0,"tr",37)}function Xt(n,e){n&1&&(r(0,"tr",38)(1,"td",39),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),c()())}function qt(n,e){if(n&1){let t=h();r(0,"div",8)(1,"div",3)(2,"mat-form-field",13)(3,"mat-label"),m(4,"Ti\xEAu \u0110\u1EC1"),c(),r(5,"input",14),V("ngModelChange",function(a){g(t);let o=l();return I(o.DetailBanggia().title,a)||(o.DetailBanggia().title=a),d(a)}),c()(),r(6,"app-searchfilter",15),u("OutFilter",function(a){g(t);let o=l();return d(o.onOutFilterSanpham(a))}),c(),r(7,"app-searchfilter",15),u("OutFilter",function(a){g(t);let o=l();return d(o.onOutFilterKhachhang(a))}),c()(),r(8,"div",16)(9,"table",17),K(10,zt,3,1,"ng-container",18,R),F(12,Gt,1,0,"tr",19)(13,Ut,1,0,"tr",20)(14,Xt,3,0,"tr",21),c()()()}if(n&2){let t,i,a,o=l();s(5),k("ngModel",o.DetailBanggia().title),p("disabled",!o.isEdit()),s(),p("ListItem",o.ListSanpham())("CountItems",(t=o.DetailBanggia())==null||t.sanpham==null?null:t.sanpham.length)("fieldsearch","title")("title","S\u1EA3n Ph\u1EA9m")("ListFilter",L(19,kt))("filterItem",o.ListSanpham())("isEdit",o.isEdit),s(),p("ListItem",o.ListKhachhang())("CountItems",(i=o.DetailBanggia())==null||i.khachhang==null?null:i.khachhang.length)("fieldsearch","title")("title","Kh\xE1ch H\xE0ng")("ListFilter",L(20,kt))("filterItem",o.ListKhachhang())("isEdit",o.isEdit),s(2),p("dataSource",(a=o.DetailBanggia())==null?null:a.sanpham),s(),O(o.displayedColumns),s(2),p("matHeaderRowDef",o.displayedColumns),s(),p("matRowDefColumns",o.displayedColumns)}}var It=class n{_ListBanggiaComponent=_(Tt);_BanggiaService=_(Ft);_KhachhangService=_(yt);_SanphamService=_(Mt);_route=_(j);_router=_(z);_snackBar=_(q);constructor(){this._route.paramMap.subscribe(e=>{let t=e.get("id");this._BanggiaService.setBanggiaId(t)}),H(()=>C(this,null,function*(){let e=this._BanggiaService.banggiaId();yield this._KhachhangService.getAllKhachhang(),yield this._SanphamService.getAllSanpham(),e||(this._router.navigate(["banggia"]),this._ListBanggiaComponent.drawer.close()),e==="new"?(this.DetailBanggia.set({}),this._ListBanggiaComponent.drawer.open(),this.isEdit.update(t=>!t),this._router.navigate(["banggia","new"])):(yield this._BanggiaService.getBanggiaBy({id:e,isOne:!0}),this._ListBanggiaComponent.drawer.open(),this._router.navigate(["banggia",e]))}))}DetailBanggia=this._BanggiaService.DetailBanggia;isEdit=M(!1);isDelete=M(!1);banggiaId=this._BanggiaService.banggiaId;ListKhachhang=this._KhachhangService.ListKhachhang;ListSanpham=this._SanphamService.ListSanpham;displayedColumns=[];ColumnName={stt:"#",sanpham:"S\u1EA3n ph\u1EA9m",giaban:"Gi\xE1 b\xE1n"};updateBlurValue(e,t,i,a,o){let f=e.target,D=o==="number"?Number(f.innerText.trim())||0:f.innerText.trim()}RemoveSanpham(e){}ngOnInit(){return C(this,null,function*(){yield this._KhachhangService.getAllKhachhang(),yield this._SanphamService.getAllSanpham(),this.displayedColumns=Object.keys(this.ColumnName)})}handleBanggiaAction(){return C(this,null,function*(){this.banggiaId()==="new"?yield this.createBanggia():yield this.updateBanggia()})}createBanggia(){return C(this,null,function*(){try{yield this._BanggiaService.CreateBanggia(this.DetailBanggia()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi t\u1EA1o banggia:",e)}})}updateBanggia(){return C(this,null,function*(){try{yield this._BanggiaService.updateBanggia(this.DetailBanggia()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt banggia:",e)}})}DeleteData(){return C(this,null,function*(){try{yield this._BanggiaService.DeleteBanggia(this.DetailBanggia()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["banggia"])}catch(e){console.error("L\u1ED7i khi x\xF3a banggia:",e)}})}goBack(){this._router.navigate(["banggia"]),this._ListBanggiaComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.DetailBanggia.update(e=>(e.slug=st(e.title),e))}onOutFilterSanpham(e){console.log("OutFilter event:",e),this.DetailBanggia.update(t=>{let i=y({},t);return console.log(e),i.sanphamIds=e.map(a=>a.id),i.sanpham=e.map(a=>({sanphamId:a.id,title:a.title,giaban:a.giaban})),console.log("Updated Banggia:",i),i})}onOutFilterKhachhang(e){console.log("OutFilter event:",e),this.DetailBanggia.update(t=>{let i=y({},t);return console.log(e),i.khachhangIds=e.map(a=>a.id),i.khachhang=e.map(a=>({khachhangId:a.id,title:a.title,email:a.email})),console.log("Updated Banggia:",i),i})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=A({type:n,selectors:[["app-detailbanggia"]],decls:14,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"grid","grid-cols-1","gap-4"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"OutFilter","ListItem","CountItems","fieldsearch","title","ListFilter","filterItem","isEdit"],[1,"w-full","overflow-auto"],["mat-table","",1,"!border","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","whitespace-nowrap","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,""],[1,"sldat-input","p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"text-end"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],["mat-icon-button","","color","warn",3,"click"],[1,"sldat-input","p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){if(t&1&&(r(0,"div",0)(1,"button",1),u("click",function(){return i.goBack()}),r(2,"mat-icon"),m(3,"arrow_back"),c()(),r(4,"div",2),m(5),c(),r(6,"div",3)(7,"mat-slide-toggle",4),V("ngModelChange",function(o){return I(i.DetailBanggia().isActive,o)||(i.DetailBanggia().isActive=o),o}),m(8),c(),x(9,Vt,3,0,"button",5),x(10,Lt,3,0,"button",5),c()(),r(11,"div",6),x(12,At,8,0,"div",7),x(13,qt,15,21,"div",8),c()),t&2){let a;s(5),b(((a=i.DetailBanggia())==null?null:a.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),s(2),k("ngModel",i.DetailBanggia().isActive),p("disabled",!i.isEdit()),s(),b(i.DetailBanggia().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),B(i.isEdit()?9:-1),s(),B(i.isEdit()?-1:10),s(2),B(i.isDelete()?12:-1),s(),B(i.isDelete()?-1:13)}},dependencies:[ot,at,nt,rt,lt,et,Y,Z,tt,Q,J,X,U,G,ct,it,W,N,St,vt,Et,Dt,dt,ut,ft,_t,pt,xt,ht,Ct,Bt,bt,wt,gt,mt],encapsulation:2})};export{It as DetailBanggiaComponent};
