import{a as xt}from"./chunk-OZTJPKDM.js";import{a as wt}from"./chunk-PQVUXYBF.js";import{a as ft,b as ht}from"./chunk-EGYIPWOD.js";import{a as yt}from"./chunk-NU3ZVME4.js";import{a as Ze,b as Je,c as et,d as tt,e as K,f as it,g as rt,h as at,i as nt,j as ot,l as st,m as lt,o as mt,p as ct,r as dt,s as pt,u as ut,v as gt,w as _t,x as G}from"./chunk-BASCSH5H.js";import{c as Ve,d as We,f as Xe,h as He}from"./chunk-E2JMTFJ4.js";import{a as Ee,b as ke,c as Ie}from"./chunk-DQEOXPOR.js";import{b as Ue}from"./chunk-W4JVII6R.js";import{a as Ye}from"./chunk-7BIMFKJV.js";import{b as De}from"./chunk-GG5PNR75.js";import{a as xe}from"./chunk-7RWCIHFI.js";import{a as ve}from"./chunk-OYQAUG4H.js";import{b as he,c as ye}from"./chunk-HK5INGUB.js";import{a as vt,b as Ct,c as bt,k as St}from"./chunk-UCBF2JAI.js";import{b as Fe,c as Be,d as Pe}from"./chunk-ZOVAYHD7.js";import{a as je,c as Qe,f as Ke,g as Ge,i as qe,j as $e}from"./chunk-ATATVIKK.js";import{b as Re,g as Ne,j as Ae,l as Oe,n as ze}from"./chunk-WUATMGZA.js";import{a as Te,b as Le}from"./chunk-HXG3U3LB.js";import{i as Me}from"./chunk-JUYBSJEK.js";import{a as be,d as Se,f as we}from"./chunk-MFUULPJP.js";import{R as Q,q as Ce}from"./chunk-SULPYVS7.js";import{l as ue,q as ge,s as _e,w as fe}from"./chunk-VJ2NH5IP.js";import{$b as n,$c as j,Bb as B,Bc as de,Cb as W,Cc as b,Dc as S,Ec as w,Hb as h,Hc as D,La as ie,Lc as R,Na as V,Nc as N,Oc as A,Qb as M,Rb as p,Sb as P,Ta as re,Tb as Y,Ub as Z,Vb as ne,Wb as X,Yb as oe,Zb as se,_b as le,ac as o,bc as _,cc as me,cd as pe,dc as ce,ec as H,fc as E,ga as z,ia as ee,jb as ae,jc as v,kb as U,kc as d,la as f,ob as s,qc as k,rc as I,sc as T,ua as u,va as g,wa as $,wc as x,xa as te,xc as m,yc as J,zc as y}from"./chunk-BDFDBNPH.js";import{h as q,j as C}from"./chunk-47CWAPKR.js";var Dt=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=W({type:a});static \u0275inj=z({imports:[Q]})}return a})();var Lt=["determinateSpinner"];function Ft(a,i){if(a&1&&($(),n(0,"svg",11),_(1,"circle",12),o()),a&2){let e=d();M("viewBox",e._viewBox()),s(),P("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),M("r",e._circleRadius())}}var Bt=new ee("mat-progress-spinner-default-options",{providedIn:"root",factory:Pt});function Pt(){return{diameter:Et}}var Et=100,Rt=10,kt=(()=>{class a{_elementRef=f(ie);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=f(re,{optional:!0}),t=f(Bt);this._noopAnimations=e==="NoopAnimations"&&!!t&&!t._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",t&&(t.color&&(this.color=this._defaultColor=t.color),t.diameter&&(this.diameter=t.diameter),t.strokeWidth&&(this.strokeWidth=t.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Et;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-Rt)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=B({type:a,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,r){if(t&1&&k(Lt,5),t&2){let l;I(l=T())&&(r._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,r){t&2&&(M("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Z("mat-"+r.color),P("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),Y("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",j],diameter:[2,"diameter","diameter",j],strokeWidth:[2,"strokeWidth","strokeWidth",j]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,r){if(t&1&&(h(0,Ft,2,8,"ng-template",null,0,A),n(2,"div",2,1),$(),n(4,"svg",3),_(5,"circle",4),o()(),te(),n(6,"div",5)(7,"div",6)(8,"div",7),H(9,8),o(),n(10,"div",9),H(11,8),o(),n(12,"div",10),H(13,8),o()()()),t&2){let l=x(1);s(4),M("viewBox",r._viewBox()),s(),P("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),M("r",r._circleRadius()),s(4),p("ngTemplateOutlet",l),s(2),p("ngTemplateOutlet",l),s(2),p("ngTemplateOutlet",l)}},dependencies:[ge],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return a})();var It=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=W({type:a});static \u0275inj=z({imports:[Q]})}return a})();var At=["drawer"],L=()=>({standalone:!0});function Ot(a,i){if(a&1){let e=E();n(0,"button",36),v("click",function(){u(e);let r=d(),l=x(75);return g(r.openDeleteDialog(l))}),n(1,"mat-icon"),m(2,"delete"),o()()}}function zt(a,i){if(a&1&&(n(0,"th",39)(1,"span",40),m(2),o()()),a&2){let e=d().$implicit,t=d();s(2),y(" ",t.ColumnName[e]," ")}}function Vt(a,i){if(a&1){let e=E();n(0,"span",43),v("click",function(){u(e);let r=d().$implicit,l=d(2);return g(l.goToDetail(r))}),m(1),o(),n(2,"a",44)(3,"mat-icon",45),m(4," open_in_new "),o()()}if(a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",e[t]," "),s(),p("href","https://drive.google.com/drive/"+(e.type=="folder"?"folders/":"file/d/")+e.googleId,U)}}function Wt(a,i){if(a&1&&(n(0,"span",42),m(1),o()),a&2){let e=d().index;s(),y(" ",e+1," ")}}function Xt(a,i){if(a&1&&(n(0,"span",42),m(1),R(2,"date"),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",N(2,1,e[t],"dd/MM/yyyy")," ")}}function Ht(a,i){if(a&1&&(_(0,"span",46),n(1,"a",44)(2,"mat-icon",45),m(3," open_in_new "),o()()),a&2){let e=d().$implicit,t=d().$implicit,r=d();p("innerHTML",r.getPath(e[t]),ae),s(),p("href","https://drive.google.com/drive/folders/"+e.parentId,U)}}function jt(a,i){if(a&1&&(n(0,"span",42),m(1),o()),a&2){let e=d().$implicit,t=d().$implicit,r=d();s(),y(" ",r.titleMB(e[t])," ")}}function Qt(a,i){a&1&&(n(0,"mat-icon",47),m(1,"check_circle"),o())}function Kt(a,i){a&1&&(n(0,"mat-icon",48),m(1,"cancel"),o())}function Gt(a,i){if(a&1&&(n(0,"span",42),h(1,Qt,2,0,"mat-icon",47)(2,Kt,2,0,"mat-icon",48),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),X(e[t]?1:2)}}function qt(a,i){if(a&1&&(n(0,"span",42),m(1),R(2,"date"),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",N(2,1,e[t],"dd/MM/yyyy")," ")}}function $t(a,i){if(a&1&&(n(0,"span",42),m(1),R(2,"date"),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",N(2,1,e[t],"dd/MM/yyyy")," ")}}function Ut(a,i){if(a&1&&(n(0,"span",42),m(1),R(2,"date"),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",N(2,1,e[t],"dd/MM/yyyy")," ")}}function Yt(a,i){if(a&1&&(n(0,"span",42),m(1),o()),a&2){let e=d().$implicit,t=d().$implicit;s(),y(" ",e[t]," ")}}function Zt(a,i){if(a&1&&(n(0,"td",41),h(1,Vt,5,2)(2,Wt,2,1,"span",42)(3,Xt,3,4,"span",42)(4,Ht,4,2)(5,jt,2,1,"span",42)(6,Gt,3,1,"span",42)(7,qt,3,4,"span",42)(8,$t,3,4,"span",42)(9,Ut,3,4,"span",42)(10,Yt,2,1,"span",42),o()),a&2){let e,t=d().$implicit;s(),X((e=t)==="name"?1:e==="STT"?2:e==="createdAt"?3:e==="path"?4:e==="size"?5:e==="isActive"?6:e==="createdTime"?7:e==="modifiedTime"?8:e==="updatedAt"?9:10)}}function Jt(a,i){if(a&1&&(me(0,21),h(1,zt,3,1,"th",37)(2,Zt,11,1,"td",38),ce()),a&2){let e=i.$implicit;p("matColumnDef",e)}}function ei(a,i){a&1&&_(0,"tr",49)}function ti(a,i){if(a&1){let e=E();n(0,"tr",50),v("click",function(){let r=u(e).$implicit,l=d();return g(l.AddToEdit(r))}),o()}if(a&2){let e=i.$implicit,t=d();ne("hover:bg-slate-100 ",t.CheckItemInEdit(e)?"!bg-slate-200":"","")}}function ii(a,i){a&1&&(n(0,"tr",51)(1,"td",52),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}function ri(a,i){a&1&&(n(0,"div",53),_(1,"mat-spinner"),n(2,"div",54),m(3,"\u0110ang T\u1EA3i D\u1EEF Li\u1EC7u..."),o()())}function ai(a,i){a&1&&(n(0,"mat-dialog-content")(1,"div",55)(2,"div",54),m(3,"X\xE1c Nh\u1EADn"),o(),n(4,"div"),m(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),n(6,"div",56)(7,"button",57),m(8,"\u0110\u1ED3ng \xDD"),o(),n(9,"button",58),m(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function ni(a,i){if(a&1){let e=E();n(0,"mat-dialog-content",59)(1,"div",60)(2,"mat-form-field",61)(3,"mat-label"),m(4,"IdSheet"),o(),n(5,"input",62),w("ngModelChange",function(r){u(e);let l=d();return S(l.IdSheet,r)||(l.IdSheet=r),g(r)}),o()(),n(6,"mat-form-field",61)(7,"mat-label"),m(8,"SheetName"),o(),n(9,"input",63),w("ngModelChange",function(r){u(e);let l=d();return S(l.SheetName,r)||(l.SheetName=r),g(r)}),o()(),n(10,"button",64),v("click",function(){u(e);let r=d();return g(r.LoadDrive())}),n(11,"mat-icon"),m(12,"refresh"),o()()(),n(13,"div",65),_(14,"app-ktable",66),o(),n(15,"div",67)(16,"button",57),m(17,"\u0110\u1ED3ng \xDD"),o(),n(18,"button",58),m(19,"Hu\u1EF7 B\u1ECF"),o()()()}if(a&2){let e=d();s(5),b("ngModel",e.IdSheet),p("ngModelOptions",D(7,L)),s(4),b("ngModel",e.SheetName),p("ngModelOptions",D(8,L)),s(5),p("ListItem",e.ImportIteam)("ColumnName",e.ImportColumnName)("displayedColumns",e.ImportdisplayedColumns)}}var F=class F{displayedColumns=[];ColumnName={name:"T\xEAn",path:"\u0110\u01B0\u1EDDng D\u1EABn",size:"Dung L\u01B0\u1EE3ng",type:"Lo\u1EA1i",modifiedTime:"Ng\xE0y T\u1EA1o Drive",createdTime:"Ng\xE0y C\u1EADp Nh\u1EADt Drive"};FilterColumns=JSON.parse(localStorage.getItem("DrivelocalColFilter")||"[]");Columns=[];totalItems=0;totalPages=1;params={name:"",type:"",mimeType:"",parentId:"",size:{min:0,max:100},modifiedTime:{from:new Date,to:new Date},page:1,pageSize:100};paginator;sort;drawer;_DrivelocalService=f(xt);_breakpointObserver=f(Ce);_GoogleSheetService=f(yt);_router=f(ye);_dialog=f(Ve);EditList=[];dataSource=new G([]);drivelocalId=this._DrivelocalService.quanlydriveId;_snackBar=f(De);CountItem=0;isSearch=!1;constructor(){pe(()=>C(this,null,function*(){this.SearchItems=yield this._DrivelocalService.SearchQuanlydriveBy(this.params),this.totalItems=this.SearchItems.data.length,this.progress=this._DrivelocalService.progress,this.totalRecords=this._DrivelocalService.totalRecords}))}progress=V(0);totalRecords=V(0);status="Idle";ListItem=[];SearchItems={data:[],pagination:{total:0,page:0}};currentPage=1;pageSize=10;syncRecords(){return C(this,null,function*(){yield this._DrivelocalService.syncRecords()})}applyFilter(i){let e=i.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnInit(){return C(this,null,function*(){this._DrivelocalService.listenQuanlydriveUpdates(),this.SearchItems=yield this._DrivelocalService.SearchQuanlydriveBy(this.params),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new G(this.SearchItems.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer()})}isLoading=V(!1);DoTimKiem(i){return C(this,null,function*(){this.SearchItems.pagination.page=0,this.isLoading.set(!0),i&&(this.params.pageSize=100,this.params.page=1),this.SearchItems=yield this._DrivelocalService.SearchQuanlydriveBy(this.params),this.dataSource=new G(this.SearchItems.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.SearchItems.pagination.page>0&&this.isLoading.set(!1)})}titleMB(i){return Number(i)>1073741824?(Number(i)/1073741824).toFixed(2)+" GB":`${(Number(i)/1048576).toFixed(2)} MB`}getPath(i){return i.replace(/\/\*\//g,'<span class="text-red-600 font-bold"> / </span>')}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(i=>({key:i,value:this.ColumnName[i],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("DrivelocalColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,e)=>(e.isShow&&(i[e.key]=e.value),i),{})}setupDrawer(){this._breakpointObserver.observe([xe.Handset]).subscribe(i=>{i.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(i){let e=this.FilterColumns.find(t=>t.key===i.key);e&&(e.isShow=!e.isShow,this.updateDisplayedColumns())}FilterHederColumn(i,e){return i.filter((r,l,c)=>l===c.findIndex(O=>O[e]===r[e]))}doFilterHederColumn(i,e){this.dataSource.filteredData=this.SearchItems.data.filter(r=>r[e].toLowerCase().includes(i.target.value.toLowerCase()));let t=i.target.value.toLowerCase()}ListFilter=[];ChosenItem(i,e){let t=this.dataSource.filteredData.filter(l=>l[e]===i[e]);this.ListFilter.filter(l=>l[e]===i[e]).length>0?this.ListFilter=this.ListFilter.filter(l=>l[e]!==i[e]):this.ListFilter=[...this.ListFilter,...t]}ChosenAll(i){i.forEach(e=>{!!this.ListFilter.find(r=>r.id===e.id)?this.ListFilter=this.ListFilter.filter(r=>r.id!==r.id):this.ListFilter.push(e)})}ResetFilter(){this.ListFilter=this.SearchItems.data}EmptyFiter(){this.ListFilter=[]}CheckItem(i){return!!this.ListFilter.find(e=>e.id===i.id)}ApplyFilterColum(i){this.dataSource.data=this.SearchItems.data.filter(e=>this.ListFilter.some(t=>t.id===e.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,i.closeMenu()}onOutFilter(i){this.dataSource.data=i,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,e)=>(e.isShow&&(i[e.key]=e.value),i),{}),localStorage.setItem("DrivelocalColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let e=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(t=>t.value.toLowerCase().includes(e))}create(){this.drawer.open(),this._router.navigate(["admin/drivelocal","new"])}openDeleteDialog(i){this._dialog.open(i,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(t=>{t=="true"&&this.DeleteListItem()})}DeleteListItem(){let i=this.EditList.length;if(i===0){this._snackBar.open("Kh\xF4ng c\xF3 m\u1EE5c n\xE0o \u0111\u01B0\u1EE3c ch\u1ECDn \u0111\u1EC3 x\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let e=0,t=this.EditList.map(r=>C(this,null,function*(){return r.isDelete=!0,delete r.permissions,yield this._DrivelocalService.updateQuanlydrive(r),e++,!0}));Promise.all(t).then(()=>{this._snackBar.open(`\u0110\xE3 x\xF3a th\xE0nh c\xF4ng ${i} m\u1EE5c`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.EditList=[],this.DoTimKiem(!0)}).catch(r=>{console.error("Error during deletion:",r),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a d\u1EEF li\u1EC7u","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}AddToEdit(i){this.EditList.find(t=>t.id===i.id)?this.EditList=this.EditList.filter(t=>t.id!==i.id):this.EditList.push(i)}CheckItemInEdit(i){return this.EditList.some(e=>e.id===i.id)}goToDetail(i){this.drawer.open(),this._DrivelocalService.setQuanlydriveId(i.id),this._router.navigate(["admin/drivelocal",i.id])}OpenLoadDrive(i){this._dialog.open(i,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(t=>{t=="true"})}IdSheet="15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk";SheetName="SPImport";ImportIteam=[];ImportColumnName={};ImportdisplayedColumns=[];LoadDrive(){return C(this,null,function*(){let i={IdSheet:this.IdSheet,SheetName:this.SheetName,ApiKey:ve.GSApiKey},e=yield this._GoogleSheetService.getDrive(i);this.ImportIteam=Ye(e.values),this.ImportColumnName=Object.fromEntries(e.values[0].map((t,r)=>[t,e.values[1][r]])),this.ImportdisplayedColumns=e.values[0]})}DoImportData(i){return C(this,null,function*(){})}ImporExcel(i){return C(this,null,function*(){let e=yield ht(i);this.DoImportData(e)})}ExportExcel(i,e){let t=i.map(r=>({title:r.title,masp:r.masp,giagoc:r.giagoc,dvt:r.dvt,soluong:r.soluong,soluongkho:r.soluongkho,haohut:r.haohut,ghichu:r.ghichu}));ft(t,e)}trackByFn(i,e){return e.id}onPageSizeChange(i){this.params.pageSize>this.SearchItems.pagination.total&&(this.params.pageSize=this.SearchItems.pagination.total,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.SearchItems.pagination.total}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})),this.params.page=1,this.DoTimKiem(),i.closeMenu()}onPreviousPage(){this.params.page>1&&(this.params.page=this.params.page-1,this.DoTimKiem())}onNextPage(){this.params.page<this.SearchItems.pagination.totalPages&&(this.params.page=this.params.page+1,this.DoTimKiem())}updateDisplayData(){let i=(this.currentPage-1)*this.pageSize,e=i+this.pageSize,t=this.SearchItems.data.slice(i,e);this.dataSource.data=t}static \u0275fac=function(e){return new(e||F)};static \u0275cmp=B({type:F,selectors:[["app-listdrivelocal"]],viewQuery:function(e,t){if(e&1&&(k(et,5),k(K,5),k(At,7)),e&2){let r;I(r=T())&&(t.paginator=r.first),I(r=T())&&(t.sort=r.first),I(r=T())&&(t.drawer=r.first)}},decls:78,vars:34,consts:[["drawer",""],["pickerFrom",""],["pickerTo",""],["menuHienthi","matMenuTrigger"],["menu","matMenu"],["DeleteDialog",""],["LoadDriveDialog",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-4"],[1,"flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic"],["matInput","",3,"ngModelChange","ngModel","matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","type","number","placeholder","K\xEDch th\u01B0\u1EDBc t\u1ED1i thi\u1EC3u",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","type","number","placeholder","K\xEDch th\u01B0\u1EDBc t\u1ED1i \u0111a",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click",4,"ngIf"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","flex flex-col space-y-8 items-center justify-center p-4",4,"ngIf"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4","items-center",3,"click"],["appearance","outline","subscriptSizing","dynamic",1,"w-32"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],["target","_blank",3,"href"],[1,"material-symbols-outlined"],[1,"line-clamp-4",3,"innerHTML"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center","p-4"],[1,"font-bold"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],[1,"!w-screen","!h-screen","!max-h-screen","!relative","!flex","flex-col","space-y-8","items-center","justify-center"],[1,"relative","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp IdSheet",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp SheetName",3,"ngModelChange","ngModel","ngModelOptions"],["matTooltip","Load D\u1EEF Li\u1EC7u","color","primary","mat-icon-button","",3,"click"],[1,"relative","h-full","w-full","overflow-auto"],[3,"ListItem","ColumnName","displayedColumns"],[1,"relative","flex","flex-row","space-x-2","items-center","justify-center"]],template:function(e,t){if(e&1){let r=E();n(0,"mat-drawer-container",7)(1,"mat-drawer",8,0),_(3,"router-outlet"),o(),n(4,"div",9)(5,"div",10)(6,"mat-form-field",11)(7,"mat-label"),m(8,"Ng\xE0y T\u1EA1o T\u1EEB"),o(),n(9,"input",12),w("ngModelChange",function(c){return u(r),S(t.params.modifiedTime.from,c)||(t.params.modifiedTime.from=c),g(c)}),o(),_(10,"mat-datepicker-toggle",13)(11,"mat-datepicker",null,1),o(),n(13,"mat-form-field",11)(14,"mat-label"),m(15,"Ng\xE0y T\u1EA1o \u0110\u1EBFn"),o(),n(16,"input",12),w("ngModelChange",function(c){return u(r),S(t.params.modifiedTime.to,c)||(t.params.modifiedTime.to=c),g(c)}),o(),_(17,"mat-datepicker-toggle",13)(18,"mat-datepicker",null,2),o(),n(20,"mat-form-field",11)(21,"mat-label"),m(22,"Min Size (MB)"),o(),n(23,"input",14),w("ngModelChange",function(c){return u(r),S(t.params.size.min,c)||(t.params.size.min=c),g(c)}),o()(),n(24,"mat-form-field",11)(25,"mat-label"),m(26,"Max Size (MB)"),o(),n(27,"input",15),w("ngModelChange",function(c){return u(r),S(t.params.size.max,c)||(t.params.size.max=c),g(c)}),o()()(),n(28,"div",10)(29,"mat-form-field",11)(30,"mat-label"),m(31,"Ti\xEAu \u0110\u1EC1"),o(),n(32,"input",16),w("ngModelChange",function(c){return u(r),S(t.params.name,c)||(t.params.name=c),g(c)}),o()(),n(33,"button",17),v("click",function(){return u(r),g(t.DoTimKiem(!0))}),m(34,"T\xECm Ki\u1EBFm"),o(),h(35,Ot,3,0,"button",18),o(),n(36,"div",19)(37,"table",20),se(38,Jt,3,1,"ng-container",21,oe),h(40,ei,1,0,"tr",22)(41,ti,1,3,"tr",23)(42,ii,3,0,"tr",24),o(),h(43,ri,4,0,"div",25),o(),n(44,"div",26)(45,"div",27)(46,"span",28),m(47,"\u0110ang Xem "),n(48,"strong"),m(49),o(),m(50," - "),n(51,"strong"),m(52),o(),m(53),o(),n(54,"div",29)(55,"span",30,3),m(57),o(),n(58,"mat-menu",null,4)(60,"div",31),v("click",function(c){return u(r),g(c.stopPropagation())}),n(61,"mat-form-field",32)(62,"mat-label"),m(63,"S\u1ED1 L\u01B0\u1EE3ng"),o(),n(64,"input",33),w("ngModelChange",function(c){return u(r),S(t.params.pageSize,c)||(t.params.pageSize=c),g(c)}),o()(),n(65,"button",17),v("click",function(){u(r);let c=x(56);return g(t.onPageSizeChange(c))}),m(66," \xC1p D\u1EE5ng "),o()()(),n(67,"div",34)(68,"button",35),v("click",function(){return u(r),g(t.onPreviousPage())}),n(69,"mat-icon"),m(70,"keyboard_arrow_left"),o()(),n(71,"button",35),v("click",function(){return u(r),g(t.onNextPage())}),n(72,"mat-icon"),m(73,"keyboard_arrow_right"),o()()()()()()()(),h(74,ai,11,0,"ng-template",null,5,A)(76,ni,20,9,"ng-template",null,6,A)}if(e&2){let r=x(12),l=x(19),c=x(59);s(),p("position","end"),s(8),b("ngModel",t.params.modifiedTime.from),p("matDatepicker",r),s(),p("for",r),s(6),b("ngModel",t.params.modifiedTime.to),p("matDatepicker",l),s(),p("for",l),s(6),b("ngModel",t.params.size.min),p("ngModelOptions",D(30,L)),s(4),b("ngModel",t.params.size.max),p("ngModelOptions",D(31,L)),s(5),b("ngModel",t.params.name),p("ngModelOptions",D(32,L)),s(3),p("ngIf",t.EditList.length>0),s(2),p("dataSource",t.dataSource),s(),le(t.displayedColumns),s(2),p("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),s(),p("matRowDefColumns",t.displayedColumns),s(2),p("ngIf",t.isLoading()),s(6),J((t.SearchItems.pagination.page-1)*t.params.pageSize+1),s(3),J(t.SearchItems.pagination.page*t.params.pageSize>t.SearchItems.pagination.total?t.SearchItems.pagination.total:t.SearchItems.pagination.page*t.params.pageSize),s(),de(" trong s\u1ED1 ",t.SearchItems.pagination.total," m\u1EE5c, ",t.SearchItems.pagination.page,"/",t.SearchItems.pagination.totalPages," Trang"),s(2),p("matMenuTriggerFor",c),s(2),y("Hi\u1EC7n Th\u1ECB : ",t.params.pageSize," m\u1EE5c"),s(7),b("ngModel",t.params.pageSize),p("ngModelOptions",D(33,L)),s(4),p("disabled",t.SearchItems.pagination.page===1),s(3),p("disabled",t.SearchItems.pagination.page===t.SearchItems.pagination.totalPages)}},dependencies:[Ge,Ke,je,Qe,$e,qe,_t,at,ot,ct,st,nt,dt,lt,mt,pt,ut,gt,rt,K,it,tt,Pe,Fe,Be,Ie,Ee,ke,he,Le,Te,we,Se,be,Ue,fe,ue,_e,ze,Re,Oe,Ne,Ae,Je,Ze,He,We,Xe,wt,Dt,Me,It,kt,St,vt,Ct,bt],encapsulation:2,changeDetection:0})};q([oi()],F.prototype,"FilterHederColumn",1),q([si(300)],F.prototype,"doFilterHederColumn",1);var Tt=F;function oi(){return function(a,i,e){let t=e.value,r=new Map;return e.value=function(...l){let c=JSON.stringify(l);if(r.has(c))return r.get(c);let O=t.apply(this,l);return r.set(c,O),O},e}}function si(a=300){return function(i,e,t){let r=t.value,l;return t.value=function(...c){clearTimeout(l),l=setTimeout(()=>{r.apply(this,c)},a)},t}}export{Tt as a};
