import{a as U}from"./chunk-DX3FD2DT.js";import{a as H}from"./chunk-7OY4UBQ7.js";import"./chunk-NULFSBS2.js";import"./chunk-WGRZ7OU3.js";import{b as Q}from"./chunk-INAH5Y6A.js";import"./chunk-EIYXLBRB.js";import"./chunk-F5X5MWHG.js";import"./chunk-6YWI4PR3.js";import"./chunk-AH445ACS.js";import"./chunk-25O4DVGE.js";import"./chunk-MZ2MZ5BK.js";import{h as N}from"./chunk-BMYJTCCL.js";import"./chunk-V2HNV6GD.js";import"./chunk-MS4AQ6UA.js";import{d as G,e as X}from"./chunk-O5ADOJKP.js";import{b as q}from"./chunk-7BIMFKJV.js";import{d as K}from"./chunk-O6JYMFHC.js";import"./chunk-KDLSUHPH.js";import"./chunk-E3L4RDDQ.js";import{b as F}from"./chunk-BZD55ANN.js";import"./chunk-OYQAUG4H.js";import"./chunk-5LVD2PK4.js";import{a as k,c as T}from"./chunk-YY2IMMDR.js";import"./chunk-6H4HLFRK.js";import"./chunk-BVBYNWHQ.js";import"./chunk-RT2KEOZH.js";import{a as O,f as j,g as R,i as z,j as J}from"./chunk-LE5WZP6V.js";import{b as x,f as A,i as V,m as P}from"./chunk-6ZJGR7X4.js";import{a as L,b as W}from"./chunk-F3NJGPQK.js";import"./chunk-EEDTNJ2B.js";import"./chunk-JSBH4EGU.js";import{c as I,f as B}from"./chunk-MDDDUITI.js";import"./chunk-R5QIVXGH.js";import"./chunk-TPO34YLD.js";import"./chunk-UBLFOWKT.js";import"./chunk-Y5KLSAKG.js";import{Lb as C,Mb as M,Nc as v,Rb as p,Sb as i,Tb as o,Yb as D,ac as _,bc as E,eb as s,ka as m,pa as h,pc as l,qa as f,qb as w,qc as b,uc as u,vc as c,wc as S,za as y}from"./chunk-TWMQPIMW.js";import"./chunk-EU2KAMEK.js";import{j as d}from"./chunk-47CWAPKR.js";function Z(g,t){if(g&1){let n=D();i(0,"button",1),_("click",function(){h(n);let r=E();return f(r.handleSettingAction())}),i(1,"mat-icon"),l(2,"save"),o()()}}function $(g,t){if(g&1){let n=D();i(0,"button",1),_("click",function(){h(n);let r=E();return f(r.toggleEdit())}),i(1,"mat-icon"),l(2,"edit"),o()()}}var Y=class g{_ListSettingComponent=m(U);_SettingService=m(H);_route=m(k);_router=m(T);_snackBar=m(F);DetailSetting=this._SettingService.DetailSetting;isEdit=y(!1);isDelete=y(!1);settingId=this._SettingService.settingId;constructor(){this._route.paramMap.subscribe(t=>{let n=t.get("id");this._SettingService.setSettingId(n)}),v(()=>d(this,null,function*(){let t=this._SettingService.settingId();t||(this._router.navigate(["/admin/setting"]),this._ListSettingComponent.drawer.close()),t==="new"?(this.DetailSetting.set({}),this._ListSettingComponent.drawer.open(),this.isEdit.update(n=>!n),this._router.navigate(["/admin/setting","new"])):(yield this._SettingService.getSettingBy({id:t,isOne:!0}),console.log("DetailSetting:",this.DetailSetting()),this.DetailSetting.update(n=>(n.type==="json"&&(n.value=JSON.stringify(n.value)),n)),this._ListSettingComponent.drawer.open(),this._router.navigate(["/admin/setting",t]))}))}ngOnInit(){return d(this,null,function*(){yield this._SettingService.getSettingBy({id:this.settingId(),isOne:!0}),this.DetailSetting.update(t=>(t.type==="json"&&(t.value=JSON.stringify(t.value)),t))})}handleSettingAction(){return d(this,null,function*(){this.settingId()==="new"?yield this.createSetting():yield this.updateSetting(),window.location.reload()})}createSetting(){return d(this,null,function*(){try{yield this._SettingService.CreateSetting(this.DetailSetting()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o setting:",t)}})}updateSetting(){return d(this,null,function*(){try{yield this._SettingService.updateSetting(this.DetailSetting()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt setting:",t)}})}DeleteData(){return d(this,null,function*(){try{yield this._SettingService.DeleteSetting(this.DetailSetting()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/setting"])}catch(t){console.error("L\u1ED7i khi x\xF3a setting:",t)}})}goBack(){this._router.navigate(["/admin/setting"]),this._ListSettingComponent.drawer.close()}trackByFn(t,n){return n.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailSetting.update(t=>(t.slug=q(t.title),t))}static \u0275fac=function(n){return new(n||g)};static \u0275cmp=w({type:g,selectors:[["app-detailsetting"]],decls:39,vars:13,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"grid","grid-cols-1","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Key",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Value",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],["value","string"],["value","boolean"],["value","number"],["value","json"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xF4 T\u1EA3",3,"ngModelChange","ngModel","disabled"]],template:function(n,e){if(n&1&&(i(0,"div",0)(1,"button",1),_("click",function(){return e.goBack()}),i(2,"mat-icon"),l(3,"arrow_back"),o()(),i(4,"div",2),l(5),o(),i(6,"div",3),C(7,Z,3,0,"button",4),C(8,$,3,0,"button",4),o()(),i(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),l(13,"Ti\xEAu \u0110\u1EC1"),o(),i(14,"input",8),S("ngModelChange",function(a){return c(e.DetailSetting().title,a)||(e.DetailSetting().title=a),a}),o()(),i(15,"mat-form-field",7)(16,"mat-label"),l(17,"Key"),o(),i(18,"input",9),S("ngModelChange",function(a){return c(e.DetailSetting().key,a)||(e.DetailSetting().key=a),a}),o()(),i(19,"mat-form-field",7)(20,"mat-label"),l(21,"Value"),o(),i(22,"textarea",10),S("ngModelChange",function(a){return c(e.DetailSetting().value,a)||(e.DetailSetting().value=a),a}),o()(),i(23,"mat-form-field",7)(24,"mat-label"),l(25,"Type"),o(),i(26,"mat-select",11),S("ngModelChange",function(a){return c(e.DetailSetting().type,a)||(e.DetailSetting().type=a),a}),i(27,"mat-option",12),l(28,"String"),o(),i(29,"mat-option",13),l(30,"Boolean"),o(),i(31,"mat-option",14),l(32,"Number"),o(),i(33,"mat-option",15),l(34,"JSON"),o()()(),i(35,"mat-form-field",7)(36,"mat-label"),l(37,"M\xF4 T\u1EA3"),o(),i(38,"textarea",16),S("ngModelChange",function(a){return c(e.DetailSetting().description,a)||(e.DetailSetting().description=a),a}),o()()()()),n&2){let r;s(5),b(((r=e.DetailSetting())==null?null:r.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),s(2),M(e.isEdit()?7:-1),s(),M(e.isEdit()?-1:8),s(6),u("ngModel",e.DetailSetting().title),p("disabled",!e.isEdit()),s(4),u("ngModel",e.DetailSetting().key),p("disabled",!e.isEdit()),s(4),u("ngModel",e.DetailSetting().value),p("disabled",!e.isEdit()),s(4),u("ngModel",e.DetailSetting().type),p("disabled",!e.isEdit()),s(12),u("ngModel",e.DetailSetting().description),p("disabled",!e.isEdit())}},dependencies:[R,j,O,J,z,P,x,A,V,W,L,B,I,X,G,K,N,Q],encapsulation:2})};export{Y as DetailSettingComponent};
