import{b as ee}from"./chunk-INAH5Y6A.js";import{d as H,g as J,w as U}from"./chunk-6YWI4PR3.js";import{h as Z}from"./chunk-BMYJTCCL.js";import{e as G}from"./chunk-O5ADOJKP.js";import{d as Y}from"./chunk-6H4HLFRK.js";import{b as W,c as _,d as q}from"./chunk-RT2KEOZH.js";import{g as $,j as X}from"./chunk-LE5WZP6V.js";import{b as z,f as R,i as j,m as K}from"./chunk-6ZJGR7X4.js";import{a as P,b as Q}from"./chunk-F3NJGPQK.js";import{c as B,e as O,f as N}from"./chunk-MDDDUITI.js";import{Lb as h,Mb as g,Pb as v,Qb as T,Rb as y,Sb as l,Tb as a,Yb as M,ac as f,bc as d,eb as u,fc as S,gc as b,hc as k,lc as x,pa as c,pc as s,qa as m,qb as F,qc as E,rc as w,sc as L,uc as V,vc as D,wc as A,yb as I,za as C}from"./chunk-TWMQPIMW.js";function te(n){return n?n.replace(/Ä‘/g,"d").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase():""}function re(n,i){if(n&1&&(l(0,"button",2,1),s(2),a()),n&2){let t=d(),e=x(3);y("disabled",!t.isEdit())("matMenuTriggerFor",e),u(2),L(" ",t.CountItems," ",t.title," ")}}function ne(n,i){if(n&1&&(l(0,"button",3,1)(2,"mat-icon"),s(3),a()()),n&2){let t=d(),e=x(3);y("matMenuTriggerFor",e),u(3),E(t.icon)}}function oe(n,i){n&1&&(l(0,"span",18),s(1,"check"),a())}function le(n,i){if(n&1){let t=M();l(0,"div",17),f("click",function(){let r=c(t).$implicit,o=d();return m(o.ChosenItem(r))}),h(1,oe,2,0,"span",18),s(2),a()}if(n&2){let t=i.$implicit,e=d();u(),g(e.CheckItem(t)?1:-1),u(),w(" ",t[e.fieldsearch]||"(Tr\u1ED1ng)"," ")}}var ie=class n{ListItem=[];filterItem=[];ListFilter=[];CountItems=0;icon="";title="Items";fieldsearch="title";isEdit=C(!1);isDelete=C(!1);OutFilter=new I;menuTrigger;searchText="";initFilter=[];ngOnInit(){this.initFilter=this.filterItem}trackByFn(i,t){return t.id}ChosenAll(){this.ListFilter=this.ListItem,this.filterItem=this.initFilter}RemoveAll(){this.ListFilter=[],this.filterItem=this.initFilter,this.searchText=""}CheckItem(i){return!!this.ListFilter?.find(t=>t.id===i.id)}doFilterItem(i,t){let e=i.target.value;if(this.searchText=e,!e){this.filterItem=this.initFilter;return}this.filterItem=this.initFilter.filter(r=>te(r[t]).includes(e.toLowerCase())||r[t].toLowerCase().includes(e.toLowerCase()))}DoListFilter(){let i=new Map;this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),this.filterItem=Array.from(i.values())}getChosen(){let i=new Map;return this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),Array.from(i.values()).length}ChosenItem(i){console.log("ListFilter",this.ListFilter);let t=i[this.fieldsearch],e=this.ListItem.filter(o=>o[this.fieldsearch]===t);this.ListFilter.filter(o=>o[this.fieldsearch]===t).length>0?this.ListFilter=this.ListFilter?.filter(o=>o[this.fieldsearch]!==t):this.ListFilter=[...this.ListFilter,...e]}ApplyFilterColum(i){this.OutFilter.emit(this.ListFilter),i.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=F({type:n,selectors:[["app-searchfilter"]],viewQuery:function(t,e){if(t&1&&S(_,5),t&2){let r;b(r=k())&&(e.menuTrigger=r.first)}},inputs:{ListItem:"ListItem",filterItem:"filterItem",ListFilter:"ListFilter",CountItems:"CountItems",icon:"icon",title:"title",fieldsearch:"fieldsearch",isEdit:"isEdit",isDelete:"isDelete"},outputs:{OutFilter:"OutFilter"},decls:26,vars:4,consts:[["menu","matMenu"],["menuTrigger","matMenuTrigger"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"ngModelChange","keyup","ngModel"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],[1,"material-symbols-outlined","text-blue-600"]],template:function(t,e){if(t&1){let r=M();h(0,re,3,4,"button",2),h(1,ne,4,2,"button",3),l(2,"mat-menu",null,0)(4,"div",4),f("click",function(p){return c(r),m(p.stopPropagation())}),l(5,"div",5)(6,"input",6),A("ngModelChange",function(p){return c(r),D(e.searchText,p)||(e.searchText=p),m(p)}),f("keyup",function(p){return c(r),m(e.doFilterItem(p,e.fieldsearch))}),a(),l(7,"div",7)(8,"span",8),s(9,"search"),a()()(),l(10,"div",9)(11,"div",10)(12,"span",11),f("click",function(){return c(r),m(e.ChosenAll())}),s(13,"Ch\u1ECDn T\u1EA5t C\u1EA3"),a(),l(14,"span",11),f("click",function(){return c(r),m(e.RemoveAll())}),s(15,"Xo\xE1"),a()(),l(16,"span",11),f("click",function(){return c(r),m(e.DoListFilter())}),s(17),a()(),l(18,"div",12),v(19,le,3,2,"div",13,e.trackByFn,!0),a(),l(21,"div",14)(22,"button",15),f("click",function(){return c(r),m(e.menuTrigger.closeMenu())}),s(23,"\u0110\xF3ng"),a(),l(24,"button",16),f("click",function(){return c(r),m(e.ApplyFilterColum(e.menuTrigger))}),s(25,"\xC1p D\u1EE5ng"),a()()()()}t&2&&(g(e.icon?-1:0),u(),g(e.icon?1:-1),u(5),V("ngModel",e.searchText),u(11),w("",e.getChosen()," \u0110ang ch\u1ECDn"),u(2),T(e.filterItem))},dependencies:[$,X,K,z,R,j,Q,P,N,O,B,G,Z,ee,Y,J,H,U,q,W,_],encapsulation:2,changeDetection:0})};export{te as a,ie as b};
