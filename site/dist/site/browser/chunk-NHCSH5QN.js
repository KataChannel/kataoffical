import{a as ie}from"./chunk-2KL7XUHJ.js";import{a as ae}from"./chunk-IV4P5HB3.js";import{a as ne}from"./chunk-TDDRYVX2.js";import"./chunk-DKYA77CM.js";import"./chunk-NULFSBS2.js";import"./chunk-CTXI2QU4.js";import{b as te}from"./chunk-LUV6HXGG.js";import"./chunk-EIYXLBRB.js";import"./chunk-F5X5MWHG.js";import"./chunk-JDAZ7UOT.js";import"./chunk-TJ2MV7VQ.js";import"./chunk-H7SBU2AA.js";import{h as X}from"./chunk-QKKJE6ZT.js";import"./chunk-MS4AQ6UA.js";import"./chunk-W5IIUGZ7.js";import{d as Z,e as $}from"./chunk-XSWRQHH7.js";import{b as ee}from"./chunk-7BIMFKJV.js";import{d as Y}from"./chunk-LTETMMPY.js";import"./chunk-KDLSUHPH.js";import"./chunk-GQGNENQ4.js";import{b as P}from"./chunk-KL2CKZHV.js";import"./chunk-7RWCIHFI.js";import"./chunk-OYQAUG4H.js";import"./chunk-GKKZVB6V.js";import{a as F,c as I}from"./chunk-SVGWCZZA.js";import"./chunk-OMMN36AB.js";import"./chunk-FWJ3WEOZ.js";import"./chunk-TPIVROA7.js";import"./chunk-54PG2AAV.js";import"./chunk-PKTJEQ3B.js";import{a as H,f as q,g as J,i as Q,j as U}from"./chunk-DXHSMTKE.js";import{b as K,f as R,i as j,k as z,m as G}from"./chunk-WC4K2EFE.js";import{a as N,b as O}from"./chunk-LEPFPKJ2.js";import"./chunk-4VR3POOM.js";import"./chunk-SGYCFQGT.js";import"./chunk-V7JB2Y7H.js";import"./chunk-42FQZPQC.js";import{c as A,f as W,h as L}from"./chunk-LFELKNV5.js";import"./chunk-7DGOHQPD.js";import"./chunk-TMDPBKA7.js";import"./chunk-K2M5JXAW.js";import{k as T,l as k,w as B}from"./chunk-VCJEB5TU.js";import{$b as a,Ab as v,Bc as h,Cc as _,Dc as g,Gb as D,Na as x,Qb as c,_b as i,bc as w,bd as V,cc as y,ec as C,ic as S,jc as d,la as E,nb as m,ua as s,va as u,wc as l,xc as b,yc as M}from"./chunk-7U7GNSSJ.js";import"./chunk-EU2KAMEK.js";import{j as f}from"./chunk-47CWAPKR.js";function re(p,n){if(p&1){let e=C();i(0,"button",1),S("click",function(){s(e);let t=d();return u(t.handleSanphamAction())}),i(1,"mat-icon"),l(2,"save"),a()()}}function le(p,n){if(p&1){let e=C();i(0,"button",1),S("click",function(){s(e);let t=d();return u(t.toggleEdit())}),i(1,"mat-icon"),l(2,"edit"),a()()}}function me(p,n){if(p&1){let e=C();w(0),i(1,"div",7)(2,"div",8),l(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),i(4,"div",9)(5,"button",10),S("click",function(){s(e);let t=d();return u(t.DeleteData())}),l(6,"\u0110\u1ED3ng \xDD"),a(),i(7,"button",11),S("click",function(){s(e);let t=d();return u(t.toggleDelete())}),l(8,"Hu\u1EF7 B\u1ECF"),a()()(),y()}}function pe(p,n){if(p&1&&(i(0,"mat-option",23),l(1),a()),p&2){let e=n.$implicit;c("value",e.id),m(),b(e.title)}}function ce(p,n){if(p&1){let e=C();i(0,"div",3)(1,"mat-form-field",13)(2,"mat-label"),l(3),a(),i(4,"input",24),g("ngModelChange",function(t){let o=s(e).$implicit;return _(o.type,t)||(o.type=t),u(t)}),a()(),i(5,"mat-form-field",13)(6,"mat-label"),l(7),a(),i(8,"input",25),g("ngModelChange",function(t){let o=s(e).$implicit;return _(o.gia,t)||(o.gia=t),u(t)}),a()(),i(9,"mat-form-field",13)(10,"mat-label"),l(11,"T\u1EEB"),a(),i(12,"input",26),g("ngModelChange",function(t){let o=s(e).$implicit;return _(o.min,t)||(o.min=t),u(t)}),a()(),i(13,"mat-form-field",13)(14,"mat-label"),l(15,"\u0110\u1EBFn"),a(),i(16,"input",27),g("ngModelChange",function(t){let o=s(e).$implicit;return _(o.max,t)||(o.max=t),u(t)}),a()(),i(17,"button",28),S("click",function(){let t=s(e).index,o=d(2);return u(o.removeBacgia(t))}),i(18,"mat-icon"),l(19,"remove_circle"),a()()()}if(p&2){let e=n.$implicit,r=n.index,t=d(2);m(3),M("\u0110i\u1EC1u Ki\u1EC7n ",r+1,""),m(),h("ngModel",e.type),c("disabled",!t.isEdit()),m(3),M("Gi\xE1 ",r+1,""),m(),h("ngModel",e.gia),c("disabled",!t.isEdit()),m(4),h("ngModel",e.min),c("disabled",!t.isEdit()),m(4),h("ngModel",e.max),c("disabled",!t.isEdit())}}function se(p,n){if(p&1){let e=C();w(0),i(1,"div",12)(2,"mat-form-field",13)(3,"mat-label"),l(4,"Ti\xEAu \u0110\u1EC1"),a(),i(5,"input",14),g("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().title,t)||(o.DetailSanpham().title=t),u(t)}),a()(),i(6,"mat-form-field",13)(7,"mat-label"),l(8,"Danh M\u1EE5c"),a(),i(9,"mat-select",15),g("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().danhmucId,t)||(o.DetailSanpham().danhmucId=t),u(t)}),D(10,pe,2,2,"mat-option",16),a()(),i(11,"div",3)(12,"mat-form-field",13)(13,"mat-label"),l(14,"\u0110\u01A1n V\u1ECB T\xEDnh"),a(),i(15,"input",17),g("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().donvitinh,t)||(o.DetailSanpham().donvitinh=t),u(t)}),a()(),i(16,"button",1),S("click",function(){s(e);let t=d();return u(t.addBacgia())}),i(17,"mat-icon"),l(18,"add_circle"),a()()(),D(19,ce,20,10,"div",18),i(20,"mat-form-field",13)(21,"mat-label"),l(22,"Tr\u1EA1ng Th\xE1i"),a(),i(23,"mat-select",15),g("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().status,t)||(o.DetailSanpham().status=t),u(t)}),i(24,"mat-option",19),l(25,"Nh\xE1p"),a(),i(26,"mat-option",20),l(27,"\u0110\xE3 Xu\u1EA5t B\u1EA3n"),a(),i(28,"mat-option",21),l(29,"\u0110\xE3 L\u01B0u Tr\u1EEF"),a()()(),i(30,"mat-form-field",13)(31,"mat-label"),l(32,"M\xF4 T\u1EA3"),a(),i(33,"textarea",22),g("ngModelChange",function(t){s(e);let o=d();return _(o.DetailSanpham().description,t)||(o.DetailSanpham().description=t),u(t)}),a()()(),y()}if(p&2){let e=d();m(5),h("ngModel",e.DetailSanpham().title),c("disabled",!e.isEdit()),m(4),h("ngModel",e.DetailSanpham().danhmucId),c("disabled",!e.isEdit()),m(),c("ngForOf",e.ListDanhmuc()),m(5),h("ngModel",e.DetailSanpham().donvitinh),c("disabled",!e.isEdit()),m(4),c("ngForOf",e.DetailSanpham().bacgia),m(4),h("ngModel",e.DetailSanpham().status),c("disabled",!e.isEdit()),m(10),h("ngModel",e.DetailSanpham().description),c("disabled",!e.isEdit())}}var oe=class p{_ListSanphamComponent=E(ie);_SanphamService=E(ne);_DanhmucService=E(ae);_route=E(F);_router=E(I);_snackBar=E(P);DetailSanpham=this._SanphamService.DetailSanpham;isEdit=x(!1);isDelete=x(!1);sanphamId=this._SanphamService.sanphamId;ListDanhmuc=this._DanhmucService.ListDanhmuc;constructor(){this._route.paramMap.subscribe(n=>{let e=n.get("id");this._SanphamService.setSanphamId(e)}),V(()=>f(this,null,function*(){let n=this._SanphamService.sanphamId();yield this._DanhmucService.getAllDanhmuc(),n||(this._router.navigate(["sanpham"]),this._ListSanphamComponent.drawer.close()),n==="new"?(this.DetailSanpham.set({bacgia:[]}),this._ListSanphamComponent.drawer.open(),this.isEdit.update(e=>!e),console.log("Creating new sanpham",this.DetailSanpham()),this._router.navigate(["sanpham","new"])):(yield this._SanphamService.getSanphamBy({id:n,isOne:!0}),this._ListSanphamComponent.drawer.open(),this._router.navigate(["sanpham",n]))}))}ngOnInit(){return f(this,null,function*(){yield this._DanhmucService.getAllDanhmuc()})}addBacgia(){this.DetailSanpham.update(n=>(n.bacgia=n.bacgia||[],n.bacgia.push({type:"",min:0,max:0,gia:0}),n))}removeBacgia(n){this.DetailSanpham.update(e=>(e.bacgia=e.bacgia||[],n>-1&&e.bacgia.splice(n,1),e))}handleSanphamAction(){return f(this,null,function*(){this.sanphamId()==="new"?yield this.createSanpham():yield this.updateSanpham()})}createSanpham(){return f(this,null,function*(){try{yield this._SanphamService.CreateSanpham(this.DetailSanpham()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o sanpham:",n)}})}updateSanpham(){return f(this,null,function*(){try{yield this._SanphamService.updateSanpham(this.DetailSanpham()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt sanpham:",n)}})}DeleteData(){return f(this,null,function*(){try{yield this._SanphamService.DeleteSanpham(this.DetailSanpham()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["sanpham"])}catch(n){console.error("L\u1ED7i khi x\xF3a sanpham:",n)}})}goBack(){this._router.navigate(["sanpham"]),this._ListSanphamComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailSanpham.update(n=>(n.slug=ee(n.title),n))}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=v({type:p,selectors:[["app-detailsanpham"]],decls:12,vars:5,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"grid","grid-cols-1","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u01A1n V\u1ECB T\xEDnh",3,"ngModelChange","ngModel","disabled"],["class","flex flex-row space-x-2 items-center",4,"ngFor","ngForOf"],["value","draft"],["value","published"],["value","archived"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xF4 T\u1EA3",3,"ngModelChange","ngModel","disabled"],[3,"value"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110i\u1EC1u Ki\u1EC7n",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Gi\xE1",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Kho\u1EA3ng Gi\xE1 T\u1EEB",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Kho\u1EA3ng Gi\xE1 \u0110\u1EBFn",3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,r){if(e&1&&(i(0,"div",0)(1,"button",1),S("click",function(){return r.goBack()}),i(2,"mat-icon"),l(3,"arrow_back"),a()(),i(4,"div",2),l(5),a(),i(6,"div",3),D(7,re,3,0,"button",4)(8,le,3,0,"button",4),a()(),i(9,"div",5),D(10,me,9,0,"ng-container",6)(11,se,34,12,"ng-container",6),a()),e&2){let t;m(5),b(((t=r.DetailSanpham())==null?null:t.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),m(2),c("ngIf",r.isEdit()),m(),c("ngIf",!r.isEdit()),m(2),c("ngIf",r.isDelete()),m(),c("ngIf",!r.isDelete())}},dependencies:[J,q,H,U,Q,G,K,z,R,j,O,N,L,W,A,$,Z,Y,X,B,T,k,te],encapsulation:2})};export{oe as DetailSanphamComponent};
