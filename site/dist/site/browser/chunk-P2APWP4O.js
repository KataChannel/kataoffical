import{b as De}from"./chunk-XXTJDS54.js";import{b as ue,e as h,f as ce,g as de,h as _e,i as fe,j as ge,l as Ce,m as he,o as Se,p as ye,r as we,s as Me,u as xe,v as be,w as Ie,x as S}from"./chunk-UPLBGY6S.js";import{c as G}from"./chunk-25G5CAF6.js";import{e as pe}from"./chunk-HWFH4T6X.js";import{b as X}from"./chunk-MLNCYS7B.js";import{b as Z,c as ee,d as te}from"./chunk-PUKQRMIV.js";import{f as re,g as le,i as me,j as se}from"./chunk-WUBFFP4Z.js";import{b as ie,f as ae,i as ne,m as oe}from"./chunk-WC4K2EFE.js";import{a as U,b as Y}from"./chunk-RMYP3SCO.js";import{c as q,f as W,h as J}from"./chunk-ARHCHGR2.js";import{s as j,w as Q}from"./chunk-VCJEB5TU.js";import{$b as o,Ab as K,Ac as B,Bc as H,Cc as O,Dc as $,Gb as C,Gc as A,Kc as E,Mc as v,Qb as p,Vb as y,Xb as L,Yb as z,Zb as V,_b as n,ac as w,bc as N,cc as R,ec as M,ic as g,jc as s,la as T,nb as r,pc as x,qc as b,rc as I,ta as k,ua as d,va as _,vc as D,wc as l,xc as P,yc as f}from"./chunk-7U7GNSSJ.js";import{a as F}from"./chunk-47CWAPKR.js";var ve=["drawer"],Fe=()=>({standalone:!0});function Te(t,a){if(t&1){let i=M();n(0,"th",22)(1,"span",23),l(2),o(),n(3,"app-searchfilter",24),g("OutFilter",function(m){d(i);let c=s(2);return _(c.onOutFilter(m))}),o()()}if(t&2){let i=s().$implicit,e=s();r(2),f(" ",e.ColumnName[i]," "),r(),p("icon","filter_alt")("ListItem",e.ListItem)("ListFilter",e.ListFilter)("filterItem",e.FilterHederColumn(e.dataSource.filteredData,i))}}function ke(t,a){if(t&1&&(n(0,"span",26),l(1),o()),t&2){let i=s().index;r(),f(" ",i+1," ")}}function Ke(t,a){if(t&1&&(n(0,"span",26),l(1),E(2,"date"),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",v(2,1,i[e],"dd/MM/yyyy")," ")}}function Le(t,a){t&1&&(n(0,"mat-icon",27),l(1,"check_circle"),o())}function ze(t,a){t&1&&(n(0,"mat-icon",28),l(1,"cancel"),o())}function Ve(t,a){if(t&1&&(n(0,"span",26),C(1,Le,2,0,"mat-icon",27)(2,ze,2,0,"mat-icon",28),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),y(i[e]?1:2)}}function Ne(t,a){if(t&1&&(n(0,"span",26),l(1),E(2,"date"),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",v(2,1,i[e],"dd/MM/yyyy")," ")}}function Re(t,a){if(t&1&&(n(0,"span",26),l(1),o()),t&2){let i=s().$implicit,e=s().$implicit;r(),f(" ",i[e]," ")}}function Be(t,a){if(t&1&&(n(0,"td",25),C(1,ke,2,1,"span",26)(2,Ke,3,4,"span",26)(3,Ve,3,1,"span",26)(4,Ne,3,4,"span",26)(5,Re,2,1,"span",26),o()),t&2){let i,e=s().$implicit;r(),y((i=e)==="STT"?1:i==="createdAt"?2:i==="isActive"?3:i==="updatedAt"?4:5)}}function He(t,a){if(t&1&&(N(0,5),C(1,Te,4,5,"th",20)(2,Be,6,1,"td",21),R()),t&2){let i=a.$implicit;p("matColumnDef",i)}}function Oe(t,a){t&1&&w(0,"tr",29)}function $e(t,a){t&1&&w(0,"tr",30)}function Ae(t,a){t&1&&(n(0,"tr",31)(1,"td",32),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}var Pe=class t{ListItem=[];displayedColumns=[];ColumnName={};totalItems=0;pageSize=10;currentPage=1;totalPages=1;FilterColumns=JSON.parse(localStorage.getItem("NhacungcapColFilter")||"[]");isFilter=!1;sort;drawer;filterValues={};dataSource=new S([]);_snackBar=T(X);ngOnChanges(a){a.ListItem&&a.ListItem.currentValue,a.displayedColumns&&a.displayedColumns.currentValue&&(this.displayedColumns=[...this.displayedColumns]),a.ColumnName&&a.ColumnName.currentValue&&(this.ColumnName=F({},this.ColumnName)),this.totalItems=this.ListItem.length,this.pageSize=this.pageSize||10,this.currentPage=1,this.totalPages=Math.ceil(this.totalItems/this.pageSize),console.log(this.pageSize),this.calculateTotalPages(),this.updateDataSource()}updateDataSource(){this.dataSource=new S([...this.ListItem]),this.dataSource.sort=this.sort}ngAfterViewInit(){this.dataSource&&(this.dataSource.sort=this.sort)}onOutFilter(a){this.dataSource=new S([...a]),this.dataSource.sort=this.sort}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(a,i){a>this.ListItem.length?(this.pageSize=this.ListItem.length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.ListItem.length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=a,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),i.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let a=(this.currentPage-1)*this.pageSize,i=a+this.pageSize,e=this.ListItem.slice(a,i);this.dataSource.data=e}FilterHederColumn(a,i){return a.filter((m,c,u)=>c===u.findIndex(Ee=>Ee[i]===m[i]))}ListFilter=[];static \u0275fac=function(i){return new(i||t)};static \u0275cmp=K({type:t,selectors:[["app-ktable"]],viewQuery:function(i,e){if(i&1&&(x(h,5),x(ve,7)),i&2){let m;b(m=I())&&(e.sort=m.first),b(m=I())&&(e.drawer=m.first)}},inputs:{ListItem:"ListItem",displayedColumns:"displayedColumns",ColumnName:"ColumnName",totalItems:"totalItems",pageSize:"pageSize",currentPage:"currentPage",totalPages:"totalPages"},features:[k],decls:38,vars:15,consts:[["menuHienthi","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-col","space-y-2","h-full","w-full","p-2"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","ListFilter","filterItem"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(i,e){if(i&1){let m=M();n(0,"div",2)(1,"div",3)(2,"table",4),z(3,He,3,1,"ng-container",5,L),C(5,Oe,1,0,"tr",6)(6,$e,1,0,"tr",7)(7,Ae,3,0,"tr",8),o()(),n(8,"div",9)(9,"div",10)(10,"span",11),l(11,"\u0110ang Xem "),n(12,"strong"),l(13),o(),l(14," - "),n(15,"strong"),l(16),o(),l(17),o(),n(18,"div",12)(19,"span",13,0),l(21),o(),n(22,"mat-menu",null,1)(24,"div",14),g("click",function(u){return d(m),_(u.stopPropagation())}),n(25,"span"),l(26,"S\u1ED1 L\u01B0\u1EE3ng"),o(),n(27,"mat-form-field",15)(28,"input",16),$("ngModelChange",function(u){return d(m),O(e.pageSize,u)||(e.pageSize=u),_(u)}),o()(),n(29,"button",17),g("click",function(){d(m);let u=D(20);return _(e.onPageSizeChange(e.pageSize,u))}),l(30,"\xC1p D\u1EE5ng"),o()()(),n(31,"div",18)(32,"button",19),g("click",function(){return d(m),_(e.onPreviousPage())}),n(33,"mat-icon"),l(34,"keyboard_arrow_left"),o()(),n(35,"button",19),g("click",function(){return d(m),_(e.onNextPage())}),n(36,"mat-icon"),l(37,"keyboard_arrow_right"),o()()()()()()()}if(i&2){let m=D(23);r(2),p("dataSource",e.dataSource),r(),V(e.displayedColumns),r(2),p("matHeaderRowDef",e.displayedColumns),r(),p("matRowDefColumns",e.displayedColumns),r(7),P((e.currentPage-1)*e.pageSize+1),r(3),P(e.currentPage*e.pageSize>e.totalItems?e.totalItems:e.currentPage*e.pageSize),r(),B(" trong s\u1ED1 ",e.totalItems," m\u1EE5c, ",e.currentPage,"/",e.totalPages," Trang"),r(2),p("matMenuTriggerFor",m),r(2),f("Hi\u1EC7n Th\u1ECB : ",e.pageSize," m\u1EE5c"),r(7),H("ngModel",e.pageSize),p("ngModelOptions",A(14,Fe)),r(4),p("disabled",e.currentPage===1),r(3),p("disabled",e.currentPage===e.totalPages)}},dependencies:[le,re,se,me,Ie,_e,ge,ye,Ce,fe,we,he,Se,Me,xe,be,de,h,ce,te,Z,ee,G,Y,U,J,W,q,pe,Q,j,oe,ie,ae,ne,ue,De],encapsulation:2,changeDetection:0})};export{Pe as a};
