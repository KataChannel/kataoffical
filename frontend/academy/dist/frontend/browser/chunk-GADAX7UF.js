import{a as J}from"./chunk-UUCQNKHN.js";import{a as U,b as j,c as H,d as q,e as G}from"./chunk-TTUYA3IA.js";import{a as P}from"./chunk-YOCWHFJM.js";import"./chunk-FLOPEQPR.js";import"./chunk-YWRND724.js";import{b as O}from"./chunk-QLVEQRWO.js";import"./chunk-DZJMYHXN.js";import"./chunk-54PG2AAV.js";import"./chunk-PKTJEQ3B.js";import{b as z,c as L}from"./chunk-ZQFWJ2OQ.js";import{b as W,g as N,h as R}from"./chunk-IU4WBIK7.js";import{b as I,f as T,i as V,n as F,o as B}from"./chunk-E4XDAHCC.js";import"./chunk-KDLSUHPH.js";import"./chunk-VR2W35LS.js";import"./chunk-CQ54KAN2.js";import"./chunk-43DN6HYK.js";import"./chunk-4VR3POOM.js";import{b}from"./chunk-QU4AVUAP.js";import"./chunk-SGYCFQGT.js";import"./chunk-7GYZWPAF.js";import{f as w,g as M,h as S}from"./chunk-NLC72BFZ.js";import"./chunk-5B7P4IWF.js";import{b as A}from"./chunk-FNL7TNJH.js";import"./chunk-EUNMJJRI.js";import"./chunk-A4U7PHZP.js";import{j as D,p as _}from"./chunk-MKGF5YGY.js";import{Ac as h,Bc as f,Eb as k,Ob as y,Yb as n,Zb as i,cc as x,gc as v,hc as s,ja as p,lb as c,sa as m,ta as u,uc as o,yb as C,zc as g}from"./chunk-R6SUZUUA.js";import"./chunk-EU2KAMEK.js";import{j as E}from"./chunk-47CWAPKR.js";function Q(l,d){if(l&1){let e=x();n(0,"div",2)(1,"mat-card",3)(2,"mat-card-header",4)(3,"mat-card-title")(4,"h1",5),o(5,"\u0110\u0103ng k\xFD l\xE0m C\u1ED9ng t\xE1c vi\xEAn"),i()()(),n(6,"mat-card-content")(7,"div",6)(8,"div",7)(9,"h2",8),o(10,"Th\xF4ng tin c\xE1 nh\xE2n"),i(),n(11,"mat-form-field",9)(12,"mat-label"),o(13,"H\u1ECD v\xE0 t\xEAn"),i(),n(14,"input",10),f("ngModelChange",function(t){m(e);let a=s();return h(a.Dangky.name,t)||(a.Dangky.name=t),u(t)}),i()(),n(15,"mat-form-field",9)(16,"mat-label"),o(17,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),i(),n(18,"input",11),f("ngModelChange",function(t){m(e);let a=s();return h(a.Dangky.phone,t)||(a.Dangky.phone=t),u(t)}),i()(),n(19,"mat-form-field",9)(20,"mat-label"),o(21,"Email"),i(),n(22,"input",12),f("ngModelChange",function(t){m(e);let a=s();return h(a.Dangky.email,t)||(a.Dangky.email=t),u(t)}),i()(),n(23,"mat-form-field",9)(24,"mat-label"),o(25,"M\u1EADt kh\u1EA9u"),i(),n(26,"input",13),f("ngModelChange",function(t){m(e);let a=s();return h(a.Dangky.password,t)||(a.Dangky.password=t),u(t)}),i()()(),n(27,"div",14)(28,"button",15),v("click",function(){m(e);let t=s();return u(t.onDangky())}),o(29," \u0110\u0103ng k\xFD l\xE0m CTV "),i()()()()()()}if(l&2){let e=s();c(14),g("ngModel",e.Dangky.name),c(4),g("ngModel",e.Dangky.phone),c(4),g("ngModel",e.Dangky.email),c(4),g("ngModel",e.Dangky.password)}}function X(l,d){l&1&&(n(0,"div",16)(1,"mat-card",17)(2,"mat-card-content")(3,"h2",18),o(4,"C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 \u0111\u0103ng k\xFD l\xE0m C\u1ED9ng t\xE1c vi\xEAn!"),i(),n(5,"p",19),o(6,"Ch\xFAng t\xF4i \u0111\xE3 nh\u1EADn \u0111\u01B0\u1EE3c th\xF4ng tin \u0111\u0103ng k\xFD c\u1EE7a b\u1EA1n. B\u1EA1n s\u1EBD \u0111\u01B0\u1EE3c chuy\u1EC3n v\u1EC1 trang ch\u1EE7 trong gi\xE2y l\xE1t."),i(),n(7,"a",20),o(8,"\u0110\u0103ng Nh\u1EADp \u0110\u1EC3 B\u1EAFt \u0110\u1EA7u"),i()()()())}var K=class l{userService=p(P);storageService=p(A);trackingService=p(J);_snackbar=p(b);isRegister=!1;refCode=this.storageService.getItem("refCode")??void 0;Dangky={affiliateCode:"",isCTV:!0};ngOnInit(){let e=new URLSearchParams(window.location.search).get("ref");e&&(this.Dangky.affiliateCode=e,this.refCode||this.storageService.setItem("refCode",e))}onDangky(){return E(this,null,function*(){if(!this.Dangky.phone||this.Dangky.phone.trim()===""){this._snackbar.open("S\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(!/^[0-9]{10,11}$/.test(this.Dangky.phone)){this._snackbar.open("S\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(!this.Dangky.email||this.Dangky.email.trim()===""){this._snackbar.open("Email kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.Dangky.email)){this._snackbar.open("Email kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}try{(yield this.userService.registerctv(this.Dangky)).statusCode===201&&(this.isRegister=!0,this.trackingService.CreateTracking({eventType:"register",pageUrl:window.location.href,pageType:"DangkyCTV",pageIdentifier:"",refCode:this.Dangky.affiliateCode,referrer:document.referrer||void 0}),this.storageService.removeItem("refCode"),this._snackbar.open("\u0110\u0103ng k\xFD th\xE0nh c\xF4ng!","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}))}catch(r){console.error("Registration error:",r),this._snackbar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi \u0111\u0103ng k\xFD","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=C({type:l,selectors:[["app-dangkyctv"]],decls:2,vars:2,consts:[["class","container mx-auto p-4 py-8 max-w-2xl",4,"ngIf"],["class","container mx-auto p-4 py-8 max-w-2xl flex flex-col items-center",4,"ngIf"],[1,"container","mx-auto","p-4","py-8","max-w-2xl"],[1,"rounded-lg","shadow-md","overflow-hidden"],[1,"bg-blue-600","py-4","px-6"],[1,"text-white","text-2xl","font-bold"],[1,"p-6","space-y-6"],[1,"space-y-4"],[1,"text-lg","font-semibold","text-gray-800","border-b","pb-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","type","text","placeholder","Nh\u1EADp h\u1ECD v\xE0 t\xEAn \u0111\u1EA7y \u0111\u1EE7",3,"ngModelChange","ngModel"],["matInput","","type","tel","name","phone","pattern","[0-9]*","placeholder","Nh\u1EADp s\u1ED1 \u0111i\u1EC7n tho\u1EA1i",3,"ngModelChange","ngModel"],["matInput","","type","email","name","email","placeholder","Nh\u1EADp \u0111\u1ECBa ch\u1EC9 email",3,"ngModelChange","ngModel"],["matInput","","type","password","name","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u",3,"ngModelChange","ngModel"],[1,"flex","justify-center"],["mat-flat-button","","color","primary",3,"click"],[1,"container","mx-auto","p-4","py-8","max-w-2xl","flex","flex-col","items-center"],[1,"rounded-lg","shadow-md","overflow-hidden","w-full","text-center"],[1,"text-2xl","font-bold","text-green-600","mb-4"],[1,"text-gray-700","mb-6"],["mat-flat-button","","color","primary","href","/loginctv"]],template:function(e,r){e&1&&k(0,Q,30,4,"div",0)(1,X,9,0,"div",1),e&2&&(y("ngIf",!r.isRegister),c(),y("ngIf",r.isRegister))},dependencies:[_,D,B,I,T,F,V,G,U,H,q,j,R,N,W,L,z,O,S,M,w],encapsulation:2})};export{K as DangkyctvComponent};
