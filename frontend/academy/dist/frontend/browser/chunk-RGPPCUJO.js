import{a as H}from"./chunk-SLAGCPU7.js";import{a as R,b as j}from"./chunk-A3O2ABKT.js";import{e as U}from"./chunk-MCNLUZAC.js";import{a as w}from"./chunk-YPLJGWKH.js";import"./chunk-FLOPEQPR.js";import"./chunk-XCA2M2QW.js";import{l as $}from"./chunk-QYVZHZZR.js";import{b as P}from"./chunk-MTG6B4MD.js";import"./chunk-PNOC3UOS.js";import{c as A}from"./chunk-VBXFJVBP.js";import"./chunk-54PG2AAV.js";import"./chunk-PKTJEQ3B.js";import{c as K}from"./chunk-7VSIUUOO.js";import{h as _}from"./chunk-B2ZB3A6D.js";import"./chunk-MPEKUKE6.js";import{a as I,b as N}from"./chunk-7QNTUK2V.js";import"./chunk-KDLSUHPH.js";import"./chunk-VR2W35LS.js";import"./chunk-Y7HN5IR5.js";import"./chunk-YR76ISZR.js";import"./chunk-4VR3POOM.js";import"./chunk-TTEKCJCL.js";import"./chunk-SGYCFQGT.js";import"./chunk-3GUAJFJF.js";import{c as L,h as B}from"./chunk-GN54BGMO.js";import"./chunk-CAC2WUPH.js";import"./chunk-QOW4K5LY.js";import"./chunk-GUMGWS7X.js";import{d as O}from"./chunk-ADKO3TY5.js";import{i as k,m as F,o as M}from"./chunk-OAKDL3DQ.js";import{Eb as y,Ec as x,Ic as v,Jc as D,Ob as p,Qc as S,Yb as e,Zb as i,_b as C,_c as T,ja as c,lb as o,uc as n,vc as d,yb as b}from"./chunk-KDEDG4GY.js";import"./chunk-EU2KAMEK.js";import{a as u,b as h,j as E}from"./chunk-47CWAPKR.js";var G=()=>["../"];function V(m,r){if(m&1&&(e(0,"tr",19)(1,"td",20),n(2),i(),e(3,"td",20),n(4),i(),e(5,"td",20),n(6),i(),e(7,"td",20),n(8),v(9,"date"),i()()),m&2){let a=r.$implicit;o(2),d((a.affiliateLink==null?null:a.affiliateLink.campaignName)||"Trang S\u1EA3n Ph\u1EA9m"),o(2),d(a.pageUrl),o(2),d(a.sharePlatform||"N/A"),o(2),d(D(9,4,a.createdAt,"dd/MM/yyyy"))}}var W=class m{displayedColumns=["campaignName","registrations","conversionRate","platform"];startDay=new Date(new Date().setDate(new Date().getDate()-7));endDay=new Date;cdr=c(S);barChartSeries=[{name:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng",data:[]}];barChartOptions={chart:{type:"bar",height:350},colors:["#4CAF50"],xaxis:{categories:[],title:{text:"Ng\xE0y"}},yaxis:{title:{text:"S\u1ED1 L\u01B0\u1EE3t \u0110\u0103ng K\xFD"},min:0},title:{text:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng Theo Th\u1EDDi Gian",align:"center"},legend:{position:"top"}};pieChartSeries=[40,30,20,10];pieChartOptions={chart:{type:"pie",height:350},labels:["Website","TikTok","Facebook","Email"],colors:["#4CAF50","#2196F3","#FF9800","#9C27B0"],title:{text:"Ph\xE2n B\u1ED1 Ngu\u1ED3n \u0110\u0103ng K\xFD",align:"center"},legend:{position:"bottom"}};updateChartData(){let r=[],a=[],t=new Date(this.startDay),l=new Date(this.endDay);for(;t<=l;){let g=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`;r.push(g),a.push(this.ThoigianDangky[g]||0),t.setDate(t.getDate()+1)}this.barChartOptions=h(u({},this.barChartOptions),{xaxis:h(u({},this.barChartOptions.xaxis),{categories:r})}),this.barChartSeries=[{name:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng",data:a}],this.updatePieChartData(),this.cdr.detectChanges()}updatePieChartData(){let r=this.ListTracking().reduce((s,Y)=>{let f=Y.sharePlatform||"Website";return s[f]?s[f]++:s[f]=1,s},{}),a=Object.keys(r),t=Object.values(r),l={Website:"#4CAF50",TikTok:"#2196F3",Facebook:"#FF9800",Email:"#9C27B0",Instagram:"#E91E63",YouTube:"#F44336",Twitter:"#00BCD4",LinkedIn:"#3F51B5"},g=a.map(s=>l[s]||"#9E9E9E");this.pieChartSeries=t,this.pieChartOptions=h(u({},this.pieChartOptions),{labels:a,colors:g})}_TrackingService=c(H);_UserService=c(w);profile=this._UserService.profile;ListTracking=this._TrackingService.ListTracking;Tongdangky=0;ThoigianDangky={};constructor(){T(()=>E(this,null,function*(){try{yield this._UserService.getProfile(),yield this._TrackingService.getTrackingBy({refCode:this.profile().phone,eventType:"register",pageType:"DangkyHV"}),this.Tongdangky=this.ListTracking().length,this.ThoigianDangky=this.ListTracking().reduce((r,a)=>{let t=new Date(a.createdAt),l=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`;return r[l]?r[l]++:r[l]=1,r},{}),setTimeout(()=>{this.updateChartData()},100)}catch(r){console.error("Error loading data:",r)}}))}ngOnInit(){this.updateChartData()}static \u0275fac=function(a){return new(a||m)};static \u0275cmp=b({type:m,selectors:[["app-luotdangky"]],decls:52,vars:17,consts:[[1,"container","mx-auto","bg-gray-100"],[1,"flex","flex-row","space-x-2","mb-6","items-center"],["mat-icon-button","","color","primary",3,"routerLink"],[1,"flex","flex-col"],[1,"text-xl","font-bold","text-gray-800"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"p-6","rounded-lg","shadow-md","bg-white"],[1,"text-lg","font-semibold","text-gray-700"],[1,"text-3xl","font-bold","text-green-600"],[1,"text-3xl","font-bold","text-blue-600"],[1,"text-3xl","font-bold","text-purple-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-6"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[3,"series","chart","xaxis","yaxis","title","legend","colors"],[3,"series","chart","labels","title","legend","colors"],[1,"w-full"],[1,"bg-gray-200"],[1,"p-3","text-gray-700"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],[1,"p-3"]],template:function(a,t){a&1&&(e(0,"div",0)(1,"header",1)(2,"button",2)(3,"mat-icon"),n(4,"arrow_back"),i()(),e(5,"div",3)(6,"span",4),n(7,"B\u1EA3ng \u0110i\u1EC1u Khi\u1EC3n L\u01B0\u1EE3t \u0110\u0103ng K\xFD Affiliate"),i()()(),e(8,"div",5)(9,"div",6)(10,"div",7),n(11,"T\u1ED5ng L\u01B0\u1EE3t \u0110\u0103ng K\xFD"),i(),e(12,"div",8),n(13),i()(),e(14,"div",6)(15,"div",7),n(16,"T\u1EF7 L\u1EC7 Chuy\u1EC3n \u0110\u1ED5i"),i(),e(17,"div",9),n(18,"12,5%"),i()(),e(19,"div",6)(20,"div",7),n(21,"Chi\u1EBFn D\u1ECBch \u0110ang Ho\u1EA1t \u0110\u1ED9ng"),i(),e(22,"div",10),n(23,"8"),i()()(),e(24,"div",11)(25,"div",6)(26,"div",12),n(27," L\u01B0\u1EE3t \u0110\u0103ng K\xFD Theo Th\u1EDDi Gian "),i(),e(28,"div"),C(29,"apx-chart",13),i()(),e(30,"div",6)(31,"div",12),n(32," Ngu\u1ED3n \u0110\u0103ng K\xFD "),i(),e(33,"div"),C(34,"apx-chart",14),i()()(),e(35,"div",6)(36,"div",12),n(37," Chi\u1EBFn D\u1ECBch H\xE0ng \u0110\u1EA7u "),i(),e(38,"div")(39,"table",15)(40,"thead")(41,"tr",16)(42,"th",17),n(43,"T\xEAn Chi\u1EBFn D\u1ECBch"),i(),e(44,"th",17),n(45,"Li\xEAn K\u1EBFt"),i(),e(46,"th",17),n(47,"N\u1EC1n T\u1EA3ng"),i(),e(48,"th",17),n(49,"Ng\xE0y T\u1EA1o"),i()()(),e(50,"tbody"),y(51,V,10,7,"tr",18),i()()()()()),a&2&&(o(2),p("routerLink",x(16,G)),o(11),d(t.Tongdangky),o(16),p("series",t.barChartSeries)("chart",t.barChartOptions.chart)("xaxis",t.barChartOptions.xaxis)("yaxis",t.barChartOptions.yaxis)("title",t.barChartOptions.title)("legend",t.barChartOptions.legend)("colors",t.barChartOptions.colors),o(5),p("series",t.pieChartSeries)("chart",t.pieChartOptions.chart)("labels",t.pieChartOptions.labels)("title",t.pieChartOptions.title)("legend",t.pieChartOptions.legend)("colors",t.pieChartOptions.colors),o(17),p("ngForOf",t.ListTracking()))},dependencies:[A,_,K,P,U,$,j,R,N,I,B,L,O,M,k,F],encapsulation:2})};export{W as LuotdangkyComponent};
