import{a as R}from"./chunk-CIEKPUEE.js";import{a as U}from"./chunk-UUCQNKHN.js";import{b as H}from"./chunk-NAZSWLQP.js";import{e as $}from"./chunk-TTUYA3IA.js";import"./chunk-WO6JBKZH.js";import"./chunk-KCHV3U57.js";import{a as P}from"./chunk-KDGR5RKS.js";import"./chunk-FLOPEQPR.js";import"./chunk-YWRND724.js";import"./chunk-2A2F2WSO.js";import"./chunk-4D4RNNXO.js";import{l as G}from"./chunk-Y2MGBHEY.js";import"./chunk-N33J6L7E.js";import"./chunk-AYFHUWB6.js";import{c as N}from"./chunk-ZUCVSP5M.js";import{b as _}from"./chunk-QLVEQRWO.js";import"./chunk-DZJMYHXN.js";import"./chunk-54PG2AAV.js";import"./chunk-PKTJEQ3B.js";import{c as O}from"./chunk-ZQFWJ2OQ.js";import{h as I}from"./chunk-IU4WBIK7.js";import"./chunk-E4XDAHCC.js";import{a as w,b as K}from"./chunk-EPSPETOK.js";import"./chunk-KDLSUHPH.js";import"./chunk-VR2W35LS.js";import"./chunk-CQ54KAN2.js";import"./chunk-43DN6HYK.js";import"./chunk-4VR3POOM.js";import"./chunk-QU4AVUAP.js";import"./chunk-SGYCFQGT.js";import"./chunk-7GYZWPAF.js";import{c as B,h as A}from"./chunk-NLC72BFZ.js";import"./chunk-5B7P4IWF.js";import"./chunk-FNL7TNJH.js";import"./chunk-EUNMJJRI.js";import{d as M}from"./chunk-A4U7PHZP.js";import{i as x,m as L,p as F}from"./chunk-MKGF5YGY.js";import{Eb as D,Ec as b,Jc as k,Lc as S,Ob as p,Sc as E,Yb as i,Zb as n,_b as T,ad as v,ja as u,lb as o,uc as r,vc as g,yb as y}from"./chunk-R6SUZUUA.js";import"./chunk-EU2KAMEK.js";import{a as c,b as d,j as f}from"./chunk-47CWAPKR.js";var V=()=>["../"];function Y(l,t){if(l&1&&(i(0,"tr",13)(1,"td",14),r(2),n(),i(3,"td",14),r(4),n(),i(5,"td",14),r(6),n(),i(7,"td",14),r(8),k(9,"date"),n()()),l&2){let e=t.$implicit;o(2),g((e.affiliateLink==null?null:e.affiliateLink.campaignName)||"Trang S\u1EA3n Ph\u1EA9m"),o(2),g(e.pageUrl),o(2),g(e.sharePlatform||"N/A"),o(2),g(S(9,4,e.createdAt,"dd/MM/yyyy"))}}var W=class l{displayedColumns=["campaignName","registrations","conversionRate","platform"];startDay=new Date(new Date().setDate(new Date().getDate()-7));endDay=new Date;cdr=u(E);barChartSeries=[{name:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng",data:[]}];barChartOptions={chart:{type:"bar",height:350},colors:["#4CAF50"],xaxis:{categories:[],title:{text:"Ng\xE0y"}},yaxis:{title:{text:"S\u1ED1 L\u01B0\u1EE3t \u0110\u0103ng K\xFD"},min:0},title:{text:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng Theo Th\u1EDDi Gian",align:"center"},legend:{position:"top"}};pieChartSeries=[40,30,20,10];pieChartOptions={chart:{type:"pie",height:350},labels:["Website","TikTok","Facebook","Email"],colors:["#4CAF50","#2196F3","#FF9800","#9C27B0"],title:{text:"Ph\xE2n B\u1ED1 Ngu\u1ED3n \u0110\u0103ng K\xFD",align:"center"},legend:{position:"bottom"}};customChartData={timeData:{},categoryData:{}};customChartConfig={barChart:{title:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Theo Th\u1EDDi Gian",yAxisTitle:"S\u1ED1 L\u01B0\u1EE3t \u0110\u0103ng K\xFD",seriesName:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng",color:"#4CAF50"},pieChart:{title:"Ph\xE2n B\u1ED1 Ngu\u1ED3n \u0110\u0103ng K\xFD",colors:["#4CAF50","#2196F3","#FF9800","#9C27B0","#E91E63","#F44336","#00BCD4","#3F51B5"]},pieChartTitle:"Bi\u1EC3u \u0110\u1ED3 Tr\xF2n Ph\xE2n B\u1ED1",barChartTitle:"Bi\u1EC3u \u0110\u1ED3 C\u1ED9t Theo Th\u1EDDi Gian",labels:{dashboard:"B\u1EA3ng \u0110i\u1EC1u Khi\u1EC3n",analytics:"Ph\xE2n T\xEDch D\u1EEF Li\u1EC7u",totalCount:"T\u1ED5ng S\u1ED1 L\u01B0\u1EE3t",daysActive:"S\u1ED1 Ng\xE0y Ho\u1EA1t \u0110\u1ED9ng",dailyAverage:"Trung B\xECnh H\xE0ng Ng\xE0y",peakValue:"Gi\xE1 Tr\u1ECB \u0110\u1EC9nh",timeRange:"Kho\u1EA3ng Th\u1EDDi Gian",from:"T\u1EEB",to:"\u0110\u1EBFn",refreshData:"L\xE0m M\u1EDBi D\u1EEF Li\u1EC7u",exportData:"Xu\u1EA5t D\u1EEF Li\u1EC7u",loadingAnalytics:"\u0110ang T\u1EA3i Ph\xE2n T\xEDch...",errorLoadingData:"L\u1ED7i T\u1EA3i D\u1EEF Li\u1EC7u",noDataAvailable:"Kh\xF4ng C\xF3 D\u1EEF Li\u1EC7u",noDataMessage:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 hi\u1EC3n th\u1ECB trong kho\u1EA3ng th\u1EDDi gian n\xE0y",categoryDistribution:"Ph\xE2n B\u1ED1 Theo Danh M\u1EE5c",temporalAnalysis:"Ph\xE2n T\xEDch Theo Th\u1EDDi Gian",categoryBreakdown:"Chi Ti\u1EBFt Theo Danh M\u1EE5c",peakDay:"Ng\xE0y \u0110\u1EC9nh",timeAnalytics:"Ph\xE2n T\xEDch Th\u1EDDi Gian",activeDays:"Ng\xE0y C\xF3 Ho\u1EA1t \u0110\u1ED9ng",peakPerformanceDay:"Ng\xE0y Hi\u1EC7u Su\u1EA5t Cao Nh\u1EA5t",highestValue:"Gi\xE1 Tr\u1ECB Cao Nh\u1EA5t",dataInsights:"Th\xF4ng Tin Chi Ti\u1EBFt",detailedBreakdown:"Ph\xE2n T\xEDch Chi Ti\u1EBFt"}};updateChartData(){let t=[],e=[],a=new Date(this.startDay),s=new Date(this.endDay);for(;a<=s;){let m=`${a.getDate().toString().padStart(2,"0")}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear()}`;t.push(m),e.push(this.ThoigianDangky[m]||0),a.setDate(a.getDate()+1)}this.barChartOptions=d(c({},this.barChartOptions),{xaxis:d(c({},this.barChartOptions.xaxis),{categories:t})}),this.barChartSeries=[{name:"L\u01B0\u1EE3t \u0110\u0103ng K\xFD Th\xE0nh C\xF4ng",data:e}],this.updatePieChartData(),this.updateCustomChartData(),this.cdr.detectChanges()}updateCustomChartData(){this.customChartData={timeData:this.ThoigianDangky,categoryData:this.getPlatformData()}}getPlatformData(){return this.ListTracking().reduce((t,e)=>{let a=e.sharePlatform||"Website";return t[a]=(t[a]||0)+1,t},{})}updatePieChartData(){let t=this.ListTracking().reduce((h,j)=>{let C=j.sharePlatform||"Website";return h[C]?h[C]++:h[C]=1,h},{}),e=Object.keys(t),a=Object.values(t),s={Website:"#4CAF50",TikTok:"#2196F3",Facebook:"#FF9800",Email:"#9C27B0",Instagram:"#E91E63",YouTube:"#F44336",Twitter:"#00BCD4",LinkedIn:"#3F51B5"},m=e.map(h=>s[h]||"#9E9E9E");this.pieChartSeries=a,this.pieChartOptions=d(c({},this.pieChartOptions),{labels:e,colors:m})}_TrackingService=u(U);_UserService=u(P);profile=this._UserService.profile;ListTracking=this._TrackingService.ListTracking;Tongdangky=0;ThoigianDangky={};constructor(){v(()=>f(this,null,function*(){try{yield this._UserService.getProfile(),yield this._TrackingService.getTrackingBy({refCode:this.profile().phone,eventType:"register",pageType:"DangkyHV"}),this.Tongdangky=this.ListTracking().length,this.ThoigianDangky=this.ListTracking().reduce((t,e)=>{let a=new Date(e.createdAt),s=`${a.getDate().toString().padStart(2,"0")}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear()}`;return t[s]?t[s]++:t[s]=1,t},{}),setTimeout(()=>{this.updateChartData()},100)}catch(t){console.error("Error loading data:",t)}}))}ngOnInit(){this.updateChartData()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=y({type:l,selectors:[["app-luotdangky"]],decls:27,vars:5,consts:[[1,"container","mx-auto","bg-gray-100"],[1,"flex","flex-row","space-x-2","mb-6","items-center"],["mat-icon-button","","color","primary",3,"routerLink"],[1,"flex","flex-col"],[1,"text-xl","font-bold","text-gray-800"],[1,"mb-6"],[3,"chartData","config"],[1,"p-6","rounded-lg","shadow-md","bg-white"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"w-full"],[1,"bg-gray-200"],[1,"p-3","text-gray-700"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],[1,"p-3"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"header",1)(2,"button",2)(3,"mat-icon"),r(4,"arrow_back"),n()(),i(5,"div",3)(6,"span",4),r(7,"B\u1EA3ng \u0110i\u1EC1u Khi\u1EC3n L\u01B0\u1EE3t \u0110\u0103ng K\xFD Affiliate"),n()()(),i(8,"div",5),T(9,"app-customchart",6),n(),i(10,"div",7)(11,"div",8),r(12," Chi\u1EBFn D\u1ECBch H\xE0ng \u0110\u1EA7u "),n(),i(13,"div")(14,"table",9)(15,"thead")(16,"tr",10)(17,"th",11),r(18,"T\xEAn Chi\u1EBFn D\u1ECBch"),n(),i(19,"th",11),r(20,"Li\xEAn K\u1EBFt"),n(),i(21,"th",11),r(22,"N\u1EC1n T\u1EA3ng"),n(),i(23,"th",11),r(24,"Ng\xE0y T\u1EA1o"),n()()(),i(25,"tbody"),D(26,Y,10,7,"tr",12),n()()()()()),e&2&&(o(2),p("routerLink",b(4,V)),o(7),p("chartData",a.customChartData)("config",a.customChartConfig),o(17),p("ngForOf",a.ListTracking()))},dependencies:[N,I,O,_,$,G,H,K,w,A,B,M,F,x,L,R],encapsulation:2})};export{W as LuotdangkyComponent};
