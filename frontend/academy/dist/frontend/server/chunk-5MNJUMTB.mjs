import './polyfills.server.mjs';
import{a as ce}from"./chunk-B5UEGXRI.mjs";import"./chunk-RWESV22F.mjs";import"./chunk-QKK7RZVS.mjs";import{a as se}from"./chunk-OQZFN63E.mjs";import"./chunk-NENH4MZD.mjs";import{a as j}from"./chunk-TZLFYBVG.mjs";import"./chunk-ZAM3C5YA.mjs";import"./chunk-CHLRJVWI.mjs";import"./chunk-73IBRO6I.mjs";import{a as ae,b as le}from"./chunk-4LCPYIRB.mjs";import"./chunk-5AWOMC6M.mjs";import{f as Z}from"./chunk-3PCOSUY2.mjs";import"./chunk-MFFBCWXC.mjs";import"./chunk-LXHWSM2U.mjs";import"./chunk-MGIVCIKU.mjs";import{a as K,b as G,c as O,d as X}from"./chunk-72MGHMFH.mjs";import{b as oe,c as T}from"./chunk-PDY6LHRJ.mjs";import"./chunk-KZN7HFRP.mjs";import{b as re}from"./chunk-F77F73SG.mjs";import"./chunk-O4BSGNEU.mjs";import"./chunk-CREX4RSV.mjs";import"./chunk-WZNDKZHB.mjs";import"./chunk-CE7F7ZUS.mjs";import"./chunk-KANEWG3T.mjs";import{b as N}from"./chunk-OYOLCUGW.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-UT6WSS2B.mjs";import"./chunk-OSV7DELE.mjs";import"./chunk-UFHS5PN3.mjs";import{a as A,d as P,f as W}from"./chunk-D4SJLRKS.mjs";import"./chunk-VGSRRFBQ.mjs";import{b as q,g as J,j as Q,n as Y,p as $,u as ee,v as te,w as ie,x as ne}from"./chunk-IL5R62HS.mjs";import"./chunk-3ETK224L.mjs";import"./chunk-BLHJEYOM.mjs";import{a as H,b as z}from"./chunk-LIPAFHYL.mjs";import"./chunk-CKEJ5ATN.mjs";import"./chunk-E2L6ETFL.mjs";import"./chunk-YFX35EHH.mjs";import{a as L,d as B}from"./chunk-MLUWLQRJ.mjs";import{m as I,p as R}from"./chunk-ZQ7MT7W7.mjs";import{$b as o,Ac as C,Bc as v,Cc as y,Eb as D,Ja as w,Qb as _,Wb as E,Yb as U,Zb as S,_b as r,bc as b,cc as M,ec as h,gd as F,ia as g,ic as d,jc as p,mb as c,ra as u,sa as m,uc as k,vc as l,wc as x,yb as V}from"./chunk-NGU56566.mjs";import"./chunk-KB5IWD3E.mjs";import{j as f}from"./chunk-RIAI3ORJ.mjs";function me(a,e){if(a&1){let t=h();r(0,"button",3),d("click",function(){u(t);let n=p();return m(n.handleUserAction())}),r(1,"mat-icon"),l(2,"save"),o()()}}function de(a,e){if(a&1){let t=h();r(0,"button",3),d("click",function(){u(t);let n=p();return m(n.toggleEdit())}),r(1,"mat-icon"),l(2,"edit"),o()()}}function pe(a,e){if(a&1){let t=h();b(0),r(1,"div",10)(2,"div",11),l(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),r(4,"div",12)(5,"button",13),d("click",function(){u(t);let n=p();return m(n.DeleteData())}),l(6,"\u0110\u1ED3ng \xDD"),o(),r(7,"button",14),d("click",function(){u(t);let n=p();return m(n.toggleDelete())}),l(8,"Hu\u1EF7 B\u1ECF"),o()()(),M()}}function _e(a,e){if(a&1){let t=h();r(0,"div",21)(1,"div",4),l(2),o(),r(3,"mat-icon",30),d("click",function(){let n=u(t).$implicit,s=p(2);return m(s.handleRemoveRole(n))}),l(4,"close"),o()()}if(a&2){let t=e.$implicit;c(2),x(t==null?null:t.name)}}function fe(a,e){if(a&1){let t=h();r(0,"button",31),d("click",function(){let n=u(t).$implicit,s=p(2);return m(s.handleAddRole(n))}),l(1),o()}if(a&2){let t=e.$implicit;c(),x(t.name)}}function ge(a,e){if(a&1){let t=h();b(0),r(1,"div",15)(2,"mat-form-field",16)(3,"mat-label"),l(4,"Email"),o(),r(5,"input",17),y("ngModelChange",function(n){u(t);let s=p();return v(s.DetailUser().email,n)||(s.DetailUser().email=n),m(n)}),o()(),r(6,"mat-form-field",16)(7,"mat-label"),l(8,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),o(),r(9,"input",18),y("ngModelChange",function(n){u(t);let s=p();return v(s.DetailUser().SDT,n)||(s.DetailUser().SDT=n),m(n)}),o()(),r(10,"div",19)(11,"button",20,0),l(13," Th\xEAm Nh\xF3m "),o(),r(14,"div",5),U(15,_e,5,1,"div",21,E),o()(),r(17,"mat-menu",null,1)(19,"div",22),d("click",function(n){return u(t),m(n.stopPropagation())}),r(20,"div",23)(21,"input",24),d("keyup",function(n){u(t);let s=p();return m(s.doFilterHederColumn(n))}),o(),r(22,"div",25)(23,"span",26),l(24,"search"),o()()(),r(25,"div",27),U(26,fe,2,1,"button",28,E),o(),r(28,"div",29)(29,"button",14),d("click",function(){u(t);let n=k(12);return m(n.closeMenu())}),l(30,"\u0110\xF3ng"),o()()()()(),M()}if(a&2){let t=k(18),i=p();c(5),C("ngModel",i.DetailUser().email),_("disabled",!i.isEdit()),c(4),C("ngModel",i.DetailUser().SDT),_("disabled",!i.isEdit()),c(2),_("disabled",!i.isEdit())("matMenuTriggerFor",t),c(4),S(i.DetailUser().roles),c(11),S(i.ListRole)}}var ue=class a{_ListuserComponent=g(ce);_UserService=g(j);_RoleService=g(se);_route=g(L);_router=g(B);_snackBar=g(N);constructor(){this._route.paramMap.subscribe(e=>{let t=e.get("id");this._UserService.setUserId(t)}),F(()=>f(this,null,function*(){let e=this._UserService.userId();e||(this._router.navigate(["/admin/user"]),this._ListuserComponent.drawer.close()),e==="0"?(this.DetailUser.set({title:T(8,!1),slug:T(8,!1)}),this._ListuserComponent.drawer.open(),this.isEdit.update(t=>!t),this._router.navigate(["/admin/user","0"])):(yield this._UserService.getUserBy({id:e}),this._ListuserComponent.drawer.open(),this._router.navigate(["/admin/user",e]))}))}DetailUser=this._UserService.DetailUser;isEdit=w(!1);isDelete=w(!1);userId=this._UserService.userId;ListRole=[];ngOnInit(){return f(this,null,function*(){yield this._RoleService.getAllRole(),this.ListRole=this._RoleService.ListRole(),console.log(this.ListRole)})}handleUserAction(){return f(this,null,function*(){this.userId()==="0"?yield this.createUser():yield this.updateUser()})}createUser(){return f(this,null,function*(){try{yield this._UserService.CreateUser(this.DetailUser()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi t\u1EA1o user:",e)}})}updateUser(){return f(this,null,function*(){try{yield this._UserService.updateUser(this.DetailUser()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt user:",e)}})}DeleteData(){return f(this,null,function*(){try{yield this._UserService.DeleteUser(this.DetailUser()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/user"])}catch(e){console.error("L\u1ED7i khi x\xF3a user:",e)}})}goBack(){this._router.navigate(["/admin/user"]),this._ListuserComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.DetailUser.update(e=>(e.slug=oe(e.title),e))}doFilterHederColumn(e){this.ListRole=this._RoleService.ListRole().filter(t=>t.name.toLowerCase().includes(e.target.value.toLowerCase()))}handleAddRole(e){console.log(e),this.ListRole.push(e)}handleRemoveRole(e){this.ListRole=this.ListRole.filter(t=>t.id!==e.id)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=V({type:a,selectors:[["app-detailuser"]],decls:14,vars:8,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],[1,"w-full","flex","flex-wrap","gap-2","space-x-2"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-row","space-x-2","items-center","p-2","rounded-lg","bg-gray-100"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["mat-menu-item",""],[1,"flex","flex-row","space-x-2","items-center","justify-end"],["color","warn",3,"click"],["mat-menu-item","",3,"click"]],template:function(t,i){if(t&1&&(r(0,"div",2)(1,"button",3),d("click",function(){return i.goBack()}),r(2,"mat-icon"),l(3,"arrow_back"),o()(),r(4,"div",4),l(5),o(),r(6,"div",5)(7,"mat-slide-toggle",6),y("ngModelChange",function(s){return v(i.DetailUser().isActive,s)||(i.DetailUser().isActive=s),s}),l(8),o(),D(9,me,3,0,"button",7)(10,de,3,0,"button",7),o()(),r(11,"div",8),D(12,pe,9,0,"ng-container",9)(13,ge,31,6,"ng-container",9),o()),t&2){let n;c(5),x(((n=i.DetailUser())==null?null:n.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),c(2),C("ngModel",i.DetailUser().isActive),_("disabled",!i.isEdit()),c(),x(i.DetailUser().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),c(),_("ngIf",i.isEdit()),c(),_("ngIf",!i.isEdit()),c(2),_("ngIf",i.isDelete()),c(),_("ngIf",!i.isDelete())}},dependencies:[te,ee,$,ne,ie,Y,q,J,Q,z,H,W,P,A,re,Z,R,I,le,ae,X,G,K,O],encapsulation:2})};export{ue as DetailUserComponent};
