import './polyfills.server.mjs';
import{a as Z}from"./chunk-HTUNAWUT.mjs";import{a as I,b as B,c as L}from"./chunk-AW5IYT44.mjs";import{e as G}from"./chunk-TI6ERKHH.mjs";import{a as D}from"./chunk-6DGEQEFJ.mjs";import"./chunk-BHSUXMGO.mjs";import"./chunk-XCXZYEU6.mjs";import"./chunk-CHLRJVWI.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-CREX4RSV.mjs";import"./chunk-WZNDKZHB.mjs";import"./chunk-KANEWG3T.mjs";import{b as A}from"./chunk-4ZY7XLUK.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-MDO63YZF.mjs";import{a as v,c as T,e as S}from"./chunk-OYHSU2NM.mjs";import"./chunk-5BXDRUDO.mjs";import{b as R,c as V}from"./chunk-Y2Z7EBEU.mjs";import{c as N,g as F,j as x,n as O,p as U,r as q,t as H,w as j,x as K}from"./chunk-AH2CQP72.mjs";import"./chunk-353LMPLK.mjs";import{a as W,b as P}from"./chunk-2PVOGBGU.mjs";import"./chunk-QBAGT7WN.mjs";import"./chunk-6DC6V4B6.mjs";import"./chunk-PIRV6YUG.mjs";import{q as w}from"./chunk-JAOTUPL5.mjs";import{Bb as M,Cb as b,Ec as d,Fc as s,Gc as m,La as g,Tb as k,bc as n,cc as i,ea as E,ja as h,lc as c,ob as l,zc as o}from"./chunk-Y26U273F.mjs";import"./chunk-KB5IWD3E.mjs";import{a as f,d as _,j as C}from"./chunk-RIAI3ORJ.mjs";var Y=(()=>{class u{static \u0275fac=function(t){return new(t||u)};static \u0275mod=b({type:u});static \u0275inj=E({})}return u})();var X=class u{_UserService=h(D);_TrackingService=h(Z);_snackbar=h(A);profile=g({payment:{bankName:"",bankAccount:"",bankAccountName:""}});passwords=g({oldPassword:"",newPassword:"",confirmPassword:""});isShowPassword=!1;inviteLink="";Views=g(0);constructor(){}ngOnInit(){return C(this,null,function*(){yield this._UserService.getProfile().then(a=>{let p=f(f({},this.profile()),a);console.log(p),this.profile.set(p);let t=window.location.origin;this.inviteLink=`${t}/dangkyctv?ref=${this.profile().phone}`}),yield this._TrackingService.getTrackingBy({eventType:"page_view",refCode:this.profile().inviteCode,isCount:!0}).then(a=>{this.Views.set(a.count)})})}getCoppyLink(a){navigator.clipboard.writeText(a).then(()=>{this._snackbar.open("\u0110\xE3 Coppy","Close",{duration:2e3,panelClass:["snackbar-success"]})}).catch(p=>{this._snackbar.open("Coppy L\u1ED7i","Close",{duration:2e3,panelClass:["snackbar-error"]})})}doUpdate(){this.profile.update(a=>{let y=a,{payment:p,referrals:t,referrerId:r,referrer:e}=y;return _(y,["payment","referrals","referrerId","referrer"])}),this._UserService.updateUser(this.profile()).then(a=>{a&&this._snackbar.open("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng","Close",{duration:2e3,panelClass:["snackbar-success"]})}).catch(a=>{this._snackbar.open("C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i","Close",{duration:2e3,panelClass:["snackbar-error"]})})}doUpdatePayment(){this._UserService.getProfile().then(a=>{console.log(a),this.profile.set(a)})}changePassword(){if(this.passwords().newPassword!==this.passwords().confirmPassword){this._snackbar.open("M\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp","Close",{duration:2e3,panelClass:["snackbar-error"]});return}}logout(){console.log("logout"),this._UserService.logout().then(a=>{a&&setTimeout(()=>{window.location.reload()},100)})}static \u0275fac=function(p){return new(p||u)};static \u0275cmp=M({type:u,selectors:[["app-taikhoanctv"]],decls:80,vars:12,consts:[[1,"min-h-screen"],[1,"max-w-xl","mx-auto","px-4","py-8","space-y-3"],["animationDuration","0ms"],["label","Th\xF4ng Tin"],[1,"p-4"],[1,"mb-8","lg:p-8","p-2","bg-white","border","rounded-lg"],[1,"text-xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-500","mb-4"],["appearance","outline",1,"w-full","mb-4"],["matInput","","name","fullName","required","",3,"ngModelChange","ngModel"],["matInput","","name","phone","required","",3,"ngModelChange","ngModel"],["matInput","","name","email","required","",3,"ngModelChange","ngModel"],["matInput","","readonly","",3,"ngModelChange","ngModel","disabled"],["matSuffix","","mat-icon-button","","type","button","color","primary",3,"click"],[1,"flex","justify-end","gap-4"],["mat-raised-button","","color","primary",3,"click"],["label","M\u1EADt Kh\u1EA9u"],["matInput","","type","password","name","currentPassword","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","name","newPassword","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["label","T\xE0i Kho\u1EA3n"],["matInput","","name","accountNumber","required","",3,"ngModelChange","ngModel"],["matInput","","name","bankName","required","",3,"ngModelChange","ngModel"],["matInput","","name","accountHolder","required","",3,"ngModelChange","ngModel"],["matInput","","name","branch",3,"ngModelChange","ngModel"]],template:function(p,t){p&1&&(n(0,"div",0)(1,"div",1)(2,"mat-tab-group",2)(3,"mat-tab",3)(4,"div",4)(5,"div",5)(6,"div",6),o(7,"H\u1ED3 s\u01A1"),i(),n(8,"div",7),o(9,"C\u1EADp nh\u1EADt th\xF4ng tin c\xE1 nh\xE2n c\u1EE7a b\u1EA1n."),i(),n(10,"mat-form-field",8)(11,"mat-label"),o(12,"H\u1ECD t\xEAn"),i(),n(13,"input",9),m("ngModelChange",function(e){return s(t.profile().name,e)||(t.profile().name=e),e}),i()(),n(14,"mat-form-field",8)(15,"mat-label"),o(16,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),i(),n(17,"input",10),m("ngModelChange",function(e){return s(t.profile().phone,e)||(t.profile().phone=e),e}),i()(),n(18,"mat-form-field",8)(19,"mat-label"),o(20,"Email"),i(),n(21,"input",11),m("ngModelChange",function(e){return s(t.profile().email,e)||(t.profile().email=e),e}),i()(),n(22,"mat-form-field",8)(23,"mat-label"),o(24,"Affiliate Link"),i(),n(25,"input",12),m("ngModelChange",function(e){return s(t.inviteLink,e)||(t.inviteLink=e),e}),i(),n(26,"button",13),c("click",function(){return t.getCoppyLink(t.inviteLink)}),n(27,"mat-icon"),o(28,"content_copy"),i()()(),n(29,"div",14)(30,"button",15),c("click",function(){return t.doUpdate()}),o(31,"C\u1EADp Nh\u1EADt"),i()()()()(),n(32,"mat-tab",16)(33,"div",4)(34,"div",5)(35,"div",6),o(36,"M\u1EADt Kh\u1EA9u"),i(),n(37,"div",7),o(38,"C\u1EADp nh\u1EADt m\u1EADt kh\u1EA9u"),i(),n(39,"mat-form-field",8)(40,"mat-label"),o(41,"M\u1EADt kh\u1EA9u hi\u1EC7n t\u1EA1i"),i(),n(42,"input",17),m("ngModelChange",function(e){return s(t.passwords.current,e)||(t.passwords.current=e),e}),i()(),n(43,"mat-form-field",8)(44,"mat-label"),o(45,"M\u1EADt kh\u1EA9u m\u1EDBi"),i(),n(46,"input",18),m("ngModelChange",function(e){return s(t.passwords.new,e)||(t.passwords.new=e),e}),i()(),n(47,"mat-form-field",8)(48,"mat-label"),o(49,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi"),i(),n(50,"input",19),m("ngModelChange",function(e){return s(t.passwords.confirm,e)||(t.passwords.confirm=e),e}),i()(),n(51,"div",14)(52,"button",15),c("click",function(){return t.changePassword()}),o(53," \u0110\u1ED5i m\u1EADt kh\u1EA9u "),i()()()()(),n(54,"mat-tab",20)(55,"div",4)(56,"div",5)(57,"div",6),o(58,"Th\xF4ng tin thanh to\xE1n"),i(),n(59,"div",7),o(60,"C\u1EADp nh\u1EADt th\xF4ng tin thanh to\xE1n c\u1EE7a b\u1EA1n."),i(),n(61,"mat-form-field",8)(62,"mat-label"),o(63,"S\u1ED1 t\xE0i kho\u1EA3n"),i(),n(64,"input",21),m("ngModelChange",function(e){return s(t.profile().payment.accountNumber,e)||(t.profile().payment.accountNumber=e),e}),i()(),n(65,"mat-form-field",8)(66,"mat-label"),o(67,"T\xEAn ng\xE2n h\xE0ng"),i(),n(68,"input",22),m("ngModelChange",function(e){return s(t.profile().payment.bankName,e)||(t.profile().payment.bankName=e),e}),i()(),n(69,"mat-form-field",8)(70,"mat-label"),o(71,"T\xEAn ch\u1EE7 t\xE0i kho\u1EA3n"),i(),n(72,"input",23),m("ngModelChange",function(e){return s(t.profile().payment.accountHolder,e)||(t.profile().payment.accountHolder=e),e}),i()(),n(73,"mat-form-field",8)(74,"mat-label"),o(75,"Chi nh\xE1nh"),i(),n(76,"input",24),m("ngModelChange",function(e){return s(t.profile().payment.branch,e)||(t.profile().payment.branch=e),e}),i()(),n(77,"div",14)(78,"button",15),c("click",function(){return t.doUpdatePayment()}),o(79," C\u1EADp Nh\u1EADt "),i()()()()()()()()),p&2&&(l(13),d("ngModel",t.profile().name),l(4),d("ngModel",t.profile().phone),l(4),d("ngModel",t.profile().email),l(4),d("ngModel",t.inviteLink),k("disabled",!0),l(17),d("ngModel",t.passwords.current),l(4),d("ngModel",t.passwords.new),l(4),d("ngModel",t.passwords.confirm),l(14),d("ngModel",t.profile().payment.accountNumber),l(4),d("ngModel",t.profile().payment.bankName),l(4),d("ngModel",t.profile().payment.accountHolder),l(4),d("ngModel",t.profile().payment.branch))},dependencies:[w,S,T,v,P,W,Y,K,j,q,H,V,R,U,N,F,O,x,G,L,I,B],encapsulation:2})};export{X as TaikhoanctvComponent};
