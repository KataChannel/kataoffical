import './polyfills.server.mjs';
import{a as Ls,e as Ds}from"./chunk-LY6X5KOA.mjs";import{a as dr,b as Ns,c as Bs,f as pr}from"./chunk-OSV7DELE.mjs";import{d as Fs}from"./chunk-FLR3CK2U.mjs";import{f as Ts,p as ur,v as Rs,x as As}from"./chunk-7PBKLKQM.mjs";import{a as Os}from"./chunk-ZQ7MT7W7.mjs";import{$b as We,Ab as pt,Cb as Cs,Ea as ms,Eb as nr,Ha as _s,K as tr,Pa as gs,Pb as vs,Sb as xs,Va as ys,Vb as Es,Vc as Ss,Z as hs,_b as mt,ac as ws,ca as us,ec as ks,f as fe,fa as rr,ia as I,ic as ir,jc as or,mb as je,o as fs,ob as bs,pc as ar,qc as cr,ra as ds,rc as lr,sa as ps,vc as fr,xa as dt,xc as hr,yb as sr}from"./chunk-NGU56566.mjs";import{a as T,b as re,c as C,e as E,f as Xi,g as P}from"./chunk-RIAI3ORJ.mjs";var qs=E((vl,Us)=>{"use strict";var we=C("fs"),Ms=C("url"),oo=C("child_process").spawn;Us.exports=gr;gr.XMLHttpRequest=gr;function gr(r){"use strict";r=r||{};var t=this,e=C("http"),s=C("https"),n,i,o={},l=!1,f={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u=Object.assign({},f),a=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],c=["TRACE","TRACK","CONNECT"],h=!1,g=!1,y=!1,d={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var m=function(p){return l||p&&a.indexOf(p.toLowerCase())===-1},v=function(p){return p&&c.indexOf(p)===-1};this.open=function(p,_,A,k,D){if(this.abort(),g=!1,y=!1,!v(p))throw new Error("SecurityError: Request method not allowed");o={method:p,url:_.toString(),async:typeof A!="boolean"?!0:A,user:k||null,password:D||null},x(this.OPENED)},this.setDisableHeaderCheck=function(p){l=p},this.setRequestHeader=function(p,_){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!m(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(h)throw new Error("INVALID_STATE_ERR: send flag is true");return u[p]=_,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&i.headers[p.toLowerCase()]&&!g?i.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||g)return"";var p="";for(var _ in i.headers)_!=="set-cookie"&&_!=="set-cookie2"&&(p+=_+": "+i.headers[_]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&u[p]?u[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(h)throw new Error("INVALID_STATE_ERR: send has already been called");var _=!1,A=!1,k=Ms.parse(o.url),D;switch(k.protocol){case"https:":_=!0;case"http:":D=k.hostname;break;case"file:":A=!0;break;case void 0:case"":D="localhost";break;default:throw new Error("Protocol not supported.")}if(A){if(o.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)we.readFile(unescape(k.pathname),function(j,me){j?t.handleError(j,j.errno||-1):(t.status=200,t.responseText=me.toString("utf8"),t.response=me,x(t.DONE))});else try{this.response=we.readFileSync(unescape(k.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,x(t.DONE)}catch(j){this.handleError(j,j.errno||-1)}return}var q=k.port||(_?443:80),K=k.pathname+(k.search?k.search:"");if(u.Host=D,_&&q===443||q===80||(u.Host+=":"+k.port),o.user){typeof o.password>"u"&&(o.password="");var Kt=new Buffer(o.user+":"+o.password);u.Authorization="Basic "+Kt.toString("base64")}if(o.method==="GET"||o.method==="HEAD")p=null;else if(p){u["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p);var Wi=Object.keys(u);Wi.some(function(j){return j.toLowerCase()==="content-type"})||(u["Content-Type"]="text/plain;charset=UTF-8")}else o.method==="POST"&&(u["Content-Length"]=0);var Vi=r.agent||!1,ee={host:D,port:q,path:K,method:o.method,headers:u,agent:Vi};if(_&&(ee.pfx=r.pfx,ee.key=r.key,ee.passphrase=r.passphrase,ee.cert=r.cert,ee.ca=r.ca,ee.ciphers=r.ciphers,ee.rejectUnauthorized=r.rejectUnauthorized!==!1),g=!1,o.async){var Jt=_?s.request:e.request;h=!0,t.dispatchEvent("readystatechange");var Qt=function(j){if(i=j,i.statusCode===302||i.statusCode===303||i.statusCode===307){o.url=i.headers.location;var me=Ms.parse(o.url);D=me.hostname;var le={hostname:me.hostname,port:me.port,path:me.path,method:i.statusCode===303?"GET":o.method,headers:u};_&&(le.pfx=r.pfx,le.key=r.key,le.passphrase=r.passphrase,le.cert=r.cert,le.ca=r.ca,le.ciphers=r.ciphers,le.rejectUnauthorized=r.rejectUnauthorized!==!1),n=Jt(le,Qt).on("error",Zt),n.end();return}x(t.HEADERS_RECEIVED),t.status=i.statusCode,i.on("data",function(ut){if(ut){var zi=Buffer.from(ut);t.response=Buffer.concat([t.response,zi])}h&&x(t.LOADING)}),i.on("end",function(){h&&(h=!1,x(t.DONE),t.responseText=t.response.toString("utf8"))}),i.on("error",function(ut){t.handleError(ut)})},Zt=function(j){if(n.reusedSocket&&j.code==="ECONNRESET")return Jt(ee,Qt).on("error",Zt);t.handleError(j)};n=Jt(ee,Qt).on("error",Zt),r.autoUnref&&n.on("socket",j=>{j.unref()}),p&&n.write(p),n.end(),t.dispatchEvent("loadstart")}else{var Ue=".node-xmlhttprequest-content-"+process.pid,qe=".node-xmlhttprequest-sync-"+process.pid;we.writeFileSync(qe,"","utf8");for(var $i="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(_?"s":"")+".request;var options = "+JSON.stringify(ee)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Ue+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+qe+"');});response.on('error', function(error) {fs.writeFileSync('"+Ue+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+qe+"');});}).on('error', function(error) {fs.writeFileSync('"+Ue+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+qe+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Hi=oo(process.argv[0],["-e",$i]),Hc;we.existsSync(qe););if(t.responseText=we.readFileSync(Ue,"utf8"),Hi.stdin.end(),we.unlinkSync(Ue),t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Gi=JSON.parse(t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));t.handleError(Gi,503)}else{t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var er=JSON.parse(t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));i={statusCode:t.status,headers:er.data.headers},t.responseText=er.data.text,t.response=Buffer.from(er.data.data,"base64"),x(t.DONE,!0)}}},this.handleError=function(p,_){this.status=_||0,this.statusText=p,this.responseText=p.stack,g=!0,x(this.DONE)},this.abort=function(){n&&(n.abort(),n=null),u=Object.assign({},f),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),g=y=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||h)&&this.readyState!==this.DONE&&(h=!1,x(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,_){p in d||(d[p]=[]),d[p].push(_)},this.removeEventListener=function(p,_){p in d&&(d[p]=d[p].filter(function(A){return A!==_}))},this.dispatchEvent=function(p){if(typeof t["on"+p]=="function"&&(this.readyState===this.DONE&&o.async?setTimeout(function(){t["on"+p]()},0):t["on"+p]()),p in d)for(let _=0,A=d[p].length;_<A;_++)this.readyState===this.DONE?setTimeout(function(){d[p][_].call(t)},0):d[p][_].call(t)};var x=function(p){if(!(t.readyState===p||t.readyState===t.UNSENT&&y)&&(t.readyState=p,(o.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE)){let _;y?_="abort":g?_="error":_="load",t.dispatchEvent(_),t.dispatchEvent("loadend")}}}});var vt=E((Pl,en)=>{"use strict";var ke=1e3,Se=ke*60,Oe=Se*60,_e=Oe*24,po=_e*7,mo=_e*365.25;en.exports=function(r,t){t=t||{};var e=typeof r;if(e==="string"&&r.length>0)return _o(r);if(e==="number"&&isFinite(r))return t.long?yo(r):go(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function _o(r){if(r=String(r),!(r.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(t){var e=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return e*mo;case"weeks":case"week":case"w":return e*po;case"days":case"day":case"d":return e*_e;case"hours":case"hour":case"hrs":case"hr":case"h":return e*Oe;case"minutes":case"minute":case"mins":case"min":case"m":return e*Se;case"seconds":case"second":case"secs":case"sec":case"s":return e*ke;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function go(r){var t=Math.abs(r);return t>=_e?Math.round(r/_e)+"d":t>=Oe?Math.round(r/Oe)+"h":t>=Se?Math.round(r/Se)+"m":t>=ke?Math.round(r/ke)+"s":r+"ms"}function yo(r){var t=Math.abs(r);return t>=_e?Ct(r,t,_e,"day"):t>=Oe?Ct(r,t,Oe,"hour"):t>=Se?Ct(r,t,Se,"minute"):t>=ke?Ct(r,t,ke,"second"):r+" ms"}function Ct(r,t,e,s){var n=t>=e*1.5;return Math.round(r/e)+" "+s+(n?"s":"")}});var xr=E((Il,tn)=>{"use strict";function bo(r){e.debug=e,e.default=e,e.coerce=f,e.disable=i,e.enable=n,e.enabled=o,e.humanize=vt(),e.destroy=u,Object.keys(r).forEach(a=>{e[a]=r[a]}),e.names=[],e.skips=[],e.formatters={};function t(a){let c=0;for(let h=0;h<a.length;h++)c=(c<<5)-c+a.charCodeAt(h),c|=0;return e.colors[Math.abs(c)%e.colors.length]}e.selectColor=t;function e(a){let c,h=null,g,y;function d(...m){if(!d.enabled)return;let v=d,x=Number(new Date),p=x-(c||x);v.diff=p,v.prev=c,v.curr=x,c=x,m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let _=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(k,D)=>{if(k==="%%")return"%";_++;let q=e.formatters[D];if(typeof q=="function"){let K=m[_];k=q.call(v,K),m.splice(_,1),_--}return k}),e.formatArgs.call(v,m),(v.log||e.log).apply(v,m)}return d.namespace=a,d.useColors=e.useColors(),d.color=e.selectColor(a),d.extend=s,d.destroy=e.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==e.namespaces&&(g=e.namespaces,y=e.enabled(a)),y),set:m=>{h=m}}),typeof e.init=="function"&&e.init(d),d}function s(a,c){let h=e(this.namespace+(typeof c>"u"?":":c)+a);return h.log=this.log,h}function n(a){e.save(a),e.namespaces=a,e.names=[],e.skips=[];let c,h=(typeof a=="string"?a:"").split(/[\s,]+/),g=h.length;for(c=0;c<g;c++)h[c]&&(a=h[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.slice(1)+"$")):e.names.push(new RegExp("^"+a+"$")))}function i(){let a=[...e.names.map(l),...e.skips.map(l).map(c=>"-"+c)].join(",");return e.enable(""),a}function o(a){if(a[a.length-1]==="*")return!0;let c,h;for(c=0,h=e.skips.length;c<h;c++)if(e.skips[c].test(a))return!1;for(c=0,h=e.names.length;c<h;c++)if(e.names[c].test(a))return!0;return!1}function l(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function f(a){return a instanceof Error?a.stack||a.message:a}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}tn.exports=bo});var rn=E((V,xt)=>{"use strict";V.formatArgs=vo;V.save=xo;V.load=Eo;V.useColors=Co;V.storage=wo();V.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();V.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Co(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vo(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+xt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,s=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(s=e))}),r.splice(s,0,t)}V.log=console.debug||console.log||(()=>{});function xo(r){try{r?V.storage.setItem("debug",r):V.storage.removeItem("debug")}catch{}}function Eo(){let r;try{r=V.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function wo(){try{return localStorage}catch{}}xt.exports=xr()(V);var{formatters:ko}=xt.exports;ko.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var nn=E((Ml,sn)=>{"use strict";sn.exports=(r,t=process.argv)=>{let e=r.startsWith("-")?"":r.length===1?"-":"--",s=t.indexOf(e+r),n=t.indexOf("--");return s!==-1&&(n===-1||s<n)}});var Et=E((Ul,an)=>{"use strict";var So=C("os"),on=C("tty"),X=nn(),{env:F}=process,he;X("no-color")||X("no-colors")||X("color=false")||X("color=never")?he=0:(X("color")||X("colors")||X("color=true")||X("color=always"))&&(he=1);"FORCE_COLOR"in F&&(F.FORCE_COLOR==="true"?he=1:F.FORCE_COLOR==="false"?he=0:he=F.FORCE_COLOR.length===0?1:Math.min(parseInt(F.FORCE_COLOR,10),3));function Er(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function wr(r,t){if(he===0)return 0;if(X("color=16m")||X("color=full")||X("color=truecolor"))return 3;if(X("color=256"))return 2;if(r&&!t&&he===void 0)return 0;let e=he||0;if(F.TERM==="dumb")return e;if(process.platform==="win32"){let s=So.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in F)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in F)||F.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in F)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(F.TEAMCITY_VERSION)?1:0;if(F.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in F){let s=parseInt((F.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(F.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(F.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(F.TERM)||"COLORTERM"in F?1:e}function Oo(r){let t=wr(r,r&&r.isTTY);return Er(t)}an.exports={supportsColor:Oo,stdout:Er(wr(!0,on.isatty(1))),stderr:Er(wr(!0,on.isatty(2)))}});var ln=E((N,kt)=>{"use strict";var To=C("tty"),wt=C("util");N.init=Do;N.log=No;N.formatArgs=Ao;N.save=Bo;N.load=Lo;N.useColors=Ro;N.destroy=wt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");N.colors=[6,2,3,4,5,1];try{let r=Et();r&&(r.stderr||r).level>=2&&(N.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}N.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),r[e]=s,r},{});function Ro(){return"colors"in N.inspectOpts?!!N.inspectOpts.colors:To.isatty(process.stderr.fd)}function Ao(r){let{namespace:t,useColors:e}=this;if(e){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} \x1B[0m`;r[0]=i+r[0].split(`
`).join(`
`+i),r.push(n+"m+"+kt.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Fo()+t+" "+r[0]}function Fo(){return N.inspectOpts.hideDate?"":new Date().toISOString()+" "}function No(...r){return process.stderr.write(wt.formatWithOptions(N.inspectOpts,...r)+`
`)}function Bo(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Lo(){return process.env.DEBUG}function Do(r){r.inspectOpts={};let t=Object.keys(N.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=N.inspectOpts[t[e]]}kt.exports=xr()(N);var{formatters:cn}=kt.exports;cn.o=function(r){return this.inspectOpts.colors=this.useColors,wt.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};cn.O=function(r){return this.inspectOpts.colors=this.useColors,wt.inspect(r,this.inspectOpts)}});var ge=E((ql,kr)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kr.exports=rn():kr.exports=ln()});var bn=E((af,yn)=>{"use strict";var{Duplex:qo}=C("stream");function _n(r){r.emit("close")}function jo(){!this.destroyed&&this._writableState.finished&&this.destroy()}function gn(r){this.removeListener("error",gn),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function Wo(r,t){let e=!0,s=new qo(re(T({},t),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return r.on("message",function(i,o){let l=!o&&s._readableState.objectMode?i.toString():i;s.push(l)||r.pause()}),r.once("error",function(i){s.destroyed||(e=!1,s.destroy(i))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(n,i){if(r.readyState===r.CLOSED){i(n),process.nextTick(_n,s);return}let o=!1;r.once("error",function(f){o=!0,i(f)}),r.once("close",function(){o||i(n),process.nextTick(_n,s)}),e&&r.terminate()},s._final=function(n){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(n)});return}r._socket!==null&&(r._socket._writableState.finished?(n(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){n()}),r.close()))},s._read=function(){r.isPaused&&r.resume()},s._write=function(n,i,o){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(n,i,o)});return}r.send(n,o)},s.on("end",jo),s.on("error",gn),s}yn.exports=Wo});var ue=E((lf,Cn)=>{"use strict";Cn.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ke=E((ff,Tt)=>{"use strict";var{EMPTY_BUFFER:Vo}=ue(),Tr=Buffer[Symbol.species];function $o(r,t){if(r.length===0)return Vo;if(r.length===1)return r[0];let e=Buffer.allocUnsafe(t),s=0;for(let n=0;n<r.length;n++){let i=r[n];e.set(i,s),s+=i.length}return s<t?new Tr(e.buffer,e.byteOffset,s):e}function vn(r,t,e,s,n){for(let i=0;i<n;i++)e[s+i]=r[i]^t[i&3]}function xn(r,t){for(let e=0;e<r.length;e++)r[e]^=t[e&3]}function Ho(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function Rr(r){if(Rr.readOnly=!0,Buffer.isBuffer(r))return r;let t;return r instanceof ArrayBuffer?t=new Tr(r):ArrayBuffer.isView(r)?t=new Tr(r.buffer,r.byteOffset,r.byteLength):(t=Buffer.from(r),Rr.readOnly=!1),t}Tt.exports={concat:$o,mask:vn,toArrayBuffer:Ho,toBuffer:Rr,unmask:xn};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=C("bufferutil");Tt.exports.mask=function(t,e,s,n,i){i<48?vn(t,e,s,n,i):r.mask(t,e,s,n,i)},Tt.exports.unmask=function(t,e){t.length<32?xn(t,e):r.unmask(t,e)}}catch{}});var kn=E((hf,wn)=>{"use strict";var En=Symbol("kDone"),Ar=Symbol("kRun"),Fr=class{constructor(t){this[En]=()=>{this.pending--,this[Ar]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[Ar]()}[Ar](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[En])}}};wn.exports=Fr});var Ze=E((uf,Rn)=>{"use strict";var Je=C("zlib"),Sn=Ke(),Go=kn(),{kStatusCode:On}=ue(),zo=Buffer[Symbol.species],Xo=Buffer.from([0,0,255,255]),Ft=Symbol("permessage-deflate"),oe=Symbol("total-length"),Qe=Symbol("callback"),de=Symbol("buffers"),At=Symbol("error"),Rt,Nr=class{constructor(t,e,s){if(this._maxPayload=s|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!Rt){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Rt=new Go(n)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[Qe];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let e=this._options,s=t.find(n=>!(e.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(e.serverMaxWindowBits===!1||typeof e.serverMaxWindowBits=="number"&&e.serverMaxWindowBits>n.server_max_window_bits)||typeof e.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(s.server_no_context_takeover=!0),e.clientNoContextTakeover&&(s.client_no_context_takeover=!0),typeof e.serverMaxWindowBits=="number"&&(s.server_max_window_bits=e.serverMaxWindowBits),typeof e.clientMaxWindowBits=="number"?s.client_max_window_bits=e.clientMaxWindowBits:(s.client_max_window_bits===!0||e.clientMaxWindowBits===!1)&&delete s.client_max_window_bits,s}acceptAsClient(t){let e=t[0];if(this._options.clientNoContextTakeover===!1&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!e.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(e.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return e}normalizeParams(t){return t.forEach(e=>{Object.keys(e).forEach(s=>{let n=e[s];if(n.length>1)throw new Error(`Parameter "${s}" must have only a single value`);if(n=n[0],s==="client_max_window_bits"){if(n!==!0){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else if(s==="server_max_window_bits"){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(s==="client_no_context_takeover"||s==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else throw new Error(`Unknown parameter "${s}"`);e[s]=n})}),t}decompress(t,e,s){Rt.add(n=>{this._decompress(t,e,(i,o)=>{n(),s(i,o)})})}compress(t,e,s){Rt.add(n=>{this._compress(t,e,(i,o)=>{n(),s(i,o)})})}_decompress(t,e,s){let n=this._isServer?"client":"server";if(!this._inflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?Je.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=Je.createInflateRaw(re(T({},this._options.zlibInflateOptions),{windowBits:o})),this._inflate[Ft]=this,this._inflate[oe]=0,this._inflate[de]=[],this._inflate.on("error",Ko),this._inflate.on("data",Tn)}this._inflate[Qe]=s,this._inflate.write(t),e&&this._inflate.write(Xo),this._inflate.flush(()=>{let i=this._inflate[At];if(i){this._inflate.close(),this._inflate=null,s(i);return}let o=Sn.concat(this._inflate[de],this._inflate[oe]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[oe]=0,this._inflate[de]=[],e&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),s(null,o)})}_compress(t,e,s){let n=this._isServer?"server":"client";if(!this._deflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?Je.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=Je.createDeflateRaw(re(T({},this._options.zlibDeflateOptions),{windowBits:o})),this._deflate[oe]=0,this._deflate[de]=[],this._deflate.on("data",Yo)}this._deflate[Qe]=s,this._deflate.write(t),this._deflate.flush(Je.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=Sn.concat(this._deflate[de],this._deflate[oe]);e&&(i=new zo(i.buffer,i.byteOffset,i.length-4)),this._deflate[Qe]=null,this._deflate[oe]=0,this._deflate[de]=[],e&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),s(null,i)})}};Rn.exports=Nr;function Yo(r){this[de].push(r),this[oe]+=r.length}function Tn(r){if(this[oe]+=r.length,this[Ft]._maxPayload<1||this[oe]<=this[Ft]._maxPayload){this[de].push(r);return}this[At]=new RangeError("Max payload size exceeded"),this[At].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[At][On]=1009,this.removeListener("data",Tn),this.reset()}function Ko(r){this[Ft]._inflate=null,r[On]=1007,this[Qe](r)}});var et=E((pf,Nt)=>{"use strict";var{isUtf8:An}=C("buffer"),Jo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Qo(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function Br(r){let t=r.length,e=0;for(;e<t;)if((r[e]&128)===0)e++;else if((r[e]&224)===192){if(e+1===t||(r[e+1]&192)!==128||(r[e]&254)===192)return!1;e+=2}else if((r[e]&240)===224){if(e+2>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||r[e]===224&&(r[e+1]&224)===128||r[e]===237&&(r[e+1]&224)===160)return!1;e+=3}else if((r[e]&248)===240){if(e+3>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||(r[e+3]&192)!==128||r[e]===240&&(r[e+1]&240)===128||r[e]===244&&r[e+1]>143||r[e]>244)return!1;e+=4}else return!1;return!0}Nt.exports={isValidStatusCode:Qo,isValidUTF8:Br,tokenChars:Jo};if(An)Nt.exports.isValidUTF8=function(r){return r.length<24?Br(r):An(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=C("utf-8-validate");Nt.exports.isValidUTF8=function(t){return t.length<32?Br(t):r(t)}}catch{}});var Mr=E((mf,In)=>{"use strict";var{Writable:Zo}=C("stream"),Fn=Ze(),{BINARY_TYPES:ea,EMPTY_BUFFER:Nn,kStatusCode:ta,kWebSocket:ra}=ue(),{concat:Lr,toArrayBuffer:sa,unmask:na}=Ke(),{isValidStatusCode:ia,isValidUTF8:Bn}=et(),Bt=Buffer[Symbol.species],Y=0,Ln=1,Dn=2,Pn=3,Dr=4,Pr=5,Lt=6,Ir=class extends Zo{constructor(t={}){super(),this._allowSynchronousEvents=t.allowSynchronousEvents!==void 0?t.allowSynchronousEvents:!0,this._binaryType=t.binaryType||ea[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[ra]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Y}_write(t,e,s){if(this._opcode===8&&this._state==Y)return s();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(s)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let s=this._buffers[0];return this._buffers[0]=new Bt(s.buffer,s.byteOffset+t,s.length-t),new Bt(s.buffer,s.byteOffset,t)}let e=Buffer.allocUnsafe(t);do{let s=this._buffers[0],n=e.length-t;t>=s.length?e.set(this._buffers.shift(),n):(e.set(new Uint8Array(s.buffer,s.byteOffset,t),n),this._buffers[0]=new Bt(s.buffer,s.byteOffset+t,s.length-t)),t-=s.length}while(t>0);return e}startLoop(t){this._loop=!0;do switch(this._state){case Y:this.getInfo(t);break;case Ln:this.getPayloadLength16(t);break;case Dn:this.getPayloadLength64(t);break;case Pn:this.getMask();break;case Dr:this.getData(t);break;case Pr:case Lt:this._loop=!1;return}while(this._loop);this._errored||t()}getInfo(t){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!==0){let n=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");t(n);return}let s=(e[0]&64)===64;if(s&&!this._extensions[Fn.extensionName]){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(s){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(!this._fragmented){let n=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._compressed=s}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let n=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");t(n);return}if(s){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let n=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");t(n);return}}else{let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked){let n=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");t(n);return}}else if(this._masked){let n=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");t(n);return}this._payloadLength===126?this._state=Ln:this._payloadLength===127?this._state=Dn:this.haveLength(t)}getPayloadLength16(t){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(t)}getPayloadLength64(t){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),s=e.readUInt32BE(0);if(s>Math.pow(2,21)-1){let n=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");t(n);return}this._payloadLength=s*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength(t)}haveLength(t){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(e);return}this._masked?this._state=Pn:this._state=Dr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Dr}getData(t){let e=Nn;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}e=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&na(e,this._mask)}if(this._opcode>7){this.controlMessage(e,t);return}if(this._compressed){this._state=Pr,this.decompress(e,t);return}e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage(t)}decompress(t,e){this._extensions[Fn.extensionName].decompress(t,this._fin,(n,i)=>{if(n)return e(n);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(o);return}this._fragments.push(i)}this.dataMessage(e),this._state===Y&&this.startLoop(e)})}dataMessage(t){if(!this._fin){this._state=Y;return}let e=this._messageLength,s=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Lr(s,e):this._binaryType==="arraybuffer"?n=sa(Lr(s,e)):n=s,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=Y):(this._state=Lt,setImmediate(()=>{this.emit("message",n,!0),this._state=Y,this.startLoop(t)}))}else{let n=Lr(s,e);if(!this._skipUTF8Validation&&!Bn(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(i);return}this._state===Pr||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=Y):(this._state=Lt,setImmediate(()=>{this.emit("message",n,!1),this._state=Y,this.startLoop(t)}))}}controlMessage(t,e){if(this._opcode===8){if(t.length===0)this._loop=!1,this.emit("conclude",1005,Nn),this.end();else{let s=t.readUInt16BE(0);if(!ia(s)){let i=this.createError(RangeError,`invalid status code ${s}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");e(i);return}let n=new Bt(t.buffer,t.byteOffset+2,t.length-2);if(!this._skipUTF8Validation&&!Bn(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._loop=!1,this.emit("conclude",s,n),this.end()}this._state=Y;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",t),this._state=Y):(this._state=Lt,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",t),this._state=Y,this.startLoop(e)}))}createError(t,e,s,n,i){this._loop=!1,this._errored=!0;let o=new t(s?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(o,this.createError),o.code=i,o[ta]=n,o}};In.exports=Ir});var qr=E((gf,qn)=>{"use strict";var{Duplex:_f}=C("stream"),{randomFillSync:oa}=C("crypto"),Mn=Ze(),{EMPTY_BUFFER:aa}=ue(),{isValidStatusCode:ca}=et(),{mask:Un,toBuffer:Re}=Ke(),Z=Symbol("kByteLength"),la=Buffer.alloc(4),Dt=8*1024,ye,Ae=Dt,Ur=class r{constructor(t,e,s){this._extensions=e||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){let s,n=!1,i=2,o=!1;e.mask&&(s=e.maskBuffer||la,e.generateMask?e.generateMask(s):(Ae===Dt&&(ye===void 0&&(ye=Buffer.alloc(Dt)),oa(ye,0,Dt),Ae=0),s[0]=ye[Ae++],s[1]=ye[Ae++],s[2]=ye[Ae++],s[3]=ye[Ae++]),o=(s[0]|s[1]|s[2]|s[3])===0,i=6);let l;typeof t=="string"?(!e.mask||o)&&e[Z]!==void 0?l=e[Z]:(t=Buffer.from(t),l=t.length):(l=t.length,n=e.mask&&e.readOnly&&!o);let f=l;l>=65536?(i+=8,f=127):l>125&&(i+=2,f=126);let u=Buffer.allocUnsafe(n?l+i:i);return u[0]=e.fin?e.opcode|128:e.opcode,e.rsv1&&(u[0]|=64),u[1]=f,f===126?u.writeUInt16BE(l,2):f===127&&(u[2]=u[3]=0,u.writeUIntBE(l,4,6)),e.mask?(u[1]|=128,u[i-4]=s[0],u[i-3]=s[1],u[i-2]=s[2],u[i-1]=s[3],o?[u,t]:n?(Un(t,s,u,i,l),[u]):(Un(t,s,t,0,l),[u,t])):[u,t]}close(t,e,s,n){let i;if(t===void 0)i=aa;else{if(typeof t!="number"||!ca(t))throw new TypeError("First argument must be a valid error code number");if(e===void 0||!e.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(t,0);else{let l=Buffer.byteLength(e);if(l>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+l),i.writeUInt16BE(t,0),typeof e=="string"?i.write(e,2):i.set(e,2)}}let o={[Z]:i.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(r.frame(i,o),n)}ping(t,e,s){let n,i;if(typeof t=="string"?(n=Buffer.byteLength(t),i=!1):(t=Re(t),n=t.length,i=Re.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Z]:n,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,o,s]):this.sendFrame(r.frame(t,o),s)}pong(t,e,s){let n,i;if(typeof t=="string"?(n=Buffer.byteLength(t),i=!1):(t=Re(t),n=t.length,i=Re.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Z]:n,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,o,s]):this.sendFrame(r.frame(t,o),s)}send(t,e,s){let n=this._extensions[Mn.extensionName],i=e.binary?2:1,o=e.compress,l,f;if(typeof t=="string"?(l=Buffer.byteLength(t),f=!1):(t=Re(t),l=t.length,f=Re.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=l>=n._threshold),this._compress=o):(o=!1,i=0),e.fin&&(this._firstFragment=!0),n){let u={[Z]:l,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:o};this._deflating?this.enqueue([this.dispatch,t,this._compress,u,s]):this.dispatch(t,this._compress,u,s)}else this.sendFrame(r.frame(t,{[Z]:l,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:!1}),s)}dispatch(t,e,s,n){if(!e){this.sendFrame(r.frame(t,s),n);return}let i=this._extensions[Mn.extensionName];this._bufferedBytes+=s[Z],this._deflating=!0,i.compress(t,s.fin,(o,l)=>{if(this._socket.destroyed){let f=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(f);for(let u=0;u<this._queue.length;u++){let a=this._queue[u],c=a[a.length-1];typeof c=="function"&&c(f)}return}this._bufferedBytes-=s[Z],this._deflating=!1,s.readOnly=!1,this.sendFrame(r.frame(l,s),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][Z],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][Z],this._queue.push(t)}sendFrame(t,e){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}};qn.exports=Ur});var Yn=E((yf,Xn)=>{"use strict";var{kForOnEventAttribute:tt,kListener:jr}=ue(),jn=Symbol("kCode"),Wn=Symbol("kData"),Vn=Symbol("kError"),$n=Symbol("kMessage"),Hn=Symbol("kReason"),Fe=Symbol("kTarget"),Gn=Symbol("kType"),zn=Symbol("kWasClean"),ae=class{constructor(t){this[Fe]=null,this[Gn]=t}get target(){return this[Fe]}get type(){return this[Gn]}};Object.defineProperty(ae.prototype,"target",{enumerable:!0});Object.defineProperty(ae.prototype,"type",{enumerable:!0});var be=class extends ae{constructor(t,e={}){super(t),this[jn]=e.code===void 0?0:e.code,this[Hn]=e.reason===void 0?"":e.reason,this[zn]=e.wasClean===void 0?!1:e.wasClean}get code(){return this[jn]}get reason(){return this[Hn]}get wasClean(){return this[zn]}};Object.defineProperty(be.prototype,"code",{enumerable:!0});Object.defineProperty(be.prototype,"reason",{enumerable:!0});Object.defineProperty(be.prototype,"wasClean",{enumerable:!0});var Ne=class extends ae{constructor(t,e={}){super(t),this[Vn]=e.error===void 0?null:e.error,this[$n]=e.message===void 0?"":e.message}get error(){return this[Vn]}get message(){return this[$n]}};Object.defineProperty(Ne.prototype,"error",{enumerable:!0});Object.defineProperty(Ne.prototype,"message",{enumerable:!0});var rt=class extends ae{constructor(t,e={}){super(t),this[Wn]=e.data===void 0?null:e.data}get data(){return this[Wn]}};Object.defineProperty(rt.prototype,"data",{enumerable:!0});var fa={addEventListener(r,t,e={}){for(let n of this.listeners(r))if(!e[tt]&&n[jr]===t&&!n[tt])return;let s;if(r==="message")s=function(i,o){let l=new rt("message",{data:o?i:i.toString()});l[Fe]=this,Pt(t,this,l)};else if(r==="close")s=function(i,o){let l=new be("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});l[Fe]=this,Pt(t,this,l)};else if(r==="error")s=function(i){let o=new Ne("error",{error:i,message:i.message});o[Fe]=this,Pt(t,this,o)};else if(r==="open")s=function(){let i=new ae("open");i[Fe]=this,Pt(t,this,i)};else return;s[tt]=!!e[tt],s[jr]=t,e.once?this.once(r,s):this.on(r,s)},removeEventListener(r,t){for(let e of this.listeners(r))if(e[jr]===t&&!e[tt]){this.removeListener(r,e);break}}};Xn.exports={CloseEvent:be,ErrorEvent:Ne,Event:ae,EventTarget:fa,MessageEvent:rt};function Pt(r,t,e){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,e):r.call(t,e)}});var Wr=E((bf,Kn)=>{"use strict";var{tokenChars:st}=et();function te(r,t,e){r[t]===void 0?r[t]=[e]:r[t].push(e)}function ha(r){let t=Object.create(null),e=Object.create(null),s=!1,n=!1,i=!1,o,l,f=-1,u=-1,a=-1,c=0;for(;c<r.length;c++)if(u=r.charCodeAt(c),o===void 0)if(a===-1&&st[u]===1)f===-1&&(f=c);else if(c!==0&&(u===32||u===9))a===-1&&f!==-1&&(a=c);else if(u===59||u===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);a===-1&&(a=c);let g=r.slice(f,a);u===44?(te(t,g,e),e=Object.create(null)):o=g,f=a=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);else if(l===void 0)if(a===-1&&st[u]===1)f===-1&&(f=c);else if(u===32||u===9)a===-1&&f!==-1&&(a=c);else if(u===59||u===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);a===-1&&(a=c),te(e,r.slice(f,a),!0),u===44&&(te(t,o,e),e=Object.create(null),o=void 0),f=a=-1}else if(u===61&&f!==-1&&a===-1)l=r.slice(f,c),f=a=-1;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(n){if(st[u]!==1)throw new SyntaxError(`Unexpected character at index ${c}`);f===-1?f=c:s||(s=!0),n=!1}else if(i)if(st[u]===1)f===-1&&(f=c);else if(u===34&&f!==-1)i=!1,a=c;else if(u===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(u===34&&r.charCodeAt(c-1)===61)i=!0;else if(a===-1&&st[u]===1)f===-1&&(f=c);else if(f!==-1&&(u===32||u===9))a===-1&&(a=c);else if(u===59||u===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);a===-1&&(a=c);let g=r.slice(f,a);s&&(g=g.replace(/\\/g,""),s=!1),te(e,l,g),u===44&&(te(t,o,e),e=Object.create(null),o=void 0),l=void 0,f=a=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);if(f===-1||i||u===32||u===9)throw new SyntaxError("Unexpected end of input");a===-1&&(a=c);let h=r.slice(f,a);return o===void 0?te(t,h,e):(l===void 0?te(e,h,!0):s?te(e,l,h.replace(/\\/g,"")):te(e,l,h),te(t,o,e)),t}function ua(r){return Object.keys(r).map(t=>{let e=r[t];return Array.isArray(e)||(e=[e]),e.map(s=>[t].concat(Object.keys(s).map(n=>{let i=s[n];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Kn.exports={format:ua,parse:ha}});var zr=E((xf,ai)=>{"use strict";var da=C("events"),pa=C("https"),ma=C("http"),Zn=C("net"),_a=C("tls"),{randomBytes:ga,createHash:ya}=C("crypto"),{Duplex:Cf,Readable:vf}=C("stream"),{URL:Vr}=C("url"),pe=Ze(),ba=Mr(),Ca=qr(),{BINARY_TYPES:Jn,EMPTY_BUFFER:It,GUID:va,kForOnEventAttribute:$r,kListener:xa,kStatusCode:Ea,kWebSocket:U,NOOP:ei}=ue(),{EventTarget:{addEventListener:wa,removeEventListener:ka}}=Yn(),{format:Sa,parse:Oa}=Wr(),{toBuffer:Ta}=Ke(),Ra=30*1e3,ti=Symbol("kAborted"),Hr=[8,13],ce=["CONNECTING","OPEN","CLOSING","CLOSED"],Aa=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,O=class r extends da{constructor(t,e,s){super(),this._binaryType=Jn[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=It,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,e===void 0?e=[]:Array.isArray(e)||(typeof e=="object"&&e!==null?(s=e,e=[]):e=[e]),ri(this,t,e,s)):(this._autoPong=s.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(t){Jn.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,s){let n=new ba({allowSynchronousEvents:s.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new Ca(t,this._extensions,s.generateMask),this._receiver=n,this._socket=t,n[U]=this,t[U]=this,n.on("conclude",Ba),n.on("drain",La),n.on("error",Da),n.on("message",Pa),n.on("ping",Ia),n.on("pong",Ma),t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",ni),t.on("data",Ut),t.on("end",ii),t.on("error",oi),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[pe.extensionName]&&this._extensions[pe.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){$(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(t,e,!this._isServer,s=>{s||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Ra)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,e,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(s=t,t=e=void 0):typeof e=="function"&&(s=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){Gr(this,t,s);return}e===void 0&&(e=!this._isServer),this._sender.ping(t||It,e,s)}pong(t,e,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(s=t,t=e=void 0):typeof e=="function"&&(s=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){Gr(this,t,s);return}e===void 0&&(e=!this._isServer),this._sender.pong(t||It,e,s)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,e,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"&&(s=e,e={}),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){Gr(this,t,s);return}let n=T({binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0},e);this._extensions[pe.extensionName]||(n.compress=!1),this._sender.send(t||It,n,s)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){$(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(O,"CONNECTING",{enumerable:!0,value:ce.indexOf("CONNECTING")});Object.defineProperty(O.prototype,"CONNECTING",{enumerable:!0,value:ce.indexOf("CONNECTING")});Object.defineProperty(O,"OPEN",{enumerable:!0,value:ce.indexOf("OPEN")});Object.defineProperty(O.prototype,"OPEN",{enumerable:!0,value:ce.indexOf("OPEN")});Object.defineProperty(O,"CLOSING",{enumerable:!0,value:ce.indexOf("CLOSING")});Object.defineProperty(O.prototype,"CLOSING",{enumerable:!0,value:ce.indexOf("CLOSING")});Object.defineProperty(O,"CLOSED",{enumerable:!0,value:ce.indexOf("CLOSED")});Object.defineProperty(O.prototype,"CLOSED",{enumerable:!0,value:ce.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(O.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(O.prototype,`on${r}`,{enumerable:!0,get(){for(let t of this.listeners(r))if(t[$r])return t[xa];return null},set(t){for(let e of this.listeners(r))if(e[$r]){this.removeListener(r,e);break}typeof t=="function"&&this.addEventListener(r,t,{[$r]:!0})}})});O.prototype.addEventListener=wa;O.prototype.removeEventListener=ka;ai.exports=O;function ri(r,t,e,s){let n=re(T({allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Hr[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},s),{socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(r._autoPong=n.autoPong,!Hr.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Hr.join(", ")})`);let i;if(t instanceof Vr)i=t;else try{i=new Vr(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),r._url=i.href;let o=i.protocol==="wss:",l=i.protocol==="ws+unix:",f;if(i.protocol!=="ws:"&&!o&&!l?f=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:l&&!i.pathname?f="The URL's pathname is empty":i.hash&&(f="The URL contains a fragment identifier"),f){let d=new SyntaxError(f);if(r._redirects===0)throw d;Mt(r,d);return}let u=o?443:80,a=ga(16).toString("base64"),c=o?pa.request:ma.request,h=new Set,g;if(n.createConnection=n.createConnection||(o?Na:Fa),n.defaultPort=n.defaultPort||u,n.port=i.port||u,n.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,n.headers=re(T({},n.headers),{"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":a,Connection:"Upgrade",Upgrade:"websocket"}),n.path=i.pathname+i.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(g=new pe(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=Sa({[pe.extensionName]:g.offer()})),e.length){for(let d of e){if(typeof d!="string"||!Aa.test(d)||h.has(d))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(d)}n.headers["Sec-WebSocket-Protocol"]=e.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(i.username||i.password)&&(n.auth=`${i.username}:${i.password}`),l){let d=n.path.split(":");n.socketPath=d[0],n.path=d[1]}let y;if(n.followRedirects){if(r._redirects===0){r._originalIpc=l,r._originalSecure=o,r._originalHostOrSocketPath=l?n.socketPath:i.host;let d=s&&s.headers;if(s=re(T({},s),{headers:{}}),d)for(let[m,v]of Object.entries(d))s.headers[m.toLowerCase()]=v}else if(r.listenerCount("redirect")===0){let d=l?r._originalIpc?n.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:i.host===r._originalHostOrSocketPath;(!d||r._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,d||delete n.headers.host,n.auth=void 0)}n.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),y=r._req=c(n),r._redirects&&r.emit("redirect",r.url,y)}else y=r._req=c(n);n.timeout&&y.on("timeout",()=>{$(r,y,"Opening handshake has timed out")}),y.on("error",d=>{y===null||y[ti]||(y=r._req=null,Mt(r,d))}),y.on("response",d=>{let m=d.headers.location,v=d.statusCode;if(m&&n.followRedirects&&v>=300&&v<400){if(++r._redirects>n.maxRedirects){$(r,y,"Maximum redirects exceeded");return}y.abort();let x;try{x=new Vr(m,t)}catch{let _=new SyntaxError(`Invalid URL: ${m}`);Mt(r,_);return}ri(r,x,e,s)}else r.emit("unexpected-response",y,d)||$(r,y,`Unexpected server response: ${d.statusCode}`)}),y.on("upgrade",(d,m,v)=>{if(r.emit("upgrade",d),r.readyState!==O.CONNECTING)return;y=r._req=null;let x=d.headers.upgrade;if(x===void 0||x.toLowerCase()!=="websocket"){$(r,m,"Invalid Upgrade header");return}let p=ya("sha1").update(a+va).digest("base64");if(d.headers["sec-websocket-accept"]!==p){$(r,m,"Invalid Sec-WebSocket-Accept header");return}let _=d.headers["sec-websocket-protocol"],A;if(_!==void 0?h.size?h.has(_)||(A="Server sent an invalid subprotocol"):A="Server sent a subprotocol but none was requested":h.size&&(A="Server sent no subprotocol"),A){$(r,m,A);return}_&&(r._protocol=_);let k=d.headers["sec-websocket-extensions"];if(k!==void 0){if(!g){$(r,m,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let D;try{D=Oa(k)}catch{$(r,m,"Invalid Sec-WebSocket-Extensions header");return}let q=Object.keys(D);if(q.length!==1||q[0]!==pe.extensionName){$(r,m,"Server indicated an extension that was not requested");return}try{g.accept(D[pe.extensionName])}catch{$(r,m,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[pe.extensionName]=g}r.setSocket(m,v,{allowSynchronousEvents:n.allowSynchronousEvents,generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(y,r):y.end()}function Mt(r,t){r._readyState=O.CLOSING,r.emit("error",t),r.emitClose()}function Fa(r){return r.path=r.socketPath,Zn.connect(r)}function Na(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=Zn.isIP(r.host)?"":r.host),_a.connect(r)}function $(r,t,e){r._readyState=O.CLOSING;let s=new Error(e);Error.captureStackTrace(s,$),t.setHeader?(t[ti]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(Mt,r,s)):(t.destroy(s),t.once("error",r.emit.bind(r,"error")),t.once("close",r.emitClose.bind(r)))}function Gr(r,t,e){if(t){let s=Ta(t).length;r._socket?r._sender._bufferedBytes+=s:r._bufferedAmount+=s}if(e){let s=new Error(`WebSocket is not open: readyState ${r.readyState} (${ce[r.readyState]})`);process.nextTick(e,s)}}function Ba(r,t){let e=this[U];e._closeFrameReceived=!0,e._closeMessage=t,e._closeCode=r,e._socket[U]!==void 0&&(e._socket.removeListener("data",Ut),process.nextTick(si,e._socket),r===1005?e.close():e.close(r,t))}function La(){let r=this[U];r.isPaused||r._socket.resume()}function Da(r){let t=this[U];t._socket[U]!==void 0&&(t._socket.removeListener("data",Ut),process.nextTick(si,t._socket),t.close(r[Ea])),t.emit("error",r)}function Qn(){this[U].emitClose()}function Pa(r,t){this[U].emit("message",r,t)}function Ia(r){let t=this[U];t._autoPong&&t.pong(r,!this._isServer,ei),t.emit("ping",r)}function Ma(r){this[U].emit("pong",r)}function si(r){r.resume()}function ni(){let r=this[U];this.removeListener("close",ni),this.removeListener("data",Ut),this.removeListener("end",ii),r._readyState=O.CLOSING;let t;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(t=r._socket.read())!==null&&r._receiver.write(t),r._receiver.end(),this[U]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",Qn),r._receiver.on("finish",Qn))}function Ut(r){this[U]._receiver.write(r)||this.pause()}function ii(){let r=this[U];r._readyState=O.CLOSING,r._receiver.end(),this.end()}function oi(){let r=this[U];this.removeListener("error",oi),this.on("error",ei),r&&(r._readyState=O.CLOSING,this.destroy())}});var li=E((wf,ci)=>{"use strict";var{tokenChars:Ua}=et();function qa(r){let t=new Set,e=-1,s=-1,n=0;for(n;n<r.length;n++){let o=r.charCodeAt(n);if(s===-1&&Ua[o]===1)e===-1&&(e=n);else if(n!==0&&(o===32||o===9))s===-1&&e!==-1&&(s=n);else if(o===44){if(e===-1)throw new SyntaxError(`Unexpected character at index ${n}`);s===-1&&(s=n);let l=r.slice(e,s);if(t.has(l))throw new SyntaxError(`The "${l}" subprotocol is duplicated`);t.add(l),e=s=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(e===-1||s!==-1)throw new SyntaxError("Unexpected end of input");let i=r.slice(e,n);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}ci.exports={parse:qa}});var _i=E((Sf,mi)=>{"use strict";var ja=C("events"),qt=C("http"),{Duplex:kf}=C("stream"),{createHash:Wa}=C("crypto"),fi=Wr(),Ce=Ze(),Va=li(),$a=zr(),{GUID:Ha,kWebSocket:Ga}=ue(),za=/^[+/0-9A-Za-z]{22}==$/,hi=0,ui=1,pi=2,Xr=class extends ja{constructor(t,e){if(super(),t=T({allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:$a},t),t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=qt.createServer((s,n)=>{let i=qt.STATUS_CODES[426];n.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),n.end(i)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){let s=this.emit.bind(this,"connection");this._removeListeners=Xa(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,i,o)=>{this.handleUpgrade(n,i,o,s)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=hi}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===pi){t&&this.once("close",()=>{t(new Error("The server is not running"))}),process.nextTick(nt,this);return}if(t&&this.once("close",t),this._state!==ui)if(this._state=ui,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(nt,this):process.nextTick(nt,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{nt(this)})}}shouldHandle(t){if(this.options.path){let e=t.url.indexOf("?");if((e!==-1?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,s,n){e.on("error",di);let i=t.headers["sec-websocket-key"],o=t.headers.upgrade,l=+t.headers["sec-websocket-version"];if(t.method!=="GET"){ve(this,t,e,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){ve(this,t,e,400,"Invalid Upgrade header");return}if(i===void 0||!za.test(i)){ve(this,t,e,400,"Missing or invalid Sec-WebSocket-Key header");return}if(l!==8&&l!==13){ve(this,t,e,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(t)){it(e,400);return}let f=t.headers["sec-websocket-protocol"],u=new Set;if(f!==void 0)try{u=Va.parse(f)}catch{ve(this,t,e,400,"Invalid Sec-WebSocket-Protocol header");return}let a=t.headers["sec-websocket-extensions"],c={};if(this.options.perMessageDeflate&&a!==void 0){let h=new Ce(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let g=fi.parse(a);g[Ce.extensionName]&&(h.accept(g[Ce.extensionName]),c[Ce.extensionName]=h)}catch{ve(this,t,e,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let h={origin:t.headers[`${l===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(g,y,d,m)=>{if(!g)return it(e,y||401,d,m);this.completeUpgrade(c,i,u,t,e,s,n)});return}if(!this.options.verifyClient(h))return it(e,401)}this.completeUpgrade(c,i,u,t,e,s,n)}completeUpgrade(t,e,s,n,i,o,l){if(!i.readable||!i.writable)return i.destroy();if(i[Ga])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>hi)return it(i,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Wa("sha1").update(e+Ha).digest("base64")}`],a=new this.options.WebSocket(null,void 0,this.options);if(s.size){let c=this.options.handleProtocols?this.options.handleProtocols(s,n):s.values().next().value;c&&(u.push(`Sec-WebSocket-Protocol: ${c}`),a._protocol=c)}if(t[Ce.extensionName]){let c=t[Ce.extensionName].params,h=fi.format({[Ce.extensionName]:[c]});u.push(`Sec-WebSocket-Extensions: ${h}`),a._extensions=t}this.emit("headers",u,n),i.write(u.concat(`\r
`).join(`\r
`)),i.removeListener("error",di),a.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(a),a.on("close",()=>{this.clients.delete(a),this._shouldEmitClose&&!this.clients.size&&process.nextTick(nt,this)})),l(a,n)}};mi.exports=Xr;function Xa(r,t){for(let e of Object.keys(t))r.on(e,t[e]);return function(){for(let s of Object.keys(t))r.removeListener(s,t[s])}}function nt(r){r._state=pi,r.emit("close")}function di(){this.destroy()}function it(r,t,e,s){e=e||qt.STATUS_CODES[t],s=T({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(e)},s),r.once("finish",r.destroy),r.end(`HTTP/1.1 ${t} ${qt.STATUS_CODES[t]}\r
`+Object.keys(s).map(n=>`${n}: ${s[n]}`).join(`\r
`)+`\r
\r
`+e)}function ve(r,t,e,s,n){if(r.listenerCount("wsClientError")){let i=new Error(n);Error.captureStackTrace(i,ve),r.emit("wsClientError",i,e,t)}else it(e,s,n)}});var Qr=E((_h,Ci)=>{"use strict";function lc(r){e.debug=e,e.default=e,e.coerce=f,e.disable=i,e.enable=n,e.enabled=o,e.humanize=vt(),e.destroy=u,Object.keys(r).forEach(a=>{e[a]=r[a]}),e.names=[],e.skips=[],e.formatters={};function t(a){let c=0;for(let h=0;h<a.length;h++)c=(c<<5)-c+a.charCodeAt(h),c|=0;return e.colors[Math.abs(c)%e.colors.length]}e.selectColor=t;function e(a){let c,h=null,g,y;function d(...m){if(!d.enabled)return;let v=d,x=Number(new Date),p=x-(c||x);v.diff=p,v.prev=c,v.curr=x,c=x,m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let _=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(k,D)=>{if(k==="%%")return"%";_++;let q=e.formatters[D];if(typeof q=="function"){let K=m[_];k=q.call(v,K),m.splice(_,1),_--}return k}),e.formatArgs.call(v,m),(v.log||e.log).apply(v,m)}return d.namespace=a,d.useColors=e.useColors(),d.color=e.selectColor(a),d.extend=s,d.destroy=e.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==e.namespaces&&(g=e.namespaces,y=e.enabled(a)),y),set:m=>{h=m}}),typeof e.init=="function"&&e.init(d),d}function s(a,c){let h=e(this.namespace+(typeof c>"u"?":":c)+a);return h.log=this.log,h}function n(a){e.save(a),e.namespaces=a,e.names=[],e.skips=[];let c,h=(typeof a=="string"?a:"").split(/[\s,]+/),g=h.length;for(c=0;c<g;c++)h[c]&&(a=h[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.slice(1)+"$")):e.names.push(new RegExp("^"+a+"$")))}function i(){let a=[...e.names.map(l),...e.skips.map(l).map(c=>"-"+c)].join(",");return e.enable(""),a}function o(a){if(a[a.length-1]==="*")return!0;let c,h;for(c=0,h=e.skips.length;c<h;c++)if(e.skips[c].test(a))return!1;for(c=0,h=e.names.length;c<h;c++)if(e.names[c].test(a))return!0;return!1}function l(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function f(a){return a instanceof Error?a.stack||a.message:a}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}Ci.exports=lc});var vi=E((H,$t)=>{"use strict";H.formatArgs=hc;H.save=uc;H.load=dc;H.useColors=fc;H.storage=pc();H.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();H.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fc(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function hc(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+$t.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,s=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(s=e))}),r.splice(s,0,t)}H.log=console.debug||console.log||(()=>{});function uc(r){try{r?H.storage.setItem("debug",r):H.storage.removeItem("debug")}catch{}}function dc(){let r;try{r=H.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function pc(){try{return localStorage}catch{}}$t.exports=Qr()(H);var{formatters:mc}=$t.exports;mc.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Ei=E((B,Gt)=>{"use strict";var _c=C("tty"),Ht=C("util");B.init=Ec;B.log=Cc;B.formatArgs=yc;B.save=vc;B.load=xc;B.useColors=gc;B.destroy=Ht.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");B.colors=[6,2,3,4,5,1];try{let r=Et();r&&(r.stderr||r).level>=2&&(B.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}B.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),r[e]=s,r},{});function gc(){return"colors"in B.inspectOpts?!!B.inspectOpts.colors:_c.isatty(process.stderr.fd)}function yc(r){let{namespace:t,useColors:e}=this;if(e){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} \x1B[0m`;r[0]=i+r[0].split(`
`).join(`
`+i),r.push(n+"m+"+Gt.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=bc()+t+" "+r[0]}function bc(){return B.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Cc(...r){return process.stderr.write(Ht.formatWithOptions(B.inspectOpts,...r)+`
`)}function vc(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function xc(){return process.env.DEBUG}function Ec(r){r.inspectOpts={};let t=Object.keys(B.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=B.inspectOpts[t[e]]}Gt.exports=Qr()(B);var{formatters:xi}=Gt.exports;xi.o=function(r){return this.inspectOpts.colors=this.useColors,Ht.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};xi.O=function(r){return this.inspectOpts.colors=this.useColors,Ht.inspect(r,this.inspectOpts)}});var ct=E((gh,Zr)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Zr.exports=vi():Zr.exports=Ei()});var rs=E((Eh,Ai)=>{"use strict";function Tc(r){e.debug=e,e.default=e,e.coerce=f,e.disable=i,e.enable=n,e.enabled=o,e.humanize=vt(),e.destroy=u,Object.keys(r).forEach(a=>{e[a]=r[a]}),e.names=[],e.skips=[],e.formatters={};function t(a){let c=0;for(let h=0;h<a.length;h++)c=(c<<5)-c+a.charCodeAt(h),c|=0;return e.colors[Math.abs(c)%e.colors.length]}e.selectColor=t;function e(a){let c,h=null,g,y;function d(...m){if(!d.enabled)return;let v=d,x=Number(new Date),p=x-(c||x);v.diff=p,v.prev=c,v.curr=x,c=x,m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let _=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(k,D)=>{if(k==="%%")return"%";_++;let q=e.formatters[D];if(typeof q=="function"){let K=m[_];k=q.call(v,K),m.splice(_,1),_--}return k}),e.formatArgs.call(v,m),(v.log||e.log).apply(v,m)}return d.namespace=a,d.useColors=e.useColors(),d.color=e.selectColor(a),d.extend=s,d.destroy=e.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==e.namespaces&&(g=e.namespaces,y=e.enabled(a)),y),set:m=>{h=m}}),typeof e.init=="function"&&e.init(d),d}function s(a,c){let h=e(this.namespace+(typeof c>"u"?":":c)+a);return h.log=this.log,h}function n(a){e.save(a),e.namespaces=a,e.names=[],e.skips=[];let c,h=(typeof a=="string"?a:"").split(/[\s,]+/),g=h.length;for(c=0;c<g;c++)h[c]&&(a=h[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.slice(1)+"$")):e.names.push(new RegExp("^"+a+"$")))}function i(){let a=[...e.names.map(l),...e.skips.map(l).map(c=>"-"+c)].join(",");return e.enable(""),a}function o(a){if(a[a.length-1]==="*")return!0;let c,h;for(c=0,h=e.skips.length;c<h;c++)if(e.skips[c].test(a))return!1;for(c=0,h=e.names.length;c<h;c++)if(e.names[c].test(a))return!0;return!1}function l(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function f(a){return a instanceof Error?a.stack||a.message:a}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}Ai.exports=Tc});var Fi=E((G,zt)=>{"use strict";G.formatArgs=Ac;G.save=Fc;G.load=Nc;G.useColors=Rc;G.storage=Bc();G.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();G.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rc(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ac(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+zt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,s=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(s=e))}),r.splice(s,0,t)}G.log=console.debug||console.log||(()=>{});function Fc(r){try{r?G.storage.setItem("debug",r):G.storage.removeItem("debug")}catch{}}function Nc(){let r;try{r=G.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Bc(){try{return localStorage}catch{}}zt.exports=rs()(G);var{formatters:Lc}=zt.exports;Lc.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Bi=E((L,Yt)=>{"use strict";var Dc=C("tty"),Xt=C("util");L.init=Wc;L.log=Uc;L.formatArgs=Ic;L.save=qc;L.load=jc;L.useColors=Pc;L.destroy=Xt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");L.colors=[6,2,3,4,5,1];try{let r=Et();r&&(r.stderr||r).level>=2&&(L.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}L.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),r[e]=s,r},{});function Pc(){return"colors"in L.inspectOpts?!!L.inspectOpts.colors:Dc.isatty(process.stderr.fd)}function Ic(r){let{namespace:t,useColors:e}=this;if(e){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} \x1B[0m`;r[0]=i+r[0].split(`
`).join(`
`+i),r.push(n+"m+"+Yt.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Mc()+t+" "+r[0]}function Mc(){return L.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Uc(...r){return process.stderr.write(Xt.formatWithOptions(L.inspectOpts,...r)+`
`)}function qc(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function jc(){return process.env.DEBUG}function Wc(r){r.inspectOpts={};let t=Object.keys(L.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=L.inspectOpts[t[e]]}Yt.exports=rs()(L);var{formatters:Ni}=Yt.exports;Ni.o=function(r){return this.inspectOpts.colors=this.useColors,Xt.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Ni.O=function(r){return this.inspectOpts.colors=this.useColors,Xt.inspect(r,this.inspectOpts)}});var Li=E((wh,ss)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ss.exports=Fi():ss.exports=Bi()});var Ps={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Yi(r,t){if(r&1){let e=ks();mt(0,"div",1)(1,"button",2),ir("click",function(){ds(e);let n=or();return ps(n.action())}),fr(2),We()()}if(r&2){let e=or();je(2),hr(" ",e.data.action," ")}}var Ki=["label"];function Ji(r,t){}var Qi=Math.pow(2,31)-1,Ve=class{_overlayRef;instance;containerInstance;_afterDismissed=new fe;_afterOpened=new fe;_onAction=new fe;_durationTimeoutId;_dismissedByAction=!1;constructor(t,e){this._overlayRef=e,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,Qi))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Is=new rr("MatSnackBarData"),Ee=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Zi=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275dir=pt({type:r,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return r})(),eo=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275dir=pt({type:r,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return r})(),to=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275dir=pt({type:r,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return r})(),ro=(()=>{class r{snackBarRef=I(Ve);data=I(Is);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=sr({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(s,n){s&1&&(mt(0,"div",0),fr(1),We(),nr(2,Yi,3,1,"div",1)),s&2&&(je(),hr(" ",n.data.message,`
`),je(),Es(n.hasAction?2:-1))},dependencies:[Fs,Zi,eo,to],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return r})(),mr="_mat-snack-bar-enter",_r="_mat-snack-bar-exit",so=(()=>{class r extends Bs{_ngZone=I(ms);_elementRef=I(_s);_changeDetectorRef=I(Ss);_platform=I(Ts);_rendersRef;_animationsDisabled=I(gs,{optional:!0})==="NoopAnimations";snackBarConfig=I(Ee);_document=I(Os);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new fe;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new fe;_onExit=new fe;_onEnter=new fe;_animationState="void";_live;_label;_role;_liveElementId=I(As).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=ys(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let s=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),s}attachTemplatePortal(e){this._assertNotAttached();let s=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),s}attachDomPortal=e=>{this._assertNotAttached();let s=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),s};onAnimationEnd(e){e===_r?this._completeExit():e===mr&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(tr(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(mr)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(mr)},200)))}exit(){return this._destroyed?fs(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(tr(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(_r)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(_r),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(o=>e.classList.add(o)):e.classList.add(s)),this._exposeToModals();let n=this._label.nativeElement,i="mdc-snackbar__label";n.classList.toggle(i,!n.querySelector(`.${i}`))}_exposeToModals(){let e=this._liveElementId,s=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let n=0;n<s.length;n++){let i=s[n],o=i.getAttribute("aria-owns");this._trackedModals.add(i),o?o.indexOf(e)===-1&&i.setAttribute("aria-owns",o+" "+e):i.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let s=e.getAttribute("aria-owns");if(s){let n=s.replace(this._liveElementId,"").trim();n.length>0?e.setAttribute("aria-owns",n):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,s=e.querySelector("[aria-hidden]"),n=e.querySelector("[aria-live]");if(s&&n){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&s.contains(document.activeElement)&&(i=document.activeElement),s.removeAttribute("aria-hidden"),n.appendChild(s),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=sr({type:r,selectors:[["mat-snack-bar-container"]],viewQuery:function(s,n){if(s&1&&(ar(pr,7),ar(Ki,7)),s&2){let i;cr(i=lr())&&(n._portalOutlet=i.first),cr(i=lr())&&(n._label=i.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(s,n){s&1&&ir("animationend",function(o){return n.onAnimationEnd(o.animationName)})("animationcancel",function(o){return n.onAnimationEnd(o.animationName)}),s&2&&xs("mat-snack-bar-container-enter",n._animationState==="visible")("mat-snack-bar-container-exit",n._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!n._animationsDisabled)},features:[Cs],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(s,n){s&1&&(mt(0,"div",1)(1,"div",2,0)(3,"div",3),nr(4,Ji,0,0,"ng-template",4),We(),ws(5,"div"),We()()),s&2&&(je(5),vs("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[pr],styles:["@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2})}return r})();function no(){return new Ee}var io=new rr("mat-snack-bar-default-options",{providedIn:"root",factory:no}),yl=(()=>{class r{_overlay=I(Ds);_live=I(Rs);_injector=I(dt);_breakpointObserver=I(ur);_parentSnackBar=I(r,{optional:!0,skipSelf:!0});_defaultConfig=I(io);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=ro;snackBarContainerComponent=so;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,s){return this._attach(e,s)}openFromTemplate(e,s){return this._attach(e,s)}open(e,s="",n){let i=T(T({},this._defaultConfig),n);return i.data={message:e,action:s},i.announcementMessage===e&&(i.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,s){let n=s&&s.viewContainerRef&&s.viewContainerRef.injector,i=dt.create({parent:n||this._injector,providers:[{provide:Ee,useValue:s}]}),o=new dr(this.snackBarContainerComponent,s.viewContainerRef,i),l=e.attach(o);return l.instance.snackBarConfig=s,l.instance}_attach(e,s){let n=T(T(T({},new Ee),this._defaultConfig),s),i=this._createOverlay(n),o=this._attachSnackBarContainer(i,n),l=new Ve(o,i);if(e instanceof bs){let f=new Ns(e,null,{$implicit:n.data,snackBarRef:l});l.instance=o.attachTemplatePortal(f)}else{let f=this._createInjector(n,l),u=new dr(e,void 0,f),a=o.attachComponentPortal(u);l.instance=a.instance}return this._breakpointObserver.observe(Ps.HandsetPortrait).pipe(hs(i.detachments())).subscribe(f=>{i.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),n.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(n.announcementMessage,n.politeness)}),this._animateSnackBar(l,n),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,s){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),s.duration&&s.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(s.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let s=new Ls;s.direction=e.direction;let n=this._overlay.position().global(),i=e.direction==="rtl",o=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!i||e.horizontalPosition==="end"&&i,l=!o&&e.horizontalPosition!=="center";return o?n.left("0"):l?n.right("0"):n.centerHorizontally(),e.verticalPosition==="top"?n.top("0"):n.bottom("0"),s.positionStrategy=n,this._overlay.create(s)}_createInjector(e,s){let n=e&&e.viewContainerRef&&e.viewContainerRef.injector;return dt.create({parent:n||this._injector,providers:[{provide:Ve,useValue:s},{provide:Is,useValue:e.data}]})}static \u0275fac=function(s){return new(s||r)};static \u0275prov=us({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Or=P(qs(),1);var J=Object.create(null);J.open="0";J.close="1";J.ping="2";J.pong="3";J.message="4";J.upgrade="5";J.noop="6";var $e=Object.create(null);Object.keys(J).forEach(r=>{$e[J[r]]=r});var He={type:"error",data:"parser error"};var Ge=({type:r,data:t},e,s)=>t instanceof ArrayBuffer||ArrayBuffer.isView(t)?s(e?t:"b"+js(t,!0).toString("base64")):s(J[r]+(t||"")),js=(r,t)=>Buffer.isBuffer(r)||r instanceof Uint8Array&&!t?r:r instanceof ArrayBuffer?Buffer.from(r):Buffer.from(r.buffer,r.byteOffset,r.byteLength),yr;function Ws(r,t){if(r.data instanceof ArrayBuffer||ArrayBuffer.isView(r.data))return t(js(r.data,!1));Ge(r,!0,e=>{yr||(yr=new TextEncoder),t(yr.encode(e))})}var ze=(r,t)=>{if(typeof r!="string")return{type:"message",data:Vs(r,t)};let e=r.charAt(0);if(e==="b"){let s=Buffer.from(r.substring(1),"base64");return{type:"message",data:Vs(s,t)}}return $e[e]?r.length>1?{type:$e[e],data:r.substring(1)}:{type:$e[e]}:He},Vs=(r,t)=>{switch(t){case"arraybuffer":return r instanceof ArrayBuffer?r:Buffer.isBuffer(r)?r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength):r.buffer;case"nodebuffer":default:return Buffer.isBuffer(r)?r:Buffer.from(r)}};var $s="",Hs=(r,t)=>{let e=r.length,s=new Array(e),n=0;r.forEach((i,o)=>{Ge(i,!1,l=>{s[o]=l,++n===e&&t(s.join($s))})})},Gs=(r,t)=>{let e=r.split($s),s=[];for(let n=0;n<e.length;n++){let i=ze(e[n],t);if(s.push(i),i.type==="error")break}return s};function zs(){return new TransformStream({transform(r,t){Ws(r,e=>{let s=e.length,n;if(s<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,s);else if(s<65536){n=new Uint8Array(3);let i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{n=new Uint8Array(9);let i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}var br;function _t(r){return r.reduce((t,e)=>t+e.length,0)}function gt(r,t){if(r[0].length===t)return r.shift();let e=new Uint8Array(t),s=0;for(let n=0;n<t;n++)e[n]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),e}function Xs(r,t){br||(br=new TextDecoder);let e=[],s=0,n=-1,i=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(s===0){if(_t(e)<1)break;let f=gt(e,1);i=(f[0]&128)===128,n=f[0]&127,n<126?s=3:n===126?s=1:s=2}else if(s===1){if(_t(e)<2)break;let f=gt(e,2);n=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),s=3}else if(s===2){if(_t(e)<8)break;let f=gt(e,8),u=new DataView(f.buffer,f.byteOffset,f.length),a=u.getUint32(0);if(a>Math.pow(2,21)-1){l.enqueue(He);break}n=a*Math.pow(2,32)+u.getUint32(4),s=3}else{if(_t(e)<n)break;let f=gt(e,n);l.enqueue(ze(i?f:br.decode(f),t)),s=0}if(n===0||n>r){l.enqueue(He);break}}}})}var Cr=4;function S(r){if(r)return ao(r)}function ao(r){for(var t in S.prototype)r[t]=S.prototype[t];return r}S.prototype.on=S.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};S.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,n=0;n<e.length;n++)if(s=e[n],s===t||s.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+r],this};S.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,n=e.length;s<n;++s)e[s].apply(this,t)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};S.prototype.hasListeners=function(r){return!!this.listeners(r).length};var se=process.nextTick,W=global,Ys="nodebuffer";function Ks(){return new vr}function co(r){let t=r.split("; "),e=t[0].indexOf("=");if(e===-1)return;let s=t[0].substring(0,e).trim();if(!s.length)return;let n=t[0].substring(e+1).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));let i={name:s,value:n};for(let o=1;o<t.length;o++){let l=t[o].split("=");if(l.length!==2)continue;let f=l[0].trim(),u=l[1].trim();switch(f){case"Expires":i.expires=new Date(u);break;case"Max-Age":let a=new Date;a.setUTCSeconds(a.getUTCSeconds()+parseInt(u,10)),i.expires=a;break;default:}}return i}var vr=class{constructor(){this._cookies=new Map}parseCookies(t){t&&t.forEach(e=>{let s=co(e);s&&this._cookies.set(s.name,s)})}get cookies(){let t=Date.now();return this._cookies.forEach((e,s)=>{var n;((n=e.expires)===null||n===void 0?void 0:n.getTime())<t&&this._cookies.delete(s)}),this._cookies.entries()}addCookies(t){let e=[];for(let[s,n]of this.cookies)e.push(`${s}=${n.value}`);e.length&&(t.setDisableHeaderCheck(!0),t.setRequestHeader("cookie",e.join("; ")))}appendCookies(t){for(let[e,s]of this.cookies)t.append("cookie",`${e}=${s.value}`)}};function yt(r,...t){return t.reduce((e,s)=>(r.hasOwnProperty(s)&&(e[s]=r[s]),e),{})}var lo=W.setTimeout,fo=W.clearTimeout;function ne(r,t){t.useNativeTimers?(r.setTimeoutFn=lo.bind(W),r.clearTimeoutFn=fo.bind(W)):(r.setTimeoutFn=W.setTimeout.bind(W),r.clearTimeoutFn=W.clearTimeout.bind(W))}var ho=1.33;function Js(r){return typeof r=="string"?uo(r):Math.ceil((r.byteLength||r.size)*ho)}function uo(r){let t=0,e=0;for(let s=0,n=r.length;s<n;s++)t=r.charCodeAt(s),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(s++,e+=4);return e}function bt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Qs(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function Zs(r){let t={},e=r.split("&");for(let s=0,n=e.length;s<n;s++){let i=e[s].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var fn=P(ge(),1),Po=(0,fn.default)("engine.io-client:transport"),St=class extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}},ie=class extends S{constructor(t){super(),this.writable=!1,ne(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,s){return super.emitReserved("error",new St(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"?this.write(t):Po("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=ze(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=Qs(t);return e.length?"?"+e:""}};var hn=P(ge(),1),Q=(0,hn.default)("engine.io-client:polling"),Xe=class extends ie{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{Q("paused"),this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(Q("we are currently polling - waiting to pause"),s++,this.once("pollComplete",function(){Q("pre-pause polling complete"),--s||e()})),this.writable||(Q("we are currently writing - waiting to pause"),s++,this.once("drain",function(){Q("pre-pause writing complete"),--s||e()}))}else e()}_poll(){Q("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Q("polling got data %s",t);let e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Gs(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this._poll():Q('ignoring poll - transport state "%s"',this.readyState))}doClose(){let t=()=>{Q("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Q("transport open - closing"),t()):(Q("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,Hs(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=bt()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var un=!1;try{un=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var dn=un;var mn=P(ge(),1),Sr=(0,mn.default)("engine.io-client:polling");function Io(){}var Ot=class extends Xe{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",s=location.port;s||(s=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,e){let s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){Sr("xhr poll");let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,s)=>{this.onError("xhr poll error",e,s)}),this.pollXhr=t}},Ye=(()=>{class r extends S{constructor(e,s,n){super(),this.createRequest=e,ne(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;let s=yt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;let n=this._xhr=this.createRequest(s);try{Sr("xhr open %s: %s",this._method,this._uri),n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},Sr("xhr data %s",this._data),n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=r.requestsCount++,r.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Io,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete r.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return r.requestsCount=0,r.requests={},r})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",pn);else if(typeof addEventListener=="function"){let r="onpagehide"in W?"pagehide":"unload";addEventListener(r,pn,!1)}}function pn(){for(let r in Ye.requests)Ye.requests.hasOwnProperty(r)&&Ye.requests[r].abort()}var rf=function(){let r=Mo({xdomain:!1});return r&&r.responseType!==null}();function Mo(r){let t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dn))return new XMLHttpRequest}catch{}if(!t)try{return new W[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Uo=Or.default||Or,Te=class extends Ot{request(t={}){var e;return Object.assign(t,{xd:this.xd,cookieJar:(e=this.socket)===null||e===void 0?void 0:e._cookieJar},this.opts),new Ye(s=>new Uo(s),this.uri(),t)}};var Ya=P(bn(),1),Ka=P(Mr(),1),Ja=P(qr(),1),Yr=P(zr(),1),Qa=P(_i(),1);var gi=P(ge(),1),ec=(0,gi.default)("engine.io-client:websocket"),tc=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",jt=class extends ie{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,s=tc?{}:yt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let s=t[e],n=e===t.length-1;Ge(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{ec("websocket closed before onclose event")}n&&se(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=bt()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},Nf=W.WebSocket||W.MozWebSocket;var Be=class extends jt{createSocket(t,e,s){var n;if(!((n=this.socket)===null||n===void 0)&&n._cookieJar){s.headers=s.headers||{},s.headers.cookie=typeof s.headers.cookie=="string"?[s.headers.cookie]:s.headers.cookie||[];for(let[i,o]of this.socket._cookieJar.cookies)s.headers.cookie.push(`${i}=${o.value}`)}return new Yr.default(t,e,s)}doWrite(t,e){let s={};t.options&&(s.compress=t.options.compress),this.opts.perMessageDeflate&&(typeof e=="string"?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1),this.ws.send(e,s)}};var yi=P(ge(),1),ot=(0,yi.default)("engine.io-client:webtransport"),Le=class extends ie{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{ot("transport closed gracefully"),this.onClose()}).catch(t=>{ot("transport closed due to %s",t),this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=Xs(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(e).getReader(),n=zs();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();let i=()=>{s.read().then(({done:l,value:f})=>{if(l){ot("session is closed");return}ot("received chunk: %o",f),this.onPacket(f),i()}).catch(l=>{ot("an error occurred while reading: %s",l)})};i();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let s=t[e],n=e===t.length-1;this._writer.write(s).then(()=>{n&&se(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var Kr={websocket:Be,webtransport:Le,polling:Te};var rc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function De(r){if(r.length>8e3)throw"URI too long";let t=r,e=r.indexOf("["),s=r.indexOf("]");e!=-1&&s!=-1&&(r=r.substring(0,e)+r.substring(e,s).replace(/:/g,";")+r.substring(s,r.length));let n=rc.exec(r||""),i={},o=14;for(;o--;)i[sc[o]]=n[o]||"";return e!=-1&&s!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=nc(i,i.path),i.queryKey=ic(i,i.query),i}function nc(r,t){let e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ic(r,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,i){n&&(e[n]=i)}),e}var bi=P(ge(),1),w=(0,bi.default)("engine.io-client:socket"),Jr=typeof addEventListener=="function"&&typeof removeEventListener=="function",at=[];Jr&&addEventListener("offline",()=>{w("closing %d connection(s) because the network was lost",at.length),at.forEach(r=>r())},!1);var Wt=(()=>{class r extends S{constructor(e,s){if(super(),this.binaryType=Ys,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){let n=De(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=De(s.host).host);ne(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{let i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Zs(this.opts.query)),Jr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(w("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},at.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=Ks()),this._open()}createTransport(e){w('creating transport "%s"',e);let s=Object.assign({},this.opts.query);s.EIO=Cr,s.transport=e,this.id&&(s.sid=this.id);let n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return w("options: %j",n),new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){w("setting transport %s",e.name),this.transport&&(w("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){w("socket open"),this.readyState="open",r.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(w('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else w('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();w("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){let i=this.writeBuffer[n].data;if(i&&(s+=Js(i)),n>0&&s>this._maxPayload)return w("only send %d out of %d packets",n,this.writeBuffer.length),this.writeBuffer.slice(0,n);s+=2}return w("payload size is %d (max: %d)",s,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(w("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,se(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,i){if(typeof s=="function"&&(i=s,s=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:e,data:s,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this._onClose("forced close"),w("socket closing - telling transport to close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(w("socket error %j",e),r.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return w("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(w('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Jr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let n=at.indexOf(this._offlineEventListener);n!==-1&&(w("removing listener for the 'offline' event"),at.splice(n,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}return r.protocol=Cr,r})(),Vt=class extends Wt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){w("starting upgrade probes");for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}}_probe(t){w('probing transport "%s"',t);let e=this.createTransport(t),s=!1;Wt.priorWebsocketSuccess=!1;let n=()=>{s||(w('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",c=>{if(!s)if(c.type==="pong"&&c.data==="probe"){if(w('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Wt.priorWebsocketSuccess=e.name==="websocket",w('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{s||this.readyState!=="closed"&&(w("changing transport and sending upgrade packet"),a(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{w('probe transport "%s" failed',t);let h=new Error("probe error");h.transport=e.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,a(),e.close(),e=null)}let o=c=>{let h=new Error("probe error: "+c);h.transport=e.name,i(),w('probe transport "%s" failed because of error: %s',t,c),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function f(){o("socket closed")}function u(c){e&&c.name!==e.name&&(w('"%s" works - aborting "%s"',c.name,e.name),i())}let a=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",l),this.off("close",f),this.off("upgrading",u)};e.once("open",n),e.once("error",o),e.once("close",l),this.once("close",f),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}},Pe=class extends Vt{constructor(t,e={}){let s=typeof t=="object"?t:e;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(n=>Kr[n]).filter(n=>!!n)),super(t,s)}};var rh=Pe.protocol;var ki=P(ct(),1),wi=(0,ki.default)("socket.io-client:url");function Si(r,t="",e){let s=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(wi("protocol-less url %s",r),typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),wi("parse %s",r),s=De(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(e&&e.port===s.port?"":":"+s.port),s}var cs={};Xi(cs,{Decoder:()=>os,Encoder:()=>is,PacketType:()=>b,protocol:()=>Ii});var wc=typeof ArrayBuffer=="function",kc=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Oi=Object.prototype.toString,Sc=typeof Blob=="function"||typeof Blob<"u"&&Oi.call(Blob)==="[object BlobConstructor]",Oc=typeof File=="function"||typeof File<"u"&&Oi.call(File)==="[object FileConstructor]";function ft(r){return wc&&(r instanceof ArrayBuffer||kc(r))||Sc&&r instanceof Blob||Oc&&r instanceof File}function lt(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,s=r.length;e<s;e++)if(lt(r[e]))return!0;return!1}if(ft(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return lt(r.toJSON(),!0);for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&lt(r[e]))return!0;return!1}function Ti(r){let t=[],e=r.data,s=r;return s.data=es(e,t),s.attachments=t.length,{packet:s,buffers:t}}function es(r,t){if(!r)return r;if(ft(r)){let e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){let e=new Array(r.length);for(let s=0;s<r.length;s++)e[s]=es(r[s],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){let e={};for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=es(r[s],t));return e}return r}function Ri(r,t){return r.data=ts(r.data,t),delete r.attachments,r}function ts(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=ts(r[e],t);else if(typeof r=="object")for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=ts(r[e],t));return r}var Pi=P(Li(),1),ns=(0,Pi.default)("socket.io-parser"),Vc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ii=5,b=function(r){return r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK",r}(b||{}),is=class{constructor(t){this.replacer=t}encode(t){return ns("encoding packet %j",t),(t.type===b.EVENT||t.type===b.ACK)&&lt(t)?this.encodeAsBinary({type:t.type===b.EVENT?b.BINARY_EVENT:b.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===b.BINARY_EVENT||t.type===b.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),ns("encoded %j as %s",t,e),e}encodeAsBinary(t){let e=Ti(t),s=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(s),n}};function Di(r){return Object.prototype.toString.call(r)==="[object Object]"}var os=class r extends S{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let s=e.type===b.BINARY_EVENT;s||e.type===b.BINARY_ACK?(e.type=s?b.EVENT:b.ACK,this.reconstructor=new as(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ft(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,s={type:Number(t.charAt(0))};if(b[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===b.BINARY_EVENT||s.type===b.BINARY_ACK){let i=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let o=t.substring(i,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(e+1)==="/"){let i=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(i,e)}else s.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let i=e+1;for(;++e;){let o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}s.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){let i=this.tryParse(t.substr(e));if(r.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return ns("decoded %s as %j",t,s),s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case b.CONNECT:return Di(e);case b.DISCONNECT:return e===void 0;case b.CONNECT_ERROR:return typeof e=="string"||Di(e);case b.EVENT:case b.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Vc.indexOf(e[0])===-1);case b.ACK:case b.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},as=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=Ri(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function z(r,t,e){return r.on(t,e),function(){r.off(t,e)}}var Mi=P(ct(),1),R=(0,Mi.default)("socket.io-client:socket"),$c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ie=class extends S{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[z(t,"open",this.onopen.bind(this)),z(t,"packet",this.onpacket.bind(this)),z(t,"error",this.onerror.bind(this)),z(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var s,n,i;if($c.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let o={type:b.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let a=this.ids++;R("emitting packet with ack id %d",a);let c=e.pop();this._registerAckCallback(a,c),o.id=a}let l=(n=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||n===void 0?void 0:n.writable,f=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l?R("discard packet as the transport is not currently writable"):f?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o),this.flags={},this}_registerAckCallback(t,e){var s;let n=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&(R("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(l,1));R("event with ack id %d has timed out after %d ms",t,n),e.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(i),e.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((s,n)=>{let i=(o,l)=>o?n(o):s(l);i.withError=!0,e.push(i),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>s!==this._queue[0]?void 0:(n!==null?s.tryCount>this._opts.retries&&(R("packet [%d] is discarded after %d tries",s.id,s.tryCount),this._queue.shift(),e&&e(n)):(R("packet [%d] was successfully sent",s.id),this._queue.shift(),e&&e(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(R("draining queue"),!this.connected||this._queue.length===0)return;let e=this._queue[0];if(e.pending&&!t){R("packet [%d] has already been sent and is waiting for an ack",e.id);return}e.pending=!0,e.tryCount++,R("sending packet [%d] (try n\xB0%d)",e.id,e.tryCount),this.flags=e.flags,this.emit.apply(this,e.args)}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){R("transport is open - connecting"),typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:b.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){R("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){let s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case b.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case b.EVENT:case b.BINARY_EVENT:this.onevent(t);break;case b.ACK:case b.BINARY_ACK:this.onack(t);break;case b.DISCONNECT:this.ondisconnect();break;case b.CONNECT_ERROR:this.destroy();let s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){let e=t.data||[];R("emitting event %j",e),t.id!=null&&(R("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,s=!1;return function(...n){s||(s=!0,R("sending ack %j",n),e.packet({type:b.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];if(typeof e!="function"){R("bad ack %s",t.id);return}delete this.acks[t.id],R("calling ack %s with %j",t.id,t.data),e.withError&&t.data.unshift(null),e.apply(this,t.data)}onconnect(t,e){R("socket connected with id %s",t),this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){R("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(R("performing disconnect (%s)",this.nsp),this.packet({type:b.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let s of e)s.apply(this,t.data)}}};function xe(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}xe.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-e:r+e}return Math.min(r,this.max)|0};xe.prototype.reset=function(){this.attempts=0};xe.prototype.setMin=function(r){this.ms=r};xe.prototype.setMax=function(r){this.max=r};xe.prototype.setJitter=function(r){this.jitter=r};var Ui=P(ct(),1),M=(0,Ui.default)("socket.io-client:manager"),Me=class extends S{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,ne(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new xe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||cs;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(M("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;M("opening %s",this.uri),this.engine=new Pe(this.uri,this.opts);let e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;let n=z(e,"open",function(){s.onopen(),t&&t()}),i=l=>{M("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=z(e,"error",i);if(this._timeout!==!1){let l=this._timeout;M("connect attempt will timeout after %d",l);let f=this.setTimeoutFn(()=>{M("connect attempt timed out after %d",l),n(),i(new Error("timeout")),e.close()},l);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){M("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(z(t,"ping",this.onping.bind(this)),z(t,"data",this.ondata.bind(this)),z(t,"error",this.onerror.bind(this)),z(t,"close",this.onclose.bind(this)),z(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){se(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){M("error",t),this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ie(this,t,e),this.nsps[t]=s),s}_destroy(t){let e=Object.keys(this.nsps);for(let s of e)if(this.nsps[s].active){M("socket %s is still active, skipping close",s);return}this._close()}_packet(t){M("writing packet %j",t);let e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){M("cleanup"),this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){M("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var s;M("closed due to %s",t),this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)M("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();M("will wait %dms before reconnect attempt",e),this._reconnecting=!0;let s=this.setTimeoutFn(()=>{t.skipReconnect||(M("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(M("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):(M("reconnect success"),t.onreconnect())}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ji=P(ct(),1),qi=(0,ji.default)("socket.io-client"),ht={};function ls(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};let e=Si(r,t.path||"/socket.io"),s=e.source,n=e.id,i=e.path,o=ht[n]&&i in ht[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o,f;return l?(qi("ignoring socket cache for %s",s),f=new Me(s,t)):(ht[n]||(qi("new io instance for %s",s),ht[n]=new Me(s,t)),f=ht[n]),e.query&&!t.query&&(t.query=e.queryKey),f.socket(e.path,t)}Object.assign(ls,{Manager:Me,Socket:Ie,io:ls,connect:ls});export{ls as a,Ps as b,yl as c};
