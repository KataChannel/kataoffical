import './polyfills.server.mjs';
import{a as $,b as ee,c as te}from"./chunk-NA7YYZKI.mjs";import"./chunk-7CPTXL6R.mjs";import{a as Y}from"./chunk-PUI3ILXN.mjs";import"./chunk-ECS62SKY.mjs";import"./chunk-Y2756MZK.mjs";import{a as O}from"./chunk-QKGIKIJG.mjs";import"./chunk-BHSUXMGO.mjs";import"./chunk-RYIC57C2.mjs";import"./chunk-CHLRJVWI.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-6NZE3E4I.mjs";import"./chunk-WZNDKZHB.mjs";import{b as j}from"./chunk-ZUTGDXCC.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-DJVSKAKT.mjs";import"./chunk-SP2KDKCD.mjs";import"./chunk-4Y2K6NGQ.mjs";import{f as V}from"./chunk-SYVF2JQC.mjs";import"./chunk-MDLOQUNX.mjs";import{a as Z,b as J,f as K,h as Q,i as X}from"./chunk-56AUOZRI.mjs";import"./chunk-Q67EY3QF.mjs";import{b as G,g as z,j as H,r as q}from"./chunk-GVIKSN7D.mjs";import"./chunk-74XXBECC.mjs";import{a as R,b as N}from"./chunk-2ORXGF5I.mjs";import"./chunk-66R7OOMP.mjs";import{a as W}from"./chunk-H3AAHHYS.mjs";import"./chunk-6U3LNN5D.mjs";import{a as P,d as F}from"./chunk-ZZ5VSWWO.mjs";import{m as T,q as B,s as k}from"./chunk-JRE2ROXT.mjs";import{$b as a,Ac as x,Bc as C,Cc as S,Eb as w,Fb as I,Fc as M,Nb as A,Oa as D,Ob as U,Qb as u,_b as n,ac as f,ec as E,ia as h,ib as y,ic as _,jc as l,lb as b,mb as g,ra as c,rb as d,sa as p,vc as m,yb as L}from"./chunk-6A5EXS4R.mjs";import"./chunk-KB5IWD3E.mjs";import{j as v}from"./chunk-RIAI3ORJ.mjs";var ne=()=>[Q,K,Z,J,G,z,H,R,T],ie=()=>({standalone:!0});function re(r,t){if(r&1&&f(0,"img",15),r&2){let e=l(2);u("src",e.Config.Backgroup.url,y)("alt",e.Config.Backgroup.alt)}}function ae(r,t){if(r&1){let e=E();n(0,"div",1),w(1,re,1,2,"img",2),n(2,"div",3)(3,"div",4)(4,"div",5),f(5,"div",6),n(6,"div",7),f(7,"img",8),n(8,"mat-form-field",9)(9,"mat-label"),m(10,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),a(),n(11,"input",10),S("ngModelChange",function(i){c(e);let s=l();return C(s.User.SDT,i)||(s.User.SDT=i),p(i)}),a(),n(12,"mat-icon",11),m(13,"call"),a()(),n(14,"mat-form-field",9)(15,"mat-label"),m(16,"M\u1EADt kh\u1EA9u"),a(),n(17,"input",12),_("keyup.enter",function(){c(e);let i=l();return p(i.Dangnhap())}),S("ngModelChange",function(i){c(e);let s=l();return C(s.User.password,i)||(s.User.password=i),p(i)}),a(),n(18,"mat-icon",11),m(19,"lock"),a()(),n(20,"div",13),_("click",function(){c(e);let i=l();return p(i.Dangnhap())})("keyup.enter",function(){c(e);let i=l();return p(i.Dangnhap())}),n(21,"span"),m(22,"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n"),a()(),f(23,"div",14),a()()()()()}if(r&2){let e=l();g(),u("ngIf",e.Config==null||e.Config.Backgroup==null?null:e.Config.Backgroup.url),g(6),u("src",e.Config.Logo.url,y)("alt",e.Config.Logo.alt),g(4),x("ngModel",e.User.SDT),u("ngModelOptions",M(9,ie))("placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),g(6),x("ngModel",e.User.password),u("ngModelOptions",M(10,ie))("placeholder","M\u1EADt kh\u1EA9u")}}function le(r,t){}var oe=class r{constructor(t,e,o,i){this.auth=t;this.route=e;this.router=o;this.platformId=i;k(this.platformId)&&(this.tokenadmin=localStorage.getItem("tokenadmin")||null)}tokenadmin;gotonew="translate-x-0";_UserService=h(O);_StorageService=h(W);Config=ee;order1="order-1";order2="order-2";rightpanel="transform-x-0";leftpanel="transform-x-0";User={};_snackBar=h(j);onMessage(t){t.origin}SlidingForm(){this.order1=="order-1"?(this.rightpanel="opacity-0",this.leftpanel="opacity-0"):(this.rightpanel="opacity-100",this.leftpanel="opacity-100"),setTimeout(()=>{this.order1=="order-1"?this.order1="order-2":this.order1="order-1",this.order2=="order-1"?this.order2="order-2":this.order2="order-1",this.rightpanel="opacity-100",this.leftpanel="opacity-100"},200)}ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.tokenadmin;e?this.validatetokenadmin(e):this.router.navigate(["/admin/profile"])})}validatetokenadmin(t){try{let e=JSON.parse(atob(t.split(".")[1]));e.exp&&e.exp<Date.now()/1e3||(this._StorageService.setItem("tokenadmin",t),this._UserService.getProfile().then(o=>{o&&(o.permissions>0?(console.log(o),window.location.reload()):this.router.navigate(["/404",{queryParams:{data:{code:403,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp li\xEAn h\u1EC7 admin"}}}]))}))}catch{}}Dangnhap(){return v(this,null,function*(){if(this.User.SDT&&this.User.SDT!==""&&this.User.password&&this.User.password!=="")try{this._UserService.login(this.User).then(t=>{console.log(t),t&&t[0]?setTimeout(()=>{window.location.reload()},100):this._snackBar.open("Th\xF4ng Tin \u0110\u0103ng Nh\u1EADp Ch\u01B0a \u0110\xFAng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]})})}catch(t){console.error("Login error:",t)}else this._snackBar.open("Vui l\xF2ng \u0111i\u1EC1n \u0111\u1EE7 th\xF4ng tin","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}loginWithGoogle(){return v(this,null,function*(){let t=new Y;try{let e=yield this.auth.signInWithPopup(t);console.log("Logged in:",e),console.log("Logged in:",e.user),console.log("Logged in:",e.user?.providerData[0]),this._UserService.LoginByGoogle(e.user?.providerData[0]).then(o=>{o[0]&&k(this.platformId)})}catch(e){console.error("Login error:",e)}})}loginGoogle(){this._UserService.loginWithGoogle()}loginFacebook(){this._UserService.loginWithFacebook()}loginZalo(){this._UserService.loginWithZalo()}static \u0275fac=function(e){return new(e||r)(d(te),d(P),d(F),d(D))};static \u0275cmp=L({type:r,selectors:[["app-login"]],hostBindings:function(e,o){e&1&&_("message",function(s){return o.onMessage(s)},!1,b)},decls:4,vars:0,consts:[[1e3,100],[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col","bg-slate-100"],["class","object-cover absolute top-0 right-0 w-full h-full",3,"src","alt",4,"ngIf"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"max-h-28","w-auto","rounded-lg",3,"src","alt"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","text","matInput","",1,"w-ful",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matPrefix","",1,"material-symbols-outlined"],["type","password","matInput","",1,"w-full",3,"keyup.enter","ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"text-white","cursor-pointer","lg:w-64","w-full","flex","space-x-2","border","items-center","justify-center","p-4","rounded-lg","bg-blue-400","hover:bg-blue-600",3,"click","keyup.enter"],[1,"cursor-pointer","lg:w-64","w-full"],[1,"object-cover","absolute","top-0","right-0","w-full","h-full",3,"src","alt"]],template:function(e,o){e&1&&(w(0,ae,24,11)(1,le,0,0),A(2,0,ne,1,null,null,0,null,I),U())},dependencies:[X,$,V,q,N,B],encapsulation:2})};export{oe as LoginComponent};
