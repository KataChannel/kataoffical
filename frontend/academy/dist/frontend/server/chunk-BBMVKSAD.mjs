import './polyfills.server.mjs';
import{a as $,b as ee,c as te}from"./chunk-NA7YYZKI.mjs";import"./chunk-7CPTXL6R.mjs";import{a as Y}from"./chunk-PUI3ILXN.mjs";import"./chunk-ECS62SKY.mjs";import"./chunk-Y2756MZK.mjs";import{a as O}from"./chunk-H2VL6A5P.mjs";import"./chunk-BHSUXMGO.mjs";import"./chunk-RYIC57C2.mjs";import"./chunk-CHLRJVWI.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-6NZE3E4I.mjs";import"./chunk-WZNDKZHB.mjs";import{b as j}from"./chunk-ZUTGDXCC.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-DJVSKAKT.mjs";import"./chunk-SP2KDKCD.mjs";import"./chunk-4Y2K6NGQ.mjs";import{f as V}from"./chunk-SYVF2JQC.mjs";import"./chunk-MDLOQUNX.mjs";import{a as Z,b as J,f as K,h as Q,i as X}from"./chunk-56AUOZRI.mjs";import"./chunk-Q67EY3QF.mjs";import{b as G,g as z,j as H,r as q}from"./chunk-GVIKSN7D.mjs";import"./chunk-74XXBECC.mjs";import{a as R,b as N}from"./chunk-2ORXGF5I.mjs";import"./chunk-66R7OOMP.mjs";import{a as W}from"./chunk-H3AAHHYS.mjs";import"./chunk-6U3LNN5D.mjs";import{a as P,d as F}from"./chunk-ZZ5VSWWO.mjs";import{m as T,q as B,s as k}from"./chunk-JRE2ROXT.mjs";import{$b as l,Ac as y,Bc as C,Cc as S,Eb as x,Fb as I,Fc as M,Nb as A,Oa as D,Ob as E,Qb as u,_b as o,ac as f,ec as U,ia as h,ib as w,ic as v,jc as a,lb as b,mb as m,ra as c,rb as d,sa as p,vc as g,yb as L}from"./chunk-6A5EXS4R.mjs";import"./chunk-KB5IWD3E.mjs";import{j as _}from"./chunk-RIAI3ORJ.mjs";var oe=()=>[Q,K,Z,J,G,z,H,R,T],ie=()=>({standalone:!0});function re(r,t){if(r&1&&f(0,"img",15),r&2){let e=a(2);u("src",e.Config.Backgroup.url,w)("alt",e.Config.Backgroup.alt)}}function le(r,t){if(r&1){let e=U();o(0,"div",1),x(1,re,1,2,"img",2),o(2,"div",3)(3,"div",4)(4,"div",5),f(5,"div",6),o(6,"div",7),f(7,"img",8),o(8,"mat-form-field",9)(9,"mat-label"),g(10,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),l(),o(11,"input",10),S("ngModelChange",function(i){c(e);let s=a();return C(s.User.SDT,i)||(s.User.SDT=i),p(i)}),l(),o(12,"mat-icon",11),g(13,"call"),l()(),o(14,"mat-form-field",9)(15,"mat-label"),g(16,"M\u1EADt kh\u1EA9u"),l(),o(17,"input",12),v("keyup.enter",function(){c(e);let i=a();return p(i.Dangnhap())}),S("ngModelChange",function(i){c(e);let s=a();return C(s.User.password,i)||(s.User.password=i),p(i)}),l(),o(18,"mat-icon",11),g(19,"lock"),l()(),o(20,"div",13),v("click",function(){c(e);let i=a();return p(i.Dangnhap())})("keyup.enter",function(){c(e);let i=a();return p(i.Dangnhap())}),o(21,"span"),g(22,"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n"),l()(),f(23,"div",14),l()()()()()}if(r&2){let e=a();m(),u("ngIf",e.Config==null||e.Config.Backgroup==null?null:e.Config.Backgroup.url),m(6),u("src",e.Config.Logo.url,w)("alt",e.Config.Logo.alt),m(4),y("ngModel",e.User.SDT),u("ngModelOptions",M(9,ie))("placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),m(6),y("ngModel",e.User.password),u("ngModelOptions",M(10,ie))("placeholder","M\u1EADt kh\u1EA9u")}}function ae(r,t){}var ne=class r{constructor(t,e,n,i){this.auth=t;this.route=e;this.router=n;this.platformId=i;k(this.platformId)&&(this.token=localStorage.getItem("token")||null)}token;gotonew="translate-x-0";_UserService=h(O);_StorageService=h(W);Config=ee;order1="order-1";order2="order-2";rightpanel="transform-x-0";leftpanel="transform-x-0";User={};_snackBar=h(j);onMessage(t){t.origin}ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.token;e?this.validateToken(e):this.router.navigate(["/admin/profile"])})}validateToken(t){try{let e=JSON.parse(atob(t.split(".")[1]));e.exp&&e.exp<Date.now()/1e3||(this._StorageService.setItem("token",t),this._UserService.getProfile().then(n=>{n&&(n.permissions>0?(console.log(n),window.location.reload()):this.router.navigate(["/404",{queryParams:{data:{code:403,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp li\xEAn h\u1EC7 admin"}}}]))}))}catch{}}Dangnhap(){return _(this,null,function*(){if(this.User.SDT&&this.User.SDT!==""&&this.User.password&&this.User.password!=="")try{this._UserService.login(this.User).then(t=>{console.log(t),t&&t[0]?setTimeout(()=>{window.location.reload()},100):this._snackBar.open("Th\xF4ng Tin \u0110\u0103ng Nh\u1EADp Ch\u01B0a \u0110\xFAng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]})})}catch(t){console.error("Login error:",t)}else this._snackBar.open("Vui l\xF2ng \u0111i\u1EC1n \u0111\u1EE7 th\xF4ng tin","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}loginWithGoogle(){return _(this,null,function*(){let t=new Y;try{let e=yield this.auth.signInWithPopup(t);console.log("Logged in:",e),console.log("Logged in:",e.user),console.log("Logged in:",e.user?.providerData[0]),this._UserService.LoginByGoogle(e.user?.providerData[0]).then(n=>{n[0]&&k(this.platformId)})}catch(e){console.error("Login error:",e)}})}loginGoogle(){this._UserService.loginWithGoogle()}loginFacebook(){this._UserService.loginWithFacebook()}loginZalo(){this._UserService.loginWithZalo()}static \u0275fac=function(e){return new(e||r)(d(te),d(P),d(F),d(D))};static \u0275cmp=L({type:r,selectors:[["app-loginctv"]],hostBindings:function(e,n){e&1&&v("message",function(s){return n.onMessage(s)},!1,b)},decls:4,vars:0,consts:[[1e3,100],[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col","bg-slate-100"],["class","object-cover absolute top-0 right-0 w-full h-full",3,"src","alt",4,"ngIf"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"max-h-28","w-auto","rounded-lg",3,"src","alt"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","text","matInput","",1,"w-ful",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matPrefix","",1,"material-symbols-outlined"],["type","password","matInput","",1,"w-full",3,"keyup.enter","ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"text-white","cursor-pointer","lg:w-64","w-full","flex","space-x-2","border","items-center","justify-center","p-4","rounded-lg","bg-blue-400","hover:bg-blue-600",3,"click","keyup.enter"],[1,"cursor-pointer","lg:w-64","w-full"],[1,"object-cover","absolute","top-0","right-0","w-full","h-full",3,"src","alt"]],template:function(e,n){e&1&&(x(0,le,24,11)(1,ae,0,0),A(2,0,oe,1,null,null,0,null,I),E())},dependencies:[X,$,V,q,N,B],encapsulation:2})};export{ne as LoginctvComponent};
