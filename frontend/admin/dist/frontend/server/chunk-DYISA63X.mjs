import './polyfills.server.mjs';
import{a as te}from"./chunk-6U6JJK6G.mjs";import{a as ee}from"./chunk-YSLXKGUD.mjs";import{a as ie}from"./chunk-2EGY7577.mjs";import{a as Z,b as $}from"./chunk-42J6SS5M.mjs";import"./chunk-DLEZTIB3.mjs";import"./chunk-MGIVCIKU.mjs";import"./chunk-77P5JUNT.mjs";import"./chunk-FH7OS6DF.mjs";import"./chunk-LWKKJ4PR.mjs";import"./chunk-3VPIAQQA.mjs";import{h as O}from"./chunk-POLMJMAI.mjs";import"./chunk-KYGAVK76.mjs";import"./chunk-U4C5JQFR.mjs";import"./chunk-ASU5MRMA.mjs";import"./chunk-MS5OVDVH.mjs";import{b as Y}from"./chunk-7AYQJAGL.mjs";import"./chunk-WXBGSALG.mjs";import"./chunk-CREX4RSV.mjs";import"./chunk-WZNDKZHB.mjs";import"./chunk-3VNUVZLC.mjs";import"./chunk-KANEWG3T.mjs";import"./chunk-73IBRO6I.mjs";import{b as N}from"./chunk-VF5Q6K46.mjs";import"./chunk-ZPDI4CY6.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-W2YJL7J2.mjs";import"./chunk-ZJKKS445.mjs";import"./chunk-OIJDS23S.mjs";import{a as V,d as A,f as L}from"./chunk-IHWPUGGA.mjs";import"./chunk-DCVFRA5C.mjs";import{b as z,g as H,j as G,n as K,p as X,u as q,v as J,x as Q,y as U}from"./chunk-WUQWAWTO.mjs";import"./chunk-32EHPFFO.mjs";import"./chunk-TGDDM6BV.mjs";import{a as W,b as j}from"./chunk-QJDJQTXG.mjs";import"./chunk-XKXP2RUB.mjs";import"./chunk-6DQYI672.mjs";import"./chunk-ZWDAKQIO.mjs";import"./chunk-4XDGJSOY.mjs";import{a as F,d as B}from"./chunk-UQQNYJYM.mjs";import{m as T,q as I}from"./chunk-CUMEY6SW.mjs";import{$b as r,Ac as y,Bc as E,Cc as w,Eb as C,Ja as R,Qb as d,Wb as b,Yb as M,Zb as k,_b as n,bc as D,cc as v,ec as f,ia as _,ic as u,jc as c,mb as s,ra as g,sa as h,vc as a,wc as x,yb as S,yc as P}from"./chunk-5VVDLW6A.mjs";import"./chunk-KB5IWD3E.mjs";import{j as p}from"./chunk-RIAI3ORJ.mjs";function oe(l,e){if(l&1){let t=f();n(0,"button",1),u("click",function(){g(t);let o=c();return h(o.handleRoleAction())}),n(1,"mat-icon"),a(2,"save"),r()()}}function re(l,e){if(l&1){let t=f();n(0,"button",1),u("click",function(){g(t);let o=c();return h(o.toggleEdit())}),n(1,"mat-icon"),a(2,"edit"),r()()}}function le(l,e){if(l&1){let t=f();D(0),n(1,"div",9)(2,"div",10),a(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),n(4,"div",11)(5,"button",12),u("click",function(){g(t);let o=c();return h(o.DeleteData())}),a(6,"\u0110\u1ED3ng \xDD"),r(),n(7,"button",13),u("click",function(){g(t);let o=c();return h(o.toggleDelete())}),a(8,"Hu\u1EF7 B\u1ECF"),r()()(),v()}}function ae(l,e){if(l&1){let t=f();n(0,"mat-slide-toggle",19),u("change",function(){let o=g(t).$implicit,m=c(2);return h(m.togglePermission(o))}),a(1),r()}if(l&2){let t=e.$implicit,i=c(2);d("disabled",!i.isEdit())("checked",t.hasPermission),s(),P(" ",t.name," - (",t.description||"Ch\u01B0a M\xF4 T\u1EA3",") ")}}function se(l,e){if(l&1){let t=f();D(0),n(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),a(4,"T\xEAn Nh\xF3m"),r(),n(5,"input",16),w("ngModelChange",function(o){g(t);let m=c();return E(m.DetailRole.name,o)||(m.DetailRole.name=o),h(o)}),r()()(),n(6,"div",17),M(7,ae,2,4,"mat-slide-toggle",18,b),r(),v()}if(l&2){let t=c();s(5),y("ngModel",t.DetailRole.name),d("disabled",!t.isEdit()),s(2),k(t.filterPermission)}}var ne=class l{_ListroleComponent=_(te);_RoleService=_(ee);_PermissionService=_(ie);_route=_(F);_router=_(B);_snackBar=_(N);ListPermission=[];filterPermission=[];idRole=0;constructor(){this._route.paramMap.subscribe(e=>p(this,null,function*(){this.idRole=e.get("id")}))}DetailRole={};isEdit=R(!1);isDelete=R(!1);ngOnInit(){return p(this,null,function*(){yield this._PermissionService.getAllPermission(),this.ListPermission=this._PermissionService.ListPermission(),this.idRole?this.idRole==="0"?(this._ListroleComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/nhomuser","0"])):(yield this._RoleService.getRoleByid(this.idRole).then(()=>{this.DetailRole=this._RoleService.DetailRole(),this.filterPermission=this.ListPermission.map(e=>(this.DetailRole?.permissions?.length>0&&(e.hasPermission=!!this.DetailRole?.permissions.find(t=>t.permissionId===e.id)),e))}),this._ListroleComponent.drawer.open(),this._router.navigate(["/admin/nhomuser",this.idRole])):(this._router.navigate(["/admin/nhomuser"]),this._ListroleComponent.drawer.close())})}handleRoleAction(){return p(this,null,function*(){this.idRole==="0"?yield this.createRole():yield this.updateRole()})}createRole(){return p(this,null,function*(){console.log(this.DetailRole);try{yield this._RoleService.CreateRole(this.DetailRole),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi t\u1EA1o role:",e)}})}updateRole(){return p(this,null,function*(){try{yield this._RoleService.updateRole(this.DetailRole),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt role:",e)}})}DeleteData(){return p(this,null,function*(){try{yield this._RoleService.DeleteRole(this.DetailRole),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/nhomuser"])}catch(e){console.error("L\u1ED7i khi x\xF3a role:",e)}})}goBack(){this._router.navigate(["/admin/nhomuser"]),this._ListroleComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){}togglePermission(e){e.hasPermission=!e.hasPermission,console.log(e),e.hasPermission?this._RoleService.assignPermissionToRole({roleId:this.idRole,permissionId:e.id}):this._RoleService.removePermissionFromRole({roleId:this.idRole,permissionId:e.id})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=S({type:l,selectors:[["app-detailrole"]],decls:17,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn Nh\xF3m",3,"ngModelChange","ngModel","disabled"],[1,"grid","grid-cols-3","gap-2"],[3,"disabled","checked"],[3,"change","disabled","checked"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"button",1),u("click",function(){return i.goBack()}),n(2,"mat-icon"),a(3,"arrow_back"),r()(),n(4,"div",2),a(5),r(),n(6,"div",3)(7,"mat-slide-toggle",4),w("ngModelChange",function(m){return E(i.DetailRole.isActive,m)||(i.DetailRole.isActive=m),m}),a(8),r(),C(9,oe,3,0,"button",5)(10,re,3,0,"button",5),n(11,"button",6),u("click",function(){return i.toggleDelete()}),n(12,"mat-icon"),a(13,"delete"),r()()()(),n(14,"div",7),C(15,le,9,0,"ng-container",8)(16,se,9,2,"ng-container",8),r()),t&2&&(s(5),x((i.DetailRole==null?null:i.DetailRole.name)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),s(2),y("ngModel",i.DetailRole.isActive),d("disabled",!i.isEdit()),s(),x(i.DetailRole.isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),d("ngIf",i.isEdit()),s(),d("ngIf",!i.isEdit()),s(5),d("ngIf",i.isDelete()),s(),d("ngIf",!i.isDelete()))},dependencies:[J,q,X,U,Q,K,z,H,G,j,W,L,A,V,Y,O,I,T,$,Z],encapsulation:2})};export{ne as DetailRoleComponent};
