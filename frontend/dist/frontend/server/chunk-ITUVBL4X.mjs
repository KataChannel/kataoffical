import './polyfills.server.mjs';
import{a as Y}from"./chunk-MGIVCIKU.mjs";import{ja as g}from"./chunk-5IMI5WTE.mjs";import{a as c,g as y}from"./chunk-RIAI3ORJ.mjs";var a=y(Y());var u=class s{toUTC(n,r){if(!n)return"";if(r&&["ngaygiao","ngaynhan"].includes(r)&&console.log(`\u{1F504} Frontend converting ${r}: ${n} to UTC`),typeof n=="string"&&n.match(/^\d{4}-\d{2}-\d{2}$/)){let o=(0,a.default)(n,"YYYY-MM-DD").utc().toISOString();return r&&["ngaygiao","ngaynhan"].includes(r)&&console.log(`\u2705 Frontend converted ${r}: ${o}`),o}let t=(0,a.default)(n).utc().toISOString();return r&&["ngaygiao","ngaynhan"].includes(r)&&console.log(`\u2705 Frontend converted ${r}: ${t}`),t}fromUTC(n,r="YYYY-MM-DD"){return n?a.default.utc(n).local().format(r):""}nowUTC(){return(0,a.default)().utc().toISOString()}nowLocal(n="YYYY-MM-DD"){return(0,a.default)().format(n)}isAfter(n,r){return a.default.utc(n).isAfter(a.default.utc(r))}isBefore(n,r){return a.default.utc(n).isBefore(a.default.utc(r))}isSameDay(n,r){return a.default.utc(n).format("YYYY-MM-DD")===a.default.utc(r).format("YYYY-MM-DD")}addDays(n,r,t="YYYY-MM-DD"){return a.default.utc(n).add(r,"days").format(t)}diffInDays(n,r){return a.default.utc(r).diff(a.default.utc(n),"days")}isValidDate(n,r="YYYY-MM-DD"){return(0,a.default)(n,r,!0).isValid()}formDateToUTC(n){return n?n instanceof Date?(0,a.default)(n).utc().toISOString():typeof n=="string"?this.toUTC(n):(0,a.default)(n).utc().toISOString():""}utcToFormDate(n,r=!1){return n?r?a.default.utc(n).local().toDate():a.default.utc(n).local().format("YYYY-MM-DD"):null}formatForDisplay(n,r="DD/MM/YYYY"){return n?a.default.utc(n).local().format(r):""}parseUserInputToUTC(n,r="YYYY-MM-DD"){if(!n)return"";let t=(0,a.default)(n,r);if(!t.isValid())throw new Error(`Invalid date format: ${n}`);return t.utc().toISOString()}getUTCDateRange(n,r){let t="",o="";return n&&(t=(0,a.default)(n).startOf("day").utc().toISOString()),r&&(o=(0,a.default)(r).endOf("day").utc().toISOString()),{startUTC:t,endUTC:o}}getAPIDateRange(n,r){let t=this.getUTCDateRange(n,r);return{Batdau:t.startUTC,Ketthuc:t.endUTC}}synchronizeObjectDates(n,r=["ngaygiao","ngaynhan"]){if(!n||typeof n!="object")return n;let t=c({},n);return r.forEach(o=>{if(t[o]!==void 0&&t[o]!==null){console.log(`\u{1F504} Frontend synchronizing ${o}: ${t[o]}`);try{t[o]=this.toUTC(t[o],o),console.log(`\u2705 Frontend synchronized ${o}: ${t[o]}`)}catch(i){throw console.error(`\u274C Error synchronizing ${o}:`,i),new Error(`Failed to synchronize ${o}: ${i instanceof Error?i.message:String(i)}`)}}}),t}formatForDisplayEnhanced(n,r="DD/MM/YYYY",t){if(!n)return"";try{let o=a.default.utc(n).local().format(r);return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u{1F4C5} Frontend displaying ${t}: ${n} \u2192 ${o}`),o}catch(o){return console.error("Error formatting date for display:",o),""}}validateDateSync(n,r,t){if(!n||!r)return!1;try{let o=this.toUTC(n),i=a.default.utc(r).toISOString(),e=o===i;return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u{1F50D} Date sync validation for ${t}:`,{client:o,server:i,match:e}),e}catch(o){return console.error("Error validating date sync:",o),!1}}static \u0275fac=function(r){return new(r||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})};export{u as a};
