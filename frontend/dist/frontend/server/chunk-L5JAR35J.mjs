import './polyfills.server.mjs';
import{a as re}from"./chunk-MAW4ZPLU.mjs";import{a as ae}from"./chunk-CCCXFHXW.mjs";import{a as oe}from"./chunk-KKGWPRFL.mjs";import"./chunk-PNFTAZUM.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-FMDRTRUK.mjs";import"./chunk-PDYHWB5Z.mjs";import{a as ne,b as ie}from"./chunk-GDUA5DGH.mjs";import"./chunk-X6IKIMW6.mjs";import{h as J}from"./chunk-4LVN7SW6.mjs";import"./chunk-26NM6QMQ.mjs";import"./chunk-VW5LHHQG.mjs";import{b as ee}from"./chunk-XXX4GZPH.mjs";import{d as te}from"./chunk-SWDJOT3A.mjs";import"./chunk-FRD524V3.mjs";import{b as j,c as z,d as G}from"./chunk-ORWV4BGB.mjs";import{a as R,b as O}from"./chunk-ZLSCS2G7.mjs";import{b as H,g as K,j as X,n as q,p as Q,u as U,v as Y,x as Z,y as $}from"./chunk-DXSBLPBS.mjs";import"./chunk-LLHDMVDC.mjs";import"./chunk-7ZQLLCLM.mjs";import{a as P}from"./chunk-GX3T7A5D.mjs";import"./chunk-4F6P437N.mjs";import"./chunk-JIMR36ID.mjs";import{a as A,c as B,e as W}from"./chunk-FDHKPA24.mjs";import"./chunk-F5IGDJ4O.mjs";import"./chunk-7T6LZHUD.mjs";import{a as L,d as I}from"./chunk-7FNXQ3TW.mjs";import"./chunk-3SL5GKZI.mjs";import{n as F,o as T,w as V}from"./chunk-NOPYZMUE.mjs";import{Gb as v,Ic as w,Jc as c,Kc as M,Lc as E,Nb as x,Oc as _,Pc as f,Qc as C,Ra as N,Zb as h,jc as a,kc as o,mc as D,nc as b,oa as S,pc as y,tb as l,uc as g,wc as m,xa as p,xd as k,ya as u}from"./chunk-UIMG47TQ.mjs";import"./chunk-KB5IWD3E.mjs";import{j as d}from"./chunk-RIAI3ORJ.mjs";function le(s,n){if(s&1){let i=y();a(0,"button",3),g("click",function(){p(i);let t=m();return u(t.handleNhacungcapAction())}),a(1,"mat-icon"),c(2,"save"),o()()}}function se(s,n){if(s&1){let i=y();a(0,"button",3),g("click",function(){p(i);let t=m();return u(t.toggleEdit())}),a(1,"mat-icon"),c(2,"edit"),o()()}}function pe(s,n){if(s&1){let i=y();D(0),a(1,"div",11)(2,"div",12),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),a(4,"div",13)(5,"button",14),g("click",function(){p(i);let t=m();return u(t.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),o(),a(7,"button",15),g("click",function(){p(i);let t=m();return u(t.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),o()()(),b()}}function ue(s,n){s&1&&(a(0,"span",39),c(1,"check"),o())}function me(s,n){if(s&1){let i=y();a(0,"div",37),g("click",function(){let t=p(i).$implicit,r=m(2);return u(r.ChosenItem(t))}),x(1,ue,2,0,"span",38),a(2,"span"),c(3),o()()}if(s&2){let i=n.$implicit,e=m(2);l(),h("ngIf",e.CheckItem(i)),l(2),E(" ",i.title," ")}}function he(s,n){if(s&1&&(a(0,"button",40),c(1),o()),s&2){let i=n.$implicit;l(),E(" ",i.title," ")}}function ge(s,n){if(s&1){let i=y();D(0),a(1,"div",16)(2,"mat-form-field",17)(3,"mat-label"),c(4,"T\xEAn Nh\xE0 Cung C\u1EA5p"),o(),a(5,"input",18),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().name,t)||(r.DetailNhacungcap().name=t),u(t)}),o()(),a(6,"mat-form-field",17)(7,"mat-label"),c(8,"M\xE3 Nh\xE0 Cung C\u1EA5p"),o(),a(9,"input",19),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().mancc,t)||(r.DetailNhacungcap().mancc=t),u(t)}),o()(),a(10,"mat-form-field",17)(11,"mat-label"),c(12,"\u0110\u1ECBa Ch\u1EC9"),o(),a(13,"input",20),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().diachi,t)||(r.DetailNhacungcap().diachi=t),u(t)}),o()(),a(14,"mat-form-field",17)(15,"mat-label"),c(16,"Email"),o(),a(17,"input",21),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().email,t)||(r.DetailNhacungcap().email=t),u(t)}),o()(),a(18,"mat-form-field",17)(19,"mat-label"),c(20,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),o(),a(21,"input",22),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().sdt,t)||(r.DetailNhacungcap().sdt=t),u(t)}),o()(),a(22,"mat-form-field",17)(23,"mat-label"),c(24,"Ghi Ch\xFA"),o(),a(25,"textarea",23),C("ngModelChange",function(t){p(i);let r=m();return f(r.DetailNhacungcap().ghichu,t)||(r.DetailNhacungcap().ghichu=t),u(t)}),o()(),a(26,"div",24)(27,"button",25,0),c(29),o(),a(30,"mat-menu",null,1)(32,"div",26),g("click",function(t){return p(i),u(t.stopPropagation())}),a(33,"div",27)(34,"input",28),g("keyup",function(t){p(i);let r=m();return u(r.doSearch(t))}),o(),a(35,"div",29)(36,"span",30),c(37,"search"),o()()(),a(38,"div",31)(39,"div",5)(40,"span",32),g("click",function(){p(i);let t=m();return u(t.ChosenAll())}),c(41),o(),a(42,"span",32),g("click",function(){p(i);let t=m();return u(t.EmptyFiter())}),c(43,"Xo\xE1"),o()(),a(44,"span",32),g("click",function(){p(i);let t=m();return u(t.ResetFilter())}),c(45,"Reset"),o()(),a(46,"div",33),x(47,me,4,2,"div",34),o(),a(48,"div",35)(49,"button",15),g("click",function(){p(i);let t=w(28);return u(t.closeMenu())}),c(50,"\u0110\xF3ng"),o(),a(51,"button",14),g("click",function(){p(i);let t=w(28),r=m();return u(r.ApplyFilterColum(t))}),c(52,"\xC1p D\u1EE5ng"),o()()()(),x(53,he,2,1,"button",36),o()(),b()}if(s&2){let i=w(31),e=m();l(5),_("ngModel",e.DetailNhacungcap().name),h("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailNhacungcap().mancc),h("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailNhacungcap().diachi),h("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailNhacungcap().email),h("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailNhacungcap().sdt),h("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailNhacungcap().ghichu),h("disabled",!e.isEdit()),l(2),h("disabled",!e.isEdit())("matMenuTriggerFor",i),l(2),E(" S\u1EA3n Ph\u1EA9m (",e.ChosenListSanpham.length||0,") "),l(12),E("Ch\u1ECDn T\u1EA5t C\u1EA3 ",e.FilterSanpham.length||0,""),l(6),h("ngForOf",e.FilterSanpham)("ngForTrackBy",e.trackByFn),l(6),h("ngForOf",e.ChosenListSanpham)}}var ce=class s{_ListnhacungcapComponent=S(re);_NhacungcapService=S(ae);_SanphamService=S(oe);_route=S(L);_router=S(I);_snackBar=S(P);constructor(){this._route.paramMap.subscribe(n=>{let i=n.get("id");this._NhacungcapService.setNhacungcapId(i)}),k(()=>d(this,null,function*(){let n=this._NhacungcapService.nhacungcapId();yield this._SanphamService.getAllSanpham(),this.ListSanpham=this.FilterSanpham=this._SanphamService.ListSanpham(),n||(this._router.navigate(["/admin/nhacungcap"]),this._ListnhacungcapComponent.drawer.close()),n==="new"?(this.DetailNhacungcap.set({Sanpham:[],isActive:!0}),this._ListnhacungcapComponent.drawer.open(),this.isEdit.update(i=>!i),this._router.navigate(["/admin/nhacungcap","new"])):(yield this._NhacungcapService.getNhacungcapBy({id:n,isOne:!0}),this.ChosenListSanpham=this.DetailNhacungcap()?.Sanpham||[],this._ListnhacungcapComponent.drawer.open(),console.log(n),this._router.navigate(["/admin/nhacungcap",n]))}))}DetailNhacungcap=this._NhacungcapService.DetailNhacungcap;isEdit=N(!1);isDelete=N(!1);nhacungcapId=this._NhacungcapService.nhacungcapId;ngOnInit(){return d(this,null,function*(){this.ChosenListSanpham=this.DetailNhacungcap()?.Sanpham||[]})}handleNhacungcapAction(){return d(this,null,function*(){this.nhacungcapId()==="new"?yield this.createNhacungcap():yield this.updateNhacungcap()})}createNhacungcap(){return d(this,null,function*(){try{yield this._NhacungcapService.CreateNhacungcap(this.DetailNhacungcap()),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o nhacungcap:",n)}})}updateNhacungcap(){return d(this,null,function*(){try{yield this._NhacungcapService.updateNhacungcap(this.DetailNhacungcap()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt nhacungcap:",n)}})}DeleteData(){return d(this,null,function*(){try{yield this._NhacungcapService.DeleteNhacungcap(this.DetailNhacungcap()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/nhacungcap"])}catch(n){console.error("L\u1ED7i khi x\xF3a nhacungcap:",n)}})}goBack(){this._router.navigate(["/admin/nhacungcap"]),this._ListnhacungcapComponent.drawer.close()}trackByFn(n,i){return i.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailNhacungcap.update(n=>(n.slug=te(n.title),n))}ListSanpham=[];FilterSanpham=[];ChosenListSanpham=[];doSearch(n){return d(this,null,function*(){let i=n.target.value.toLowerCase();yield this._SanphamService.getSanphamBy({subtitle:i,title:i,pageSize:1e3}),this.FilterSanpham=this._SanphamService.ListSanpham()})}ChosenAll(){this.FilterSanpham.forEach(n=>{this.ChosenListSanpham.some(e=>e.id===n.id)?this.ChosenListSanpham=this.ChosenListSanpham.filter(e=>e.id!==n.id):this.ChosenListSanpham=[...this.ChosenListSanpham,n]})}EmptyFiter(){this.ChosenListSanpham=[]}ResetFilter(){return d(this,null,function*(){yield this._SanphamService.getSanphamBy({subtitle:"",title:"",pageSize:1e3}),this.ChosenListSanpham=this._SanphamService.ListSanpham()})}ChosenItem(n){if(this.ChosenListSanpham.some(e=>e.id===n.id))this.ChosenListSanpham=this.ChosenListSanpham.filter(e=>e.id!==n.id);else{let e=this.ListSanpham.find(t=>t.id===n.id);e&&(this.ChosenListSanpham=[...this.ChosenListSanpham,e])}}CheckItem(n){return this.ChosenListSanpham.some(i=>i.id===n.id)}ApplyFilterColum(n){this.DetailNhacungcap.update(i=>(i.Sanpham=this.ChosenListSanpham,i)),n.closeMenu()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=v({type:s,selectors:[["app-detailnhacungcap"]],decls:17,vars:8,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","grid","lg:grid-cols-2","gap-2","p-2"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn Nh\xE0 Cung C\u1EA5p",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 Nh\xE0 Cung C\u1EA5p",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u1ECBa Ch\u1EC9",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","ngModel","disabled"],[1,"lg:col-span-2","py-2","w-full","flex","flex-wrap","gap-2"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","disabled","true",4,"ngFor","ngForOf"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["mat-flat-button","","disabled","true"]],template:function(i,e){if(i&1&&(a(0,"div",2)(1,"button",3),g("click",function(){return e.goBack()}),a(2,"mat-icon"),c(3,"arrow_back"),o()(),a(4,"div",4),c(5),o(),a(6,"div",5)(7,"mat-slide-toggle",6),C("ngModelChange",function(r){return f(e.DetailNhacungcap().isActive,r)||(e.DetailNhacungcap().isActive=r),r}),c(8),o(),x(9,le,3,0,"button",7)(10,se,3,0,"button",7),a(11,"button",8),g("click",function(){return e.toggleDelete()}),a(12,"mat-icon"),c(13,"delete"),o()()()(),a(14,"div",9),x(15,pe,9,0,"ng-container",10)(16,ge,54,19,"ng-container",10),o()),i&2){let t;l(5),M(((t=e.DetailNhacungcap())==null?null:t.name)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l(2),_("ngModel",e.DetailNhacungcap().isActive),h("disabled",!e.isEdit()),l(),M(e.DetailNhacungcap().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),l(),h("ngIf",e.isEdit()),l(),h("ngIf",!e.isEdit()),l(5),h("ngIf",e.isDelete()),l(),h("ngIf",!e.isDelete())}},dependencies:[Y,U,Q,$,Z,q,H,K,X,O,R,W,A,B,ee,J,V,F,T,ie,ne,G,j,z],encapsulation:2,changeDetection:0})};export{ce as DetailNhacungcapComponent};
