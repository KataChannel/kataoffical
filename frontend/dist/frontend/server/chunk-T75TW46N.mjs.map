{
  "version": 3,
  "sources": ["src/app/admin/userguide/userguide.service.ts"],
  "sourcesContent": ["import { inject, Injectable, signal, Signal } from '@angular/core';\nimport { environment } from '../../../environments/environment.development';\nimport { StorageService } from '../../shared/utils/storage.service';\nimport { ErrorLogService } from '../../shared/services/errorlog.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n  @Injectable({\n    providedIn: 'root'\n  })\n  export class UserguideService {\n    constructor(\n      private _StorageService: StorageService,\n      private _ErrorLogService: ErrorLogService,\n      private _snackBar: MatSnackBar = inject(MatSnackBar),\n    ) { }\n    ListUserguide = signal<any[]>([]);\n    DetailUserguide = signal<any>({});\n    userguideId = signal<string | null>(null);\n    setUserguideId(id: string | null) {\n      this.userguideId.set(id);\n    }\n    async CreateUserguide(dulieu: any) {\n      try {\n        const options = {\n            method:'POST',\n            headers: {\n              'Content-Type': 'application/json',  \n              'Authorization': `Bearer ${this._StorageService.getItem('token')}`\n            },\n            body: JSON.stringify(dulieu),\n          };\n          const response = await fetch(`${environment.APIURL}/userguide`, options);\n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          const data = await response.json();\n          if (!response.ok) {\n            this.handleError(response.status);\n          }\n          this.getAllUserguide()\n          this.userguideId.set(data.id)\n      } catch (error) {\n          this._ErrorLogService.logError('Failed to CreateUserguide', error);\n          return console.error(error);\n      }\n    }\n  \n    async getAllUserguide() {\n      try {\n        const options = {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n              \n          },\n        };\n        const response = await fetch(`${environment.APIURL}/userguide`, options);\n        if (!response.ok) {\n          this.handleError(response.status);\n        }\n        const data = await response.json();\n        this.ListUserguide.set(data.data);\n        return data.data;\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  \n    \n    async getUserguideBy(param: any) {\n      try {\n        const options = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${this._StorageService.getItem('token')}`\n          },\n          body: JSON.stringify(param),\n        };\n        const response = await fetch(`${environment.APIURL}/userguide/findby`, options);      \n        if (!response.ok) {\n          this.handleError(response.status);\n        }\n        const data = await response.json();      \n        this.DetailUserguide.set(data.data[0])\n      } catch (error) {\n        this._ErrorLogService.logError('Failed to getUserguideBy', error);\n        return console.error(error);\n      }\n    }\n    async updateUserguide(dulieu: any) {\n      try {\n        const options = {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this._StorageService.getItem('token')}`\n            },\n            body: JSON.stringify(dulieu),\n          };\n          const response = await fetch(`${environment.APIURL}/userguide/${dulieu.id}`, options);\n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          const data = await response.json();\n          if (!response.ok) {\n            this.handleError(response.status);\n          }\n          await this.getAllUserguide();\n          // await this.getUserguideBy({id:data.data[0].id});\n      } catch (error) {\n         this._ErrorLogService.logError('Failed to updateUserguide', error);\n          return console.error(error);\n      }\n    }\n    async DeleteUserguide(item:any) {    \n      try {\n          const options = {\n              method:'DELETE',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n            };\n            const response = await fetch(`${environment.APIURL}/userguide/${item.id}`, options);\n            if (!response.ok) {\n              this.handleError(response.status);\n            }\n            this.getAllUserguide()\n        } catch (error) {\n          this._ErrorLogService.logError('Failed to DeleteUserguide', error);\n            return console.error(error);\n        }\n    }\n    private handleError(status: number) {\n      let message = 'Lỗi không xác định';\n      switch (status) {\n        case 400:\n          message = 'Thông tin đã tồn tại';\n          this._snackBar.open(message, '', {\n            duration: 1000,\n            horizontalPosition: \"end\",\n            verticalPosition: \"top\",\n            panelClass: ['snackbar-error'],\n          });\n          break;\n        case 404:\n          message = 'Vui lòng đăng nhập lại';\n          //this._StorageService.removeItem('token');\n          //this._StorageService.removeItem('permissions');\n          //this.router.navigate(['/login']);\n          break;\n        case 401:\n          message = 'Vui lòng đăng nhập lại';\n          //this._StorageService.removeItem('token');\n          //this._StorageService.removeItem('permissions');\n          //this.router.navigate(['/login']);\n          break;\n        case 403:\n          message = 'Bạn không có quyền truy cập';\n          this._snackBar.open(message, '', {\n            duration: 1000,\n            horizontalPosition: \"end\",\n            verticalPosition: \"top\",\n            panelClass: ['snackbar-error'],\n          });\n          break;\n        case 500:\n          message = 'Lỗi máy chủ, vui lòng thử lại sau';\n            this._snackBar.open(message, '', {\n            duration: 1000,\n            horizontalPosition: \"end\",\n            verticalPosition: \"top\",\n            panelClass: ['snackbar-error'],\n          });\n          break;\n        default:\n          this._snackBar.open(message, '', {\n            duration: 1000,\n            horizontalPosition: \"end\",\n            verticalPosition: \"top\",\n            panelClass: ['snackbar-error'],\n          });\n          break;\n      }\n      const result = JSON.stringify({ code: status, title: message });\n      // this.router.navigate(['/errorserver'], { queryParams: { data: result } });\n    }\n  }"],
  "mappings": "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",
  "names": []
}
