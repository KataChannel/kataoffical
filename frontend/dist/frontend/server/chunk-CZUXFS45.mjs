import './polyfills.server.mjs';
import{a as Et,b as Dt,c as wt,d as kt,e as Tt}from"./chunk-JE2A5Y3K.mjs";import{b as W}from"./chunk-TSQ4X23A.mjs";import{b as ot,c as at,d as rt,e as ct,g as lt,h as dt,j as mt,k as gt,m as ht,n as st,p as ut,r as pt,s as Ct}from"./chunk-5BBGYI5R.mjs";import{a as Ot,b as Pt,c as bt,d as yt,e as vt}from"./chunk-4IFLAKZY.mjs";import{a as _t,b as ft,c as Mt,k as xt}from"./chunk-EZYOKNQH.mjs";import{a as It}from"./chunk-MGIVCIKU.mjs";import{a as z,b as Y}from"./chunk-5M63TDDJ.mjs";import{A as it,b as j,g as R,h as G,i as q,j as Q,k as U,n as X,o as J,q as Z,t as $,w as tt,x as et,z as nt}from"./chunk-GS6CKRHG.mjs";import"./chunk-LLHDMVDC.mjs";import"./chunk-7ZQLLCLM.mjs";import{a as F}from"./chunk-CG43H366.mjs";import"./chunk-ZNMWBP6O.mjs";import{a as L,e as H}from"./chunk-NORDYRBX.mjs";import"./chunk-IUNZBB2E.mjs";import"./chunk-O3DAWGN3.mjs";import"./chunk-7T6LZHUD.mjs";import{a as V,d as A}from"./chunk-7FNXQ3TW.mjs";import"./chunk-3SL5GKZI.mjs";import{o as N,w as B}from"./chunk-NOPYZMUE.mjs";import{$b as T,Gb as I,Ic as K,Jc as o,Kc as h,Lc as _,Mc as S,Nb as s,Oc as y,Pc as v,Qc as E,Ra as M,Zb as l,jc as i,kc as e,lc as w,mc as P,nc as b,oa as D,pc as k,tb as c,uc as x,wc as C,xa as u,ya as p}from"./chunk-UIMG47TQ.mjs";import"./chunk-KB5IWD3E.mjs";import{g as St,j as O}from"./chunk-RIAI3ORJ.mjs";var f=St(It());function Nt(a,n){if(a&1&&(i(0,"div",34)(1,"mat-chip-listbox")(2,"mat-chip",35)(3,"mat-icon",36),o(4),e(),o(5),e()()()),a&2){let t,r,d,g=C();c(2),l("color",((t=g.getTrangThaiInfo(g.chiTietChotKho().trangThai))==null?null:t.color)||"primary"),c(2),h(((r=g.getTrangThaiInfo(g.chiTietChotKho().trangThai))==null?null:r.icon)||"help"),c(),_(" ",((d=g.getTrangThaiInfo(g.chiTietChotKho().trangThai))==null?null:d.label)||"Kh\xF4ng x\xE1c \u0111\u1ECBnh"," ")}}function Bt(a,n){if(a&1&&(i(0,"div",37)(1,"mat-icon"),o(2,"schedule"),e(),i(3,"span"),o(4),e()()),a&2){let t=C();c(4),_("Th\u1EDDi gian: ",t.calculateDuration(),"")}}function Vt(a,n){if(a&1&&(i(0,"mat-card",38)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),o(4,"analytics"),e(),o(5," Th\u1ED1ng k\xEA t\u1ED3n kho "),e()(),i(6,"mat-card-content")(7,"div",39)(8,"div",40)(9,"div",41)(10,"mat-icon"),o(11,"inventory_2"),e()(),i(12,"div",42)(13,"div",43),o(14),e(),i(15,"div",44),o(16,"T\u1ED5ng s\u1EA3n ph\u1EA9m"),e()()(),i(17,"div",40)(18,"div",45)(19,"mat-icon"),o(20,"straighten"),e()(),i(21,"div",42)(22,"div",43),o(23),e(),i(24,"div",44),o(25,"T\u1ED5ng s\u1ED1 l\u01B0\u1EE3ng"),e()()(),i(26,"div",40)(27,"div",46)(28,"mat-icon"),o(29,"attach_money"),e()(),i(30,"div",42)(31,"div",43),o(32),e(),i(33,"div",44),o(34,"T\u1ED5ng gi\xE1 tr\u1ECB"),e()()(),i(35,"div",40)(36,"div",47)(37,"mat-icon"),o(38,"event"),e()(),i(39,"div",42)(40,"div",43),o(41),e(),i(42,"div",44),o(43),e()()()()()()),a&2){let t=C();c(14),h(t.getTotalProducts()),c(9),h(t.getTotalQuantity()),c(9),h(t.formatCurrency(t.getTotalInventoryValue())),c(9),h(t.formatDateOnly(t.chiTietChotKho().ngayThucHien||t.chiTietChotKho().createdAt||"")),c(2),h(t.chiTietChotKho().ngayThucHien?"Ng\xE0y th\u1EF1c hi\u1EC7n":"Ng\xE0y t\u1EA1o")}}function At(a,n){a&1&&(i(0,"th",63),o(1,"T\u1ED3n kho hi\u1EC7n t\u1EA1i"),e())}function Lt(a,n){if(a&1&&(i(0,"td",64),o(1),e()),a&2){let t=n.$implicit;c(),_(" ",t.tonKhoHienTai||0," ")}}function Ht(a,n){a&1&&(i(0,"th",63),o(1,"\u0110i\u1EC1u ch\u1EC9nh"),e())}function Ft(a,n){if(a&1&&(i(0,"td",65)(1,"span",66),o(2),e()()),a&2){let t=n.$implicit;c(),T("positive",t.soLuongDieuChinh>0)("negative",t.soLuongDieuChinh<0)("neutral",t.soLuongDieuChinh===0),c(),S(" ",t.soLuongDieuChinh>0?"+":"","",t.soLuongDieuChinh||0," ")}}function zt(a,n){a&1&&(i(0,"th",63),o(1,"T\u1ED3n kho sau ch\u1ED1t"),e())}function Yt(a,n){if(a&1&&(i(0,"td",67),o(1),e()),a&2){let t=n.$implicit;c(),_(" ",t.tonKhoSauChot||0," ")}}function Wt(a,n){a&1&&(i(0,"th",63),o(1,"Gi\xE1 tr\u1ECB"),e())}function jt(a,n){if(a&1&&(i(0,"td",68),o(1),e()),a&2){let t=n.$implicit,r=C(2);c(),_(" ",r.formatCurrency((t.tonKhoSauChot||0)*(t.donGia||0))," ")}}function Rt(a,n){a&1&&(i(0,"th",63),o(1,"Ghi ch\xFA"),e())}function Gt(a,n){if(a&1&&(i(0,"td",65)(1,"span",69),o(2),e()()),a&2){let t=n.$implicit;c(2),h(t.ghichu||"-")}}function qt(a,n){a&1&&w(0,"tr",70)}function Qt(a,n){a&1&&w(0,"tr",71)}function Ut(a,n){if(a&1&&(i(0,"mat-card",48)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),o(4,"table_view"),e(),o(5," Chi ti\u1EBFt t\u1ED3n kho "),e()(),i(6,"mat-card-content")(7,"div",49)(8,"table",50),P(9,51),s(10,At,2,0,"th",52)(11,Lt,2,1,"td",53),b(),P(12,54),s(13,Ht,2,0,"th",52)(14,Ft,3,8,"td",55),b(),P(15,56),s(16,zt,2,0,"th",52)(17,Yt,2,1,"td",57),b(),P(18,58),s(19,Wt,2,0,"th",52)(20,jt,2,1,"td",59),b(),P(21,60),s(22,Rt,2,0,"th",52)(23,Gt,3,1,"td",55),b(),s(24,qt,1,0,"tr",61)(25,Qt,1,0,"tr",62),e()()()()),a&2){let t=C();c(8),l("dataSource",t.inventoryData),c(16),l("matHeaderRowDef",t.displayedColumns),c(),l("matRowDefColumns",t.displayedColumns)}}function Xt(a,n){if(a&1&&(i(0,"div",74)(1,"div",75),o(2,"Ghi ch\xFA:"),e(),i(3,"div",77),o(4),e()()),a&2){let t=C(2);c(4),h(t.detail().ghichu)}}function Jt(a,n){if(a&1&&(i(0,"mat-card",72)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),o(4,"preview"),e(),o(5," Xem tr\u01B0\u1EDBc ch\u1ED1t kho "),e()(),i(6,"mat-card-content")(7,"div",73)(8,"div",74)(9,"div",75),o(10,"M\xE3 ch\u1ED1t kho:"),e(),i(11,"div",76),o(12),e()(),i(13,"div",74)(14,"div",75),o(15,"T\xEAn ch\u1ED1t kho:"),e(),i(16,"div",77),o(17),e()(),i(18,"div",74)(19,"div",75),o(20,"Th\u1EDDi gian:"),e(),i(21,"div",77),o(22),i(23,"small"),o(24),e()()(),s(25,Xt,5,1,"div",78),e()()()),a&2){let t=C();c(12),h(t.detail().maChotKho),c(5),h(t.detail().tenChotKho),c(5),S(" ",t.formatDateOnly(t.detail().tuNgay)," - ",t.formatDateOnly(t.detail().denNgay)," "),c(2),_("(",t.calculateDuration(),")"),c(),l("ngIf",t.detail().ghichu)}}function Zt(a,n){if(a&1){let t=k();i(0,"button",79),x("click",function(){u(t);let d=C();return p(d.saveData())}),i(1,"mat-icon"),o(2),e(),o(3),e()}if(a&2){let t=C();l("disabled",t.isLoading()||!t.canEdit()),c(2),h(t.isLoading()?"hourglass_empty":"save"),c(),_(" ",t.isLoading()?"\u0110ang l\u01B0u...":t.isCreate()?"T\u1EA1o ch\u1ED1t kho":"C\u1EADp nh\u1EADt"," ")}}function $t(a,n){if(a&1){let t=k();i(0,"button",80),x("click",function(){u(t);let d=C();return p(d.thucHienChotKho())}),i(1,"mat-icon"),o(2),e(),o(3),e()}if(a&2){let t=C();l("disabled",t.isLoading()||!t.canExecute()),c(2),h(t.isLoading()?"hourglass_empty":"play_arrow"),c(),_(" ",t.isLoading()?"\u0110ang x\u1EED l\xFD...":"Th\u1EF1c hi\u1EC7n ch\u1ED1t kho"," ")}}function te(a,n){a&1&&(i(0,"div",81)(1,"mat-icon",82),o(2,"hourglass_empty"),e(),i(3,"p"),o(4,"\u0110ang x\u1EED l\xFD..."),e()())}var Kt=class a{_lichSuTonKhoService=D(Tt);_route=D(V);_router=D(A);_snackBar=D(F);detail=M({maChotKho:"",tenChotKho:"",tuNgay:"",denNgay:"",ghichu:"",userId:""});isEdit=M(!1);isCreate=M(!1);isLoading=M(!1);chotKhoId=M("");chiTietChotKho=M(null);inventoryData=new Ct([]);displayedColumns=["sanpham","tonKhoHienTai","soLuongDieuChinh","tonKhoSauChot","giaTri","ghichu"];constructor(){this._route.paramMap.subscribe(n=>O(this,null,function*(){let t=n.get("id"),r=n.get("mode");this.chotKhoId.set(t||""),this.isCreate.set(t==="0"),this.isEdit.set(t==="0"||r==="edit"),t&&t!=="0"?yield this.loadChotKhoDetail(t):this.resetForm()}))}ngOnInit(){return O(this,null,function*(){})}loadChotKhoDetail(n){return O(this,null,function*(){try{this.isLoading.set(!0);let t=yield this._lichSuTonKhoService.getChiTietChotKho(n);t&&(this.chiTietChotKho.set(t),this.detail.set({maChotKho:t.maChotKho||"",tenChotKho:t.tenChotKho||"",tuNgay:t.tuNgay||"",denNgay:t.denNgay||"",ghichu:t.ghichu||"",userId:t.userId||""}),t.chiTietTonKho&&(this.inventoryData.data=t.chiTietTonKho))}catch(t){console.error("Error loading chot kho detail:",t),this._snackBar.open("L\u1ED7i t\u1EA3i chi ti\u1EBFt ch\u1ED1t kho","\u0110\xF3ng",{duration:3e3})}finally{this.isLoading.set(!1)}})}resetForm(){this.detail.set({maChotKho:this.generateMaChotKho(),tenChotKho:"",tuNgay:(0,f.default)().startOf("month").format("YYYY-MM-DD"),denNgay:(0,f.default)().endOf("month").format("YYYY-MM-DD"),ghichu:"",userId:""})}generateMaChotKho(){return`CK${(0,f.default)().format("YYYYMM")}${this.genId()}`}genId(){return Math.random().toString(36).substr(2,6).toUpperCase()}saveData(){return O(this,null,function*(){try{if(!this.validateForm())return;this.isLoading.set(!0);let n=this.detail();this.isCreate()?(yield this._lichSuTonKhoService.createChotKho(n),this._snackBar.open("T\u1EA1o ch\u1ED1t kho th\xE0nh c\xF4ng","\u0110\xF3ng",{duration:3e3})):this._snackBar.open("C\u1EADp nh\u1EADt ch\u1ED1t kho th\xE0nh c\xF4ng","\u0110\xF3ng",{duration:3e3}),this.goBack()}catch(n){console.error("Error saving chot kho:",n),this._snackBar.open(n.message||"L\u1ED7i l\u01B0u d\u1EEF li\u1EC7u","\u0110\xF3ng",{duration:3e3})}finally{this.isLoading.set(!1)}})}thucHienChotKho(){return O(this,null,function*(){let n=this.chiTietChotKho();if(!n||!n.id||n.trangThai!=="KHOI_TAO"){this._snackBar.open("Ch\u1EC9 c\xF3 th\u1EC3 th\u1EF1c hi\u1EC7n ch\u1ED1t kho \u0111ang \u1EDF tr\u1EA1ng th\xE1i kh\u1EDFi t\u1EA1o","\u0110\xF3ng",{duration:3e3});return}if(window.confirm(`B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n th\u1EF1c hi\u1EC7n ch\u1ED1t kho "${n.tenChotKho}"?`))try{this.isLoading.set(!0),yield this._lichSuTonKhoService.thucHienChotKho(n.id),this._snackBar.open("Th\u1EF1c hi\u1EC7n ch\u1ED1t kho th\xE0nh c\xF4ng","\u0110\xF3ng",{duration:3e3}),yield this.loadChotKhoDetail(n.id)}catch(r){console.error("Error executing chot kho:",r),this._snackBar.open(r.message||"L\u1ED7i th\u1EF1c hi\u1EC7n ch\u1ED1t kho","\u0110\xF3ng",{duration:3e3})}finally{this.isLoading.set(!1)}})}validateForm(){let n=this.detail();return n.tenChotKho?.trim()?n.tuNgay?n.denNgay?(0,f.default)(n.denNgay).isBefore((0,f.default)(n.tuNgay))?(this._snackBar.open("Ng\xE0y k\u1EBFt th\xFAc ph\u1EA3i sau ng\xE0y b\u1EAFt \u0111\u1EA7u","\u0110\xF3ng",{duration:3e3}),!1):!0:(this._snackBar.open("Vui l\xF2ng ch\u1ECDn ng\xE0y k\u1EBFt th\xFAc","\u0110\xF3ng",{duration:3e3}),!1):(this._snackBar.open("Vui l\xF2ng ch\u1ECDn ng\xE0y b\u1EAFt \u0111\u1EA7u","\u0110\xF3ng",{duration:3e3}),!1):(this._snackBar.open("Vui l\xF2ng nh\u1EADp t\xEAn ch\u1ED1t kho","\u0110\xF3ng",{duration:3e3}),!1)}goBack(){this._router.navigate(["/admin/lichsu-tonkho/chot-kho"])}formatDate(n){return(0,f.default)(n).format("DD/MM/YYYY HH:mm")}formatDateOnly(n){return n?(0,f.default)(n).format("DD/MM/YYYY"):""}formatCurrency(n){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n||0)}calculateDuration(){let n=this.detail();if(!n.tuNgay||!n.denNgay)return"";let t=(0,f.default)(n.tuNgay);return`${(0,f.default)(n.denNgay).diff(t,"days")+1} ng\xE0y`}getTrangThaiInfo(n){return{KHOI_TAO:{label:"Kh\u1EDFi t\u1EA1o",color:"primary",icon:"fiber_new"},DANG_XU_LY:{label:"\u0110ang x\u1EED l\xFD",color:"accent",icon:"hourglass_empty"},HOAN_THANH:{label:"Ho\xE0n th\xE0nh",color:"primary",icon:"check_circle"},HUY:{label:"H\u1EE7y",color:"warn",icon:"cancel"}}[n]||{label:n,color:"basic",icon:"help"}}canEdit(){let n=this.chiTietChotKho();return this.isCreate()||n!==null&&n.trangThai==="KHOI_TAO"}canExecute(){let n=this.chiTietChotKho();return n!==null&&n.trangThai==="KHOI_TAO"}getTotalInventoryValue(){return this.inventoryData.data.reduce((n,t)=>n+(t.tonKhoSauChot||0)*(t.donGia||0),0)}getTotalProducts(){return this.inventoryData.data.length}getTotalQuantity(){return this.inventoryData.data.reduce((n,t)=>n+(t.tonKhoSauChot||0),0)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=I({type:a,selectors:[["app-detail-chot-kho"]],decls:74,vars:27,consts:[["fromDatePicker",""],["toDatePicker",""],[1,"detail-container"],[1,"detail-header"],[1,"header-content"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item",3,"click"],[1,"breadcrumb-current"],[1,"header-actions"],["mat-button","",1,"back-button",3,"click"],[1,"detail-content"],[1,"form-section"],["class","status-chip",4,"ngIf"],[1,"detail-form",3,"ngSubmit"],[1,"form-grid"],["appearance","outline",1,"form-field"],["matInput","","name","maChotKho","readonly","",3,"ngModelChange","ngModel"],["matSuffix",""],["matInput","","name","tenChotKho","placeholder","Nh\u1EADp t\xEAn ch\u1ED1t kho","required","",3,"ngModelChange","ngModel","readonly"],["matInput","","name","tuNgay","required","",3,"ngModelChange","matDatepicker","ngModel","readonly"],["matIconSuffix","",3,"for"],["matInput","","name","denNgay","required","",3,"ngModelChange","matDatepicker","ngModel","readonly"],["class","duration-display",4,"ngIf"],["appearance","outline",1,"form-field-full"],["matInput","","rows","3","name","ghichu","placeholder","Nh\u1EADp ghi ch\xFA cho \u0111\u1EE3t ch\u1ED1t kho...",3,"ngModelChange","ngModel","readonly"],["class","stats-section",4,"ngIf"],["class","inventory-section",4,"ngIf"],["class","preview-section",4,"ngIf"],[1,"detail-actions"],["mat-button","",1,"cancel-button",3,"click"],["mat-raised-button","","color","primary","class","save-button",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent","class","execute-button",3,"disabled","click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"status-chip"],["selected","",3,"color"],["matChipAvatar",""],[1,"duration-display"],[1,"stats-section"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-icon","products"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon","quantity"],[1,"stat-icon","value"],[1,"stat-icon","date"],[1,"inventory-section"],[1,"table-container"],["mat-table","",1,"inventory-table",3,"dataSource"],["matColumnDef","tonKhoHienTai"],["mat-header-cell","","class","header-cell",4,"matHeaderCellDef"],["mat-cell","","class","data-cell number-cell",4,"matCellDef"],["matColumnDef","soLuongDieuChinh"],["mat-cell","","class","data-cell",4,"matCellDef"],["matColumnDef","tonKhoSauChot"],["mat-cell","","class","data-cell number-cell final-stock",4,"matCellDef"],["matColumnDef","giaTri"],["mat-cell","","class","data-cell money-cell",4,"matCellDef"],["matColumnDef","ghichu"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"header-cell"],["mat-cell","",1,"data-cell","number-cell"],["mat-cell","",1,"data-cell"],[1,"adjustment-value"],["mat-cell","",1,"data-cell","number-cell","final-stock"],["mat-cell","",1,"data-cell","money-cell"],[1,"note-text"],["mat-header-row",""],["mat-row",""],[1,"preview-section"],[1,"preview-grid"],[1,"preview-item"],[1,"preview-label"],[1,"preview-value","code"],[1,"preview-value"],["class","preview-item",4,"ngIf"],["mat-raised-button","","color","primary",1,"save-button",3,"click","disabled"],["mat-raised-button","","color","accent",1,"execute-button",3,"click","disabled"],[1,"loading-overlay"],[1,"spinning"]],template:function(t,r){if(t&1){let d=k();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5)(4,"mat-icon"),o(5),e(),o(6),e(),i(7,"div",6)(8,"span",7),x("click",function(){return u(d),p(r.goBack())}),o(9,"Qu\u1EA3n l\xFD ch\u1ED1t kho"),e(),i(10,"mat-icon"),o(11,"chevron_right"),e(),i(12,"span",8),o(13),e()()(),i(14,"div",9)(15,"button",10),x("click",function(){return u(d),p(r.goBack())}),i(16,"mat-icon"),o(17,"arrow_back"),e(),o(18," Quay l\u1EA1i "),e()()(),i(19,"div",11)(20,"mat-card",12)(21,"mat-card-header")(22,"mat-card-title")(23,"mat-icon"),o(24,"info"),e(),o(25," Th\xF4ng tin ch\u1ED1t kho "),e(),s(26,Nt,6,3,"div",13),e(),i(27,"mat-card-content")(28,"form",14),x("ngSubmit",function(){return u(d),p(r.saveData())}),i(29,"div",15)(30,"mat-form-field",16)(31,"mat-label"),o(32,"M\xE3 ch\u1ED1t kho"),e(),i(33,"input",17),E("ngModelChange",function(m){return u(d),v(r.detail().maChotKho,m)||(r.detail().maChotKho=m),p(m)}),e(),i(34,"mat-icon",18),o(35,"qr_code"),e()(),i(36,"mat-form-field",16)(37,"mat-label"),o(38,"T\xEAn ch\u1ED1t kho"),e(),i(39,"input",19),E("ngModelChange",function(m){return u(d),v(r.detail().tenChotKho,m)||(r.detail().tenChotKho=m),p(m)}),e(),i(40,"mat-icon",18),o(41,"title"),e()(),i(42,"mat-form-field",16)(43,"mat-label"),o(44,"T\u1EEB ng\xE0y"),e(),i(45,"input",20),E("ngModelChange",function(m){return u(d),v(r.detail().tuNgay,m)||(r.detail().tuNgay=m),p(m)}),e(),w(46,"mat-datepicker-toggle",21)(47,"mat-datepicker",null,0),e(),i(49,"mat-form-field",16)(50,"mat-label"),o(51,"\u0110\u1EBFn ng\xE0y"),e(),i(52,"input",22),E("ngModelChange",function(m){return u(d),v(r.detail().denNgay,m)||(r.detail().denNgay=m),p(m)}),e(),w(53,"mat-datepicker-toggle",21)(54,"mat-datepicker",null,1),e(),s(56,Bt,5,1,"div",23),i(57,"mat-form-field",24)(58,"mat-label"),o(59,"Ghi ch\xFA"),e(),i(60,"textarea",25),E("ngModelChange",function(m){return u(d),v(r.detail().ghichu,m)||(r.detail().ghichu=m),p(m)}),e(),i(61,"mat-icon",18),o(62,"notes"),e()()()()()(),s(63,Vt,44,5,"mat-card",26)(64,Ut,26,3,"mat-card",27)(65,Jt,26,6,"mat-card",28),e(),i(66,"div",29)(67,"button",30),x("click",function(){return u(d),p(r.goBack())}),i(68,"mat-icon"),o(69,"cancel"),e(),o(70),e(),s(71,Zt,4,3,"button",31)(72,$t,4,3,"button",32),e(),s(73,te,5,0,"div",33),e()}if(t&2){let d=K(48),g=K(55);T("loading",r.isLoading()),c(5),h(r.isCreate()?"add":"inventory"),c(),_(" ",r.isCreate()?"T\u1EA1o ch\u1ED1t kho m\u1EDBi":"Chi ti\u1EBFt ch\u1ED1t kho"," "),c(7),_(" ",r.isCreate()?"T\u1EA1o m\u1EDBi":r.detail().tenChotKho," "),c(13),l("ngIf",!r.isCreate()&&r.chiTietChotKho()&&r.chiTietChotKho().trangThai),c(7),y("ngModel",r.detail().maChotKho),c(6),y("ngModel",r.detail().tenChotKho),l("readonly",!r.canEdit()),c(6),l("matDatepicker",d),y("ngModel",r.detail().tuNgay),l("readonly",!r.canEdit()),c(),l("for",d),c(6),l("matDatepicker",g),y("ngModel",r.detail().denNgay),l("readonly",!r.canEdit()),c(),l("for",g),c(3),l("ngIf",r.detail().tuNgay&&r.detail().denNgay),c(4),y("ngModel",r.detail().ghichu),l("readonly",!r.canEdit()),c(3),l("ngIf",r.chiTietChotKho()&&r.inventoryData.data.length>0),c(),l("ngIf",r.chiTietChotKho()&&r.inventoryData.data.length>0),c(),l("ngIf",r.isCreate()&&r.detail().tenChotKho),c(5),_(" ",r.isCreate()?"H\u1EE7y":"\u0110\xF3ng"," "),c(),l("ngIf",r.canEdit()),c(),l("ngIf",r.canExecute()),c(),l("ngIf",r.isLoading())}},dependencies:[B,N,J,U,j,R,G,X,Q,q,et,tt,Z,$,it,nt,H,L,Y,z,xt,_t,ft,Mt,vt,Ot,bt,yt,Pt,W,pt,at,ct,gt,lt,rt,ht,dt,mt,st,ut,kt,Dt,Et,wt,ot],styles:[".detail-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5;position:relative}.detail-container.loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:24px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:100}@media (max-width: 768px){.detail-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;padding:16px}}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 8px;font-size:28px;font-weight:500;color:#1976d2}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;height:32px;width:32px}@media (max-width: 768px){.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:24px}}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-size:14px}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{cursor:pointer;color:#1976d2}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:hover{text-decoration:underline}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-current[_ngcontent-%COMP%]{color:#333;font-weight:500}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666}.detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#0000000a}@media (max-width: 768px){.detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%}.detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}.detail-content[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}@media (max-width: 768px){.detail-content[_ngcontent-%COMP%]{padding:16px}}.form-section[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:500;color:#1976d2}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;height:22px;width:22px}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{pointer-events:none;font-size:12px;height:32px}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:start}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-grid[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}.form-grid[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   mat-icon[matSuffix][_ngcontent-%COMP%]{color:#666}.form-grid[_ngcontent-%COMP%]   .form-field-full[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid[_ngcontent-%COMP%]   .form-field-full[_ngcontent-%COMP%]   mat-icon[matSuffix][_ngcontent-%COMP%]{color:#666}.form-grid[_ngcontent-%COMP%]   .duration-display[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#e3f2fd,#f3e5f5);border-radius:8px;border-left:4px solid #1976d2;color:#1976d2;font-weight:500}.form-grid[_ngcontent-%COMP%]   .duration-display[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px}.stats-section[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a;background:linear-gradient(135deg,#f8f9fa,#e3f2fd)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;transition:transform .2s ease}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.stat-item[_ngcontent-%COMP%]   .stat-icon.products[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2)}.stat-item[_ngcontent-%COMP%]   .stat-icon.quantity[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#388e3c)}.stat-item[_ngcontent-%COMP%]   .stat-icon.value[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00)}.stat-item[_ngcontent-%COMP%]   .stat-icon.date[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9c27b0,#7b1fa2)}.stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}.stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;line-height:1.2}.stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;font-weight:500}.inventory-section[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]{width:100%;min-width:800px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-weight:600;color:#1976d2;background-color:#f8f9fa;border-bottom:2px solid #e3f2fd;padding:16px 12px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #e0e0e0;vertical-align:middle}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell.number-cell[_ngcontent-%COMP%]{text-align:center;font-weight:500}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell.number-cell.final-stock[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;color:#2e7d32}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell.money-cell[_ngcontent-%COMP%]{text-align:right;font-weight:500;color:#2e7d32}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%]{font-weight:500;color:#1976d2;font-family:Courier New,monospace}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:#333;font-size:14px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .adjustment-value[_ngcontent-%COMP%]{font-weight:600;padding:4px 8px;border-radius:4px;font-size:14px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .adjustment-value.positive[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .adjustment-value.negative[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .adjustment-value.neutral[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#666}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]   .note-text[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:13px}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.table-container[_ngcontent-%COMP%]   .inventory-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.preview-section[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a;background:linear-gradient(135deg,#fff3e0,#f3e5f5);border:2px solid #ff9800}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.preview-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.preview-item[_ngcontent-%COMP%]   .preview-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666;text-transform:uppercase}.preview-item[_ngcontent-%COMP%]   .preview-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.preview-item[_ngcontent-%COMP%]   .preview-value.code[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#1976d2}.preview-item[_ngcontent-%COMP%]   .preview-value[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-weight:400}.detail-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:24px;background:#fff;border-top:1px solid #e0e0e0;position:sticky;bottom:0}@media (max-width: 768px){.detail-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:16px}.detail-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}.detail-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666}.detail-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{background-color:#0000000a}.detail-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%], .detail-actions[_ngcontent-%COMP%]   .execute-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:150px}.detail-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled, .detail-actions[_ngcontent-%COMP%]   .execute-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666}.detail-actions[_ngcontent-%COMP%]   .execute-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#388e3c)}.detail-actions[_ngcontent-%COMP%]   .execute-button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#66bb6a,#4caf50)}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#1976d2;margin-bottom:16px}.loading-overlay[_ngcontent-%COMP%]   mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 2s linear infinite}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:18px;line-height:24px}.mat-mdc-chip[color=primary][_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.mat-mdc-chip[color=accent][_ngcontent-%COMP%]{background-color:#fce4ec;color:#c2185b}.mat-mdc-chip[color=warn][_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}.mat-mdc-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]   .mat-mdc-form-field-outline[_ngcontent-%COMP%]{color:#f44336}@media (prefers-color-scheme: dark){.detail-container[_ngcontent-%COMP%]{background-color:#303030}.detail-header[_ngcontent-%COMP%]{background:#424242;border-bottom-color:#616161}.detail-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%], .detail-header[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{color:#64b5f6}.detail-header[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-current[_ngcontent-%COMP%]{color:#fff}.form-section[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%], .stats-section[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%], .inventory-section[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%], .preview-section[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{background:#424242}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:#515151}.inventory-table[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{background-color:#515151;color:#64b5f6}.inventory-table[_ngcontent-%COMP%]   .data-cell[_ngcontent-%COMP%]{border-bottom-color:#616161}.inventory-table[_ngcontent-%COMP%]   .data-cell.number-cell.final-stock[_ngcontent-%COMP%]{background-color:#424242}.inventory-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#515151}.detail-actions[_ngcontent-%COMP%]{background:#424242;border-top-color:#616161}}@media print{.detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%], .detail-actions[_ngcontent-%COMP%]{display:none}.detail-container[_ngcontent-%COMP%]{background:#fff;min-height:auto}.form-section[_ngcontent-%COMP%], .stats-section[_ngcontent-%COMP%], .inventory-section[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none;border:1px solid #ccc}}"]})};export{Kt as DetailChotKhoComponent};
