{"version":3,"sources":["src/app/admin/dathang/nhucaudathang/tablenhucaudathanh/tablenhucaudathanh.component.ts","src/app/admin/dathang/nhucaudathang/tablenhucaudathanh/tablenhucaudathanh.component.html","src/app/admin/dathang/nhucaudathang/nhucaudathang.component.ts","src/app/admin/dathang/nhucaudathang/nhucaudathang.component.html","node_modules/@apollo/client/link/context/index.js","src/app/shared/services/graphql.service.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectionStrategy, Component, EventEmitter, inject, Input, Output, SimpleChanges } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport e from 'express';\r\n@Component({\r\n  selector: 'app-tablenhucaudathanh',\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule\r\n  ],\r\n  templateUrl: './tablenhucaudathanh.component.html',\r\n  styleUrls: ['./tablenhucaudathanh.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class TablenhucaudathanhComponent implements AfterViewInit {\r\n  @Input() ListFindNCC: any[] = [];\r\n  @Input() EditList: any[] = [];\r\n  @Input() ListDathang: any[] = [];\r\n  @Output() ListDathangChange = new EventEmitter<any>();\r\n  _snackBar:MatSnackBar = inject(MatSnackBar);\r\n  filterListNCC: any[] = [];\r\n  filterListSP: any[] = [];\r\n  ngAfterViewInit(): void {\r\n    this.LoadTable(this.ListFindNCC,this.EditList); \r\n    console.log('ListFindNCC',this.ListFindNCC);\r\n    console.log('EditList',this.EditList);\r\n    \r\n  }\r\n  LoadTable(ListFindNCC: any[], EditList: any[]){\r\n    let vitri = 1;\r\n    this.filterListNCC = ListFindNCC\r\n    this.filterListSP = EditList\r\n    this.filterListSP.forEach((item:any) => {\r\n      const index = this.filterListNCC.findIndex((v:any) => v.Sanpham.some((x:any) => x.id === item.id));\r\n      if(index !== -1 && this.filterListNCC[index].vitri === undefined){   \r\n        this.filterListNCC[index].vitri = vitri;\r\n        vitri++;\r\n      }    \r\n    })\r\n    this.filterListNCC.sort((a:any, b:any) => {\r\n      if (a.vitri && b.vitri) {\r\n        return a.vitri - b.vitri; // Sort by vitri property\r\n      }\r\n      return 0; // If vitri is not defined, keep the original order\r\n    })    \r\n  }\r\n  isFilter:boolean = false;\r\n  FilterTable(sanpham:any,nhacungcap:any){\r\n    this.isFilter = !this.isFilter;\r\n    if(this.isFilter){\r\n    if (sanpham && Object.keys(sanpham).length > 0) {\r\n      // When a specific product is selected, filter by product id\r\n      const filteredEditList = this.EditList.filter((item: any) => item.id === sanpham.id);\r\n      const filteredListNCC = this.ListFindNCC.filter((item: any) =>\r\n      item.Sanpham.some((sp: any) => sp.id === sanpham.id)\r\n      );\r\n      this.LoadTable(filteredListNCC, filteredEditList);\r\n    } else if (nhacungcap && Object.keys(nhacungcap).length > 0) {\r\n      // When filtering by supplier only\r\n      const filteredListNCC = this.ListFindNCC.filter((item: any) => item.id === nhacungcap.id);\r\n      // For each matched supplier, update its product list with default sldat values\r\n      filteredListNCC.forEach(item => {\r\n      const matchedProducts = this.filterListSP\r\n        .filter((sp: any) => item.Sanpham.some((p: any) => p.id === sp.id))\r\n        .map(sp => ({\r\n        ...sp,\r\n        sldat: Number(sp.goiy)\r\n        }));\r\n      if (matchedProducts.length > 0) {\r\n        item.sanpham = matchedProducts;\r\n      }\r\n      });\r\n      // Update or add the filtered supplier into ListDathang accordingly\r\n      const existingIndex = this.ListDathang.findIndex((entry: any) => entry.id === nhacungcap.id);\r\n      if (existingIndex !== -1) {\r\n      this.ListDathang[existingIndex] = { ...this.ListDathang[existingIndex], ...filteredListNCC[0] };\r\n      } else {\r\n      this.ListDathang.push(filteredListNCC[0]);\r\n      }\r\n      console.log('sanpham', sanpham);\r\n      console.log('nhacungcap', nhacungcap);\r\n      console.log('ListDathang', this.ListDathang);\r\n      this.ListDathangChange.emit({isSubmit: false, ListDathang: this.ListDathang});\r\n      this.LoadTable(filteredListNCC, filteredListNCC[0].sanpham);\r\n    }\r\n  }\r\n  else{\r\n    this.LoadTable(this.ListFindNCC,this.EditList);\r\n  }\r\n}\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['ListFindNCC'] || changes['EditList']) {\r\n      this.LoadTable(this.ListFindNCC, this.EditList);\r\n    }\r\n  }\r\n  getSLDat(ncc:any,sanpham:any){\r\n    const existingItem = ncc.sanpham?.find((v:any) => v.id === sanpham.id);\r\n    if (existingItem) {\r\n      return existingItem.sldat || 0;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n  DadatGoiy(item:any){\r\n      const SLDat = this.ListDathang.reduce((acc: number, ncc: any) => {\r\n        const sp = ncc.sanpham?.find((v: any) => v.id === item.id);\r\n        return acc + (sp?.sldat ? Number(sp.sldat) : 0);\r\n      }, 0);\r\n    return (Number(item.goiy) - SLDat).toFixed(2);\r\n  }\r\n  trackByFn(index: number, item: any): any {\r\n    return item.id; // Use a unique identifier\r\n  }\r\n  CheckSanphaminNCC(NCC:any,item:any){\r\n    const existingItem = NCC.Sanpham?.find((v:any) => v.id === item.id);\r\n    return existingItem ? true : false;\r\n  }\r\n  updateEnter(event: any, Sanpham: any, Nhacungcap: any) {\r\n    // Allow only number keys, backspace, delete, arrows, tab, etc.\r\n    const allowedKeys = [\r\n      'Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab', 'Home', 'End'\r\n    ];\r\n    // Allow: 0-9, Numpad0-9\r\n    if (\r\n      (event.key >= '0' && event.key <= '9') ||\r\n      (event.key >= 'Numpad0' && event.key <= 'Numpad9') ||\r\n      allowedKeys.includes(event.key)\r\n    ) {\r\n      // Allow input\r\n    } else {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    // Prevent Enter or Shift+Enter from creating new lines\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n\r\n      // Lấy giá trị mới từ input hiện tại (class 'sldat-input')\r\n      const inputElem = (event.target as HTMLElement).closest('.sldat-input') as HTMLElement;\r\n      let newValue = 0;\r\n      if (inputElem) {\r\n        const value = (inputElem as HTMLInputElement).value || (inputElem as HTMLElement).innerText;\r\n        newValue = Number(value.trim()) || 0;\r\n      }\r\n\r\n      // Tạo bản sao tạm thời của ListDathang để kiểm tra âm trước khi cập nhật\r\n      let tempListDathang = JSON.parse(JSON.stringify(this.ListDathang));\r\n      let tempNCC = tempListDathang.find((v: any) => v.id === Nhacungcap.id);\r\n      if (tempNCC) {\r\n        let tempSP = tempNCC.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n        if (tempSP) {\r\n          tempSP.sldat = newValue;\r\n        } else {\r\n          Sanpham.sldat = newValue;\r\n          tempNCC.sanpham = tempNCC.sanpham || [];\r\n          tempNCC.sanpham.push(Sanpham);\r\n        }\r\n      } else {\r\n        Sanpham.sldat = newValue;\r\n        Nhacungcap.sanpham = [Sanpham];\r\n        Nhacungcap.ngaynhan = new Date();\r\n        tempListDathang.push(Nhacungcap);\r\n      }\r\n      // Tính lại DadatGoiy với giá trị mới\r\n      const checkValue = (() => {\r\n        const SLDat = tempListDathang.reduce((acc: number, ncc: any) => {\r\n          const sp = ncc.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n          return acc + (sp?.sldat ? Number(sp.sldat) : 0);\r\n        }, 0);\r\n        return (Number(Sanpham.goiy) - SLDat).toFixed(2);\r\n      })();\r\n\r\n      if (Number(checkValue) < 0) {\r\n        this._snackBar.open('Số lượng không hợp lệ', '', {\r\n          duration: 1000,\r\n          horizontalPosition: \"end\",\r\n          verticalPosition: \"top\",\r\n          panelClass: ['snackbar-error'],\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Nếu hợp lệ thì mới cập nhật ListDathang\r\n      const exitNCC = this.ListDathang.find((v: any) => v.id === Nhacungcap.id);\r\n\r\n      if (exitNCC) {\r\n        const exitSP = exitNCC.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n        if (exitSP) {\r\n          exitSP.sldat = newValue;\r\n        } else {\r\n          Sanpham.sldat = newValue;\r\n          exitNCC.sanpham = exitNCC.sanpham || [];\r\n          exitNCC.sanpham.push(Sanpham);\r\n        }\r\n      } else {\r\n        Sanpham.sldat = newValue;\r\n        Nhacungcap.sanpham = [Sanpham];\r\n        Nhacungcap.ngaynhan = new Date();\r\n        this.ListDathang.push(Nhacungcap);\r\n      }\r\n\r\n      setTimeout(() => {\r\n        const allInputs = Array.from(document.querySelectorAll('.sldat-input')) as HTMLElement[];\r\n        const currentIndex = allInputs.findIndex(input => input === event.target);\r\n        if (currentIndex !== -1 && currentIndex + 1 < allInputs.length) {\r\n          (allInputs[currentIndex + 1] as HTMLElement).focus();\r\n        }\r\n      });\r\n      this.ListDathangChange.emit({isSubmit: false, ListDathang: this.ListDathang});\r\n    }\r\n  }\r\n\r\n\r\n  updateBlur(event: FocusEvent, Sanpham: any, Nhacungcap: any) {\r\n    // console.log('sanpham', Sanpham);\r\n    // console.log('nhacungcap', Nhacungcap);\r\n    \r\n    // Lấy giá trị mới từ input hiện tại (class 'sldat-input')\r\n    const inputElem = (event.target as HTMLElement).closest('.sldat-input') as HTMLElement;\r\n    let newValue = 0;\r\n    if (inputElem) {\r\n      const value = (inputElem as HTMLInputElement).value || (inputElem as HTMLElement).innerText;\r\n      newValue = Number(value.trim()) || 0;\r\n    }\r\n    console.log('newValue', newValue);\r\n    \r\n    // Kiểm tra trước khi cập nhật\r\n    // Tạm thời gán thử giá trị mới để kiểm tra âm\r\n    let tempListDathang = JSON.parse(JSON.stringify(this.ListDathang));\r\n    let tempNCC = tempListDathang.find((v: any) => v.id === Nhacungcap.id);\r\n    if (tempNCC) {\r\n      let tempSP = tempNCC.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n      if (tempSP) {\r\n        tempSP.sldat = newValue;\r\n      } else {\r\n        Sanpham.sldat = newValue;\r\n        tempNCC.sanpham = tempNCC.sanpham || [];\r\n        tempNCC.sanpham.push(Sanpham);\r\n      }\r\n    } else {\r\n      Sanpham.sldat = newValue;\r\n      Nhacungcap.sanpham = [Sanpham];\r\n      Nhacungcap.ngaynhan = new Date();\r\n      tempListDathang.push(Nhacungcap);\r\n    }\r\n    // Tính lại DadatGoiy với giá trị mới\r\n    const checkValue = (() => {\r\n      const SLDat = tempListDathang.reduce((acc: number, ncc: any) => {\r\n        const sp = ncc.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n        return acc + (sp?.sldat ? Number(sp.sldat) : 0);\r\n      }, 0);\r\n      return (Number(Sanpham.goiy) - SLDat).toFixed(2);\r\n    })();\r\n\r\n    if (Number(checkValue) < 0) {\r\n      this._snackBar.open('Số lượng không hợp lệ', '', {\r\n        duration: 1000,\r\n        horizontalPosition: \"end\",\r\n        verticalPosition: \"top\",\r\n        panelClass: ['snackbar-error'],\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Lấy giá trị hiện tại nếu có\r\n    const exitNCC = this.ListDathang.find((v: any) => v.id === Nhacungcap.id);\r\n    let currentValue = 0;\r\n    if (exitNCC) {\r\n      const exitSP = exitNCC.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n      if (exitSP) {\r\n        currentValue = exitSP.sldat || 0;\r\n      }\r\n    }\r\n\r\n    // Chỉ update nếu giá trị thay đổi\r\n    if (newValue !== currentValue) {\r\n      if (exitNCC) {\r\n        const exitSP = exitNCC.sanpham?.find((v: any) => v.id === Sanpham.id);\r\n        if (exitSP) {\r\n          exitSP.sldat = newValue;\r\n        } else {\r\n          Sanpham.sldat = newValue;\r\n          exitNCC.sanpham = exitNCC.sanpham || [];\r\n          exitNCC.sanpham.push(Sanpham);\r\n        }\r\n      } else {\r\n        Sanpham.sldat = newValue;\r\n        Nhacungcap.sanpham = [Sanpham];\r\n        Nhacungcap.ngaynhan = new Date();\r\n        this.ListDathang.push(Nhacungcap);\r\n      }\r\n      this.ListDathangChange.emit({isSubmit: false, ListDathang: this.ListDathang});\r\n      console.log(this.ListDathang);\r\n    }\r\n  }\r\n}\r\n","<table class=\"min-w-full divide-y divide-gray-200 border border-gray-300 rounded-lg shadow-md\">\r\n    <thead class=\"bg-gray-50 rounded-t-lg cursor-pointer\">\r\n        <tr>\r\n            <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider first:rounded-tl-lg last:rounded-tr-lg\">\r\n               Tên Sản Phẩm\r\n            </th>\r\n            <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Mã Sản Phẩm\r\n            </th>\r\n            <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Gợi Ý\r\n            </th>\r\n            <th (click)=\"FilterTable('',item)\" *ngFor=\"let item of filterListNCC; let i=index\" scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hover:bg-slate-50\">\r\n                {{item.name}}\r\n            </th>\r\n            <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider last:rounded-tr-lg\">\r\n            </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody class=\"bg-white divide-y divide-gray-200 rounded-b-lg\">\r\n        <tr *ngFor=\"let item of filterListSP; trackBy:trackByFn; let j=index\" class=\"last:rounded-b-lg cursor-pointer hover:bg-slate-50\">\r\n            <td class=\"whitespace-nowrap first:rounded-bl-lg\" (click)=\"FilterTable(item,'')\">\r\n                <span class=\"max-w-40 line-clamp-4 p-2\">\r\n                    {{ item.title }}\r\n                </span>\r\n            </td>\r\n            <td class=\"whitespace-nowrap\">\r\n                <span class=\"max-w-40 line-clamp-4\">\r\n                    {{ item.masp }}\r\n                </span>\r\n            </td>\r\n            <td class=\"whitespace-nowrap\">\r\n                <span class=\"max-w-40 line-clamp-4\">\r\n                    {{item.goiy}} ({{DadatGoiy(item)||0}})\r\n                </span>\r\n            </td>\r\n            <td *ngFor=\"let item of filterListNCC; let i=index\" class=\"whitespace-nowrap\">\r\n                <div *ngIf=\"CheckSanphaminNCC(item,filterListSP[j])\"\r\n                [contentEditable]=\"true\"\r\n                class=\"sldat-input p-2 min-w-28 text-end bg-slate-200 focus:border rounded-lg focus:border-blue-600 focus:bg-slate-100 focus:outline-none\"\r\n                (blur)=\"updateBlur($event,filterListSP[j],item)\"\r\n                (keyup.enter)=\"updateEnter($event,filterListSP[j],item)\"\r\n                >\r\n               {{ getSLDat(item,filterListSP[j]) | number:'1.0-2' }}\r\n               </div>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  computed,\r\n  effect,\r\n  inject,\r\n  TemplateRef,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\r\nimport { MatSort, MatSortModule } from '@angular/material/sort';\r\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\r\nimport { MatDrawer, MatSidenavModule } from '@angular/material/sidenav';\r\nimport { Router, RouterLink, RouterOutlet } from '@angular/router';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport {\r\n  readExcelFile,\r\n  writeExcelFile,\r\n} from '../../../shared/utils/exceldrive.utils';\r\nimport {\r\n  ConvertDriveData,\r\n  convertToSlug,\r\n  GenId,\r\n} from '../../../shared/utils/shared.utils';\r\nimport { GoogleSheetService } from '../../../shared/googlesheets/googlesheets.service';\r\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\r\nimport { SanphamService } from '../../sanpham/sanpham.service';\r\nimport { NhacungcapService } from '../../nhacungcap/nhacungcap.service';\r\nimport { DathangService } from '../dathang.service';\r\nimport { TablenhucaudathanhComponent } from './tablenhucaudathanh/tablenhucaudathanh.component';\r\nimport moment from 'moment';\r\nimport { KhoService } from '../../kho/kho.service';\r\nimport { GraphqlService } from '../../../shared/services/graphql.service';\r\n@Component({\r\n  selector: 'app-nhucaudathang',\r\n  templateUrl: './nhucaudathang.component.html',\r\n  styleUrls: ['./nhucaudathang.component.scss'],\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatTableModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    MatMenuModule,\r\n    MatSidenavModule,\r\n    RouterOutlet,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatSelectModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    MatTooltipModule,\r\n    MatDialogModule,\r\n    TablenhucaudathanhComponent,\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class NhucaudathangComponent {\r\n  displayedColumns: string[] = [\r\n    'title',\r\n    'masp',\r\n    'giagoc',\r\n    'dvt',\r\n    'slton',\r\n    'slchogiao',\r\n    'slchonhap',\r\n    'haohut',\r\n    'goiy',\r\n  ];\r\n  ColumnName: any = {\r\n    title: 'Tên Sản Phẩm',\r\n    masp: 'Mã Sản Phẩm',\r\n    giagoc: 'Giá Gốc',\r\n    dvt: 'Đơn Vị Tính',\r\n    slton: 'Tồn',\r\n    slchogiao: 'Chờ Giao',\r\n    slchonhap: 'Chờ Nhập',\r\n    haohut: 'Hao Hụt',\r\n    goiy: 'Gợi Ý',\r\n  };\r\n  FilterColumns: any[] = JSON.parse(\r\n    localStorage.getItem('NhucauColFilter') || '[]'\r\n  );\r\n  Columns: any[] = [];\r\n  //pagination\r\n  totalItems = 0;\r\n  pageSize = 10;\r\n  currentPage = 1;\r\n  totalPages = 1;\r\n  @ViewChild(MatPaginator) paginator!: MatPaginator;\r\n  @ViewChild(MatSort) sort!: MatSort;\r\n  @ViewChild('drawer', { static: true }) drawer!: MatDrawer;\r\n  filterValues: { [key: string]: string } = {};\r\n  private _SanphamService: SanphamService = inject(SanphamService);\r\n  private _breakpointObserver: BreakpointObserver = inject(BreakpointObserver);\r\n  private _GoogleSheetService: GoogleSheetService = inject(GoogleSheetService);\r\n  private _NhacungcapService: NhacungcapService = inject(NhacungcapService);\r\n  private _DathangService: DathangService = inject(DathangService);\r\n  private _KhoService: KhoService = inject(KhoService);\r\n  private _GraphqlService: GraphqlService = inject(GraphqlService);\r\n  private _router: Router = inject(Router);\r\n  private _dialog: MatDialog = inject(MatDialog);\r\n  Listsanpham: any = this._SanphamService.ListSanpham;\r\n  EditList: any = [];\r\n  dataSource = new MatTableDataSource<any>();\r\n  sanphamId: any = this._SanphamService.sanphamId;\r\n  _snackBar: MatSnackBar = inject(MatSnackBar);\r\n  CountItem: any = 0;\r\n  isSearch: boolean = false;\r\n  constructor() {\r\n    this.displayedColumns.forEach((column) => {\r\n      this.filterValues[column] = '';\r\n    });\r\n    effect(() => {\r\n      this.dataSource.data = this.Listsanpham();\r\n      this.totalItems = this.Listsanpham().length;\r\n      this.calculateTotalPages();\r\n    });\r\n  }\r\n  GetGoiy(item: any) {\r\n    return parseFloat(\r\n      ((item.soluongkho - item.soluong) * (1 + item.haohut / 100)).toString()\r\n    ).toFixed(2);\r\n  }\r\n  applyFilter(event: Event) {\r\n    const filterValue = (event.target as HTMLInputElement).value;\r\n    this.dataSource.filter = filterValue.trim().toLowerCase();\r\n    if (this.dataSource.paginator) {\r\n      this.dataSource.paginator.firstPage();\r\n    }\r\n  }\r\n  async ngOnInit(): Promise<void> {\r\n    this.updateDisplayData();\r\n    this.loadDathang();\r\n    this._SanphamService.listenSanphamUpdates();\r\n    await this._SanphamService.getNhucau();\r\n    this.dataSource = new MatTableDataSource(this.Listsanpham());\r\n    this.dataSource.paginator = this.paginator;\r\n    this.dataSource.sort = this.sort;\r\n    this.initializeColumns();\r\n    this.setupDrawer();\r\n  }\r\n  async loadDathang() {\r\n    const result = await this._GraphqlService.findMany('Dathang',{\r\n      orderBy: { createdAt: 'desc' },\r\n    });\r\n    if (result.data) {\r\n      console.log('Products:', result);\r\n    }\r\n  }\r\n\r\n  async refresh() {\r\n    await this._SanphamService.getAllSanpham();\r\n  }\r\n  private initializeColumns(): void {\r\n    this.Columns = Object.keys(this.ColumnName).map((key) => ({\r\n      key,\r\n      value: this.ColumnName[key],\r\n      isShow: true,\r\n    }));\r\n    if (this.FilterColumns.length === 0) {\r\n      this.FilterColumns = this.Columns;\r\n    } else {\r\n      localStorage.setItem(\r\n        'NhucauColFilter',\r\n        JSON.stringify(this.FilterColumns)\r\n      );\r\n    }\r\n    this.displayedColumns = this.FilterColumns.filter((v) => v.isShow).map(\r\n      (item) => item.key\r\n    );\r\n    this.ColumnName = this.FilterColumns.reduce((obj, item) => {\r\n      if (item.isShow) obj[item.key] = item.value;\r\n      return obj;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  private setupDrawer(): void {\r\n    this._breakpointObserver\r\n      .observe([Breakpoints.Handset])\r\n      .subscribe((result) => {\r\n        if (result.matches) {\r\n          this.drawer.mode = 'over';\r\n        } else {\r\n          this.drawer.mode = 'side';\r\n        }\r\n      });\r\n  }\r\n  toggleColumn(item: any): void {\r\n    const column = this.FilterColumns.find((v) => v.key === item.key);\r\n    if (column) {\r\n      column.isShow = !column.isShow;\r\n      this.updateDisplayedColumns();\r\n    }\r\n  }\r\n  @memoize()\r\n  FilterHederColumn(list: any, column: any) {\r\n    const uniqueList = list.filter(\r\n      (obj: any, index: number, self: any) =>\r\n        index === self.findIndex((t: any) => t[column] === obj[column])\r\n    );\r\n    return uniqueList;\r\n  }\r\n  @Debounce(300)\r\n  doFilterHederColumn(event: any, column: any): void {\r\n    this.dataSource.filteredData = this.Listsanpham().filter((v: any) =>\r\n      v[column].toLowerCase().includes(event.target.value.toLowerCase())\r\n    );\r\n    const query = event.target.value.toLowerCase();\r\n  }\r\n  ListFilter: any[] = [];\r\n  ChosenItem(item: any, column: any) {\r\n    const CheckItem = this.dataSource.filteredData.filter(\r\n      (v: any) => v[column] === item[column]\r\n    );\r\n    const CheckItem1 = this.ListFilter.filter(\r\n      (v: any) => v[column] === item[column]\r\n    );\r\n    if (CheckItem1.length > 0) {\r\n      this.ListFilter = this.ListFilter.filter(\r\n        (v) => v[column] !== item[column]\r\n      );\r\n    } else {\r\n      this.ListFilter = [...this.ListFilter, ...CheckItem];\r\n    }\r\n  }\r\n  ChosenAll(list: any) {\r\n    list.forEach((v: any) => {\r\n      const CheckItem = this.ListFilter.find((v1) => v1.id === v.id)\r\n        ? true\r\n        : false;\r\n      if (CheckItem) {\r\n        this.ListFilter = this.ListFilter.filter((v) => v.id !== v.id);\r\n      } else {\r\n        this.ListFilter.push(v);\r\n      }\r\n    });\r\n  }\r\n  ResetFilter() {\r\n    this.ListFilter = this.Listsanpham();\r\n    this.dataSource.data = this.Listsanpham();\r\n    this.dataSource.paginator = this.paginator;\r\n    this.dataSource.sort = this.sort;\r\n  }\r\n  EmptyFiter() {\r\n    this.ListFilter = [];\r\n  }\r\n  CheckItem(item: any) {\r\n    return this.ListFilter.find((v) => v.id === item.id) ? true : false;\r\n  }\r\n  ApplyFilterColum(menu: any) {\r\n    this.dataSource.data = this.Listsanpham().filter((v: any) =>\r\n      this.ListFilter.some((v1) => v1.id === v.id)\r\n    );\r\n    this.dataSource.paginator = this.paginator;\r\n    this.dataSource.sort = this.sort;\r\n    menu.closeMenu();\r\n  }\r\n  private updateDisplayedColumns(): void {\r\n    this.displayedColumns = this.FilterColumns.filter((v) => v.isShow).map(\r\n      (item) => item.key\r\n    );\r\n    this.ColumnName = this.FilterColumns.reduce((obj, item) => {\r\n      if (item.isShow) obj[item.key] = item.value;\r\n      return obj;\r\n    }, {} as Record<string, string>);\r\n    localStorage.setItem('NhucauColFilter', JSON.stringify(this.FilterColumns));\r\n  }\r\n  doFilterColumns(event: any): void {\r\n    const query = event.target.value.toLowerCase();\r\n    this.FilterColumns = this.Columns.filter((v) =>\r\n      v.value.toLowerCase().includes(query)\r\n    );\r\n  }\r\n  create(): void {\r\n    this.drawer.open();\r\n    this._router.navigate(['admin/sanpham', 'new']);\r\n  }\r\n  ListSPNCC: any[] = [];\r\n  async openDeleteDialog(teamplate: TemplateRef<any>) {\r\n    const dialogDeleteRef = this._dialog.open(teamplate, {\r\n      hasBackdrop: true,\r\n      disableClose: true,\r\n    });\r\n    dialogDeleteRef.afterClosed().subscribe((result) => {\r\n      if (result == 'true') {\r\n        this.DeleteListItem();\r\n      }\r\n    });\r\n  }\r\n  DeleteListItem(): void {\r\n    this.EditList.forEach((item: any) => {\r\n      this._SanphamService.DeleteSanpham(item);\r\n    });\r\n    this.EditList = [];\r\n    this._snackBar.open('Xóa Thành Công', '', {\r\n      duration: 1000,\r\n      horizontalPosition: 'end',\r\n      verticalPosition: 'top',\r\n      panelClass: ['snackbar-success'],\r\n    });\r\n  }\r\n  ListFindNCC: any[] = [];\r\n  ListDathang: any[] = [];\r\n  isSubmit: boolean = false;\r\n  onListDathangChange(event: any) {\r\n    console.log(event);\r\n    this.isSubmit = event.isSubmit;\r\n    this.ListDathang = event.ListDathang;\r\n    console.log(this.ListDathang);\r\n  }\r\n  CheckSubmit() {\r\n    // Kiểm tra nếu có sản phẩm nào có số lượng đặt âm thì báo lỗi, ngược lại isSubmit = true\r\n    const hasNegative = this.ListDathang.some((ncc: any) =>\r\n      (ncc.sanpham || []).some((sp: any) => Number(sp.sldat) < 0)\r\n    );\r\n    console.log(hasNegative);\r\n\r\n    console.log(this.ListDathang);\r\n\r\n    if (hasNegative) {\r\n      this._snackBar.open('Có sản phẩm có số lượng đặt âm!', '', {\r\n        duration: 2000,\r\n        horizontalPosition: 'end',\r\n        verticalPosition: 'top',\r\n        panelClass: ['snackbar-error'],\r\n      });\r\n      this.isSubmit = false;\r\n      return false;\r\n    } else {\r\n      this.isSubmit = true;\r\n      return true;\r\n    }\r\n  }\r\n  async OpenTaodonDialog(teamplate: TemplateRef<any>) {\r\n    this.ListFindNCC = await this._NhacungcapService.Findbyids(\r\n      this.EditList.map((v: any) => v.id)\r\n    );\r\n    this.EditList = this.EditList.filter((v: any) =>\r\n      this.ListFindNCC.some((v1: any) =>\r\n        v1.Sanpham.some((v3: any) => v3.id === v.id)\r\n      )\r\n    );\r\n    const dialogDeleteRef = this._dialog.open(teamplate, {\r\n      hasBackdrop: true,\r\n      disableClose: true,\r\n    });\r\n    dialogDeleteRef.afterClosed().subscribe((result) => {\r\n      if (result == 'true') {\r\n        console.log(this.ListDathang);\r\n        (async () => {\r\n          for (const item of this.ListDathang) {\r\n            await this._DathangService.CreateByNhucau(item);\r\n            // Optional delay to allow data updates - adjust delay as needed\r\n            await new Promise((resolve) => setTimeout(resolve, 100));\r\n          }\r\n        })()\r\n          .then(() => {\r\n            this._snackBar.open('Tạo Mới đặt hàng thành công', '', {\r\n              duration: 2000,\r\n              horizontalPosition: 'end',\r\n              verticalPosition: 'top',\r\n              panelClass: ['snackbar-success'],\r\n            });\r\n            this._router.navigate(['/admin/dathang']);\r\n          })\r\n          .catch((error) => {\r\n            this._snackBar.open('Có lỗi xảy ra khi Tạo Mới đặt hàng', '', {\r\n              duration: 2000,\r\n              horizontalPosition: 'end',\r\n              verticalPosition: 'top',\r\n              panelClass: ['snackbar-error'],\r\n            });\r\n            console.error('Error creating orders:', error);\r\n          });\r\n      }\r\n    });\r\n  }\r\n  CheckSanphaminNCC(NCC: any, item: any) {\r\n    const existingItem = NCC.Sanpham?.find((v: any) => v.id === item.id);\r\n    return existingItem ? true : false;\r\n  }\r\n  updateValue(Soluong: any, Sanpham: any, Nhacungcap: any) {\r\n    const newValue =\r\n      Number((Soluong.target as HTMLElement).innerText.trim()) || 0;\r\n    const exitNCC = this.ListDathang.find((v: any) => v.id === Nhacungcap.id);\r\n    console.log(exitNCC);\r\n\r\n    if (exitNCC) {\r\n      const exitSP = exitNCC.sanpham.find((v: any) => v.id === Sanpham.id);\r\n      if (exitSP) {\r\n        exitSP.sldat = newValue;\r\n      } else {\r\n        Sanpham.sldat = newValue;\r\n        exitNCC.Sanpham.push(Sanpham);\r\n      }\r\n    } else {\r\n      Sanpham.sldat = newValue;\r\n      Nhacungcap.sanpham = [Sanpham];\r\n      Nhacungcap.ngaynhan = new Date();\r\n      this.ListDathang.push(Nhacungcap);\r\n    }\r\n    console.log(this.ListDathang);\r\n  }\r\n\r\n  AddToEdit(item: any): void {\r\n    const existingItem = this.EditList.find((v: any) => v.id === item.id);\r\n    if (existingItem) {\r\n      this.EditList = this.EditList.filter((v: any) => v.id !== item.id);\r\n    } else {\r\n      this.EditList.push(item);\r\n    }\r\n  }\r\n  ChoseAllEdit(): void {\r\n    this.EditList = this.Listsanpham();\r\n  }\r\n  CheckItemInEdit(item: any): boolean {\r\n    return this.EditList.some((v: any) => v.id === item.id);\r\n  }\r\n  goToDetail(item: any): void {\r\n    this.drawer.open();\r\n    this._SanphamService.setSanphamId(item.id);\r\n    this._router.navigate(['admin/sanpham', item.id]);\r\n  }\r\n  async LoadDrive() {\r\n    const DriveInfo = {\r\n      IdSheet: '15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk',\r\n      SheetName: 'SPImport',\r\n      ApiKey: 'AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao',\r\n    };\r\n    const result: any = await this._GoogleSheetService.getDrive(DriveInfo);\r\n    const data = ConvertDriveData(result.values);\r\n    this.DoImportData(data);\r\n  }\r\n  async DoImportData(data: any) {\r\n    const transformedData = data.map((v: any) => ({\r\n      title: v.title?.trim() || '',\r\n      masp: v.masp?.trim() || '',\r\n      giagoc: Number(v.giagoc) || 0,\r\n      dvt: v.dvt?.trim() || '',\r\n      soluong: Number(v.soluong) || 0,\r\n      soluongkho: Number(v.soluongkho) || 0,\r\n      haohut: Number(v.haohut) || 0,\r\n      ghichu: v.ghichu?.trim() || '',\r\n    }));\r\n\r\n    // Filter out duplicate masp values\r\n    const uniqueData = Array.from(\r\n      new Map(transformedData.map((item: any) => [item.masp, item])).values()\r\n    );\r\n    const existingSanpham = this._SanphamService.ListSanpham();\r\n    const existingMasp = existingSanpham.map((v: any) => v.masp);\r\n    const newMasp = uniqueData\r\n      .map((v: any) => v.masp)\r\n      .filter((item: any) => !existingMasp.includes(item));\r\n\r\n    await Promise.all(\r\n      uniqueData.map(async (v: any) => {\r\n        const existingItem = existingSanpham.find(\r\n          (v1: any) => v1.masp === v.masp\r\n        );\r\n        if (existingItem) {\r\n          const updatedItem = { ...existingItem, ...v };\r\n          await this._SanphamService.updateSanpham(updatedItem);\r\n        } else {\r\n          await this._SanphamService.CreateSanpham(v);\r\n        }\r\n      })\r\n    );\r\n    await Promise.all(\r\n      existingSanpham\r\n        .filter((sp) => !uniqueData.some((item: any) => item.masp === sp.masp))\r\n        .map((sp) =>\r\n          this._SanphamService.updateSanpham({ ...sp, isActive: false })\r\n        )\r\n    );\r\n\r\n    this._snackBar.open('Cập Nhật Thành Công', '', {\r\n      duration: 1000,\r\n      horizontalPosition: 'end',\r\n      verticalPosition: 'top',\r\n      panelClass: ['snackbar-success'],\r\n    });\r\n  }\r\n\r\n  async ImporExcel(event: any) {\r\n    const data = await readExcelFile(event);\r\n    this.DoImportData(data);\r\n  }\r\n\r\n  async ExportExcel(data: any, title: any) {\r\n    const ListKho = await this._KhoService.getAllKho();\r\n    console.log(data);\r\n\r\n    const dulieu = data.map((v: any) => ({\r\n      ngaynhan: moment().format('YYYY-MM-DD'),\r\n      mancc: v.mancc || '',\r\n      nhacungcap: v.nhacungcap || '',\r\n      masp: v.masp,\r\n      title: v.title,\r\n      dvt: v.dvt,\r\n      // giagoc: v.giagoc,\r\n      slchogiao: v.slchogiao,\r\n      goiy: v.goiy,\r\n      slchonhap: v.slchonhap,\r\n      slton: v.slton,\r\n      haohut: v.haohut,\r\n      ghichu: v.ghichu,\r\n    }));\r\n\r\n    const mapping: any = {\r\n      ngaynhan: 'Ngày Nhận',\r\n      mancc: 'Mã Nhà Cung Cấp',\r\n      nhacungcap: 'Nhà Cung Cấp',\r\n      masp: 'Mã Sản Phẩm',\r\n      title: 'Tên Sản Phẩm',\r\n      dvt: 'Đơn Vị Tính',\r\n      // giagoc: 'Giá Gốc',\r\n      slchogiao: 'Chờ Giao',\r\n      goiy: 'Gợi Ý',\r\n      slchonhap: 'Chờ Nhập',\r\n      slton: 'Tồn Kho',\r\n      haohut: 'Hao Hụt',\r\n      ghichu: 'Ghi Chú',\r\n    };\r\n    ListKho.forEach((v: any) => {\r\n      mapping[`makho_${v.makho}`] = v.makho;\r\n    });\r\n\r\n    writeExcelFile(dulieu, title, Object.values(mapping), mapping);\r\n  }\r\n  trackByFn(index: number, item: any): any {\r\n    return item.id; // Use a unique identifier\r\n  }\r\n\r\n  calculateTotalPages() {\r\n    this.totalPages = Math.ceil(this.totalItems / this.pageSize);\r\n  }\r\n\r\n  onPageSizeChange(size: number, menuHienthi: any) {\r\n    if (size > this.Listsanpham().length) {\r\n      this.pageSize = this.Listsanpham().length;\r\n      this._snackBar.open(`Số lượng tối đa ${this.Listsanpham().length}`, '', {\r\n        duration: 1000,\r\n        horizontalPosition: 'end',\r\n        verticalPosition: 'top',\r\n        panelClass: ['snackbar-success'],\r\n      });\r\n    } else {\r\n      this.pageSize = size;\r\n    }\r\n    this.currentPage = 1; // Reset to first page when changing page size\r\n    this.calculateTotalPages();\r\n    this.updateDisplayData();\r\n    menuHienthi.closeMenu();\r\n  }\r\n\r\n  onPreviousPage() {\r\n    if (this.currentPage > 1) {\r\n      this.currentPage--;\r\n      this.updateDisplayData();\r\n    }\r\n  }\r\n\r\n  onNextPage() {\r\n    if (this.currentPage < this.totalPages) {\r\n      this.currentPage++;\r\n      this.updateDisplayData();\r\n    }\r\n  }\r\n\r\n  updateDisplayData() {\r\n    const startIndex = (this.currentPage - 1) * this.pageSize;\r\n    const endIndex = startIndex + this.pageSize;\r\n    const pageData = this.Listsanpham().slice(startIndex, endIndex);\r\n    this.dataSource.data = pageData;\r\n  }\r\n}\r\n\r\nfunction memoize() {\r\n  return function (\r\n    target: any,\r\n    propertyKey: string,\r\n    descriptor: PropertyDescriptor\r\n  ) {\r\n    const originalMethod = descriptor.value;\r\n    const cache = new Map();\r\n\r\n    descriptor.value = function (...args: any[]) {\r\n      const key = JSON.stringify(args);\r\n      if (cache.has(key)) {\r\n        return cache.get(key);\r\n      }\r\n      const result = originalMethod.apply(this, args);\r\n      cache.set(key, result);\r\n      return result;\r\n    };\r\n\r\n    return descriptor;\r\n  };\r\n}\r\n\r\nfunction Debounce(delay: number = 300) {\r\n  return function (\r\n    target: any,\r\n    propertyKey: string,\r\n    descriptor: PropertyDescriptor\r\n  ) {\r\n    const originalMethod = descriptor.value;\r\n    let timeoutId: any;\r\n\r\n    descriptor.value = function (...args: any[]) {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => {\r\n        originalMethod.apply(this, args);\r\n      }, delay);\r\n    };\r\n\r\n    return descriptor;\r\n  };\r\n}\r\n","<mat-drawer-container class=\"w-full h-full\" autosize>\r\n    <mat-drawer #drawer class=\"flex flex-col lg:!w-1/2 !w-full h-full\" [position]=\"'end'\" mode=\"over\">\r\n        <router-outlet></router-outlet>\r\n    </mat-drawer>\r\n    <div class=\"flex flex-col space-y-2 h-screen-16 w-full p-2\">\r\n        <div class=\"border p-1 cursor-pointer w-full relative flex lg:flex-row lg:space-y-2 space-y-0 flex-col space-x-2 justify-between items-center bg-white rounded-lg\">\r\n            <div class=\"w-full flex flex-row space-x-2 items-center\">               \r\n                <div class=\"relative\">\r\n                    <input type=\"text\" placeholder=\"Tìm Kiếm...\" (keyup)=\"applyFilter($event)\" \r\n                        class=\"block pl-10 pr-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40\">\r\n                    <div class=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\r\n                        <span class=\"material-symbols-outlined text-gray-500\">search</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- <button class=\"flex flex-row items-center btn-primary\" matTooltip=\"Thêm mới\" (click)=\"create()\" mat-flat-button>\r\n                    <mat-icon>add_circle</mat-icon>\r\n                    <span class=\"whitespace- \">Tạo Mới</span>\r\n                </button> -->\r\n                <button matTooltip=\"Ẩn hiện cột\" mat-icon-button color=\"primary\" [matMenuTriggerFor]=\"menu\" aria-label=\"Example icon-button with a menu\">\r\n                    <mat-icon>tune</mat-icon>\r\n                </button>\r\n                <mat-menu #menu=\"matMenu\">\r\n                    <div class=\"p-4\">\r\n                        <mat-form-field appearance=\"outline\" class=\"w-full\" subscriptSizing=\"dynamic\">\r\n                            <input (input)=\"doFilterColumns($event)\" (click)=\"$event.stopPropagation()\" matInput placeholder=\"Tìm Kiếm\" />\r\n                            <mat-icon matPrefix>search</mat-icon>\r\n                        </mat-form-field>\r\n                    </div>\r\n                    <div class=\"flex flex-col max-h-80 overflow-auto\">\r\n                        @for (item of FilterColumns; track item.key) {\r\n                        <button mat-menu-item (click)=\"toggleColumn(item);$event.stopPropagation()\">\r\n                            <mat-icon>{{item.isShow ? 'check_box' : 'check_box_outline_blank'}}</mat-icon>\r\n                            <span>{{item.value}}</span>\r\n                        </button>\r\n                        }\r\n                    </div>\r\n                </mat-menu>\r\n                <button matTooltip=\"Tải file excel Mẫu\" (click)=\"ExportExcel(dataSource.data,'Tonghop')\" color=\"primary\" mat-icon-button>\r\n                    <mat-icon>file_download</mat-icon>\r\n                </button>\r\n                <!-- <button matTooltip=\"Tải lên file excel\" (click)=\"uploadfile.click()\" color=\"primary\" mat-icon-button>\r\n                    <mat-icon>file_upload</mat-icon>\r\n                </button> -->\r\n                <input class=\"hidden\" (change)=\"ImporExcel($event)\" type=\"file\" #uploadfile>\r\n                <!-- <button matTooltip=\"Tải dữ liệu từ drive\" (click)=\"LoadDrive()\" color=\"primary\" mat-icon-button>\r\n                    <mat-icon>cloud_download</mat-icon>\r\n                </button> -->\r\n                <span (click)=\"ChoseAllEdit()\" class=\"lg:flex hidden whitespace-  p-2 rounded-lg bg-slate-200\">\r\n                    {{this.Listsanpham().length}} Sản Phẩm\r\n                </span>\r\n                <button (click)=\"OpenTaodonDialog(TaodonDialog)\" *ngIf=\"EditList.length>0\" color=\"primary\" mat-flat-button>\r\n                    Tạo Mới\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"border rounded-lg w-full h-full overflow-auto\">\r\n            <!-- <table class=\"!border w-full cursor-pointer\" mat-table [dataSource]=\"dataSource\" matSort>\r\n                @for (column of displayedColumns; track column) {\r\n                <ng-container [matColumnDef]=\"column\">\r\n                    <th class=\"whitespace-nowrap\" mat-header-cell *matHeaderCellDef mat-sort-header>\r\n                        <span class=\"max-w- line-clamp-4 me-4\">\r\n                            {{ ColumnName[column] }}\r\n                        </span>\r\n                             <span class=\"z-10 material-symbols-outlined text-gray-500\" [matMenuTriggerFor]=\"menu\" #menuTrigger=\"matMenuTrigger\">\r\n                                 filter_alt\r\n                             </span>\r\n                                    <mat-menu  #menu=\"matMenu\">\r\n                                        <div (click)=\"$event.stopPropagation()\"  class=\"cursor-pointer flex flex-col space-y-4 p-3\">                                        \r\n                                        <div class=\"relative w-full\">\r\n                                            <input type=\"text\"\r\n                                                placeholder=\"Tìm Kiếm...\" (keyup)=\"doFilterHederColumn($event,column)\"\r\n                                                class=\"block w-full pl-10 pr-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40\">\r\n                                            <div class=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\r\n                                                <span class=\"material-symbols-outlined text-gray-500\">search</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"flex flex-row space-x-2 items-center justify-between\">\r\n                                            <div class=\"flex flex-row space-x-2 items-center\">\r\n                                                <span class=\"text-xs text-blue-600 underline\" (click)=\"ChosenAll(FilterHederColumn(dataSource.filteredData,column))\">Chọn Tất Cả {{FilterHederColumn(dataSource.filteredData,column).length||0}}</span>\r\n                                                <span class=\"text-xs text-blue-600 underline\" (click)=\"EmptyFiter()\">Xoá</span>\r\n                                            </div>\r\n   \r\n                                            <span class=\"text-xs text-blue-600 underline\" (click)=\"ResetFilter()\">Reset</span>\r\n                                        </div>\r\n                                        <div class=\"w-full flex flex-col space-y-2 max-h-44 overflow-auto\">\r\n                                                <div *ngFor=\"let item of FilterHederColumn(dataSource.filteredData,column); trackBy:trackByFn\" (click)=\"ChosenItem(item,column)\" class=\"flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100\">\r\n                                                   <span *ngIf=\"CheckItem(item)\" class=\"material-symbols-outlined text-blue-600\">check</span>\r\n                                                   @switch (column) {\r\n                                                       @case ('createdAt') {\r\n                                                        <span>{{item[column]|date:'dd/MM/yyyy'}}</span> \r\n                                                       }\r\n                                                       @case ('updatedAt') {\r\n                                                        <span>{{item[column]|date:'dd/MM/yyyy'}}</span> \r\n                                                       }\r\n                                                       @case ('haohut') {\r\n                                                        <span>{{item[column]}}%</span> \r\n                                                       }\r\n                                                       @default {\r\n                                                       <span> {{item[column]||'Trống'}}</span>\r\n                                                       }\r\n                                                     }                                    \r\n                                                </div>\r\n                                        </div>\r\n                                        <div class=\"flex flex-row space-x-2 items-end justify-end\">\r\n                                            <button mat-flat-button color=\"warn\" (click)=\"menuTrigger.closeMenu()\">Đóng</button>\r\n                                            <button mat-flat-button color=\"primary\" (click)=\"ApplyFilterColum(menuTrigger)\" >Áp Dụng</button>\r\n                                        </div>\r\n                                        </div>\r\n                                    </mat-menu>\r\n                    </th>\r\n                    <td mat-cell *matCellDef=\"let row; let idx = index\">\r\n                        @switch (column) {\r\n                        @case ('STT') {\r\n                        <span class=\"max-w- line-clamp-4\">\r\n                            {{ idx + 1 }}\r\n                        </span>\r\n                        }\r\n                        @case ('createdAt') {\r\n                        <span class=\"max-w- line-clamp-4\">\r\n                            {{ row[column]|date:'dd/MM/yyyy'}}\r\n                        </span>\r\n                        }\r\n                        @case ('haohut') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]}}%\r\n                        </span>\r\n                        }\r\n                        @case ('soluong') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]}}\r\n                        </span>\r\n                        }\r\n                        @case ('soluongkho') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]}}\r\n                        </span>\r\n                        }\r\n                        @case ('goiy') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]|number:'1.0-2'}}\r\n                        </span>\r\n                        }\r\n                        @case ('slton') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]|number:'1.0-2'}}\r\n                        </span>\r\n                        }\r\n                        @case ('slchogiao') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]|number:'1.0-2'}}\r\n                        </span>\r\n                        }\r\n                        @case ('slchonhap') {\r\n                        <span class=\"max-w- line-clamp-4 text-end\">\r\n                            {{ row[column]|number:'1.0-2'}}\r\n                        </span>\r\n                        }\r\n                        @case ('isActive') {\r\n                        <span class=\"max-w- line-clamp-4\">\r\n                            @if (row[column]) {\r\n                            <mat-icon class=\"text-green-500\">check_circle</mat-icon>\r\n                            }\r\n                            @else {\r\n                            <mat-icon class=\"text-red-500\">cancel</mat-icon>\r\n                            }\r\n                        </span>\r\n                        }\r\n                        @case ('updatedAt') {\r\n                        <span class=\"max-w- line-clamp-4\">\r\n                            {{ row[column]|date:'dd/MM/yyyy'}}\r\n                        </span>\r\n                        }\r\n                        @default {\r\n                        <span class=\"max-w- line-clamp-4\">\r\n                            {{ row[column] }}\r\n                        </span>\r\n                        }\r\n                        }\r\n                    </td>\r\n                </ng-container>\r\n                }\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\" class=\"hover:bg-slate-100 {{CheckItemInEdit(row)?'!bg-slate-200':''}}\" (click)=\"AddToEdit(row);\"></tr>\r\n                <tr class=\"mat-row\" *matNoDataRow>\r\n                    <td class=\"mat-cell p-4\" colspan=\"4\">Không tìm thấy</td>\r\n                </tr>\r\n            </table> -->\r\n\r\n\r\n            <div class=\"border rounded-lg w-full h-full overflow-auto\">\r\n                <table class=\"!border w-full cursor-pointer\">\r\n                    <thead class=\"bg-gray-50 sticky top-0\">\r\n                        <tr>\r\n                           <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                Mã Sản Phẩm\r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                Tên Sản Phẩm\r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                Đơn Vị Tính\r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                SL Đặt\r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                SL Cần Đặt\r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                SL Bán\r\n                            </th>\r\n                           <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                Tồn \r\n                            </th>\r\n                            <th class=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">\r\n                                Hao Hụt\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\r\n                        <tr *ngFor=\"let item of dataSource.filteredData; let idx = index\" class=\"hover:bg-slate-100 {{CheckItemInEdit(item)?'!bg-slate-200':''}}\" (click)=\"AddToEdit(item)\">\r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                {{ item.masp }}\r\n                            </td> \r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                {{ item.title }}\r\n                            </td>\r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                {{ item.dvt }}\r\n                            </td>\r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                                {{ item.slchogiao | number:'1.0-2' }}\r\n                            </td>\r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                                {{ item.goiy | number:'1.0-2' }}\r\n                            </td>\r\n                            <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                                {{ item.slchonhap | number:'1.0-2' }}\r\n                            </td>\r\n                             <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                                {{ item.slton | number:'1.0-2' }}\r\n                            </td>\r\n                           <td class=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                                {{ item.haohut }}%\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngIf=\"dataSource.filteredData.length === 0\">\r\n                            <td colspan=\"9\" class=\"px-4 py-4 text-center text-sm text-gray-500\">\r\n                                Không tìm thấy dữ liệu\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n\r\n        </div>\r\n        <div class=\"cursor-pointer border rounded-lg px-3 p-1 flex flex-row space-x-2 items-center justify-between\">\r\n            <div class=\"w-full flex lg:p-0 p-2 lg:flex-row lg:space-x-2 lg:items-center lg:justify-between flex-col justify-center\">\r\n                <span class=\"w-full text-center\">Đang Xem <strong>{{ (currentPage - 1) * pageSize + 1 }}</strong> - <strong>{{ currentPage * pageSize > totalItems ? totalItems : currentPage * pageSize }}</strong> trong số {{ totalItems }} mục, {{ currentPage }}/{{totalPages}} Trang</span>                 \r\n               <div class=\"w-full flex flex-row space-x-2 items-center lg:justify-end justify-center\">             \r\n                <span class=\"font-bold text-blue-600\" [matMenuTriggerFor]=\"menu\" #menuHienthi=\"matMenuTrigger\">Hiện Thị : {{pageSize}} mục</span>  \r\n                    <mat-menu #menu=\"matMenu\" >\r\n                         <div class=\"w-full flex flex-col space-y-2 p-4\" (click)=\"$event.stopPropagation()\">\r\n                            <span>Số Lượng</span>\r\n                            <mat-form-field appearance=\"outline\" subscriptSizing=\"dynamic\">\r\n                                <input matInput [(ngModel)]=\"pageSize\"  [ngModelOptions]=\"{ standalone: true }\" placeholder=\"Vui lòng Nhập Số Lượng\" />\r\n                            </mat-form-field>\r\n                            <button mat-flat-button color=\"primary\" (click)=\"onPageSizeChange(pageSize,menuHienthi)\">Áp Dụng</button> \r\n                         </div>   \r\n                    </mat-menu>          \r\n                <div class=\"pagination-controls\">\r\n                  <button mat-icon-button color=\"primary\" [disabled]=\"currentPage === 1\" (click)=\"onPreviousPage()\">\r\n                    <mat-icon>keyboard_arrow_left</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button color=\"primary\" [disabled]=\"currentPage === totalPages\" (click)=\"onNextPage()\">\r\n                    <mat-icon>keyboard_arrow_right</mat-icon>\r\n                  </button>\r\n                </div>\r\n             </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</mat-drawer-container>\r\n\r\n<ng-template #DeleteDialog>\r\n    <mat-dialog-content>\r\n        <div class=\"flex flex-col space-y-8 items-center justify-center\">\r\n            <div class=\"font-bold\">Xác Nhận</div>\r\n            <div>Bạn chắc chắn muốn xoá không?</div>\r\n            <div class=\"flex flex-row space-x-2 items-center justify-center\">\r\n                <button mat-flat-button color=\"primary\" mat-dialog-close=\"true\">Đồng Ý</button>\r\n                <button mat-flat-button color=\"warn\" mat-dialog-close=\"false\">Huỷ Bỏ</button>\r\n            </div>\r\n        </div>\r\n    </mat-dialog-content>\r\n  </ng-template>\r\n\r\n<ng-template #TaodonDialog>\r\n    <mat-dialog-content class=\"!max-h-[90vh] !h-[90vh] !w-[90vw]\">\r\n        <div class=\"h-full w-full flex flex-col space-y-8 items-center\">\r\n            <div class=\"flex font-bold\">Đặt hàng nhà cung cấp</div>\r\n            <div class=\"flex h-full w-full overflow-auto\">\r\n                <app-tablenhucaudathanh [ListFindNCC]=\"ListFindNCC\" [EditList]=\"EditList\" [ListDathang]=\"ListDathang\" (ListDathangChange)=\"onListDathangChange($event)\"></app-tablenhucaudathanh>\r\n            </div>\r\n            <div class=\"flex flex-row space-x-2 items-center justify-center\">\r\n                <button *ngIf=\"!isSubmit\" mat-flat-button color=\"primary\" (click)=\"CheckSubmit()\">Kiểm Tra</button>\r\n                <button *ngIf=\"isSubmit\" mat-flat-button color=\"primary\" mat-dialog-close=\"true\">Đồng Ý</button>\r\n                <button *ngIf=\"isSubmit\" mat-flat-button color=\"warn\" mat-dialog-close=\"false\">Huỷ Bỏ</button>\r\n            </div>\r\n        </div>\r\n    </mat-dialog-content>\r\n  </ng-template>\r\n\r\n\r\n\r\n\r\n","import { __rest } from \"tslib\";\nimport { ApolloLink } from \"../core/index.js\";\nimport { Observable } from \"../../utilities/index.js\";\nexport function setContext(setter) {\n  return new ApolloLink(function (operation, forward) {\n    var request = __rest(operation, []);\n    return new Observable(function (observer) {\n      var handle;\n      var closed = false;\n      Promise.resolve(request).then(function (req) {\n        return setter(req, operation.getContext());\n      }).then(operation.setContext).then(function () {\n        // if the observer is already closed, no need to subscribe.\n        if (closed) return;\n        handle = forward(operation).subscribe({\n          next: observer.next.bind(observer),\n          error: observer.error.bind(observer),\n          complete: observer.complete.bind(observer)\n        });\n      }).catch(observer.error.bind(observer));\n      return function () {\n        closed = true;\n        if (handle) handle.unsubscribe();\n      };\n    });\n  });\n}\n","import { Injectable, signal } from '@angular/core';\nimport { Apollo, gql } from 'apollo-angular';\nimport { ApolloClient, InMemoryCache, ApolloLink, createHttpLink } from '@apollo/client/core';\nimport { setContext } from '@apollo/client/link/context';\nimport { environment } from '../../../environments/environment.development';\nimport { StorageService } from '../utils/storage.service';\nimport { ErrorLogService } from './errorlog.service';\nimport { DateHelpers } from '../utils/date-helpers';\nimport { firstValueFrom } from 'rxjs';\n\nexport interface GraphQLQuery {\n  query: string;\n  variables?: any;\n  operationName?: string;\n}\n\nexport interface GraphQLResponse<T = any> {\n  data?: T;\n  errors?: Array<{\n    message: string;\n    locations?: Array<{ line: number; column: number }>;\n    path?: (string | number)[];\n  }>;\n}\n\nexport interface PaginationInput {\n  page?: number;\n  pageSize?: number;\n}\n\nexport interface SortInput {\n  field: string;\n  direction: 'asc' | 'desc';\n}\n\nexport interface FindManyOptions {\n  where?: any;\n  orderBy?: any;\n  skip?: number;\n  take?: number;\n  include?: any;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GraphqlService {\n  private apolloClient!: ApolloClient<any>;\n  \n  // Signals for reactive state management\n  isLoading = signal<boolean>(false);\n  error = signal<string | null>(null);\n\n  constructor(\n    private apollo: Apollo,\n    private _StorageService: StorageService,\n    private _ErrorLogService: ErrorLogService\n  ) {\n    // Initialize DateHelpers to suppress moment warnings\n    DateHelpers.init();\n    \n    // Setup Apollo Client\n    this.setupApolloClient();\n  }\n\n  /**\n   * Setup Apollo Client with authentication\n   */\n  private setupApolloClient() {\n    const httpLink = createHttpLink({\n      uri: `${environment.APIURL}/graphql`\n    });\n\n    const authLink = setContext((_, { headers }) => {\n      const token = this._StorageService.getItem('token');\n      return {\n        headers: {\n          ...headers,\n          authorization: token ? `Bearer ${token}` : \"\",\n        }\n      };\n    });\n\n    this.apolloClient = new ApolloClient({\n      link: authLink.concat(httpLink),\n      cache: new InMemoryCache(),\n      defaultOptions: {\n        watchQuery: {\n          fetchPolicy: 'network-only'\n        },\n        query: {\n          fetchPolicy: 'network-only'\n        }\n      }\n    });\n\n    this.apollo.create({\n      link: authLink.concat(httpLink),\n      cache: new InMemoryCache(),\n      defaultOptions: {\n        watchQuery: {\n          fetchPolicy: 'network-only'\n        },\n        query: {\n          fetchPolicy: 'network-only'\n        }\n      }\n    });\n  }\n\n  /**\n   * Helper method to normalize model names (convert PascalCase to camelCase)\n   */\n  private normalizeModelName(modelName: string): string {\n    return modelName.charAt(0).toLowerCase() + modelName.slice(1);\n  }\n\n  /**\n   * Helper method to safely format dates for GraphQL queries\n   */\n  private formatDateForGraphQL(date: Date | string | moment.Moment | null | undefined): string | null {\n    if (!date) return null;\n    \n    try {\n      return DateHelpers.formatDateForAPI(date);\n    } catch (error) {\n      console.warn('Error formatting date for GraphQL:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Process filters to ensure dates are properly formatted\n   */\n  private processFilters(filters: any): any {\n    if (!filters) return filters;\n\n    const processedFilters = { ...filters };\n\n    // Common date fields that need formatting\n    const dateFields = [\n      'startDate', 'endDate', 'fromDate', 'toDate', 'createdAt', 'updatedAt',\n      'ngaytao', 'ngaycapnhat', 'ngaygiao', 'ngaydat', 'ngayxuat', 'ngaynhap',\n      'batdau', 'ketthuc', 'tungay', 'denngay'\n    ];\n\n    for (const field of dateFields) {\n      if (processedFilters[field]) {\n        processedFilters[field] = this.formatDateForGraphQL(processedFilters[field]);\n      }\n    }\n\n    // Handle date ranges\n    if (processedFilters.dateRange) {\n      if (processedFilters.dateRange.start) {\n        processedFilters.dateRange.start = this.formatDateForGraphQL(processedFilters.dateRange.start);\n      }\n      if (processedFilters.dateRange.end) {\n        processedFilters.dateRange.end = this.formatDateForGraphQL(processedFilters.dateRange.end);\n      }\n    }\n\n    return processedFilters;\n  }\n\n  /**\n   * Execute a GraphQL query or mutation using Apollo Client\n   */\n  async executeGraphQL<T = any>(query: GraphQLQuery): Promise<GraphQLResponse<T>> {\n    this.isLoading.set(true);\n    this.error.set(null);\n\n    try {\n      const result = await firstValueFrom(\n        this.apollo.query({\n          query: gql`${query.query}`,\n          variables: query.variables,\n          fetchPolicy: 'network-only'\n        })\n      );\n\n      if (result.errors && result.errors.length > 0) {\n        const errorMessage = result.errors.map(err => err.message).join(', ');\n        this.error.set(errorMessage);\n        await this._ErrorLogService.logError('GraphQL Error', result.errors);\n      }\n\n      return {\n        data: result.data as T,\n        errors: result.errors ? result.errors.map(err => ({\n          message: err.message,\n          locations: err.locations ? err.locations.map(loc => ({ line: loc.line, column: loc.column })) : undefined,\n          path: err.path ? [...err.path] : undefined\n        })) : undefined\n      };\n    } catch (error: any) {\n      const errorMessage = error?.message || 'Unknown GraphQL error';\n      this.error.set(errorMessage);\n      await this._ErrorLogService.logError('GraphQL Request Failed', error);\n      throw error;\n    } finally {\n      this.isLoading.set(false);\n    }\n  }\n\n  /**\n   * Execute a GraphQL mutation using Apollo Client\n   */\n  async executeMutation<T = any>(mutation: GraphQLQuery): Promise<GraphQLResponse<T>> {\n    this.isLoading.set(true);\n    this.error.set(null);\n\n    try {\n      const result:any = await firstValueFrom(\n        this.apollo.mutate({\n          mutation: gql`${mutation.query}`,\n          variables: mutation.variables\n        })\n      );\n\n      if (result.errors && result.errors.length > 0) {\n        const errorMessage = result.errors.map((err:any) => err.message).join(', ');\n        this.error.set(errorMessage);\n        await this._ErrorLogService.logError('GraphQL Error', result.errors);\n      }\n\n      return {\n        data: result.data as T,\n        errors: result.errors\n      };\n    } catch (error: any) {\n      const errorMessage = error?.message || 'Unknown GraphQL error';\n      this.error.set(errorMessage);\n      await this._ErrorLogService.logError('GraphQL Mutation Failed', error);\n      throw error;\n    } finally {\n      this.isLoading.set(false);\n    }\n  }\n\n  /**\n   * Universal findMany using the actual GraphQL schema\n   */\n  async findMany<T = any>(\n    modelName: string,\n    options: FindManyOptions = {}\n  ): Promise<GraphQLResponse<{ data: T[]; total: number; page: number; pageSize: number }>> {\n    const normalizedModelName = this.normalizeModelName(modelName);\n    const processedOptions = {\n      ...options,\n      where: this.processFilters(options.where)\n    };\n\n    console.log(`Finding many records for model: ${normalizedModelName}`, processedOptions);\n\n    const query = `\n      query FindMany($modelName: String!, $where: JSON, $orderBy: JSON, $skip: Float, $take: Float, $include: JSON) {\n        findMany(\n          modelName: $modelName\n          where: $where\n          orderBy: $orderBy\n          skip: $skip\n          take: $take\n          include: $include\n        )\n      }\n    `;\n\n    try {\n      const result = await this.executeGraphQL<any>({\n        query,\n        variables: {\n          modelName: normalizedModelName,\n          ...processedOptions\n        }\n      });\n\n      console.log(`GraphQL response for findMany on model ${normalizedModelName}:`, result);\n\n      if (result.errors) {\n        console.error('GraphQL Errors:', result.errors);\n        throw new Error(result.errors.map(e => e.message).join(', '));\n      }\n\n      // The universal resolver returns data directly, so we need to format it\n      if (result.data?.findMany) {\n        return {\n          data: {\n            data: result.data.findMany,\n            total: result.data.findMany.length,\n            page: 1,\n            pageSize: result.data.findMany.length\n          },\n          errors: result.errors\n        };\n      }\n\n      return result;\n    } catch (error) {\n      console.error(`Error in findMany for model ${normalizedModelName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Universal findUnique using model-specific queries\n   */\n  async findOne<T = any>(\n    modelName: string,\n    where: any,\n    include?: any\n  ): Promise<T | null> {\n    const normalizedModelName = this.normalizeModelName(modelName);\n\n    const query = `\n      query FindOne($where: JSON, $include: JSON) {\n        ${normalizedModelName}(where: $where, include: $include)\n      }\n    `;\n\n    try {\n      const result = await this.executeGraphQL<any>({\n        query,\n        variables: { where, include }\n      });\n\n      return result.data?.[normalizedModelName] || null;\n    } catch (error) {\n      console.error(`Error in findOne for model ${normalizedModelName}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Universal create using mutations\n   */\n  async create<T = any>(\n    modelName: string,\n    data: any,\n    include?: any\n  ): Promise<T> {\n    const normalizedModelName = this.normalizeModelName(modelName);\n\n    const mutation = `\n      mutation Create($data: JSON!, $include: JSON) {\n        create${modelName}(data: $data, include: $include)\n      }\n    `;\n\n    const result = await this.executeMutation<any>({\n      query: mutation,\n      variables: { data: this.processFilters(data), include }\n    });\n\n    if (result.errors) {\n      throw new Error(result.errors[0].message);\n    }\n\n    return result.data?.[`create${modelName}`];\n  }\n\n  /**\n   * Universal update using mutations\n   */\n  async update<T = any>(\n    modelName: string,\n    where: any,\n    data: any,\n    include?: any\n  ): Promise<T> {\n    const mutation = `\n      mutation Update($where: JSON!, $data: JSON!, $include: JSON) {\n        update${modelName}(where: $where, data: $data, include: $include)\n      }\n    `;\n\n    const result = await this.executeMutation<any>({\n      query: mutation,\n      variables: { where, data: this.processFilters(data), include }\n    });\n\n    if (result.errors) {\n      throw new Error(result.errors[0].message);\n    }\n\n    return result.data?.[`update${modelName}`];\n  }\n\n  /**\n   * Universal delete using mutations\n   */\n  async delete<T = any>(\n    modelName: string,\n    where: any\n  ): Promise<T> {\n    const mutation = `\n      mutation Delete($where: JSON!) {\n        delete${modelName}(where: $where)\n      }\n    `;\n\n    const result = await this.executeMutation<any>({\n      query: mutation,\n      variables: { where }\n    });\n\n    if (result.errors) {\n      throw new Error(result.errors[0].message);\n    }\n\n    return result.data?.[`delete${modelName}`];\n  }\n\n  /**\n   * Simplified search method\n   */\n  async search<T = any>(\n    modelName: string,\n    searchTerm: string,\n    searchFields: string[],\n    options: FindManyOptions = {}\n  ): Promise<{ data: T[]; total: number }> {\n    const where = {\n      OR: searchFields.map(field => ({\n        [field]: {\n          contains: searchTerm,\n          mode: 'insensitive'\n        }\n      })),\n      ...options.where\n    };\n\n    const result = await this.findMany<T>(modelName, { ...options, where });\n    \n    return {\n      data: result.data?.data || [],\n      total: result.data?.total || 0\n    };\n  }\n\n  /**\n   * Debug method to test GraphQL connection\n   */\n  async debugQuery(): Promise<any> {\n    try {\n      // Test schema introspection\n      const schemaQuery = `\n        query IntrospectSchema {\n          __schema {\n            types {\n              name\n              kind\n            }\n          }\n        }\n      `;\n\n      const schemaResult = await this.executeGraphQL({ query: schemaQuery });\n      \n      // Test available models\n      const availableModels = ['khachhang', 'sanpham', 'donhang', 'dathang', 'nhacungcap'];\n      \n      console.log('Available types:', schemaResult.data?.__schema?.types\n        ?.filter((t: any) => !t.name.startsWith('__'))\n        ?.map((t: any) => t.name)\n      );\n\n      // Test a simple query\n      const testResult = await this.findMany('khachhang', { take: 1 });\n      \n      return {\n        schema: schemaResult,\n        testQuery: testResult,\n        availableModels\n      };\n    } catch (error) {\n      console.error('Debug query failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get specific model data with proper typing\n   */\n  async getKhachhangs(options: FindManyOptions = {}) {\n    return this.findMany('khachhang', options);\n  }\n\n  async getSanphams(options: FindManyOptions = {}) {\n    return this.findMany('sanpham', options);\n  }\n\n  async getDonhangs(options: FindManyOptions = {}) {\n    return this.findMany('donhang', options);\n  }\n\n  async getDathangs(options: FindManyOptions = {}) {\n    return this.findMany('dathang', options);\n  }\n\n  async getNhacungcaps(options: FindManyOptions = {}) {\n    return this.findMany('nhacungcap', options);\n  }\n\n  /**\n   * Utility methods\n   */\n  clearError(): void {\n    this.error.set(null);\n  }\n\n  isLoadingState(): boolean {\n    return this.isLoading();\n  }\n\n  getCurrentError(): string | null {\n    return this.error();\n  }\n\n  /**\n   * Refresh Apollo Client cache\n   */\n  async refreshCache(): Promise<void> {\n    await this.apolloClient.resetStore();\n  }\n\n  /**\n   * Clear Apollo Client cache\n   */\n  async clearCache(): Promise<void> {\n    await this.apolloClient.clearStore();\n  }\n}\n"],"mappings":"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","names":["v","moment"],"x_google_ignoreList":[4]}