import './polyfills.server.mjs';
import{a as Ee}from"./chunk-RROL3VC2.mjs";import{a as Se}from"./chunk-ZP4VHF5N.mjs";import{a as Pe}from"./chunk-H2UHIXZE.mjs";import{a as ye}from"./chunk-5P3JPHF5.mjs";import{a as xe}from"./chunk-IKY2XXJB.mjs";import{a as fe,b as ke,c as Ce,k as De}from"./chunk-SOMI6LHO.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-73IBRO6I.mjs";import{a as pe}from"./chunk-55NAIC3X.mjs";import{a as _e,b as ge}from"./chunk-C2K3KDI5.mjs";import{h as ne}from"./chunk-RTAVNGKX.mjs";import{a as de}from"./chunk-26NM6QMQ.mjs";import"./chunk-GP5NNPSV.mjs";import"./chunk-DJ7Z5PCU.mjs";import"./chunk-F2LFTO4K.mjs";import"./chunk-AY7BIVB7.mjs";import"./chunk-WXUJ4ICQ.mjs";import{a as ce,b as se}from"./chunk-BS3IPDVR.mjs";import{d as me,e as V}from"./chunk-SWDJOT3A.mjs";import{a as U,b as Y}from"./chunk-KDVGN7TU.mjs";import{a as Q}from"./chunk-Y2EDMVRJ.mjs";import"./chunk-2QQJMO44.mjs";import"./chunk-PZREJNWC.mjs";import"./chunk-7UV6ZOHS.mjs";import"./chunk-MGIVCIKU.mjs";import{b as Z,g as $,j as ee,l as te,n as ie,p as oe,r as ae,u as re,v as le,x as he,y as ue}from"./chunk-4FNNSTKU.mjs";import"./chunk-OFMEUUWH.mjs";import"./chunk-7ZQLLCLM.mjs";import"./chunk-XYLVVOXK.mjs";import{a as H,b as q,d as J}from"./chunk-NGQGZSRV.mjs";import{ga as X}from"./chunk-N5O4PAKU.mjs";import"./chunk-P5ZL7ANQ.mjs";import{a as j,d as G}from"./chunk-WTL5YLT6.mjs";import"./chunk-WGIUMPU6.mjs";import{n as K,o as z,s as R}from"./chunk-7IDSCSNU.mjs";import{Bb as I,Bc as A,Cc as c,Dc as T,Ec as S,Fc as B,Ib as y,Ic as W,Jc as f,Kc as k,Lc as C,Na as w,Nc as D,Rc as O,Ub as h,bc as v,cc as M,dc as o,ec as a,fc as L,gc as b,hc as F,jc as P,la as g,oc as _,pb as u,qc as s,qd as N,ua as m,va as p}from"./chunk-EF3JSO7B.mjs";import"./chunk-KB5IWD3E.mjs";import{j as x}from"./chunk-RIAI3ORJ.mjs";var Me=()=>({title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"}),be=()=>({title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"}),Fe=()=>({title:"Chuy\u1EC3n Kho",value:"chuyenkho"}),Te=()=>({title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}),Ve=(l,n,e,i)=>[l,n,e,i],E=()=>({standalone:!0}),ve=(l,n)=>n.id;function Ie(l,n){if(l&1){let e=P();o(0,"button",2),_("click",function(){m(e);let t=s();return p(t.handlePhieukhoAction())}),o(1,"mat-icon"),c(2,"save"),a()()}}function Le(l,n){if(l&1){let e=P();o(0,"button",2),_("click",function(){m(e);let t=s();return p(t.toggleEdit())}),o(1,"mat-icon"),c(2,"edit"),a()()}}function Ae(l,n){if(l&1){let e=P();b(0),o(1,"div",10)(2,"div",11),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),o(4,"div",12)(5,"button",13),_("click",function(){m(e);let t=s();return p(t.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),a(),o(7,"button",14),_("click",function(){m(e);let t=s();return p(t.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),a()()(),F()}}function Be(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.value),u(),S(" ",e.title," ")}}function We(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),B(" (",e.makho,")",e.name," ")}}function Oe(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),S(" ",e.madonhang," ")}}function Ne(l,n){if(l&1){let e=P();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n B\xE1n"),a(),o(3,"mat-select",28),_("selectionChange",function(t){m(e);let r=s(2);return p(r.ChosenDonhang(t,"xuat"))}),y(4,Oe,2,2,"mat-option",20),a()()}if(l&2){let e=s(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DonhangService.ListDonhang())}}function Ke(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),S(" ",e.madncc," ")}}function ze(l,n){if(l&1){let e=P();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n Mua"),a(),o(3,"mat-select",28),_("selectionChange",function(t){m(e);let r=s(2);return p(r.ChosenDonhang(t,"nhap"))}),y(4,Ke,2,2,"mat-option",20),a()()}if(l&2){let e=s(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DathangService.ListDathang())}}function Re(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),W("",e.title," [SL : ",e.soluong,"",e.dvt,"][SL T\u1ED3n : ",e.soluongkho,"",e.dvt,"]")}}function je(l,n){if(l&1){let e=P();o(0,"div",25)(1,"mat-form-field",17)(2,"mat-label"),c(3,"S\u1EA3n Ph\u1EA9m"),a(),o(4,"mat-select",29),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].sanphamId,t)||(d.DetailPhieukho().sanpham[r].sanphamId=t),p(t)}),o(5,"div",30)(6,"div",4)(7,"mat-form-field",31)(8,"input",32),_("input",function(t){m(e);let r=s(2);return p(r.DoFindSanpham(t))}),a()(),o(9,"button",33)(10,"mat-icon"),c(11,"add_circle"),a()()(),o(12,"div",34),v(13,Re,2,6,"mat-option",27,ve),a()()()(),o(15,"mat-form-field",35)(16,"mat-label"),c(17,"SL"),a(),o(18,"input",36),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].sldat,t)||(d.DetailPhieukho().sanpham[r].sldat=t),p(t)}),_("change",function(t){let r=m(e).$implicit,d=s(2);return p(d.onChangeSoluong(r,t))}),a()(),o(19,"mat-form-field",35)(20,"mat-label"),c(21,"SL Th\u1EF1c t\u1EBF"),a(),o(22,"input",37),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].soluong,t)||(d.DetailPhieukho().sanpham[r].soluong=t),p(t)}),_("change",function(t){let r=m(e).$implicit,d=s(2);return p(d.onChangeSoluong(r,t))}),a()(),o(23,"mat-form-field",17)(24,"mat-label"),c(25,"Ghi Ch\xFA"),a(),o(26,"input",38),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].ghichu,t)||(d.DetailPhieukho().sanpham[r].ghichu=t),p(t)}),a()()()}if(l&2){let e=n.$index,i=s(2);u(4),h("disabled",!i.isEdit)("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].sanphamId),h("ngModelOptions",D(13,E)),u(9),M(i.filterSP),u(5),h("disabled",!0),f("ngModel",i.DetailPhieukho().sanpham[e].sldat),h("ngModelOptions",D(14,E)),u(4),h("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].soluong),h("ngModelOptions",D(15,E)),u(4),h("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].ghichu),h("ngModelOptions",D(16,E))}}function Ge(l,n){if(l&1){let e=P();b(0)(1),o(2,"div",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),c(6,"M\xE3 Phi\u1EBFu"),a(),o(7,"input",18),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().maphieu,t)||(r.DetailPhieukho().maphieu=t),p(t)}),a()(),o(8,"mat-form-field",17)(9,"mat-label"),c(10,"Lo\u1EA1i Phi\u1EBFu"),a(),o(11,"mat-select",19),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().type,t)||(r.DetailPhieukho().type=t),p(t)}),_("selectionChange",function(t){m(e);let r=s();return p(r.ChangeType(t))}),y(12,Be,2,2,"mat-option",20),a()(),o(13,"mat-form-field",17)(14,"mat-label"),c(15,"Kho"),a(),o(16,"mat-select",5),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().khoId,t)||(r.DetailPhieukho().khoId=t),p(t)}),y(17,We,2,3,"mat-option",20),a()(),y(18,Ne,5,2,"mat-form-field",21)(19,ze,5,2,"mat-form-field",21),o(20,"mat-form-field",17)(21,"mat-label"),c(22,"Ng\xE0y"),a(),o(23,"input",22),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().ngay,t)||(r.DetailPhieukho().ngay=t),p(t)}),a(),L(24,"mat-datepicker-toggle",23)(25,"mat-datepicker",null,0),a()(),o(27,"div",24),v(28,je,27,17,"div",25,ve),a(),o(30,"div")(31,"button",26),_("click",function(){m(e);let t=s();return p(t.AddSanpham())}),o(32,"span"),c(33,"Th\xEAm"),a(),o(34,"mat-icon"),c(35,"add"),a()()()(),F()()}if(l&2){let e=A(26),i=s();u(7),f("ngModel",i.DetailPhieukho().maphieu),h("disabled",!i.isEdit()),u(4),f("ngModel",i.DetailPhieukho().type),h("disabled",!i.isEdit()),u(),h("ngForOf",O(19,Ve,D(15,Me),D(16,be),D(17,Fe),D(18,Te))),u(4),f("ngModel",i.DetailPhieukho().khoId),h("disabled",!i.isEdit()),u(),h("ngForOf",i._KhoService.ListKho()),u(),h("ngIf",i.DetailPhieukho().type=="xuat"),u(),h("ngIf",i.DetailPhieukho().type=="nhap"),u(4),h("matDatepicker",e),f("ngModel",i.DetailPhieukho().ngay),h("disabled",!i.isEdit()),u(),h("for",e),u(4),M(i.DetailPhieukho().sanpham),u(3),h("disabled",!i.isEdit())}}var we=class l{_ListphieukhoComponent=g(Ee);_PhieukhoService=g(Se);_KhoService=g(Pe);_DonhangService=g(pe);_DathangService=g(ye);_SanphamService=g(xe);_route=g(j);_router=g(G);_snackBar=g(Q);filterSP=[];LoaiPhieu=[{title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"},{title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"},{title:"Chuy\u1EC3n Kho",value:"chuyenkho"},{title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}];constructor(){this._route.paramMap.subscribe(n=>x(this,null,function*(){let e=n.get("id");this._PhieukhoService.setPhieukhoId(e),yield this._DonhangService.getAllDonhang(),yield this._DathangService.getAllDathang(),yield this._SanphamService.getAllSanpham(),yield this._KhoService.getAllKho(),this.filterSP=this._SanphamService.ListSanpham()})),N(()=>x(this,null,function*(){let n=this._PhieukhoService.phieukhoId();n||(this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()),n==="0"?(this.DetailPhieukho.set({maphieu:V(8,!1),sanpham:[],ngay:new Date}),this._ListphieukhoComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieukho","0"])):(yield this._PhieukhoService.getPhieukhoByid(n),this._ListphieukhoComponent.drawer.open(),this._router.navigate(["/admin/phieukho",n]))}))}ChangeType(n){this.DetailPhieukho.update(e=>(e.sanpham=[],e))}ChosenDonhang(n,e){console.log(n.value),e=="xuat"?this.DetailPhieukho.update(i=>(i.sanpham=this._DonhangService.ListDonhang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)):this.DetailPhieukho.update(i=>(i.sanpham=this._DathangService.ListDathang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)),console.log(this.DetailPhieukho())}DetailPhieukho=this._PhieukhoService.DetailPhieukho;isEdit=w(!1);isDelete=w(!1);phieukhoId=this._PhieukhoService.phieukhoId;ngOnInit(){return x(this,null,function*(){})}handlePhieukhoAction(){return x(this,null,function*(){this.phieukhoId()==="0"?yield this.createPhieukho():yield this.updatePhieukho()})}createPhieukho(){return x(this,null,function*(){try{yield this._PhieukhoService.CreatePhieukho(this.DetailPhieukho()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieukho:",n)}console.log(this.DetailPhieukho())})}updatePhieukho(){return x(this,null,function*(){try{yield this._PhieukhoService.updatePhieukho(this.DetailPhieukho()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieukho:",n)}console.log(this.DetailPhieukho())})}DeleteData(){return x(this,null,function*(){try{yield this._PhieukhoService.DeletePhieukho(this.DetailPhieukho()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieukho"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieukho:",n)}})}goBack(){this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieukho.update(n=>(n.slug=me(n.title),n))}DoFindSanpham(n){let e=n.target.value.toLowerCase();this.filterSP=this._SanphamService.ListSanpham().filter(i=>de(i.title).includes(e)||i.title.toLowerCase().includes(e))}onChangeSoluong(n,e){}AddSanpham(){this.DetailPhieukho.update(n=>(n.sanpham.push({id:V(8,!1),idSP:"",sldat:0,soluong:0,ghichu:""}),n)),console.log(this.DetailPhieukho())}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=I({type:l,selectors:[["app-detailphieukho"]],decls:17,vars:8,consts:[["picker",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],[1,"w-full","flex","flex-row","space-x-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 Phi\u1EBFu",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","selectionChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","w-full","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["matInput","","placeholder","Ch\u1ECDn ng\xE0y",3,"ngModelChange","matDatepicker","ngModel","disabled"],["matSuffix","",3,"for"],[1,"w-full","flex","flex-col","space-y-2","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"],[3,"selectionChange","disabled"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],["mat-icon-button","","color","primary"],[1,"overflow-y-auto","max-h-44"],["appearance","outline","subscriptSizing","dynamic",1,"w-60"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng Th\u1EF1c T\u1EBF",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"button",2),_("click",function(){return i.goBack()}),o(2,"mat-icon"),c(3,"arrow_back"),a()(),o(4,"div",3),c(5),a(),o(6,"div",4)(7,"mat-slide-toggle",5),C("ngModelChange",function(r){return k(i.DetailPhieukho().isActive,r)||(i.DetailPhieukho().isActive=r),r}),c(8),a(),y(9,Ie,3,0,"button",6)(10,Le,3,0,"button",6),o(11,"button",7),_("click",function(){return i.toggleDelete()}),o(12,"mat-icon"),c(13,"delete"),a()()()(),o(14,"div",8),y(15,Ae,9,0,"ng-container",9)(16,Ge,36,24,"ng-container",9),a()),e&2){let t;u(5),T(((t=i.DetailPhieukho())==null?null:t.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),u(2),f("ngModel",i.DetailPhieukho().isActive),h("disabled",!i.isEdit()),u(),T(i.DetailPhieukho().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),u(),h("ngIf",i.isEdit()),u(),h("ngIf",!i.isEdit()),u(5),h("ngIf",i.isDelete()),u(),h("ngIf",!i.isDelete())}},dependencies:[le,re,oe,ae,ue,he,ie,Z,te,$,ee,Y,U,J,H,q,se,ce,X,ne,R,K,z,ge,_e,De,fe,ke,Ce],encapsulation:2})};export{we as DetailPhieukhoComponent};
