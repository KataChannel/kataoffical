import './polyfills.server.mjs';
import{a as u}from"./chunk-MGIVCIKU.mjs";import{a}from"./chunk-7ZQLLCLM.mjs";import{a as y}from"./chunk-DMOTB6FA.mjs";import{d as g}from"./chunk-OAPSLP2Q.mjs";import{Na as s,fa as p,ka as c}from"./chunk-WORJTRGV.mjs";import{a as d,g as m,j as r}from"./chunk-RIAI3ORJ.mjs";var h=m(u());var l=class i{constructor(n,t){this._StorageService=n;this.router=t}ListDonhang=s([]);DetailDonhang=s({});donhangId=s(null);setDonhangId(n){this.donhangId.set(n)}CreateDonhang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${a.APIURL}/donhang`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(e.id),e}catch(t){return console.error(t)}})}searchDonhang(n){return r(this,null,function*(){let t=d({},n);t.Batdau=(0,h.default)(t.Batdau).utc(),t.Ketthuc=(0,h.default)(t.Ketthuc).utc();try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},e=yield fetch(`${a.APIURL}/donhang/search`,o);e.ok;let f=yield e.json();this.ListDonhang.set(f)}catch(o){return console.error(o)}})}getAllDonhang(){return r(this,null,function*(){try{let n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${a.APIURL}/donhang`,n);t.ok;let o=yield t.json();this.ListDonhang.set(o)}catch(n){return console.error(n)}})}getDonhangByid(n){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},o=yield fetch(`${a.APIURL}/donhang/findid/${n}`,t);o.ok;let e=yield o.json();this.DetailDonhang.set(e)}catch(t){return console.error(t)}})}updateDonhang(n){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${a.APIURL}/donhang/${n.id}`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();o.ok,this.getAllDonhang(),this.getDonhangByid(n.id)}catch(t){return console.error(t)}})}DeleteDonhang(n){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};(yield fetch(`${a.APIURL}/donhang/${n.id}`,t)).ok,this.getAllDonhang()}catch(t){return console.error(t)}})}SearchDonhang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${a.APIURL}/donhang/search`,t);o.ok;let e=yield o.json();return this.ListDonhang.set(e.items),e}catch(t){return console.error(t)}})}SearchField(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${a.APIURL}/donhang/searchfield`,t);o.ok;let e=yield o.json();return this.DetailDonhang.set(e),e}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||i)(c(y),c(g))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
