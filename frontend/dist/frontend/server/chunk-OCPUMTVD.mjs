import './polyfills.server.mjs';
import{a as tt}from"./chunk-RSUWHIIG.mjs";import{a as et}from"./chunk-475RDEO7.mjs";import{a as Re,b as Ae,c as D,d as ze,e as je}from"./chunk-24IWYRDW.mjs";import{a as De,b as Ve,c as Be,d as $e,e as He,g as Ne,h as Qe,j as qe,k as Ge,m as Ke,n as We,p as Xe,q as Je,r as Ye,s as Ze}from"./chunk-YLNRPZ43.mjs";import{c as Oe,d as ve,f as ye,h as Ue}from"./chunk-MKCJIPP5.mjs";import{a as me,b as ue,c as _e}from"./chunk-2BLGBEBY.mjs";import{a as fe,b as Ce,c as he,d as xe}from"./chunk-MCRAB6BF.mjs";import{b as Ie}from"./chunk-WAMAZJED.mjs";import{b as Me,g as be,j as Pe,n as we,p as Se,r as Ee,v as Le,w as ke,y as Te,z as Fe}from"./chunk-B5EIP2RZ.mjs";import{a as pe,b as ge}from"./chunk-VAQAQLGK.mjs";import{a as ce,b as de}from"./chunk-GECPKQOY.mjs";import{a as ae,c as se,e as le}from"./chunk-WWCCF2ZG.mjs";import{b as re,d as oe}from"./chunk-E3IZRHWW.mjs";import{o as te,t as ne,x as ie}from"./chunk-2XUBDZFU.mjs";import{Bc as T,Cc as F,Dc as I,Fb as $,Gc as y,Hc as l,Ic as w,Jc as P,Kc as G,Mb as x,Mc as K,Nc as W,Oc as X,Qc as J,Ra as g,Wc as Y,Yb as C,Yc as Z,ac as H,ad as ee,dc as v,fc as N,gc as E,hc as L,ic as o,ja as S,jc as a,kc as k,lc as Q,mc as q,oa as j,oc as b,pa as B,tb as c,tc as f,vc as d,wd as U,ya as _,yb as O,za as p}from"./chunk-HL4PWCFI.mjs";import{a as z,j as h}from"./chunk-RIAI3ORJ.mjs";var V=class i{constructor(e){this.storageService=e}_allUsers=g([]);_searchTerm=g("");_currentPage=g(1);_pageSize=g(50);_isLoading=g(!1);_selectedUsers=g(new Set);_statusFilter=g("all");_currentUser=g(null);allUsers=this._allUsers.asReadonly();searchTerm=this._searchTerm.asReadonly();currentPage=this._currentPage.asReadonly();pageSize=this._pageSize.asReadonly();isLoading=this._isLoading.asReadonly();selectedUsers=this._selectedUsers.asReadonly();statusFilter=this._statusFilter.asReadonly();currentUser=this._currentUser.asReadonly();filteredUsers=U(()=>{let e=this._allUsers(),t=this._statusFilter();t!=="all"&&(e=e.filter(r=>t==="active"?r.isActive:!r.isActive));let n=this._searchTerm().toLowerCase();return n&&(e=e.filter(r=>r.email?.toLowerCase().includes(n)||r.profile?.name?.toLowerCase().includes(n)||r.SDT?.toLowerCase().includes(n))),e});totalItems=U(()=>this.filteredUsers().length);totalPages=U(()=>Math.ceil(this.totalItems()/this._pageSize()));paginatedUsers=U(()=>{let e=(this._currentPage()-1)*this._pageSize(),t=e+this._pageSize();return this.filteredUsers().slice(e,t)});graphqlService=B(tt);loadAllUsers(e=!1){return h(this,null,function*(){if(!e&&this._allUsers().length>0)return this._allUsers();this._isLoading.set(!0);try{let t={orderBy:{createdAt:"desc"},include:{roles:{include:{role:{include:{permissions:{include:{permission:!0}}}}}}}},n=yield this.graphqlService.findMany("user",t);return this._allUsers.set(n),this._currentPage.set(1),n}catch(t){throw console.error("Error loading users:",t),t}finally{this._isLoading.set(!1)}})}createUser(e){return h(this,null,function*(){this._isLoading.set(!0);try{let t={email:e.email,password:e.password,SDT:e.SDT,isActive:e.isActive??!0},n=yield this.graphqlService.createOne("user",t,{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}});if(e.roleIds&&e.roleIds.length>0){yield this.assignRolesToUser(n.id,e.roleIds);let s=yield this.getUserById(n.id);if(s){let m=this._allUsers();return this._allUsers.set([s,...m.filter(u=>u.id!==n.id)]),s}}let r=this._allUsers();return this._allUsers.set([n,...r]),n}catch(t){throw console.error("Error creating user:",t),t}finally{this._isLoading.set(!1)}})}updateUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let n=z({},t);delete n.roles,delete n.permissions,delete n.profile,delete n.userRoles,Object.keys(n).forEach(u=>{let M=n[u];M&&typeof M=="object"&&Array.isArray(M)&&M.some(A=>A&&typeof A=="object"&&Object.keys(A).length>2)&&(console.warn(`Removing complex array field '${u}' from user update`),delete n[u])}),console.log("Updating user with cleaned data:",{id:e,originalKeys:Object.keys(t),cleanedKeys:Object.keys(n)});let r=yield this.graphqlService.updateOne("user",{id:e},n,{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}}),s=this._allUsers(),m=s.findIndex(u=>u.id===e);if(m!==-1){let u=[...s];u[m]=r,this._allUsers.set(u)}return r}catch(n){throw console.error("Error updating user:",n),n}finally{this._isLoading.set(!1)}})}deleteUser(e){return h(this,null,function*(){this._isLoading.set(!0);try{try{yield this.graphqlService.deleteOne("user",{id:e})}catch(s){console.warn("User already deleted or not found:",s)}let n=this._allUsers().filter(s=>s.id!==e);this._allUsers.set(n);let r=new Set(this._selectedUsers());r.delete(e),this._selectedUsers.set(r)}catch(t){throw console.error("Error deleting user:",t),t}finally{this._isLoading.set(!1)}})}getUserById(e){return h(this,null,function*(){try{return yield this.graphqlService.findUnique("user",{id:e},{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}})}catch(t){return console.error("Error getting user by id:",t),null}})}assignRolesToUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let n=t.map(s=>({userId:e,roleId:s}));yield this.graphqlService.batchCreate("userRole",n);let r=yield this.getUserById(e);if(r){let s=this._allUsers(),m=s.findIndex(u=>u.id===e);if(m!==-1){let u=[...s];u[m]=r,this._allUsers.set(u)}}}catch(n){throw console.error("Error assigning roles to user:",n),n}finally{this._isLoading.set(!1)}})}removeRoleFromUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let r=(yield this.getUserById(e))?.roles?.find(s=>s.roleId===t);if(r){try{yield this.graphqlService.deleteOne("userRole",{id:r.id})}catch(m){console.warn("UserRole already deleted or not found:",m)}let s=yield this.getUserById(e);if(s){let m=this._allUsers(),u=m.findIndex(M=>M.id===e);if(u!==-1){let M=[...m];M[u]=s,this._allUsers.set(M)}}}else console.warn(`UserRole not found for userId: ${e}, roleId: ${t}`)}catch(n){throw console.error("Error removing role from user:",n),n}finally{this._isLoading.set(!1)}})}setSearchTerm(e){this._searchTerm.set(e),this._currentPage.set(1)}setStatusFilter(e){this._statusFilter.set(e),this._currentPage.set(1)}setPage(e){e>=1&&e<=this.totalPages()&&this._currentPage.set(e)}setPageSize(e){this._pageSize.set(e),this._currentPage.set(1)}nextPage(){this._currentPage()<this.totalPages()&&this._currentPage.set(this._currentPage()+1)}previousPage(){this._currentPage()>1&&this._currentPage.set(this._currentPage()-1)}toggleUserSelection(e){let t=new Set(this._selectedUsers());t.has(e)?t.delete(e):t.add(e),this._selectedUsers.set(t)}selectAllCurrentPage(){let e=new Set(this._selectedUsers());this.paginatedUsers().forEach(t=>{e.add(t.id)}),this._selectedUsers.set(e)}deselectAllCurrentPage(){let e=new Set(this._selectedUsers());this.paginatedUsers().forEach(t=>{e.delete(t.id)}),this._selectedUsers.set(e)}clearSelection(){this._selectedUsers.set(new Set)}isSelected(e){return this._selectedUsers().has(e)}get selectedCount(){return this._selectedUsers().size}get selectedIds(){return Array.from(this._selectedUsers())}findUserById(e){return this._allUsers().find(t=>t.id===e)}getUsersByRole(e){return this._allUsers().filter(t=>t.roles?.some(n=>n.roleId===e))}getActiveUsers(){return this._allUsers().filter(e=>e.isActive)}getUserPermissions(e){let t=this.findUserById(e);if(!t||!t.roles)return[];let n=[];return t.roles.forEach(r=>{r.role.permissions&&n.push(...r.role.permissions)}),n.filter((r,s,m)=>s===m.findIndex(u=>u.id===r.id))}hasPermission(e,t){return this.getUserPermissions(e).some(r=>r.codeId===t)}clearCache(){this._allUsers.set([]),this._searchTerm.set(""),this._statusFilter.set("all"),this._currentPage.set(1),this.clearSelection(),this._currentUser.set(null)}refreshData(){return this.loadAllUsers(!0)}setCurrentUser(e){this._currentUser.set(e)}clearCurrentUser(){this._currentUser.set(null)}static \u0275fac=function(t){return new(t||i)(j(de))};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=class i{_isOpen=g(!1);isOpen=this._isOpen.asReadonly();open(){this._isOpen.set(!0)}close(){this._isOpen.set(!1)}toggle(){this._isOpen.update(e=>!e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};var at=["drawer"],st=()=>({standalone:!0}),lt=(i,e)=>e.key,ct=(i,e)=>e.id;function dt(i,e){if(i&1){let t=b();o(0,"button",35),f("click",function(){_(t);let r=d(),s=y(61);return p(r.openDeleteDialog(s))}),o(1,"mat-icon"),l(2,"delete"),a(),o(3,"span",16),l(4,"Xo\xE1"),a()()}}function mt(i,e){if(i&1){let t=b();o(0,"button",48),f("click",function(r){_(t);let s=d().$implicit;return d(4).toggleColumn(s),p(r.stopPropagation())}),o(1,"mat-icon"),l(2),a(),o(3,"span"),l(4),a()()}if(i&2){let t=d().$implicit;C("disabled",!0),c(2),w(t.isShow?"check_box":"check_box_outline_blank"),c(2),w(t.value)}}function ut(i,e){if(i&1){let t=b();o(0,"button",49),f("click",function(r){_(t);let s=d().$implicit;return d(4).toggleColumn(s),p(r.stopPropagation())}),o(1,"mat-icon"),l(2),a(),o(3,"span"),l(4),a()()}if(i&2){let t=d().$implicit;c(2),w(t.isShow?"check_box":"check_box_outline_blank"),c(2),w(t.value)}}function _t(i,e){if(i&1&&x(0,mt,5,3,"button",46)(1,ut,5,2,"button",47),i&2){let t=e.$implicit;v(t.key=="stt"?0:1)}}function pt(i,e){if(i&1){let t=b();o(0,"th",36)(1,"button",40)(2,"mat-icon"),l(3,"tune"),a()(),o(4,"mat-menu",null,4)(6,"div",41)(7,"mat-form-field",42)(8,"input",43),f("input",function(r){_(t);let s=d(3);return p(s.doFilterColumns(r))})("click",function(r){return _(t),p(r.stopPropagation())}),a(),o(9,"mat-icon",44),l(10,"search"),a()(),o(11,"button",26),f("click",function(){_(t);let r=d(3);return p(r.updateDisplayedColumns())}),o(12,"mat-icon"),l(13,"check_circle"),a()()(),o(14,"div",45),E(15,_t,2,1,null,null,lt),a()()()}if(i&2){let t=y(5),n=d(3);c(),C("matMenuTriggerFor",t),c(14),L(n.FilterColumns)}}function gt(i,e){i&1&&x(0,pt,17,1,"th",39)}function ft(i,e){if(i&1){let t=b();o(0,"th",37)(1,"span",51),l(2),a(),o(3,"app-searchfilter",52),f("OutFilter",function(r){_(t);let s=d(3);return p(s.onOutFilter(r))}),a()()}if(i&2){let t=d(2).$implicit,n=d();c(2),P(" ",n.ColumnName[t]," "),c(),C("icon","filter_alt")("ListItem",n.Listuser())("fieldsearch",t)("ListFilter",n.ListFilter)("filterItem",n.FilterHederColumn(n.Listuser(),t))}}function Ct(i,e){i&1&&x(0,ft,4,6,"th",50)}function ht(i,e){if(i&1){let t=b();o(0,"span",57),f("click",function(){_(t);let r=d().$implicit,s=d(2);return p(s.goToDetail(r))}),l(1),a()}if(i&2){let t=d().$implicit,n=d().$implicit;c(),P(" ",t[n]," ")}}function xt(i,e){i&1&&(o(0,"mat-icon"),l(1,"check"),a())}function Mt(i,e){if(i&1&&(o(0,"span"),l(1),a()),i&2){let t=d(2).index;c(),w(t+1)}}function bt(i,e){if(i&1){let t=b();o(0,"span",58),f("click",function(){_(t);let r=d().$implicit,s=d(2);return p(s.AddToEdit(r))}),x(1,xt,2,0,"mat-icon")(2,Mt,2,1,"span"),a()}if(i&2){let t=d().$implicit,n=d(2);c(),v(n.CheckSelect(t)?1:2)}}function Pt(i,e){if(i&1&&(o(0,"span",56),l(1),Y(2,"date"),a()),i&2){let t=d().$implicit,n=d().$implicit;c(),P(" ",Z(2,1,t[n],"dd/MM/yyyy")," ")}}function wt(i,e){i&1&&(o(0,"mat-icon",59),l(1,"check_circle"),a())}function Ot(i,e){i&1&&(o(0,"mat-icon",60),l(1,"cancel"),a())}function vt(i,e){if(i&1&&(o(0,"span",56),x(1,wt,2,0,"mat-icon",59)(2,Ot,2,0,"mat-icon",60),a()),i&2){let t=d().$implicit,n=d().$implicit;c(),v(t[n]?1:2)}}function yt(i,e){if(i&1&&(o(0,"span",61),l(1),a()),i&2){let t=e.$implicit;c(),P(" ",t.role.name," ")}}function Ut(i,e){if(i&1&&(o(0,"div",56),E(1,yt,2,1,"span",61,ct),a()),i&2){let t=d().$implicit;c(),L(t.roles)}}function St(i,e){if(i&1&&(o(0,"span",56),l(1),a()),i&2){let t=d().$implicit,n=d().$implicit;c(),P(" ",t[n]," ")}}function Et(i,e){if(i&1&&(o(0,"td",53),x(1,ht,2,1,"span",54)(2,bt,3,1,"span",55)(3,Pt,3,4,"span",56)(4,vt,3,1,"span",56)(5,Ut,3,0,"div",56)(6,St,2,1,"span",56),a()),i&2){let t,n=d().$implicit;c(),v((t=n)==="email"?1:t==="stt"?2:t==="createdAt"?3:t==="isActive"?4:t==="roles"?5:6)}}function Lt(i,e){if(i&1&&(Q(0,31),x(1,gt,1,0,"th",36)(2,Ct,1,0,"th",37)(3,Et,7,1,"td",38),q()),i&2){let t=e.$implicit;C("matColumnDef",t),c(),v(t=="stt"?1:2)}}function kt(i,e){i&1&&k(0,"tr",62)}function Tt(i,e){if(i&1&&k(0,"tr",63),i&2){let t=e.$implicit,n=d();H("hover:bg-slate-50 ",n.CheckItemInEdit(t)?"!bg-blue-50":"","")}}function Ft(i,e){i&1&&(o(0,"tr",64)(1,"td",65),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),a()())}function It(i,e){if(i&1&&(o(0,"mat-dialog-content")(1,"div",66)(2,"div",67),l(3,"X\xE1c Nh\u1EADn"),a(),o(4,"div"),l(5),a(),o(6,"div",68)(7,"button",69),l(8,"\u0110\u1ED3ng \xDD"),a(),o(9,"button",70),l(10,"Hu\u1EF7 B\u1ECF"),a()()()()),i&2){let t=d();c(5),P("B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 ",t.EditList.length," user kh\xF4ng?")}}var it=class i{constructor(e,t,n,r,s){this.userGraphQLService=e;this.dialog=t;this.router=n;this.snackBar=r;this.drawerService=s}displayedColumns=["stt","email","profile.name","SDT","isActive","roles","createdAt"];AllColumn=["stt","email","profile.name","SDT","isActive","roles","createdAt"];ColumnName={stt:"#",email:"Email","profile.name":"H\u1ECD v\xE0 t\xEAn",SDT:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",isActive:"Tr\u1EA1ng th\xE1i",roles:"Vai tr\xF2",createdAt:"Ng\xE0y t\u1EA1o"};FilterColumns=[];dataSource=new Ze([]);paginator;sort;drawer;Listuser;isLoading;ListFilter=[];EditList=[];page=g(1);pageSize=g(50);total=g(0);totalPages=g(1);ngOnInit(){this.Listuser=this.userGraphQLService.allUsers,this.isLoading=this.userGraphQLService.isLoading,this.initializeColumns(),this.loadUsers()}ngAfterViewInit(){}initializeColumns(){this.FilterColumns=this.AllColumn.map(e=>({key:e,value:this.ColumnName[e],isShow:this.displayedColumns.includes(e)}))}loadUsers(){return h(this,null,function*(){try{let e=yield this.userGraphQLService.loadAllUsers();this.dataSource.data=e,this.total.set(e.length),this.updatePagination()}catch(e){this.snackBar.open("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u: "+e.message,"\u0110\xF3ng",{duration:3e3})}})}updatePagination(){let e=this.dataSource.data.length;this.total.set(e),this.totalPages.set(Math.ceil(e/this.pageSize()))}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.page.set(1),this.updatePagination()}onPageSizeChange(e,t){this.pageSize.set(e),this.page.set(1),this.updatePagination(),t&&t.closeMenu()}onNextPage(){this.page()<this.totalPages()&&this.page.set(this.page()+1)}onPreviousPage(){this.page()>1&&this.page.set(this.page()-1)}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.AllColumn.map(n=>({key:n,value:this.ColumnName[n],isShow:this.displayedColumns.includes(n)})).filter(n=>n.value.toLowerCase().includes(t))}toggleColumn(e){e.isShow=!e.isShow}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key)}FilterHederColumn(e,t){return[...new Set(e.map(r=>r[t]))].filter(r=>r!=null)}onOutFilter(e){this.ListFilter=e,this.applyFilters()}applyFilters(){let e=[...this.Listuser()];this.ListFilter.forEach(t=>{t.values&&t.values.length>0&&(e=e.filter(n=>t.values.includes(n[t.field])))}),this.dataSource.data=e,this.page.set(1),this.updatePagination()}create(){this.router.navigate(["/admin/user/new"],{relativeTo:null})}goToDetail(e){this.router.navigate(["/admin/user/"+e.id],{relativeTo:null})}AddToEdit(e){let t=this.EditList.findIndex(n=>n.id===e.id);t>-1?this.EditList.splice(t,1):this.EditList.push(e)}CheckSelect(e){return this.EditList.some(t=>t.id===e.id)}CheckItemInEdit(e){return this.EditList.some(t=>t.id===e.id)}openDeleteDialog(e){this.dialog.open(e).afterClosed().subscribe(n=>{n&&this.deleteSelectedUsers()})}deleteSelectedUsers(){return h(this,null,function*(){try{for(let e of this.EditList)yield this.userGraphQLService.deleteUser(e.id);this.snackBar.open(`\u0110\xE3 x\xF3a ${this.EditList.length} user th\xE0nh c\xF4ng`,"\u0110\xF3ng",{duration:3e3}),this.EditList=[],yield this.loadUsers()}catch(e){this.snackBar.open("L\u1ED7i khi x\xF3a user: "+e.message,"\u0110\xF3ng",{duration:3e3})}})}static \u0275fac=function(t){return new(t||i)(O(V),O(Oe),O(oe),O(ce),O(R))};static \u0275cmp=$({type:i,selectors:[["app-listuser"]],viewQuery:function(t,n){if(t&1&&(T(Re,5),T(D,5),T(at,5)),t&2){let r;F(r=I())&&(n.paginator=r.first),F(r=I())&&(n.sort=r.first),F(r=I())&&(n.drawer=r.first)}},decls:62,vars:18,consts:[["drawer",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],[1,"p-2","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm User...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],[1,"w-full","flex","flex-row","space-x-4","justify-end","items-center"],[1,"flex","items-center","text-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-row","space-x-2","justify-center","items-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-icon-button","","color","primary",3,"click"],[1,"flex","flex-row","items-center"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","border","mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["class","mat-row border",4,"matNoDataRow"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-header-cell","",1,"!border","!bg-slate-100","justify-center"],["mat-header-cell","","mat-sort-header","",1,"!border","whitespace-nowrap","!bg-slate-100"],["class","border","mat-cell","",4,"matCellDef"],["class","!border !bg-slate-100 justify-center","mat-header-cell","",4,"matHeaderCellDef"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"flex","flex-row","space-x-2","items-center","p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item","",3,"disabled"],["mat-menu-item",""],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","!border whitespace-nowrap !bg-slate-100","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","fieldsearch","ListFilter","filterItem"],["mat-cell","",1,"border"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"flex","justify-center","items-center","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"flex","justify-center","items-center","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],[1,"inline-block","bg-blue-100","text-blue-800","text-xs","px-2","py-1","rounded-full","mr-1","mb-1"],["mat-header-row",""],["mat-row","",1,"border"],[1,"mat-row","border"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"]],template:function(t,n){if(t&1){let r=b();o(0,"mat-drawer-container",5)(1,"mat-drawer",6,0),k(3,"router-outlet"),a(),o(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",11)(9,"input",12),f("keyup",function(m){return _(r),p(n.applyFilter(m))}),a(),o(10,"div",13)(11,"span",14),l(12,"search"),a()()(),o(13,"button",15),f("click",function(){return _(r),p(n.create())}),o(14,"mat-icon"),l(15,"add_circle"),a(),o(16,"span",16),l(17,"T\u1EA1o M\u1EDBi"),a()(),x(18,dt,5,0,"button",17),a()(),o(19,"div",18)(20,"div",19)(21,"strong"),l(22),a(),l(23," - "),o(24,"strong"),l(25),a(),l(26),a(),o(27,"div",20)(28,"span"),l(29),a(),o(30,"span"),l(31,"Trang"),a()(),o(32,"div",21)(33,"span",22,1),l(35),a(),o(36,"mat-menu",null,2)(38,"div",23),f("click",function(m){return _(r),p(m.stopPropagation())}),o(39,"mat-form-field",24)(40,"mat-label"),l(41,"S\u1ED1 l\u01B0\u1EE3ng"),a(),o(42,"input",25),X("ngModelChange",function(m){return _(r),W(n.pageSize,m)||(n.pageSize=m),p(m)}),a()(),o(43,"button",26),f("click",function(){_(r);let m=y(34);return p(n.onPageSizeChange(n.pageSize(),m))}),o(44,"mat-icon"),l(45,"published_with_changes"),a()()()(),o(46,"div",27)(47,"button",28),f("click",function(){return _(r),p(n.onPreviousPage())}),o(48,"mat-icon"),l(49,"keyboard_arrow_left"),a()(),o(50,"button",28),f("click",function(){return _(r),p(n.onNextPage())}),o(51,"mat-icon"),l(52,"keyboard_arrow_right"),a()()()()()(),o(53,"div",29)(54,"table",30),E(55,Lt,4,2,"ng-container",31,N),x(57,kt,1,0,"tr",32)(58,Tt,1,3,"tr",33)(59,Ft,3,0,"tr",34),a()()()(),x(60,It,11,1,"ng-template",null,3,ee)}if(t&2){let r=y(37);c(),C("position","end"),c(17),C("ngIf",n.EditList.length>0),c(4),w((n.page()-1)*n.pageSize()+1),c(3),w(n.page()*n.pageSize()>n.total()?n.total():n.page()*n.pageSize()),c(),P(" / ",n.total()," m\u1EE5c "),c(3),G("",n.page(),"/",n.totalPages()," "),c(4),C("matMenuTriggerFor",r),c(2),P("",n.pageSize()," m\u1EE5c"),c(7),K("ngModel",n.pageSize),C("ngModelOptions",J(17,st)),c(5),C("disabled",n.page()===1),c(3),C("disabled",n.page()===n.totalPages()),c(4),C("dataSource",n.dataSource),c(),L(n.displayedColumns),c(2),C("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),c(),C("matRowDefColumns",n.displayedColumns)}},dependencies:[ke,Le,Se,Ee,Fe,Te,Ye,Be,He,Ge,Ne,$e,Ke,Qe,qe,We,Xe,Je,je,D,ze,Ae,xe,Ce,fe,he,_e,me,ue,re,ge,pe,le,ae,se,Ie,ie,te,ne,we,Me,be,Pe,Ve,De,Ue,ve,ye,et],styles:[".user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]{transition:all .3s ease}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{transition:border-color .2s ease}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 2px #3b82f61a}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]{position:relative}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#f8fafc;border-bottom:2px solid #e2e8f0}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#374151;padding:16px 12px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#2563eb}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{transition:background-color .15s ease;border-bottom:1px solid #f1f5f9}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row.selected[_ngcontent-%COMP%]{background-color:#eff6ff;border-color:#bfdbfe}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row.editing[_ngcontent-%COMP%]{background-color:#fefce8;border-color:#fcd34d}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:12px;vertical-align:middle}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:10}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:80px}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{transition:background-color .2s ease}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]:disabled{opacity:.4}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .current-page[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3f4f6,#e5e7eb);border:1px solid #d1d5db;color:#374151;font-weight:600}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]{max-width:320px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-search[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;margin-bottom:8px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]{margin:4px 0}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-checkbox[_ngcontent-%COMP%]{padding:8px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-form-field[_ngcontent-%COMP%]{color:#374151}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd;border-radius:8px;padding:8px 16px}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{color:#1d4ed8;font-weight:600}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{margin:0 4px}.user-list-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.user-list-container[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534;border:1px solid #bbf7d0}.user-list-container[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626;border:1px solid #fecaca}.user-list-container[_ngcontent-%COMP%]   .role-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.user-list-container[_ngcontent-%COMP%]   .role-badges[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;border:1px solid #bfdbfe}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:36px;height:36px}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#6b7280}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}@media (max-width: 768px){.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:200px}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:120px}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]{text-align:center}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-controls[_ngcontent-%COMP%]{justify-content:center}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 6px;font-size:13px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.actions-column[_ngcontent-%COMP%], .user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.actions-column[_ngcontent-%COMP%]{width:120px}}@media (prefers-color-scheme: dark){.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{background:#1f2937}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{color:#f9fafb}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{border-bottom-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{color:#e5e7eb}}"],changeDetection:0})};export{V as a,it as b};
