import './polyfills.server.mjs';
import{a as ee,b as $e}from"./chunk-ZJIXEHSC.mjs";import{a as Ne,b as He,c as Ke}from"./chunk-Q2NHCI6D.mjs";import{c as We,e as je,f as W}from"./chunk-6U5WG2CK.mjs";import{a as be}from"./chunk-Z2D3DSH5.mjs";import"./chunk-UKXQMY2P.mjs";import{a as Qe}from"./chunk-XSDCRXGH.mjs";import{a as Oe,b as Ge}from"./chunk-UKVYI7NX.mjs";import{a as V,b as O,c as G,d as Q,f as z,g as q}from"./chunk-QHKEBWIO.mjs";import"./chunk-ETGHWKBN.mjs";import"./chunk-KNPDMIFW.mjs";import{a as ze,b as qe}from"./chunk-LFUKLPS4.mjs";import"./chunk-NLBTEMSF.mjs";import"./chunk-UWYQSDH5.mjs";import"./chunk-3WL3NMNZ.mjs";import"./chunk-2TQFR6EH.mjs";import{h as Me}from"./chunk-KVUHCEAF.mjs";import"./chunk-26NM6QMQ.mjs";import{d as Le,e as Ve}from"./chunk-4AA42E7K.mjs";import"./chunk-UYI34SQK.mjs";import{a as ye,b as Ee,c as Se,d as Pe}from"./chunk-OMPCUEDD.mjs";import{b as Be}from"./chunk-PHB7O5XE.mjs";import{A as Fe,b as Re,g as Ue,j as we,o as De,q as Ie,w as Te,x as Ae,z as ke}from"./chunk-KHW5ZZEG.mjs";import"./chunk-J6642ETB.mjs";import{a as B,b as L}from"./chunk-X7LLP2RY.mjs";import"./chunk-6EFOJMAD.mjs";import{a as ve}from"./chunk-Q5TTQGDU.mjs";import{a as Ce}from"./chunk-Y4GFH6XC.mjs";import"./chunk-2DIQ5JYQ.mjs";import"./chunk-RLIINVZD.mjs";import{a as Y,c as xe,e as Z}from"./chunk-7QZZCVTG.mjs";import"./chunk-LYCTG6ML.mjs";import"./chunk-7T6LZHUD.mjs";import{a as fe,d as he}from"./chunk-XSJY5HPB.mjs";import"./chunk-EMLDMP5T.mjs";import{o as ge,y as F}from"./chunk-7VXCQSQV.mjs";import{$b as pe,Fb as D,Gc as J,Hc as l,Ic as E,J as me,Jc as C,Mb as g,Mc as T,Na as K,Nc as A,Oc as k,Ra as p,Yb as u,Zb as de,_b as ue,d as se,dc as f,ec as ae,gc as P,hc as b,ic as s,ja as X,jc as r,kc as U,lc as M,mc as I,oa as ce,oc as S,pa as y,q as H,tb as m,tc as v,v as le,vc as c,wd as w,ya as h,yd as _e,za as x}from"./chunk-KYBR54ZN.mjs";import"./chunk-XAZRL6IZ.mjs";import{a as j,b as N,j as _}from"./chunk-RIAI3ORJ.mjs";var te=class i{constructor(t){this.storageService=t}_allRoles=p([]);_searchTerm=p("");_currentPage=p(1);_pageSize=p(50);_isLoading=p(!1);_selectedRoles=p(new Set);_statusFilter=p("all");searchResults=w(()=>{let t=this._allRoles(),e=this._searchTerm().toLowerCase();return e&&(t=t.filter(n=>n.name.toLowerCase().includes(e))),t});allRoles=this._allRoles.asReadonly();filteredRoles=this.searchResults;searchTerm=this._searchTerm.asReadonly();currentPage=this._currentPage.asReadonly();pageSize=this._pageSize.asReadonly();isLoading=this._isLoading.asReadonly();selectedRoles=this._selectedRoles.asReadonly();statusFilter=this._statusFilter.asReadonly();totalItems=w(()=>this.searchResults().length);totalPages=w(()=>Math.ceil(this.totalItems()/this._pageSize()));paginatedRoles=w(()=>{let t=(this._currentPage()-1)*this._pageSize(),e=t+this._pageSize();return this.searchResults().slice(t,e)});graphqlService=y(Qe);loadAllRoles(t=!1){return _(this,null,function*(){if(!t&&this._allRoles().length>0)return this._allRoles();this._isLoading.set(!0);try{let e={orderBy:{name:"asc"},include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}},n=yield this.graphqlService.findMany("role",e);return this._allRoles.set(n),this._currentPage.set(1),n}catch(e){throw console.error("Error loading roles:",e),e}finally{this._isLoading.set(!1)}})}createRole(t){return _(this,null,function*(){this._isLoading.set(!0);try{let e={name:t.name},n=yield this.graphqlService.createOne("role",{data:e,include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}});if(t.permissionIds&&t.permissionIds.length>0){yield this.assignPermissionsToRole(n.id,t.permissionIds);let o=yield this.getRoleById(n.id);if(o){let d=this._allRoles();return this._allRoles.set([o,...d.filter(R=>R.id!==n.id)]),o}}let a=this._allRoles();return this._allRoles.set([n,...a]),n}catch(e){throw console.error("Error creating role:",e),e}finally{this._isLoading.set(!1)}})}updateRole(t,e){return _(this,null,function*(){this._isLoading.set(!0);try{let n=yield this.graphqlService.updateOne("role",{id:t},e,{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}}),a=this._allRoles(),o=a.findIndex(d=>d.id===t);if(o!==-1){let d=[...a];d[o]=n,this._allRoles.set(d)}return n}catch(n){throw console.error("Error updating role:",n),n}finally{this._isLoading.set(!1)}})}deleteRole(t){return _(this,null,function*(){this._isLoading.set(!0);try{yield this.graphqlService.deleteOne("role",{id:t});let n=this._allRoles().filter(o=>o.id!==t);this._allRoles.set(n);let a=new Set(this._selectedRoles());a.delete(t),this._selectedRoles.set(a)}catch(e){throw console.error("Error deleting role:",e),e}finally{this._isLoading.set(!1)}})}getRoleById(t){return _(this,null,function*(){try{return yield this.graphqlService.findUnique("role",{id:t},{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}})}catch(e){return console.error("Error getting role by id:",e),null}})}assignPermissionsToRole(t,e){return _(this,null,function*(){this._isLoading.set(!0);try{let n=e.map(o=>({roleId:t,permissionId:o}));yield this.graphqlService.batchCreate("rolePermission",n);let a=yield this.getRoleById(t);if(a){let o=this._allRoles(),d=o.findIndex(R=>R.id===t);if(d!==-1){let R=[...o];R[d]=a,this._allRoles.set(R)}}}catch(n){throw console.error("Error assigning permissions to role:",n),n}finally{this._isLoading.set(!1)}})}removePermissionFromRole(t,e){return _(this,null,function*(){this._isLoading.set(!0);try{let a=(yield this.getRoleById(t))?.permissions?.find(o=>o.permissionId===e);if(a){yield this.graphqlService.deleteOne("rolePermission",{id:a.id});let o=yield this.getRoleById(t);if(o){let d=this._allRoles(),R=d.findIndex($=>$.id===t);if(R!==-1){let $=[...d];$[R]=o,this._allRoles.set($)}}}}catch(n){throw console.error("Error removing permission from role:",n),n}finally{this._isLoading.set(!1)}})}setSearchTerm(t){this._searchTerm.set(t),this._currentPage.set(1)}setStatusFilter(t){this._statusFilter.set(t),this._currentPage.set(1)}setPage(t){t>=1&&t<=this.totalPages()&&this._currentPage.set(t)}setPageSize(t){this._pageSize.set(t),this._currentPage.set(1)}nextPage(){this._currentPage()<this.totalPages()&&this._currentPage.set(this._currentPage()+1)}previousPage(){this._currentPage()>1&&this._currentPage.set(this._currentPage()-1)}toggleRoleSelection(t){let e=new Set(this._selectedRoles());e.has(t)?e.delete(t):e.add(t),this._selectedRoles.set(e)}selectAllCurrentPage(){let t=new Set(this._selectedRoles());this.paginatedRoles().forEach(e=>{t.add(e.id)}),this._selectedRoles.set(t)}deselectAllCurrentPage(){let t=new Set(this._selectedRoles());this.paginatedRoles().forEach(e=>{t.delete(e.id)}),this._selectedRoles.set(t)}clearSelection(){this._selectedRoles.set(new Set)}isSelected(t){return this._selectedRoles().has(t)}get selectedCount(){return this._selectedRoles().size}get selectedIds(){return Array.from(this._selectedRoles())}findRoleById(t){return this._allRoles().find(e=>e.id===t)}getRolesByPermission(t){return this._allRoles().filter(e=>e.permissions?.some(n=>n.permissionId===t))}getRolePermissions(t){let e=this.findRoleById(t);return!e||!e.permissions?[]:e.permissions.map(n=>n.permission)}hasPermission(t,e){return this.getRolePermissions(t).some(a=>a.codeId===e)}getRolesByGroup(t){return this._allRoles().filter(e=>e.permissions?.some(n=>n.permission.group===t))}getUsersInRole(t){let e=this.findRoleById(t);return!e||!e.users?[]:e.users.map(n=>n.user)}clearCache(){this._allRoles.set([]),this._searchTerm.set(""),this._currentPage.set(1),this.clearSelection()}refreshData(){return this.loadAllRoles(!0)}static \u0275fac=function(e){return new(e||i)(ce(ve))};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var ne=class i{userPermissionService=y(Ne);permissionService=y(He);userService=y(ee);cachedUsers=new Map;cachedPermissions=[];getUserPermissionDetails(t){return!t||t==="new"?H(null):this.cachedUsers.has(t)?H(this.cachedUsers.get(t)):this.loadUserWithPermissions(t).pipe(le(e=>(e&&this.cachedUsers.set(t,e),e)),me(e=>(console.error("Error loading user permission details:",e),H(null))))}getAllPermissions(){return this.cachedPermissions.length>0?H(this.cachedPermissions):new se(t=>{this.permissionService.loadAllPermissions().then(()=>{this.cachedPermissions=this.permissionService.allPermissions(),t.next(this.cachedPermissions),t.complete()}).catch(e=>{console.error("Error loading permissions:",e),t.next([]),t.complete()})})}getPermissionSummary(t){let e=this.extractRolePermissions(t.roles),n=t.userPermissions.filter(d=>d.isGranted),a=t.userPermissions.filter(d=>!d.isGranted),o=this.calculateEffectivePermissions(e,n.map(d=>d.permission),a.map(d=>d.permission));return{totalRolePermissions:e.length,grantedPermissions:n.length,deniedPermissions:a.length,effectivePermissions:o,rolePermissions:e,userGranted:n,userDenied:a}}clearCache(){this.cachedUsers.clear(),this.cachedPermissions=[]}clearUserCache(t){this.cachedUsers.delete(t)}loadUserWithPermissions(t){return new se(e=>{this.loadUserWithPermissionsAsync(t).then(n=>{e.next(n),e.complete()}).catch(n=>{console.error("Error in loadUserWithPermissions:",n),e.next(null),e.complete()})})}loadUserWithPermissionsAsync(t){return _(this,null,function*(){try{let e=yield this.userService.getUserById(t);if(!e)return null;let n=yield this.userPermissionService.getUserPermissions(t);return{id:e.id,email:e.email,SDT:e.SDT,isActive:e.isActive,profile:e.profile,roles:e.roles||[],userPermissions:n.map(o=>({id:o.id,isGranted:o.isGranted,permission:o.permission?{id:o.permission.id,name:o.permission.name,code:o.permission.codeId||"",description:o.permission.description,isActive:!0,createdAt:new Date,updatedAt:new Date}:{id:"",name:"Unknown Permission",code:"",description:"",isActive:!1,createdAt:new Date,updatedAt:new Date},createdAt:o.createdAt?.toISOString(),updatedAt:o.updatedAt?.toISOString()}))}}catch(e){return console.error("Error in loadUserWithPermissionsAsync:",e),null}})}extractRolePermissions(t){let e=new Map;return t.forEach(n=>{let a=n.role;a&&a.permissions&&a.permissions.forEach(o=>{if(o&&o.id){let d={id:o.id,name:o.name,code:o.codeId||o.code||"",description:o.description,isActive:!0,createdAt:new Date,updatedAt:new Date};e.set(o.id,d)}})}),Array.from(e.values())}calculateEffectivePermissions(t,e,n){let a=new Map;return t.forEach(o=>{a.set(o.id,o)}),e.forEach(o=>{if(o&&o.id){let d={id:o.id,name:o.name,code:o.codeId||o.code||"",description:o.description,isActive:!0,createdAt:new Date,updatedAt:new Date};a.set(o.id,d)}}),n.forEach(o=>{o&&o.id&&a.delete(o.id)}),Array.from(a.values())}static \u0275fac=function(e){return new(e||i)};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ze=(i,t)=>t.id||t.name,et=(i,t)=>t.id;function it(i,t){i&1&&U(0,"mat-spinner",3)}function nt(i,t){i&1&&(s(0,"div",5),U(1,"mat-spinner",7),s(2,"p",8),l(3,"\u0110ang t\u1EA3i quy\u1EC1n..."),r()())}function rt(i,t){if(i&1&&(s(0,"span",26),l(1),r()),i&2){let e=t.$implicit;u("title",e.description),m(),E(e.name)}}function ot(i,t){if(i&1){let e=S();s(0,"button",28),v("click",function(){h(e);let a=c(3);return x(a.toggleShowAllRolePerms())}),l(1),r()}if(i&2){let e=c(3);m(),C(" ",e.showAllRolePerms()?"Thu g\u1ECDn":"..."+(e.currentSummary().rolePermissions.length-5)+" n\u1EEFa"," ")}}function st(i,t){if(i&1&&(s(0,"div")(1,"div",25)(2,"mat-icon",22),l(3,"groups"),r(),l(4),r(),s(5,"div",23),P(6,rt,2,2,"span",26,Ze),g(8,ot,2,1,"button",27),r()()),i&2){let e=c(2);m(4),C(" Quy\u1EC1n t\u1EEB Roles (",e.currentSummary().rolePermissions.length,") "),m(2),b(e.currentSummary().rolePermissions.slice(0,e.showAllRolePerms()?e.currentSummary().rolePermissions.length:5)),m(2),f(e.currentSummary().rolePermissions.length>5?8:-1)}}function at(i,t){if(i&1&&(s(0,"span",30),l(1),r()),i&2){let e=t.$implicit;u("title",e.permission.description),m(),E(e.permission.name)}}function lt(i,t){if(i&1&&(s(0,"div")(1,"div",29)(2,"mat-icon",22),l(3,"add_circle"),r(),l(4),r(),s(5,"div",23),P(6,at,2,2,"span",30,et),r()()),i&2){let e=c(2);m(4),C(" Quy\u1EC1n \u0110\u01B0\u1EE3c C\u1EA5p (",e.currentSummary().userGranted.length,") "),m(2),b(e.currentSummary().userGranted)}}function mt(i,t){if(i&1&&(s(0,"span",32),l(1),r()),i&2){let e=t.$implicit;u("title",e.permission.description),m(),E(e.permission.name)}}function ct(i,t){if(i&1&&(s(0,"div")(1,"div",31)(2,"mat-icon",22),l(3,"remove_circle"),r(),l(4),r(),s(5,"div",23),P(6,mt,2,2,"span",32,et),r()()),i&2){let e=c(2);m(4),C(" Quy\u1EC1n B\u1ECB T\u1EEB Ch\u1ED1i (",e.currentSummary().userDenied.length,") "),m(2),b(e.currentSummary().userDenied)}}function dt(i,t){if(i&1&&(s(0,"span",33),l(1),r()),i&2){let e=t.$implicit;u("title",e.description),m(),E(e.name)}}function ut(i,t){if(i&1){let e=S();s(0,"button",35),v("click",function(){h(e);let a=c(3);return x(a.toggleShowAllEffective())}),l(1),r()}if(i&2){let e=c(3);m(),C(" ",e.showAllEffective()?"Thu g\u1ECDn":"..."+(e.currentSummary().effectivePermissions.length-8)+" n\u1EEFa"," ")}}function pt(i,t){if(i&1&&(s(0,"div",23),P(1,dt,2,2,"span",33,Ze),g(3,ut,2,1,"button",34),r()),i&2){let e=c(2);m(),b(e.currentSummary().effectivePermissions.slice(0,e.showAllEffective()?e.currentSummary().effectivePermissions.length:8)),m(2),f(e.currentSummary().effectivePermissions.length>8?3:-1)}}function _t(i,t){i&1&&(s(0,"div",24)(1,"mat-icon",36),l(2,"block"),r(),s(3,"p"),l(4,"Kh\xF4ng c\xF3 quy\u1EC1n n\xE0o"),r()())}function gt(i,t){if(i&1&&(s(0,"div",9)(1,"div",10)(2,"div",11),l(3),r(),s(4,"div",12),l(5,"T\u1EEB Roles"),r()(),s(6,"div",13)(7,"div",14),l(8),r(),s(9,"div",12),l(10,"\u0110\u01B0\u1EE3c C\u1EA5p"),r()(),s(11,"div",15)(12,"div",16),l(13),r(),s(14,"div",12),l(15,"B\u1ECB T\u1EEB Ch\u1ED1i"),r()(),s(16,"div",17)(17,"div",18),l(18),r(),s(19,"div",12),l(20,"Cu\u1ED1i C\xF9ng"),r()()(),s(21,"div",19),g(22,st,9,2,"div")(23,lt,8,1,"div")(24,ct,8,1,"div"),s(25,"div",20)(26,"div",21)(27,"mat-icon",22),l(28,"verified_user"),r(),l(29),r(),g(30,pt,4,1,"div",23)(31,_t,5,0,"div",24),r()()),i&2){let e=c();m(3),E(e.currentSummary().totalRolePermissions),m(5),E(e.currentSummary().grantedPermissions),m(5),E(e.currentSummary().deniedPermissions),m(5),E(e.currentSummary().effectivePermissions.length),m(4),f(e.currentSummary().rolePermissions.length>0?22:-1),m(),f(e.currentSummary().userGranted.length>0?23:-1),m(),f(e.currentSummary().userDenied.length>0?24:-1),m(5),C(" Quy\u1EC1n Cu\u1ED1i C\xF9ng (",e.currentSummary().effectivePermissions.length,") "),m(),f(e.currentSummary().effectivePermissions.length>0?30:31)}}function ft(i,t){i&1&&(s(0,"div",6)(1,"mat-icon",36),l(2,"info"),r(),s(3,"p",37),l(4,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u quy\u1EC1n"),r()())}var re=class i{userPermissionService=y(ne);userId=K.required();user=K();isLoading=p(!1);summary=p(null);showAllRolePerms=p(!1);showAllEffective=p(!1);currentSummary=w(()=>this.summary());constructor(){_e(()=>_(this,null,function*(){let t=this.userId();t&&t!=="new"?yield this.loadPermissionSummary():this.summary.set(null)}))}loadPermissionSummary(){return _(this,null,function*(){if(this.userId()){this.isLoading.set(!0);try{this.userPermissionService.getUserPermissionDetails(this.userId()).subscribe({next:t=>{if(t){let e=this.userPermissionService.getPermissionSummary(t);this.summary.set(e)}else this.summary.set(null)},error:t=>{console.error("Error loading permission details:",t),this.summary.set(null)},complete:()=>{this.isLoading.set(!1)}})}catch(t){console.error("Error loading permission summary:",t),this.summary.set(null),this.isLoading.set(!1)}}})}toggleShowAllRolePerms(){this.showAllRolePerms.update(t=>!t)}toggleShowAllEffective(){this.showAllEffective.update(t=>!t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-user-permission-summary"]],inputs:{userId:[1,"userId"],user:[1,"user"]},decls:13,vars:2,consts:[[1,"permission-summary"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-purple-500"],["diameter","16",1,"ml-2"],[1,"text-xs"],[1,"text-center","py-4"],[1,"text-center","py-4","text-gray-500"],["diameter","32"],[1,"mt-2","text-sm","text-gray-600"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-4"],[1,"text-center","p-2","bg-blue-50","rounded"],[1,"text-lg","font-bold","text-blue-600"],[1,"text-xs","text-gray-600"],[1,"text-center","p-2","bg-green-50","rounded"],[1,"text-lg","font-bold","text-green-600"],[1,"text-center","p-2","bg-red-50","rounded"],[1,"text-lg","font-bold","text-red-600"],[1,"text-center","p-2","bg-purple-50","rounded"],[1,"text-lg","font-bold","text-purple-600"],[1,"space-y-3"],[1,"border-t","pt-3"],[1,"text-sm","font-medium","text-purple-600","mb-1","flex","items-center"],[1,"mr-1","text-sm"],[1,"flex","flex-wrap","gap-1"],[1,"text-center","py-2","text-gray-500","text-sm"],[1,"text-sm","font-medium","text-blue-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-blue-100","text-blue-800","rounded",3,"title"],[1,"px-2","py-1","text-xs","text-blue-600","hover:text-blue-800"],[1,"px-2","py-1","text-xs","text-blue-600","hover:text-blue-800",3,"click"],[1,"text-sm","font-medium","text-green-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-green-100","text-green-800","rounded",3,"title"],[1,"text-sm","font-medium","text-red-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-red-100","text-red-800","rounded",3,"title"],[1,"px-2","py-1","text-xs","bg-purple-100","text-purple-800","rounded","font-medium",3,"title"],[1,"px-2","py-1","text-xs","text-purple-600","hover:text-purple-800"],[1,"px-2","py-1","text-xs","text-purple-600","hover:text-purple-800",3,"click"],[1,"text-gray-400"],[1,"mt-1","text-sm"]],template:function(e,n){e&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"mat-icon",2),l(4,"security"),r(),l(5," T\xF3m T\u1EAFt Quy\u1EC1n H\u1EA1n "),g(6,it,1,0,"mat-spinner",3),r(),s(7,"mat-card-subtitle",4),l(8," Quy\u1EC1n cu\u1ED1i c\xF9ng = Quy\u1EC1n role + Quy\u1EC1n c\u1EA5p - Quy\u1EC1n t\u1EEB ch\u1ED1i "),r()(),s(9,"mat-card-content"),g(10,nt,4,0,"div",5)(11,gt,32,9)(12,ft,5,0,"div",6),r()()),e&2&&(m(6),f(n.isLoading()?6:-1),m(4),f(n.isLoading()?10:n.currentSummary()?11:12))},dependencies:[F,q,V,G,z,Q,O,L,B,W,Ge,Oe],styles:[".permission-summary[_ngcontent-%COMP%]{border-left:4px solid #9c27b0}.permission-summary[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.permission-summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var xt=(i,t)=>t.id||t.roleId,Ct=(i,t)=>t.id||t.name;function vt(i,t){if(i&1&&(s(0,"p",11),l(1),r()),i&2){let e=c().$implicit;m(),C(" ",(e.role==null?null:e.role.description)||e.description," ")}}function yt(i,t){if(i&1&&(s(0,"span",12),l(1),r()),i&2){let e=c().$implicit,n=c(2);m(),C(" ",n.getRolePermissions(e).length," quy\u1EC1n ")}}function Et(i,t){if(i&1&&(s(0,"span",17),l(1),r()),i&2){let e=t.$implicit;u("title",e.description||e.name),m(),C(" ",e.name," ")}}function St(i,t){if(i&1){let e=S();s(0,"button",19),v("click",function(){h(e);let a=c(2).$implicit,o=c(2);return x(o.toggleShowPermissions(a.id||a.roleId))}),l(1),r()}if(i&2){let e=c(2).$implicit,n=c(2);m(),C(" ",n.showAllPermissions[e.id||e.roleId]?"Thu g\u1ECDn":"..."+(n.getRolePermissions(e).length-4)+" n\u1EEFa"," ")}}function Pt(i,t){if(i&1&&(s(0,"div",13)(1,"div",16),P(2,Et,2,2,"span",17,Ct),g(4,St,2,1,"button",18),r()()),i&2){let e=c().$implicit,n=c(2);m(2),b(n.getRolePermissions(e).slice(0,n.showAllPermissions[e.id||e.roleId]?n.getRolePermissions(e).length:4)),m(2),f(n.getRolePermissions(e).length>4?4:-1)}}function bt(i,t){i&1&&(s(0,"div",14)(1,"mat-icon",20),l(2,"block"),r(),s(3,"p"),l(4,"Kh\xF4ng c\xF3 quy\u1EC1n"),r()())}function Rt(i,t){if(i&1&&(s(0,"div",15)(1,"mat-icon",21),l(2,"schedule"),r(),s(3,"span",22),l(4),r()()),i&2){let e=c().$implicit,n=c(2);m(4),C(" G\xE1n l\xFAc: ",n.formatDate(e.assignedAt||e.createdAt)," ")}}function Ut(i,t){if(i&1&&(s(0,"div",6)(1,"div",7)(2,"div",8)(3,"mat-icon",9),l(4),r(),s(5,"div")(6,"h4",10),l(7),r(),g(8,vt,2,1,"p",11),r()(),g(9,yt,2,1,"span",12),r(),g(10,Pt,5,1,"div",13)(11,bt,5,0,"div",14)(12,Rt,5,1,"div",15),r()),i&2){let e=t.$implicit,n=c(2);m(3),pe(n.getRoleIcon((e.role==null?null:e.role.name)||e.name)),m(),C(" ",n.getRoleIcon((e.role==null?null:e.role.name)||e.name)," "),m(3),C(" ",(e.role==null?null:e.role.name)||e.name," "),m(),f(e.role!=null&&e.role.description||e.description?8:-1),m(),f(n.getRolePermissions(e).length>0?9:-1),m(),f(n.getRolePermissions(e).length>0?10:11),m(2),f(e.assignedAt||e.createdAt?12:-1)}}function wt(i,t){if(i&1&&(s(0,"div",4),P(1,Ut,13,8,"div",6,xt),r()),i&2){let e=c();m(),b(e.user().roles)}}function Dt(i,t){i&1&&(s(0,"div",5)(1,"mat-icon",23),l(2,"person_outline"),r(),s(3,"p",24),l(4,"Ch\u01B0a c\xF3 vai tr\xF2 n\xE0o"),r(),s(5,"p",3),l(6,"User n\xE0y ch\u01B0a \u0111\u01B0\u1EE3c g\xE1n vai tr\xF2 n\xE0o"),r()())}var oe=class i{user=K();showAllPermissions={};getRolePermissions(t){return t.role?.permissions||t.permissions||t.role?.rolePermissions?.map(e=>e.permission)||[]}getRoleIcon(t){if(!t)return"person";let e=t.toLowerCase();return e.includes("admin")?"admin_panel_settings":e.includes("manager")||e.includes("qu\u1EA3n l\xFD")?"manage_accounts":e.includes("user")||e.includes("ng\u01B0\u1EDDi d\xF9ng")?"person":e.includes("guest")||e.includes("kh\xE1ch")?"person_outline":e.includes("moderator")?"gavel":e.includes("editor")?"edit":e.includes("viewer")?"visibility":"group"}toggleShowPermissions(t){this.showAllPermissions[t]=!this.showAllPermissions[t]}formatDate(t){return t?new Date(t).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-user-roles-info"]],inputs:{user:[1,"user"]},decls:11,vars:2,consts:[[1,"roles-info"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-blue-500"],[1,"text-xs"],[1,"space-y-4"],[1,"text-center","py-6","text-gray-500"],[1,"border","rounded-lg","p-3","bg-gray-50"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center"],[1,"mr-2","text-blue-600"],[1,"font-medium","text-sm","text-gray-800"],[1,"text-xs","text-gray-600"],[1,"px-2","py-1","text-xs","bg-blue-100","text-blue-800","rounded-full"],[1,"mt-2"],[1,"text-center","text-gray-400","text-xs","py-2"],[1,"flex","items-center","mt-2","pt-2","border-t","border-gray-200"],[1,"flex","flex-wrap","gap-1"],[1,"px-2","py-1","text-xs","bg-white","border","border-blue-200","text-blue-700","rounded",3,"title"],["mat-button","",1,"!text-xs","!p-1","!min-w-0","text-blue-600"],["mat-button","",1,"!text-xs","!p-1","!min-w-0","text-blue-600",3,"click"],[1,"text-gray-300"],[1,"mr-1","text-gray-400",2,"font-size","14px"],[1,"text-xs","text-gray-500"],[1,"text-4xl","text-gray-300"],[1,"mt-2","text-sm"]],template:function(e,n){if(e&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"mat-icon",2),l(4,"groups"),r(),l(5," Vai Tr\xF2 & Quy\u1EC1n "),r(),s(6,"mat-card-subtitle",3),l(7),r()(),s(8,"mat-card-content"),g(9,wt,3,0,"div",4)(10,Dt,7,0,"div",5),r()()),e&2){let a,o;m(7),C(" ",((a=n.user())==null||a.roles==null?null:a.roles.length)||0," vai tr\xF2 \u0111\u01B0\u1EE3c g\xE1n "),m(2),f((o=n.user())!=null&&o.roles&&n.user().roles.length>0?9:10)}},dependencies:[F,q,V,G,z,Q,O,L,B,W,Z,Y],styles:[".roles-info[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.roles-info[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.roles-info[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}.roles-info[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]:hover{border-color:#2196f3;background-color:#f3f4f6}"]})};function Mt(i,t){if(i&1){let e=S();s(0,"button",3),v("click",function(){h(e);let a=c();return x(a.handleUserAction())}),s(1,"mat-icon"),l(2,"save"),r()()}}function It(i,t){if(i&1){let e=S();s(0,"button",3),v("click",function(){h(e);let a=c();return x(a.toggleEdit())}),s(1,"mat-icon"),l(2,"edit"),r()()}}function Tt(i,t){if(i&1){let e=S();s(0,"button",11),v("click",function(){h(e);let a=c();return x(a.toggleDelete())}),s(1,"mat-icon"),l(2,"delete"),r()()}}function At(i,t){if(i&1){let e=S();M(0),s(1,"div",12)(2,"div",13),l(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),s(4,"div",14)(5,"button",15),v("click",function(){h(e);let a=c();return x(a.DeleteData())}),l(6,"\u0110\u1ED3ng \xDD"),r(),s(7,"button",16),v("click",function(){h(e);let a=c();return x(a.toggleDelete())}),l(8,"Hu\u1EF7 B\u1ECF"),r()()(),I()}}function kt(i,t){i&1&&(M(0),s(1,"mat-icon",40),l(2,"refresh"),r(),l(3," \u0110ang th\xEAm... "),I())}function Ft(i,t){i&1&&(M(0),s(1,"mat-icon"),l(2,"add"),r(),l(3," Th\xEAm Nh\xF3m "),I())}function Bt(i,t){i&1&&(s(0,"mat-icon",44),l(1,"refresh"),r())}function Lt(i,t){if(i&1){let e=S();s(0,"mat-icon",46),v("click",function(){h(e);let a=c().$implicit,o=c(3);return x(o.handleRemoveRole(a))}),l(1," close "),r()}i&2&&de("cursor","pointer")}function Vt(i,t){if(i&1&&(s(0,"mat-chip-listbox")(1,"mat-chip-option",41)(2,"div",42)(3,"span",43),l(4),r(),g(5,Bt,2,0,"mat-icon",44)(6,Lt,2,2,"mat-icon",45),r()()()),i&2){let e=t.$implicit,n=c(3);m(),ue("opacity-50",n.isRemovingRole()),m(3),E((e==null||e.role==null?null:e.role.name)||(e==null?null:e.name)),m(),f(n.isRemovingRole()?5:n.isEdit()?6:-1)}}function Ot(i,t){if(i&1&&(s(0,"div",29),P(1,Vt,7,4,"mat-chip-listbox",null,ae),r()),i&2){let e=c(2);m(),b(e.DetailUser().roles)}}function Gt(i,t){if(i&1&&(s(0,"button",49),M(1),s(2,"mat-icon"),l(3,"add"),r(),l(4," Th\xEAm nh\xF3m \u0111\u1EA7u ti\xEAn "),I(),r()),i&2){c(2);let e=J(34);u("matMenuTriggerFor",e)}}function Qt(i,t){if(i&1&&(s(0,"div",30)(1,"mat-icon",47),l(2,"group_off"),r(),s(3,"p",48),l(4,"Ch\u01B0a c\xF3 nh\xF3m quy\u1EC1n n\xE0o"),r(),g(5,Gt,5,1,"button",49),r()),i&2){let e=c(2);m(5),f(e.isEdit()?5:-1)}}function zt(i,t){if(i&1){let e=S();s(0,"button",50),v("click",function(){let a=h(e).$implicit,o=c(2);return x(o.handleAddRole(a))}),l(1),r()}if(i&2){let e=t.$implicit;m(),E(e.name)}}function qt(i,t){if(i&1&&(s(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",54),U(4,"app-user-roles-info",55),r(),s(5,"div",54),U(6,"app-user-permission-summary",56),r(),s(7,"div",54)(8,"mat-card",57)(9,"mat-card-header")(10,"mat-card-title",27)(11,"mat-icon",58),l(12,"settings"),r(),l(13," Quy\u1EC1n \u0110\u1EB7c Bi\u1EC7t "),r(),s(14,"mat-card-subtitle",59),l(15," Override quy\u1EC1n t\u1EEB roles "),r()(),s(16,"mat-card-content"),U(17,"app-user-permission-management",60),r()()()()()()),i&2){let e,n,a=c(2);m(4),u("user",a.DetailUser()),m(2),u("userId",(e=a.DetailUser())==null?null:e.id)("user",a.DetailUser()),m(11),u("userId",(n=a.DetailUser())==null?null:n.id)}}function Wt(i,t){i&1&&(s(0,"div",51)(1,"div",52)(2,"div",61)(3,"mat-icon",62),l(4,"info"),r(),s(5,"p",63),l(6,"L\u01B0u user tr\u01B0\u1EDBc \u0111\u1EC3 qu\u1EA3n l\xFD quy\u1EC1n \u0111\u1EB7c bi\u1EC7t"),r(),s(7,"p",59),l(8,"Sau khi t\u1EA1o user, b\u1EA1n c\xF3 th\u1EC3 c\u1EA5p/thu h\u1ED3i quy\u1EC1n ri\xEAng"),r()()()())}function jt(i,t){if(i&1){let e=S();M(0),s(1,"div",17)(2,"mat-form-field",18)(3,"mat-label"),l(4,"Email"),r(),s(5,"input",19),k("ngModelChange",function(a){h(e);let o=c();return A(o.DetailUser().email,a)||(o.DetailUser().email=a),x(a)}),r()(),s(6,"mat-form-field",18)(7,"mat-label"),l(8,"H\u1ECD V\xE0 T\xEAn"),r(),s(9,"input",20),k("ngModelChange",function(a){h(e);let o=c();return A(o.DetailUser().name,a)||(o.DetailUser().name=a),x(a)}),r()(),s(10,"mat-form-field",18)(11,"mat-label"),l(12,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),r(),s(13,"input",21),k("ngModelChange",function(a){h(e);let o=c();return A(o.DetailUser().SDT,a)||(o.DetailUser().SDT=a),x(a)}),r()(),s(14,"mat-form-field",18)(15,"mat-label"),l(16,"M\u1EADt Kh\u1EA9u "),r(),s(17,"input",22),k("ngModelChange",function(a){h(e);let o=c();return A(o.DetailUser().password,a)||(o.DetailUser().password=a),x(a)}),r()(),s(18,"div",23)(19,"button",24,0),g(21,kt,4,0,"ng-container")(22,Ft,4,0,"ng-container"),r()(),s(23,"div",25)(24,"mat-card",26)(25,"mat-card-header")(26,"mat-card-title",27)(27,"mat-icon",28),l(28,"groups"),r(),l(29),r()(),s(30,"mat-card-content"),g(31,Ot,3,0,"div",29)(32,Qt,6,1,"div",30),r()()(),s(33,"mat-menu",null,1)(35,"div",31),v("click",function(a){return h(e),x(a.stopPropagation())}),s(36,"div",32)(37,"input",33),v("keyup",function(a){h(e);let o=c();return x(o.doFilterHederColumn(a))}),r(),s(38,"div",34)(39,"span",35),l(40,"search"),r()()(),s(41,"div",36),P(42,zt,2,1,"button",37,ae),r(),s(44,"div",38)(45,"button",16),v("click",function(){h(e);let a=J(20);return x(a.closeMenu())}),l(46,"\u0110\xF3ng"),r()()()(),g(47,qt,18,4,"div",39)(48,Wt,9,0,"div",39),r(),I()}if(i&2){let e,n,a=J(34),o=c();m(5),T("ngModel",o.DetailUser().email),u("disabled",!o.isEdit()),m(4),T("ngModel",o.DetailUser().name),u("disabled",!o.isEdit()),m(4),T("ngModel",o.DetailUser().SDT),u("disabled",!o.isEdit()),m(4),T("ngModel",o.DetailUser().password),u("disabled",!o.isEdit()),m(2),u("disabled",!o.isEdit()||o.isAddingRole())("matMenuTriggerFor",a),m(2),f(o.isAddingRole()?21:22),m(8),C(" Nh\xF3m Quy\u1EC1n (",((e=o.DetailUser().roles)==null?null:e.length)||0,") "),m(2),f(o.DetailUser().roles&&o.DetailUser().roles.length>0?31:32),m(11),b(o.FilterRole()),m(5),u("ngIf",((n=o.DetailUser())==null?null:n.id)&&o.DetailUser().id!=="new"),m(),u("ngIf",o.DetailUser().id==="new")}}var tt=class i{_ListuserComponent=y($e);_UserGraphQLService=y(ee);_RoleGraphQLService=y(te);_route=y(fe);_router=y(he);_snackBar=y(Ce);constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");e==="new"?this.userId.set(e):e&&!this._UserGraphQLService.currentUser()&&this.userId.set(e)})}DetailUser=p(null);isEdit=p(!1);isDelete=p(!1);isLoading=p(!1);isAddingRole=p(!1);isRemovingRole=p(!1);userId=p(null);ListRole=p([]);FilterRole=p([]);getUserById(t){return _(this,null,function*(){try{let e=yield this._UserGraphQLService.getUserById(t);e&&this.DetailUser.set(N(j({},e),{SDT:e.SDT||""}))}catch(e){console.error("Error loading user:",e),this._snackBar.open("L\u1ED7i khi t\u1EA3i th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng","\u0110\xF3ng",{duration:3e3})}})}ngOnInit(){return _(this,null,function*(){let t=this.userId();if(!t){this._router.navigate(["/admin/user"]),this._ListuserComponent.drawer.close();return}if(t==="new")this.DetailUser.set({id:"new",email:"",password:"",SDT:"",name:"",isActive:!0,roles:[],profile:{name:"",avatar:"",bio:""}}),this._ListuserComponent?.drawer?.open(),this.isEdit.set(!0);else if(t)try{yield this.getUserById(t),this._ListuserComponent?.drawer?.open(),this._router.navigate(["/admin/user",t])}catch(e){console.error("Error loading user:",e),this._snackBar.open("L\u1ED7i khi t\u1EA3i th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng","\u0110\xF3ng",{duration:3e3}),this._router.navigate(["/admin/user"]);return}try{yield this._RoleGraphQLService.loadAllRoles(),this.ListRole.set(this._RoleGraphQLService.allRoles()),this.updateFilterRole()}catch(e){console.error("Error loading roles:",e)}})}updateFilterRole(){let t=this.ListRole()||[],n=this.DetailUser()?.roles||[];if(t.length===0){this.FilterRole.set([]);return}let a=t.filter(o=>!o||!o.id?!1:!n.some(d=>d?d.roleId===o.id||d.role?.id===o.id:!1));this.FilterRole.set(a)}handleUserAction(){return _(this,null,function*(){this.userId()==="new"?yield this.createUser():yield this.updateUser()})}createUser(){return _(this,null,function*(){try{if(!this.DetailUser().password||this.DetailUser().password.trim()===""){this._snackBar.open("Vui l\xF2ng nh\u1EADp password","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(!this.DetailUser().SDT||this.DetailUser().SDT.trim()===""){this._snackBar.open("Vui l\xF2ng nh\u1EADp SDT","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}yield this._UserGraphQLService.createUser(this.DetailUser()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o user:",t)}})}updateUser(){return _(this,null,function*(){try{yield this._UserGraphQLService.updateUser(this.DetailUser().id,this.DetailUser()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt user:",t)}})}DeleteData(){return _(this,null,function*(){try{yield this._UserGraphQLService.deleteUser(this.DetailUser().id),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/user"])}catch(t){console.error("L\u1ED7i khi x\xF3a user:",t)}})}FillSlug(){this.DetailUser.update(t=>N(j({},t),{slug:Le(t.title)}))}doFilterHederColumn(t){let e=this.ListRole();this.FilterRole.set(e.filter(n=>n.name.toLowerCase().includes(t.target.value.toLowerCase())))}handleAddRole(t){return _(this,null,function*(){if(!t||!t.id||this.isAddingRole()){(!t||!t.id)&&this._snackBar.open("D\u1EEF li\u1EC7u vai tr\xF2 kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isAddingRole.set(!0);try{if((this.DetailUser()?.roles||[]).some(a=>a.roleId===t.id||a.role?.id===t.id)){this._snackBar.open("Vai tr\xF2 \u0111\xE3 \u0111\u01B0\u1EE3c th\xEAm","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}yield this._UserGraphQLService.assignRolesToUser(this.DetailUser().id,[t.id]),this.DetailUser.update(a=>N(j({},a),{roles:[...a.roles||[],{id:Ve(8,!1),userId:this.DetailUser().id,roleId:t.id,role:t}]})),this.updateFilterRole(),this._snackBar.open("Th\xEAm vai tr\xF2 th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("Error adding role:",e),this._snackBar.open("L\u1ED7i khi th\xEAm vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isAddingRole.set(!1)}})}handleRemoveRole(t){return _(this,null,function*(){if(!t||this.isRemovingRole()){t||this._snackBar.open("D\u1EEF li\u1EC7u vai tr\xF2 kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isRemovingRole.set(!0);try{let e=t.role?.id||t.roleId;if(!e){this._snackBar.open("Kh\xF4ng th\u1EC3 x\xE1c \u0111\u1ECBnh ID vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}yield this._UserGraphQLService.removeRoleFromUser(this.DetailUser().id,e),this.DetailUser.update(n=>N(j({},n),{roles:(n.roles||[]).filter(a=>(a.role?.id||a.roleId)!==e)})),this.updateFilterRole(),this._snackBar.open("X\xF3a vai tr\xF2 th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("Error removing role:",e),this._snackBar.open("L\u1ED7i khi x\xF3a vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isRemovingRole.set(!1)}})}goBack(){this._UserGraphQLService.clearCurrentUser(),this._ListuserComponent.drawer.close(),this._router.navigate(["/admin/user"])}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-detailuser"]],decls:15,vars:9,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp H\u1ECD V\xE0 T\xEAn",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],["matInput","","type","password","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],[1,"w-full","flex","flex-wrap","gap-2","space-x-2"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"mb-4"],[1,"bg-blue-50"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-blue-500"],[1,"flex","flex-row","flex-wrap","gap-2"],[1,"text-center","text-gray-500","py-4"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["mat-menu-item",""],[1,"flex","flex-row","space-x-2","items-center","justify-end"],["class","mt-8",4,"ngIf"],[1,"animate-spin"],[1,"bg-blue-100"],[1,"flex","items-center"],[1,"mr-2"],[1,"animate-spin","text-gray-500","text-sm"],["color","warn",1,"text-sm","hover:text-red-600",3,"cursor"],["color","warn",1,"text-sm","hover:text-red-600",3,"click"],[1,"text-gray-400"],[1,"text-sm","mt-1"],["mat-stroked-button","","color","primary",1,"mt-2",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"mt-8"],[1,"border-t","pt-6"],[1,"grid","grid-cols-1","gap-6"],[1,"xl:col-span-1"],[3,"user"],[3,"userId","user"],[1,"permission-management"],[1,"mr-2","text-green-500"],[1,"text-xs"],[3,"userId"],[1,"text-center","text-gray-500","py-8"],[1,"text-4xl","text-gray-400"],[1,"mt-2"]],template:function(e,n){if(e&1&&(s(0,"div",2)(1,"button",3),v("click",function(){return n.goBack()}),s(2,"mat-icon"),l(3,"arrow_back"),r()(),s(4,"div",4),l(5),r(),s(6,"div",5)(7,"mat-slide-toggle",6),k("ngModelChange",function(o){return A(n.DetailUser().isActive,o)||(n.DetailUser().isActive=o),o}),l(8),r(),g(9,Mt,3,0,"button",7)(10,It,3,0,"button",7)(11,Tt,3,0,"button",8),r()(),s(12,"div",9),g(13,At,9,0,"ng-container",10)(14,jt,49,15,"ng-container",10),r()),e&2){let a,o;m(5),E(((a=n.DetailUser())==null?null:a.email)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),m(2),T("ngModel",n.DetailUser().isActive),u("disabled",!n.isEdit()||!n.DetailUser()),m(),E((o=n.DetailUser())!=null&&o.isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),m(),u("ngIf",n.isEdit()&&n.DetailUser()),m(),u("ngIf",!n.isEdit()&&n.DetailUser()),m(),u("ngIf",n.DetailUser()),m(2),u("ngIf",n.isDelete()),m(),u("ngIf",!n.isDelete()&&n.DetailUser())}},dependencies:[Ae,Te,Ie,Fe,ke,De,Re,Ue,we,L,B,Z,Y,xe,Be,Me,F,ge,qe,ze,Pe,Ee,ye,Se,q,V,G,z,Q,O,be,W,je,We,Ke,re,oe],styles:[".permission-management[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.permission-management[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.permission-management[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}"]})};export{tt as DetailUserComponent};
