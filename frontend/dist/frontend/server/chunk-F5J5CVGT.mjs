import './polyfills.server.mjs';
import{a as T}from"./chunk-XUYN2V56.mjs";import"./chunk-BHSUXMGO.mjs";import"./chunk-SJXCJ4EE.mjs";import"./chunk-WZNDKZHB.mjs";import{b as Q,c as H}from"./chunk-NMLXEZ3L.mjs";import{b as V,c as U,d as X,g as q,h as G}from"./chunk-K44DF5ZO.mjs";import{b as N,f as O,g as L,h as F,i as z,j as W,o as j}from"./chunk-4ZTCAIG4.mjs";import{a as I,b as R}from"./chunk-OQD74SFW.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-GZJI4QK3.mjs";import{b as B}from"./chunk-KIBINQT2.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-2CGNFEBQ.mjs";import{c as D,f as A,h as x}from"./chunk-N7BUB3PW.mjs";import"./chunk-5YK36DL6.mjs";import"./chunk-7G3V73VQ.mjs";import"./chunk-GRF7MZJE.mjs";import{a as M,d as C,e as S}from"./chunk-ZOTJUA4F.mjs";import{m as v,s as E}from"./chunk-UOIAS6J6.mjs";import{Ac as f,Bb as _,Ec as w,Fc as g,Gc as h,Hb as b,Jc as P,Sb as c,Tb as a,bc as t,cc as i,dc as y,ka as m,lc as u,ob as r,zc as n}from"./chunk-KOT4CA75.mjs";import"./chunk-XAZRL6IZ.mjs";import{j as k}from"./chunk-RIAI3ORJ.mjs";var J=()=>({standalone:!0});function Y(l,o){l&1&&(t(0,"span"),n(1,"\u0110\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u"),i())}function Z(l,o){l&1&&(t(0,"span"),n(1,"\u0110ang x\u1EED l\xFD..."),i())}var K=class l{resetPasswordData={newPassword:"",confirmPassword:""};resetToken="";isLoading=!1;hideNewPassword=!0;hideConfirmPassword=!0;_snackBar=m(B);_userService=m(T);router=m(C);route=m(M);constructor(){}ngOnInit(){this.route.queryParams.subscribe(o=>{this.resetToken=o.token,this.resetToken||(this.resetToken=localStorage.getItem("resetToken")||"",this.resetToken||(this._snackBar.open("Token kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]}),this.router.navigate(["/loginctv"])))})}onSubmit(){return k(this,null,function*(){if(!this.resetPasswordData.newPassword||!this.resetPasswordData.confirmPassword){this._snackBar.open("Vui l\xF2ng nh\u1EADp \u0111\u1EA7y \u0111\u1EE7 th\xF4ng tin","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(this.resetPasswordData.newPassword!==this.resetPasswordData.confirmPassword){this._snackBar.open("M\u1EADt kh\u1EA9u x\xE1c nh\u1EADn kh\xF4ng kh\u1EDBp","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(this.resetPasswordData.newPassword.length<6){this._snackBar.open("M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isLoading=!0;try{let o=yield this._userService.resetPassword(this.resetToken,this.resetPasswordData.newPassword);o.success?(this._snackBar.open("M\u1EADt kh\u1EA9u \u0111\xE3 \u0111\u01B0\u1EE3c \u0111\u1EB7t l\u1EA1i th\xE0nh c\xF4ng!","",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),localStorage.removeItem("resetToken"),setTimeout(()=>{this.router.navigate(["/loginctv"])},2e3)):this._snackBar.open(o.message||"C\xF3 l\u1ED7i x\u1EA3y ra","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(o){console.error("Reset password error:",o),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isLoading=!1}})}static \u0275fac=function(p){return new(p||l)};static \u0275cmp=_({type:l,selectors:[["app-reset-password"]],decls:37,vars:17,consts:[[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col","bg-slate-100"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"text-center"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-sm","text-gray-600"],[1,"w-full","space-y-4",3,"ngSubmit"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["matInput","","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi",1,"w-full",3,"ngModelChange","keyup.enter","type","ngModel","ngModelOptions"],["matPrefix","",1,"material-symbols-outlined"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","placeholder","X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi",1,"w-full",3,"ngModelChange","keyup.enter","type","ngModel","ngModelOptions"],[1,"w-full","space-y-4"],["type","submit","mat-raised-button","","color","primary",1,"w-full",3,"disabled"],[4,"ngIf"],["routerLink","/loginctv",1,"text-blue-500","cursor-pointer","font-medium","hover:underline"]],template:function(p,e){p&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"div",4),t(5,"div",5)(6,"div",6)(7,"h2",7),n(8,"\u0110\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u"),i(),t(9,"p",8),n(10,"Nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi c\u1EE7a b\u1EA1n"),i()(),t(11,"form",9),u("ngSubmit",function(){return e.onSubmit()}),t(12,"mat-form-field",10)(13,"mat-label"),n(14,"M\u1EADt kh\u1EA9u m\u1EDBi"),i(),t(15,"input",11),h("ngModelChange",function(s){return g(e.resetPasswordData.newPassword,s)||(e.resetPasswordData.newPassword=s),s}),u("keyup.enter",function(){return e.onSubmit()}),i(),t(16,"mat-icon",12),n(17,"lock"),i(),t(18,"button",13),u("click",function(){return e.hideNewPassword=!e.hideNewPassword}),t(19,"mat-icon"),n(20),i()()(),t(21,"mat-form-field",10)(22,"mat-label"),n(23,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi"),i(),t(24,"input",14),h("ngModelChange",function(s){return g(e.resetPasswordData.confirmPassword,s)||(e.resetPasswordData.confirmPassword=s),s}),u("keyup.enter",function(){return e.onSubmit()}),i(),t(25,"mat-icon",12),n(26,"lock"),i(),t(27,"button",13),u("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),t(28,"mat-icon"),n(29),i()()(),t(30,"div",15)(31,"button",16),b(32,Y,2,0,"span",17)(33,Z,2,0,"span",17),i(),t(34,"div",6)(35,"a",18),n(36," \u2190 Quay l\u1EA1i \u0111\u0103ng nh\u1EADp "),i()()()()()()()()()),p&2&&(r(15),a("type",e.hideNewPassword?"password":"text"),w("ngModel",e.resetPasswordData.newPassword),a("ngModelOptions",P(15,J)),r(3),c("aria-label","Toggle password visibility")("aria-pressed",e.hideNewPassword),r(2),f(e.hideNewPassword?"visibility_off":"visibility"),r(4),a("type",e.hideConfirmPassword?"password":"text"),w("ngModel",e.resetPasswordData.confirmPassword),a("ngModelOptions",P(16,J)),r(3),c("aria-label","Toggle password visibility")("aria-pressed",e.hideConfirmPassword),r(2),f(e.hideConfirmPassword?"visibility_off":"visibility"),r(2),a("disabled",e.isLoading),r(),a("ngIf",!e.isLoading),r(),a("ngIf",e.isLoading))},dependencies:[E,v,j,W,N,O,L,z,F,G,q,V,U,X,H,Q,x,A,D,R,I,S],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.snackbar-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important}.snackbar-error[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff!important}.snackbar-warning[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-raised-button[_ngcontent-%COMP%]:disabled{opacity:.6}"]})};export{K as ResetPasswordComponent};
