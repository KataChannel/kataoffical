import './polyfills.server.mjs';
import{a as Pt}from"./chunk-OA3EWZPX.mjs";import"./chunk-73IBRO6I.mjs";import{b as Et}from"./chunk-GBFB2S74.mjs";import{c as wt,f as Tt}from"./chunk-OSR76MA5.mjs";import{a as ot,b as st,c as W,d as lt,e as ct}from"./chunk-7RS2HU23.mjs";import{c as qe,d as Ye,f as Ke,h as Qe}from"./chunk-GFN7VYFM.mjs";import{e as nt}from"./chunk-4CVVRMK6.mjs";import{a as Ae,b as Oe,c as Ne}from"./chunk-YTU7XDGG.mjs";import{a as $e,b as Re,c as Ve,d as Be}from"./chunk-SEUKZQPN.mjs";import"./chunk-Y5GM6BPP.mjs";import{a as Pe}from"./chunk-Y4JWQ5EN.mjs";import{a as Ft}from"./chunk-BDGBI6HK.mjs";import{f as vt,g as E}from"./chunk-IZQHBKKJ.mjs";import{a as Dt,b as kt,c as St,k as Mt}from"./chunk-2L3VAKP5.mjs";import"./chunk-MGIVCIKU.mjs";import{a as it,b as rt,c as ut,d as ht,e as mt,g as dt,h as pt,j as gt,k as ft,m as _t,n as yt,p as Ct,q as xt,r as bt,s as ie}from"./chunk-J7LZPXHJ.mjs";import{b as at}from"./chunk-CLM2A5SH.mjs";import{b as ze,g as Ge,j as He,n as Ue,p as Je,r as We,s as je,v as Xe,w as Ze,y as et,z as tt}from"./chunk-BGR47ZAP.mjs";import"./chunk-YHY2PH7R.mjs";import{a as Le,b as Ie}from"./chunk-GIRCJHZG.mjs";import"./chunk-HBAG4WPS.mjs";import"./chunk-FIBSUVLL.mjs";import{a as Ee,c as ve,e as Fe}from"./chunk-WAYT56PF.mjs";import{_ as Me,y as ke,z as Se}from"./chunk-2MSECEHE.mjs";import"./chunk-7T6LZHUD.mjs";import{b as Te,d as De}from"./chunk-NES7BRLR.mjs";import"./chunk-EFFACMZL.mjs";import{n as Ce,o as xe,v as be,x as we}from"./chunk-XQ6Z6XLV.mjs";import{$c as fe,Bc as U,Cc as q,Dc as Y,Fb as ce,Gc as S,Hc as h,Ic as k,Jc as D,Kc as ne,Lc as pe,Mb as O,Mc as K,Nc as Q,Oc as J,Qc as ge,Ra as H,Wc as F,Xb as ue,Yb as T,Yc as P,_b as z,dc as $,fc as he,gc as ee,hc as te,ic as s,ja as se,jc as l,kc as I,lc as me,mc as de,oa as le,oc as R,pa as L,tb as m,tc as w,u as M,vc as u,vd as _e,xd as ye,ya as x,za as b,zc as ae}from"./chunk-5IMI5WTE.mjs";import"./chunk-XAZRL6IZ.mjs";import{a as C,b as v,d as oe,h as Z,j as p}from"./chunk-RIAI3ORJ.mjs";var Lt=E`
  query FindMany(
    $modelName: String!
    $where: JSON
    $orderBy: JSON
    $skip: Float
    $take: Float
    $include: JSON
    $select: JSON
  ) {
    findMany(
      modelName: $modelName
      where: $where
      orderBy: $orderBy
      skip: $skip
      take: $take
      include: $include
      select: $select
    )
  }
`,It=E`
  query FindUnique(
    $modelName: String!
    $where: JSON!
    $include: JSON
    $select: JSON
  ) {
    findUnique(
      modelName: $modelName
      where: $where
      include: $include
      select: $select
    )
  }
`,$t=E`
  mutation CreateOne(
    $modelName: String!
    $data: JSON!
    $include: JSON
    $select: JSON
  ) {
    createOne(
      modelName: $modelName
      data: $data
      include: $include
      select: $select
    )
  }
`,Rt=E`
  mutation UpdateOne(
    $modelName: String!
    $where: JSON!
    $data: JSON!
    $include: JSON
    $select: JSON
  ) {
    updateOne(
      modelName: $modelName
      where: $where
      data: $data
      include: $include
      select: $select
    )
  }
`,Vt=E`
  mutation DeleteOne(
    $modelName: String!
    $where: JSON!
  ) {
    deleteOne(
      modelName: $modelName
      where: $where
    )
  }
`,Bt=E`
  mutation BatchCreate(
    $modelName: String!
    $data: [JSON!]!
  ) {
    batchCreate(
      modelName: $modelName
      data: $data
    )
  }
`,zt=E`
  mutation BatchUpdate(
    $modelName: String!
    $operations: [JSON!]!
  ) {
    batchUpdate(
      modelName: $modelName
      operations: $operations
    )
  }
`,Gt=E`
  mutation BatchDelete(
    $modelName: String!
    $where: [JSON!]!
  ) {
    batchDelete(
      modelName: $modelName
      where: $where
    )
  }
`,Ht=E`
  query HealthCheck {
    health
  }
`,Ut=E`
  query GetAvailableModels {
    getAvailableModels
  }
`,qt=E`
  query ModelMetadata($modelName: String!) {
    modelMetadata(modelName: $modelName)
  }
`,j=class o{constructor(e){this.apollo=e;this.initializeCacheCleanup(),this.performHealthCheck()}cache=new Map;DEFAULT_TTL=5*60*1e3;AGGRESSIVE_TTL=30*60*1e3;MAX_CACHE_SIZE=1e3;CLEANUP_INTERVAL=60*1e3;REQUEST_TIMEOUT=3e4;MAX_RETRIES=3;DEFAULT_BATCH_SIZE=1e3;MAX_PARALLEL_REQUESTS=5;performanceMetrics=H([]);cacheHitRate=_e(()=>{let e=this.performanceMetrics();return e.length===0?0:e.filter(a=>a.cacheHit).length/e.length*100});errors=H([]);isHealthy=H(!0);loadingStates=new Map;initializeCacheCleanup(){setInterval(()=>{this.cleanupExpiredCache()},this.CLEANUP_INTERVAL)}cleanupExpiredCache(){let e=new Date,t=[];if(this.cache.forEach((a,n)=>{e.getTime()-a.timestamp.getTime()>a.ttl&&t.push(n)}),t.forEach(a=>this.cache.delete(a)),this.cache.size>this.MAX_CACHE_SIZE){let a=Array.from(this.cache.entries()).sort((r,i)=>r[1].timestamp.getTime()-i[1].timestamp.getTime()),n=this.cache.size-this.MAX_CACHE_SIZE;for(let r=0;r<n;r++)this.cache.delete(a[r][0])}}generateCacheKey(e,t){return`${e}_${JSON.stringify(t)}`}getFromCache(e){let t=this.cache.get(e);return t?new Date().getTime()-t.timestamp.getTime()>t.ttl?(this.cache.delete(e),null):t.data:null}setCache(e,t,a=this.DEFAULT_TTL){this.cache.set(e,{data:t,timestamp:new Date,ttl:a,key:e})}invalidateCache(e){if(!e){this.cache.clear();return}let t=[];this.cache.forEach((a,n)=>{n.includes(e)&&t.push(n)}),t.forEach(a=>this.cache.delete(a))}trackPerformance(e,t,a,n,r){let i={queryTime:Date.now()-t,cacheHit:a,resultCount:n,timestamp:new Date,queryType:e,modelName:r},d=this.performanceMetrics();this.performanceMetrics.set([...d.slice(-99),i])}trackError(e,t){let a={message:e.message||"Unknown error",code:e.code||e.extensions?.code,path:e.path,timestamp:new Date},n=this.errors();this.errors.set([...n.slice(-49),a])}setLoading(e,t){this.loadingStates.set(e,t)}performHealthCheck(){return p(this,null,function*(){let e=Date.now();try{let t=yield M(this.apollo.query({query:Ht,fetchPolicy:"no-cache"}));this.isHealthy.set(!0),this.trackPerformance("health_check",e,!1,1)}catch(t){this.isHealthy.set(!1),this.trackError(t,"health_check")}})}findMany(a){return p(this,arguments,function*(e,t={}){let n=Date.now(),r=this.generateCacheKey("findMany",C({modelName:e},t)),i=`findMany_${e}`,d=this.getFromCache(r);if(d)return this.trackPerformance("findMany",n,!0,d.length,e),d;this.setLoading(i,!0);let _={modelName:e,where:t.where,orderBy:t.orderBy,skip:t.skip,take:t.take,include:t.include,select:t.select};try{let y=(yield M(this.apollo.query({query:Lt,variables:_,fetchPolicy:"cache-first"}))).data.findMany;return this.setCache(r,y),this.trackPerformance("findMany",n,!1,y.length,e),y}catch(f){throw this.trackError(f,"findMany"),f}finally{this.setLoading(i,!1)}})}findUnique(n,r){return p(this,arguments,function*(e,t,a={}){let i=Date.now(),d=this.generateCacheKey("findUnique",C({modelName:e,where:t},a)),_=`findUnique_${e}`,f=this.getFromCache(d);if(f)return this.trackPerformance("findUnique",i,!0,1,e),f;this.setLoading(_,!0);let y={modelName:e,where:t,include:a.include,select:a.select};try{let g=(yield M(this.apollo.query({query:It,variables:y,fetchPolicy:"cache-first"}))).data.findUnique;return this.setCache(d,g),this.trackPerformance("findUnique",i,!1,g?1:0,e),g}catch(c){throw this.trackError(c,"findUnique"),c}finally{this.setLoading(_,!1)}})}createOne(n,r){return p(this,arguments,function*(e,t,a={}){let i=Date.now(),d=`createOne_${e}`;this.setLoading(d,!0);let _={modelName:e,data:t,include:a.include,select:a.select};try{let y=(yield M(this.apollo.mutate({mutation:$t,variables:_}))).data.createOne;return this.invalidateCache(e),this.trackPerformance("createOne",i,!1,1,e),y}catch(f){throw this.trackError(f,"createOne"),f}finally{this.setLoading(d,!1)}})}updateOne(r,i,d){return p(this,arguments,function*(e,t,a,n={}){let _=Date.now(),f=`updateOne_${e}`;this.setLoading(f,!0);let y={modelName:e,where:t,data:a,include:n.include,select:n.select};try{let g=(yield M(this.apollo.mutate({mutation:Rt,variables:y}))).data.updateOne;return this.invalidateCache(e),this.trackPerformance("updateOne",_,!1,1,e),g}catch(c){throw this.trackError(c,"updateOne"),c}finally{this.setLoading(f,!1)}})}deleteOne(e,t){return p(this,null,function*(){let a=Date.now(),n=`deleteOne_${e}`;this.setLoading(n,!0);let r={modelName:e,where:t};try{let d=(yield M(this.apollo.mutate({mutation:Vt,variables:r}))).data.deleteOne;return this.invalidateCache(e),this.trackPerformance("deleteOne",a,!1,1,e),d}catch(i){throw this.trackError(i,"deleteOne"),i}finally{this.setLoading(n,!1)}})}batchCreate(e,t){return p(this,null,function*(){let a=Date.now(),n=`batchCreate_${e}`;this.setLoading(n,!0);let r={modelName:e,data:t};try{let d=(yield M(this.apollo.mutate({mutation:Bt,variables:r}))).data.batchCreate;return this.invalidateCache(e),this.trackPerformance("batchCreate",a,!1,d.length,e),d}catch(i){throw this.trackError(i,"batchCreate"),i}finally{this.setLoading(n,!1)}})}batchUpdate(e,t){return p(this,null,function*(){let a=Date.now(),n=`batchUpdate_${e}`;this.setLoading(n,!0);let r={modelName:e,operations:t};try{let d=(yield M(this.apollo.mutate({mutation:zt,variables:r}))).data.batchUpdate;return this.invalidateCache(e),this.trackPerformance("batchUpdate",a,!1,d.length,e),d}catch(i){throw this.trackError(i,"batchUpdate"),i}finally{this.setLoading(n,!1)}})}batchDelete(e,t){return p(this,null,function*(){let a=Date.now(),n=`batchDelete_${e}`;this.setLoading(n,!0);let r={modelName:e,where:t};try{let d=(yield M(this.apollo.mutate({mutation:Gt,variables:r}))).data.batchDelete;return this.invalidateCache(e),this.trackPerformance("batchDelete",a,!1,d.length,e),d}catch(i){throw this.trackError(i,"batchDelete"),i}finally{this.setLoading(n,!1)}})}getAvailableModels(){return p(this,null,function*(){let e=Date.now(),t="getAvailableModels",a=this.getFromCache(t);if(a)return this.trackPerformance("getAvailableModels",e,!0,a.length),a;try{let r=(yield M(this.apollo.query({query:Ut,fetchPolicy:"cache-first"}))).data.getAvailableModels;return this.setCache(t,r,this.DEFAULT_TTL*12),this.trackPerformance("getAvailableModels",e,!1,r.length),r}catch(n){throw this.trackError(n,"getAvailableModels"),n}})}getModelMetadata(e){return p(this,null,function*(){let t=Date.now(),a=this.generateCacheKey("modelMetadata",{modelName:e}),n=this.getFromCache(a);if(n)return this.trackPerformance("modelMetadata",t,!0,1,e),n;try{let i=(yield M(this.apollo.query({query:qt,variables:{modelName:e},fetchPolicy:"cache-first"}))).data.modelMetadata;return this.setCache(a,i,this.DEFAULT_TTL*6),this.trackPerformance("modelMetadata",t,!1,1,e),i}catch(r){throw this.trackError(r,"modelMetadata"),r}})}findManyWithPagination(a){return p(this,arguments,function*(e,t={}){let n=t.pageSize||10,r=Math.max(1,t.page||1),i=(r-1)*n,d=v(C({},t),{skip:i,take:n}),_=v(C({},t),{select:{id:!0}});delete _.skip,delete _.take;try{let y=(yield this.findMany(e,_)).length;return{data:yield this.findMany(e,d),totalCount:y,hasNextPage:i+n<y,hasPreviousPage:r>1,currentPage:r,totalPages:Math.ceil(y/n)}}catch(f){throw f}})}getPerformanceMetrics(){return this.performanceMetrics()}getCacheHitRate(){return this.cacheHitRate()}getErrors(){return this.errors()}getHealthStatus(){return this.isHealthy()}isLoading(e,t){let a=t?`${e}_${t}`:e;return this.loadingStates.get(a)||!1}getCacheSize(){return this.cache.size}findAll(a){return p(this,arguments,function*(e,t={}){let n=Date.now(),B=t,{enableParallelFetch:r=!0,enableStreaming:i=!0,batchSize:d=this.DEFAULT_BATCH_SIZE,maxConcurrency:_=this.MAX_PARALLEL_REQUESTS,aggressiveCache:f=!0}=B,y=oe(B,["enableParallelFetch","enableStreaming","batchSize","maxConcurrency","aggressiveCache"]),c=this.generateCacheKey("findAll",C({modelName:e},y)),g=f?this.AGGRESSIVE_TTL:this.DEFAULT_TTL,N=this.getFromCache(c);if(N&&f)return v(C({},N),{fetchTime:Date.now()-n,cacheHit:!0});this.setLoading(`findAll_${e}`,!0);try{let A;r?A=yield this.parallelFindAll(e,y,d,_):i?A=yield this.streamingFindAll(e,y,d):A=yield this.standardFindAll(e,y);let G=v(C({},A),{fetchTime:Date.now()-n,cacheHit:!1,parallel:r});return this.setCache(c,G,g),this.trackPerformance("findAll",n,!1,A.totalCount,e),G}catch(A){throw this.trackError(A,"findAll"),A}finally{this.setLoading(`findAll_${e}`,!1)}})}parallelFindAll(e,t,a,n){return p(this,null,function*(){let i=(yield this.findMany(e,v(C({},t),{select:{id:!0}}))).length;if(i===0)return{data:[],totalCount:0,fetchTime:0,cacheHit:!1,parallel:!0,batches:0};let d=Math.ceil(i/a),_=(c,g)=>p(this,null,function*(){return yield this.findMany(e,v(C({},t),{skip:c,take:g}))});return{data:yield p(this,null,function*(){let c=[],g=[];for(let N=0;N<d;N++){let B=N*a,A=Math.min(a,i-B),G=_(B,A).then(X=>{c.push(...X)});if(g.push(G),g.length>=n){yield Promise.race(g);let X=g.filter(re=>re&&typeof re.isPending!="boolean");g.length=0,g.push(...X)}}return yield Promise.all(g),c}),totalCount:i,fetchTime:0,cacheHit:!1,parallel:!0,batches:d}})}streamingFindAll(e,t,a){return p(this,null,function*(){let n=[],r=0,i=0,d=!0,_=0;for(;d;){let f=yield this.findMany(e,v(C({},t),{skip:r,take:a}));if(f.length===0){d=!1;break}n.push(...f),i+=f.length,r+=a,_++,f.length<a&&(d=!1),_%5===0&&(yield new Promise(y=>setTimeout(y,0)))}return{data:n,totalCount:i,fetchTime:0,cacheHit:!1,parallel:!1,batches:_}})}standardFindAll(e,t){return p(this,null,function*(){let a=yield this.findMany(e,t);return{data:a,totalCount:a.length,fetchTime:0,cacheHit:!1,parallel:!1}})}findAllMultiple(a){return p(this,arguments,function*(e,t={}){let n=Date.now(),r={},i=e.map(f=>p(this,[f],function*({name:d,options:_={}}){let y=C(C({},t),_),c=yield this.findAll(d,y);return{name:d,result:c}}));try{(yield Promise.all(i)).forEach(({name:f,result:y})=>{r[f]=y});let _=Object.values(r).reduce((f,y)=>f+y.totalCount,0);return this.trackPerformance("findAllMultiple",n,!1,_,"multiple"),r}catch(d){throw this.trackError(d,"findAllMultiple"),d}})}smartFindAll(a){return p(this,arguments,function*(e,t={}){let n=yield this.getModelMetadata(e),r=n?.estimatedRecordCount||1e3,i=n?.hasComplexRelations||!1,d=v(C({},t),{enableParallelFetch:r>5e3,enableStreaming:r>1e4,batchSize:i?500:2e3,maxConcurrency:i?3:5,aggressiveCache:r<5e4});return yield this.findAll(e,d)})}clearCache(e){this.invalidateCache(e)}refreshHealthCheck(){return p(this,null,function*(){yield this.performHealthCheck()})}benchmarkFindAll(a){return p(this,arguments,function*(e,t=[]){let n=[{enableParallelFetch:!1,enableStreaming:!1},{enableParallelFetch:!0,enableStreaming:!1,batchSize:500},{enableParallelFetch:!0,enableStreaming:!1,batchSize:2e3},{enableParallelFetch:!1,enableStreaming:!0,batchSize:1e3},{enableParallelFetch:!0,enableStreaming:!1,aggressiveCache:!0}],r=t.length>0?t:n,i=[];this.clearCache(e);for(let _ of r){console.log("\u{1F9EA} Testing configuration:",_);let f=Date.now(),y=yield this.findAll(e,_),c=Date.now()-f,g={totalTime:c,recordsPerSecond:Math.round(y.totalCount/(c/1e3)),cacheEfficiency:y.cacheHit?100:0};i.push({config:_,result:y,performance:g}),console.log(`\u2705 Completed: ${c}ms, ${g.recordsPerSecond} records/sec`),yield new Promise(N=>setTimeout(N,100))}let d=i.reduce((_,f)=>f.performance.recordsPerSecond>_.performance.recordsPerSecond?f:_);return{results:i,recommendation:d.config}})}findAllTonKho(){return p(this,arguments,function*(e={}){return yield this.findAll("tonkho",C({batchSize:2e3,enableParallelFetch:!0,aggressiveCache:!0,select:{id:!0,sanphamId:!0,slton:!0,slchogiao:!0,slchonhap:!0,sanpham:{select:{id:!0,ten:!0,gia:!0}}}},e))})}findAllSanpham(){return p(this,arguments,function*(e={}){return yield this.smartFindAll("sanpham",C({select:{id:!0,ten:!0,gia:!0,mota:!0,active:!0,createdAt:!0},orderBy:{ten:"asc"},aggressiveCache:!0},e))})}findAllKhachhang(){return p(this,arguments,function*(e={}){return yield this.smartFindAll("khachhang",C({select:{id:!0,ten:!0,email:!0,sdt:!0,diachi:!0,active:!0},orderBy:{ten:"asc"},batchSize:1e3,enableParallelFetch:!0},e))})}findAllDonhang(){return p(this,arguments,function*(e={}){return yield this.findAll("donhang",C({include:{khachhang:{select:{id:!0,ten:!0,sdt:!0}},donhangsanpham:{select:{id:!0,soluong:!0,gia:!0,sanpham:{select:{id:!0,ten:!0}}}}},orderBy:{createdAt:"desc"},batchSize:500,maxConcurrency:3},e))})}loadDashboardData(){return p(this,arguments,function*(e={}){let t=Date.now(),[a,n,r,i]=yield Promise.all([this.findAllSanpham(C({take:100,aggressiveCache:!0},e)),this.findAllKhachhang(C({take:50,aggressiveCache:!0},e)),this.findAllTonKho(C({take:200,aggressiveCache:!0},e)),this.findAllDonhang(C({take:20,aggressiveCache:!0},e))]);return{sanpham:a,khachhang:n,tonkho:r,donhang:i,totalLoadTime:Date.now()-t}})}getSanphamList(){return p(this,arguments,function*(e={}){return yield this.findMany("sanpham",C({orderBy:{ten:"asc"}},e))})}getSanphamById(e){return p(this,null,function*(){return yield this.findUnique("sanpham",{id:e})})}getKhachhangList(){return p(this,arguments,function*(e={}){return yield this.findMany("khachhang",C({orderBy:{ten:"asc"}},e))})}getKhachhangById(e){return p(this,null,function*(){return yield this.findUnique("khachhang",{id:e})})}getDonhangList(){return p(this,arguments,function*(e={}){return yield this.findMany("donhang",C({orderBy:{createdAt:"desc"},include:{khachhang:!0,donhangsanpham:{include:{sanpham:!0}}}},e))})}getDonhangById(e){return p(this,null,function*(){return yield this.findUnique("donhang",{id:e},{include:{khachhang:!0,donhangsanpham:{include:{sanpham:!0}}}})})}getDathangList(){return p(this,arguments,function*(e={}){return yield this.findMany("dathang",C({orderBy:{createdAt:"desc"},include:{nhacungcap:!0,dathangsanpham:{include:{sanpham:!0}}}},e))})}getUserList(){return p(this,arguments,function*(e={}){return yield this.findMany("user",C({orderBy:{ten:"asc"},select:{id:!0,ten:!0,email:!0,sdt:!0,createdAt:!0,updatedAt:!0}},e))})}getUserById(e){return p(this,null,function*(){return yield this.findUnique("user",{id:e},{include:{profile:!0,userRole:{include:{role:!0}}}})})}static \u0275fac=function(t){return new(t||o)(le(vt))};static \u0275prov=se({token:o,factory:o.\u0275fac,providedIn:"root"})};var Yt=["drawer"],Kt=()=>({standalone:!0}),Qt=(o,e)=>e.key;function Jt(o,e){o&1&&(s(0,"div",37),h(1," \u26A0\uFE0F C\xF3 thay \u0111\u1ED5i ng\xE0y ch\u01B0a \u0111\u01B0\u1EE3c \xE1p d\u1EE5ng "),l())}function Wt(o,e){if(o&1){let t=R();s(0,"button",65),w("click",function(n){let r=x(t).$implicit;return u().toggleColumn(r),b(n.stopPropagation())}),s(1,"mat-icon"),h(2),l(),s(3,"span"),h(4),l()()}if(o&2){let t=e.$implicit;m(2),k(t.isShow?"check_box":"check_box_outline_blank"),m(2),k(t.value)}}function jt(o,e){if(o&1&&(s(0,"span",48),h(1),l()),o&2){let t=u();m(),ne(" \u{1F4C5} ",t.formatDateForDisplay(t.batdau,"DD/MM")," - ",t.formatDateForDisplay(t.ketthuc,"DD/MM")," ")}}function Xt(o,e){o&1&&(s(0,"span",85),h(1,"check"),l())}function Zt(o,e){o&1&&I(0,"span",86)}function ea(o,e){if(o&1&&(s(0,"span"),h(1),l()),o&2){let t=u().$implicit,a=u(2).$implicit,n=u();m(),k(n.formatDateForDisplay(t[a],"DD/MM/YYYY"))}}function ta(o,e){if(o&1&&(s(0,"span"),h(1),l()),o&2){let t=u().$implicit,a=u(2).$implicit,n=u();m(),k(n.formatDateForDisplay(t[a],"DD/MM/YYYY"))}}function aa(o,e){if(o&1&&(s(0,"span"),h(1),l()),o&2){let t=u().$implicit,a=u(2).$implicit,n=u();m(),k(n.formatDateForDisplay(t[a],"DD/MM/YYYY"))}}function na(o,e){if(o&1&&(s(0,"span"),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(P(2,1,t[a],"1.0-0"))}}function ia(o,e){if(o&1&&(s(0,"span"),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(P(2,1,t[a],"1.0-0"))}}function ra(o,e){if(o&1&&(s(0,"span"),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(P(2,1,t[a],"1.0-0"))}}function oa(o,e){if(o&1&&(s(0,"span"),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(P(2,1,t[a],"1.0-0"))}}function sa(o,e){if(o&1&&(s(0,"span"),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(P(2,1,t[a],"1.0-0"))}}function la(o,e){if(o&1&&(s(0,"span"),h(1),l()),o&2){let t=u().$implicit,a=u(3);m(),k(a.GetGoiy(t))}}function ca(o,e){if(o&1&&(s(0,"span"),h(1),l()),o&2){let t=u().$implicit,a=u(2).$implicit;m(),k(t[a]||"Tr\u1ED1ng")}}function ua(o,e){if(o&1){let t=R();s(0,"div",82),w("click",function(){let n=x(t).$implicit,r=u(2).$implicit,i=u();return b(i.ChosenItem(n,r))}),O(1,Xt,2,0,"span",83)(2,Zt,1,0,"span",84)(3,ea,2,1,"span")(4,ta,2,1,"span")(5,aa,2,1,"span")(6,na,3,4,"span")(7,ia,3,4,"span")(8,ra,3,4,"span")(9,oa,3,4,"span")(10,sa,3,4,"span")(11,la,2,1,"span")(12,ca,2,1,"span"),l()}if(o&2){let t,a=e.$implicit,n=u(2).$implicit,r=u();m(),T("ngIf",r.CheckItem(a)),m(),T("ngIf",!r.CheckItem(a)),m(),$((t=n)==="createdAt"?3:t==="updatedAt"?4:t==="ngaynhan"?5:t==="slton"?6:t==="slchogiao"?7:t==="slchonhap"?8:t==="SLDat"?9:t==="SLGiao"?10:t==="goiy"?11:12)}}function ha(o,e){if(o&1){let t=R();s(0,"th",68)(1,"div",25)(2,"span",69),h(3),l(),s(4,"span",70,7),h(6," filter_alt "),l()(),s(7,"mat-menu",71,10)(9,"div",72),w("click",function(n){return x(t),b(n.stopPropagation())}),s(10,"div",73)(11,"input",74),w("keyup",function(n){x(t);let r=u().$implicit,i=u();return b(i.doFilterHederColumn(n,r))}),l(),s(12,"div",18)(13,"span",19),h(14,"search"),l()()(),s(15,"div",75)(16,"div",76)(17,"span",77),w("click",function(){x(t);let n=u().$implicit,r=u();return b(r.ChosenAll(r.getCurrentFilteredData(n)))}),h(18),l(),s(19,"span",77),w("click",function(){x(t);let n=u(2);return b(n.EmptyFiter())}),h(20,"Xo\xE1"),l()(),s(21,"span",77),w("click",function(){x(t);let n=u(2);return b(n.ResetFilter())}),h(22,"Reset"),l()(),s(23,"div",78),O(24,ua,13,3,"div",79),l(),s(25,"div",80)(26,"button",81),w("click",function(){x(t);let n=S(5);return b(n.closeMenu())}),h(27,"\u0110\xF3ng"),l(),s(28,"button",62),w("click",function(){x(t);let n=S(5),r=u(2);return b(r.ApplyFilterColum(n))}),h(29,"\xC1p D\u1EE5ng"),l()()()()()}if(o&2){let t=S(8),a=u().$implicit,n=u();m(3),D(" ",n.ColumnName[a]," "),m(),ae("matTooltip","Filter ",n.ColumnName[a],""),T("matMenuTriggerFor",t),m(7),ae("placeholder","T\xECm ki\u1EBFm ",n.ColumnName[a],"..."),m(7),D(" Ch\u1ECDn T\u1EA5t C\u1EA3 (",n.getCurrentFilteredData(a).length||0,") "),m(6),T("ngForOf",n.getCurrentFilteredData(a))("ngForTrackBy",n.trackByFn)}}function ma(o,e){if(o&1&&(s(0,"span",88),h(1),l()),o&2){let t=u().index;m(),D(" ",t+1," ")}}function da(o,e){if(o&1&&(s(0,"span",89),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit;T("matTooltip",t[a]),m(),D(" ",t[a]," ")}}function pa(o,e){if(o&1&&(s(0,"span",90),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),D(" ",t[a]," ")}}function ga(o,e){if(o&1&&(s(0,"span",100),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u().$implicit;z("text-red-600",t[a]<=0)("text-green-600",t[a]>0),m(),D(" ",P(2,5,t[a],"1.0-0")," ")}}function fa(o,e){if(o&1&&(s(0,"span",92),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),D(" ",P(2,1,t[a],"1.0-0")," ")}}function _a(o,e){if(o&1&&(s(0,"span",93),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),D(" ",P(2,1,t[a],"1.0-0")," ")}}function ya(o,e){if(o&1&&(s(0,"span",94),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),D(" ",P(2,1,t[a],"1.0-0")," ")}}function Ca(o,e){if(o&1&&(s(0,"span",95),h(1),F(2,"number"),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),D(" ",P(2,1,t[a],"1.0-0")," ")}}function xa(o,e){if(o&1&&(s(0,"span",101),h(1),l()),o&2){let t=u().$implicit,a=u(2);z("text-red-600",a.parseFloat(a.GetGoiy(t))>0)("text-gray-400",a.parseFloat(a.GetGoiy(t))==0),m(),D(" ",a.GetGoiy(t)," ")}}function ba(o,e){if(o&1&&(s(0,"span",97),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit,n=u();m(),D(" ",n.formatDateForDisplay(t[a],"DD/MM/YYYY")," ")}}function wa(o,e){if(o&1&&(s(0,"span",97),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit,n=u();m(),D(" ",n.formatDateForDisplay(t[a],"DD/MM/YYYY")," ")}}function Ta(o,e){if(o&1&&(s(0,"span",97),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit,n=u();m(),D(" ",n.formatDateForDisplay(t[a],"DD/MM/YYYY")," ")}}function Da(o,e){o&1&&(s(0,"mat-icon",102),h(1,"check_circle"),l())}function ka(o,e){o&1&&(s(0,"mat-icon",103),h(1,"cancel"),l())}function Sa(o,e){if(o&1&&(s(0,"span",98),O(1,Da,2,0,"mat-icon",102)(2,ka,2,0,"mat-icon",103),l()),o&2){let t=u().$implicit,a=u().$implicit;m(),$(t[a]?1:2)}}function Ma(o,e){if(o&1&&(s(0,"span",99),h(1),l()),o&2){let t=u().$implicit,a=u().$implicit;T("matTooltip",t[a]),m(),D(" ",t[a]," ")}}function Ea(o,e){if(o&1&&(s(0,"td",87),O(1,ma,2,1,"span",88)(2,da,2,2,"span",89)(3,pa,2,1,"span",90)(4,ga,3,8,"span",91)(5,fa,3,4,"span",92)(6,_a,3,4,"span",93)(7,ya,3,4,"span",94)(8,Ca,3,4,"span",95)(9,xa,2,5,"span",96)(10,ba,2,1,"span",97)(11,wa,2,1,"span",97)(12,Ta,2,1,"span",97)(13,Sa,3,1,"span",98)(14,Ma,2,2,"span",99),l()),o&2){let t,a=u().$implicit;m(),$((t=a)==="STT"?1:t==="title"?2:t==="masp"?3:t==="slton"?4:t==="slchogiao"?5:t==="slchonhap"?6:t==="SLDat"?7:t==="SLGiao"?8:t==="goiy"?9:t==="createdAt"?10:t==="updatedAt"?11:t==="ngaynhan"?12:t==="isActive"?13:14)}}function va(o,e){if(o&1&&(me(0,51),O(1,ha,30,9,"th",66)(2,Ea,15,1,"td",67),de()),o&2){let t=e.$implicit;T("matColumnDef",t)}}function Fa(o,e){o&1&&I(0,"tr",104)}function Pa(o,e){if(o&1){let t=R();s(0,"tr",105),w("click",function(){let n=x(t).$implicit,r=u();return b(r.AddToEdit(n))}),l()}if(o&2){let t=e.$implicit,a=u();z("bg-slate-200",a.CheckItemInEdit(t))}}function Aa(o,e){if(o&1&&(s(0,"tr",106)(1,"td",107)(2,"div",108)(3,"mat-icon",109),h(4,"search_off"),l(),s(5,"span"),h(6,"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u"),l()()()()),o&2){let t=u();m(),ue("colspan",t.displayedColumns.length)}}function Oa(o,e){o&1&&(s(0,"mat-dialog-content")(1,"div",110)(2,"div",111),h(3,"X\xE1c Nh\u1EADn"),l(),s(4,"div"),h(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),l(),s(6,"div",112)(7,"button",113),h(8,"\u0110\u1ED3ng \xDD"),l(),s(9,"button",114),h(10,"Hu\u1EF7 B\u1ECF"),l()()()())}var V=class V{displayedColumns=["title","masp","dvt","mancc","name","slchonhap","goiy","slchogiao","sltontt","slton","kho1","kho2","kho3","kho4","kho5","kho6","haohut","slhaohut"];ColumnName={title:"T\xEAn S\u1EA3n Ph\u1EA9m",masp:"M\xE3 S\u1EA3n Ph\u1EA9m",dvt:"\u0110VT",mancc:"M\xE3 NCC",name:"T\xEAn Nh\xE0 Cung C\u1EA5p",slchonhap:"SL \u0110\u1EB7t (Ch\u1EDD Nh\u1EADp)",goiy:"SL C\u1EA7n \u0110\u1EB7t (G\u1EE3i \xDD)",slchogiao:"SL B\xE1n (Ch\u1EDD Giao)",sltontt:"T\u1ED3n Kho (Th\u1EF1c T\u1EBF)",slton:"T\u1ED3n Kho",kho1:"TG-LONG AN",kho2:"B\u1ED5 Sung",kho3:"TG-\u0110\xC0 L\u1EA0T",kho4:"KHO T\u1ED4NG - HCM",kho5:"SG1",kho6:"SG2",haohut:"T\u1EC9 L\u1EC7 Hao H\u1EE5t",slhaohut:"SL Hao H\u1EE5t"};FilterColumns=JSON.parse(localStorage.getItem("NhucauColFilter")||"[]");Columns=[];totalItems=0;pageSize=10;currentPage=1;totalPages=1;paginator;sort;drawer;_SanphamService=L(Pt);_breakpointObserver=L(ke);_GraphqlService=L(j);_router=L(De);_dialog=L(qe);_timezoneService=L(Ft);_snackBar=L(Pe);Listsanpham=this._SanphamService.ListSanpham;TonghopsFinal=[];EditList=[];dataSource=new ie;ListFilter=[];ListDathang=[];isSubmit=!1;quickFilter="all";globalFilterValue="";batdau=new Date;ketthuc=new Date;isDateRangeEnabled=!1;hasUnappliedDateChanges=!1;constructor(){ye(()=>{let e=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.dataSource.data=e,this.totalItems=e.length,this.calculateTotalPages()})}ngOnInit(){return p(this,null,function*(){let e=new Date;this.batdau=new Date(e),this.ketthuc=new Date(e),this.updateDisplayData(),this.loadDonhangWithRelations(),yield this._SanphamService.getNhucau(),this.dataSource=new ie(this.Listsanpham()),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=(t,a)=>{switch(a){case"slton":case"slchogiao":case"slchonhap":case"SLDat":case"SLGiao":case"kho1":case"kho2":case"kho3":case"kho4":case"kho5":case"kho6":case"haohut":case"slhaohut":return Number(t[a])||0;case"goiy":return parseFloat(this.GetGoiy(t));case"title":case"masp":case"dvt":case"mancc":case"name":case"makho":case"namekho":return t[a]?.toLowerCase()||"";default:return t[a]?.toString().toLowerCase()||""}},this.initializeColumns(),this.setupDrawer()})}GetGoiy(e){let t=e.slton||0,a=e.slchogiao||0,n=e.slchonhap||0,r=e.SLGiao||0;return Math.max(0,r+a-t-n).toFixed(0)}loadDonhangWithRelations(){return p(this,null,function*(){try{let e,t;if(this.isDateRangeEnabled&&this.batdau&&this.ketthuc){let c=this._timezoneService.getAPIDateRange(this.batdau,this.ketthuc);e=c.Batdau,t=c.Ketthuc}else{let c=new Date,g=this._timezoneService.getAPIDateRange(c,c);e=g.Batdau,t=g.Ketthuc}console.log(`Fetching data from ${e} to ${t}`);let[a,n,r]=yield Promise.all([this._GraphqlService.findAll("donhang",{enableParallelFetch:!0,batchSize:1e3,take:999999,aggressiveCache:!0,orderBy:{createdAt:"desc"},where:{ngaygiao:{gte:e,lte:t}},select:{id:!0,madonhang:!0,ngaygiao:!0,sanpham:{select:{giaban:!0,sldat:!0,slgiao:!0,slnhan:!0,sanpham:{select:{masp:!0}}}}}}),this._GraphqlService.findAll("dathang",{enableParallelFetch:!0,batchSize:1e3,take:999999,aggressiveCache:!0,orderBy:{createdAt:"desc"},where:{ngaynhan:{gte:e,lte:t}},select:{id:!0,madncc:!0,ngaynhan:!0,nhacungcap:{select:{name:!0,mancc:!0}},sanpham:{select:{sldat:!0,slgiao:!0,slnhan:!0,sanpham:{select:{masp:!0}}}},kho:{select:{name:!0,makho:!0}}}}),this._GraphqlService.findAll("tonkho",{enableParallelFetch:!0,aggressiveCache:!0,batchSize:1e3,take:999999,select:{id:!0,sanphamId:!0,slton:!0,slchogiao:!0,slchonhap:!0,sanpham:{select:{title:!0,masp:!0,dvt:!0,haohut:!0}}}})]),i=a.data.flatMap(c=>c.sanpham.map(g=>({type:"donhang",madonhang:c.madonhang,ngaygiao:c.ngaygiao,masp:g.sanpham.masp,giaban:Number(g.giaban)||0,sldat:Number(g.sldat)||0,slgiao:Number(g.slgiao)||0,slnhan:Number(g.slnhan)||0}))),d=n.data.flatMap(c=>c.sanpham.map(g=>({type:"dathang",madncc:c.madncc,mancc:c.nhacungcap.mancc,name:c.nhacungcap.name,ngaynhan:c.ngaynhan,masp:g.sanpham.masp,sldat:Number(g.sldat)||0,slgiao:Number(g.slgiao)||0,slnhan:Number(g.slnhan)||0,makho:c.kho.makho,namekho:c.kho.name}))),_=r.data.map(c=>({type:"tonkho",masp:c.sanpham.masp,title:c.sanpham.title,dvt:c.sanpham.dvt,haohut:c.sanpham.haohut||0,slton:Number(c.slton)||0,slchogiao:Number(c.slchogiao)||0,slchonhap:Number(c.slchonhap)||0}));console.log("Tonkhos",_);let f=new Map;_.forEach(c=>{f.set(c.masp,{id:nt(8,!1),ngaynhan:c.ngaynhan,mancc:c.mancc,name:c.name,masp:c.masp,title:c.title,dvt:c.dvt,haohut:c.haohut||0,slton:c.slton,slchogiao:c.slchogiao,slchonhap:c.slchonhap,SLDat:0,SLGiao:0})}),d.forEach(c=>{if(f.has(c.masp)){let g=f.get(c.masp);g.SLDat+=c.slnhan,g.ngaynhan=c.ngaynhan,g.mancc=c.mancc,g.name=c.name,g.makho=c.makho,g.namekho=c.namekho}}),i.forEach(c=>{if(f.has(c.masp)){let g=f.get(c.masp);g.SLGiao+=c.slnhan}});let y=Array.from(f.values());this.TonghopsFinal=this.convertData(y),this.dataSource.data=this.convertData(y),this.totalItems=y.length,console.log("TonghopsFinal:",this.TonghopsFinal),this.calculateTotalPages(),this.updateDisplayData()}catch(e){console.error("Error loading data:",e),this._snackBar.open("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}refresh(){return p(this,null,function*(){yield this._SanphamService.getAllSanpham(),yield this.loadDonhangWithRelations()})}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("NhucauColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDrawer(){this._breakpointObserver.observe([Se.Handset]).subscribe(e=>{e.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(a=>a.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}doFilterHederColumn(e,t){let a=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.dataSource.filteredData=a.filter(n=>n[t]?.toString().toLowerCase().includes(e.target.value.toLowerCase()))}applyAdvancedColumnFilter(e,t){let a=e.target.value.toLowerCase();if(!a){this.getCurrentFilteredData(t);return}let r=(this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham()).filter(i=>i[t]?.toString().toLowerCase().includes(a));this.dataSource.filteredData=r}ChosenItem(e,t){let a=this.dataSource.filteredData.filter(r=>r[t]===e[t]);this.ListFilter.filter(r=>r[t]===e[t]).length>0?this.ListFilter=this.ListFilter.filter(r=>r[t]!==e[t]):this.ListFilter=[...this.ListFilter,...a]}ChosenAll(e){e.forEach(t=>{this.ListFilter.find(n=>n.id===t.id)?this.ListFilter=this.ListFilter.filter(n=>n.id!==t.id):this.ListFilter.push(t)})}ResetFilter(){let e=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.ListFilter=e,this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(e){return!!this.ListFilter.find(t=>t.masp===e.masp||t.id===e.id)}ApplyFilterColum(e){let t=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.dataSource.data=t.filter(a=>this.ListFilter.some(n=>n.masp===a.masp)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,e.closeMenu()}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),localStorage.setItem("NhucauColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(a=>a.value.toLowerCase().includes(t))}AddToEdit(e){this.EditList.find(a=>a.masp===e.masp||a.id===e.id)?this.EditList=this.EditList.filter(a=>a.masp!==e.masp&&a.id!==e.id):this.EditList.push(e)}ChoseAllEdit(){let e=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.EditList=e}CheckItemInEdit(e){return this.EditList.some(t=>t.masp===e.masp||t.id===e.id)}onListDathangChange(e){this.isSubmit=e.isSubmit,this.ListDathang=e.ListDathang}ImporExcel(e){return p(this,null,function*(){let a=(yield Tt(e)).map(i=>({title:i.title?.trim()||"",masp:i.masp?.trim()||"",giagoc:Number(i.giagoc)||0,dvt:i.dvt?.trim()||"",soluong:Number(i.soluong)||0,soluongkho:Number(i.soluongkho)||0,haohut:Number(i.haohut)||0,ghichu:i.ghichu?.trim()||""})),n=Array.from(new Map(a.map(i=>[i.masp,i])).values()),r=this._SanphamService.ListSanpham();yield Promise.all(n.map(i=>p(this,null,function*(){let d=r.find(_=>_.masp===i.masp);if(d){let _=C(C({},d),i);yield this._SanphamService.updateSanpham(_)}else yield this._SanphamService.CreateSanpham(i)}))),yield Promise.all(r.filter(i=>!n.some(d=>d.masp===i.masp)).map(i=>this._SanphamService.updateSanpham(v(C({},i),{isActive:!1})))),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ExportExcel(e,t){return p(this,null,function*(){let a=e.map(i=>({title:i.title||"",masp:i.masp||"",mancc:i.mancc||"",name:i.name||"",makho:i.makho||"",namekho:i.namekho||"",slton:i.slton||0,slchogiao:i.slchogiao||0,slchonhap:i.slchonhap||0,SLDat:i.SLDat||0,SLGiao:i.SLGiao||0,goiy:i.goiy||0})),n={title:"T\xEAn S\u1EA3n Ph\u1EA9m",masp:"M\xE3 S\u1EA3n Ph\u1EA9m",dvt:"\u0110VT",mancc:"M\xE3 NCC",name:"T\xEAn Nh\xE0 Cung C\u1EA5p",slchonhap:"SL \u0110\u1EB7t (Ch\u1EDD Nh\u1EADp)",goiy:"SL C\u1EA7n \u0110\u1EB7t (G\u1EE3i \xDD)",slchogiao:"SL B\xE1n (Ch\u1EDD Giao)",sltontt:"T\u1ED3n Kho (Th\u1EF1c T\u1EBF)",slton:"T\u1ED3n Kho",kho1:"TG-LONG AN",kho2:"B\u1ED5 Sung",kho3:"TG-\u0110\xC0 L\u1EA0T",kho4:"KHO T\u1ED4NG - HCM",kho5:"SG1",kho6:"SG2",haohut:"T\u1EC9 L\u1EC7 Hao H\u1EE5t",slhaohut:"SL Hao H\u1EE5t"},r=this.convertData(a);wt(r,t,Object.values(n),n)})}convertData(e){let t=[{name:"kho1",label:"TG-LONG AN"},{name:"kho2",label:"B\u1ED5 Sung"},{name:"kho3",label:"TG-\u0110\xC0 L\u1EA0T"},{name:"kho4",label:"KHO T\u1ED4NG - HCM"},{name:"kho5",label:"SG1"},{name:"kho6",label:"SG2"}];return e.map(a=>{let n=C({},a);t.forEach(i=>{n[i.name]="0"});let r=t.find(i=>i.label===a.namekho);return r&&(n[r.name]=a.slchonhap||"0"),n})}trackByFn(e,t){return t.masp||t.id}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e,t){let a=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();e>a.length?(this.pageSize=a.length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${a.length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=e,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),t.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let e=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham(),t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize,n=e.slice(t,a);this.dataSource.data=n}getCurrentFilteredData(e){let t=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham(),a=new Map;return t.forEach(n=>{let r=n[e];a.has(r)||a.set(r,n)}),Array.from(a.values())}parseFloat(e){return parseFloat(e)||0}applyQuickFilter(e){this.quickFilter=e;let t=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();switch(e){case"lowStock":t=t.filter(a=>(a.slton||0)<=10);break;case"needOrder":t=t.filter(a=>parseFloat(this.GetGoiy(a))>0);break;case"pendingDelivery":t=t.filter(a=>(a.slchogiao||0)>0);break;case"all":default:break}this.globalFilterValue&&(t=this.applyGlobalFilterToData(t,this.globalFilterValue)),this.dataSource.data=t,this.totalItems=t.length,this.calculateTotalPages(),this.currentPage=1,this.updateDisplayData()}applyGlobalFilter(e){let t=e.target.value;this.globalFilterValue=t;let a=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();if(this.quickFilter!=="all"){this.applyQuickFilter(this.quickFilter);return}t&&(a=this.applyGlobalFilterToData(a,t)),this.dataSource.data=a,this.totalItems=a.length,this.calculateTotalPages(),this.currentPage=1,this.updateDisplayData()}applyGlobalFilterToData(e,t){let a=t.trim().toLowerCase();return e.filter(n=>n.title?.toLowerCase().includes(a)||n.masp?.toLowerCase().includes(a)||n.name?.toLowerCase().includes(a)||n.mancc?.toLowerCase().includes(a))}sortData(e){let t=this.dataSource.data.slice();if(!e.active||e.direction===""){this.dataSource.data=t;return}this.dataSource.data=t.sort((a,n)=>{let r=e.direction==="asc";switch(e.active){case"title":case"masp":return this.compareStrings(a[e.active],n[e.active],r);case"slton":case"slchogiao":case"slchonhap":case"SLDat":case"SLGiao":return this.compareNumbers(Number(a[e.active])||0,Number(n[e.active])||0,r);case"goiy":return this.compareNumbers(parseFloat(this.GetGoiy(a)),parseFloat(this.GetGoiy(n)),r);default:return this.compareStrings(a[e.active],n[e.active],r)}})}compareStrings(e,t,a){return(e<t?-1:1)*(a?1:-1)}compareNumbers(e,t,a){return(e-t)*(a?1:-1)}clearAllFilters(){this.quickFilter="all",this.globalFilterValue="",this.ListFilter=[];let e=this.TonghopsFinal.length>0?this.TonghopsFinal:this.Listsanpham();this.dataSource.data=e,this.totalItems=e.length,this.calculateTotalPages(),this.currentPage=1,this.updateDisplayData(),document.querySelectorAll('input[type="text"]').forEach(a=>{a.placeholder.includes("T\xECm ki\u1EBFm")&&(a.value="")})}toggleDateRangeFilter(){if(this.isDateRangeEnabled=!this.isDateRangeEnabled,this.hasUnappliedDateChanges=!1,this.isDateRangeEnabled){let e=new Date;this.batdau=new Date(e),this.ketthuc=new Date(e),this.loadDonhangWithRelations()}else this.loadDonhangWithRelations()}applyDateFilter(e){if(this.isDateRangeEnabled||(this.isDateRangeEnabled=!0),!this.batdau||!this.ketthuc){this._snackBar.open("Vui l\xF2ng ch\u1ECDn kho\u1EA3ng th\u1EDDi gian h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(this.batdau>this.ketthuc){this._snackBar.open("Ng\xE0y b\u1EAFt \u0111\u1EA7u kh\xF4ng th\u1EC3 sau ng\xE0y k\u1EBFt th\xFAc","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.hasUnappliedDateChanges=!1,this.loadDonhangWithRelations(),this._snackBar.open("\u0110\xE3 \xE1p d\u1EE5ng b\u1ED9 l\u1ECDc ng\xE0y","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),e.closeMenu()}onStartDateChange(e){this.batdau=e.value,this.batdau>this.ketthuc&&(this.ketthuc=new Date(this.batdau)),this.hasUnappliedDateChanges=!0}onEndDateChange(e){this.ketthuc=e.value,this.ketthuc<this.batdau&&(this.batdau=new Date(this.ketthuc)),this.hasUnappliedDateChanges=!0}setToday(e){let t=new Date;this.batdau=new Date(t),this.ketthuc=new Date(t),this.applyDateFilter(e)}setThisWeek(e){let t=new Date,a=new Date(t);a.setDate(t.getDate()-t.getDay());let n=new Date(a);n.setDate(a.getDate()+6),this.batdau=new Date(a),this.ketthuc=new Date(n),this.applyDateFilter(e)}setThisMonth(e){let t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);this.batdau=new Date(a),this.ketthuc=new Date(n),this.applyDateFilter(e)}clearDateFilter(){this.isDateRangeEnabled=!1,this.hasUnappliedDateChanges=!1;let e=new Date;this.batdau=new Date(e),this.ketthuc=new Date(e),this.loadDonhangWithRelations(),this._snackBar.open("\u0110\xE3 x\xF3a b\u1ED9 l\u1ECDc ng\xE0y","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}formatDateForDisplay(e,t="DD/MM/YYYY"){return this._timezoneService.formatForDisplay(e,t)}convertFormDateToUTC(e){return this._timezoneService.formDateToUTC(e)}parseUserDateInput(e,t="YYYY-MM-DD"){try{return this._timezoneService.parseUserInputToUTC(e,t)}catch(a){return console.error("Invalid date format:",a),""}}static \u0275fac=function(t){return new(t||V)};static \u0275cmp=ce({type:V,selectors:[["app-nhucaudathang"]],viewQuery:function(t,a){if(t&1&&(U(ot,5),U(W,5),U(Yt,7)),t&2){let n;q(n=Y())&&(a.paginator=n.first),q(n=Y())&&(a.sort=n.first),q(n=Y())&&(a.drawer=n.first)}},decls:118,vars:35,consts:[["drawer",""],["dateMenuTrigger","matMenuTrigger"],["dateMenu","matMenu"],["startPicker",""],["endPicker",""],["menu","matMenu"],["uploadfile",""],["menuTrigger","matMenuTrigger"],["menuHienthi","matMenu"],["DeleteDialog",""],["filterMenu","matMenu"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],[1,"border","p-1","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm ki\u1EBFm s\u1EA3n ph\u1EA9m, m\xE3 s\u1EA3n ph\u1EA9m...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["matTooltip","L\u1ECDc theo ng\xE0y","mat-icon-button","","color","primary","aria-label","Date filter menu",3,"matMenuTriggerFor"],[1,"date-filter-menu"],[1,"p-4",3,"click"],[1,"flex","flex-col","space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-semibold"],[1,"flex","flex-col","space-y-3"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","readonly","","placeholder","Ch\u1ECDn ng\xE0y b\u1EAFt \u0111\u1EA7u",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","readonly","","placeholder","Ch\u1ECDn ng\xE0y k\u1EBFt th\xFAc",3,"ngModelChange","dateChange","matDatepicker","ngModel"],[1,"flex","flex-wrap","gap-2"],["mat-stroked-button","","color","primary",1,"text-xs",3,"click"],["mat-stroked-button","","color","warn",1,"text-xs",3,"click"],[1,"flex","justify-center"],["mat-raised-button","",1,"w-full",3,"click","color"],[1,"text-xs","text-orange-600","bg-orange-50","p-2","rounded","text-center"],[1,"text-sm","text-gray-600","bg-gray-50","p-2","rounded"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200",3,"click"],[1,"ml-2","px-2","py-1","bg-blue-100","text-blue-800","rounded","text-xs"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","","class","bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:bg-slate-100 transition-colors duration-200",3,"bg-slate-200","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","cursor-pointer",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-32","line-clamp-2","me-2"],[1,"z-10","material-symbols-outlined","text-gray-500","cursor-pointer",3,"matMenuTriggerFor","matTooltip"],[1,"filter-menu"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup","placeholder"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline","cursor-pointer",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100 cursor-pointer",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100","cursor-pointer",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],["class","w-6",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],[1,"w-6"],["mat-cell","",1,"cursor-pointer"],[1,"max-w-16","line-clamp-1"],[1,"max-w-48","line-clamp-2",3,"matTooltip"],[1,"max-w-32","line-clamp-1","font-mono","text-sm"],[1,"max-w-20","line-clamp-1","text-end","font-semibold",3,"text-red-600","text-green-600"],[1,"max-w-20","line-clamp-1","text-end","text-orange-600","font-semibold"],[1,"max-w-20","line-clamp-1","text-end","text-blue-600","font-semibold"],[1,"max-w-20","line-clamp-1","text-end","text-purple-600","font-semibold"],[1,"max-w-20","line-clamp-1","text-end","text-indigo-600","font-semibold"],[1,"max-w-20","line-clamp-1","text-end","font-bold",3,"text-red-600","text-gray-400"],[1,"max-w-28","line-clamp-1","text-sm"],[1,"max-w-16","line-clamp-1","text-center"],[1,"max-w-32","line-clamp-2",3,"matTooltip"],[1,"max-w-20","line-clamp-1","text-end","font-semibold"],[1,"max-w-20","line-clamp-1","text-end","font-bold"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row","",1,"bg-gray-50"],["mat-row","",1,"hover:bg-slate-100","transition-colors","duration-200",3,"click"],[1,"mat-row"],[1,"mat-cell","p-8","text-center","text-gray-500"],[1,"flex","flex-col","items-center","space-y-2"],[1,"text-4xl","text-gray-300"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"]],template:function(t,a){if(t&1){let n=R();s(0,"mat-drawer-container",11)(1,"mat-drawer",12,0),I(3,"router-outlet"),l(),s(4,"div",13)(5,"div",14)(6,"div",15)(7,"div",16)(8,"input",17),w("keyup",function(i){return x(n),b(a.applyGlobalFilter(i))}),l(),s(9,"div",18)(10,"span",19),h(11,"search"),l()()(),s(12,"button",20)(13,"mat-icon"),h(14,"tune"),l()(),s(15,"button",21,1)(17,"mat-icon"),h(18,"date_range"),l()(),s(19,"mat-menu",22,2)(21,"div",23),w("click",function(i){return x(n),b(i.stopPropagation())}),s(22,"div",24)(23,"div",25)(24,"span",26),h(25,"L\u1ECDc theo kho\u1EA3ng th\u1EDDi gian"),l()(),s(26,"div",27)(27,"mat-form-field",28)(28,"mat-label"),h(29,"T\u1EEB ng\xE0y"),l(),s(30,"input",29),J("ngModelChange",function(i){return x(n),Q(a.batdau,i)||(a.batdau=i),b(i)}),w("dateChange",function(i){return x(n),b(a.onStartDateChange(i))}),l(),I(31,"mat-datepicker-toggle",30)(32,"mat-datepicker",null,3),l(),s(34,"mat-form-field",28)(35,"mat-label"),h(36,"\u0110\u1EBFn ng\xE0y"),l(),s(37,"input",31),J("ngModelChange",function(i){return x(n),Q(a.ketthuc,i)||(a.ketthuc=i),b(i)}),w("dateChange",function(i){return x(n),b(a.onEndDateChange(i))}),l(),I(38,"mat-datepicker-toggle",30)(39,"mat-datepicker",null,4),l(),s(41,"div",32)(42,"button",33),w("click",function(){x(n);let i=S(16);return b(a.setToday(i))}),h(43," H\xF4m nay "),l(),s(44,"button",33),w("click",function(){x(n);let i=S(16);return b(a.setThisWeek(i))}),h(45," Tu\u1EA7n n\xE0y "),l(),s(46,"button",33),w("click",function(){x(n);let i=S(16);return b(a.setThisMonth(i))}),h(47," Th\xE1ng n\xE0y "),l(),s(48,"button",34),w("click",function(){return x(n),b(a.clearDateFilter())}),h(49," X\xF3a l\u1ECDc "),l()(),s(50,"div",35)(51,"button",36),w("click",function(){x(n);let i=S(16);return b(a.applyDateFilter(i))}),s(52,"mat-icon"),h(53),l(),h(54),l()(),O(55,Jt,2,0,"div",37),s(56,"div",38)(57,"strong"),h(58,"Kho\u1EA3ng th\u1EDDi gian:"),l(),I(59,"br"),h(60),l()()()()(),s(61,"mat-menu",null,5)(63,"div",39)(64,"mat-form-field",40)(65,"input",41),w("input",function(i){return x(n),b(a.doFilterColumns(i))})("click",function(i){return x(n),b(i.stopPropagation())}),l(),s(66,"mat-icon",42),h(67,"search"),l()()(),s(68,"div",43),ee(69,Wt,5,2,"button",44,Qt),l()(),s(71,"button",45),w("click",function(){return x(n),b(a.ExportExcel(a.TonghopsFinal,"Tonghop"))}),s(72,"mat-icon"),h(73,"file_download"),l()(),s(74,"input",46,6),w("change",function(i){return x(n),b(a.ImporExcel(i))}),l(),s(76,"span",47),w("click",function(){return x(n),a.pageSize=a.TonghopsFinal.length,b(a.updateDisplayData())}),h(77),O(78,jt,2,2,"span",48),l()()(),s(79,"div",49)(80,"table",50),ee(81,va,3,1,"ng-container",51,he),O(83,Fa,1,0,"tr",52)(84,Pa,1,2,"tr",53)(85,Aa,7,1,"tr",54),l()(),s(86,"div",55)(87,"div",56)(88,"span",57),h(89,"\u0110ang Xem "),s(90,"strong"),h(91),l(),h(92," - "),s(93,"strong"),h(94),l(),h(95),l(),s(96,"div",58)(97,"span",59,7),h(99),l(),s(100,"mat-menu",null,8)(102,"div",60),w("click",function(i){return x(n),b(i.stopPropagation())}),s(103,"span"),h(104,"S\u1ED1 L\u01B0\u1EE3ng"),l(),s(105,"mat-form-field",28)(106,"input",61),J("ngModelChange",function(i){return x(n),Q(a.pageSize,i)||(a.pageSize=i),b(i)}),l()(),s(107,"button",62),w("click",function(){x(n);let i=S(101);return b(a.onPageSizeChange(a.pageSize,i))}),h(108,"\xC1p D\u1EE5ng"),l()()(),s(109,"div",63)(110,"button",64),w("click",function(){return x(n),b(a.onPreviousPage())}),s(111,"mat-icon"),h(112,"keyboard_arrow_left"),l()(),s(113,"button",64),w("click",function(){return x(n),b(a.onNextPage())}),s(114,"mat-icon"),h(115,"keyboard_arrow_right"),l()()()()()()()(),O(116,Oa,11,0,"ng-template",null,9,fe)}if(t&2){let n=S(20),r=S(33),i=S(40),d=S(62),_=S(101);m(),T("position","end"),m(11),T("matMenuTriggerFor",d),m(3),T("matMenuTriggerFor",n),m(2),z("text-blue-600",a.isDateRangeEnabled),m(13),T("matDatepicker",r),K("ngModel",a.batdau),m(),T("for",r),m(6),T("matDatepicker",i),K("ngModel",a.ketthuc),m(),T("for",i),m(13),T("color",a.hasUnappliedDateChanges?"warn":"primary"),m(2),k(a.hasUnappliedDateChanges?"pending":"filter_alt"),m(),D(" ",a.hasUnappliedDateChanges?"C\xF3 thay \u0111\u1ED5i - \xC1p d\u1EE5ng":"\xC1p d\u1EE5ng l\u1ECDc"," "),m(),$(a.hasUnappliedDateChanges?55:-1),m(5),ne(" ",a.formatDateForDisplay(a.batdau,"DD/MM/YYYY")," - ",a.formatDateForDisplay(a.ketthuc,"DD/MM/YYYY")," "),m(9),te(a.FilterColumns),m(8),D(" ",a.TonghopsFinal.length>0?a.TonghopsFinal.length:a.Listsanpham().length," S\u1EA3n Ph\u1EA9m "),m(),$(a.isDateRangeEnabled?78:-1),m(2),T("dataSource",a.dataSource),m(),te(a.displayedColumns),m(2),T("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),m(),T("matRowDefColumns",a.displayedColumns),m(7),k((a.currentPage-1)*a.pageSize+1),m(3),k(a.currentPage*a.pageSize>a.totalItems?a.totalItems:a.currentPage*a.pageSize),m(),pe(" trong s\u1ED1 ",a.totalItems," m\u1EE5c, ",a.currentPage,"/",a.totalPages," Trang"),m(2),T("matMenuTriggerFor",_),m(2),D("Hi\u1EC7n Th\u1ECB : ",a.pageSize," m\u1EE5c"),m(7),K("ngModel",a.pageSize),T("ngModelOptions",ge(34,Kt)),m(4),T("disabled",a.currentPage===1),m(3),T("disabled",a.currentPage===a.totalPages)}},dependencies:[Ze,Xe,Je,We,je,tt,et,bt,ut,mt,ft,dt,ht,_t,pt,gt,yt,Ct,xt,ct,W,lt,st,Be,Re,$e,Ve,Ne,Ae,Oe,Te,Ie,Le,Fe,Ee,ve,at,we,Ce,xe,be,Ue,ze,Ge,He,rt,it,Qe,Ye,Ke,Mt,Dt,kt,St,Me,Et],styles:[".mat-mdc-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.mat-mdc-header-cell[_ngcontent-%COMP%]{padding:8px 12px;position:sticky;top:0;background:#f8fafc;border-bottom:2px solid #e2e8f0;font-weight:600;z-index:10}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 12px;border-bottom:1px solid #e2e8f0;vertical-align:middle}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;transition:background-color .2s ease}.quick-filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;align-items:center}.quick-filter-button[_ngcontent-%COMP%]{padding:4px 12px;font-size:12px;min-height:32px;border-radius:16px}.quick-filter-button.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.filter-menu[_ngcontent-%COMP%]{max-width:400px}.date-filter-menu[_ngcontent-%COMP%]{max-width:350px}.date-filter-menu[_ngcontent-%COMP%]   .mat-mdc-menu-content[_ngcontent-%COMP%]{padding:0!important}.date-range-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;background-color:#dbeafe;color:#1e40af;border-radius:12px;font-size:11px;font-weight:500;margin-left:8px}.mat-mdc-form-field.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#fff}.date-range-status[_ngcontent-%COMP%]{background-color:#f1f5f9;border:1px solid #e2e8f0;border-radius:6px;padding:8px;font-size:12px;color:#475569}.quick-date-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.quick-date-buttons[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{font-size:11px;min-width:auto;padding:4px 8px;height:28px;line-height:20px}.filter-menu[_ngcontent-%COMP%]   .mat-mdc-menu-content[_ngcontent-%COMP%]{padding:0}.filter-search-input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px}.filter-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f61a}.filter-options[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.filter-option[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;display:flex;align-items:center;gap:8px;border-radius:4px;margin:2px 4px}.filter-option[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.filter-option.selected[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1d4ed8}.column-filter-icon[_ngcontent-%COMP%]{opacity:.6;transition:opacity .2s ease;cursor:pointer}.column-filter-icon[_ngcontent-%COMP%]:hover{opacity:1;color:#3b82f6}@media (max-width: 768px){.mat-mdc-header-cell[_ngcontent-%COMP%], .mat-mdc-cell[_ngcontent-%COMP%]{padding:6px 8px;font-size:13px}.quick-filter-buttons[_ngcontent-%COMP%]{gap:4px}.quick-filter-button[_ngcontent-%COMP%]{padding:3px 8px;font-size:11px;min-height:28px}}.status-low-stock[_ngcontent-%COMP%]{color:#dc2626;font-weight:600}.status-normal-stock[_ngcontent-%COMP%]{color:#059669;font-weight:600}.status-pending[_ngcontent-%COMP%]{color:#d97706;font-weight:600}.status-suggestion[_ngcontent-%COMP%]{color:#7c3aed;font-weight:600}.mat-mdc-row[_ngcontent-%COMP%]{transition:all .2s ease}.mat-mdc-row.filtered-out[_ngcontent-%COMP%]{opacity:.5;transform:scale(.98)}.search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#6b7280;z-index:1}.search-input[_ngcontent-%COMP%]{padding-left:40px}.pagination-info[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.filter-badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;background:#dc2626;color:#fff;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.filter-options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}"]})};Z([Ot(300)],V.prototype,"doFilterHederColumn",1),Z([Ot(300)],V.prototype,"applyAdvancedColumnFilter",1);var At=V;function Ot(o=300){return function(e,t,a){let n=a.value,r;return a.value=function(...i){clearTimeout(r),r=setTimeout(()=>{n.apply(this,i)},o)},a}}export{At as NhucaudathangComponent};
