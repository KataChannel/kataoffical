import './polyfills.server.mjs';
import{a as pe}from"./chunk-K2NCIZBP.mjs";import{a as de}from"./chunk-UYAGGSFQ.mjs";import{a as me}from"./chunk-7TPFT6TB.mjs";import"./chunk-DLEZTIB3.mjs";import"./chunk-XUXXP65Q.mjs";import"./chunk-MGIVCIKU.mjs";import"./chunk-SJXCJ4EE.mjs";import{b as ce}from"./chunk-PDY6LHRJ.mjs";import"./chunk-PDYHWB5Z.mjs";import"./chunk-2AYNMI3K.mjs";import"./chunk-64RRZM6O.mjs";import"./chunk-RDAJFB6V.mjs";import{a as se,b as ue}from"./chunk-2H336DU6.mjs";import"./chunk-G54VAO3Z.mjs";import"./chunk-VSO7WSR7.mjs";import"./chunk-426VDCEE.mjs";import"./chunk-AXTOB7VR.mjs";import"./chunk-NS2ZSJWG.mjs";import{c as J,d as Q,f as Y,h as Z}from"./chunk-4SHRWVJ5.mjs";import"./chunk-WWP3OL7Z.mjs";import{a as ae,b as le}from"./chunk-XPUQKLY4.mjs";import"./chunk-YMINJVA6.mjs";import"./chunk-HCOIDBD4.mjs";import"./chunk-CREX4RSV.mjs";import"./chunk-WZNDKZHB.mjs";import{b as ne,c as oe}from"./chunk-NMLXEZ3L.mjs";import{b as $,d as ee,g as te,h as ie}from"./chunk-K44DF5ZO.mjs";import{b as G,f as K,i as X,o as q}from"./chunk-4ZTCAIG4.mjs";import{a as U,b as H}from"./chunk-OQD74SFW.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-CHLRJVWI.mjs";import{c as re}from"./chunk-7UTXGE6W.mjs";import"./chunk-BWD6V7B5.mjs";import"./chunk-KANEWG3T.mjs";import{b as O}from"./chunk-KIBINQT2.mjs";import"./chunk-RBBE3QCJ.mjs";import"./chunk-2CGNFEBQ.mjs";import{c as j,f as z,h as N}from"./chunk-N7BUB3PW.mjs";import"./chunk-5YK36DL6.mjs";import{a as P}from"./chunk-7G3V73VQ.mjs";import"./chunk-GRF7MZJE.mjs";import{a as A,d as W}from"./chunk-ZOTJUA4F.mjs";import{l as V,m as L,s as B}from"./chunk-UOIAS6J6.mjs";import{Ac as x,Bb as F,Ec as R,Fc as D,Gc as y,Hb as C,Ma as w,Rc as I,Tb as m,bc as i,cc as o,dc as b,ec as E,fc as v,hc as h,ka as _,lb as M,lc as f,mc as u,nd as T,ob as c,ta as d,ua as p,yc as k,zc as a}from"./chunk-KOT4CA75.mjs";import"./chunk-XAZRL6IZ.mjs";import{j as g}from"./chunk-RIAI3ORJ.mjs";function _e(l,t){if(l&1){let e=h();i(0,"button",2),f("click",function(){d(e);let n=u();return p(n.handleResourceAction())}),i(1,"mat-icon"),a(2,"save"),o()()}}function fe(l,t){if(l&1){let e=h();i(0,"button",2),f("click",function(){d(e);let n=u();return p(n.toggleEdit())}),i(1,"mat-icon"),a(2,"edit"),o()()}}function he(l,t){if(l&1){let e=h();E(0),i(1,"div",9)(2,"div",10),a(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),i(4,"div",11)(5,"button",12),f("click",function(){d(e);let n=u();return p(n.DeleteData())}),a(6,"\u0110\u1ED3ng \xDD"),o(),i(7,"button",13),f("click",function(){d(e);let n=u();return p(n.toggleDelete())}),a(8,"Hu\u1EF7 B\u1ECF"),o()()(),v()}}function Ce(l,t){if(l&1&&(E(0),b(1,"img",28),v()),l&2){let e=u(2);c(),m("src",e.ImageURL+"/"+e.DetailResource().url,M)}}function xe(l,t){if(l&1){let e=h();E(0),i(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),a(4,"Ti\xEAu \u0110\u1EC1"),o(),i(5,"input",16),y("ngModelChange",function(n){d(e);let s=u();return D(s.DetailResource().title,n)||(s.DetailResource().title=n),p(n)}),o()(),i(6,"mat-form-field",15)(7,"mat-label"),a(8,"Danh M\u1EE5c"),o(),i(9,"mat-select",17),y("ngModelChange",function(n){d(e);let s=u();return D(s.DetailResource().category,n)||(s.DetailResource().category=n),p(n)}),i(10,"mat-option"),a(11,"--Ch\u1ECDn Danh M\u1EE5c--"),o(),i(12,"mat-option",18),a(13,"Banner"),o(),i(14,"mat-option",19),a(15,"Social Media"),o(),i(16,"mat-option",20),a(17,"Email"),o(),i(18,"mat-option",21),a(19,"Video"),o()()(),i(20,"div",22),C(21,Ce,2,1,"ng-container",8),i(22,"mat-form-field",23)(23,"mat-label"),a(24,"Li\xEAn k\u1EBFt"),o(),i(25,"input",24),y("ngModelChange",function(n){d(e);let s=u();return D(s.DetailResource().url,n)||(s.DetailResource().url=n),p(n)}),o(),i(26,"button",25),f("click",function(){d(e);let n=u(),s=k(15);return p(n.openChosenFileDialog(s))}),i(27,"mat-icon"),a(28,"upload"),o()()()(),i(29,"mat-form-field",26)(30,"mat-label"),a(31,"M\xF4 T\u1EA3"),o(),i(32,"textarea",27),y("ngModelChange",function(n){d(e);let s=u();return D(s.DetailResource().description,n)||(s.DetailResource().description=n),p(n)}),o()()(),v()}if(l&2){let e=u();c(5),R("ngModel",e.DetailResource().title),m("disabled",!e.isEdit()),c(4),R("ngModel",e.DetailResource().category),c(12),m("ngIf",e.DetailResource().url),c(4),R("ngModel",e.DetailResource().url),m("disabled",!e.isEdit()),c(),m("disabled",!e.isEdit()),c(6),R("ngModel",e.DetailResource().description),m("disabled",!e.isEdit())}}function Re(l,t){if(l&1){let e=h();i(0,"div",33)(1,"div",34),f("click",function(){let n=d(e).$implicit,s=u(2);return p(s.handleChooseFile(n))}),b(2,"img",28),i(3,"div",35),a(4),o(),i(5,"div",36),a(6),o(),i(7,"div",36),a(8),o()()()}if(l&2){let e=t.$implicit,r=u(2);c(2),m("src",r.ImageURL+"/"+e.url,M),c(2),x(e.title),c(2),x(e.fileType),c(2),x(e.fileSize)}}function De(l,t){if(l&1&&(i(0,"mat-dialog-content",29)(1,"button",30)(2,"mat-icon"),a(3,"close"),o()(),i(4,"div",3),a(5,"File Manager"),o(),i(6,"div",31),C(7,Re,9,4,"div",32),o()()),l&2){let e=u();c(7),m("ngForOf",e.ListFilemanager())}}var ge=class l{_ListResourceComponent=_(de);_ResourceService=_(me);_FilemanagerService=_(pe);_route=_(A);_router=_(W);_snackBar=_(O);ListFilemanager=this._FilemanagerService.ListFilemanager;ImageURL=P.ImageURL;constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");this._ResourceService.setResourceId(e)}),T(()=>g(this,null,function*(){yield this._FilemanagerService.getFilemanagerBy({group:"timona"});let t=this._ResourceService.resourceId();t||(this._router.navigate(["/admin/resource"]),this._ListResourceComponent.drawer.close()),t==="new"?(this.DetailResource.set({}),this._ListResourceComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/resource","new"])):(yield this._ResourceService.getResourceBy({id:t,isOne:!0}),this._ListResourceComponent.drawer.open(),this._router.navigate(["/admin/resource",t]))}))}DetailResource=this._ResourceService.DetailResource;isEdit=w(!1);isDelete=w(!1);resourceId=this._ResourceService.resourceId;ngOnInit(){return g(this,null,function*(){})}_dialog=_(J);openChosenFileDialog(t){return g(this,null,function*(){console.log("ListFM",this.ListFilemanager()),this._dialog.open(t,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(r=>{})})}handleChooseFile(t){return g(this,null,function*(){yield this.DetailResource.update(e=>(e.url=t.url,e)),t&&this._dialog.closeAll()})}handleResourceAction(){return g(this,null,function*(){this.resourceId()==="new"?yield this.createResource():yield this.updateResource()})}createResource(){return g(this,null,function*(){try{yield this._ResourceService.CreateResource(this.DetailResource()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o resource:",t)}})}updateResource(){return g(this,null,function*(){try{yield this._ResourceService.updateResource(this.DetailResource()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt resource:",t)}})}DeleteData(){return g(this,null,function*(){try{yield this._ResourceService.DeleteResource(this.DetailResource()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/resource"])}catch(t){console.error("L\u1ED7i khi x\xF3a resource:",t)}})}goBack(){this._router.navigate(["/admin/resource"]),this._ListResourceComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailResource.update(t=>(t.slug=ce(t.title),t))}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=F({type:l,selectors:[["app-detailresource"]],decls:16,vars:8,consts:[["ChosenFileDialog",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel"],["value","banner"],["value","socialmedia"],["value","email"],["value","video"],[1,"col-span-2","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","",3,"ngModelChange","ngModel","disabled"],["matIconSuffix","","mat-icon-button","","color","primary",3,"click","disabled"],["appearance","outline",1,"lg:col-span-2"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xF4 T\u1EA3",3,"ngModelChange","ngModel","disabled"],["alt","File Image",1,"w-32","h-32","object-cover","rounded-lg",3,"src"],[1,"relative","!h-screen","!max-h-screen","w-screen","flex","flex-col","space-y-8","items-center","justify-center"],["mat-dialog-close","false","mat-icon-button","",1,"!absolute","top-0","right-0"],[1,"grid","lg:grid-cols-4","md:grid-cols-2","grid-cols-1","gap-4"],["class","cursor-pointer",4,"ngFor","ngForOf"],[1,"cursor-pointer"],[1,"flex","flex-col","space-y-2","items-center","justify-center","hover:bg-gray-100","border","p-2","rounded-lg",3,"click"],[1,"text-sm","font-bold"],[1,"text-sm"]],template:function(e,r){if(e&1){let n=h();i(0,"div",1)(1,"button",2),f("click",function(){return d(n),p(r.goBack())}),i(2,"mat-icon"),a(3,"arrow_back"),o()(),i(4,"div",3),a(5),o(),i(6,"div",4)(7,"mat-slide-toggle",5),y("ngModelChange",function(S){return d(n),D(r.DetailResource().isActive,S)||(r.DetailResource().isActive=S),p(S)}),a(8),o(),C(9,_e,3,0,"button",6)(10,fe,3,0,"button",6),o()(),i(11,"div",7),C(12,he,9,0,"ng-container",8)(13,xe,33,9,"ng-container",8),o(),C(14,De,8,1,"ng-template",null,0,I)}if(e&2){let n;c(5),x(((n=r.DetailResource())==null?null:n.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),c(2),R("ngModel",r.DetailResource().isActive),m("disabled",!r.isEdit()),c(),x(r.DetailResource().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),c(),m("ngIf",r.isEdit()),c(),m("ngIf",!r.isEdit()),c(2),m("ngIf",r.isDelete()),c(),m("ngIf",!r.isDelete())}},dependencies:[ie,te,$,ee,oe,ne,q,G,K,X,H,U,N,z,j,le,ae,re,Z,Q,Y,B,V,L,ue,se],encapsulation:2})};export{ge as DetailResourceComponent};
