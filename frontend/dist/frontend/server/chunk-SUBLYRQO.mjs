import './polyfills.server.mjs';
import{a as it}from"./chunk-NWG7ONW4.mjs";import{a as nt}from"./chunk-HHH7MU3G.mjs";import{a as et}from"./chunk-3OHSZ757.mjs";import{a as tt}from"./chunk-IROFFPSS.mjs";import{a as Ze}from"./chunk-VHG5OPBA.mjs";import{a as Je,b as Xe}from"./chunk-7A5Y7YHY.mjs";import"./chunk-HRADRX7C.mjs";import{a as We}from"./chunk-XRUJFMX6.mjs";import{c as A,d as Ne,e as H,f as Be,g as Ae,h as He,i as Re,j as Pe,k as $e,l as Ge,m as ze,n as Ke,o as Oe,p as je,q as qe,r as Ye,s as Qe,t as Ue}from"./chunk-QEXUTANF.mjs";import{h as we}from"./chunk-CVNC2RZ4.mjs";import"./chunk-7BHYQM75.mjs";import{a as Le}from"./chunk-26NM6QMQ.mjs";import"./chunk-SIUTRCBI.mjs";import{a as Me,b as Ie}from"./chunk-CNNVLAUF.mjs";import{b as Fe,e as ee}from"./chunk-SWDJOT3A.mjs";import"./chunk-73IBRO6I.mjs";import{a as fe}from"./chunk-HM2U7H66.mjs";import{k as Ve}from"./chunk-THXWTKY4.mjs";import{a as lt}from"./chunk-MGIVCIKU.mjs";import{b as xe,c as Ce,d as ye}from"./chunk-PM25V3UY.mjs";import{a as J,b as De}from"./chunk-EW5VCDM7.mjs";import{g as X,j as Z,n as Se,p as be,u as ve,v as Ee,x as Te,y as ke}from"./chunk-VCDABPIO.mjs";import"./chunk-C7FKOQ47.mjs";import"./chunk-PTC2O5WN.mjs";import"./chunk-G4DBJ6JT.mjs";import"./chunk-XHDB6HJH.mjs";import"./chunk-7ZQLLCLM.mjs";import{a as U,c as W,e as he}from"./chunk-3LADKOVL.mjs";import{ha as ge}from"./chunk-KEGQNNIC.mjs";import"./chunk-7T6LZHUD.mjs";import"./chunk-JH2IM7XV.mjs";import{a as ue,d as pe}from"./chunk-RIKMNARQ.mjs";import"./chunk-BKLYOTAY.mjs";import{n as me,o as Y,u as Q,v as _e}from"./chunk-7XNBNIUU.mjs";import{Ac as $,Bc as G,Cc as z,Gb as ie,Gc as B,Hc as c,Ic as x,Jc as C,Mc as se,Nb as S,Oc as K,Pc as O,Qc as j,Ra as P,Sc as q,Wb as ae,Xb as oe,Xc as v,Zb as m,Zc as E,bc as re,cc as le,ec as ce,fc as F,gc as L,hc as a,ic as r,jc as T,kc as V,lc as N,nc as D,oa as w,ob as ne,sc as _,tb as s,uc as d,vd as de,xa as u,ya as p}from"./chunk-J2Q22ZL6.mjs";import"./chunk-KB5IWD3E.mjs";import{a as R,g as rt,j as b}from"./chunk-RIAI3ORJ.mjs";var te=rt(lt());var ct=()=>[ve,be,Te,X,Z,J,U,W,Me,ge,me,Y,Q,xe,Ce,He,Pe,Ke,$e,Re,Oe,Ge,ze,je,qe,Ye,H,Be,A],st=()=>({standalone:!0}),dt=()=>[5,10,25,100],ot=(o,t)=>t.id;function mt(o,t){if(o&1){let e=D();a(0,"button",7),_("click",function(){u(e);let i=d();return p(i.GiaoDonhang())}),c(1," \u0110\xE3 Giao"),r()}if(o&2){let e=d();m("disabled",e.DetailDathang().status=="dagiao")}}function _t(o,t){if(o&1){let e=D();a(0,"button",3),_("click",function(){u(e);let i=d();return p(i.handleDathangAction())}),a(1,"mat-icon"),c(2,"save"),r()()}}function ut(o,t){if(o&1){let e=D();a(0,"button",3),_("click",function(){u(e);let i=d();return p(i.toggleEdit())}),a(1,"mat-icon"),c(2,"edit"),r()()}}function pt(o,t){if(o&1){let e=D();V(0),a(1,"div",13)(2,"div",14),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),a(4,"div",15)(5,"button",16),_("click",function(){u(e);let i=d();return p(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),r(),a(7,"button",17),_("click",function(){u(e);let i=d();return p(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),r()()(),N()}}function gt(o,t){if(o&1&&T(0,"div",25),o&2){let e=d(2);m("innerHTML",e.DetailDathang().nhacungcap.ghichu,ne)}}function ht(o,t){o&1&&T(0,"div",26)}function ft(o,t){if(o&1&&(a(0,"mat-option",36),c(1),r()),o&2){let e=t.$implicit;m("value",e.id),s(),x(e.name)}}function Dt(o,t){o&1&&(a(0,"span",60),c(1,"check"),r())}function xt(o,t){if(o&1){let e=D();a(0,"div",58),_("click",function(){let i=u(e).$implicit,l=d(4);return p(l.ChosenItem(i))}),S(1,Dt,2,0,"span",59),c(2),r()}if(o&2){let e=t.$implicit,n=d(4);s(),m("ngIf",n.CheckItem(e)),s(),C(" ",e.title," ")}}function Ct(o,t){if(o&1&&(a(0,"th",63)(1,"span",64),c(2),r()()),o&2){let e=d().$implicit,n=d(4);s(2),C(" ",n.ColumnName[e]," ")}}function yt(o,t){if(o&1){let e=D();a(0,"span",66)(1,"span"),c(2),r(),a(3,"button",10),_("click",function(){u(e);let i=d().$implicit,l=d(5);return p(l.RemoveSanpham(i))}),a(4,"mat-icon"),c(5,"delete"),r()()()}if(o&2){let e=d().index;s(2),C("",e+1," ")}}function St(o,t){if(o&1){let e=D();a(0,"div",71),_("keydown.enter",function(i){u(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return p(g.EnterUpdateValue(i,f,h,"sldat","number"))}),c(1),v(2,"number"),r(),a(3,"div"),c(4),r()}if(o&2){let e=d().$implicit,n=d().$implicit,i=d(4);m("contentEditable",!0),s(),C(" ",E(2,6,e[n]||0,"1.0-2")," "),s(3),se("(SL:",e.soluong,")-(SLkho:",e.soluongkho,")-(Hao h\u1EE5t:",e.haohut,"%)(G\u1EE3i \xFD: ",i.GetGoiy(e),")")}}function wt(o,t){if(o&1){let e=D();a(0,"div",72),_("keydown.enter",function(i){u(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return p(g.EnterUpdateValue(i,f,h,"slgiao","number"))}),c(1),v(2,"number"),r()}if(o&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),C(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function bt(o,t){if(o&1){let e=D();a(0,"div",73),_("keydown.enter",function(i){u(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return p(g.EnterUpdateValue(i,f,h,"slnhan","number"))}),c(1),v(2,"number"),r()}if(o&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),C(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function vt(o,t){if(o&1){let e=D();a(0,"div",74),_("keydown.enter",function(i){u(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return p(g.EnterUpdateValue(i,f,h,"ghichu","string"))}),c(1),r()}if(o&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),C(" ",e[n]||""," ")}}function Et(o,t){if(o&1&&(a(0,"span",70),c(1),r()),o&2){let e=d().$implicit,n=d().$implicit;s(),C(" ",e[n]," ")}}function Tt(o,t){if(o&1&&(a(0,"td",65),S(1,yt,6,1,"span",66)(2,St,5,9)(3,wt,3,5,"div",67)(4,bt,3,5,"div",68)(5,vt,2,2,"div",69)(6,Et,2,1,"span",70),r()),o&2){let e,n=d().$implicit;s(),le((e=n)==="STT"?1:e==="sldat"?2:e==="slgiao"?3:e==="slnhan"?4:e==="ghichu"?5:6)}}function kt(o,t){if(o&1&&(V(0,53),S(1,Ct,3,1,"th",61)(2,Tt,7,1,"td",62),N()),o&2){let e=t.$implicit;m("matColumnDef",e)}}function Mt(o,t){o&1&&T(0,"tr",75)}function It(o,t){o&1&&T(0,"tr",76)}function Ft(o,t){o&1&&(a(0,"tr",77)(1,"td",78),c(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}function Lt(o,t){if(o&1){let e=D();a(0,"div",28)(1,"div",29)(2,"mat-form-field",30)(3,"mat-label"),c(4,"Nh\xE0 Cung C\u1EA5p"),r(),a(5,"mat-select",31),j("ngModelChange",function(i){u(e);let l=d(3);return O(l.DetailDathang().nhacungcapId,i)||(l.DetailDathang().nhacungcapId=i),p(i)}),_("selectionChange",function(i){u(e);let l=d(3);return p(l.SelectNhacungcap(i))}),a(6,"div",32)(7,"mat-form-field",33)(8,"input",34),_("input",function(i){u(e);let l=d(3);return p(l.DoFindNhacungcap(i))}),r()(),a(9,"div",35),F(10,ft,2,2,"mat-option",36,ot),r()()()(),a(12,"mat-form-field",30)(13,"mat-label"),c(14,"T\xECm Ki\u1EBFm"),r(),a(15,"input",37),_("keyup",function(i){u(e);let l=d(3);return p(l.applyFilter(i))}),r()(),a(16,"button",38,0),c(18),r(),a(19,"mat-menu",null,1)(21,"div",39),_("click",function(i){return u(e),p(i.stopPropagation())}),a(22,"div",40)(23,"input",41),_("keyup",function(i){u(e);let l=d(3);return p(l.doFilterSanpham(i))}),r(),a(24,"div",42)(25,"span",43),c(26,"search"),r()()(),a(27,"div",44)(28,"div",5)(29,"span",45),_("click",function(){u(e);let i=d(3);return p(i.ChosenAll(i.filterSanpham))}),c(30),r(),a(31,"span",45),_("click",function(){u(e);let i=d(3);return p(i.EmptyFiter())}),c(32,"Xo\xE1"),r()(),a(33,"span",45),_("click",function(){u(e);let i=d(3);return p(i.ResetFilter())}),c(34,"Reset"),r()(),a(35,"div",46),S(36,xt,3,2,"div",47),r(),a(37,"div",48)(38,"button",17),_("click",function(){u(e);let i=B(17);return p(i.closeMenu())}),c(39,"\u0110\xF3ng"),r(),a(40,"button",16),_("click",function(){u(e);let i=B(17),l=d(3);return p(l.ApplyFilterColum(i))}),c(41,"\xC1p D\u1EE5ng"),r()()()(),a(42,"button",49),_("click",function(){u(e);let i=d(3);return p(i.LoadDrive())}),a(43,"mat-icon"),c(44,"cloud_download"),r()(),a(45,"button",50),_("click",function(){u(e);let i=d(3);return p(i.EmptyCart())}),a(46,"mat-icon"),c(47,"delete"),r()()()(),a(48,"div",51)(49,"table",52),F(50,kt,3,1,"ng-container",53,ce),S(52,Mt,1,0,"tr",54)(53,It,1,0,"tr",55)(54,Ft,3,0,"tr",56),r(),T(55,"mat-paginator",57),r()}if(o&2){let e=B(20),n=d(3);s(5),K("ngModel",n.DetailDathang().nhacungcapId),m("ngModelOptions",q(15,st)),s(5),L(n.filterNhacungcap),s(6),m("disabled",!n.isEdit())("matMenuTriggerFor",e),s(2),C(" ",n.ListFilter.length," S\u1EA3n Ph\u1EA9m "),s(12),C("Ch\u1ECDn T\u1EA5t C\u1EA3 ",n.ListFilter.length,""),s(6),m("ngForOf",n.filterSanpham)("ngForTrackBy",n.trackByFn),s(6),m("disabled",!n.isEdit()),s(3),m("disabled",!n.isEdit()),s(4),m("dataSource",n.dataSource),s(),L(n.displayedColumns),s(2),m("matHeaderRowDef",n.displayedColumns),s(),m("matRowDefColumns",n.displayedColumns),s(2),m("pageSizeOptions",q(16,dt))("pageSize",n.dataSource.data.length)}}function Vt(o,t){o&1&&(a(0,"div",27),S(1,Lt,56,17),ae(2,1,ct),oe(),r())}function Nt(o,t){if(o&1&&(a(0,"tr",80)(1,"td",86),c(2),r(),a(3,"td",81),c(4),r(),a(5,"td",86),c(6),r(),a(7,"td",87),c(8),v(9,"number"),r(),a(10,"td",87),c(11),v(12,"number"),r(),a(13,"td",81),c(14),r()()),o&2){let e=t.$implicit,n=t.$index;s(2),x(n+1),s(2),x(e.title),s(2),x(e.dvt),s(2),x(E(9,6,e.sldat,"1.0-2")),s(3),x(E(12,9,e.slnhan||0,"1.0-2")),s(3),x(e.ghichu)}}function Bt(o,t){if(o&1&&(a(0,"table",79)(1,"thead")(2,"tr",80)(3,"th",81),c(4,"STT"),r(),a(5,"th",81),c(6,"T\xEAn s\u1EA3n ph\u1EA9m"),r(),a(7,"th",81),c(8,"\u0110VT"),r(),a(9,"th",82),c(10,"SL \u0110\u1EB7t"),r(),a(11,"th",82),c(12,"SL Nh\u1EADn"),r(),a(13,"th",81),c(14,"Ghi ch\xFA"),r()()(),a(15,"tbody"),F(16,Nt,15,12,"tr",80,ot),a(18,"tr",80)(19,"td",83),c(20,"T\u1ED5ng:"),r(),a(21,"td",84),c(22),v(23,"number"),r(),a(24,"td",84),c(25),v(26,"number"),r(),T(27,"td",85),r()()()),o&2){let e=d(2);s(16),L(e.DetailDathang().sanpham),s(6),x(E(23,2,e.TinhTong(e.DetailDathang().sanpham,"sldat"),"1.0-2")),s(3),x(E(26,5,e.TinhTong(e.DetailDathang().sanpham,"slnhan"),"1.0-2"))}}function At(o,t){if(o&1&&(V(0),a(1,"div",18)(2,"div",19)(3,"div",20),c(4,"\u0110\u1EB7t H\xE0ng Nh\xE0 Cung C\u1EA5p"),r(),a(5,"div"),c(6),r(),S(7,gt,1,1,"div",21)(8,ht,1,0,"div",22)(9,Vt,4,0,"div",23)(10,Bt,28,8,"table",24),r()(),N()),o&2){let e,n,i,l=d();s(5),re("font-bold text-[18px] uppercase ",(e=l.DetailDathang())!=null&&e.nhacungcapId?"":"text-red-700 italic",""),s(),x(((n=l.getName((n=l.DetailDathang())==null?null:n.nhacungcapId))==null?null:n.name)||"Ch\u01B0a Ch\u1ECDn Kh\xE1ch H\xE0ng"),s(),m("ngIf",l.isEdit()&&((i=l.DetailDathang())==null||i.nhacungcap==null?null:i.nhacungcap.ghichu)),s(),m("ngIf",l.isEdit()),s(),m("ngIf",l.isEdit()),s(),m("ngIf",!l.isEdit())}}var at=class o{_ListdathangComponent=w(it);_DathangService=w(nt);_NhacungcapService=w(et);_BanggiaService=w(tt);_SanphamService=w(Ze);_route=w(ue);_router=w(pe);_snackBar=w(fe);constructor(){this._route.paramMap.subscribe(t=>b(this,null,function*(){let e=t.get("id");this._DathangService.setDathangId(e),yield this._NhacungcapService.getAllNhacungcap(),this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive),yield this._BanggiaService.getAllBanggia(),this.filterBanggia=this._BanggiaService.ListBanggia(),yield this._SanphamService.getAllSanpham(),this.filterSanpham=this._SanphamService.ListSanpham(),this.dataSource.data=this.DetailDathang().sanpham})),de(()=>b(this,null,function*(){let t=this._DathangService.dathangId();t||(this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()),t==="0"?(this.DetailDathang.set({title:ee(8,!1),madncc:ee(8,!1),type:"dathang",ngaynhan:(0,te.default)().add(1,"days").format("YYYY-MM-DD")}),this._ListdathangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/dathang","0"])):(yield this._DathangService.getDathangByid(t),this.ListFilter=this.DetailDathang().sanpham,this._ListdathangComponent.drawer.open(),this._router.navigate(["/admin/dathang",t]))}))}DetailDathang=this._DathangService.DetailDathang;ListNhacungcap=this._NhacungcapService.ListNhacungcap;isEdit=P(!1);isDelete=P(!1);filterNhacungcap=[];filterBanggia=[];filterSanpham=[];dathangId=this._DathangService.dathangId;ngOnInit(){return b(this,null,function*(){})}handleDathangAction(){return b(this,null,function*(){this.dathangId()==="0"?yield this.createDathang():yield this.updateDathang()})}createDathang(){return b(this,null,function*(){try{this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t.ngaynhan=(0,te.default)(t.ngaygiao).format("YYYY-MM-DD"),t)),yield this._DathangService.CreateDathang(this.DetailDathang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o dathang:",t)}})}updateDathang(){return b(this,null,function*(){try{console.log(this.DetailDathang()),this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t)),yield this._DathangService.updateDathang(this.DetailDathang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt dathang:",t)}})}DeleteData(){return b(this,null,function*(){try{yield this._DathangService.DeleteDathang(this.DetailDathang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/dathang"])}catch(t){console.error("L\u1ED7i khi x\xF3a dathang:",t)}})}goBack(){this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){}DoFindNhacungcap(t){let e=t.target.value.toLowerCase();this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive&&n.name.toLowerCase().includes(e)||n.namenn.toLowerCase().includes(e)||n.sdt.toLowerCase().includes(e))}DoFindBanggia(t){let e=t.target.value.toLowerCase()}UpdateBangia(){}SelectBanggia(t){console.log(t.value)}Chonnhacungcap(t){this.DetailDathang.update(e=>(e.nhacungcapId=t.id,e))}EnterUpdateValue(t,e,n,i,l){let h=l==="number"?Number(t.target.innerText.trim())||0:t.target.innerText.trim(),f=t;if(f.key==="Enter"&&!f.shiftKey&&t.preventDefault(),l==="number"){let g=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(f.key)&&!g.includes(f.key)&&t.preventDefault()}console.log(this.DetailDathang()),this.DetailDathang.update(g=>{if(e!==null)if(console.log(e),console.log(g.sanpham[e]),i==="sldat"){g.sanpham[e].sldat=g.sanpham[e].slgiao=g.sanpham[e].slnhan=h;let k=document.querySelectorAll(".sldat-input");if(e<this.dataSource.filteredData.length-1){let y=k[e+1];y&&(y instanceof HTMLInputElement&&(y.focus(),y.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let M=document.createRange();M.selectNodeContents(y);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(M)}},10))}}else if(i==="ghichu"){g.sanpham[e][i]=h;let k=document.querySelectorAll(".ghichu-input");if(e<this.dataSource.filteredData.length-1){let y=k[e+1];y&&(y instanceof HTMLInputElement&&(y.focus(),y.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let M=document.createRange();M.selectNodeContents(y);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(M)}},10))}}else if(i==="slgiao"){let k=h;k<g.sanpham[e].sldat?(g.sanpham[e].slgiao=g.sanpham[e].sldat,this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n s\u1ED1 l\u01B0\u1EE3ng \u0111\u1EB7t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})):g.sanpham[e].slgiao=g.sanpham[e].slnhan=k}else g.sanpham[e][i]=h;else g[i]=h;return g})}Tongcong=0;Tong=0;Tinhtongcong(t){this.Tongcong=t.Tongcong,this.Tong=t.Tong}TinhTong(t,e){return t?.reduce((n,i)=>n+(i[e]||0),0)||0}SelectNhacungcap(t){let e=this.ListNhacungcap().find(n=>n.id===t.value);console.log(e),e&&this.DetailDathang.update(n=>{let i={name:e.name,diachi:e.diachi,sdt:e.sdt,ghichu:e.ghichu};return n.nhacungcapId=e.id,n.nhacungcap=i,n}),console.log(this.DetailDathang())}displayedColumns=["STT","title","masp","dvt","sldat","slnhan","ghichu"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slnhan:"SL Nh\u1EADn",ghichu:"Ghi Ch\xFA"};dataSource=new Ue([]);CountItem=this.dataSource.data.length;paginator;sort;_GoogleSheetService=w(We);LoadDrive(){return b(this,null,function*(){let t={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"DatHImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(t),n=Fe(e.values);console.log(n),this.DetailDathang.update(i=>(i.sanpham=n.map(l=>{l.sldat=Number(l.sldat)||0,l.slgiao=Number(l.slgiao)||0,l.slnhan=Number(l.slnhan)||0,l.ttdat=Number(l.ttdat)||0,l.ttgiao=Number(l.ttgiao)||0,l.ttnhan=Number(l.ttnhan)||0;let h=this._SanphamService.ListSanpham().find(f=>f.masp===l.masp);return console.log(h),h?R(R({},h),l):l}),i)),console.log(this.DetailDathang()),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase()}EmptyCart(){this.DetailDathang.update(t=>(t.sanpham=[],t)),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()}getName(t){return this.ListNhacungcap().find(e=>e.id===t)}reloadfilter(){this.filterSanpham=this._SanphamService.ListSanpham().filter(t=>!this.DetailDathang().sanpham.some(e=>e.id===t.id))}DoFindSanpham(t){let e=t.target.value;console.log(e),this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>n.title.toLowerCase().includes(e.toLowerCase()))}SelectSanpham(t){let e=t.value,n=this._SanphamService.ListSanpham().find(i=>i.id===e);this.DetailDathang.update(i=>(i.sanpham?(n.sldat=n.slgiao=1,i.sanpham.push(n)):(i.sanpham=[],n.sldat=n.slgiao=1,i.sanpham.push(n)),this.reloadfilter(),i)),this.dataSource.data=this.DetailDathang().sanpham}RemoveSanpham(t){this.DetailDathang.update(e=>(e.sanpham=e.sanpham.filter(n=>n.id!==t.id),this.reloadfilter(),e)),this.dataSource.data=this.DetailDathang().sanpham}GetGoiy(t){let e=parseFloat(((t.soluongkho-t.soluong)*(1+t.haohut/100)).toString()).toFixed(2);return Number(e)<0?0:e}doFilterSanpham(t){this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>Le(n.title).includes(t.target.value.toLowerCase())||n.title.toLowerCase().includes(t.target.value.toLowerCase()));let e=t.target.value.toLowerCase()}ListFilter=[];ChosenItem(t){console.log(t);let e=this.filterSanpham.filter(i=>i.id===t.id);this.ListFilter.filter(i=>i.id===t.id).length>0?this.ListFilter=this.ListFilter.filter(i=>i.id!==t.id):this.ListFilter=[...this.ListFilter,...e]}ChosenAll(t){this.ListFilter=t}ResetFilter(){this.ListFilter=this.filterSanpham,this.dataSource.data=this.filterSanpham}EmptyFiter(){this.ListFilter=[]}CheckItem(t){return!!this.ListFilter.find(e=>e.id===t.id)}ApplyFilterColum(t){console.log(this.ListFilter),this.ListFilter.forEach(e=>{e.sldat=e.slgiao=e.slnhan=1}),this.dataSource.data=this.ListFilter,this.DetailDathang.update(e=>(e.sanpham=this.ListFilter,e)),this.dataSource.data.sort((e,n)=>e.order-n.order),t.closeMenu()}GiaoDonhang(){this.DetailDathang.update(t=>(t.sanpham.forEach(e=>{e.slgiao=e.sldat}),t.status="dagiao",t)),this._DathangService.updateDathang(this.DetailDathang()).then(t=>{this._snackBar.open("Giao \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}Danhanhang(){this.DetailDathang.update(t=>(t.sanpham.forEach(e=>{e.slnhan=e.slgiao}),t.status="danhan",t)),this._DathangService.updateDathang(this.DetailDathang()).then(t=>{this._snackBar.open("Giao \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ie({type:o,selectors:[["app-detaildathang"]],viewQuery:function(e,n){if(e&1&&($(A,5),$(H,5)),e&2){let i;G(i=z())&&(n.paginator=i.first),G(i=z())&&(n.sort=i.first)}},decls:20,vars:11,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["id","printContent",1,"min-w-[800px]","flex","flex-col","space-y-6","items-center","p-2","border","rounded-lg"],[1,"w-full","flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-[18px]","uppercase"],["class","p-2 rounded-lg border text-red-600",3,"innerHTML",4,"ngIf"],["class","grid lg:grid-cols-3 grid-cols-1 gap-4",4,"ngIf"],["class","w-full flex flex-col overflow-y-auto",4,"ngIf"],["class","w-full border-collapse border mt-4",4,"ngIf"],[1,"p-2","rounded-lg","border","text-red-600",3,"innerHTML"],[1,"grid","lg:grid-cols-3","grid-cols-1","gap-4"],[1,"w-full","flex","flex-col","overflow-y-auto"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"keyup"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click","disabled"],["matTooltip","L\xE0m Tr\u1ED1ng Gi\u1ECF H\xE0ng","color","warn","mat-icon-button","",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],[1,"sldat-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-full","border-collapse","border","mt-4"],[1,"border"],[1,"border","p-2"],[1,"border","p-2","max-w-10"],["colspan","3",1,"border","p-2","text-start"],[1,"border","p-2","text-end","font-bold"],[1,"border","p-2","text-end"],[1,"border","p-2","text-center"],[1,"border","p-2","text-end","max-w-10"]],template:function(e,n){e&1&&(a(0,"div",2)(1,"button",3),_("click",function(){return n.goBack()}),a(2,"mat-icon"),c(3,"arrow_back"),r()(),a(4,"div",4),_("blur",function(l){return n.EnterUpdateValue(l,null,n.DetailDathang(),"madncc","string")}),c(5),r(),a(6,"div",5),S(7,mt,2,1,"button",6),a(8,"button",7),_("click",function(){return n.Danhanhang()}),c(9," \u0110\xE3 Nh\u1EADn"),r(),a(10,"mat-slide-toggle",8),j("ngModelChange",function(l){return O(n.DetailDathang().isActive,l)||(n.DetailDathang().isActive=l),l}),c(11),r(),S(12,_t,3,0,"button",9)(13,ut,3,0,"button",9),a(14,"button",10),_("click",function(){return n.toggleDelete()}),a(15,"mat-icon"),c(16,"delete"),r()()()(),a(17,"div",11),S(18,pt,9,0,"ng-container",12)(19,At,11,8,"ng-container",12),r()),e&2&&(s(4),m("contentEditable",!0),s(),C("",n.DetailDathang().madncc||""," "),s(2),m("ngIf",n.DetailDathang().status!=="danhan"),s(),m("disabled",n.DetailDathang().status=="danhan"),s(2),K("ngModel",n.DetailDathang().isActive),m("disabled",!n.isEdit()),s(),x(n.DetailDathang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),m("ngIf",n.isEdit()),s(),m("ngIf",!n.isEdit()),s(5),m("ngIf",n.isDelete()),s(),m("ngIf",!n.isDelete()))},dependencies:[Ee,ke,Se,X,Z,De,J,he,U,W,Ie,we,_e,Y,Q,Xe,Je,ye,Ve,Qe,Ae,Ne],encapsulation:2})};export{at as DetailDathangComponent};
