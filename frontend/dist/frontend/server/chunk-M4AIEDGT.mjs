import './polyfills.server.mjs';
import{a as gt,b as _t}from"./chunk-KLHX3L6P.mjs";import{a as dt}from"./chunk-NTYP2I5F.mjs";import{b as ht,d as mt}from"./chunk-QBPLJZ3D.mjs";import{b as pt}from"./chunk-KDA2S5QG.mjs";import{f as ut,g as q}from"./chunk-ETGHWKBN.mjs";import{a as fe}from"./chunk-5OAQK6SW.mjs";import{a as lt,b as ct}from"./chunk-PDYHWB5Z.mjs";import{a as st}from"./chunk-75S4A7ES.mjs";import{a as je,b as qe}from"./chunk-A56U74X5.mjs";import{a as $,b as Ke,c as Ge}from"./chunk-2FLLKDTQ.mjs";import{a as He,b as Ue,c as Qe,d as Xe,e as Je,g as Ye,h as Ze,j as et,k as tt,m as it,n as ot,p as nt,q as at,r as rt,s as j}from"./chunk-7OL3A46M.mjs";import{c as Te,d as De,f as Fe,h as Be}from"./chunk-SQLON2R6.mjs";import{a as Ce,b as ke,c as xe}from"./chunk-FEYBIC4G.mjs";import{a as be,b as Se,c as we,d as Ee}from"./chunk-ELAJKLT3.mjs";import{a as Oe,b as We}from"./chunk-5J65EW3V.mjs";import{b as Ie,g as Pe,j as Le,n as Me,p as Ve,r as Re,v as Ae,w as ze,y as $e,z as Ne}from"./chunk-GA3UYBFM.mjs";import{a as ye,b as ve}from"./chunk-PK3DRSOU.mjs";import{a as ce}from"./chunk-6EFOJMAD.mjs";import{a as _e}from"./chunk-3FIPRBVQ.mjs";import{a as z}from"./chunk-K3B42B6X.mjs";import{a as ue,c as de,e as ge}from"./chunk-4I2U3JAI.mjs";import{ka as pe,y as he,z as me}from"./chunk-EDQTS3NM.mjs";import{b as se,d as le}from"./chunk-BAXOD54Y.mjs";import{d as re}from"./chunk-TSEEXHZ6.mjs";import{m as ie,o as oe,t as ne,x as ae}from"./chunk-GTWDOMLN.mjs";import{Bc as F,Cc as B,Dc as V,Fb as G,Gc as L,Hc as s,Ic as b,Jc as _,Kc as Z,Mb as C,Mc as M,Nc as T,Oc as D,Qc as ee,Ra as f,Wc as R,Yb as p,Yc as A,ac as Q,ad as I,dc as E,fc as X,gc as H,hc as U,ic as n,ja as K,jc as r,kc as w,lc as J,mc as Y,oc as k,pa as y,tb as l,tc as g,u as W,vc as c,ya as u,yd as te,za as d}from"./chunk-KYBR54ZN.mjs";import{a as v,b as S,h as O,j as m}from"./chunk-RIAI3ORJ.mjs";var N=class o{graphqlService=y(dt);storageService=y(_e);userService=y(fe);snackBar=y(z);http=y(re);apollo=y(ut);apiUrl=ce.APIURL;modelName="chotkho";detailModelName="chotkhodetail";chotkhos=f([]);isLoading=f(!1);selectedChotkho=f(null);ListChotkho=f([]);DetailChotkho=f(null);page=f(1);totalPages=f(1);total=f(0);pageSize=f(50);chotkhoId=f(null);isRefreshing=f(!1);lastUpdated=f(null);createChotkhoWithDetails(t){return m(this,null,function*(){try{this.isLoading.set(!0);let e={ngaychot:t.ngaychot,title:t.title,ghichu:t.ghichu,userId:t.userId||(yield this.getCurrentUserId()),codeId:new Date().getTime().toString()},i=yield this.graphqlService.createOne(this.modelName,e,{select:{id:!0,ngaychot:!0,title:!0,ghichu:!0,userId:!0,codeId:!0}});if(!i||!i.id)return this.showErrorMessage("L\u1ED7i khi t\u1EA1o ch\u1ED1t kho"),!1;if(t.details&&t.details.length>0)for(let a of t.details){let h=S(v({},a),{chotkhoId:i.id,userId:t.userId||(yield this.getCurrentUserId()),chenhlech:this.calculateChenhLech(a.sltonhethong||0,a.sltonthucte||0,a.slhuy||0)});yield this.graphqlService.createOne(this.detailModelName,h,{select:{id:!0,sanphamId:!0,sltonhethong:!0,sltonthucte:!0,slhuy:!0,chenhlech:!0,ghichu:!0,chotkhoId:!0}})}return this.showSuccessMessage("T\u1EA1o ch\u1ED1t kho th\xE0nh c\xF4ng"),yield this.getAllChotkho(),!0}catch(e){return console.error("Error creating chotkho with details:",e),this.showErrorMessage("L\u1ED7i khi t\u1EA1o ch\u1ED1t kho"),!1}finally{this.isLoading.set(!1)}})}getAllChotkho(t){return m(this,null,function*(){try{this.isLoading.set(!0);let e="isActive: true";if(t){let a=[];t.khoId&&a.push(`khoId: "${t.khoId}"`),t.userId&&a.push(`userId: "${t.userId}"`),t.startDate&&t.endDate&&a.push(`ngaychot: { gte: "${t.startDate}", lte: "${t.endDate}" }`),t.searchText&&a.push(`OR: [
            { title: { contains: "${t.searchText}" } },
            { ghichu: { contains: "${t.searchText}" } },
            { codeId: { contains: "${t.searchText}" } }
          ]`),a.length>0&&(e=`AND: [{ isActive: true }, { ${a.join(", ")} }]`)}let i=yield this.graphqlService.findMany(this.modelName,{where:e,orderBy:{ngaychot:"desc"},skip:((t?.page||1)-1)*(t?.limit||50),take:t?.limit||50,include:{kho:{select:{id:!0,name:!0}},user:{select:{id:!0,email:!0,profile:{select:{name:!0}}}},details:{include:{sanpham:{select:{id:!0,title:!0}}}}}});i&&(this.ListChotkho.set(i||[]),this.chotkhos.set(i||[]),this.total.set(i.length||0),this.totalPages.set(Math.ceil((i.length||0)/(t?.limit||50))),this.page.set(t?.page||1))}catch(e){console.error("Error getting chotkho data:",e),this.showErrorMessage("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u ch\u1ED1t kho")}finally{this.isLoading.set(!1)}})}getChotkhoById(t){return m(this,null,function*(){try{this.isLoading.set(!0);let e=yield this.graphqlService.findUnique(this.modelName,{id:t},{include:{user:{select:{id:!0,email:!0,profile:{select:{name:!0}}}},details:{include:{sanpham:{select:{id:!0,title:!0}}}}}});return e?(this.selectedChotkho.set(e),this.DetailChotkho.set(e),e):null}catch(e){return console.error("Error getting chotkho by id:",e),this.showErrorMessage("L\u1ED7i khi l\u1EA5y th\xF4ng tin ch\u1ED1t kho"),null}finally{this.isLoading.set(!1)}})}updateChotkho(t,e){return m(this,null,function*(){try{this.isLoading.set(!0);let i={ngaychot:e.ngaychot,title:e.title,ghichu:e.ghichu,khoId:e.khoId,isActive:e.isActive};return(yield this.graphqlService.updateOne(this.modelName,{id:t},i,{select:{id:!0,ngaychot:!0,title:!0,ghichu:!0,khoId:!0}}))?(this.showSuccessMessage("C\u1EADp nh\u1EADt ch\u1ED1t kho th\xE0nh c\xF4ng"),yield this.getAllChotkho(),!0):!1}catch(i){return console.error("Error updating chotkho:",i),this.showErrorMessage("L\u1ED7i khi c\u1EADp nh\u1EADt ch\u1ED1t kho"),!1}finally{this.isLoading.set(!1)}})}deleteChotkho(t){return m(this,null,function*(){try{return this.isLoading.set(!0),(yield this.graphqlService.updateOne(this.modelName,{id:t},{isActive:!1},{select:{id:!0,isActive:!0}}))?(this.showSuccessMessage("X\xF3a ch\u1ED1t kho th\xE0nh c\xF4ng"),yield this.getAllChotkho(),!0):!1}catch(e){return console.error("Error deleting chotkho:",e),this.showErrorMessage("L\u1ED7i khi x\xF3a ch\u1ED1t kho"),!1}finally{this.isLoading.set(!1)}})}addChotkhoDetail(t,e){return m(this,null,function*(){try{let i=S(v({},e),{chotkhoId:t,userId:yield this.getCurrentUserId(),chenhlech:this.calculateChenhLech(e.sltonhethong||0,e.sltonthucte||0,e.slhuy||0)});return(yield this.graphqlService.createOne(this.detailModelName,i,{select:{id:!0,sanphamId:!0,sltonhethong:!0,sltonthucte:!0,slhuy:!0,chenhlech:!0,ghichu:!0,chotkhoId:!0}}))?(this.showSuccessMessage("Th\xEAm chi ti\u1EBFt th\xE0nh c\xF4ng"),yield this.getChotkhoById(t),!0):!1}catch(i){return console.error("Error adding chotkho detail:",i),this.showErrorMessage("L\u1ED7i khi th\xEAm chi ti\u1EBFt ch\u1ED1t kho"),!1}})}calculateChenhLech(t,e,i){return t-e-i}generateChotkhoCode(){let t=new Date,e=t.getFullYear().toString().substr(-2)+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0");return`CK${e}${i}`}setChotkhoId(t){this.chotkhoId.set(t)}getCurrentUserId(){return m(this,null,function*(){try{return(yield this.userService.getProfile())?.id||null}catch(t){return console.error("Error getting current user:",t),null}})}showSuccessMessage(t){this.snackBar.open(t,"\u0110\xF3ng",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]})}showErrorMessage(t){this.snackBar.open(t,"\u0110\xF3ng",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}getUpdatedCodeIds(){return m(this,null,function*(){console.log("getUpdatedCodeIds - implement if needed")})}DeleteChotkho(t){return m(this,null,function*(){t?.id&&(yield this.deleteChotkho(t.id))})}getStatistics(){return m(this,null,function*(){return{total:this.ListChotkho().length,active:this.ListChotkho().filter(t=>t.isActive).length}})}generateReport(t){return m(this,null,function*(){return console.log("generateReport - implement if needed",t),{success:!0,message:"Report placeholder"}})}bulkUpdateStatus(t,e){return m(this,null,function*(){return console.log("bulkUpdateStatus - implement if needed",t,e),!0})}importFromExcel(t,e){return m(this,null,function*(){return console.log("importFromExcel - implement if needed",t,e),{success:!0,message:"Import placeholder"}})}backupData(t){return m(this,null,function*(){return console.log("backupData - implement if needed",t),!0})}optimizePerformance(){return m(this,null,function*(){return console.log("optimizePerformance - implement if needed"),{success:!0}})}getSystemHealth(){return m(this,null,function*(){return console.log("getSystemHealth - implement if needed"),{status:"healthy"}})}generateImportTemplate(t){return m(this,null,function*(){return console.log("generateImportTemplate - implement if needed",t),!0})}exportData(t,e){return m(this,null,function*(){return console.log("exportData - implement if needed",t,e),!0})}smartCheckChenhLech(t){return m(this,null,function*(){return console.log("smartCheckChenhLech - implement if needed",t),{success:!0}})}restoreFromBackup(t){return m(this,null,function*(){return console.log("restoreFromBackup - implement if needed",t),!0})}getAllWarehouses(){return m(this,null,function*(){let t=q`
      query chotkhoGetAllWarehouses {
        chotkhoGetAllWarehouses {
          id
          name
          diachi
          ghichu
          status
        }
      }
    `;try{return(yield W(this.apollo.query({query:t,fetchPolicy:"cache-first"}))).data.chotkhoGetAllWarehouses||[]}catch(e){throw console.error("Error getting warehouses:",e),e}})}getProductsByWarehouse(t){return m(this,null,function*(){let e=q`
      query chotkhoGetProductsByWarehouse($khoId: String!) {
        chotkhoGetProductsByWarehouse(khoId: $khoId) {
          id
          masanpham
          tensanpham
          donvitinh
          dongia
          status
          ghichu
          tonkho {
            slton
            slhuy
            sltinhthucte
            ngaycapnhat
          }
        }
      }
    `;try{return(yield W(this.apollo.query({query:e,variables:{khoId:t},fetchPolicy:"cache-first"}))).data.chotkhoGetProductsByWarehouse||[]}catch(i){throw console.error("Error getting products by warehouse:",i),i}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var xt=["drawer"],yt=()=>({standalone:!0}),vt=(o,t)=>t.key;function bt(o,t){if(o&1){let e=k();n(0,"button",40),g("click",function(){u(e);let a=c(),h=L(66);return d(a.openDeleteDialog(h))}),n(1,"mat-icon"),s(2,"delete"),r(),n(3,"span",20),s(4,"Xo\xE1"),r()()}}function St(o,t){if(o&1){let e=k();n(0,"button",53),g("click",function(a){u(e);let h=c().$implicit;return c(4).toggleColumn(h),d(a.stopPropagation())}),n(1,"mat-icon"),s(2),r(),n(3,"span"),s(4),r()()}if(o&2){let e=c().$implicit;p("disabled",!0),l(2),b(e.isShow?"check_box":"check_box_outline_blank"),l(2),b(e.value)}}function wt(o,t){if(o&1){let e=k();n(0,"button",54),g("click",function(a){u(e);let h=c().$implicit;return c(4).toggleColumn(h),d(a.stopPropagation())}),n(1,"mat-icon"),s(2),r(),n(3,"span"),s(4),r()()}if(o&2){let e=c().$implicit;l(2),b(e.isShow?"check_box":"check_box_outline_blank"),l(2),b(e.value)}}function Et(o,t){if(o&1&&C(0,St,5,3,"button",51)(1,wt,5,2,"button",52),o&2){let e=t.$implicit;E(e.key=="stt"?0:1)}}function It(o,t){if(o&1){let e=k();n(0,"th",41)(1,"button",45)(2,"mat-icon"),s(3,"tune"),r()(),n(4,"mat-menu",null,8)(6,"div",46)(7,"mat-form-field",47)(8,"input",48),g("input",function(a){u(e);let h=c(3);return d(h.doFilterColumns(a))})("click",function(a){return u(e),d(a.stopPropagation())}),r(),n(9,"mat-icon",49),s(10,"search"),r()(),n(11,"button",31),g("click",function(){u(e);let a=c(3);return d(a.updateDisplayedColumns())}),n(12,"mat-icon"),s(13,"check_circle"),r()()(),n(14,"div",50),H(15,Et,2,1,null,null,vt),r()()()}if(o&2){let e=L(5),i=c(3);l(),p("matMenuTriggerFor",e),l(14),U(i.FilterColumns)}}function Pt(o,t){o&1&&C(0,It,17,1,"th",44)}function Lt(o,t){if(o&1){let e=k();n(0,"th",42)(1,"span",56),s(2),r(),n(3,"app-searchfilter",57),g("OutFilter",function(a){u(e);let h=c(3);return d(h.onOutFilter(a))}),r()()}if(o&2){let e=c(2).$implicit,i=c();l(2),_(" ",i.ColumnName[e]," "),l(),p("icon","filter_alt")("ListItem",i.Listchotkho())("fieldsearch",e)("ListFilter",i.ListFilter)("filterItem",i.FilterHederColumn(i.dataSource.filteredData,e))}}function Mt(o,t){o&1&&C(0,Lt,4,6,"th",55)}function Tt(o,t){if(o&1){let e=k();n(0,"span",63),g("click",function(){u(e);let a=c().$implicit,h=c(2);return d(h.goToDetail(a))}),s(1),r()}if(o&2){let e=c().$implicit,i=c().$implicit;l(),_(" ",e[i]," ")}}function Dt(o,t){o&1&&(n(0,"mat-icon"),s(1,"check"),r())}function Ft(o,t){if(o&1&&(n(0,"span"),s(1),r()),o&2){let e=c(2).index;l(),b(e+1)}}function Bt(o,t){if(o&1){let e=k();n(0,"span",64),g("click",function(){u(e);let a=c().$implicit,h=c(2);return d(h.AddToEdit(a))}),C(1,Dt,2,0,"mat-icon")(2,Ft,2,1,"span"),r()}if(o&2){let e=c().$implicit,i=c(2);l(),E(i.CheckSelect(e)?1:2)}}function Vt(o,t){if(o&1&&(n(0,"span",61),s(1),R(2,"date"),r()),o&2){let e=c().$implicit,i=c().$implicit;l(),_(" ",A(2,1,e[i],"dd/MM/yyyy")," ")}}function Rt(o,t){if(o&1&&(n(0,"span",61),s(1),R(2,"date"),r()),o&2){let e=c().$implicit,i=c().$implicit;l(),_(" ",A(2,1,e[i],"dd/MM/yyyy")," ")}}function At(o,t){if(o&1&&(n(0,"span",61),s(1),r()),o&2){let e=c().$implicit;l(),_(" ",(e.kho==null?null:e.kho.name)||(e.kho==null?null:e.kho.makho)||"Ch\u01B0a ch\u1ECDn kho"," ")}}function zt(o,t){if(o&1&&(n(0,"span",62)(1,"mat-chip",65),s(2),r()()),o&2){let e=c().$implicit;l(2),_(" ",(e.details==null?null:e.details.length)||0," SP ")}}function $t(o,t){o&1&&(n(0,"mat-icon",66),s(1,"check_circle"),r())}function Nt(o,t){o&1&&(n(0,"mat-icon",67),s(1,"cancel"),r())}function Ot(o,t){if(o&1&&(n(0,"span",61),C(1,$t,2,0,"mat-icon",66)(2,Nt,2,0,"mat-icon",67),r()),o&2){let e=c().$implicit,i=c().$implicit;l(),E(e[i]?1:2)}}function Wt(o,t){if(o&1&&(n(0,"span",61),s(1),r()),o&2){let e=c().$implicit,i=c().$implicit;l(),_(" ",e[i]," ")}}function Ht(o,t){if(o&1&&(n(0,"td",58),C(1,Tt,2,1,"span",59)(2,Bt,3,1,"span",60)(3,Vt,3,4,"span",61)(4,Rt,3,4,"span",61)(5,At,2,1,"span",61)(6,zt,3,1,"span",62)(7,Ot,3,1,"span",61)(8,Wt,2,1,"span",61),r()),o&2){let e,i=c().$implicit;l(),E((e=i)==="codeId"?1:e==="stt"?2:e==="createdAt"?3:e==="ngaychot"?4:e==="khoId"?5:e==="details"?6:e==="isActive"?7:8)}}function Ut(o,t){if(o&1&&(J(0,36),C(1,Pt,1,0,"th",41)(2,Mt,1,0,"th",42)(3,Ht,9,1,"td",43),Y()),o&2){let e=t.$implicit;p("matColumnDef",e),l(),E(e=="stt"?1:2)}}function jt(o,t){o&1&&w(0,"tr",68)}function qt(o,t){if(o&1&&w(0,"tr",69),o&2){let e=t.$implicit,i=c();Q("hover:bg-slate-50 ",i.CheckItemInEdit(e)?"!bg-blue-50":"","")}}function Kt(o,t){o&1&&(n(0,"tr",70)(1,"td",71),s(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}function Gt(o,t){o&1&&(n(0,"mat-dialog-content")(1,"div",72)(2,"div",73),s(3,"X\xE1c Nh\u1EADn"),r(),n(4,"div"),s(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),n(6,"div",74)(7,"button",75),s(8,"\u0110\u1ED3ng \xDD"),r(),n(9,"button",76),s(10,"Hu\u1EF7 B\u1ECF"),r()()()())}function Qt(o,t){if(o&1&&(n(0,"div",79),w(1,"mat-progress-bar",85),n(2,"div",86),s(3),r()()),o&2){let e=c(2);l(),p("value",e.importProgress),l(2),_("",e.importProgress,"% Complete")}}function Xt(o,t){if(o&1){let e=k();n(0,"mat-dialog-content")(1,"div",77)(2,"div",78),s(3,"Import Excel File"),r(),n(4,"div",79)(5,"input",80),g("change",function(a){u(e);let h=c();return d(h.onFileSelected(a))}),r()(),C(6,Qt,4,2,"div",81),n(7,"div",82)(8,"button",83),g("click",function(){u(e);let a=c();return d(a.startImport())}),s(9," Start Import "),r(),n(10,"button",84),s(11,"Cancel"),r()()()()}if(o&2){let e=c();l(6),p("ngIf",e.importProgress>0),l(2),p("disabled",!e.selectedFile||e.importProgress>0)}}function Jt(o,t){if(o&1&&(n(0,"div",79),w(1,"mat-progress-bar",85),n(2,"div",86),s(3),r()()),o&2){let e=c(2);l(),p("value",e.exportProgress),l(2),_("",e.exportProgress,"% Complete")}}function Yt(o,t){if(o&1){let e=k();n(0,"mat-dialog-content")(1,"div",77)(2,"div",78),s(3,"Export to Excel"),r(),n(4,"div",79)(5,"mat-form-field",87)(6,"mat-label"),s(7,"Export Type"),r(),n(8,"mat-select",88),D("valueChange",function(a){u(e);let h=c();return T(h.exportType,a)||(h.exportType=a),d(a)}),n(9,"mat-option",89),s(10,"All Data"),r(),n(11,"mat-option",90),s(12,"Filtered Data"),r(),n(13,"mat-option",91),s(14,"Selected Items"),r()()()(),C(15,Jt,4,2,"div",81),n(16,"div",82)(17,"button",83),g("click",function(){u(e);let a=c();return d(a.startExport())}),s(18," Start Export "),r(),n(19,"button",84),s(20,"Cancel"),r()()()()}if(o&2){let e=c();l(8),M("value",e.exportType),l(7),p("ngIf",e.exportProgress>0),l(2),p("disabled",e.exportProgress>0)}}function Zt(o,t){if(o&1){let e=k();n(0,"div",79)(1,"mat-form-field",87)(2,"mat-label"),s(3,"Backup Type"),r(),n(4,"mat-select",88),D("valueChange",function(a){u(e);let h=c(2);return T(h.backupType,a)||(h.backupType=a),d(a)}),n(5,"mat-option",92),s(6,"Full Backup"),r(),n(7,"mat-option",93),s(8,"Incremental Backup"),r()()(),n(9,"mat-form-field",87)(10,"mat-label"),s(11,"Backup Name"),r(),n(12,"input",94),D("ngModelChange",function(a){u(e);let h=c(2);return T(h.backupName,a)||(h.backupName=a),d(a)}),r()()()}if(o&2){let e=c(2);l(4),M("value",e.backupType),l(8),M("ngModel",e.backupName)}}function ei(o,t){if(o&1){let e=k();n(0,"div",79)(1,"input",95),g("change",function(a){u(e);let h=c(2);return d(h.onBackupFileSelected(a))}),r()()}}function ti(o,t){if(o&1&&(n(0,"div",79),w(1,"mat-progress-bar",85),n(2,"div",86),s(3),r()()),o&2){let e=c(2);l(),p("value",e.backupProgress),l(2),_("",e.backupProgress,"% Complete")}}function ii(o,t){if(o&1){let e=k();n(0,"mat-dialog-content")(1,"div",77)(2,"div",78),s(3),r(),C(4,Zt,13,2,"div",81)(5,ei,2,0,"div",81)(6,ti,4,2,"div",81),n(7,"div",82)(8,"button",83),g("click",function(){u(e);let a=c();return d(a.isRestoreMode?a.startRestore():a.startBackup())}),s(9),r(),n(10,"button",84),s(11,"Cancel"),r()()()()}if(o&2){let e=c();l(3),b(e.isRestoreMode?"Restore Data":"Create Backup"),l(),p("ngIf",!e.isRestoreMode),l(),p("ngIf",e.isRestoreMode),l(),p("ngIf",e.backupProgress>0),l(2),p("disabled",e.backupProgress>0||e.isRestoreMode&&!e.selectedBackupFile||!e.isRestoreMode&&!e.backupName),l(),_(" ",e.isRestoreMode?"Start Restore":"Start Backup"," ")}}function oi(o,t){if(o&1&&(n(0,"div",99)(1,"div",100)(2,"span",101),s(3,"Database"),r(),n(4,"div",102)(5,"mat-icon",103),s(6),r(),n(7,"span",104),s(8),r()()(),n(9,"div",100)(10,"span",101),s(11,"API Server"),r(),n(12,"div",102)(13,"mat-icon",103),s(14),r(),n(15,"span",104),s(16),r()()(),n(17,"div",100)(18,"span",101),s(19,"Memory Usage"),r(),n(20,"div",102)(21,"mat-icon",103),s(22),r(),n(23,"span",104),s(24),r()()(),n(25,"div",105)(26,"span",101),s(27,"Last Check"),r(),n(28,"span",104),s(29),R(30,"date"),r()()()),o&2){let e=c(2);l(),p("ngClass",e.healthCheck.database.status==="healthy"?"bg-green-50":"bg-red-50"),l(4),p("ngClass",e.healthCheck.database.status==="healthy"?"text-green-500":"text-red-500"),l(),_(" ",e.healthCheck.database.status==="healthy"?"check_circle":"error"," "),l(2),_("",e.healthCheck.database.responseTime,"ms"),l(),p("ngClass",e.healthCheck.api.status==="healthy"?"bg-green-50":"bg-red-50"),l(4),p("ngClass",e.healthCheck.api.status==="healthy"?"text-green-500":"text-red-500"),l(),_(" ",e.healthCheck.api.status==="healthy"?"check_circle":"error"," "),l(2),_("",e.healthCheck.api.responseTime,"ms"),l(),p("ngClass",e.healthCheck.memory.status==="healthy"?"bg-green-50":"bg-yellow-50"),l(4),p("ngClass",e.healthCheck.memory.status==="healthy"?"text-green-500":"text-yellow-500"),l(),_(" ",e.healthCheck.memory.status==="healthy"?"check_circle":"warning"," "),l(2),_("",e.healthCheck.memory.usage,"%"),l(5),b(A(30,13,e.healthCheck.timestamp,"dd/MM/yyyy HH:mm:ss"))}}function ni(o,t){if(o&1){let e=k();n(0,"mat-dialog-content")(1,"div",96)(2,"div",78),s(3,"System Health Status"),r(),C(4,oi,31,16,"div",97),n(5,"div",82)(6,"button",98),g("click",function(){u(e);let a=c();return d(a.checkSystemHealth())}),s(7," Refresh Status "),r(),n(8,"button",84),s(9,"Close"),r()()()()}if(o&2){let e=c();l(4),p("ngIf",e.healthCheck)}}var P=class P{displayedColumns=[];ColumnName={stt:"#",codeId:"M\xE3 ch\u1ED1t kho",title:"Ti\xEAu \u0111\u1EC1",khoId:"Kho",ngaychot:"Ng\xE0y ch\u1ED1t",ghichu:"Ghi ch\xFA",isActive:"Tr\u1EA1ng th\xE1i",createdAt:"Ng\xE0y t\u1EA1o",order:"Th\u1EE9 t\u1EF1",details:"S\u1ED1 SP"};FilterColumns=JSON.parse(localStorage.getItem("ChotkhoColFilter")||"[]");Columns=[];paginator;sort;drawer;_ChotkhoService=y(N);_breakpointObserver=y(he);_router=y(le);_dialog=y(Te);_snackBar=y(z);Listchotkho=this._ChotkhoService.ListChotkho;page=this._ChotkhoService.page;totalPages=this._ChotkhoService.totalPages;total=this._ChotkhoService.total;pageSize=this._ChotkhoService.pageSize;chotkhoId=this._ChotkhoService.chotkhoId;isLoading=this._ChotkhoService.isLoading;isRefreshing=this._ChotkhoService.isRefreshing;lastUpdated=this._ChotkhoService.lastUpdated;dataSource=new j([]);EditList=[];isSearch=f(!1);searchParam={};performanceMetrics=f({loadTime:0,renderTime:0,totalItems:0,lastRefresh:null});selectedFile=null;selectedBackupFile=null;exportType="all";backupType="full";backupName="";isRestoreMode=!1;importProgress=0;exportProgress=0;backupProgress=0;healthCheck=null;constructor(){te(()=>{let t=performance.now();this.dataSource.data=this.Listchotkho(),this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page()-1,this.paginator.pageSize=this.pageSize(),this.paginator.length=this.total());let e=performance.now();this.performanceMetrics.update(i=>S(v({},i),{renderTime:e-t,totalItems:this.Listchotkho().length,lastRefresh:new Date}))})}ngOnInit(){return m(this,null,function*(){let t=performance.now();yield this._ChotkhoService.getAllChotkho(this.searchParam),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new j(this.Listchotkho()),this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer();let e=performance.now();this.performanceMetrics.update(i=>S(v({},i),{loadTime:e-t}))})}initializeColumns(){this.Columns=Object.entries(this.ColumnName).map(([t,e])=>({key:t,value:e,isShow:!0})),this.FilterColumns=this.FilterColumns.length?this.FilterColumns:this.Columns,localStorage.setItem("ChotkhoColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(t=>t.isShow).map(t=>t.key),this.ColumnName=this.FilterColumns.reduce((t,{key:e,value:i,isShow:a})=>a?S(v({},t),{[e]:i}):t,{})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getUpdatedCodeIds(){return m(this,null,function*(){yield this._ChotkhoService.getUpdatedCodeIds()})}setupDrawer(){this._breakpointObserver.observe([me.Handset]).subscribe(t=>{t.matches?this.drawer.mode="over":this.drawer.mode="over"})}toggleColumn(t){let e=this.FilterColumns.find(i=>i.key===t.key);e&&(e.isShow=!e.isShow)}FilterHederColumn(t,e){return t.filter((a,h,x)=>h===x.findIndex(Ct=>Ct[e]===a[e]))}ListFilter=[];onOutFilter(t){this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(t=>t.isShow).map(t=>t.key),this.ColumnName=this.FilterColumns.reduce((t,e)=>(e.isShow&&(t[e.key]=e.value),t),{}),localStorage.setItem("ChotkhoColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(t){let e=t.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(i=>i.value.toLowerCase().includes(e))}create(){this.drawer.open(),this._router.navigate(["admin/chotkho","new"])}CheckSelect(t){return!!this.EditList.some(e=>e.id===t.id)}openDeleteDialog(t){this._dialog.open(t,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(i=>{i==="true"&&this.DeleteListItem()})}DeleteListItem(){this.EditList.forEach(t=>{this._ChotkhoService.DeleteChotkho(t)}),this.EditList=[],this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}AddToEdit(t){this.EditList.find(i=>i.id===t.id)?this.EditList=this.EditList.filter(i=>i.id!==t.id):this.EditList.push(t)}CheckItemInEdit(t){return this.EditList.some(e=>e.id===t.id)}goToDetail(t){this.drawer.open(),this._ChotkhoService.setChotkhoId(t.id),this._router.navigate(["admin/chotkho",t.id])}trackByFn(t,e){return e.id}generateReport(){return m(this,null,function*(){if(yield this._ChotkhoService.getStatistics()){let e=yield this._ChotkhoService.generateReport({dateFrom:new Date(Date.now()-2592e6).toISOString(),dateTo:new Date().toISOString(),format:"json"});if(e){this._snackBar.open("B\xE1o c\xE1o \u0111\xE3 \u0111\u01B0\u1EE3c t\u1EA1o th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]});let i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(i),h=document.createElement("a");h.href=a,h.download=`bao-cao-chot-kho-${new Date().toISOString().split("T")[0]}.json`,h.click(),window.URL.revokeObjectURL(a)}}})}bulkUpdateStatus(t){return m(this,null,function*(){if(this.EditList.length===0){this._snackBar.open("Vui l\xF2ng ch\u1ECDn \xEDt nh\u1EA5t m\u1ED9t m\u1EE5c","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let e=this.EditList.map(a=>a.id);(yield this._ChotkhoService.bulkUpdateStatus(e,t))&&(this.EditList=[],this._snackBar.open(`C\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i th\xE0nh c\xF4ng cho ${e.length} m\u1EE5c`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}))})}showStatistics(){return m(this,null,function*(){let t=yield this._ChotkhoService.getStatistics();if(t){let e=`
        T\u1ED5ng s\u1ED1: ${t.total}
        \u0110ang ho\u1EA1t \u0111\u1ED9ng: ${t.active}
        Kh\xF4ng ho\u1EA1t \u0111\u1ED9ng: ${t.inactive}
        Ch\xEAnh l\u1EC7ch trung b\xECnh: ${t.averageChenhLech?.toFixed(3)||0}
      `;this._snackBar.open(e,"\u0110\xF3ng",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]})}})}advancedSearch(t){return m(this,null,function*(){this.searchParam=v(v({},this.searchParam),t),yield this._ChotkhoService.getAllChotkho(this.searchParam)})}refreshData(){return m(this,null,function*(){this.isSearch.set(!1),this.searchParam={},this.EditList=[],yield this._ChotkhoService.getAllChotkho(),this._snackBar.open("D\u1EEF li\u1EC7u \u0111\xE3 \u0111\u01B0\u1EE3c l\xE0m m\u1EDBi","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}smartRefresh(){return m(this,null,function*(){this.isSearch.set(!1),this.searchParam={},this.EditList=[];let t=this._snackBar.open("\u0110ang c\u1EADp nh\u1EADt d\u1EEF li\u1EC7u...","",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{yield this._ChotkhoService.getAllChotkho(),t.dismiss(),this._snackBar.open("D\u1EEF li\u1EC7u \u0111\xE3 \u0111\u01B0\u1EE3c c\u1EADp nh\u1EADt","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{t.dismiss(),this._snackBar.open("L\u1ED7i c\u1EADp nh\u1EADt d\u1EEF li\u1EC7u","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}importExcel(t){return m(this,null,function*(){let e=t.target.files[0];if(!e)return;let i=this._snackBar.open("\u0110ang import d\u1EEF li\u1EC7u...","",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{let a=yield this._ChotkhoService.importFromExcel(e,{validateData:!0,skipDuplicates:!0});i.dismiss(),a&&this._snackBar.open(`Import th\xE0nh c\xF4ng ${a.successCount}/${a.totalCount} b\u1EA3n ghi`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{i.dismiss(),this._snackBar.open("L\u1ED7i import file","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}t.target.value=""})}createBackup(t="full"){return m(this,null,function*(){let e=this._snackBar.open("\u0110ang t\u1EA1o backup...","",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{let i=yield this._ChotkhoService.backupData(t);e.dismiss(),i&&this._snackBar.open("Backup th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{e.dismiss(),this._snackBar.open("L\u1ED7i t\u1EA1o backup","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}optimizeSystem(){return m(this,null,function*(){let t=this._snackBar.open("\u0110ang t\u1ED1i \u01B0u h\xF3a h\u1EC7 th\u1ED1ng...","",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{let e=yield this._ChotkhoService.optimizePerformance();t.dismiss(),e&&this._snackBar.open("T\u1ED1i \u01B0u h\xF3a th\xE0nh c\xF4ng! C\u1EA3i thi\u1EC7n hi\u1EC7u su\u1EA5t","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{t.dismiss(),this._snackBar.open("L\u1ED7i t\u1ED1i \u01B0u h\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}checkSystemHealth(){return m(this,null,function*(){try{let t=yield this._ChotkhoService.getSystemHealth();if(t){let e=`
\u{1F3E5} S\u1EE8C KH\u1ECEE H\u1EC6 TH\u1ED0NG:
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u{1F4BE} Database: ${t.database?.status||"OK"}
\u{1F504} API: ${t.api?.responseTime||"< 100"}ms
\u{1F4CA} Memory: ${t.memory?.usage||"< 80"}%
\u{1F50B} CPU: ${t.cpu?.usage||"< 60"}%
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
        `;this._snackBar.open(e,"\u0110\xF3ng",{duration:8e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]})}}catch{this._snackBar.open("Kh\xF4ng th\u1EC3 ki\u1EC3m tra s\u1EE9c kh\u1ECFe h\u1EC7 th\u1ED1ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}downloadImportTemplate(t="standard"){return m(this,null,function*(){try{(yield this._ChotkhoService.generateImportTemplate(t))&&this._snackBar.open("\u0110\xE3 t\u1EA3i xu\u1ED1ng m\u1EABu import","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{this._snackBar.open("L\u1ED7i t\u1EA3i m\u1EABu import","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}exportAdvanced(t="excel"){return m(this,null,function*(){let e=this._snackBar.open(`\u0110ang export ${t.toUpperCase()}...`,"",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{let i=yield this._ChotkhoService.exportData(t,S(v({},this.searchParam),{selectedIds:this.EditList.map(a=>a.id),includeDetails:!0}));e.dismiss(),i&&this._snackBar.open(`Export ${t.toUpperCase()} th\xE0nh c\xF4ng`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{e.dismiss(),this._snackBar.open(`L\u1ED7i export ${t.toUpperCase()}`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}smartCheckChenhLech(){return m(this,null,function*(){if(!this.validateBeforeAction(this.EditList,"ki\u1EC3m tra ch\xEAnh l\u1EC7ch"))return;let t=this._snackBar.open("\u0110ang ki\u1EC3m tra ch\xEAnh l\u1EC7ch...","",{duration:0,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-info"]});try{let e=[];for(let a of this.EditList){let h=yield this._ChotkhoService.smartCheckChenhLech(a.id);h&&e.push(h)}t.dismiss();let i=e.reduce((a,h)=>a+(h.chenhLech||0),0);this._snackBar.open(`Ki\u1EC3m tra ho\xE0n t\u1EA5t. T\u1ED5ng ch\xEAnh l\u1EC7ch: ${i}`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:i===0?["snackbar-success"]:["snackbar-warning"]}),yield this.smartRefresh()}catch(e){t.dismiss(),this.handleOperationError("ki\u1EC3m tra ch\xEAnh l\u1EC7ch",e)}})}handleOperationError(t,e){console.error(`L\u1ED7i ${t}:`,e),this._snackBar.open(`C\xF3 l\u1ED7i x\u1EA3y ra khi ${t}`,"Th\u1EED l\u1EA1i",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]}).onAction().subscribe(()=>{this.smartRefresh()})}validateBeforeAction(t,e){return t.length===0?(this._snackBar.open(`Vui l\xF2ng ch\u1ECDn \xEDt nh\u1EA5t m\u1ED9t m\u1EE5c \u0111\u1EC3 ${e}`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),!1):!0}onPageSizeChange(t,e){let i=this.total(),a=t>i?i:t;t>i&&this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${i}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),this._ChotkhoService.pageSize.set(a),this._ChotkhoService.page.set(1),this._ChotkhoService.getAllChotkho(this.searchParam),e.closeMenu()}onPreviousPage(){return m(this,null,function*(){this.page()>1&&(this._ChotkhoService.page.set(this.page()-1),yield this._ChotkhoService.getAllChotkho(this.searchParam))})}onNextPage(){return m(this,null,function*(){this.page()<this.totalPages()&&(this._ChotkhoService.page.set(this.page()+1),yield this._ChotkhoService.getAllChotkho(this.searchParam))})}onFileSelected(t){let e=t.target.files[0];e&&(e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel")?this.selectedFile=e:this._snackBar.open("Please select a valid Excel file (.xlsx or .xls)","Close",{duration:3e3})}onBackupFileSelected(t){let e=t.target.files[0];e&&e.name.endsWith(".backup")?this.selectedBackupFile=e:this._snackBar.open("Please select a valid backup file (.backup)","Close",{duration:3e3})}startImport(){return m(this,null,function*(){if(!this.selectedFile)return;this.importProgress=0;let t=setInterval(()=>{this.importProgress+=5,this.importProgress>=95&&clearInterval(t)},100);try{yield this._ChotkhoService.importFromExcel(this.selectedFile,{}),this.importProgress=100,setTimeout(()=>{this.importProgress=0,this.selectedFile=null,this._dialog.closeAll()},500)}catch(e){clearInterval(t),this.importProgress=0,this.handleOperationError("Import failed",e)}})}startExport(){return m(this,null,function*(){this.exportProgress=0;let t=setInterval(()=>{this.exportProgress+=8,this.exportProgress>=95&&clearInterval(t)},150);try{yield this.exportExcel(),this.exportProgress=100,setTimeout(()=>{this.exportProgress=0,this._dialog.closeAll()},500)}catch(e){clearInterval(t),this.exportProgress=0,this.handleOperationError("Export failed",e)}})}startBackup(){return m(this,null,function*(){if(!this.backupName){this._snackBar.open("Please enter a backup name","Close",{duration:3e3});return}this.backupProgress=0;let t=setInterval(()=>{this.backupProgress+=6,this.backupProgress>=95&&clearInterval(t)},200);try{yield this._ChotkhoService.backupData(this.backupType),this.backupProgress=100,setTimeout(()=>{this.backupProgress=0,this.backupName="",this._dialog.closeAll()},500)}catch(e){clearInterval(t),this.backupProgress=0,this.handleOperationError("Backup failed",e)}})}startRestore(){return m(this,null,function*(){if(!this.selectedBackupFile){this._snackBar.open("Please select a backup file","Close",{duration:3e3});return}this.backupProgress=0;let t=setInterval(()=>{this.backupProgress+=7,this.backupProgress>=95&&clearInterval(t)},180);try{yield this._ChotkhoService.restoreFromBackup(this.selectedBackupFile),this.backupProgress=100,setTimeout(()=>{this.backupProgress=0,this.selectedBackupFile=null,this._dialog.closeAll()},500)}catch(e){clearInterval(t),this.backupProgress=0,this.handleOperationError("Restore failed",e)}})}exportExcel(){return m(this,null,function*(){try{let t=[];switch(this.exportType){case"all":t=this.Listchotkho();break;case"filtered":t=this.dataSource.filteredData;break;case"selected":t=this.EditList;break;default:t=this.Listchotkho()}yield this._ChotkhoService.exportData("excel",{data:t}),this._snackBar.open("Export completed successfully","Close",{duration:3e3})}catch(t){this.handleOperationError("Export failed",t)}})}clearAllCacheMethod(){return m(this,null,function*(){try{if("caches"in window){let e=yield caches.keys();yield Promise.all(e.map(i=>caches.delete(i)))}Object.keys(localStorage).forEach(e=>{(e.includes("chotkho")||e.includes("Chotkho"))&&localStorage.removeItem(e)}),yield this.smartRefresh(),this._snackBar.open("Cache cleared successfully","Close",{duration:3e3})}catch(t){this.handleOperationError("Clear cache failed",t)}})}importFromExcel(){let t=document.createElement("input");t.type="file",t.accept=".xlsx,.xls",t.onchange=e=>this.importExcel(e),t.click()}exportToExcel(){this.exportAdvanced("excel")}restoreFromBackup(){this.isRestoreMode=!0;let t=document.createElement("input");t.type="file",t.accept=".backup",t.onchange=e=>{this.onBackupFileSelected(e),this.selectedBackupFile&&this.startRestore()},t.click()}clearAllCache(){this.clearAllCacheMethod()}static \u0275fac=function(e){return new(e||P)};static \u0275cmp=G({type:P,selectors:[["app-listchotkho"]],viewQuery:function(e,i){if(e&1&&(F(je,5),F($,5),F(xt,7)),e&2){let a;B(a=V())&&(i.paginator=a.first),B(a=V())&&(i.sort=a.first),B(a=V())&&(i.drawer=a.first)}},decls:75,vars:19,consts:[["drawer",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["ImportDialog",""],["ExportDialog",""],["BackupDialog",""],["HealthDialog",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],[1,"p-2","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],["color","accent","matTooltip","Smart Refresh","mat-flat-button","",1,"flex","flex-row","items-center",3,"click","disabled"],[1,"w-full","flex","flex-row","space-x-4","justify-end","items-center"],[1,"flex","items-center","text-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-row","space-x-2","justify-center","items-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-icon-button","","color","primary",3,"click"],[1,"flex","flex-row","items-center"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","border","mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["class","mat-row border",4,"matNoDataRow"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-header-cell","",1,"flex","!border","!bg-slate-100","justify-center"],["mat-header-cell","","mat-sort-header","",1,"!border","whitespace-nowrap","!bg-slate-100"],["class","border","mat-cell","",4,"matCellDef"],["class","flex !border !bg-slate-100 justify-center","mat-header-cell","",4,"matHeaderCellDef"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"flex","flex-row","space-x-2","items-center","p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item","",3,"disabled"],["mat-menu-item",""],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","!border whitespace-nowrap !bg-slate-100","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","fieldsearch","ListFilter","filterItem"],["mat-cell","",1,"border"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"flex","justify-center","items-center","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","text-center"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"flex","justify-center","items-center","font-bold","text-blue-600",3,"click"],[1,"bg-blue-100","text-blue-800"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",1,"border"],[1,"mat-row","border"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],[1,"flex","flex-col","space-y-4","min-w-80"],[1,"font-bold","text-center"],[1,"flex","flex-col","space-y-2"],["type","file","accept",".xlsx,.xls",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],["class","flex flex-col space-y-2",4,"ngIf"],[1,"flex","flex-row","space-x-2","justify-center"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-flat-button","","color","warn","mat-dialog-close",""],["mode","determinate",3,"value"],[1,"text-sm","text-center"],["appearance","outline"],[3,"valueChange","value"],["value","all"],["value","filtered"],["value","selected"],["value","full"],["value","incremental"],["matInput","","placeholder","Enter backup name",3,"ngModelChange","ngModel"],["type","file","accept",".backup",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-green-50","file:text-green-700","hover:file:bg-green-100",3,"change"],[1,"flex","flex-col","space-y-4","min-w-96"],["class","flex flex-col space-y-3",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-col","space-y-3"],[1,"flex","justify-between","items-center","p-2","rounded",3,"ngClass"],[1,"font-medium"],[1,"flex","items-center","space-x-2"],[3,"ngClass"],[1,"text-sm"],[1,"flex","justify-between","items-center","p-2","rounded","bg-blue-50"]],template:function(e,i){if(e&1){let a=k();n(0,"mat-drawer-container",9)(1,"mat-drawer",10,0),w(3,"router-outlet"),r(),n(4,"div",11)(5,"div",12)(6,"div",13)(7,"div",14)(8,"div",15)(9,"input",16),g("keyup",function(x){return u(a),d(i.applyFilter(x))}),r(),n(10,"div",17)(11,"span",18),s(12,"search"),r()()(),n(13,"button",19),g("click",function(){return u(a),d(i.create())}),n(14,"mat-icon"),s(15,"add_circle"),r(),n(16,"span",20),s(17,"T\u1EA1o M\u1EDBi"),r()(),C(18,bt,5,0,"button",21),n(19,"button",22),g("click",function(){return u(a),d(i.smartRefresh())}),n(20,"mat-icon"),s(21,"refresh"),r(),n(22,"span",20),s(23,"Refresh"),r()()()(),n(24,"div",23)(25,"div",24)(26,"strong"),s(27),r(),s(28," - "),n(29,"strong"),s(30),r(),s(31),r(),n(32,"div",25)(33,"span"),s(34),r(),n(35,"span"),s(36,"Trang"),r()(),n(37,"div",26)(38,"span",27,1),s(40),r(),n(41,"mat-menu",null,2)(43,"div",28),g("click",function(x){return u(a),d(x.stopPropagation())}),n(44,"mat-form-field",29)(45,"mat-label"),s(46,"S\u1ED1 l\u01B0\u1EE3ng"),r(),n(47,"input",30),D("ngModelChange",function(x){return u(a),T(i.pageSize,x)||(i.pageSize=x),d(x)}),r()(),n(48,"button",31),g("click",function(){u(a);let x=L(39);return d(i.onPageSizeChange(i.pageSize(),x))}),n(49,"mat-icon"),s(50,"published_with_changes"),r()()()(),n(51,"div",32)(52,"button",33),g("click",function(){return u(a),d(i.onPreviousPage())}),n(53,"mat-icon"),s(54,"keyboard_arrow_left"),r()(),n(55,"button",33),g("click",function(){return u(a),d(i.onNextPage())}),n(56,"mat-icon"),s(57,"keyboard_arrow_right"),r()()()()()(),n(58,"div",34)(59,"table",35),H(60,Ut,4,2,"ng-container",36,X),C(62,jt,1,0,"tr",37)(63,qt,1,3,"tr",38)(64,Kt,3,0,"tr",39),r()()()(),C(65,Gt,11,0,"ng-template",null,3,I)(67,Xt,12,2,"ng-template",null,4,I)(69,Yt,21,3,"ng-template",null,5,I)(71,ii,12,6,"ng-template",null,6,I)(73,ni,10,1,"ng-template",null,7,I)}if(e&2){let a=L(42);l(),p("position","end"),l(17),p("ngIf",i.EditList.length>0),l(),p("disabled",i.isRefreshing),l(8),b((i.page()-1)*i.pageSize()+1),l(3),b(i.page()*i.pageSize()>i.total()?i.total():i.page()*i.pageSize()),l(),_(" / ",i.total()," m\u1EE5c "),l(3),Z("",i.page(),"/",i.totalPages()," "),l(4),p("matMenuTriggerFor",a),l(2),_("",i.pageSize()," m\u1EE5c"),l(7),M("ngModel",i.pageSize),p("ngModelOptions",ee(18,yt)),l(5),p("disabled",i.page()===1),l(3),p("disabled",i.page()===i.totalPages()),l(4),p("dataSource",i.dataSource),l(),U(i.displayedColumns),l(2),p("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),l(),p("matRowDefColumns",i.displayedColumns)}},dependencies:[ze,Ae,Ve,Re,Ne,$e,rt,Qe,Je,tt,Ye,Xe,it,Ze,et,ot,nt,at,Ge,$,Ke,qe,Ee,Se,be,we,xe,Ce,ke,se,ve,ye,ge,ue,de,We,Oe,pe,ae,ie,oe,ne,Me,Ie,Pe,Le,Ue,He,Be,De,Fe,mt,ht,st,pt,_t,gt],encapsulation:2,changeDetection:0})};O([ct(500)],P.prototype,"applyFilter",1),O([lt()],P.prototype,"FilterHederColumn",1);var ft=P;export{N as a,ft as b};
