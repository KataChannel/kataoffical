import './polyfills.server.mjs';
import{a as P}from"./chunk-6VJ4C2TP.mjs";import{a as U}from"./chunk-4IQTZFKK.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-73IBRO6I.mjs";import"./chunk-IIRWYDJB.mjs";import{a as w}from"./chunk-MNLIQRIR.mjs";import{a as b,d as I}from"./chunk-CKDCRGRD.mjs";import{a as R,b as T}from"./chunk-BKXW25XR.mjs";import{n as B,v as F,y as z}from"./chunk-4AD5S7TL.mjs";import"./chunk-YED64G76.mjs";import"./chunk-P5ZL7ANQ.mjs";import"./chunk-W5HS6BR5.mjs";import"./chunk-OOQP6T52.mjs";import"./chunk-2CBL4FZN.mjs";import{a as C,d as M}from"./chunk-PGSBKFQM.mjs";import{l as L}from"./chunk-EW4IWT3C.mjs";import{s as D}from"./chunk-U3LADLBJ.mjs";import{Cb as u,Dc as f,Jb as _,Sb as v,Tb as S,Vb as y,ec as n,fc as r,gc as k,kc as h,la as t,mb as g,pc as A,qb as m,rc as s,rd as x,ua as p,va as d}from"./chunk-4HXP3POQ.mjs";import"./chunk-KB5IWD3E.mjs";import{j as o}from"./chunk-RIAI3ORJ.mjs";var V=()=>[b,R];function j(a,i){if(a&1){let e=h();n(0,"div",1),k(1,"iframe",2),r(),n(2,"div",3)(3,"button",4),A("click",function(){p(e);let l=s();return d(l.onRegister())}),n(4,"mat-icon"),f(5,"how_to_reg"),r(),n(6,"span"),f(7,"\u0110\u0103ng K\xFD"),r()()()}if(a&2){let e=s();m(),y("src",e.SecurityTrustUrl(e.DetailLandingpage().contentHtml),g)}}var E=class a{_LandingpageService=t(U);_AffiliatelinkService=t(P);_UserService=t(w);sanitizer=t(L);DetailLandingpage=this._LandingpageService.DetailLandingpage;LinkAffiliate=this._AffiliatelinkService.ListAffiliatelink;Profile;_route=t(C);_router=t(M);constructor(){x(()=>o(this,null,function*(){yield this._UserService.getProfile(),this.Profile=this._UserService.profile(),this._route.paramMap.subscribe(i=>o(this,null,function*(){let e=i.get("slug");yield this._LandingpageService.getLandingpageBy({slug:e}),console.log(this.DetailLandingpage())})),this._route.queryParamMap.subscribe(i=>{let e=i.get("ref");e&&(console.log("Affiliate ref code:",e),this._AffiliatelinkService.Tracking(e))})}))}ngOnInit(){this._AffiliatelinkService.listenAffiliatelinkUpdates()}getAffiliateLink(i){console.log(i);let e=this.LinkAffiliate().find(l=>l.landingPageId==i.id);return console.log("affiliateLink",e),e?e?.landingPage?.slug+"/?ref="+e.codeId:null}SecurityTrustUrl(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}CreateAffiliateLink(i){return o(this,null,function*(){console.log(i),this.Profile.id;let e={landingPageId:i.id,createdById:this.Profile.id};yield this._AffiliatelinkService.CreateAffiliatelink(e),yield this._AffiliatelinkService.getAffiliateListBy({createdById:this.Profile.id}),console.log(this._AffiliatelinkService.ListAffiliatelink())})}CopyLinkAffiliate(i){}SharedAffiliate(i){}onRegister(){}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-detaillandingpage"]],decls:4,vars:0,consts:[[1,"h-screen","flex","flex-col","space-y-2","container","mx-auto"],[1,"iframe-container"],["width","100%","frameborder","0","allowfullscreen","",1,"h-screen-16",3,"src"],[1,"flex","flex-row","justify-center","space-x-2"],["mat-flat-button","","color","primary",1,"flex","flex-row","space-x-1",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0),_(1,j,8,1),v(2,1,V),S(),r())},dependencies:[D,F,I,T,z,B],encapsulation:2})};export{E as DetaillandingpageComponent};
