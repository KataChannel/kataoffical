{
  "version": 3,
  "sources": ["src/app/admin/kho/kho.service.ts"],
  "sourcesContent": ["import { Inject, Injectable, signal,Signal } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '../../../environments/environment.development';\r\nimport { StorageService } from '../../shared/utils/storage.service';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class KhoService {\r\n  constructor(\r\n    private _StorageService: StorageService,\r\n    private router: Router,\r\n  ) { }\r\n  ListKho = signal<any[]>([]);\r\n  DetailKho = signal<any>({});\r\n  khoId = signal<string | null>(null);\r\n  setKhoId(id: string | null) {\r\n    this.khoId.set(id);\r\n  }\r\n  // getListKho(): Signal<any[]> {    \r\n  //   return this.ListKho;\r\n  // }\r\n  // getDetailKho(): Signal<any | null> {\r\n  //   return this.DetailKho;\r\n  // }\r\n\r\n  async getTonKho(page: string, limit: string) {\r\n    try {\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + this._StorageService.getItem('token')\r\n        },\r\n      };\r\n      const response = await fetch(`${environment.APIURL}/kho/tonkho?page=${page}&limit=${limit}`, options);\r\n      if (!response.ok) {\r\n        if (response.status === 401) {\r\n          const result = JSON.stringify({ code: response.status, title: 'Vui lòng đăng nhập lại' });\r\n          this.router.navigate(['/errorserver'], { queryParams: { data: result } });\r\n        } else if (response.status === 403) {\r\n          const result = JSON.stringify({ code: response.status, title: 'Bạn không có quyền truy cập' });\r\n          this.router.navigate(['/errorserver'], { queryParams: { data: result } });\r\n        } else if (response.status === 500) {\r\n          const result = JSON.stringify({ code: response.status, title: 'Lỗi máy chủ, vui lòng thử lại sau' });\r\n          this.router.navigate(['/errorserver'], { queryParams: { data: result } });\r\n        } else {\r\n          const result = JSON.stringify({ code: response.status, title: 'Lỗi không xác định' });\r\n          this.router.navigate(['/errorserver'], { queryParams: { data: result } });\r\n        }\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      return console.error(error);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  async CreateKho(dulieu: any) {\r\n    try {\r\n      const options = {\r\n          method:'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(dulieu),\r\n        };\r\n        const response = await fetch(`${environment.APIURL}/kho`, options);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n\r\n        }\r\n        this.getAllKho()\r\n        this.khoId.set(data.id)\r\n    } catch (error) {\r\n        return console.error(error);\r\n    }\r\n  }\r\n\r\n    async getKhoBy(param: any) {\r\n      try {\r\n        const options = {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${this._StorageService.getItem('token')}`\r\n          },\r\n          body: JSON.stringify({ ...param}),\r\n        };\r\n        const response = await fetch(`${environment.APIURL}/kho/findby`, options);\r\n        if (!response.ok) {\r\n          \r\n        }\r\n        const data = await response.json();\r\n        this.ListKho.set(data.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n\r\n  async getAllKho() {\r\n    try {\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+this._StorageService.getItem('token')\r\n        },\r\n      };\r\n      const response = await fetch(`${environment.APIURL}/kho`, options);\r\n      if (!response.ok) {\r\n\r\n      }\r\n      const data = await response.json();         \r\n      this.ListKho.set(data)\r\n      return data  \r\n    } catch (error) {\r\n      return console.error(error);\r\n    }\r\n  }\r\n  async getKhoByid(id: any) {\r\n    try {\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      };\r\n      const response = await fetch(`${environment.APIURL}/kho/findid/${id}`, options);      \r\n      if (!response.ok) {\r\n        if (response.status === 401) {\r\n          const result  = JSON.stringify({ code:response.status,title:'Vui lòng đăng nhập lại' })\r\n          this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n          // this.Dangxuat()\r\n        } else if (response.status === 403) {\r\n          const result  = JSON.stringify({ code:response.status,title:'Bạn không có quyền truy cập' })\r\n          this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n          // this.Dangxuat()\r\n        } else if (response.status === 500) {\r\n          const result  = JSON.stringify({ code:response.status,title:'Lỗi máy chủ, vui lòng thử lại sau' })\r\n          this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n          // this.Dangxuat()\r\n        } else {\r\n          const result  = JSON.stringify({ code:response.status,title:'Lỗi không xác định' })\r\n          this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n        }\r\n      }\r\n      const data = await response.json();      \r\n      this.DetailKho.set(data)\r\n    } catch (error) {\r\n      return console.error(error);\r\n    }\r\n  }\r\n  async updateKho(dulieu: any) {\r\n    try {\r\n      const options = {\r\n          method:'PATCH',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(dulieu),\r\n        };\r\n        const response = await fetch(`${environment.APIURL}/kho/${dulieu.id}`, options);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n\r\n        }\r\n        this.getAllKho()\r\n        this.getKhoByid(dulieu.id)\r\n    } catch (error) {\r\n        return console.error(error);\r\n    }\r\n  }\r\n  async DeleteKho(item:any) {    \r\n    try {\r\n        const options = {\r\n            method:'DELETE',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          };\r\n          const response = await fetch(`${environment.APIURL}/kho/${item.id}`, options);\r\n          if (!response.ok) {\r\n            if (response.status === 401) {\r\n              const result  = JSON.stringify({ code:response.status,title:'Vui lòng đăng nhập lại' })\r\n              this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n            } else if (response.status === 403) {\r\n              const result  = JSON.stringify({ code:response.status,title:'Bạn không có quyền truy cập' })\r\n              this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n            } else if (response.status === 500) {\r\n              const result  = JSON.stringify({ code:response.status,title:'Lỗi máy chủ, vui lòng thử lại sau' })\r\n              this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n            } else {\r\n              const result  = JSON.stringify({ code:response.status,title:'Lỗi không xác định' })\r\n              this.router.navigate(['/errorserver'], { queryParams: {data:result}});\r\n            }\r\n          }\r\n          this.getAllKho()\r\n      } catch (error) {\r\n          return console.error(error);\r\n      }\r\n  }\r\n}"],
  "mappings": "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",
  "names": []
}
