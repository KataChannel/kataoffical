import './polyfills.server.mjs';
import{a as N}from"./chunk-6VJ4C2TP.mjs";import{a as j}from"./chunk-4IQTZFKK.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-73IBRO6I.mjs";import{c as Y,f as Z,h as $}from"./chunk-H3L23FAA.mjs";import"./chunk-IIRWYDJB.mjs";import{a as G}from"./chunk-ZTPYMUXG.mjs";import{a as O}from"./chunk-HX5GTBOW.mjs";import"./chunk-J375SJLK.mjs";import"./chunk-CNBUOVLN.mjs";import"./chunk-MQV7DUKR.mjs";import{a as M,d as H}from"./chunk-CKDCRGRD.mjs";import{b as q,g as J,j as Q,n as X,p as ee,q as te,u as ie,v as ne,x as ae,y as re}from"./chunk-6EN5YBJ6.mjs";import"./chunk-YED64G76.mjs";import{a as A,b as K}from"./chunk-BKXW25XR.mjs";import"./chunk-W5HS6BR5.mjs";import{a as W}from"./chunk-OOQP6T52.mjs";import"./chunk-2CBL4FZN.mjs";import"./chunk-P5ZL7ANQ.mjs";import{a as z,d as R}from"./chunk-PGSBKFQM.mjs";import{l as F}from"./chunk-EW4IWT3C.mjs";import{o as T,s as V}from"./chunk-U3LADLBJ.mjs";import{Cb as L,Cc as P,Dc as o,Jb as d,Kc as D,Lc as v,Mc as k,Oc as w,Sb as x,Tb as y,Vb as u,Wc as B,ec as i,fc as a,gc as C,kc as S,la as l,mb as U,pc as _,qb as h,rc as s,rd as I,ua as f,va as m,wa as b,xa as E}from"./chunk-4HXP3POQ.mjs";import"./chunk-KB5IWD3E.mjs";import{j as g}from"./chunk-RIAI3ORJ.mjs";var se=()=>[T,M,A],ce=()=>[ie,ee,te,M,A,ae,q,J,Q],oe=()=>({standalone:!0});function pe(r,t){if(r&1&&C(0,"iframe",6),r&2){let e=s(2);u("src",e.SafeUrl,U)}}function fe(r,t){if(r&1){let e=S();i(0,"div",2),d(1,pe,1,1,"iframe",3),a(),i(2,"div",4)(3,"button",5),_("click",function(){f(e);let n=s(),p=P(5);return m(n.openDangkyDialog(p))}),i(4,"mat-icon"),o(5,"how_to_reg"),a(),i(6,"span"),o(7,"\u0110\u0103ng K\xFD"),a()()()}if(r&2){let e=s();h(),u("ngIf",e.SafeUrl)}}function me(r,t){if(r&1){let e=S();i(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),o(4,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),a(),i(5,"input",11),k("ngModelChange",function(n){f(e);let p=s(2);return v(p.User.phone,n)||(p.User.phone=n),m(n)}),a(),i(6,"mat-icon",12),o(7,"call"),a()(),i(8,"mat-form-field",10)(9,"mat-label"),o(10,"M\u1EADt kh\u1EA9u"),a(),i(11,"input",13),_("keyup.enter",function(){f(e);let n=s(2);return m(n.Dangky())}),k("ngModelChange",function(n){f(e);let p=s(2);return v(p.User.password,n)||(p.User.password=n),m(n)}),a(),i(12,"mat-icon",12),o(13,"lock"),a()(),i(14,"div")(15,"button",14),_("click",function(){f(e);let n=s(2);return m(n.Dangky())}),i(16,"span",15)(17,"mat-icon"),o(18,"how_to_reg"),a(),i(19,"span"),o(20,"\u0110\u0103ng K\xFD"),a()()()(),i(21,"div",16),o(22," Ho\u1EB7c \u0110\u0103ng K\xFD B\u1EB1ng"),a(),i(23,"div",17)(24,"div",18),_("click",function(){f(e);let n=s(2);return m(n.loginGoogle())}),b(),i(25,"svg",19),C(26,"path",20)(27,"path",21)(28,"path",22)(29,"path",23),a(),E(),i(30,"span"),o(31,"Gmail"),a()()()()()}if(r&2){let e=s(2);h(5),D("ngModel",e.User.phone),u("ngModelOptions",w(6,oe))("placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),h(6),D("ngModel",e.User.password),u("ngModelOptions",w(7,oe))("placeholder","M\u1EADt kh\u1EA9u")}}function ge(r,t){r&1&&(i(0,"mat-dialog-content")(1,"div",7),d(2,me,32,8),x(3,2,ce),y(),a()())}var le=class r{_LandingpageService=l(j);_AffiliatelinkService=l(N);_UserService=l(G);_StorageService=l(W);sanitizer=l(F);DetailLandingpage=this._LandingpageService.DetailLandingpage;LinkAffiliate=this._AffiliatelinkService.ListAffiliatelink;Profile;SafeUrl;affiliateCode;_route=l(z);_router=l(R);_dialog=l(Y);_snackBar=l(O);constructor(){I(()=>g(this,null,function*(){this._StorageService.getItem("token")&&(yield this._UserService.getProfile(),this.Profile=this._UserService.profile()),this._route.paramMap.subscribe(t=>g(this,null,function*(){let e=t.get("slug");yield this._LandingpageService.getLandingpageBy({slug:e}),this.SafeUrl=this.SecurityTrustUrl(this.DetailLandingpage().contentHtml)})),this._route.queryParamMap.subscribe(t=>{let e=t.get("ref");e&&(this.affiliateCode=e,console.log("Affiliate ref code:",this.affiliateCode),this._AffiliatelinkService.Tracking(this.affiliateCode))})}))}ngOnInit(){this._AffiliatelinkService.listenAffiliatelinkUpdates()}getAffiliateLink(t){console.log(t);let e=this.LinkAffiliate().find(n=>n.landingPageId==t.id);return console.log("affiliateLink",e),e?e?.landingPage?.slug+"/?ref="+e.codeId:null}SecurityTrustUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}CreateAffiliateLink(t){return g(this,null,function*(){console.log(t),this.Profile.id;let e={landingPageId:t.id,createdById:this.Profile.id};yield this._AffiliatelinkService.CreateAffiliatelink(e),yield this._AffiliatelinkService.getAffiliateListBy({createdById:this.Profile.id}),console.log(this._AffiliatelinkService.ListAffiliatelink())})}CopyLinkAffiliate(t){}SharedAffiliate(t){}onRegister(){}openDangkyDialog(t){if(this.Profile){this._snackBar.open("B\u1EA1n \u0111ang l\xE0 th\xE0nh vi\xEAn","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}this._dialog.open(t,{hasBackdrop:!0,disableClose:!1}).afterClosed().subscribe(c=>{c=="true"&&this.onRegister()})}loginGoogle(){this._UserService.loginWithGoogle()}User={};Dangky(){return g(this,null,function*(){if(this.User.affiliateCode=this.affiliateCode,this.User.phone&&this.User.phone!==""&&this.User.password&&this.User.password!=="")try{this._UserService.register(this.User).then(t=>{console.log(t),t&&t.statusCode==201&&(this._snackBar.open("\u0110\u0103ng k\xFD th\xE0nh c\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),setTimeout(()=>{this._dialog.closeAll(),this._router.navigate(["/welcome"])},1e3))})}catch(t){console.error("Login error:",t)}else this._snackBar.open("Vui l\xF2ng \u0111i\u1EC1n \u0111\u1EE7 th\xF4ng tin","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-detaillandingpage"]],decls:6,vars:0,consts:[["DangkyDialog",""],[1,"h-screen","flex","flex-col","space-y-2","container","mx-auto"],[1,"iframe-container"],["width","100%","class","h-screen-16","frameborder","0",3,"src",4,"ngIf"],[1,"flex","flex-row","justify-center","space-x-2"],["mat-flat-button","","color","primary",1,"flex","flex-row","space-x-1",3,"click"],["width","100%","frameborder","0",1,"h-screen-16",3,"src"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"relative","min-w-96","h-full","flex","flex-col","p-8"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","text","matInput","",1,"w-full",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matPrefix","",1,"material-symbols-outlined"],["type","password","matInput","",1,"w-full",3,"keyup.enter","ngModelChange","ngModel","ngModelOptions","placeholder"],["color","primary","mat-flat-button","",3,"click"],[1,"flex","flex-row","space-x-1"],[1,"text-center","font-bold"],[1,"cursor-pointer","w-full"],[1,"border","flex","space-x-2","items-center","justify-center","p-2","rounded-lg","bg-slate-100","hover:bg-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","100","height","100","viewBox","0 0 48 48",1,"!w-8","!h-8"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"]],template:function(e,c){e&1&&(i(0,"div",1),d(1,fe,8,1),x(2,1,se),y(),a(),d(4,ge,5,0,"ng-template",null,0,B))},dependencies:[V,ne,H,K,re,X,$,Z],encapsulation:2})};export{le as DetaillandingpageComponent};
