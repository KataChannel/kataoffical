import './polyfills.server.mjs';
import{a as R}from"./chunk-DHMJTHFT.mjs";import{a as rt}from"./chunk-PDYHWB5Z.mjs";import{a as it}from"./chunk-7LTMKYPE.mjs";import{a as je,b as Be}from"./chunk-BNX6HL3E.mjs";import{a as A,b as $e,c as qe}from"./chunk-72Z7B4L4.mjs";import{a as Ae,b as ze,c as He,d as Ne,e as Qe,g as Ge,h as Xe,j as Ke,k as We,m as Je,n as Ye,p as Ze,q as et,r as tt,s as nt}from"./chunk-O5QB3POD.mjs";import{c as Se,d as Ue,f as Ee,h as ke}from"./chunk-VVGSYJK4.mjs";import{a as pe,b as ge,c as fe}from"./chunk-VKZDLN2B.mjs";import{a as xe,b as Me,c as be,d as Pe}from"./chunk-ZYVGB4QF.mjs";import{b as Re}from"./chunk-LFVPDMHP.mjs";import{A as De,B as Ve,b as we,g as Oe,j as ve,p as ye,r as Le,t as Te,x as Fe,y as Ie}from"./chunk-EPDP2QN3.mjs";import{a as Ce,b as he}from"./chunk-ADGAW7R6.mjs";import{a as _e}from"./chunk-VT4NXQX5.mjs";import{a as ue}from"./chunk-P5O5LZCS.mjs";import{a as ce,c as de,e as me}from"./chunk-FMDQCH3J.mjs";import{b as se,d as le}from"./chunk-N6ZUYKC5.mjs";import{o as re,u as oe,z as ae}from"./chunk-OZK2OCZT.mjs";import{Bc as I,Cc as D,Dc as V,Fb as N,Gc as y,Hc as l,Ic as w,Jc as P,Kc as W,Mb as M,Mc as J,Nc as Y,Oc as Z,Qc as ee,Ra as g,Wc as te,Yb as C,Yc as ne,ac as Q,ad as ie,dc as v,fc as G,gc as L,hc as T,ic as o,ja as E,jc as s,kc as F,lc as X,mc as K,oa as H,oc as b,pa as k,tb as c,tc as f,vc as m,xd as S,ya as _,yb as O,za as p}from"./chunk-TKMPR5S6.mjs";import{a as $,h as q,j as h}from"./chunk-RIAI3ORJ.mjs";var z=class i{constructor(e){this.storageService=e}_allUsers=g([]);_searchTerm=g("");_currentPage=g(1);_pageSize=g(50);_isLoading=g(!1);_selectedUsers=g(new Set);_statusFilter=g("all");_currentUser=g(null);allUsers=this._allUsers.asReadonly();searchTerm=this._searchTerm.asReadonly();currentPage=this._currentPage.asReadonly();pageSize=this._pageSize.asReadonly();isLoading=this._isLoading.asReadonly();selectedUsers=this._selectedUsers.asReadonly();statusFilter=this._statusFilter.asReadonly();currentUser=this._currentUser.asReadonly();filteredUsers=S(()=>{let e=this._allUsers(),t=this._statusFilter();t!=="all"&&(e=e.filter(r=>t==="active"?r.isActive:!r.isActive));let n=this._searchTerm().toLowerCase();return n&&(e=e.filter(r=>r.email?.toLowerCase().includes(n)||r.profile?.name?.toLowerCase().includes(n)||r.SDT?.toLowerCase().includes(n))),e});totalItems=S(()=>this.filteredUsers().length);totalPages=S(()=>Math.ceil(this.totalItems()/this._pageSize()));paginatedUsers=S(()=>{let e=(this._currentPage()-1)*this._pageSize(),t=e+this._pageSize();return this.filteredUsers().slice(e,t)});graphqlService=k(R);loadAllUsers(e=!1){return h(this,null,function*(){if(!e&&this._allUsers().length>0)return this._allUsers();this._isLoading.set(!0);try{let t={orderBy:{createdAt:"desc"},include:{roles:{include:{role:{include:{permissions:{include:{permission:!0}}}}}}}},n=yield this.graphqlService.findMany("user",t);return this._allUsers.set(n),this._currentPage.set(1),n}catch(t){throw console.error("Error loading users:",t),t}finally{this._isLoading.set(!1)}})}createUser(e){return h(this,null,function*(){this._isLoading.set(!0);try{let t={email:e.email,password:e.password,SDT:e.SDT,isActive:e.isActive??!0},n=yield this.graphqlService.createOne("user",t,{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}});if(e.roleIds&&e.roleIds.length>0){yield this.assignRolesToUser(n.id,e.roleIds);let a=yield this.getUserById(n.id);if(a){let d=this._allUsers();return this._allUsers.set([a,...d.filter(u=>u.id!==n.id)]),a}}let r=this._allUsers();return this._allUsers.set([n,...r]),n}catch(t){throw console.error("Error creating user:",t),t}finally{this._isLoading.set(!1)}})}updateUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let n=$({},t);delete n.roles,delete n.permissions,delete n.profile,delete n.userRoles,Object.keys(n).forEach(u=>{let x=n[u];x&&typeof x=="object"&&Array.isArray(x)&&x.some(B=>B&&typeof B=="object"&&Object.keys(B).length>2)&&(console.warn(`Removing complex array field '${u}' from user update`),delete n[u])}),console.log("Updating user with cleaned data:",{id:e,originalKeys:Object.keys(t),cleanedKeys:Object.keys(n)});let r=yield this.graphqlService.updateOne("user",{id:e},n,{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}}),a=this._allUsers(),d=a.findIndex(u=>u.id===e);if(d!==-1){let u=[...a];u[d]=r,this._allUsers.set(u)}return r}catch(n){throw console.error("Error updating user:",n),n}finally{this._isLoading.set(!1)}})}deleteUser(e){return h(this,null,function*(){this._isLoading.set(!0);try{try{yield this.graphqlService.deleteOne("user",{id:e})}catch(a){console.warn("User already deleted or not found:",a)}let n=this._allUsers().filter(a=>a.id!==e);this._allUsers.set(n);let r=new Set(this._selectedUsers());r.delete(e),this._selectedUsers.set(r)}catch(t){throw console.error("Error deleting user:",t),t}finally{this._isLoading.set(!1)}})}getUserById(e){return h(this,null,function*(){try{return yield this.graphqlService.findUnique("user",{id:e},{include:{roles:{include:{role:{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}}}}}}}})}catch(t){return console.error("Error getting user by id:",t),null}})}assignRolesToUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let n=t.map(a=>({userId:e,roleId:a}));yield this.graphqlService.batchCreate("userRole",n);let r=yield this.getUserById(e);if(r){let a=this._allUsers(),d=a.findIndex(u=>u.id===e);if(d!==-1){let u=[...a];u[d]=r,this._allUsers.set(u)}}}catch(n){throw console.error("Error assigning roles to user:",n),n}finally{this._isLoading.set(!1)}})}removeRoleFromUser(e,t){return h(this,null,function*(){this._isLoading.set(!0);try{let r=(yield this.getUserById(e))?.roles?.find(a=>a.roleId===t);if(r){try{yield this.graphqlService.deleteOne("userRole",{id:r.id})}catch(d){console.warn("UserRole already deleted or not found:",d)}let a=yield this.getUserById(e);if(a){let d=this._allUsers(),u=d.findIndex(x=>x.id===e);if(u!==-1){let x=[...d];x[u]=a,this._allUsers.set(x)}}}else console.warn(`UserRole not found for userId: ${e}, roleId: ${t}`)}catch(n){throw console.error("Error removing role from user:",n),n}finally{this._isLoading.set(!1)}})}setSearchTerm(e){this._searchTerm.set(e),this._currentPage.set(1)}setStatusFilter(e){this._statusFilter.set(e),this._currentPage.set(1)}setPage(e){e>=1&&e<=this.totalPages()&&this._currentPage.set(e)}setPageSize(e){this._pageSize.set(e),this._currentPage.set(1)}nextPage(){this._currentPage()<this.totalPages()&&this._currentPage.set(this._currentPage()+1)}previousPage(){this._currentPage()>1&&this._currentPage.set(this._currentPage()-1)}toggleUserSelection(e){let t=new Set(this._selectedUsers());t.has(e)?t.delete(e):t.add(e),this._selectedUsers.set(t)}selectAllCurrentPage(){let e=new Set(this._selectedUsers());this.paginatedUsers().forEach(t=>{e.add(t.id)}),this._selectedUsers.set(e)}deselectAllCurrentPage(){let e=new Set(this._selectedUsers());this.paginatedUsers().forEach(t=>{e.delete(t.id)}),this._selectedUsers.set(e)}clearSelection(){this._selectedUsers.set(new Set)}isSelected(e){return this._selectedUsers().has(e)}get selectedCount(){return this._selectedUsers().size}get selectedIds(){return Array.from(this._selectedUsers())}findUserById(e){return this._allUsers().find(t=>t.id===e)}getUsersByRole(e){return this._allUsers().filter(t=>t.roles?.some(n=>n.roleId===e))}getActiveUsers(){return this._allUsers().filter(e=>e.isActive)}getUserPermissions(e){let t=this.findUserById(e);if(!t||!t.roles)return[];let n=[];return t.roles.forEach(r=>{r.role.permissions&&n.push(...r.role.permissions)}),n.filter((r,a,d)=>a===d.findIndex(u=>u.id===r.id))}hasPermission(e,t){return this.getUserPermissions(e).some(r=>r.codeId===t)}clearCache(){this._allUsers.set([]),this._searchTerm.set(""),this._statusFilter.set("all"),this._currentPage.set(1),this.clearSelection(),this._currentUser.set(null)}refreshData(){return this.loadAllUsers(!0)}setCurrentUser(e){this._currentUser.set(e)}clearCurrentUser(){this._currentUser.set(null)}static \u0275fac=function(t){return new(t||i)(H(_e))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var j=class i{_isOpen=g(!1);isOpen=this._isOpen.asReadonly();open(){this._isOpen.set(!0)}close(){this._isOpen.set(!1)}toggle(){this._isOpen.update(e=>!e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var ct=["drawer"],dt=()=>({standalone:!0}),mt=(i,e)=>e.key,ut=(i,e)=>e.id;function _t(i,e){if(i&1){let t=b();o(0,"button",36),f("click",function(){_(t);let r=m(),a=y(64);return p(r.openDeleteDialog(a))}),o(1,"mat-icon"),l(2,"delete"),s(),o(3,"span",16),l(4,"Xo\xE1"),s()()}}function pt(i,e){if(i&1){let t=b();o(0,"button",49),f("click",function(r){_(t);let a=m().$implicit;return m(4).toggleColumn(a),p(r.stopPropagation())}),o(1,"mat-icon"),l(2),s(),o(3,"span"),l(4),s()()}if(i&2){let t=m().$implicit;C("disabled",!0),c(2),w(t.isShow?"check_box":"check_box_outline_blank"),c(2),w(t.value)}}function gt(i,e){if(i&1){let t=b();o(0,"button",50),f("click",function(r){_(t);let a=m().$implicit;return m(4).toggleColumn(a),p(r.stopPropagation())}),o(1,"mat-icon"),l(2),s(),o(3,"span"),l(4),s()()}if(i&2){let t=m().$implicit;c(2),w(t.isShow?"check_box":"check_box_outline_blank"),c(2),w(t.value)}}function ft(i,e){if(i&1&&M(0,pt,5,3,"button",47)(1,gt,5,2,"button",48),i&2){let t=e.$implicit;v(t.key=="stt"?0:1)}}function Ct(i,e){if(i&1){let t=b();o(0,"th",37)(1,"button",41)(2,"mat-icon"),l(3,"tune"),s()(),o(4,"mat-menu",null,4)(6,"div",42)(7,"mat-form-field",43)(8,"input",44),f("input",function(r){_(t);let a=m(3);return p(a.doFilterColumns(r))})("click",function(r){return _(t),p(r.stopPropagation())}),s(),o(9,"mat-icon",45),l(10,"search"),s()(),o(11,"button",27),f("click",function(){_(t);let r=m(3);return p(r.updateDisplayedColumns())}),o(12,"mat-icon"),l(13,"check_circle"),s()()(),o(14,"div",46),L(15,ft,2,1,null,null,mt),s()()()}if(i&2){let t=y(5),n=m(3);c(),C("matMenuTriggerFor",t),c(14),T(n.FilterColumns)}}function ht(i,e){i&1&&M(0,Ct,17,1,"th",40)}function xt(i,e){if(i&1){let t=b();o(0,"th",38)(1,"span",52),l(2),s(),o(3,"app-searchfilter",53),f("OutFilter",function(r){_(t);let a=m(3);return p(a.onOutFilter(r))}),s()()}if(i&2){let t=m(2).$implicit,n=m();c(2),P(" ",n.ColumnName[t]," "),c(),C("icon","filter_alt")("ListItem",n.Listuser())("fieldsearch",t)("ListFilter",n.ListFilter)("filterItem",n.FilterHederColumn(n.dataSource.filteredData,t))}}function Mt(i,e){i&1&&M(0,xt,4,6,"th",51)}function bt(i,e){if(i&1){let t=b();o(0,"span",58),f("click",function(){_(t);let r=m().$implicit,a=m(2);return p(a.goToDetail(r))}),l(1),s()}if(i&2){let t=m().$implicit,n=m().$implicit;c(),P(" ",t[n]," ")}}function Pt(i,e){i&1&&(o(0,"mat-icon"),l(1,"check"),s())}function wt(i,e){if(i&1&&(o(0,"span"),l(1),s()),i&2){let t=m(2).index;c(),w(t+1)}}function Ot(i,e){if(i&1){let t=b();o(0,"span",59),f("click",function(){_(t);let r=m().$implicit,a=m(2);return p(a.AddToEdit(r))}),M(1,Pt,2,0,"mat-icon")(2,wt,2,1,"span"),s()}if(i&2){let t=m().$implicit,n=m(2);c(),v(n.CheckSelect(t)?1:2)}}function vt(i,e){if(i&1&&(o(0,"span",57),l(1),te(2,"date"),s()),i&2){let t=m().$implicit,n=m().$implicit;c(),P(" ",ne(2,1,t[n],"dd/MM/yyyy")," ")}}function yt(i,e){i&1&&(o(0,"mat-icon",60),l(1,"check_circle"),s())}function St(i,e){i&1&&(o(0,"mat-icon",61),l(1,"cancel"),s())}function Ut(i,e){if(i&1&&(o(0,"span",57),M(1,yt,2,0,"mat-icon",60)(2,St,2,0,"mat-icon",61),s()),i&2){let t=m().$implicit,n=m().$implicit;c(),v(t[n]?1:2)}}function Et(i,e){if(i&1&&(o(0,"span",62),l(1),s()),i&2){let t=e.$implicit;c(),P(" ",t.role.name," ")}}function kt(i,e){if(i&1&&(o(0,"div",57),L(1,Et,2,1,"span",62,ut),s()),i&2){let t=m().$implicit;c(),T(t.roles)}}function Lt(i,e){if(i&1&&(o(0,"span",57),l(1),s()),i&2){let t=m().$implicit,n=m().$implicit;c(),P(" ",t[n]," ")}}function Tt(i,e){if(i&1&&(o(0,"td",54),M(1,bt,2,1,"span",55)(2,Ot,3,1,"span",56)(3,vt,3,4,"span",57)(4,Ut,3,1,"span",57)(5,kt,3,0,"div",57)(6,Lt,2,1,"span",57),s()),i&2){let t,n=m().$implicit;c(),v((t=n)==="email"?1:t==="stt"?2:t==="createdAt"?3:t==="isActive"?4:t==="roles"?5:6)}}function Ft(i,e){if(i&1&&(X(0,32),M(1,ht,1,0,"th",37)(2,Mt,1,0,"th",38)(3,Tt,7,1,"td",39),K()),i&2){let t=e.$implicit;C("matColumnDef",t),c(),v(t=="stt"?1:2)}}function It(i,e){i&1&&F(0,"tr",63)}function Dt(i,e){if(i&1&&F(0,"tr",64),i&2){let t=e.$implicit,n=m();Q("hover:bg-slate-50 ",n.CheckItemInEdit(t)?"!bg-blue-50":"","")}}function Vt(i,e){i&1&&(o(0,"tr",65)(1,"td",66),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),s()())}function Rt(i,e){if(i&1&&(o(0,"mat-dialog-content")(1,"div",67)(2,"div",68),l(3,"X\xE1c Nh\u1EADn"),s(),o(4,"div"),l(5),s(),o(6,"div",69)(7,"button",70),l(8,"\u0110\u1ED3ng \xDD"),s(),o(9,"button",71),l(10,"Hu\u1EF7 B\u1ECF"),s()()()()),i&2){let t=m();c(5),P("B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 ",t.EditList.length," user kh\xF4ng?")}}var U=class U{constructor(e,t,n,r,a){this.userGraphQLService=e;this.dialog=t;this.router=n;this.snackBar=r;this.drawerService=a}displayedColumns=["stt","email","name","SDT","isActive","roles","createdAt"];AllColumn=["stt","email","name","SDT","isActive","roles","createdAt"];ColumnName={stt:"#",email:"Email",name:"H\u1ECD v\xE0 t\xEAn",SDT:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",isActive:"Tr\u1EA1ng th\xE1i",roles:"Vai tr\xF2",createdAt:"Ng\xE0y t\u1EA1o"};FilterColumns=[];dataSource=new nt([]);paginator;sort;drawer;_GraphqlService=k(R);Listuser=g([]);isLoading;ListFilter=[];EditList=[];page=g(1);pageSize=g(50);total=g(0);totalPages=g(1);ngOnInit(){return h(this,null,function*(){this.isLoading=this.userGraphQLService.isLoading,this.initializeColumns(),yield this.loadUsers()})}ngAfterViewInit(){}initializeColumns(){this.FilterColumns=this.AllColumn.map(e=>({key:e,value:this.ColumnName[e],isShow:this.displayedColumns.includes(e)}))}loadUsers(){return h(this,null,function*(){try{let e=yield this.userGraphQLService.loadAllUsers();this.dataSource.data=e,this.Listuser.set(e),this.total.set(e.length),this.updatePagination()}catch(e){this.snackBar.open("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u: "+e.message,"\u0110\xF3ng",{duration:3e3})}})}updatePagination(){let e=this.dataSource.data.length;this.total.set(e),this.totalPages.set(Math.ceil(e/this.pageSize()))}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.page.set(1),this.updatePagination()}onPageSizeChange(e,t){this.pageSize.set(e),this.page.set(1),this.updatePagination(),t&&t.closeMenu()}onNextPage(){this.page()<this.totalPages()&&this.page.set(this.page()+1)}onPreviousPage(){this.page()>1&&this.page.set(this.page()-1)}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.AllColumn.map(n=>({key:n,value:this.ColumnName[n],isShow:this.displayedColumns.includes(n)})).filter(n=>n.value.toLowerCase().includes(t))}toggleColumn(e){e.isShow=!e.isShow}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key)}FilterHederColumn(e,t){return e.filter((r,a,d)=>a===d.findIndex(u=>u[t]===r[t]))}onOutFilter(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilters(){let e=[...this.Listuser()];this.ListFilter.forEach(t=>{t.values&&t.values.length>0&&(e=e.filter(n=>t.values.includes(n[t.field])))}),this.dataSource.data=e,this.page.set(1),this.updatePagination()}create(){this.router.navigate(["/admin/user/new"],{relativeTo:null})}goToDetail(e){this.router.navigate(["/admin/user/"+e.id],{relativeTo:null})}AddToEdit(e){let t=this.EditList.findIndex(n=>n.id===e.id);t>-1?this.EditList.splice(t,1):this.EditList.push(e)}CheckSelect(e){return this.EditList.some(t=>t.id===e.id)}CheckItemInEdit(e){return this.EditList.some(t=>t.id===e.id)}openDeleteDialog(e){this.dialog.open(e).afterClosed().subscribe(n=>{n&&this.deleteSelectedUsers()})}deleteSelectedUsers(){return h(this,null,function*(){try{for(let e of this.EditList)yield this.userGraphQLService.deleteUser(e.id);this.snackBar.open(`\u0110\xE3 x\xF3a ${this.EditList.length} user th\xE0nh c\xF4ng`,"\u0110\xF3ng",{duration:3e3}),this.EditList=[],yield this.loadUsers()}catch(e){this.snackBar.open("L\u1ED7i khi x\xF3a user: "+e.message,"\u0110\xF3ng",{duration:3e3})}})}ExportUser(){return h(this,null,function*(){let e=yield this._GraphqlService.findAll("User",{aggressiveCache:!0,take:1e4,enableParallelFetch:!0,select:{id:!0,email:!0,SDT:!0,name:!0,roles:{select:{role:{select:{name:!0,permissions:{select:{permission:{select:{name:!0}}}}}}}}}});console.log(e);let t=e.data.map(d=>({email:d.email,SDT:d.SDT,roles:d.roles.map(u=>u.role.name).join(", "),permissions:d.roles.flatMap(u=>u.role.permissions.map(x=>x.permission.name)).join(", ")})),n=yield import("./chunk-QB2D4H5V.mjs"),r=n.utils.json_to_sheet(t),a=n.utils.book_new();n.utils.book_append_sheet(a,r,"Users"),n.writeFile(a,"users-export.xlsx")})}static \u0275fac=function(t){return new(t||U)(O(z),O(Se),O(le),O(ue),O(j))};static \u0275cmp=N({type:U,selectors:[["app-listuser"]],viewQuery:function(t,n){if(t&1&&(I(je,5),I(A,5),I(ct,5)),t&2){let r;D(r=V())&&(n.paginator=r.first),D(r=V())&&(n.sort=r.first),D(r=V())&&(n.drawer=r.first)}},decls:65,vars:18,consts:[["drawer",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],[1,"p-2","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm User...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["matTooltip","T\u1EA3i xu\u1ED1ng file excel","color","primary","mat-icon-button","",3,"click"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],[1,"w-full","flex","flex-row","space-x-4","justify-end","items-center"],[1,"flex","items-center","text-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-row","space-x-2","justify-center","items-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-icon-button","","color","primary",3,"click"],[1,"flex","flex-row","items-center"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","border","mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["class","mat-row border",4,"matNoDataRow"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-header-cell","",1,"!border","!bg-slate-100","justify-center"],["mat-header-cell","","mat-sort-header","",1,"!border","whitespace-nowrap","!bg-slate-100"],["class","border","mat-cell","",4,"matCellDef"],["class","!border !bg-slate-100 justify-center","mat-header-cell","",4,"matHeaderCellDef"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"flex","flex-row","space-x-2","items-center","p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item","",3,"disabled"],["mat-menu-item",""],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","!border whitespace-nowrap !bg-slate-100","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","fieldsearch","ListFilter","filterItem"],["mat-cell","",1,"border"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"flex","justify-center","items-center","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"flex","justify-center","items-center","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],[1,"inline-block","bg-blue-100","text-blue-800","text-xs","px-2","py-1","rounded-full","mr-1","mb-1"],["mat-header-row",""],["mat-row","",1,"border"],[1,"mat-row","border"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"]],template:function(t,n){if(t&1){let r=b();o(0,"mat-drawer-container",5)(1,"mat-drawer",6,0),F(3,"router-outlet"),s(),o(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",11)(9,"input",12),f("keyup",function(d){return _(r),p(n.applyFilter(d))}),s(),o(10,"div",13)(11,"span",14),l(12,"search"),s()()(),o(13,"button",15),f("click",function(){return _(r),p(n.create())}),o(14,"mat-icon"),l(15,"add_circle"),s(),o(16,"span",16),l(17,"T\u1EA1o M\u1EDBi"),s()(),o(18,"button",17),f("click",function(){return _(r),p(n.ExportUser())}),o(19,"mat-icon"),l(20,"file_download"),s()(),M(21,_t,5,0,"button",18),s()(),o(22,"div",19)(23,"div",20)(24,"strong"),l(25),s(),l(26," - "),o(27,"strong"),l(28),s(),l(29),s(),o(30,"div",21)(31,"span"),l(32),s(),o(33,"span"),l(34,"Trang"),s()(),o(35,"div",22)(36,"span",23,1),l(38),s(),o(39,"mat-menu",null,2)(41,"div",24),f("click",function(d){return _(r),p(d.stopPropagation())}),o(42,"mat-form-field",25)(43,"mat-label"),l(44,"S\u1ED1 l\u01B0\u1EE3ng"),s(),o(45,"input",26),Z("ngModelChange",function(d){return _(r),Y(n.pageSize,d)||(n.pageSize=d),p(d)}),s()(),o(46,"button",27),f("click",function(){_(r);let d=y(37);return p(n.onPageSizeChange(n.pageSize(),d))}),o(47,"mat-icon"),l(48,"published_with_changes"),s()()()(),o(49,"div",28)(50,"button",29),f("click",function(){return _(r),p(n.onPreviousPage())}),o(51,"mat-icon"),l(52,"keyboard_arrow_left"),s()(),o(53,"button",29),f("click",function(){return _(r),p(n.onNextPage())}),o(54,"mat-icon"),l(55,"keyboard_arrow_right"),s()()()()()(),o(56,"div",30)(57,"table",31),L(58,Ft,4,2,"ng-container",32,G),M(60,It,1,0,"tr",33)(61,Dt,1,3,"tr",34)(62,Vt,3,0,"tr",35),s()()()(),M(63,Rt,11,1,"ng-template",null,3,ie)}if(t&2){let r=y(40);c(),C("position","end"),c(20),C("ngIf",n.EditList.length>0),c(4),w((n.page()-1)*n.pageSize()+1),c(3),w(n.page()*n.pageSize()>n.total()?n.total():n.page()*n.pageSize()),c(),P(" / ",n.total()," m\u1EE5c "),c(3),W("",n.page(),"/",n.totalPages()," "),c(4),C("matMenuTriggerFor",r),c(2),P("",n.pageSize()," m\u1EE5c"),c(7),J("ngModel",n.pageSize),C("ngModelOptions",ee(17,dt)),c(5),C("disabled",n.page()===1),c(3),C("disabled",n.page()===n.totalPages()),c(4),C("dataSource",n.dataSource),c(),T(n.displayedColumns),c(2),C("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),c(),C("matRowDefColumns",n.displayedColumns)}},dependencies:[Ie,Fe,Le,Te,Ve,De,tt,He,Qe,We,Ge,Ne,Je,Xe,Ke,Ye,Ze,et,qe,A,$e,Be,Pe,Me,xe,be,fe,pe,ge,se,he,Ce,me,ce,de,Re,ae,re,oe,ye,we,Oe,ve,ze,Ae,ke,Ue,Ee,it],styles:[".user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]{transition:all .3s ease}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{transition:border-color .2s ease}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 2px #3b82f61a}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]{position:relative}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#f8fafc;border-bottom:2px solid #e2e8f0}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#374151;padding:16px 12px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#2563eb}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{transition:background-color .15s ease;border-bottom:1px solid #f1f5f9}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row.selected[_ngcontent-%COMP%]{background-color:#eff6ff;border-color:#bfdbfe}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row.editing[_ngcontent-%COMP%]{background-color:#fefce8;border-color:#fcd34d}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:12px;vertical-align:middle}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:10}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:80px}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{transition:background-color .2s ease}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]:disabled{opacity:.4}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .current-page[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3f4f6,#e5e7eb);border:1px solid #d1d5db;color:#374151;font-weight:600}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]{max-width:320px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-search[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;margin-bottom:8px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]{margin:4px 0}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-checkbox[_ngcontent-%COMP%]{padding:8px}.user-list-container[_ngcontent-%COMP%]   .column-menu[_ngcontent-%COMP%]   .column-list[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-form-field[_ngcontent-%COMP%]{color:#374151}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd;border-radius:8px;padding:8px 16px}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{color:#1d4ed8;font-weight:600}.user-list-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{margin:0 4px}.user-list-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.user-list-container[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534;border:1px solid #bbf7d0}.user-list-container[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626;border:1px solid #fecaca}.user-list-container[_ngcontent-%COMP%]   .role-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.user-list-container[_ngcontent-%COMP%]   .role-badges[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;border:1px solid #bfdbfe}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:36px;height:36px}.user-list-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#6b7280}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.user-list-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}@media (max-width: 768px){.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:200px}.user-list-container[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:120px}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]{text-align:center}.user-list-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]   .page-controls[_ngcontent-%COMP%]{justify-content:center}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 6px;font-size:13px}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.actions-column[_ngcontent-%COMP%], .user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.actions-column[_ngcontent-%COMP%]{width:120px}}@media (prefers-color-scheme: dark){.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{background:#1f2937}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{color:#f9fafb}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{border-bottom-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#374151}.user-list-container[_ngcontent-%COMP%]   .data-table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{color:#e5e7eb}}"],changeDetection:0})};q([rt()],U.prototype,"FilterHederColumn",1);var at=U;export{z as a,at as b};
