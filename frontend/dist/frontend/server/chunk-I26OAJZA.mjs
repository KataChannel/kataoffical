import './polyfills.server.mjs';
import{a as nt}from"./chunk-HPIZGJEE.mjs";import{a as at}from"./chunk-JUP3QIHB.mjs";import{a as it}from"./chunk-OSSF5ZWP.mjs";import{a as et}from"./chunk-STSM7BBW.mjs";import{a as tt}from"./chunk-NYAXYTB6.mjs";import{k as Ze}from"./chunk-Y7RQN4KI.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-73IBRO6I.mjs";import{a as Je,b as Xe}from"./chunk-PFDYE7FB.mjs";import{h as ve}from"./chunk-AXMWEYRS.mjs";import"./chunk-GP5NNPSV.mjs";import{a as We}from"./chunk-KVXSGNXI.mjs";import{c as R,d as Ne,e as H,f as Be,g as Ae,h as Re,i as He,j as $e,k as Pe,l as Ge,m as Ke,n as Oe,o as ze,p as je,q as qe,r as Ye,s as Qe,t as Ue}from"./chunk-UGM446KF.mjs";import{b as Se,c as ye,d as we}from"./chunk-FCTLFVBK.mjs";import"./chunk-PMTH3XUO.mjs";import{a as Fe,b as Le}from"./chunk-SHOO5BKA.mjs";import{b as Ve,e as Z}from"./chunk-SWDJOT3A.mjs";import{a as W,b as Ce}from"./chunk-2FVC3PGS.mjs";import{a as xe}from"./chunk-W6XGBLWX.mjs";import"./chunk-KOGKSOGU.mjs";import"./chunk-4SOAP4KW.mjs";import"./chunk-YHEO3P25.mjs";import{a as ct}from"./chunk-MGIVCIKU.mjs";import{g as J,j as X,n as be,p as Ee,u as Te,v as Me,x as ke,y as Ie}from"./chunk-5XGKQXMX.mjs";import"./chunk-FD3IXO7Q.mjs";import"./chunk-7ZQLLCLM.mjs";import"./chunk-DMOTB6FA.mjs";import{a as Q,b as U,d as De}from"./chunk-4UVWUTFR.mjs";import{fa as fe}from"./chunk-DVAGKGA7.mjs";import"./chunk-P5ZL7ANQ.mjs";import{a as ge,d as he}from"./chunk-OAPSLP2Q.mjs";import"./chunk-LQLBO4MK.mjs";import{n as pe,o as q,r as Y,s as ue}from"./chunk-G5MXV5JM.mjs";import{Bb as ne,Bc as A,Cc as c,Dc as D,Ec as x,Gc as ce,Ib as w,Ic as O,Jc as z,Kc as j,Mc as se,Na as F,Nc as de,Rb as ie,Rc as v,Sb as ae,Tc as E,Ub as m,Yb as oe,_b as re,ac as le,bc as L,cc as V,dc as o,ec as r,fc as T,gc as N,hc as B,jc as S,kb as te,la as y,nd as me,oc as _,pb as s,pd as _e,qc as d,ua as p,va as u,wc as P,xc as G,yc as K}from"./chunk-WORJTRGV.mjs";import"./chunk-KB5IWD3E.mjs";import{a as $,g as lt,j as b}from"./chunk-RIAI3ORJ.mjs";var ee=lt(ct());var st=()=>[Te,Ee,ke,J,X,W,Q,U,Fe,fe,pe,q,Y,Se,ye,Re,$e,Oe,Pe,He,ze,Ge,Ke,je,qe,Ye,H,Be,R],dt=()=>({standalone:!0}),mt=a=>[5,10,25,100,a],rt=(a,t)=>t.id;function _t(a,t){if(a&1){let e=S();o(0,"button",3),_("click",function(){p(e);let i=d();return u(i.handleDathangAction())}),o(1,"mat-icon"),c(2,"save"),r()()}}function pt(a,t){if(a&1){let e=S();o(0,"button",3),_("click",function(){p(e);let i=d();return u(i.toggleEdit())}),o(1,"mat-icon"),c(2,"edit"),r()()}}function ut(a,t){if(a&1){let e=S();N(0),o(1,"div",11)(2,"div",12),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),o(4,"div",13)(5,"button",14),_("click",function(){p(e);let i=d();return u(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),r(),o(7,"button",15),_("click",function(){p(e);let i=d();return u(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),r()()(),B()}}function gt(a,t){if(a&1&&T(0,"div",23),a&2){let e=d(2);m("innerHTML",e.DetailDathang().nhacungcap.ghichu,te)}}function ht(a,t){a&1&&T(0,"div",24)}function ft(a,t){if(a&1&&(o(0,"mat-option",34),c(1),r()),a&2){let e=t.$implicit;m("value",e.id),s(),D(e.name)}}function Dt(a,t){a&1&&(o(0,"span",58),c(1,"check"),r())}function xt(a,t){if(a&1){let e=S();o(0,"div",56),_("click",function(){let i=p(e).$implicit,l=d(4);return u(l.ChosenItem(i))}),w(1,Dt,2,0,"span",57),c(2),r()}if(a&2){let e=t.$implicit,n=d(4);s(),m("ngIf",n.CheckItem(e)),s(),x(" ",e.title," ")}}function Ct(a,t){if(a&1&&(o(0,"th",61)(1,"span",62),c(2),r()()),a&2){let e=d().$implicit,n=d(4);s(2),x(" ",n.ColumnName[e]," ")}}function St(a,t){if(a&1){let e=S();o(0,"span",64)(1,"span"),c(2),r(),o(3,"button",8),_("click",function(){p(e);let i=d().$implicit,l=d(5);return u(l.RemoveSanpham(i))}),o(4,"mat-icon"),c(5,"delete"),r()()()}if(a&2){let e=d().index;s(2),x("",e+1," ")}}function yt(a,t){if(a&1){let e=S();o(0,"div",69),_("keydown.enter",function(i){p(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return u(g.EnterUpdateValue(i,f,h,"sldat","number"))}),c(1),v(2,"number"),r(),o(3,"div"),c(4),r()}if(a&2){let e=d().$implicit,n=d().$implicit,i=d(4);m("contentEditable",!0),s(),x(" ",E(2,6,e[n]||0,"1.0-2")," "),s(3),ce("(SL:",e.soluong,")-(SLkho:",e.soluongkho,")-(Hao h\u1EE5t:",e.haohut,"%)(G\u1EE3i \xFD: ",i.GetGoiy(e),")")}}function wt(a,t){if(a&1){let e=S();o(0,"div",70),_("keydown.enter",function(i){p(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return u(g.EnterUpdateValue(i,f,h,"slgiao","number"))}),c(1),v(2,"number"),r()}if(a&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),x(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function bt(a,t){if(a&1){let e=S();o(0,"div",71),_("keydown.enter",function(i){p(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return u(g.EnterUpdateValue(i,f,h,"slnhan","number"))}),c(1),v(2,"number"),r()}if(a&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),x(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function vt(a,t){if(a&1){let e=S();o(0,"div",72),_("keydown.enter",function(i){p(e);let l=d(),h=l.$implicit,f=l.index,g=d(5);return u(g.EnterUpdateValue(i,f,h,"ghichu","string"))}),c(1),r()}if(a&2){let e=d().$implicit,n=d().$implicit;m("contentEditable",!0),s(),x(" ",e[n]||""," ")}}function Et(a,t){if(a&1&&(o(0,"span",68),c(1),r()),a&2){let e=d().$implicit,n=d().$implicit;s(),x(" ",e[n]," ")}}function Tt(a,t){if(a&1&&(o(0,"td",63),w(1,St,6,1,"span",64)(2,yt,5,9)(3,wt,3,5,"div",65)(4,bt,3,5,"div",66)(5,vt,2,2,"div",67)(6,Et,2,1,"span",68),r()),a&2){let e,n=d().$implicit;s(),re((e=n)==="STT"?1:e==="sldat"?2:e==="slgiao"?3:e==="slnhan"?4:e==="ghichu"?5:6)}}function Mt(a,t){if(a&1&&(N(0,51),w(1,Ct,3,1,"th",59)(2,Tt,7,1,"td",60),B()),a&2){let e=t.$implicit;m("matColumnDef",e)}}function kt(a,t){a&1&&T(0,"tr",73)}function It(a,t){a&1&&T(0,"tr",74)}function Ft(a,t){a&1&&(o(0,"tr",75)(1,"td",76),c(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}function Lt(a,t){if(a&1){let e=S();o(0,"div",26)(1,"div",27)(2,"mat-form-field",28)(3,"mat-label"),c(4,"Nh\xE0 Cung C\u1EA5p"),r(),o(5,"mat-select",29),j("ngModelChange",function(i){p(e);let l=d(3);return z(l.DetailDathang().nhacungcapId,i)||(l.DetailDathang().nhacungcapId=i),u(i)}),_("selectionChange",function(i){p(e);let l=d(3);return u(l.SelectNhacungcap(i))}),o(6,"div",30)(7,"mat-form-field",31)(8,"input",32),_("input",function(i){p(e);let l=d(3);return u(l.DoFindNhacungcap(i))}),r()(),o(9,"div",33),L(10,ft,2,2,"mat-option",34,rt),r()()()(),o(12,"mat-form-field",28)(13,"mat-label"),c(14,"T\xECm Ki\u1EBFm"),r(),o(15,"input",35),_("keyup",function(i){p(e);let l=d(3);return u(l.applyFilter(i))}),r()(),o(16,"button",36,0),c(18),r(),o(19,"mat-menu",null,1)(21,"div",37),_("click",function(i){return p(e),u(i.stopPropagation())}),o(22,"div",38)(23,"input",39),_("keyup",function(i){p(e);let l=d(3);return u(l.doFilterSanpham(i))}),r(),o(24,"div",40)(25,"span",41),c(26,"search"),r()()(),o(27,"div",42)(28,"div",5)(29,"span",43),_("click",function(){p(e);let i=d(3);return u(i.ChosenAll(i.filterSanpham))}),c(30),r(),o(31,"span",43),_("click",function(){p(e);let i=d(3);return u(i.EmptyFiter())}),c(32,"Xo\xE1"),r()(),o(33,"span",43),_("click",function(){p(e);let i=d(3);return u(i.ResetFilter())}),c(34,"Reset"),r()(),o(35,"div",44),w(36,xt,3,2,"div",45),r(),o(37,"div",46)(38,"button",15),_("click",function(){p(e);let i=A(17);return u(i.closeMenu())}),c(39,"\u0110\xF3ng"),r(),o(40,"button",14),_("click",function(){p(e);let i=A(17),l=d(3);return u(l.ApplyFilterColum(i))}),c(41,"\xC1p D\u1EE5ng"),r()()()(),o(42,"button",47),_("click",function(){p(e);let i=d(3);return u(i.LoadDrive())}),o(43,"mat-icon"),c(44,"cloud_download"),r()(),o(45,"button",48),_("click",function(){p(e);let i=d(3);return u(i.EmptyCart())}),o(46,"mat-icon"),c(47,"delete"),r()()()(),o(48,"div",49)(49,"table",50),L(50,Mt,3,1,"ng-container",51,le),w(52,kt,1,0,"tr",52)(53,It,1,0,"tr",53)(54,Ft,3,0,"tr",54),r(),T(55,"mat-paginator",55),r()}if(a&2){let e=A(20),n=d(3);s(5),O("ngModel",n.DetailDathang().nhacungcapId),m("ngModelOptions",se(15,dt)),s(5),V(n.filterNhacungcap),s(6),m("disabled",!n.isEdit())("matMenuTriggerFor",e),s(2),x(" ",n.ListFilter.length," S\u1EA3n Ph\u1EA9m "),s(12),x("Ch\u1ECDn T\u1EA5t C\u1EA3 ",n.ListFilter.length,""),s(6),m("ngForOf",n.filterSanpham)("ngForTrackBy",n.trackByFn),s(6),m("disabled",!n.isEdit()),s(3),m("disabled",!n.isEdit()),s(4),m("dataSource",n.dataSource()),s(),V(n.displayedColumns),s(2),m("matHeaderRowDef",n.displayedColumns),s(),m("matRowDefColumns",n.displayedColumns),s(2),m("pageSizeOptions",de(16,mt,n.dataSource().data.length))("pageSize",n.dataSource().data.length)}}function Vt(a,t){a&1&&(o(0,"div",25),w(1,Lt,56,18),ie(2,1,st),ae(),r())}function Nt(a,t){if(a&1&&(o(0,"tr",78)(1,"td",84),c(2),r(),o(3,"td",79),c(4),r(),o(5,"td",84),c(6),r(),o(7,"td",85),c(8),v(9,"number"),r(),o(10,"td",85),c(11),v(12,"number"),r(),o(13,"td",79),c(14),r()()),a&2){let e=t.$implicit,n=t.$index;s(2),D(n+1),s(2),D(e.title),s(2),D(e.dvt),s(2),D(E(9,6,e.sldat,"1.0-2")),s(3),D(E(12,9,e.slnhan||0,"1.0-2")),s(3),D(e.ghichu)}}function Bt(a,t){if(a&1&&(o(0,"table",77)(1,"thead")(2,"tr",78)(3,"th",79),c(4,"STT"),r(),o(5,"th",79),c(6,"T\xEAn s\u1EA3n ph\u1EA9m"),r(),o(7,"th",79),c(8,"\u0110VT"),r(),o(9,"th",80),c(10,"SL \u0110\u1EB7t"),r(),o(11,"th",80),c(12,"SL Nh\u1EADn"),r(),o(13,"th",79),c(14,"Ghi ch\xFA"),r()()(),o(15,"tbody"),L(16,Nt,15,12,"tr",78,rt),o(18,"tr",78)(19,"td",81),c(20,"T\u1ED5ng:"),r(),o(21,"td",82),c(22),v(23,"number"),r(),o(24,"td",82),c(25),v(26,"number"),r(),T(27,"td",83),r()()()),a&2){let e=d(2);s(16),V(e.DetailDathang().sanpham),s(6),D(E(23,2,e.TinhTong(e.DetailDathang().sanpham,"sldat"),"1.0-2")),s(3),D(E(26,5,e.TinhTong(e.DetailDathang().sanpham,"slnhan"),"1.0-2"))}}function At(a,t){if(a&1&&(N(0),o(1,"div",16)(2,"div",17)(3,"div",18),c(4,"\u0110\u1EB7t H\xE0ng Nh\xE0 Cung C\u1EA5p"),r(),o(5,"div"),c(6),r(),w(7,gt,1,1,"div",19)(8,ht,1,0,"div",20)(9,Vt,4,0,"div",21)(10,Bt,28,8,"table",22),r()(),B()),a&2){let e,n,i,l=d();s(5),oe("font-bold text-[18px] uppercase ",(e=l.DetailDathang())!=null&&e.nhacungcapId?"":"text-red-700 italic",""),s(),D(((n=l.getName((n=l.DetailDathang())==null?null:n.nhacungcapId))==null?null:n.name)||"Ch\u01B0a Ch\u1ECDn Kh\xE1ch H\xE0ng"),s(),m("ngIf",l.isEdit()&&((i=l.DetailDathang())==null||i.nhacungcap==null?null:i.nhacungcap.ghichu)),s(),m("ngIf",l.isEdit()),s(),m("ngIf",l.isEdit()),s(),m("ngIf",!l.isEdit())}}var ot=class a{_ListdathangComponent=y(at);_DathangService=y(it);_NhacungcapService=y(nt);_BanggiaService=y(tt);_SanphamService=y(et);_route=y(ge);_router=y(he);_snackBar=y(xe);constructor(){this._route.paramMap.subscribe(t=>b(this,null,function*(){let e=t.get("id");this._DathangService.setDathangId(e),yield this._NhacungcapService.getAllNhacungcap(),this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive),yield this._BanggiaService.getAllBanggia(),this.filterBanggia=this._BanggiaService.ListBanggia(),yield this._SanphamService.getAllSanpham(),this.filterSanpham=this._SanphamService.ListSanpham(),this.dataSource().data=this.DetailDathang().sanpham,this.dataSource().paginator=this.paginator})),_e(()=>b(this,null,function*(){let t=this._DathangService.dathangId();t||(this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()),t==="0"?(this.DetailDathang.set({title:Z(8,!1),madncc:Z(8,!1),type:"dathang",ngaynhan:(0,ee.default)().add(1,"days").format("YYYY-MM-DD")}),this._ListdathangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/dathang","0"])):(yield this._DathangService.getDathangByid(t),this.ListFilter=this.DetailDathang().sanpham,this._ListdathangComponent.drawer.open(),this._router.navigate(["/admin/dathang",t]))}))}DetailDathang=this._DathangService.DetailDathang;ListNhacungcap=this._NhacungcapService.ListNhacungcap;isEdit=F(!1);isDelete=F(!1);filterNhacungcap=[];filterBanggia=[];filterSanpham=[];dathangId=this._DathangService.dathangId;ngOnInit(){return b(this,null,function*(){})}handleDathangAction(){return b(this,null,function*(){this.dathangId()==="0"?yield this.createDathang():yield this.updateDathang()})}createDathang(){return b(this,null,function*(){try{this.DetailDathang.update(t=>(t.sanpham=this.dataSource().data,t.ngaynhan=(0,ee.default)(t.ngaygiao).format("YYYY-MM-DD"),t)),yield this._DathangService.CreateDathang(this.DetailDathang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o dathang:",t)}})}updateDathang(){return b(this,null,function*(){try{console.log(this.DetailDathang()),this.DetailDathang.update(t=>(t.sanpham=this.dataSource().data,t)),yield this._DathangService.updateDathang(this.DetailDathang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt dathang:",t)}})}DeleteData(){return b(this,null,function*(){try{yield this._DathangService.DeleteDathang(this.DetailDathang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/dathang"])}catch(t){console.error("L\u1ED7i khi x\xF3a dathang:",t)}})}goBack(){this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){}DoFindNhacungcap(t){let e=t.target.value.toLowerCase();this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive&&n.name.toLowerCase().includes(e)||n.namenn.toLowerCase().includes(e)||n.sdt.toLowerCase().includes(e))}DoFindBanggia(t){let e=t.target.value.toLowerCase()}UpdateBangia(){}SelectBanggia(t){console.log(t.value)}Chonnhacungcap(t){this.DetailDathang.update(e=>(e.nhacungcapId=t.id,e))}EnterUpdateValue(t,e,n,i,l){let h=l==="number"?Number(t.target.innerText.trim())||0:t.target.innerText.trim(),f=t;if(f.key==="Enter"&&!f.shiftKey&&t.preventDefault(),l==="number"){let g=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(f.key)&&!g.includes(f.key)&&t.preventDefault()}console.log(this.DetailDathang()),this.DetailDathang.update(g=>{if(e!==null)if(console.log(e),console.log(g.sanpham[e]),i==="sldat"){g.sanpham[e].sldat=g.sanpham[e].slgiao=g.sanpham[e].slnhan=h;let M=document.querySelectorAll(".sldat-input");if(e<this.dataSource().filteredData.length-1){let C=M[e+1];C&&(C instanceof HTMLInputElement&&(C.focus(),C.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let k=document.createRange();k.selectNodeContents(C);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(k)}},10))}}else if(i==="ghichu"){g.sanpham[e][i]=h;let M=document.querySelectorAll(".ghichu-input");if(e<this.dataSource().filteredData.length-1){let C=M[e+1];C&&(C instanceof HTMLInputElement&&(C.focus(),C.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let k=document.createRange();k.selectNodeContents(C);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(k)}},10))}}else if(i==="slgiao"){let M=h;M<g.sanpham[e].sldat?(g.sanpham[e].slgiao=g.sanpham[e].sldat,this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n s\u1ED1 l\u01B0\u1EE3ng \u0111\u1EB7t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})):g.sanpham[e].slgiao=g.sanpham[e].slnhan=M}else g.sanpham[e][i]=h;else g[i]=h;return g})}Tongcong=0;Tong=0;Tinhtongcong(t){this.Tongcong=t.Tongcong,this.Tong=t.Tong}TinhTong(t,e){return t?.reduce((n,i)=>n+(i[e]||0),0)||0}SelectNhacungcap(t){let e=this.ListNhacungcap().find(n=>n.id===t.value);console.log(e),e&&this.DetailDathang.update(n=>{let i={name:e.name,diachi:e.diachi,sdt:e.sdt,ghichu:e.ghichu};return n.nhacungcapId=e.id,n.nhacungcap=i,n}),console.log(this.DetailDathang())}displayedColumns=["STT","title","masp","dvt","sldat","slnhan","ghichu"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slnhan:"SL Nh\u1EADn",ghichu:"Ghi Ch\xFA"};dataSource=F(new Ue([]));CountItem=me(()=>this.dataSource().data.length);paginator;sort;_GoogleSheetService=y(We);LoadDrive(){return b(this,null,function*(){let t={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"DatHImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(t),n=Ve(e.values);console.log(n),this.DetailDathang.update(i=>(i.sanpham=n.map(l=>{l.sldat=Number(l.sldat)||0,l.slgiao=Number(l.slgiao)||0,l.slnhan=Number(l.slnhan)||0,l.ttdat=Number(l.ttdat)||0,l.ttgiao=Number(l.ttgiao)||0,l.ttnhan=Number(l.ttnhan)||0;let h=this._SanphamService.ListSanpham().find(f=>f.masp===l.masp);return console.log(h),h?$($({},h),l):l}),i)),console.log(this.DetailDathang()),this.dataSource().data=this.DetailDathang().sanpham,this.reloadfilter()})}applyFilter(t){let e=t.target.value;this.dataSource().filter=e.trim().toLowerCase()}EmptyCart(){this.DetailDathang.update(t=>(t.sanpham=[],t)),this.dataSource().data=this.DetailDathang().sanpham,this.reloadfilter()}getName(t){return this.ListNhacungcap().find(e=>e.id===t)}reloadfilter(){this.filterSanpham=this._SanphamService.ListSanpham().filter(t=>!this.DetailDathang().sanpham.some(e=>e.id===t.id))}DoFindSanpham(t){let e=t.target.value;console.log(e),this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>n.title.toLowerCase().includes(e.toLowerCase()))}SelectSanpham(t){let e=t.value,n=this._SanphamService.ListSanpham().find(i=>i.id===e);this.DetailDathang.update(i=>(i.sanpham?(n.sldat=n.slgiao=1,i.sanpham.push(n)):(i.sanpham=[],n.sldat=n.slgiao=1,i.sanpham.push(n)),this.reloadfilter(),i)),this.dataSource().data=this.DetailDathang().sanpham}RemoveSanpham(t){this.DetailDathang.update(e=>(e.sanpham=e.sanpham.filter(n=>n.id!==t.id),this.reloadfilter(),e)),this.dataSource().data=this.DetailDathang().sanpham}GetGoiy(t){let e=parseFloat(((t.soluongkho-t.soluong)*(1+t.haohut/100)).toString()).toFixed(2);return Number(e)<0?0:e}doFilterSanpham(t){this.dataSource().filteredData=this.filterSanpham.filter(n=>n.title.toLowerCase().includes(t.target.value.toLowerCase()));let e=t.target.value.toLowerCase()}ListFilter=[];ChosenItem(t){console.log(t);let e=this.filterSanpham.filter(i=>i.id===t.id);this.ListFilter.filter(i=>i.id===t.id).length>0?this.ListFilter=this.ListFilter.filter(i=>i.id!==t.id):this.ListFilter=[...this.ListFilter,...e]}ChosenAll(t){this.ListFilter=t}ResetFilter(){this.ListFilter=this.filterSanpham,this.dataSource().data=this.filterSanpham}EmptyFiter(){this.ListFilter=[]}CheckItem(t){return!!this.ListFilter.find(e=>e.id===t.id)}ApplyFilterColum(t){this.ListFilter.forEach(e=>{e.sldat=e.slgiao=e.slnhan=1}),this.dataSource().data=this.ListFilter,this.DetailDathang.update(e=>(e.sanpham=this.ListFilter,e)),this.dataSource().data.sort((e,n)=>e.order-n.order),t.closeMenu()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=ne({type:a,selectors:[["app-detaildathang"]],viewQuery:function(e,n){if(e&1&&(P(R,5),P(H,5)),e&2){let i;G(i=K())&&(n.paginator=i.first),G(i=K())&&(n.sort=i.first)}},decls:17,vars:9,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["id","printContent",1,"min-w-[800px]","flex","flex-col","space-y-6","items-center","p-2","border","rounded-lg"],[1,"w-full","flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-[18px]","uppercase"],["class","p-2 rounded-lg border text-red-600",3,"innerHTML",4,"ngIf"],["class","grid lg:grid-cols-3 grid-cols-1 gap-4",4,"ngIf"],["class","w-full flex flex-col overflow-y-auto",4,"ngIf"],["class","w-full border-collapse border mt-4",4,"ngIf"],[1,"p-2","rounded-lg","border","text-red-600",3,"innerHTML"],[1,"grid","lg:grid-cols-3","grid-cols-1","gap-4"],[1,"w-full","flex","flex-col","overflow-y-auto"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"keyup"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click","disabled"],["matTooltip","L\xE0m Tr\u1ED1ng Gi\u1ECF H\xE0ng","color","warn","mat-icon-button","",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],[1,"sldat-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-full","border-collapse","border","mt-4"],[1,"border"],[1,"border","p-2"],[1,"border","p-2","max-w-10"],["colspan","3",1,"border","p-2","text-start"],[1,"border","p-2","text-end","font-bold"],[1,"border","p-2","text-end"],[1,"border","p-2","text-center"],[1,"border","p-2","text-end","max-w-10"]],template:function(e,n){e&1&&(o(0,"div",2)(1,"button",3),_("click",function(){return n.goBack()}),o(2,"mat-icon"),c(3,"arrow_back"),r()(),o(4,"div",4),_("blur",function(l){return n.EnterUpdateValue(l,null,n.DetailDathang(),"madncc","string")}),c(5),r(),o(6,"div",5)(7,"mat-slide-toggle",6),j("ngModelChange",function(l){return z(n.DetailDathang().isActive,l)||(n.DetailDathang().isActive=l),l}),c(8),r(),w(9,_t,3,0,"button",7)(10,pt,3,0,"button",7),o(11,"button",8),_("click",function(){return n.toggleDelete()}),o(12,"mat-icon"),c(13,"delete"),r()()()(),o(14,"div",9),w(15,ut,9,0,"ng-container",10)(16,At,11,8,"ng-container",10),r()),e&2&&(s(4),m("contentEditable",!0),s(),x("",n.DetailDathang().madncc||""," "),s(2),O("ngModel",n.DetailDathang().isActive),m("disabled",!n.isEdit()),s(),D(n.DetailDathang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),m("ngIf",n.isEdit()),s(),m("ngIf",!n.isEdit()),s(5),m("ngIf",n.isDelete()),s(),m("ngIf",!n.isDelete()))},dependencies:[Me,Ie,be,J,X,Ce,W,De,Q,U,Le,ve,ue,q,Y,Xe,Je,we,Ze,Qe,Ae,Ne],encapsulation:2})};export{ot as DetailDathangComponent};
