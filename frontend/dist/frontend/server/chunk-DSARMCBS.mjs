import './polyfills.server.mjs';
import{a as Oi}from"./chunk-7BHYQM75.mjs";import{a as Qi}from"./chunk-73IBRO6I.mjs";import{c as tn,d as nn,f as rn,h as on}from"./chunk-H3L23FAA.mjs";import{a as Ui}from"./chunk-IIRWYDJB.mjs";import{a as Mn,b as Rn}from"./chunk-GP5NNPSV.mjs";import{a as Bn}from"./chunk-TPVQKA73.mjs";import{a as pn,b as mn,c as gn,d as _n,e as $e,f as yn,g as wn,h as Cn,i as En,j as bn,k as Tn,l as xn,m as Sn,n as Ln,o as qn,p as In,q as kn,r as vn,s as An,t as _t}from"./chunk-ESYLH2EQ.mjs";import{a as Gi,b as $i,c as Ki,d as Wi}from"./chunk-NTZ4A4LW.mjs";import{a as zi,b as Yi,c as ji}from"./chunk-2ZFZSSN6.mjs";import{b as fn}from"./chunk-T2WAMLQS.mjs";import{b as dn}from"./chunk-LAYB64I4.mjs";import{a as Fi}from"./chunk-HX5GTBOW.mjs";import{a as Ri,b as Pi,d as Di}from"./chunk-CKDCRGRD.mjs";import{b as Ji,g as Zi,j as Xi,n as en,p as sn,q as an,u as ln,v as cn,x as un,y as hn}from"./chunk-6EN5YBJ6.mjs";import{a as Vi,b as Hi}from"./chunk-BKXW25XR.mjs";import{a as J}from"./chunk-W5HS6BR5.mjs";import{a as Ni}from"./chunk-OOQP6T52.mjs";import{x as Bi,y as Mi}from"./chunk-2CBL4FZN.mjs";import{b as Ai,d as Ge}from"./chunk-PGSBKFQM.mjs";import{l as vi}from"./chunk-EW4IWT3C.mjs";import{n as Li,o as qi,q as Ii,s as ki}from"./chunk-U3LADLBJ.mjs";import{$b as je,Cb as Ye,Cc as Y,Dc as _,Ec as W,Fc as N,Ga as di,Hc as Ci,Jb as H,Kc as Ei,Lc as bi,Mc as Ti,Na as ze,Oc as xi,Tc as ge,Vb as k,Vc as _e,Wc as gt,Yb as mi,Zb as gi,bc as _i,cc as pt,dc as mt,ec as h,fa as hi,fc as d,gc as ke,hc as yi,ic as wi,ka as He,kc as Q,la as oe,pc as L,qb as w,rc as g,rd as Si,ta as fi,ua as T,ub as pi,va as x,vb as dt,xc as de,yc as pe,zc as me}from"./chunk-4HXP3POQ.mjs";import{a as Ve,b as ci,c as A,e as m,g as ui,h as ft,j as B}from"./chunk-RIAI3ORJ.mjs";var yt=m((rc,Dn)=>{"use strict";Dn.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Z=m(se=>{"use strict";var wt,$o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];se.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};se.getSymbolTotalCodewords=function(e){return $o[e]};se.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};se.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');wt=e};se.isKanjiModeEnabled=function(){return typeof wt<"u"};se.toSJIS=function(e){return wt(e)}});var We=m(U=>{"use strict";U.L={bit:1};U.M={bit:0};U.Q={bit:3};U.H={bit:2};function Ko(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return U.L;case"m":case"medium":return U.M;case"q":case"quartile":return U.Q;case"h":case"high":return U.H;default:throw new Error("Unknown EC Level: "+i)}}U.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};U.from=function(e,t){if(U.isValid(e))return e;try{return Ko(e)}catch{return t}}});var On=m((ac,Nn)=>{"use strict";function Fn(){this.buffer=[],this.length=0}Fn.prototype={get:function(i){let e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let t=0;t<e;t++)this.putBit((i>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};Nn.exports=Fn});var Un=m((lc,Qn)=>{"use strict";function ve(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}ve.prototype.set=function(i,e,t,n){let r=i*this.size+e;this.data[r]=t,n&&(this.reservedBit[r]=!0)};ve.prototype.get=function(i,e){return this.data[i*this.size+e]};ve.prototype.xor=function(i,e,t){this.data[i*this.size+e]^=t};ve.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};Qn.exports=ve});var Vn=m(Je=>{"use strict";var Wo=Z().getSymbolSize;Je.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,n=Wo(e),r=n===145?26:Math.ceil((n-13)/(2*t-2))*2,o=[n-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-r;return o.push(6),o.reverse()};Je.getPositions=function(e){let t=[],n=Je.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let s=0;s<r;s++)o===0&&s===0||o===0&&s===r-1||o===r-1&&s===0||t.push([n[o],n[s]]);return t}});var Yn=m(zn=>{"use strict";var Jo=Z().getSymbolSize,Hn=7;zn.getPositions=function(e){let t=Jo(e);return[[0,0],[t-Hn,0],[0,t-Hn]]}});var jn=m(I=>{"use strict";I.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ae={N1:3,N2:3,N3:40,N4:10};I.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};I.from=function(e){return I.isValid(e)?parseInt(e,10):void 0};I.getPenaltyN1=function(e){let t=e.size,n=0,r=0,o=0,s=null,a=null;for(let l=0;l<t;l++){r=o=0,s=a=null;for(let c=0;c<t;c++){let u=e.get(l,c);u===s?r++:(r>=5&&(n+=ae.N1+(r-5)),s=u,r=1),u=e.get(c,l),u===a?o++:(o>=5&&(n+=ae.N1+(o-5)),a=u,o=1)}r>=5&&(n+=ae.N1+(r-5)),o>=5&&(n+=ae.N1+(o-5))}return n};I.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){let s=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);(s===4||s===0)&&n++}return n*ae.N2};I.getPenaltyN3=function(e){let t=e.size,n=0,r=0,o=0;for(let s=0;s<t;s++){r=o=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(s,a),a>=10&&(r===1488||r===93)&&n++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&n++}return n*ae.N3};I.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let o=0;o<n;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/n/5)-10)*ae.N4};function Zo(i,e,t){switch(i){case I.Patterns.PATTERN000:return(e+t)%2===0;case I.Patterns.PATTERN001:return e%2===0;case I.Patterns.PATTERN010:return t%3===0;case I.Patterns.PATTERN011:return(e+t)%3===0;case I.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case I.Patterns.PATTERN101:return e*t%2+e*t%3===0;case I.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case I.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}I.applyMask=function(e,t){let n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,Zo(e,o,r))};I.getBestMask=function(e,t){let n=Object.keys(I.Patterns).length,r=0,o=1/0;for(let s=0;s<n;s++){t(s),I.applyMask(s,e);let a=I.getPenaltyN1(e)+I.getPenaltyN2(e)+I.getPenaltyN3(e)+I.getPenaltyN4(e);I.applyMask(s,e),a<o&&(o=a,r=s)}return r}});var Et=m(Ct=>{"use strict";var X=We(),Ze=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Xe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ct.getBlocksCount=function(e,t){switch(t){case X.L:return Ze[(e-1)*4+0];case X.M:return Ze[(e-1)*4+1];case X.Q:return Ze[(e-1)*4+2];case X.H:return Ze[(e-1)*4+3];default:return}};Ct.getTotalCodewordsCount=function(e,t){switch(t){case X.L:return Xe[(e-1)*4+0];case X.M:return Xe[(e-1)*4+1];case X.Q:return Xe[(e-1)*4+2];case X.H:return Xe[(e-1)*4+3];default:return}}});var Gn=m(tt=>{"use strict";var Ae=new Uint8Array(512),et=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Ae[t]=e,et[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Ae[t]=Ae[t-255]})();tt.log=function(e){if(e<1)throw new Error("log("+e+")");return et[e]};tt.exp=function(e){return Ae[e]};tt.mul=function(e,t){return e===0||t===0?0:Ae[et[e]+et[t]]}});var $n=m(Be=>{"use strict";var bt=Gn();Be.mul=function(e,t){let n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]^=bt.mul(e[r],t[o]);return n};Be.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){let r=n[0];for(let s=0;s<t.length;s++)n[s]^=bt.mul(t[s],r);let o=0;for(;o<n.length&&n[o]===0;)o++;n=n.slice(o)}return n};Be.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let n=0;n<e;n++)t=Be.mul(t,new Uint8Array([1,bt.exp(n)]));return t}});var Jn=m((mc,Wn)=>{"use strict";var Kn=$n();function Tt(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Tt.prototype.initialize=function(e){this.degree=e,this.genPoly=Kn.generateECPolynomial(this.degree)};Tt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let n=Kn.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){let o=new Uint8Array(this.degree);return o.set(n,r),o}return n};Wn.exports=Tt});var xt=m(Zn=>{"use strict";Zn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var St=m(K=>{"use strict";var Xn="[0-9]+",Xo="[A-Z $%*+\\-./:]+",Me="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Me=Me.replace(/u/g,"\\u");var es="(?:(?![A-Z0-9 $%*+\\-./:]|"+Me+`)(?:.|[\r
]))+`;K.KANJI=new RegExp(Me,"g");K.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");K.BYTE=new RegExp(es,"g");K.NUMERIC=new RegExp(Xn,"g");K.ALPHANUMERIC=new RegExp(Xo,"g");var ts=new RegExp("^"+Me+"$"),is=new RegExp("^"+Xn+"$"),ns=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");K.testKanji=function(e){return ts.test(e)};K.testNumeric=function(e){return is.test(e)};K.testAlphanumeric=function(e){return ns.test(e)}});var ee=m(v=>{"use strict";var rs=xt(),Lt=St();v.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};v.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};v.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};v.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};v.MIXED={bit:-1};v.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!rs.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};v.getBestModeForData=function(e){return Lt.testNumeric(e)?v.NUMERIC:Lt.testAlphanumeric(e)?v.ALPHANUMERIC:Lt.testKanji(e)?v.KANJI:v.BYTE};v.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};v.isValid=function(e){return e&&e.bit&&e.ccBits};function os(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return v.NUMERIC;case"alphanumeric":return v.ALPHANUMERIC;case"kanji":return v.KANJI;case"byte":return v.BYTE;default:throw new Error("Unknown mode: "+i)}}v.from=function(e,t){if(v.isValid(e))return e;try{return os(e)}catch{return t}}});var rr=m(le=>{"use strict";var it=Z(),ss=Et(),er=We(),te=ee(),qt=xt(),ir=7973,tr=it.getBCHDigit(ir);function as(i,e,t){for(let n=1;n<=40;n++)if(e<=le.getCapacity(n,t,i))return n}function nr(i,e){return te.getCharCountIndicator(i,e)+4}function ls(i,e){let t=0;return i.forEach(function(n){let r=nr(n.mode,e);t+=r+n.getBitsLength()}),t}function cs(i,e){for(let t=1;t<=40;t++)if(ls(i,t)<=le.getCapacity(t,e,te.MIXED))return t}le.from=function(e,t){return qt.isValid(e)?parseInt(e,10):t};le.getCapacity=function(e,t,n){if(!qt.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=te.BYTE);let r=it.getSymbolTotalCodewords(e),o=ss.getTotalCodewordsCount(e,t),s=(r-o)*8;if(n===te.MIXED)return s;let a=s-nr(n,e);switch(n){case te.NUMERIC:return Math.floor(a/10*3);case te.ALPHANUMERIC:return Math.floor(a/11*2);case te.KANJI:return Math.floor(a/13);case te.BYTE:default:return Math.floor(a/8)}};le.getBestVersionForData=function(e,t){let n,r=er.from(t,er.M);if(Array.isArray(e)){if(e.length>1)return cs(e,r);if(e.length===0)return 1;n=e[0]}else n=e;return as(n.mode,n.getLength(),r)};le.getEncodedBits=function(e){if(!qt.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;it.getBCHDigit(t)-tr>=0;)t^=ir<<it.getBCHDigit(t)-tr;return e<<12|t}});var lr=m(ar=>{"use strict";var It=Z(),sr=1335,us=21522,or=It.getBCHDigit(sr);ar.getEncodedBits=function(e,t){let n=e.bit<<3|t,r=n<<10;for(;It.getBCHDigit(r)-or>=0;)r^=sr<<It.getBCHDigit(r)-or;return(n<<10|r)^us}});var ur=m((Ec,cr)=>{"use strict";var hs=ee();function ye(i){this.mode=hs.NUMERIC,this.data=i.toString()}ye.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};ye.prototype.getLength=function(){return this.data.length};ye.prototype.getBitsLength=function(){return ye.getBitsLength(this.data.length)};ye.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);let o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,o*3+1))};cr.exports=ye});var fr=m((bc,hr)=>{"use strict";var fs=ee(),kt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function we(i){this.mode=fs.ALPHANUMERIC,this.data=i}we.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};we.prototype.getLength=function(){return this.data.length};we.prototype.getBitsLength=function(){return we.getBitsLength(this.data.length)};we.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=kt.indexOf(this.data[t])*45;n+=kt.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(kt.indexOf(this.data[t]),6)};hr.exports=we});var pr=m((Tc,dr)=>{"use strict";var ds=ee();function Ce(i){this.mode=ds.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}Ce.getBitsLength=function(e){return e*8};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)};dr.exports=Ce});var gr=m((xc,mr)=>{"use strict";var ps=ee(),ms=Z();function Ee(i){this.mode=ps.KANJI,this.data=i}Ee.getBitsLength=function(e){return e*13};Ee.prototype.getLength=function(){return this.data.length};Ee.prototype.getBitsLength=function(){return Ee.getBitsLength(this.data.length)};Ee.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let t=ms.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),i.put(t,13)}};mr.exports=Ee});var _r=m((Sc,vt)=>{"use strict";var Re={single_source_shortest_paths:function(i,e,t){var n={},r={};r[e]=0;var o=Re.PriorityQueue.make();o.push(e,0);for(var s,a,l,c,u,f,p,y,C;!o.empty();){s=o.pop(),a=s.value,c=s.cost,u=i[a]||{};for(l in u)u.hasOwnProperty(l)&&(f=u[l],p=c+f,y=r[l],C=typeof r[l]>"u",(C||y>p)&&(r[l]=p,o.push(l,p),n[l]=a))}if(typeof t<"u"&&typeof r[t]>"u"){var b=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(b)}return n},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],n=e,r;n;)t.push(n),r=i[n],n=i[n];return t.reverse(),t},find_path:function(i,e,t){var n=Re.single_source_shortest_paths(i,e,t);return Re.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(i){var e=Re.PriorityQueue,t={},n;i=i||{};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof vt<"u"&&(vt.exports=Re)});var Sr=m(be=>{"use strict";var S=ee(),Cr=ur(),Er=fr(),br=pr(),Tr=gr(),Pe=St(),nt=Z(),gs=_r();function yr(i){return unescape(encodeURIComponent(i)).length}function De(i,e,t){let n=[],r;for(;(r=i.exec(t))!==null;)n.push({data:r[0],index:r.index,mode:e,length:r[0].length});return n}function xr(i){let e=De(Pe.NUMERIC,S.NUMERIC,i),t=De(Pe.ALPHANUMERIC,S.ALPHANUMERIC,i),n,r;return nt.isKanjiModeEnabled()?(n=De(Pe.BYTE,S.BYTE,i),r=De(Pe.KANJI,S.KANJI,i)):(n=De(Pe.BYTE_KANJI,S.BYTE,i),r=[]),e.concat(t,n,r).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function At(i,e){switch(e){case S.NUMERIC:return Cr.getBitsLength(i);case S.ALPHANUMERIC:return Er.getBitsLength(i);case S.KANJI:return Tr.getBitsLength(i);case S.BYTE:return br.getBitsLength(i)}}function _s(i){return i.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function ys(i){let e=[];for(let t=0;t<i.length;t++){let n=i[t];switch(n.mode){case S.NUMERIC:e.push([n,{data:n.data,mode:S.ALPHANUMERIC,length:n.length},{data:n.data,mode:S.BYTE,length:n.length}]);break;case S.ALPHANUMERIC:e.push([n,{data:n.data,mode:S.BYTE,length:n.length}]);break;case S.KANJI:e.push([n,{data:n.data,mode:S.BYTE,length:yr(n.data)}]);break;case S.BYTE:e.push([{data:n.data,mode:S.BYTE,length:yr(n.data)}])}}return e}function ws(i,e){let t={},n={start:{}},r=["start"];for(let o=0;o<i.length;o++){let s=i[o],a=[];for(let l=0;l<s.length;l++){let c=s[l],u=""+o+l;a.push(u),t[u]={node:c,lastCount:0},n[u]={};for(let f=0;f<r.length;f++){let p=r[f];t[p]&&t[p].node.mode===c.mode?(n[p][u]=At(t[p].lastCount+c.length,c.mode)-At(t[p].lastCount,c.mode),t[p].lastCount+=c.length):(t[p]&&(t[p].lastCount=c.length),n[p][u]=At(c.length,c.mode)+4+S.getCharCountIndicator(c.mode,e))}}r=a}for(let o=0;o<r.length;o++)n[r[o]].end=0;return{map:n,table:t}}function wr(i,e){let t,n=S.getBestModeForData(i);if(t=S.from(e,n),t!==S.BYTE&&t.bit<n.bit)throw new Error('"'+i+'" cannot be encoded with mode '+S.toString(t)+`.
 Suggested mode is: `+S.toString(n));switch(t===S.KANJI&&!nt.isKanjiModeEnabled()&&(t=S.BYTE),t){case S.NUMERIC:return new Cr(i);case S.ALPHANUMERIC:return new Er(i);case S.KANJI:return new Tr(i);case S.BYTE:return new br(i)}}be.fromArray=function(e){return e.reduce(function(t,n){return typeof n=="string"?t.push(wr(n,null)):n.data&&t.push(wr(n.data,n.mode)),t},[])};be.fromString=function(e,t){let n=xr(e,nt.isKanjiModeEnabled()),r=ys(n),o=ws(r,t),s=gs.find_path(o.map,"start","end"),a=[];for(let l=1;l<s.length-1;l++)a.push(o.table[s[l]].node);return be.fromArray(_s(a))};be.rawSplit=function(e){return be.fromArray(xr(e,nt.isKanjiModeEnabled()))}});var Ft=m(Lr=>{"use strict";var ot=Z(),Bt=We(),Cs=On(),Es=Un(),bs=Vn(),Ts=Yn(),Pt=jn(),Dt=Et(),xs=Jn(),rt=rr(),Ss=lr(),Ls=ee(),Mt=Sr();function qs(i,e){let t=i.size,n=Ts.getPositions(e);for(let r=0;r<n.length;r++){let o=n[r][0],s=n[r][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let l=-1;l<=7;l++)s+l<=-1||t<=s+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?i.set(o+a,s+l,!0,!0):i.set(o+a,s+l,!1,!0))}}function Is(i){let e=i.size;for(let t=8;t<e-8;t++){let n=t%2===0;i.set(t,6,n,!0),i.set(6,t,n,!0)}}function ks(i,e){let t=bs.getPositions(e);for(let n=0;n<t.length;n++){let r=t[n][0],o=t[n][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?i.set(r+s,o+a,!0,!0):i.set(r+s,o+a,!1,!0)}}function vs(i,e){let t=i.size,n=rt.getEncodedBits(e),r,o,s;for(let a=0;a<18;a++)r=Math.floor(a/3),o=a%3+t-8-3,s=(n>>a&1)===1,i.set(r,o,s,!0),i.set(o,r,s,!0)}function Rt(i,e,t){let n=i.size,r=Ss.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(r>>o&1)===1,o<6?i.set(o,8,s,!0):o<8?i.set(o+1,8,s,!0):i.set(n-15+o,8,s,!0),o<8?i.set(8,n-o-1,s,!0):o<9?i.set(8,15-o-1+1,s,!0):i.set(8,15-o-1,s,!0);i.set(n-8,8,1,!0)}function As(i,e){let t=i.size,n=-1,r=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!i.isReserved(r,a-l)){let c=!1;s<e.length&&(c=(e[s]>>>o&1)===1),i.set(r,a-l,c),o--,o===-1&&(s++,o=7)}if(r+=n,r<0||t<=r){r-=n,n=-n;break}}}function Bs(i,e,t){let n=new Cs;t.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Ls.getCharCountIndicator(l.mode,i)),l.write(n)});let r=ot.getSymbolTotalCodewords(i),o=Dt.getTotalCodewordsCount(i,e),s=(r-o)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(s-n.getLengthInBits())/8;for(let l=0;l<a;l++)n.put(l%2?17:236,8);return Ms(n,i,e)}function Ms(i,e,t){let n=ot.getSymbolTotalCodewords(e),r=Dt.getTotalCodewordsCount(e,t),o=n-r,s=Dt.getBlocksCount(e,t),a=n%s,l=s-a,c=Math.floor(n/s),u=Math.floor(o/s),f=u+1,p=c-u,y=new xs(p),C=0,b=new Array(s),E=new Array(s),q=0,ut=new Uint8Array(i.buffer);for(let fe=0;fe<s;fe++){let ht=fe<l?u:f;b[fe]=ut.slice(C,C+ht),E[fe]=y.encode(b[fe]),C+=ht,q=Math.max(q,ht)}let Ie=new Uint8Array(n),D=0,O,$;for(O=0;O<q;O++)for($=0;$<s;$++)O<b[$].length&&(Ie[D++]=b[$][O]);for(O=0;O<p;O++)for($=0;$<s;$++)Ie[D++]=E[$][O];return Ie}function Rs(i,e,t,n){let r;if(Array.isArray(i))r=Mt.fromArray(i);else if(typeof i=="string"){let c=e;if(!c){let u=Mt.rawSplit(i);c=rt.getBestVersionForData(u,t)}r=Mt.fromString(i,c||40)}else throw new Error("Invalid data");let o=rt.getBestVersionForData(r,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=Bs(e,t,r),a=ot.getSymbolSize(e),l=new Es(a);return qs(l,e),Is(l),ks(l,e),Rt(l,t,0),e>=7&&vs(l,e),As(l,s),isNaN(n)&&(n=Pt.getBestMask(l,Rt.bind(null,l,t))),Pt.applyMask(n,l),Rt(l,t,n),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:n,segments:r}}Lr.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Bt.M,r,o;return typeof t<"u"&&(n=Bt.from(t.errorCorrectionLevel,Bt.M),r=rt.from(t.version),o=Pt.from(t.maskPattern),t.toSJISFunc&&ot.setToSJISFunction(t.toSJISFunc)),Rs(e,r,n,o)}});var Nt=m((Ic,Ir)=>{"use strict";var Ps=A("util"),qr=A("stream"),z=Ir.exports=function(){qr.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};Ps.inherits(z,qr);z.prototype.read=function(i,e){this._reads.push({length:Math.abs(i),allowLess:i<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};z.prototype.write=function(i,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let t;return Buffer.isBuffer(i)?t=i:t=Buffer.from(i,e||this._encoding),this._buffers.push(t),this._buffered+=t.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};z.prototype.end=function(i,e){i&&this.write(i,e),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};z.prototype.destroySoon=z.prototype.end;z.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};z.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};z.prototype._processReadAllowingLess=function(i){this._reads.shift();let e=this._buffers[0];e.length>i.length?(this._buffered-=i.length,this._buffers[0]=e.slice(i.length),i.func.call(this,e.slice(0,i.length))):(this._buffered-=e.length,this._buffers.shift(),i.func.call(this,e))};z.prototype._processRead=function(i){this._reads.shift();let e=0,t=0,n=Buffer.alloc(i.length);for(;e<i.length;){let r=this._buffers[t++],o=Math.min(r.length,i.length-e);r.copy(n,e,0,o),e+=o,o!==r.length&&(this._buffers[--t]=r.slice(o))}t>0&&this._buffers.splice(0,t),this._buffered-=i.length,i.func.call(this,n)};z.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let i=this._reads[0];if(i.allowLess)this._processReadAllowingLess(i);else if(this._buffered>=i.length)this._processRead(i);else break}this._buffers&&!this.writable&&this._end()}catch(i){this.emit("error",i)}}});var Qt=m(Ot=>{"use strict";var ie=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];Ot.getImagePasses=function(i,e){let t=[],n=i%8,r=e%8,o=(i-n)/8,s=(e-r)/8;for(let a=0;a<ie.length;a++){let l=ie[a],c=o*l.x.length,u=s*l.y.length;for(let f=0;f<l.x.length&&l.x[f]<n;f++)c++;for(let f=0;f<l.y.length&&l.y[f]<r;f++)u++;c>0&&u>0&&t.push({width:c,height:u,index:a})}return t};Ot.getInterlaceIterator=function(i){return function(e,t,n){let r=e%ie[n].x.length,o=(e-r)/ie[n].x.length*8+ie[n].x[r],s=t%ie[n].y.length,a=(t-s)/ie[n].y.length*8+ie[n].y[s];return o*4+a*i*4}}});var Ut=m((vc,kr)=>{"use strict";kr.exports=function(e,t,n){let r=e+t-n,o=Math.abs(r-e),s=Math.abs(r-t),a=Math.abs(r-n);return o<=s&&o<=a?e:s<=a?t:n}});var Vt=m((Ac,Ar)=>{"use strict";var Ds=Qt(),Fs=Ut();function vr(i,e,t){let n=i*e;return t!==8&&(n=Math.ceil(n/(8/t))),n}var Te=Ar.exports=function(i,e){let t=i.width,n=i.height,r=i.interlace,o=i.bpp,s=i.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],r){let a=Ds.getImagePasses(t,n);for(let l=0;l<a.length;l++)this._images.push({byteWidth:vr(a[l].width,o,s),height:a[l].height,lineIndex:0})}else this._images.push({byteWidth:vr(t,o,s),height:n,lineIndex:0});s===8?this._xComparison=o:s===16?this._xComparison=o*2:this._xComparison=1};Te.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Te.prototype._unFilterType1=function(i,e,t){let n=this._xComparison,r=n-1;for(let o=0;o<t;o++){let s=i[1+o],a=o>r?e[o-n]:0;e[o]=s+a}};Te.prototype._unFilterType2=function(i,e,t){let n=this._lastLine;for(let r=0;r<t;r++){let o=i[1+r],s=n?n[r]:0;e[r]=o+s}};Te.prototype._unFilterType3=function(i,e,t){let n=this._xComparison,r=n-1,o=this._lastLine;for(let s=0;s<t;s++){let a=i[1+s],l=o?o[s]:0,c=s>r?e[s-n]:0,u=Math.floor((c+l)/2);e[s]=a+u}};Te.prototype._unFilterType4=function(i,e,t){let n=this._xComparison,r=n-1,o=this._lastLine;for(let s=0;s<t;s++){let a=i[1+s],l=o?o[s]:0,c=s>r?e[s-n]:0,u=s>r&&o?o[s-n]:0,f=Fs(c,l,u);e[s]=a+f}};Te.prototype._reverseFilterLine=function(i){let e=i[0],t,n=this._images[this._imageIndex],r=n.byteWidth;if(e===0)t=i.slice(1,r+1);else switch(t=Buffer.alloc(r),e){case 1:this._unFilterType1(i,t,r);break;case 2:this._unFilterType2(i,t,r);break;case 3:this._unFilterType3(i,t,r);break;case 4:this._unFilterType4(i,t,r);break;default:throw new Error("Unrecognised filter type - "+e)}this.write(t),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=t,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var Rr=m((Bc,Mr)=>{"use strict";var Ns=A("util"),Br=Nt(),Os=Vt(),Qs=Mr.exports=function(i){Br.call(this);let e=[],t=this;this._filter=new Os(i,{read:this.read.bind(this),write:function(n){e.push(n)},complete:function(){t.emit("complete",Buffer.concat(e))}}),this._filter.start()};Ns.inherits(Qs,Br)});var xe=m((Mc,Pr)=>{"use strict";Pr.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var Yt=m((Rc,Dr)=>{"use strict";var Ht=[];(function(){for(let i=0;i<256;i++){let e=i;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Ht[i]=e}})();var zt=Dr.exports=function(){this._crc=-1};zt.prototype.write=function(i){for(let e=0;e<i.length;e++)this._crc=Ht[(this._crc^i[e])&255]^this._crc>>>8;return!0};zt.prototype.crc32=function(){return this._crc^-1};zt.crc32=function(i){let e=-1;for(let t=0;t<i.length;t++)e=Ht[(e^i[t])&255]^e>>>8;return e^-1}});var jt=m((Pc,Fr)=>{"use strict";var M=xe(),Us=Yt(),R=Fr.exports=function(i,e){this._options=i,i.checkCRC=i.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[M.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[M.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[M.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[M.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[M.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[M.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};R.prototype.start=function(){this.read(M.PNG_SIGNATURE.length,this._parseSignature.bind(this))};R.prototype._parseSignature=function(i){let e=M.PNG_SIGNATURE;for(let t=0;t<e.length;t++)if(i[t]!==e[t]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};R.prototype._parseChunkBegin=function(i){let e=i.readUInt32BE(0),t=i.readUInt32BE(4),n="";for(let o=4;o<8;o++)n+=String.fromCharCode(i[o]);let r=!!(i[4]&32);if(!this._hasIHDR&&t!==M.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new Us,this._crc.write(Buffer.from(n)),this._chunks[t])return this._chunks[t](e);if(!r){this.error(new Error("Unsupported critical chunk type "+n));return}this.read(e+4,this._skipChunk.bind(this))};R.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};R.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};R.prototype._parseChunkEnd=function(i){let e=i.readInt32BE(0),t=this._crc.crc32();if(this._options.checkCRC&&t!==e){this.error(new Error("Crc error - "+e+" - "+t));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};R.prototype._handleIHDR=function(i){this.read(i,this._parseIHDR.bind(this))};R.prototype._parseIHDR=function(i){this._crc.write(i);let e=i.readUInt32BE(0),t=i.readUInt32BE(4),n=i[8],r=i[9],o=i[10],s=i[11],a=i[12];if(n!==8&&n!==4&&n!==2&&n!==1&&n!==16){this.error(new Error("Unsupported bit depth "+n));return}if(!(r in M.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(o!==0){this.error(new Error("Unsupported compression method"));return}if(s!==0){this.error(new Error("Unsupported filter method"));return}if(a!==0&&a!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=r;let l=M.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:t,depth:n,interlace:!!a,palette:!!(r&M.COLORTYPE_PALETTE),color:!!(r&M.COLORTYPE_COLOR),alpha:!!(r&M.COLORTYPE_ALPHA),bpp:l,colorType:r}),this._handleChunkEnd()};R.prototype._handlePLTE=function(i){this.read(i,this._parsePLTE.bind(this))};R.prototype._parsePLTE=function(i){this._crc.write(i);let e=Math.floor(i.length/3);for(let t=0;t<e;t++)this._palette.push([i[t*3],i[t*3+1],i[t*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};R.prototype._handleTRNS=function(i){this.simpleTransparency(),this.read(i,this._parseTRNS.bind(this))};R.prototype._parseTRNS=function(i){if(this._crc.write(i),this._colorType===M.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(i.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let e=0;e<i.length;e++)this._palette[e][3]=i[e];this.palette(this._palette)}this._colorType===M.COLORTYPE_GRAYSCALE&&this.transColor([i.readUInt16BE(0)]),this._colorType===M.COLORTYPE_COLOR&&this.transColor([i.readUInt16BE(0),i.readUInt16BE(2),i.readUInt16BE(4)]),this._handleChunkEnd()};R.prototype._handleGAMA=function(i){this.read(i,this._parseGAMA.bind(this))};R.prototype._parseGAMA=function(i){this._crc.write(i),this.gamma(i.readUInt32BE(0)/M.GAMMA_DIVISION),this._handleChunkEnd()};R.prototype._handleIDAT=function(i){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-i,this._parseIDAT.bind(this,i))};R.prototype._parseIDAT=function(i,e){if(this._crc.write(e),this._colorType===M.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);let t=i-e.length;t>0?this._handleIDAT(t):this._handleChunkEnd()};R.prototype._handleIEND=function(i){this.read(i,this._parseIEND.bind(this))};R.prototype._parseIEND=function(i){this._crc.write(i),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var Gt=m(Or=>{"use strict";var Nr=Qt(),Vs=[function(){},function(i,e,t,n){if(n===e.length)throw new Error("Ran out of data");let r=e[n];i[t]=r,i[t+1]=r,i[t+2]=r,i[t+3]=255},function(i,e,t,n){if(n+1>=e.length)throw new Error("Ran out of data");let r=e[n];i[t]=r,i[t+1]=r,i[t+2]=r,i[t+3]=e[n+1]},function(i,e,t,n){if(n+2>=e.length)throw new Error("Ran out of data");i[t]=e[n],i[t+1]=e[n+1],i[t+2]=e[n+2],i[t+3]=255},function(i,e,t,n){if(n+3>=e.length)throw new Error("Ran out of data");i[t]=e[n],i[t+1]=e[n+1],i[t+2]=e[n+2],i[t+3]=e[n+3]}],Hs=[function(){},function(i,e,t,n){let r=e[0];i[t]=r,i[t+1]=r,i[t+2]=r,i[t+3]=n},function(i,e,t){let n=e[0];i[t]=n,i[t+1]=n,i[t+2]=n,i[t+3]=e[1]},function(i,e,t,n){i[t]=e[0],i[t+1]=e[1],i[t+2]=e[2],i[t+3]=n},function(i,e,t){i[t]=e[0],i[t+1]=e[1],i[t+2]=e[2],i[t+3]=e[3]}];function zs(i,e){let t=[],n=0;function r(){if(n===i.length)throw new Error("Ran out of data");let o=i[n];n++;let s,a,l,c,u,f,p,y;switch(e){default:throw new Error("unrecognised depth");case 16:p=i[n],n++,t.push((o<<8)+p);break;case 4:p=o&15,y=o>>4,t.push(y,p);break;case 2:u=o&3,f=o>>2&3,p=o>>4&3,y=o>>6&3,t.push(y,p,f,u);break;case 1:s=o&1,a=o>>1&1,l=o>>2&1,c=o>>3&1,u=o>>4&1,f=o>>5&1,p=o>>6&1,y=o>>7&1,t.push(y,p,f,u,c,l,a,s);break}}return{get:function(o){for(;t.length<o;)r();let s=t.slice(0,o);return t=t.slice(o),s},resetAfterLine:function(){t.length=0},end:function(){if(n!==i.length)throw new Error("extra data found")}}}function Ys(i,e,t,n,r,o){let s=i.width,a=i.height,l=i.index;for(let c=0;c<a;c++)for(let u=0;u<s;u++){let f=t(u,c,l);Vs[n](e,r,f,o),o+=n}return o}function js(i,e,t,n,r,o){let s=i.width,a=i.height,l=i.index;for(let c=0;c<a;c++){for(let u=0;u<s;u++){let f=r.get(n),p=t(u,c,l);Hs[n](e,f,p,o)}r.resetAfterLine()}}Or.dataToBitMap=function(i,e){let t=e.width,n=e.height,r=e.depth,o=e.bpp,s=e.interlace,a;r!==8&&(a=zs(i,r));let l;r<=8?l=Buffer.alloc(t*n*4):l=new Uint16Array(t*n*4);let c=Math.pow(2,r)-1,u=0,f,p;if(s)f=Nr.getImagePasses(t,n),p=Nr.getInterlaceIterator(t,n);else{let y=0;p=function(){let C=y;return y+=4,C},f=[{width:t,height:n}]}for(let y=0;y<f.length;y++)r===8?u=Ys(f[y],l,p,o,i,u):js(f[y],l,p,o,a,c);if(r===8){if(u!==i.length)throw new Error("extra data found")}else a.end();return l}});var $t=m((Fc,Qr)=>{"use strict";function Gs(i,e,t,n,r){let o=0;for(let s=0;s<n;s++)for(let a=0;a<t;a++){let l=r[i[o]];if(!l)throw new Error("index "+i[o]+" not in palette");for(let c=0;c<4;c++)e[o+c]=l[c];o+=4}}function $s(i,e,t,n,r){let o=0;for(let s=0;s<n;s++)for(let a=0;a<t;a++){let l=!1;if(r.length===1?r[0]===i[o]&&(l=!0):r[0]===i[o]&&r[1]===i[o+1]&&r[2]===i[o+2]&&(l=!0),l)for(let c=0;c<4;c++)e[o+c]=0;o+=4}}function Ks(i,e,t,n,r){let o=255,s=Math.pow(2,r)-1,a=0;for(let l=0;l<n;l++)for(let c=0;c<t;c++){for(let u=0;u<4;u++)e[a+u]=Math.floor(i[a+u]*o/s+.5);a+=4}}Qr.exports=function(i,e){let t=e.depth,n=e.width,r=e.height,o=e.colorType,s=e.transColor,a=e.palette,l=i;return o===3?Gs(i,l,n,r,a):(s&&$s(i,l,n,r,s),t!==8&&(t===16&&(l=Buffer.alloc(n*r*4)),Ks(i,l,n,r,t))),l}});var Hr=m((Nc,Vr)=>{"use strict";var Ws=A("util"),Kt=A("zlib"),Ur=Nt(),Js=Rr(),Zs=jt(),Xs=Gt(),ea=$t(),j=Vr.exports=function(i){Ur.call(this),this._parser=new Zs(i,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=i,this.writable=!0,this._parser.start()};Ws.inherits(j,Ur);j.prototype._handleError=function(i){this.emit("error",i),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};j.prototype._inflateData=function(i){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=Kt.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,n=Math.max(t,Kt.Z_MIN_CHUNK);this._inflate=Kt.createInflate({chunkSize:n});let r=t,o=this.emit.bind(this,"error");this._inflate.on("error",function(a){r&&o(a)}),this._filter.on("complete",this._complete.bind(this));let s=this._filter.write.bind(this._filter);this._inflate.on("data",function(a){r&&(a.length>r&&(a=a.slice(0,r)),r-=a.length,s(a))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(i)};j.prototype._handleMetaData=function(i){this._metaData=i,this._bitmapInfo=Object.create(i),this._filter=new Js(this._bitmapInfo)};j.prototype._handleTransColor=function(i){this._bitmapInfo.transColor=i};j.prototype._handlePalette=function(i){this._bitmapInfo.palette=i};j.prototype._simpleTransparency=function(){this._metaData.alpha=!0};j.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};j.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};j.prototype._complete=function(i){if(this.errord)return;let e;try{let t=Xs.dataToBitMap(i,this._bitmapInfo);e=ea(t,this._bitmapInfo),t=null}catch(t){this._handleError(t);return}this.emit("parsed",e)}});var Yr=m((Oc,zr)=>{"use strict";var V=xe();zr.exports=function(i,e,t,n){let r=[V.COLORTYPE_COLOR_ALPHA,V.COLORTYPE_ALPHA].indexOf(n.colorType)!==-1;if(n.colorType===n.inputColorType){let C=function(){let b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]!==256}();if(n.bitDepth===8||n.bitDepth===16&&C)return i}let o=n.bitDepth!==16?i:new Uint16Array(i.buffer),s=255,a=V.COLORTYPE_TO_BPP_MAP[n.inputColorType];a===4&&!n.inputHasAlpha&&(a=3);let l=V.COLORTYPE_TO_BPP_MAP[n.colorType];n.bitDepth===16&&(s=65535,l*=2);let c=Buffer.alloc(e*t*l),u=0,f=0,p=n.bgColor||{};p.red===void 0&&(p.red=s),p.green===void 0&&(p.green=s),p.blue===void 0&&(p.blue=s);function y(){let C,b,E,q=s;switch(n.inputColorType){case V.COLORTYPE_COLOR_ALPHA:q=o[u+3],C=o[u],b=o[u+1],E=o[u+2];break;case V.COLORTYPE_COLOR:C=o[u],b=o[u+1],E=o[u+2];break;case V.COLORTYPE_ALPHA:q=o[u+1],C=o[u],b=C,E=C;break;case V.COLORTYPE_GRAYSCALE:C=o[u],b=C,E=C;break;default:throw new Error("input color type:"+n.inputColorType+" is not supported at present")}return n.inputHasAlpha&&(r||(q/=s,C=Math.min(Math.max(Math.round((1-q)*p.red+q*C),0),s),b=Math.min(Math.max(Math.round((1-q)*p.green+q*b),0),s),E=Math.min(Math.max(Math.round((1-q)*p.blue+q*E),0),s))),{red:C,green:b,blue:E,alpha:q}}for(let C=0;C<t;C++)for(let b=0;b<e;b++){let E=y(o,u);switch(n.colorType){case V.COLORTYPE_COLOR_ALPHA:case V.COLORTYPE_COLOR:n.bitDepth===8?(c[f]=E.red,c[f+1]=E.green,c[f+2]=E.blue,r&&(c[f+3]=E.alpha)):(c.writeUInt16BE(E.red,f),c.writeUInt16BE(E.green,f+2),c.writeUInt16BE(E.blue,f+4),r&&c.writeUInt16BE(E.alpha,f+6));break;case V.COLORTYPE_ALPHA:case V.COLORTYPE_GRAYSCALE:{let q=(E.red+E.green+E.blue)/3;n.bitDepth===8?(c[f]=q,r&&(c[f+1]=E.alpha)):(c.writeUInt16BE(q,f),r&&c.writeUInt16BE(E.alpha,f+2));break}default:throw new Error("unrecognised color Type "+n.colorType)}u+=a,f+=l}return c}});var $r=m((Qc,Gr)=>{"use strict";var jr=Ut();function ta(i,e,t,n,r){for(let o=0;o<t;o++)n[r+o]=i[e+o]}function ia(i,e,t){let n=0,r=e+t;for(let o=e;o<r;o++)n+=Math.abs(i[o]);return n}function na(i,e,t,n,r,o){for(let s=0;s<t;s++){let a=s>=o?i[e+s-o]:0,l=i[e+s]-a;n[r+s]=l}}function ra(i,e,t,n){let r=0;for(let o=0;o<t;o++){let s=o>=n?i[e+o-n]:0,a=i[e+o]-s;r+=Math.abs(a)}return r}function oa(i,e,t,n,r){for(let o=0;o<t;o++){let s=e>0?i[e+o-t]:0,a=i[e+o]-s;n[r+o]=a}}function sa(i,e,t){let n=0,r=e+t;for(let o=e;o<r;o++){let s=e>0?i[o-t]:0,a=i[o]-s;n+=Math.abs(a)}return n}function aa(i,e,t,n,r,o){for(let s=0;s<t;s++){let a=s>=o?i[e+s-o]:0,l=e>0?i[e+s-t]:0,c=i[e+s]-(a+l>>1);n[r+s]=c}}function la(i,e,t,n){let r=0;for(let o=0;o<t;o++){let s=o>=n?i[e+o-n]:0,a=e>0?i[e+o-t]:0,l=i[e+o]-(s+a>>1);r+=Math.abs(l)}return r}function ca(i,e,t,n,r,o){for(let s=0;s<t;s++){let a=s>=o?i[e+s-o]:0,l=e>0?i[e+s-t]:0,c=e>0&&s>=o?i[e+s-(t+o)]:0,u=i[e+s]-jr(a,l,c);n[r+s]=u}}function ua(i,e,t,n){let r=0;for(let o=0;o<t;o++){let s=o>=n?i[e+o-n]:0,a=e>0?i[e+o-t]:0,l=e>0&&o>=n?i[e+o-(t+n)]:0,c=i[e+o]-jr(s,a,l);r+=Math.abs(c)}return r}var ha={0:ta,1:na,2:oa,3:aa,4:ca},fa={0:ia,1:ra,2:sa,3:la,4:ua};Gr.exports=function(i,e,t,n,r){let o;if(!("filterType"in n)||n.filterType===-1)o=[0,1,2,3,4];else if(typeof n.filterType=="number")o=[n.filterType];else throw new Error("unrecognised filter types");n.bitDepth===16&&(r*=2);let s=e*r,a=0,l=0,c=Buffer.alloc((s+1)*t),u=o[0];for(let f=0;f<t;f++){if(o.length>1){let p=1/0;for(let y=0;y<o.length;y++){let C=fa[o[y]](i,l,s,r);C<p&&(u=o[y],p=C)}}c[a]=u,a++,ha[u](i,l,s,c,a,r),a+=s,l+=s}return c}});var Wt=m((Uc,Kr)=>{"use strict";var P=xe(),da=Yt(),pa=Yr(),ma=$r(),ga=A("zlib"),ne=Kr.exports=function(i){if(this._options=i,i.deflateChunkSize=i.deflateChunkSize||32*1024,i.deflateLevel=i.deflateLevel!=null?i.deflateLevel:9,i.deflateStrategy=i.deflateStrategy!=null?i.deflateStrategy:3,i.inputHasAlpha=i.inputHasAlpha!=null?i.inputHasAlpha:!0,i.deflateFactory=i.deflateFactory||ga.createDeflate,i.bitDepth=i.bitDepth||8,i.colorType=typeof i.colorType=="number"?i.colorType:P.COLORTYPE_COLOR_ALPHA,i.inputColorType=typeof i.inputColorType=="number"?i.inputColorType:P.COLORTYPE_COLOR_ALPHA,[P.COLORTYPE_GRAYSCALE,P.COLORTYPE_COLOR,P.COLORTYPE_COLOR_ALPHA,P.COLORTYPE_ALPHA].indexOf(i.colorType)===-1)throw new Error("option color type:"+i.colorType+" is not supported at present");if([P.COLORTYPE_GRAYSCALE,P.COLORTYPE_COLOR,P.COLORTYPE_COLOR_ALPHA,P.COLORTYPE_ALPHA].indexOf(i.inputColorType)===-1)throw new Error("option input color type:"+i.inputColorType+" is not supported at present");if(i.bitDepth!==8&&i.bitDepth!==16)throw new Error("option bit depth:"+i.bitDepth+" is not supported at present")};ne.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};ne.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};ne.prototype.filterData=function(i,e,t){let n=pa(i,e,t,this._options),r=P.COLORTYPE_TO_BPP_MAP[this._options.colorType];return ma(n,e,t,this._options,r)};ne.prototype._packChunk=function(i,e){let t=e?e.length:0,n=Buffer.alloc(t+12);return n.writeUInt32BE(t,0),n.writeUInt32BE(i,4),e&&e.copy(n,8),n.writeInt32BE(da.crc32(n.slice(4,n.length-4)),n.length-4),n};ne.prototype.packGAMA=function(i){let e=Buffer.alloc(4);return e.writeUInt32BE(Math.floor(i*P.GAMMA_DIVISION),0),this._packChunk(P.TYPE_gAMA,e)};ne.prototype.packIHDR=function(i,e){let t=Buffer.alloc(13);return t.writeUInt32BE(i,0),t.writeUInt32BE(e,4),t[8]=this._options.bitDepth,t[9]=this._options.colorType,t[10]=0,t[11]=0,t[12]=0,this._packChunk(P.TYPE_IHDR,t)};ne.prototype.packIDAT=function(i){return this._packChunk(P.TYPE_IDAT,i)};ne.prototype.packIEND=function(){return this._packChunk(P.TYPE_IEND,null)}});var Xr=m((Vc,Zr)=>{"use strict";var _a=A("util"),Wr=A("stream"),ya=xe(),wa=Wt(),Jr=Zr.exports=function(i){Wr.call(this);let e=i||{};this._packer=new wa(e),this._deflate=this._packer.createDeflate(),this.readable=!0};_a.inherits(Jr,Wr);Jr.prototype.pack=function(i,e,t,n){this.emit("data",Buffer.from(ya.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,t)),n&&this.emit("data",this._packer.packGAMA(n));let r=this._packer.filterData(i,e,t);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(o){this.emit("data",this._packer.packIDAT(o))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(r)}});var oo=m((Fe,ro)=>{"use strict";var eo=A("assert").ok,Se=A("zlib"),Ca=A("util"),to=A("buffer").kMaxLength;function ce(i){if(!(this instanceof ce))return new ce(i);i&&i.chunkSize<Se.Z_MIN_CHUNK&&(i.chunkSize=Se.Z_MIN_CHUNK),Se.Inflate.call(this,i),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,i&&i.maxLength!=null&&(this._maxLength=i.maxLength)}function Ea(i){return new ce(i)}function io(i,e){e&&process.nextTick(e),i._handle&&(i._handle.close(),i._handle=null)}ce.prototype._processChunk=function(i,e,t){if(typeof t=="function")return Se.Inflate._processChunk.call(this,i,e,t);let n=this,r=i&&i.length,o=this._chunkSize-this._offset,s=this._maxLength,a=0,l=[],c=0,u;this.on("error",function(C){u=C});function f(C,b){if(n._hadError)return;let E=o-b;if(eo(E>=0,"have should not go down"),E>0){let q=n._buffer.slice(n._offset,n._offset+E);if(n._offset+=E,q.length>s&&(q=q.slice(0,s)),l.push(q),c+=q.length,s-=q.length,s===0)return!1}return(b===0||n._offset>=n._chunkSize)&&(o=n._chunkSize,n._offset=0,n._buffer=Buffer.allocUnsafe(n._chunkSize)),b===0?(a+=r-C,r=C,!0):!1}eo(this._handle,"zlib binding closed");let p;do p=this._handle.writeSync(e,i,a,r,this._buffer,this._offset,o),p=p||this._writeState;while(!this._hadError&&f(p[0],p[1]));if(this._hadError)throw u;if(c>=to)throw io(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+to.toString(16)+" bytes");let y=Buffer.concat(l,c);return io(this),y};Ca.inherits(ce,Se.Inflate);function ba(i,e){if(typeof e=="string"&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");let t=i._finishFlushFlag;return t==null&&(t=Se.Z_FINISH),i._processChunk(e,t)}function no(i,e){return ba(new ce(e),i)}ro.exports=Fe=no;Fe.Inflate=ce;Fe.createInflate=Ea;Fe.inflateSync=no});var Jt=m((Hc,ao)=>{"use strict";var so=ao.exports=function(i){this._buffer=i,this._reads=[]};so.prototype.read=function(i,e){this._reads.push({length:Math.abs(i),allowLess:i<0,func:e})};so.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let i=this._reads[0];if(this._buffer.length&&(this._buffer.length>=i.length||i.allowLess)){this._reads.shift();let e=this._buffer;this._buffer=e.slice(i.length),i.func.call(this,e.slice(0,i.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}});var co=m(lo=>{"use strict";var Ta=Jt(),xa=Vt();lo.process=function(i,e){let t=[],n=new Ta(i);return new xa(e,{read:n.read.bind(n),write:function(o){t.push(o)},complete:function(){}}).start(),n.process(),Buffer.concat(t)}});var po=m((Yc,fo)=>{"use strict";var uo=!0,ho=A("zlib"),Sa=oo();ho.deflateSync||(uo=!1);var La=Jt(),qa=co(),Ia=jt(),ka=Gt(),va=$t();fo.exports=function(i,e){if(!uo)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t;function n(D){t=D}let r;function o(D){r=D}function s(D){r.transColor=D}function a(D){r.palette=D}function l(){r.alpha=!0}let c;function u(D){c=D}let f=[];function p(D){f.push(D)}let y=new La(i);if(new Ia(e,{read:y.read.bind(y),error:n,metadata:o,gamma:u,palette:a,transColor:s,inflateData:p,simpleTransparency:l}).start(),y.process(),t)throw t;let b=Buffer.concat(f);f.length=0;let E;if(r.interlace)E=ho.inflateSync(b);else{let O=((r.width*r.bpp*r.depth+7>>3)+1)*r.height;E=Sa(b,{chunkSize:O,maxLength:O})}if(b=null,!E||!E.length)throw new Error("bad png - invalid inflate data response");let q=qa.process(E,r);b=null;let ut=ka.dataToBitMap(q,r);q=null;let Ie=va(ut,r);return r.data=Ie,r.gamma=c||0,r}});var yo=m((jc,_o)=>{"use strict";var mo=!0,go=A("zlib");go.deflateSync||(mo=!1);var Aa=xe(),Ba=Wt();_o.exports=function(i,e){if(!mo)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t=e||{},n=new Ba(t),r=[];r.push(Buffer.from(Aa.PNG_SIGNATURE)),r.push(n.packIHDR(i.width,i.height)),i.gamma&&r.push(n.packGAMA(i.gamma));let o=n.filterData(i.data,i.width,i.height),s=go.deflateSync(o,n.getDeflateOptions());if(o=null,!s||!s.length)throw new Error("bad png - invalid compressed data response");return r.push(n.packIDAT(s)),r.push(n.packIEND()),Buffer.concat(r)}});var wo=m(Zt=>{"use strict";var Ma=po(),Ra=yo();Zt.read=function(i,e){return Ma(i,e||{})};Zt.write=function(i,e){return Ra(i,e)}});var bo=m(Eo=>{"use strict";var Pa=A("util"),Co=A("stream"),Da=Hr(),Fa=Xr(),Na=wo(),F=Eo.PNG=function(i){Co.call(this),i=i||{},this.width=i.width|0,this.height=i.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,i.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Da(i),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new Fa(i),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};Pa.inherits(F,Co);F.sync=Na;F.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};F.prototype.parse=function(i,e){if(e){let t,n;t=function(r){this.removeListener("error",n),this.data=r,e(null,this)}.bind(this),n=function(r){this.removeListener("parsed",t),e(r,null)}.bind(this),this.once("parsed",t),this.once("error",n)}return this.end(i),this};F.prototype.write=function(i){return this._parser.write(i),!0};F.prototype.end=function(i){this._parser.end(i)};F.prototype._metadata=function(i){this.width=i.width,this.height=i.height,this.emit("metadata",i)};F.prototype._gamma=function(i){this.gamma=i};F.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};F.bitblt=function(i,e,t,n,r,o,s,a){if(t|=0,n|=0,r|=0,o|=0,s|=0,a|=0,t>i.width||n>i.height||t+r>i.width||n+o>i.height)throw new Error("bitblt reading outside image");if(s>e.width||a>e.height||s+r>e.width||a+o>e.height)throw new Error("bitblt writing outside image");for(let l=0;l<o;l++)i.data.copy(e.data,(a+l)*e.width+s<<2,(n+l)*i.width+t<<2,(n+l)*i.width+t+r<<2)};F.prototype.bitblt=function(i,e,t,n,r,o,s){return F.bitblt(this,i,e,t,n,r,o,s),this};F.adjustGamma=function(i){if(i.gamma){for(let e=0;e<i.height;e++)for(let t=0;t<i.width;t++){let n=i.width*e+t<<2;for(let r=0;r<3;r++){let o=i.data[n+r]/255;o=Math.pow(o,1/2.2/i.gamma),i.data[n+r]=Math.round(o*255)}}i.gamma=0}};F.prototype.adjustGamma=function(){F.adjustGamma(this)}});var Ne=m(ue=>{"use strict";function To(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}ue.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:To(e.color.dark||"#000000ff"),light:To(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};ue.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};ue.getImageWidth=function(e,t){let n=ue.getScale(e,t);return Math.floor((e+t.margin*2)*n)};ue.qrToImageData=function(e,t,n){let r=t.modules.size,o=t.modules.data,s=ue.getScale(r,n),a=Math.floor((r+n.margin*2)*s),l=n.margin*s,c=[n.color.light,n.color.dark];for(let u=0;u<a;u++)for(let f=0;f<a;f++){let p=(u*a+f)*4,y=n.color.light;if(u>=l&&f>=l&&u<a-l&&f<a-l){let C=Math.floor((u-l)/s),b=Math.floor((f-l)/s);y=c[o[C*r+b]?1:0]}e[p++]=y.r,e[p++]=y.g,e[p++]=y.b,e[p]=y.a}}});var xo=m(G=>{"use strict";var Oa=A("fs"),Qa=bo().PNG,Xt=Ne();G.render=function(e,t){let n=Xt.getOptions(t),r=n.rendererOpts,o=Xt.getImageWidth(e.modules.size,n);r.width=o,r.height=o;let s=new Qa(r);return Xt.qrToImageData(s.data,e,n),s};G.renderToDataURL=function(e,t,n){typeof n>"u"&&(n=t,t=void 0),G.renderToBuffer(e,t,function(r,o){r&&n(r);let s="data:image/png;base64,";s+=o.toString("base64"),n(null,s)})};G.renderToBuffer=function(e,t,n){typeof n>"u"&&(n=t,t=void 0);let r=G.render(e,t),o=[];r.on("error",n),r.on("data",function(s){o.push(s)}),r.on("end",function(){n(null,Buffer.concat(o))}),r.pack()};G.renderToFile=function(e,t,n,r){typeof r>"u"&&(r=n,n=void 0);let o=!1,s=(...l)=>{o||(o=!0,r.apply(null,l))},a=Oa.createWriteStream(e);a.on("error",s),a.on("close",s),G.renderToFileStream(a,t,n)};G.renderToFileStream=function(e,t,n){G.render(t,n).pack().pipe(e)}});var So=m(st=>{"use strict";var Ua=Ne(),Va={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},Ha={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function za(i,e,t){return i&&e?t.BB:i&&!e?t.BW:!i&&e?t.WB:t.WW}st.render=function(i,e,t){let n=Ua.getOptions(e),r=Va;(n.color.dark.hex==="#ffffff"||n.color.light.hex==="#000000")&&(r=Ha);let o=i.modules.size,s=i.modules.data,a="",l=Array(o+n.margin*2+1).join(r.WW);l=Array(n.margin/2+1).join(l+`
`);let c=Array(n.margin+1).join(r.WW);a+=l;for(let u=0;u<o;u+=2){a+=c;for(let f=0;f<o;f++){let p=s[u*o+f],y=s[(u+1)*o+f];a+=za(p,y,r)}a+=c+`
`}return a+=l.slice(0,-1),typeof t=="function"&&t(null,a),a};st.renderToFile=function(e,t,n,r){typeof r>"u"&&(r=n,n=void 0);let o=A("fs"),s=st.render(t,n);o.writeFile(e,s,r)}});var qo=m(Lo=>{"use strict";Lo.render=function(i,e,t){let n=i.modules.size,r=i.modules.data,o="\x1B[40m  \x1B[0m",s="\x1B[47m  \x1B[0m",a="",l=Array(n+3).join(s),c=Array(2).join(s);a+=l+`
`;for(let u=0;u<n;++u){a+=s;for(let f=0;f<n;f++)a+=r[u*n+f]?o:s;a+=c+`
`}return a+=l+`
`,typeof t=="function"&&t(null,a),a}});var Ao=m(vo=>{"use strict";var Ya="\x1B[47m",ja="\x1B[40m",ei="\x1B[37m",ti="\x1B[30m",he="\x1B[0m",Ga=Ya+ti,$a=ja+ei,Ka=function(i,e,t){return{"00":he+" "+i,"01":he+e+"\u2584"+i,"02":he+t+"\u2584"+i,10:he+e+"\u2580"+i,11:" ",12:"\u2584",20:he+t+"\u2580"+i,21:"\u2580",22:"\u2588"}},Io=function(i,e,t,n){let r=e+1;if(t>=r||n>=r||n<-1||t<-1)return"0";if(t>=e||n>=e||n<0||t<0)return"1";let o=n*e+t;return i[o]?"2":"1"},ko=function(i,e,t,n){return Io(i,e,t,n)+Io(i,e,t,n+1)};vo.render=function(i,e,t){let n=i.modules.size,r=i.modules.data,o=!!(e&&e.inverse),s=e&&e.inverse?$a:Ga,c=Ka(s,o?ti:ei,o?ei:ti),u=he+`
`+s,f=s;for(let p=-1;p<n+1;p+=2){for(let y=-1;y<n;y++)f+=c[ko(r,n,y,p)];f+=c[ko(r,n,n,p)]+u}return f+=he,typeof t=="function"&&t(null,f),f}});var Mo=m(Bo=>{"use strict";var Wa=qo(),Ja=Ao();Bo.render=function(i,e,t){return e&&e.small?Ja.render(i,e,t):Wa.render(i,e,t)}});var ni=m(Po=>{"use strict";var Za=Ne();function Ro(i,e){let t=i.a/255,n=e+'="'+i.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function ii(i,e,t){let n=i+e;return typeof t<"u"&&(n+=" "+t),n}function Xa(i,e,t){let n="",r=0,o=!1,s=0;for(let a=0;a<i.length;a++){let l=Math.floor(a%e),c=Math.floor(a/e);!l&&!o&&(o=!0),i[a]?(s++,a>0&&l>0&&i[a-1]||(n+=o?ii("M",l+t,.5+c+t):ii("m",r,0),r=0,o=!1),l+1<e&&i[a+1]||(n+=ii("h",s),s=0)):r++}return n}Po.render=function(e,t,n){let r=Za.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+r.margin*2,l=r.color.light.a?"<path "+Ro(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+Ro(r.color.dark,"stroke")+' d="'+Xa(s,o,r.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof n=="function"&&n(null,p),p}});var Do=m(at=>{"use strict";var el=ni();at.render=el.render;at.renderToFile=function(e,t,n,r){typeof r>"u"&&(r=n,n=void 0);let o=A("fs"),a='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+at.render(t,n);o.writeFile(e,a,r)}});var Fo=m(lt=>{"use strict";var ri=Ne();function tl(i,e,t){i.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function il(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}lt.render=function(e,t,n){let r=n,o=t;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),t||(o=il()),r=ri.getOptions(r);let s=ri.getImageWidth(e.modules.size,r),a=o.getContext("2d"),l=a.createImageData(s,s);return ri.qrToImageData(l.data,e,r),tl(a,o,s),a.putImageData(l,0,0),o};lt.renderToDataURL=function(e,t,n){let r=n;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),r||(r={});let o=lt.render(e,t,r),s=r.type||"image/png",a=r.rendererOpts||{};return o.toDataURL(s,a.quality)}});var Oo=m(Oe=>{"use strict";var nl=yt(),oi=Ft(),No=Fo(),rl=ni();function si(i,e,t,n,r){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!nl())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(r=t,t=e,e=n=void 0):s===3&&(e.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=n=void 0):s===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(l,c){try{let u=oi.create(t,n);l(i(u,e,n))}catch(u){c(u)}})}try{let l=oi.create(t,n);r(null,i(l,e,n))}catch(l){r(l)}}Oe.create=oi.create;Oe.toCanvas=si.bind(null,No.render);Oe.toDataURL=si.bind(null,No.renderToDataURL);Oe.toString=si.bind(null,function(i,e,t){return rl.render(i,t)})});var Ho=m(re=>{"use strict";var Qo=yt(),ai=Ft(),ol=xo(),Uo=So(),sl=Mo(),Vo=Do();function Qe(i,e,t){if(typeof i>"u")throw new Error("String required as first argument");if(typeof t>"u"&&(t=e,e={}),typeof t!="function")if(Qo())e=t||{},t=null;else throw new Error("Callback required as last argument");return{opts:e,cb:t}}function al(i){return i.slice((i.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function ct(i){switch(i){case"svg":return Vo;case"txt":case"utf8":return Uo;case"png":case"image/png":default:return ol}}function ll(i){switch(i){case"svg":return Vo;case"terminal":return sl;case"utf8":default:return Uo}}function Ue(i,e,t){if(!t.cb)return new Promise(function(n,r){try{let o=ai.create(e,t.opts);return i(o,t.opts,function(s,a){return s?r(s):n(a)})}catch(o){r(o)}});try{let n=ai.create(e,t.opts);return i(n,t.opts,t.cb)}catch(n){t.cb(n)}}re.create=ai.create;re.toCanvas=Oo().toCanvas;re.toString=function(e,t,n){let r=Qe(e,t,n),o=r.opts?r.opts.type:void 0,s=ll(o);return Ue(s.render,e,r)};re.toDataURL=function(e,t,n){let r=Qe(e,t,n),o=ct(r.opts.type);return Ue(o.renderToDataURL,e,r)};re.toBuffer=function(e,t,n){let r=Qe(e,t,n),o=ct(r.opts.type);return Ue(o.renderToBuffer,e,r)};re.toFile=function(e,t,n,r){if(typeof e!="string"||!(typeof t=="string"||typeof t=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!Qo())throw new Error("Too few arguments provided");let o=Qe(t,n,r),s=o.opts.type||al(e),l=ct(s).renderToFile.bind(null,e);return Ue(l,t,o)};re.toFileStream=function(e,t,n){if(arguments.length<2)throw new Error("Too few arguments provided");let r=Qe(t,n,e.emit.bind(e,"error")),s=ct("png").renderToFileStream.bind(null,e);Ue(s,t,r)}});var li=m((su,zo)=>{"use strict";zo.exports=Ho()});var Ke=class i{constructor(e,t,n){this._StorageService=e;this.router=t;this._ErrorLogService=n}ListQuanlyqrcode=ze([]);DetailQuanlyqrcode=ze({});quanlyqrcodeId=ze(null);setQuanlyqrcodeId(e){this.quanlyqrcodeId.set(e)}socket=Oi(`${J.APIURL}`,{transports:["websocket"],reconnectionAttempts:5,timeout:5e3});CreateQuanlyqrcode(e){return B(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},n=yield fetch(`${J.APIURL}/quanlyqrcode`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let r=yield n.json();n.ok||this.handleError(n.status),this.getAllQuanlyqrcode(),this.quanlyqrcodeId.set(r.id)}catch(t){return this._ErrorLogService.logError("Failed to CreateQuanlyqrcode",t),console.error(t)}})}getAllQuanlyqrcode(){return B(this,null,function*(){let t=yield(yield this.initDB()).getAll("quanlyqrcodes"),n=this._StorageService.getItem("quanlyqrcodes_updatedAt")||"0";if(t.length>0&&Date.now()-new Date(n).getTime()<5*60*1e3)return this.ListQuanlyqrcode.set(t),t;try{let r={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`}},o=yield fetch(`${J.APIURL}/quanlyqrcode/last-updated`,r);if(!o.ok)return this.handleError(o.status),t;let{updatedAt:s}=yield o.json();if(s<=n)return this.ListQuanlyqrcode.set(t),t;console.log(s,n);let a=yield fetch(`${J.APIURL}/quanlyqrcode`,r);if(!a.ok)return this.handleError(a.status),t;let l=yield a.json();return yield this.saveQuanlyqrcodes(l),this._StorageService.setItem("quanlyqrcodes_updatedAt",s),this.ListQuanlyqrcode.set(l),l}catch(r){return this._ErrorLogService.logError("Failed to create getAllQuanlyqrcode",r),console.error(r),t}})}listenQuanlyqrcodeUpdates(){this.socket.on("quanlyqrcode-updated",()=>B(this,null,function*(){console.log("\u{1F504} D\u1EEF li\u1EC7u s\u1EA3n ph\u1EA9m thay \u0111\u1ED5i, c\u1EADp nh\u1EADt l\u1EA1i cache..."),this._StorageService.removeItem("quanlyqrcodes_updatedAt"),yield this.getAllQuanlyqrcode()}))}initDB(){return B(this,null,function*(){return yield Qi("QuanlyqrcodeDB",1,{upgrade(e){e.createObjectStore("quanlyqrcodes",{keyPath:"id"})}})})}saveQuanlyqrcodes(e){return B(this,null,function*(){let n=(yield this.initDB()).transaction("quanlyqrcodes","readwrite"),r=n.objectStore("quanlyqrcodes");yield r.clear(),e.forEach(o=>r.put(o)),yield n.done})}getQuanlyqrcodeBy(e){return B(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(e)},n=yield fetch(`${J.APIURL}/quanlyqrcode/findby`,t);n.ok||this.handleError(n.status);let r=yield n.json();this.DetailQuanlyqrcode.set(r)}catch(t){return this._ErrorLogService.logError("Failed to getQuanlyqrcodeBy",t),console.error(t)}})}updateQuanlyqrcode(e){return B(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},n=yield fetch(`${J.APIURL}/quanlyqrcode/${e.id}`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let r=yield n.json();n.ok||this.handleError(n.status),this.getAllQuanlyqrcode(),this.getQuanlyqrcodeBy({id:r.id})}catch(t){return this._ErrorLogService.logError("Failed to updateQuanlyqrcode",t),console.error(t)}})}DeleteQuanlyqrcode(e){return B(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}},n=yield fetch(`${J.APIURL}/quanlyqrcode/${e.id}`,t);n.ok||this.handleError(n.status),this.getAllQuanlyqrcode()}catch(t){return this._ErrorLogService.logError("Failed to DeleteQuanlyqrcode",t),console.error(t)}})}handleError(e){let t="L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh";switch(e){case 401:t="Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i";break;case 403:t="B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp";break;case 500:t="L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau";break}let n=JSON.stringify({code:e,title:t});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}static \u0275fac=function(t){return new(t||i)(He(Ni),He(Ge),He(Ui))};static \u0275prov=hi({token:i,factory:i.\u0275fac,providedIn:"root"})};var Le=ui(li(),1);var cl=["qrcElement"],Yo=(()=>{class i{constructor(t,n){this.renderer=t,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new di,this.context=null}ngOnChanges(){return B(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((n,r)=>{(0,Le.toDataURL)(this.qrdata,t,(o,s)=>{o?r(o):n(s)})})}toCanvas(t,n){return new Promise((r,o)=>{(0,Le.toCanvas)(t,this.qrdata,n,s=>{s?o(s):r("success")})})}toSVG(t){return new Promise((n,r)=>{(0,Le.toString)(this.qrdata,t,(o,s)=>{o?r(o):n(s)})})}renderElement(t){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return B(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,r=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let s=this.renderer.createElement("canvas");this.context=s.getContext("2d"),this.toCanvas(s,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(s,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(s,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(o,r),n!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=n),r!==this.centerImage.height&&(this.centerImage.height=r),o!==this.centerImage.width&&(this.centerImage.width=o);let a=this.centerImage;a&&(a.onload=()=>{this.context?.drawImage(a,s.width/2-o/2,s.height/2-r/2,o,r)})}this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] canvas error:",a)});break}case"svg":{let s=this.renderer.createElement("div");this.toSVG(t).then(a=>{this.renderer.setProperty(s,"innerHTML",a);let l=s.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(a=>{console.error("[angularx-qrcode] svg error:",a)});break}case"url":case"img":default:{let s=this.renderer.createElement("img");this.toDataURL(t).then(a=>{this.alt&&s.setAttribute("alt",this.alt),this.ariaLabel&&s.setAttribute("aria-label",this.ariaLabel),s.setAttribute("src",a),this.title&&s.setAttribute("title",this.title),this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] img/url error:",a)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let n=t.split(";base64,"),r=n[0].split(":")[1],o=atob(n[1]),s=new Uint8Array(o.length);for(let a=0;a<o.length;++a)s[a]=o.charCodeAt(a);return new Blob([s],{type:r})}emitQRCodeURL(t){let n=t.constructor.name;if(n===SVGSVGElement.name){let l=t.outerHTML,c=new Blob([l],{type:"image/svg+xml"}),u=URL.createObjectURL(c),f=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(f);return}let r="";n===HTMLCanvasElement.name&&(r=t.toDataURL("image/png")),n===HTMLImageElement.name&&(r=t.src);let o=this.convertBase64ImageUrlToBlob(r),s=URL.createObjectURL(o),a=this.sanitizer.bypassSecurityTrustUrl(s);this.qrCodeURL.emit(a)}static{this.\u0275fac=function(n){return new(n||i)(dt(pi),dt(vi))}}static{this.\u0275cmp=Ye({type:i,selectors:[["qrcode"]],viewQuery:function(n,r){if(n&1&&de(cl,7),n&2){let o;pe(o=me())&&(r.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[fi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,r){n&1&&ke(0,"div",null,0),n&2&&mi(r.cssClass)},encapsulation:2,changeDetection:0})}}return i})();var Go=ui(li());var ul=["drawer"],hl=()=>({standalone:!0}),fl=(i,e)=>e.key;function dl(i,e){if(i&1){let t=Q();h(0,"button",47),L("click",function(r){let o=T(t).$implicit;return g(2).toggleColumn(o),x(r.stopPropagation())}),h(1,"mat-icon"),_(2),d(),h(3,"span"),_(4),d()()}if(i&2){let t=e.$implicit;w(2),W(t.isShow?"check_box":"check_box_outline_blank"),w(2),W(t.value)}}function pl(i,e){if(i&1){let t=Q();h(0,"button",48),L("click",function(){T(t);let r=g(2),o=Y(45);return x(r.openDeleteDialog(o))}),h(1,"mat-icon"),_(2,"delete"),d()()}}function ml(i,e){if(i&1){let t=Q();h(0,"button",49),L("click",function(){T(t);let r=g(2),o=Y(47);return x(r.openSentEmailDialog(o))}),h(1,"mat-icon"),_(2,"forward_to_inbox"),d()()}}function gl(i,e){if(i&1){let t=Q();h(0,"div",29)(1,"div",30)(2,"button",31),L("click",function(){T(t);let r=g();return x(r.create())}),h(3,"mat-icon"),_(4,"add_circle"),d()(),h(5,"button",32)(6,"mat-icon"),_(7,"tune"),d()(),h(8,"mat-menu",null,2)(10,"div",33)(11,"mat-form-field",34)(12,"input",35),L("input",function(r){T(t);let o=g();return x(o.doFilterColumns(r))})("click",function(r){return T(t),x(r.stopPropagation())}),d(),h(13,"mat-icon",36),_(14,"search"),d()()(),h(15,"div",37),pt(16,dl,5,2,"button",38,fl),d()(),h(18,"button",39),L("click",function(){T(t);let r=g();return x(r.isSearch=!r.isSearch)}),h(19,"mat-icon"),_(20,"search"),d()(),h(21,"button",40),L("click",function(){T(t);let r=g();return x(r.ExportExcel(r.Listquanlyqrcode(),"Quanlyqrcode"))}),h(22,"mat-icon"),_(23,"file_download"),d()(),h(24,"button",41),L("click",function(){T(t);let r=Y(28);return x(r.click())}),h(25,"mat-icon"),_(26,"file_upload"),d()(),h(27,"input",42,5),L("change",function(r){T(t);let o=g();return x(o.ImporExcel(r))}),d(),h(29,"button",43),L("click",function(){T(t);let r=g();return x(r.LoadDrive())}),h(30,"mat-icon"),_(31,"cloud_download"),d()(),h(32,"span",44),_(33),d(),H(34,pl,3,0,"button",45)(35,ml,3,0,"button",46),d()()}if(i&2){let t=Y(9),n=g();w(5),k("matMenuTriggerFor",t),w(11),mt(n.FilterColumns),w(17),N(" ",n.Listquanlyqrcode().length," Kh\xE1ch M\u1EDDi "),w(),k("ngIf",n.EditList.length>0),w(),k("ngIf",n.EditList.length>0)}}function _l(i,e){if(i&1){let t=Q();h(0,"div",50)(1,"mat-form-field",51)(2,"mat-label"),_(3,"T\xECm Ki\u1EBFm"),d(),h(4,"input",52),L("keyup",function(r){T(t);let o=g();return x(o.applyFilter(r))}),d()(),h(5,"button",53),L("click",function(){T(t);let r=g();return x(r.isSearch=!r.isSearch)}),h(6,"mat-icon"),_(7,"cancel"),d()()()}}function yl(i,e){i&1&&(h(0,"span",73),_(1,"check"),d())}function wl(i,e){if(i&1&&(h(0,"span"),_(1),ge(2,"date"),d()),i&2){let t=g().$implicit,n=g(2).$implicit;w(),W(_e(2,1,t[n],"dd/MM/yyyy"))}}function Cl(i,e){if(i&1&&(h(0,"span"),_(1),ge(2,"date"),d()),i&2){let t=g().$implicit,n=g(2).$implicit;w(),W(_e(2,1,t[n],"dd/MM/yyyy"))}}function El(i,e){if(i&1&&(h(0,"span"),_(1),d()),i&2){let t=g().$implicit,n=g(2).$implicit;w(),N("",t[n],"%")}}function bl(i,e){if(i&1&&(h(0,"span"),_(1),d()),i&2){let t=g().$implicit,n=g(2).$implicit;w(),N(" ",t[n]||"Tr\u1ED1ng","")}}function Tl(i,e){if(i&1){let t=Q();h(0,"div",71),L("click",function(){let r=T(t).$implicit,o=g(2).$implicit,s=g();return x(s.ChosenItem(r,o))}),H(1,yl,2,0,"span",72)(2,wl,3,4,"span")(3,Cl,3,4,"span")(4,El,2,1,"span")(5,bl,2,1,"span"),d()}if(i&2){let t,n=e.$implicit,r=g(2).$implicit,o=g();w(),k("ngIf",o.CheckItem(n)),w(),je((t=r)==="createdAt"?2:t==="updatedAt"?3:t==="haohut"?4:5)}}function xl(i,e){if(i&1){let t=Q();h(0,"th",56)(1,"span",57),_(2),d(),h(3,"span",58,6),_(5," filter_alt "),d(),h(6,"mat-menu",null,2)(8,"div",59),L("click",function(r){return T(t),x(r.stopPropagation())}),h(9,"div",60)(10,"input",61),L("keyup",function(r){T(t);let o=g().$implicit,s=g();return x(s.doFilterHederColumn(r,o))}),d(),h(11,"div",62)(12,"span",63),_(13,"search"),d()()(),h(14,"div",64)(15,"div",65)(16,"span",66),L("click",function(){T(t);let r=g().$implicit,o=g();return x(o.ChosenAll(o.FilterHederColumn(o.dataSource.filteredData,r)))}),_(17),d(),h(18,"span",66),L("click",function(){T(t);let r=g(2);return x(r.EmptyFiter())}),_(19,"Xo\xE1"),d()(),h(20,"span",66),L("click",function(){T(t);let r=g(2);return x(r.ResetFilter())}),_(21,"Reset"),d()(),h(22,"div",67),H(23,Tl,6,2,"div",68),d(),h(24,"div",69)(25,"button",70),L("click",function(){T(t);let r=Y(4);return x(r.closeMenu())}),_(26,"\u0110\xF3ng"),d(),h(27,"button",26),L("click",function(){T(t);let r=Y(4),o=g(2);return x(o.ApplyFilterColum(r))}),_(28,"\xC1p D\u1EE5ng"),d()()()()()}if(i&2){let t=Y(7),n=g().$implicit,r=g();w(2),N(" ",r.ColumnName[n]," "),w(),k("matMenuTriggerFor",t),w(14),N("Ch\u1ECDn T\u1EA5t C\u1EA3 ",r.FilterHederColumn(r.dataSource.filteredData,n).length||0,""),w(6),k("ngForOf",r.FilterHederColumn(r.dataSource.filteredData,n))("ngForTrackBy",r.trackByFn)}}function Sl(i,e){if(i&1){let t=Q();h(0,"span",78),L("click",function(){T(t);let r=g().$implicit,o=g(2);return x(o.goToDetail(r))}),_(1),d()}if(i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",t[n]," ")}}function Ll(i,e){i&1&&(h(0,"span",73),_(1,"mark_email_read"),d())}function ql(i,e){if(i&1&&(h(0,"span",76),H(1,Ll,2,0,"span",72),h(2,"span"),_(3),d()()),i&2){let t=g().$implicit,n=g().$implicit;w(),k("ngIf",t.isSentEmail),w(2),W(t[n])}}function Il(i,e){if(i&1){let t=Q();h(0,"span")(1,"qrcode",79),L("click",function(r){T(t);let o=g().$implicit,s=g(2);return x(s.downloadQRCode(o,r))}),d()()}if(i&2){let t=g().$implicit;w(),k("qrdata",t.qrcode)("width",100)("errorCorrectionLevel","M")}}function kl(i,e){if(i&1&&(h(0,"span",77),_(1),ge(2,"date"),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",_e(2,1,t[n],"dd/MM/yyyy")," ")}}function vl(i,e){if(i&1&&(h(0,"span",77),_(1),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",t[n],"% ")}}function Al(i,e){i&1&&(h(0,"mat-icon",80),_(1,"check_circle"),d())}function Bl(i,e){i&1&&(h(0,"mat-icon",81),_(1,"cancel"),d())}function Ml(i,e){if(i&1&&(h(0,"span",77),H(1,Al,2,0,"mat-icon",80)(2,Bl,2,0,"mat-icon",81),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),je(t[n]?1:2)}}function Rl(i,e){if(i&1&&(h(0,"span",77),_(1),ge(2,"date"),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",_e(2,1,t[n],"dd/MM/yyyy")," ")}}function Pl(i,e){if(i&1&&(h(0,"span",77),_(1),ge(2,"date"),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",_e(2,1,t[n],"dd/MM/yyyy")," ")}}function Dl(i,e){if(i&1&&(h(0,"span",77),_(1),d()),i&2){let t=g().$implicit,n=g().$implicit;w(),N(" ",t[n]," ")}}function Fl(i,e){if(i&1&&(h(0,"td",74),H(1,Sl,2,1,"span",75)(2,ql,4,2,"span",76)(3,Il,2,3,"span")(4,kl,3,4,"span",77)(5,vl,2,1,"span",77)(6,Ml,3,1,"span",77)(7,Rl,3,4,"span",77)(8,Pl,3,4,"span",77)(9,Dl,2,1,"span",77),d()),i&2){let t,n=g().$implicit;w(),je((t=n)==="qrcode"?1:t==="email"?2:t==="STT"?3:t==="createdAt"?4:t==="haohut"?5:t==="isActive"?6:t==="updatedAt"?7:t==="checkedAt"?8:9)}}function Nl(i,e){if(i&1&&(yi(0,14),H(1,xl,29,5,"th",54)(2,Fl,10,1,"td",55),wi()),i&2){let t=e.$implicit;k("matColumnDef",t)}}function Ol(i,e){i&1&&ke(0,"tr",82)}function Ql(i,e){if(i&1){let t=Q();h(0,"tr",83),L("click",function(){let r=T(t).$implicit,o=g();return x(o.AddToEdit(r))}),d()}if(i&2){let t=e.$implicit,n=g();gi("hover:bg-slate-100 ",n.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function Ul(i,e){i&1&&(h(0,"tr",84)(1,"td",85),_(2,"Kh\xF4ng t\xECm th\u1EA5y"),d()())}function Vl(i,e){i&1&&(h(0,"mat-dialog-content")(1,"div",86)(2,"div",87),_(3,"X\xE1c Nh\u1EADn"),d(),h(4,"div"),_(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),d(),h(6,"div",88)(7,"button",89),_(8,"\u0110\u1ED3ng \xDD"),d(),h(9,"button",90),_(10,"Hu\u1EF7 B\u1ECF"),d()()()())}function Hl(i,e){i&1&&(h(0,"mat-dialog-content")(1,"div",86)(2,"div",87),_(3,"X\xE1c Nh\u1EADn"),d(),h(4,"div"),_(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n g\u1EEDi email \u0111\u1EBFn kh\xE1ch m\u1EDDi \u0111\xE3 ch\u1ECDn kh\xF4ng?"),d(),h(6,"div",88)(7,"button",89),_(8,"\u0110\u1ED3ng \xDD"),d(),h(9,"button",90),_(10,"Hu\u1EF7 B\u1ECF"),d()()()())}var qe=class qe{displayedColumns=["STT","qrcode","code","name","phone","email","checkedAt","createdAt"];ColumnName={STT:"STT",qrcode:"M\xE3 QR",code:"M\xE3 X\xE1c Nh\u1EADn",name:"H\u1ECD T\xEAn",phone:"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",email:"Email",checkedAt:"Checkin",createdAt:"Ng\xE0y T\u1EA1o"};FilterColumns=JSON.parse(localStorage.getItem("QuanlyqrcodeColFilter")||"[]");Columns=[];totalItems=0;pageSize=10;currentPage=1;totalPages=1;paginator;sort;drawer;filterValues={};_QuanlyqrcodeService=oe(Ke);_breakpointObserver=oe(Bi);_GoogleSheetService=oe(Bn);_router=oe(Ge);_dialog=oe(tn);Listquanlyqrcode=this._QuanlyqrcodeService.ListQuanlyqrcode;EditList=[];dataSource=new _t([]);quanlyqrcodeId=this._QuanlyqrcodeService.quanlyqrcodeId;_snackBar=oe(Fi);CountItem=0;isSearch=!1;constructor(){this.displayedColumns.forEach(e=>{this.filterValues[e]=""}),Si(()=>{this.dataSource.data=this.Listquanlyqrcode(),this.totalItems=this.Listquanlyqrcode().length,this.calculateTotalPages()})}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnInit(){return B(this,null,function*(){this.updateDisplayData(),this._QuanlyqrcodeService.listenQuanlyqrcodeUpdates(),yield this._QuanlyqrcodeService.getAllQuanlyqrcode(),this.dataSource=new _t(this.Listquanlyqrcode()),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer()})}downloadQRCode(e,t){Go.toDataURL(e.qrcode,{width:300,errorCorrectionLevel:"M"},(n,r)=>{if(n){console.error("L\u1ED7i khi t\u1EA1o m\xE3 QR:",n);return}let o=document.createElement("a");o.href=r,o.download=`${e.name}_qrcode.png`,o.click()})}refresh(){return B(this,null,function*(){yield this._QuanlyqrcodeService.getAllQuanlyqrcode()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("QuanlyqrcodeColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDrawer(){this._breakpointObserver.observe([Mi.Handset]).subscribe(e=>{e.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(n=>n.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(e,t){return e.filter((r,o,s)=>o===s.findIndex(a=>a[t]===r[t]))}doFilterHederColumn(e,t){this.dataSource.filteredData=this.Listquanlyqrcode().filter(r=>r[t].toLowerCase().includes(e.target.value.toLowerCase()));let n=e.target.value.toLowerCase()}ListFilter=[];ChosenItem(e,t){let n=this.dataSource.filteredData.filter(o=>o[t]===e[t]);this.ListFilter.filter(o=>o[t]===e[t]).length>0?this.ListFilter=this.ListFilter.filter(o=>o[t]!==e[t]):this.ListFilter=[...this.ListFilter,...n]}ChosenAll(e){e.forEach(t=>{!!this.ListFilter.find(r=>r.id===t.id)?this.ListFilter=this.ListFilter.filter(r=>r.id!==r.id):this.ListFilter.push(t)})}ResetFilter(){this.ListFilter=this.Listquanlyqrcode(),this.dataSource.data=this.Listquanlyqrcode(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(e){return!!this.ListFilter.find(t=>t.id===e.id)}ApplyFilterColum(e){this.dataSource.data=this.Listquanlyqrcode().filter(t=>this.ListFilter.some(n=>n.id===t.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,e.closeMenu()}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),localStorage.setItem("QuanlyqrcodeColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(n=>n.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/quanlyqrcode","new"])}openDeleteDialog(e){this._dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(n=>{n=="true"&&this.DeleteListItem()})}DeleteListItem(){this.EditList.forEach(e=>{this._QuanlyqrcodeService.DeleteQuanlyqrcode(e)}),this.EditList=[],this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}openSentEmailDialog(e){this._dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(n=>{n=="true"&&this.DeleteListItem()})}SentEmailListItem(){this.EditList.forEach(e=>{e.isSentEmail=!0,this._QuanlyqrcodeService.updateQuanlyqrcode(e)}),this.EditList=[],this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}AddToEdit(e){this.EditList.find(n=>n.id===e.id)?this.EditList=this.EditList.filter(n=>n.id!==e.id):this.EditList.push(e)}CheckItemInEdit(e){return this.EditList.some(t=>t.id===e.id)}goToDetail(e){this.drawer.open(),this._QuanlyqrcodeService.setQuanlyqrcodeId(e.id),this._router.navigate(["admin/quanlyqrcode",e.id])}LoadDrive(){return B(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"SPImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._GoogleSheetService.getDrive(e),n=dn(t.values);this.DoImportData(n)})}DoImportData(e){return B(this,null,function*(){let t=e.map(a=>({title:a.title?.trim()||"",masp:a.masp?.trim()||"",giagoc:Number(a.giagoc)||0,dvt:a.dvt?.trim()||"",soluong:Number(a.soluong)||0,soluongkho:Number(a.soluongkho)||0,haohut:Number(a.haohut)||0,ghichu:a.ghichu?.trim()||""})),n=Array.from(new Map(t.map(a=>[a.masp,a])).values()),r=this._QuanlyqrcodeService.ListQuanlyqrcode(),o=r.map(a=>a.masp),s=n.map(a=>a.masp).filter(a=>!o.includes(a));yield Promise.all(n.map(a=>B(this,null,function*(){let l=r.find(c=>c.masp===a.masp);if(l){let c=Ve(Ve({},l),a);yield this._QuanlyqrcodeService.updateQuanlyqrcode(c)}else yield this._QuanlyqrcodeService.CreateQuanlyqrcode(a)}))),yield Promise.all(r.filter(a=>!n.some(l=>l.masp===a.masp)).map(a=>this._QuanlyqrcodeService.updateQuanlyqrcode(ci(Ve({},a),{isActive:!1})))),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ImporExcel(e){return B(this,null,function*(){let t=yield Rn(e);this.DoImportData(t)})}ExportExcel(e,t){let n=e.map(r=>({title:r.title,masp:r.masp,giagoc:r.giagoc,dvt:r.dvt,soluong:r.soluong,soluongkho:r.soluongkho,haohut:r.haohut,ghichu:r.ghichu}));Mn(n,t)}trackByFn(e,t){return t.id}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e,t){e>this.Listquanlyqrcode().length?(this.pageSize=this.Listquanlyqrcode().length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.Listquanlyqrcode().length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=e,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),t.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize,n=this.Listquanlyqrcode().slice(e,t);this.dataSource.data=n}static \u0275fac=function(t){return new(t||qe)};static \u0275cmp=Ye({type:qe,selectors:[["app-listquanlyqrcode"]],viewQuery:function(t,n){if(t&1&&(de(gn,5),de($e,5),de(ul,7)),t&2){let r;pe(r=me())&&(n.paginator=r.first),pe(r=me())&&(n.sort=r.first),pe(r=me())&&(n.drawer=r.first)}},decls:48,vars:19,consts:[["drawer",""],["menuHienthi","matMenuTrigger"],["menu","matMenu"],["DeleteDialog",""],["SentEmailDialog",""],["uploadfile",""],["menuTrigger","matMenuTrigger"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-2"],["class","border p-1 cursor-pointer w-full relative flex lg:flex-row lg:space-y-2 space-y-0 flex-col space-x-2 justify-between items-center bg-white rounded-lg",4,"ngIf"],["class","border p-1 py-2 w-full flex flex-row space-x-2 items-center",4,"ngIf"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"border","p-1","cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","color","primary","mat-icon-button","",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","T\xECm Ki\u1EBFm","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click",4,"ngIf"],["matTooltip","G\u1EEDi Email","color","primary","mat-icon-button","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["matTooltip","Xo\xE1","color","warn","mat-icon-button","",3,"click"],["matTooltip","G\u1EEDi Email","color","primary","mat-icon-button","",3,"click"],[1,"border","p-1","py-2","w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"lg:w-auto","w-full"],["matInput","","placeholder","Vui l\xF2ng T\xECm Ki\u1EBFm",3,"keyup"],["mat-icon-button","","color","warn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[1,"z-10","material-symbols-outlined","text-gray-500",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["mat-cell",""],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","flex","flex-row","space-x-2","items-center"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[3,"click","qrdata","width","errorCorrectionLevel"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"]],template:function(t,n){if(t&1){let r=Q();h(0,"mat-drawer-container",7)(1,"mat-drawer",8,0),ke(3,"router-outlet"),d(),h(4,"div",9),H(5,gl,36,4,"div",10)(6,_l,8,0,"div",11),h(7,"div",12)(8,"table",13),pt(9,Nl,3,1,"ng-container",14,_i),H(11,Ol,1,0,"tr",15)(12,Ql,1,3,"tr",16)(13,Ul,3,0,"tr",17),d()(),h(14,"div",18)(15,"div",19)(16,"span",20),_(17,"\u0110ang Xem "),h(18,"strong"),_(19),d(),_(20," - "),h(21,"strong"),_(22),d(),_(23),d(),h(24,"div",21)(25,"span",22,1),_(27),d(),h(28,"mat-menu",null,2)(30,"div",23),L("click",function(s){return T(r),x(s.stopPropagation())}),h(31,"span"),_(32,"S\u1ED1 L\u01B0\u1EE3ng"),d(),h(33,"mat-form-field",24)(34,"input",25),Ti("ngModelChange",function(s){return T(r),bi(n.pageSize,s)||(n.pageSize=s),x(s)}),d()(),h(35,"button",26),L("click",function(){T(r);let s=Y(26);return x(n.onPageSizeChange(n.pageSize,s))}),_(36,"\xC1p D\u1EE5ng"),d()()(),h(37,"div",27)(38,"button",28),L("click",function(){return T(r),x(n.onPreviousPage())}),h(39,"mat-icon"),_(40,"keyboard_arrow_left"),d()(),h(41,"button",28),L("click",function(){return T(r),x(n.onNextPage())}),h(42,"mat-icon"),_(43,"keyboard_arrow_right"),d()()()()()()()(),H(44,Vl,11,0,"ng-template",null,3,gt)(46,Hl,11,0,"ng-template",null,4,gt)}if(t&2){let r=Y(29);w(),k("position","end"),w(4),k("ngIf",!n.isSearch),w(),k("ngIf",n.isSearch),w(2),k("dataSource",n.dataSource),w(),mt(n.displayedColumns),w(2),k("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),w(),k("matRowDefColumns",n.displayedColumns),w(7),W((n.currentPage-1)*n.pageSize+1),w(3),W(n.currentPage*n.pageSize>n.totalItems?n.totalItems:n.currentPage*n.pageSize),w(),Ci(" trong s\u1ED1 ",n.totalItems," m\u1EE5c, ",n.currentPage,"/",n.totalPages," Trang"),w(2),k("matMenuTriggerFor",r),w(2),N("Hi\u1EC7n Th\u1ECB : ",n.pageSize," m\u1EE5c"),w(7),Ei("ngModel",n.pageSize),k("ngModelOptions",xi(18,hl)),w(4),k("disabled",n.currentPage===1),w(3),k("disabled",n.currentPage===n.totalPages)}},dependencies:[cn,ln,sn,an,hn,un,An,Cn,bn,Ln,Tn,En,qn,xn,Sn,In,kn,vn,wn,$e,yn,_n,Wi,$i,Gi,Ki,ji,zi,Yi,Ai,Hi,Vi,Di,Ri,Pi,fn,ki,Li,qi,Ii,en,Ji,Zi,Xi,mn,pn,on,nn,rn,Yo],encapsulation:2,changeDetection:0})};ft([zl()],qe.prototype,"FilterHederColumn",1),ft([Yl(300)],qe.prototype,"doFilterHederColumn",1);var jo=qe;function zl(){return function(i,e,t){let n=t.value,r=new Map;return t.value=function(...o){let s=JSON.stringify(o);if(r.has(s))return r.get(s);let a=n.apply(this,o);return r.set(s,a),a},t}}function Yl(i=300){return function(e,t,n){let r=n.value,o;return n.value=function(...s){clearTimeout(o),o=setTimeout(()=>{r.apply(this,s)},i)},n}}export{Ke as a,jo as b};
