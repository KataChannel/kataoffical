import './polyfills.server.mjs';
import{a as l}from"./chunk-MGIVCIKU.mjs";import{ja as g}from"./chunk-J2JCPQ23.mjs";import{a as e,g as y}from"./chunk-RIAI3ORJ.mjs";var o=y(l());var u=class i{toUTC(n,t){if(!n)return"";if(t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u{1F504} Frontend converting ${t}: ${n} to UTC`),typeof n=="string"&&n.match(/^\d{4}-\d{2}-\d{2}$/)){let c=(0,o.default)(n,"YYYY-MM-DD").startOf("day").utc().toISOString();return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u2705 Frontend converted ${t}: ${n} (local) -> ${c} (UTC)`),c}if(typeof n=="string"&&n.match(/^\d{2}\/\d{2}\/\d{4}$/)){let c=(0,o.default)(n,"DD/MM/YYYY").startOf("day").utc().toISOString();return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u2705 Frontend converted ${t}: ${n} (DD/MM/YYYY) -> ${c} (UTC)`),c}if(n instanceof Date){let c=(0,o.default)(n).startOf("day").utc().toISOString();return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u2705 Frontend converted ${t}: ${n} (Date object) -> ${c} (UTC)`),c}let r=(0,o.default)(n);if(!r.isValid())return console.error(`Invalid date provided: ${n}`),(0,o.default)().utc().toISOString();let a=r.startOf("day").utc().toISOString();return t&&["ngaygiao","ngaynhan"].includes(t)&&console.log(`\u2705 Frontend converted ${t}: ${n} -> ${a} (UTC)`),a}fromUTC(n,t="YYYY-MM-DD"){return n?o.default.utc(n).local().format(t):""}nowUTC(){return(0,o.default)().utc().toISOString()}nowLocal(n="YYYY-MM-DD"){return(0,o.default)().format(n)}isAfter(n,t){return o.default.utc(n).isAfter(o.default.utc(t))}isBefore(n,t){return o.default.utc(n).isBefore(o.default.utc(t))}isSameDay(n,t){return o.default.utc(n).format("YYYY-MM-DD")===o.default.utc(t).format("YYYY-MM-DD")}addDays(n,t,r="YYYY-MM-DD"){return o.default.utc(n).add(t,"days").format(r)}diffInDays(n,t){return o.default.utc(t).diff(o.default.utc(n),"days")}isValidDate(n,t="YYYY-MM-DD"){return(0,o.default)(n,t,!0).isValid()}formDateToUTC(n){return n?n instanceof Date?(0,o.default)(n).utc().toISOString():typeof n=="string"?this.toUTC(n):(0,o.default)(n).utc().toISOString():""}utcToFormDate(n,t=!1){return n?t?o.default.utc(n).local().toDate():o.default.utc(n).local().format("YYYY-MM-DD"):null}formatForDisplay(n,t="DD/MM/YYYY"){return n?o.default.utc(n).local().format(t):""}parseUserInputToUTC(n,t="YYYY-MM-DD"){if(!n)return"";let r=(0,o.default)(n,t);if(!r.isValid())throw new Error(`Invalid date format: ${n}`);return r.utc().toISOString()}getUTCDateRange(n,t){let r="",a="";return n&&(r=(0,o.default)(n).startOf("day").utc().toISOString()),t&&(a=(0,o.default)(t).endOf("day").utc().toISOString()),{startUTC:r,endUTC:a}}getAPIDateRange(n,t){let r=this.getUTCDateRange(n,t);return{Batdau:r.startUTC,Ketthuc:r.endUTC}}synchronizeObjectDates(n,t=["ngaygiao","ngaynhan"]){if(!n||typeof n!="object")return n;let r=e({},n);return t.forEach(a=>{if(r[a]!==void 0&&r[a]!==null){console.log(`\u{1F504} Frontend synchronizing ${a}: ${r[a]}`);try{r[a]=this.toUTC(r[a],a),console.log(`\u2705 Frontend synchronized ${a}: ${r[a]}`)}catch(s){throw console.error(`\u274C Error synchronizing ${a}:`,s),new Error(`Failed to synchronize ${a}: ${s instanceof Error?s.message:String(s)}`)}}}),r}formatForDisplayEnhanced(n,t="DD/MM/YYYY",r){if(!n)return"";try{let a=o.default.utc(n).local().format(t);return r&&["ngaygiao","ngaynhan"].includes(r)&&console.log(`\u{1F4C5} Frontend displaying ${r}: ${n} \u2192 ${a}`),a}catch(a){return console.error("Error formatting date for display:",a),""}}validateDateSync(n,t,r){if(!n||!t)return!1;try{let a=this.toUTC(n),s=o.default.utc(t).toISOString(),c=a===s;return r&&["ngaygiao","ngaynhan"].includes(r)&&console.log(`\u{1F50D} Date sync validation for ${r}:`,{client:a,server:s,match:c}),c}catch(a){return console.error("Error validating date sync:",a),!1}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
