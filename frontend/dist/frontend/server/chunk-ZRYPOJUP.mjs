import './polyfills.server.mjs';
import{a as nt}from"./chunk-NT6OKF5L.mjs";import{a as tt}from"./chunk-WV27QTOC.mjs";import"./chunk-UVCOV5DY.mjs";import{a as Ze}from"./chunk-DJ3VKTGM.mjs";import{a as et}from"./chunk-K4U3SMOU.mjs";import{a as Xe}from"./chunk-2TGJZVIA.mjs";import{a as We,b as Je}from"./chunk-26FBNDBC.mjs";import"./chunk-HRADRX7C.mjs";import{a as Qe}from"./chunk-7WM5VB6L.mjs";import{c as A,d as Le,e as H,f as Be,g as Ne,h as Ae,i as He,j as Re,k as Pe,l as $e,m as Ge,n as ze,o as Ke,p as Oe,q as Ue,r as je,s as qe,t as Ye}from"./chunk-RX2MPFDS.mjs";import{h as Se}from"./chunk-JSTF6NAU.mjs";import"./chunk-7BHYQM75.mjs";import{a as Ie}from"./chunk-26NM6QMQ.mjs";import"./chunk-WGU5DJGY.mjs";import{a as ke,b as Me}from"./chunk-KSPZGT74.mjs";import{b as Fe,e as ee}from"./chunk-SWDJOT3A.mjs";import"./chunk-73IBRO6I.mjs";import{k as Ve}from"./chunk-SGH4QNUI.mjs";import{a as rt}from"./chunk-MGIVCIKU.mjs";import{b as De,c as xe,d as Ce}from"./chunk-LFFKQBOL.mjs";import{a as J,b as fe}from"./chunk-SN5D3QGT.mjs";import{g as X,j as Z,n as be,p as ye,u as we,v as ve,x as Ee,y as Te}from"./chunk-ZY25VIV4.mjs";import"./chunk-LFMAYWBS.mjs";import"./chunk-7ZQLLCLM.mjs";import{a as he}from"./chunk-UKY3QYGU.mjs";import"./chunk-G7SNWIX5.mjs";import{a as Q,c as W,e as ge}from"./chunk-RJ4EPAWB.mjs";import"./chunk-X6RZODQE.mjs";import{ha as pe}from"./chunk-G2Y3YIGV.mjs";import"./chunk-7T6LZHUD.mjs";import{a as me,d as ue}from"./chunk-VMIQABYG.mjs";import"./chunk-QK6LQCPD.mjs";import{n as _e,o as q,u as Y,v as de}from"./chunk-OMNNIR3J.mjs";import{Ac as $,Bc as G,Cc as z,Gb as ie,Gc as N,Hc as c,Ic as D,Jc as x,Mc as K,Nb as S,Nc as O,Oc as U,Qc as j,Ra as P,Vc as w,Wb as ae,Xb as oe,Xc as v,Zb as p,bc as re,cc as le,ec as se,fc as I,gc as V,hc as o,ic as l,jc as T,kc as L,lc as B,nc as C,oa as y,ob as ne,sc as f,tb as _,td as ce,uc as s,xa as g,ya as h}from"./chunk-TSF6OWWP.mjs";import"./chunk-KB5IWD3E.mjs";import{a as R,g as ot,j as E}from"./chunk-RIAI3ORJ.mjs";var te=ot(rt());var lt=()=>[we,ye,Ee,X,Z,J,Q,W,ke,pe,_e,q,Y,De,xe,Ae,Re,ze,Pe,He,Ke,$e,Ge,Oe,Ue,je,H,Be,A],st=()=>({standalone:!0}),ct=()=>[5,10,25,100],at=(r,t)=>t.id;function _t(r,t){if(r&1){let e=C();o(0,"button",7),f("click",function(){g(e);let i=s();return h(i.GiaoDonhang())}),c(1," \u0110\xE3 Giao"),l()}if(r&2){let e=s();p("disabled",e.DetailDathang().status=="dagiao")}}function dt(r,t){if(r&1){let e=C();o(0,"button",3),f("click",function(){g(e);let i=s();return h(i.handleDathangAction())}),o(1,"mat-icon"),c(2,"save"),l()()}}function mt(r,t){if(r&1){let e=C();o(0,"button",3),f("click",function(){g(e);let i=s();return h(i.toggleEdit())}),o(1,"mat-icon"),c(2,"edit"),l()()}}function ut(r,t){if(r&1){let e=C();L(0),o(1,"div",13)(2,"div",14),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),l(),o(4,"div",15)(5,"button",16),f("click",function(){g(e);let i=s();return h(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),l(),o(7,"button",17),f("click",function(){g(e);let i=s();return h(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),l()()(),B()}}function pt(r,t){if(r&1&&T(0,"div",25),r&2){let e=s(2);p("innerHTML",e.DetailDathang().nhacungcap.ghichu,ne)}}function gt(r,t){r&1&&T(0,"div",26)}function ht(r,t){if(r&1&&(o(0,"mat-option",36),c(1),l()),r&2){let e=t.$implicit;p("value",e.id),_(),D(e.name)}}function ft(r,t){r&1&&(o(0,"span",60),c(1,"check"),l())}function Dt(r,t){if(r&1){let e=C();o(0,"div",58),f("click",function(){let i=g(e).$implicit,a=s(4);return h(a.ChosenItem(i))}),S(1,ft,2,0,"span",59),c(2),l()}if(r&2){let e=t.$implicit,n=s(4);_(),p("ngIf",n.CheckItem(e)),_(),x(" ",e.title," ")}}function xt(r,t){if(r&1&&(o(0,"th",63)(1,"span",64),c(2),l()()),r&2){let e=s().$implicit,n=s(4);_(2),x(" ",n.ColumnName[e]," ")}}function Ct(r,t){if(r&1){let e=C();o(0,"span",66)(1,"span"),c(2),l(),o(3,"button",10),f("click",function(){g(e);let i=s().$implicit,a=s(5);return h(a.RemoveSanpham(i))}),o(4,"mat-icon"),c(5,"delete"),l()()()}if(r&2){let e=s().index;_(2),x("",e+1," ")}}function bt(r,t){if(r&1){let e=C();o(0,"div",67)(1,"div",72),f("blur",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.UpdateBlurValue(i,d,u,"sldat","number"))})("keydown.enter",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.EnterUpdateValue(i,d,u,"sldat","number"))}),c(2),w(3,"number"),l(),o(4,"div",73),c(5),l()()}if(r&2){let e=s().$implicit,n=s().$implicit;_(),p("contentEditable",!0),_(),x(" ",v(3,3,e[n]||0,"1.0-2")," "),_(3),x("G\u1EE3i \xFD (",e.goiy,")")}}function St(r,t){if(r&1){let e=C();o(0,"div",74),f("blur",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.UpdateBlurValue(i,d,u,"slgiao","number"))})("keydown.enter",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.EnterUpdateValue(i,d,u,"slgiao","number"))}),c(1),w(2,"number"),l()}if(r&2){let e=s().$implicit,n=s().$implicit;p("contentEditable",!0),_(),x(" ",v(2,2,e[n]||0,"1.0-2")," ")}}function yt(r,t){if(r&1){let e=C();o(0,"div",75),f("blur",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.UpdateBlurValue(i,d,u,"slnhan","number"))})("keydown.enter",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.EnterUpdateValue(i,d,u,"slnhan","number"))}),c(1),w(2,"number"),l()}if(r&2){let e=s().$implicit,n=s().$implicit;p("contentEditable",!0),_(),x(" ",v(2,2,e[n]||0,"1.0-2")," ")}}function wt(r,t){if(r&1){let e=C();o(0,"div",76),f("blur",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.UpdateBlurValue(i,d,u,"ghichu","string"))})("keydown.enter",function(i){g(e);let a=s(),u=a.$implicit,d=a.index,m=s(5);return h(m.EnterUpdateValue(i,d,u,"ghichu","string"))}),c(1),l()}if(r&2){let e=s().$implicit,n=s().$implicit;p("contentEditable",!0),_(),x(" ",e[n]||""," ")}}function vt(r,t){if(r&1&&(o(0,"span",71),c(1),l()),r&2){let e=s().$implicit,n=s().$implicit;_(),x(" ",e[n]," ")}}function Et(r,t){if(r&1&&(o(0,"td",65),S(1,Ct,6,1,"span",66)(2,bt,6,6,"div",67)(3,St,3,5,"div",68)(4,yt,3,5,"div",69)(5,wt,2,2,"div",70)(6,vt,2,1,"span",71),l()),r&2){let e,n=s().$implicit;_(),le((e=n)==="STT"?1:e==="sldat"?2:e==="slgiao"?3:e==="slnhan"?4:e==="ghichu"?5:6)}}function Tt(r,t){if(r&1&&(L(0,53),S(1,xt,3,1,"th",61)(2,Et,7,1,"td",62),B()),r&2){let e=t.$implicit;p("matColumnDef",e)}}function kt(r,t){r&1&&T(0,"tr",77)}function Mt(r,t){r&1&&T(0,"tr",78)}function Ft(r,t){r&1&&(o(0,"tr",79)(1,"td",80),c(2,"Kh\xF4ng t\xECm th\u1EA5y"),l()())}function It(r,t){if(r&1){let e=C();o(0,"div",28)(1,"div",29)(2,"mat-form-field",30)(3,"mat-label"),c(4,"Nh\xE0 Cung C\u1EA5p"),l(),o(5,"mat-select",31),U("ngModelChange",function(i){g(e);let a=s(3);return O(a.DetailDathang().nhacungcapId,i)||(a.DetailDathang().nhacungcapId=i),h(i)}),f("selectionChange",function(i){g(e);let a=s(3);return h(a.SelectNhacungcap(i))}),o(6,"div",32)(7,"mat-form-field",33)(8,"input",34),f("input",function(i){g(e);let a=s(3);return h(a.DoFindNhacungcap(i))}),l()(),o(9,"div",35),I(10,ht,2,2,"mat-option",36,at),l()()()(),o(12,"mat-form-field",30)(13,"mat-label"),c(14,"T\xECm Ki\u1EBFm"),l(),o(15,"input",37),f("keyup",function(i){g(e);let a=s(3);return h(a.applyFilter(i))}),l()(),o(16,"button",38,0),c(18),l(),o(19,"mat-menu",null,1)(21,"div",39),f("click",function(i){return g(e),h(i.stopPropagation())}),o(22,"div",40)(23,"input",41),f("keyup",function(i){g(e);let a=s(3);return h(a.doFilterSanpham(i))}),l(),o(24,"div",42)(25,"span",43),c(26,"search"),l()()(),o(27,"div",44)(28,"div",5)(29,"span",45),f("click",function(){g(e);let i=s(3);return h(i.ChosenAll(i.filterSanpham))}),c(30),l(),o(31,"span",45),f("click",function(){g(e);let i=s(3);return h(i.EmptyFiter())}),c(32,"Xo\xE1"),l()(),o(33,"span",45),f("click",function(){g(e);let i=s(3);return h(i.ResetFilter())}),c(34,"Reset"),l()(),o(35,"div",46),S(36,Dt,3,2,"div",47),l(),o(37,"div",48)(38,"button",17),f("click",function(){g(e);let i=N(17);return h(i.closeMenu())}),c(39,"\u0110\xF3ng"),l(),o(40,"button",16),f("click",function(){g(e);let i=N(17),a=s(3);return h(a.ApplyFilterColum(i))}),c(41,"\xC1p D\u1EE5ng"),l()()()(),o(42,"button",49),f("click",function(){g(e);let i=s(3);return h(i.LoadDrive())}),o(43,"mat-icon"),c(44,"cloud_download"),l()(),o(45,"button",50),f("click",function(){g(e);let i=s(3);return h(i.EmptyCart())}),o(46,"mat-icon"),c(47,"delete"),l()()()(),o(48,"div",51)(49,"table",52),I(50,Tt,3,1,"ng-container",53,se),S(52,kt,1,0,"tr",54)(53,Mt,1,0,"tr",55)(54,Ft,3,0,"tr",56),l(),T(55,"mat-paginator",57),l()}if(r&2){let e=N(20),n=s(3);_(5),K("ngModel",n.DetailDathang().nhacungcapId),p("ngModelOptions",j(15,st)),_(5),V(n.filterNhacungcap),_(6),p("disabled",!n.isEdit())("matMenuTriggerFor",e),_(2),x(" ",n.ListFilter.length," S\u1EA3n Ph\u1EA9m "),_(12),x("Ch\u1ECDn T\u1EA5t C\u1EA3 ",n.ListFilter.length,""),_(6),p("ngForOf",n.filterSanpham)("ngForTrackBy",n.trackByFn),_(6),p("disabled",!n.isEdit()),_(3),p("disabled",!n.isEdit()),_(4),p("dataSource",n.dataSource),_(),V(n.displayedColumns),_(2),p("matHeaderRowDef",n.displayedColumns),_(),p("matRowDefColumns",n.displayedColumns),_(2),p("pageSizeOptions",j(16,ct))("pageSize",n.dataSource.data.length)}}function Vt(r,t){r&1&&(o(0,"div",27),S(1,It,56,17),ae(2,1,lt),oe(),l())}function Lt(r,t){if(r&1&&(o(0,"tr",82)(1,"td",88),c(2),l(),o(3,"td",83),c(4),l(),o(5,"td",88),c(6),l(),o(7,"td",89),c(8),w(9,"number"),l(),o(10,"td",89),c(11),w(12,"number"),l(),o(13,"td",89),c(14),w(15,"number"),l(),o(16,"td",83),c(17),l()()),r&2){let e=t.$implicit,n=t.$index;_(2),D(n+1),_(2),D(e.title),_(2),D(e.dvt),_(2),D(v(9,7,e.sldat,"1.0-2")),_(3),D(v(12,10,e.slgiao,"1.0-2")),_(3),D(v(15,13,e.slnhan||0,"1.0-2")),_(3),D(e.ghichu)}}function Bt(r,t){if(r&1&&(o(0,"table",81)(1,"thead")(2,"tr",82)(3,"th",83),c(4,"STT"),l(),o(5,"th",83),c(6,"T\xEAn s\u1EA3n ph\u1EA9m"),l(),o(7,"th",83),c(8,"\u0110VT"),l(),o(9,"th",84),c(10,"SL \u0110\u1EB7t"),l(),o(11,"th",84),c(12,"SL Giao"),l(),o(13,"th",84),c(14,"SL Nh\u1EADn"),l(),o(15,"th",83),c(16,"Ghi ch\xFA"),l()()(),o(17,"tbody"),I(18,Lt,18,16,"tr",82,at),o(20,"tr",82)(21,"td",85),c(22,"T\u1ED5ng:"),l(),o(23,"td",86),c(24),w(25,"number"),l(),o(26,"td",86),c(27),w(28,"number"),l(),o(29,"td",86),c(30),w(31,"number"),l(),T(32,"td",87),l()()()),r&2){let e=s(2);_(18),V(e.DetailDathang().sanpham),_(6),D(v(25,3,e.TinhTong(e.DetailDathang().sanpham,"sldat"),"1.0-2")),_(3),D(v(28,6,e.TinhTong(e.DetailDathang().sanpham,"slgiao"),"1.0-2")),_(3),D(v(31,9,e.TinhTong(e.DetailDathang().sanpham,"slnhan"),"1.0-2"))}}function Nt(r,t){if(r&1&&(L(0),o(1,"div",18)(2,"div",19)(3,"div",20),c(4,"\u0110\u1EB7t H\xE0ng Nh\xE0 Cung C\u1EA5p"),l(),o(5,"div"),c(6),l(),S(7,pt,1,1,"div",21)(8,gt,1,0,"div",22)(9,Vt,4,0,"div",23)(10,Bt,33,12,"table",24),l()(),B()),r&2){let e,n,i,a=s();_(5),re("font-bold text-[18px] uppercase ",(e=a.DetailDathang())!=null&&e.nhacungcapId?"":"text-red-700 italic",""),_(),D(((n=a.getName((n=a.DetailDathang())==null?null:n.nhacungcapId))==null?null:n.name)||"Ch\u01B0a Ch\u1ECDn Kh\xE1ch H\xE0ng"),_(),p("ngIf",a.isEdit()&&((i=a.DetailDathang())==null||i.nhacungcap==null?null:i.nhacungcap.ghichu)),_(),p("ngIf",a.isEdit()),_(),p("ngIf",a.isEdit()),_(),p("ngIf",!a.isEdit())}}var it=class r{_ListdathangComponent=y(nt);_DathangService=y(tt);_NhacungcapService=y(Ze);_BanggiaService=y(et);_SanphamService=y(Xe);_route=y(me);_router=y(ue);_snackBar=y(he);constructor(){this._route.paramMap.subscribe(t=>E(this,null,function*(){let e=t.get("id");this._DathangService.setDathangId(e),yield this._NhacungcapService.getAllNhacungcap(),this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive),yield this._BanggiaService.getAllBanggia(),this.filterBanggia=this._BanggiaService.ListBanggia(),yield this._SanphamService.getAllSanpham(),this.filterSanpham=this._SanphamService.ListSanpham(),this.dataSource.data=this.DetailDathang().sanpham})),ce(()=>E(this,null,function*(){let t=this._DathangService.dathangId();t||(this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()),t==="0"?(this.DetailDathang.set({title:ee(8,!1),madncc:ee(8,!1),type:"dathang",ngaynhan:(0,te.default)().add(1,"days").format("YYYY-MM-DD")}),this._ListdathangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/dathang","0"])):(yield this._DathangService.getDathangByid(t),this.ListFilter=this.DetailDathang().sanpham,this._ListdathangComponent.drawer.open(),this._router.navigate(["/admin/dathang",t]))}))}DetailDathang=this._DathangService.DetailDathang;ListNhacungcap=this._NhacungcapService.ListNhacungcap;isEdit=P(!1);isDelete=P(!1);filterNhacungcap=[];filterBanggia=[];filterSanpham=[];dathangId=this._DathangService.dathangId;ngOnInit(){return E(this,null,function*(){})}handleDathangAction(){return E(this,null,function*(){this.dathangId()==="0"?yield this.createDathang():yield this.updateDathang()})}createDathang(){return E(this,null,function*(){try{this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t.ngaynhan=(0,te.default)(t.ngaygiao).format("YYYY-MM-DD"),t)),yield this._DathangService.CreateDathang(this.DetailDathang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o dathang:",t)}})}updateDathang(){return E(this,null,function*(){try{console.log(this.DetailDathang()),this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t)),yield this._DathangService.updateDathang(this.DetailDathang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt dathang:",t)}})}DeleteData(){return E(this,null,function*(){try{yield this._DathangService.DeleteDathang(this.DetailDathang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/dathang"])}catch(t){console.error("L\u1ED7i khi x\xF3a dathang:",t)}})}goBack(){this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){}DoFindNhacungcap(t){let e=t.target.value.toLowerCase();this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive&&n.name.toLowerCase().includes(e)||n.namenn.toLowerCase().includes(e)||n.sdt.toLowerCase().includes(e))}DoFindBanggia(t){let e=t.target.value.toLowerCase()}UpdateBangia(){}SelectBanggia(t){console.log(t.value)}Chonnhacungcap(t){this.DetailDathang.update(e=>(e.nhacungcapId=t.id,e))}EnterUpdateValue(t,e,n,i,a){let u=a==="number"?Number(t.target.innerText.trim())||0:t.target.innerText.trim(),d=t;if(d.key==="Enter"&&!d.shiftKey&&t.preventDefault(),a==="number"){let m=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(d.key)&&!m.includes(d.key)&&t.preventDefault()}console.log(this.DetailDathang()),this.DetailDathang.update(m=>{if(e!==null)if(console.log(e),console.log(m.sanpham[e]),i==="sldat"){m.sanpham[e].sldat=m.sanpham[e].slgiao=u;let k=document.querySelectorAll(".sldat-input");if(e<this.dataSource.filteredData.length-1){let b=k[e+1];b&&(b instanceof HTMLInputElement&&(b.focus(),b.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let M=document.createRange();M.selectNodeContents(b);let F=window.getSelection();F?.removeAllRanges(),F?.addRange(M)}},10))}}else if(i==="ghichu"){m.sanpham[e][i]=u;let k=document.querySelectorAll(".ghichu-input");if(e<this.dataSource.filteredData.length-1){let b=k[e+1];b&&(b instanceof HTMLInputElement&&(b.focus(),b.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let M=document.createRange();M.selectNodeContents(b);let F=window.getSelection();F?.removeAllRanges(),F?.addRange(M)}},10))}}else if(i==="slgiao"){let k=u;k<m.sanpham[e].sldat?(m.sanpham[e].slgiao=m.sanpham[e].sldat,this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n s\u1ED1 l\u01B0\u1EE3ng \u0111\u1EB7t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})):m.sanpham[e].slgiao=k}else m.sanpham[e][i]=u;else m[i]=u;return m})}UpdateBlurValue(t,e,n,i,a){let u=a==="number"?Number(t.target.innerText.trim())||0:t.target.innerText.trim();this.DetailDathang.update(d=>{if(e!==null)if(i==="sldat")d.sanpham[e].sldat=d.sanpham[e].slgiao=u;else if(i==="ghichu")d.sanpham[e][i]=u;else if(i==="slgiao"){let m=u;m<d.sanpham[e].sldat?(d.sanpham[e].slgiao=d.sanpham[e].sldat,this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n s\u1ED1 l\u01B0\u1EE3ng \u0111\u1EB7t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})):d.sanpham[e].slgiao=m}else d.sanpham[e][i]=u;else d[i]=u;return d})}Tongcong=0;Tong=0;Tinhtongcong(t){this.Tongcong=t.Tongcong,this.Tong=t.Tong}TinhTong(t,e){return t?.reduce((n,i)=>n+(i[e]||0),0)||0}SelectNhacungcap(t){let e=this.ListNhacungcap().find(n=>n.id===t.value);console.log(e),e&&this.DetailDathang.update(n=>{let i={name:e.name,diachi:e.diachi,sdt:e.sdt,ghichu:e.ghichu};return n.nhacungcapId=e.id,n.nhacungcap=i,n}),console.log(this.DetailDathang())}displayedColumns=["STT","title","masp","dvt","sldat","slgiao","slnhan","ghichu"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slgiao:"SL Giao",slnhan:"SL Nh\u1EADn",ghichu:"Ghi Ch\xFA"};dataSource=new Ye([]);CountItem=this.dataSource.data.length;paginator;sort;_GoogleSheetService=y(Qe);LoadDrive(){return E(this,null,function*(){let t={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"DatHImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(t),n=Fe(e.values);console.log(n),this.DetailDathang.update(i=>(i.sanpham=n.map(a=>{a.sldat=Number(a.sldat)||0,a.slgiao=Number(a.slgiao)||0,a.slnhan=Number(a.slnhan)||0,a.ttdat=Number(a.ttdat)||0,a.ttgiao=Number(a.ttgiao)||0,a.ttnhan=Number(a.ttnhan)||0;let u=this._SanphamService.ListSanpham().find(d=>d.masp===a.masp);return console.log(u),u?R(R({},u),a):a}),i)),console.log(this.DetailDathang()),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase()}EmptyCart(){this.DetailDathang.update(t=>(t.sanpham=[],t)),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()}getName(t){return this.ListNhacungcap().find(e=>e.id===t)}reloadfilter(){this.filterSanpham=this._SanphamService.ListSanpham().filter(t=>!this.DetailDathang().sanpham.some(e=>e.id===t.id))}DoFindSanpham(t){let e=t.target.value;console.log(e),this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>n.title.toLowerCase().includes(e.toLowerCase()))}SelectSanpham(t){let e=t.value,n=this._SanphamService.ListSanpham().find(i=>i.id===e);this.DetailDathang.update(i=>(i.sanpham?(n.sldat=n.slgiao=1,i.sanpham.push(n)):(i.sanpham=[],n.sldat=n.slgiao=1,i.sanpham.push(n)),this.reloadfilter(),i)),this.dataSource.data=this.DetailDathang().sanpham}RemoveSanpham(t){this.DetailDathang.update(e=>(e.sanpham=e.sanpham.filter(n=>n.id!==t.id),this.reloadfilter(),e)),this.dataSource.data=this.DetailDathang().sanpham}GetGoiy(t){let e=parseFloat(((t.soluongkho-t.soluong)*(1+t.haohut/100)).toString()).toFixed(2);return Number(e)<0?0:e}doFilterSanpham(t){this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>Ie(n.title).includes(t.target.value.toLowerCase())||n.title.toLowerCase().includes(t.target.value.toLowerCase()));let e=t.target.value.toLowerCase()}ListFilter=[];ChosenItem(t){console.log(t);let e=this.filterSanpham.filter(i=>i.id===t.id);this.ListFilter.filter(i=>i.id===t.id).length>0?this.ListFilter=this.ListFilter.filter(i=>i.id!==t.id):this.ListFilter=[...this.ListFilter,...e],this.ListFilter.forEach(i=>{i.idSP=i.id})}ChosenAll(t){this.ListFilter=t}ResetFilter(){this.ListFilter=this.filterSanpham,this.dataSource.data=this.filterSanpham}EmptyFiter(){this.ListFilter=[]}CheckItem(t){return!!this.ListFilter.find(e=>e.id===t.id)}ApplyFilterColum(t){console.log(this.ListFilter),this.ListFilter.forEach(e=>{e.sldat=e.slgiao=e.slnhan=1}),this.dataSource.data=this.ListFilter,this.DetailDathang.update(e=>(e.sanpham=this.ListFilter,e)),this.dataSource.data.sort((e,n)=>e.order-n.order),t.closeMenu()}GiaoDonhang(){this.DetailDathang.update(t=>(t.status="dagiao",t)),this._DathangService.updateDathang(this.DetailDathang()).then(t=>{this._snackBar.open("Giao \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}Danhanhang(){this.DetailDathang.update(t=>(t.status="danhan",t)),this._DathangService.updateDathang(this.DetailDathang()).then(t=>{this._snackBar.open("\u0110\xE3 Nh\u1EADn H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=ie({type:r,selectors:[["app-detaildathang"]],viewQuery:function(e,n){if(e&1&&($(A,5),$(H,5)),e&2){let i;G(i=z())&&(n.paginator=i.first),G(i=z())&&(n.sort=i.first)}},decls:20,vars:11,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["id","printContent",1,"min-w-[800px]","flex","flex-col","space-y-6","items-center","p-2","border","rounded-lg"],[1,"w-full","flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-[18px]","uppercase"],["class","p-2 rounded-lg border text-red-600",3,"innerHTML",4,"ngIf"],["class","grid lg:grid-cols-3 grid-cols-1 gap-4",4,"ngIf"],["class","w-full flex flex-col overflow-y-auto",4,"ngIf"],["class","w-full border-collapse border mt-4",4,"ngIf"],[1,"p-2","rounded-lg","border","text-red-600",3,"innerHTML"],[1,"grid","lg:grid-cols-3","grid-cols-1","gap-4"],[1,"w-full","flex","flex-col","overflow-y-auto"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"keyup"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click","disabled"],["matTooltip","L\xE0m Tr\u1ED1ng Gi\u1ECF H\xE0ng","color","warn","mat-icon-button","",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"flex","flex-row","space-x-1","items-center"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],[1,"sldat-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","keydown.enter","contentEditable"],[1,"text-xs","text-red-600","font-bold"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","keydown.enter","contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","keydown.enter","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","keydown.enter","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-full","border-collapse","border","mt-4"],[1,"border"],[1,"border","p-2"],[1,"border","p-2","max-w-10"],["colspan","3",1,"border","p-2","text-start"],[1,"border","p-2","text-end","font-bold"],[1,"border","p-2","text-end"],[1,"border","p-2","text-center"],[1,"border","p-2","text-end","max-w-10"]],template:function(e,n){e&1&&(o(0,"div",2)(1,"button",3),f("click",function(){return n.goBack()}),o(2,"mat-icon"),c(3,"arrow_back"),l()(),o(4,"div",4),f("blur",function(a){return n.EnterUpdateValue(a,null,n.DetailDathang(),"madncc","string")}),c(5),l(),o(6,"div",5),S(7,_t,2,1,"button",6),o(8,"button",7),f("click",function(){return n.Danhanhang()}),c(9," \u0110\xE3 Nh\u1EADn"),l(),o(10,"mat-slide-toggle",8),U("ngModelChange",function(a){return O(n.DetailDathang().isActive,a)||(n.DetailDathang().isActive=a),a}),c(11),l(),S(12,dt,3,0,"button",9)(13,mt,3,0,"button",9),o(14,"button",10),f("click",function(){return n.toggleDelete()}),o(15,"mat-icon"),c(16,"delete"),l()()()(),o(17,"div",11),S(18,ut,9,0,"ng-container",12)(19,Nt,11,8,"ng-container",12),l()),e&2&&(_(4),p("contentEditable",!0),_(),x("",n.DetailDathang().madncc||""," "),_(2),p("ngIf",n.DetailDathang().status!=="danhan"),_(),p("disabled",n.DetailDathang().status=="danhan"),_(2),K("ngModel",n.DetailDathang().isActive),p("disabled",!n.isEdit()),_(),D(n.DetailDathang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),_(),p("ngIf",n.isEdit()),_(),p("ngIf",!n.isEdit()),_(5),p("ngIf",n.isDelete()),_(),p("ngIf",!n.isDelete()))},dependencies:[ve,Te,be,X,Z,fe,J,ge,Q,W,Me,Se,de,q,Y,Je,We,Ce,Ve,qe,Ne,Le],encapsulation:2})};export{it as DetailDathangComponent};
