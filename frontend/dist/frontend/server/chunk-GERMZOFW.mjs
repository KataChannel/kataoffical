import './polyfills.server.mjs';
import{a as pa}from"./chunk-6EUKAF2X.mjs";import{a as da,b as ua}from"./chunk-CPV6ATIC.mjs";import{a as ra,b as oa}from"./chunk-56VMO5UW.mjs";import{a as ga}from"./chunk-VZRBWHU2.mjs";import{a as la}from"./chunk-JKPTH5P2.mjs";import{a as ha}from"./chunk-MD43NPDG.mjs";import{a as ma}from"./chunk-D5D56V4W.mjs";import{a as sa}from"./chunk-ZMNEXFB4.mjs";import{a as ca}from"./chunk-C2TRKYCE.mjs";import{a as na}from"./chunk-CDQXBW3K.mjs";import{a as wt}from"./chunk-HT6NLDZE.mjs";import{b as jt,g as qt,h as dt}from"./chunk-OSR76MA5.mjs";import{b as Vt,c as $t,d as Yt,e as Ot,g as Ht,w as Gt}from"./chunk-J6UTC4TB.mjs";import{a as Rt}from"./chunk-WOBTRYSV.mjs";import{a as Mt,b as Pt,c as Bt,h as rt}from"./chunk-T6QRM4JN.mjs";import{a as T}from"./chunk-26NM6QMQ.mjs";import{c as It}from"./chunk-MA5QE5RX.mjs";import{b as zt}from"./chunk-C23WORZD.mjs";import{a as ia}from"./chunk-GETQ7DC3.mjs";import{c as Ut,d as Wt,e as Qt,f as Xt,g as Jt,h as Zt,i as ta,j as aa,k as ea}from"./chunk-RKXJMNII.mjs";import{a as wa}from"./chunk-MGIVCIKU.mjs";import{d as Lt}from"./chunk-WATAHPR3.mjs";import{a as tt,b as at}from"./chunk-HI3FSC7Q.mjs";import{b as xt,g as et,j as it,n as nt,p as Tt,s as Ft,v as Nt,w as Kt,z as At}from"./chunk-EHZGRFDL.mjs";import{a as B}from"./chunk-Y5GM6BPP.mjs";import{a as Z,b as Dt}from"./chunk-AEZIUUEM.mjs";import{a as X,e as J}from"./chunk-U7KFJFV4.mjs";import{_ as Ct}from"./chunk-B665T7JI.mjs";import{d as Et}from"./chunk-ZZ6RE4P2.mjs";import{n as U,o as W,t as vt,w as Q}from"./chunk-JLZJVQWC.mjs";import{Cc as H,Dc as G,Ec as j,Gb as O,Ic as z,Jc as p,Kc as P,Lc as x,Mc as St,Nb as E,Oc as R,Pc as V,Qc as $,Ra as D,Sc as q,Yc as mt,Zb as g,_c as pt,ad as gt,bc as bt,cc as kt,ia as Y,jc as c,kc as l,lc as M,mc as ct,na as K,nc as ht,oa as C,pc as A,tb as m,uc as S,wc as w,xa as f,xd as _t,ya as y,yb as lt}from"./chunk-HSX3JMXX.mjs";import{a as d,b as _,g as Da,j as k}from"./chunk-RIAI3ORJ.mjs";var ot=class s{constructor(e,t,a,i){this._StorageService=e;this.router=t;this._ErrorLogService=a;this._sharedSocketService=i;this.socket=this._sharedSocketService.getSocket(),this.listenImportdataUpdates()}socket;_snackBar=C(Z);ListImportdata=D([]);DetailImportdata=D({});page=D(1);pageCount=D(1);total=D(0);pageSize=D(9999);importdataId=D(null);setImportdataId(e){this.importdataId.set(e)}CreateImportdata(e){return k(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(e)},a=yield fetch(`${B.APIURL}/importdata`,t);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let i=yield a.json();this.getAllImportdata(this.pageSize()),this.importdataId.set(i.id)}catch(t){this._ErrorLogService.logError("Failed to CreateImportdata",t),console.error(t)}})}getAllImportdata(){return k(this,arguments,function*(e=this.pageSize(),t=!1){this.pageSize.set(e);try{let a={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`}},i=new URLSearchParams({page:this.page().toString(),limit:e.toString()}),n=yield fetch(`${B.APIURL}/importdata?${i}`,a);n.ok||this.handleError(n.status);let o=yield n.json();return this.ListImportdata.set(o.data),this.page.set(o.page||1),this.pageCount.set(o.pageCount||1),this.total.set(o.total||o.data.length),this.pageSize.set(e),o.data}catch(a){console.error(a)}})}getUpdatedCodeIds(){return k(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`}},t=yield fetch(`${B.APIURL}/importdata/updateCodeIds`,e);t.ok||this.handleError(t.status);let a=yield t.json();return this.getAllImportdata(this.pageSize()),a.data}catch(e){this._ErrorLogService.logError("Failed to getUpdatedCodeIds",e),console.error(e)}})}listenImportdataUpdates(){this.socket.off("importdata-updated"),this.socket.on("importdata-updated",()=>k(this,null,function*(){console.log("\u{1F504} D\u1EEF li\u1EC7u s\u1EA3n ph\u1EA9m thay \u0111\u1ED5i, c\u1EADp nh\u1EADt l\u1EA1i cache..."),this._StorageService.removeItem("importdatas_updatedAt"),yield this.getAllImportdata()}))}getImportdataBy(a){return k(this,arguments,function*(e,t=this.pageSize()){this.pageSize.set(t);try{let i={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(_(d({},e),{page:this.page(),limit:t}))},n=yield fetch(`${B.APIURL}/importdata/findby`,i);n.ok||this.handleError(n.status);let o=yield n.json();e.isOne===!0?this.DetailImportdata.set(o):(this._StorageService.setItem("importdatas_updatedAt",new Date().toISOString()),this.ListImportdata.set(o.data),this.page.set(o.page||1),this.pageCount.set(o.pageCount||1),this.total.set(o.total||o.data.length),this.pageSize.set(t))}catch(i){console.error(i)}})}updateImportdata(e){return k(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(e)},a=yield fetch(`${B.APIURL}/importdata/${e.id}`,t);a.ok||this.handleError(a.status);let i=yield a.json();this.getAllImportdata(this.pageSize()),this.getImportdataBy({id:i.id,isOne:!0},this.pageSize())}catch(t){this._ErrorLogService.logError("Failed to updateImportdata",t),console.error(t)}})}DeleteImportdata(e){return k(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`}},a=yield fetch(`${B.APIURL}/importdata/${e.id}`,t);a.ok||this.handleError(a.status),this.getAllImportdata(this.pageSize())}catch(t){this._ErrorLogService.logError("Failed to DeleteImportdata",t),console.error(t)}})}handleError(e){let t="L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh";switch(e){case 400:t="Th\xF4ng tin \u0111\xE3 t\u1ED3n t\u1EA1i";break;case 401:case 404:t="Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i";break;case 403:t="B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp";break;case 500:t="L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau";break}this._snackBar.open(t,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}static \u0275fac=function(t){return new(t||s)(K(Dt),K(Et),K(Rt),K(na))};static \u0275prov=Y({token:s,factory:s.\u0275fac,providedIn:"root"})};var v=Da(wa());function Ba(s,e){if(s&1&&(c(0,"li"),p(1),l()),s&2){let t=e.$implicit,a=w(2);m(),x(" ",a.getItemDisplayName(t)," ")}}function Ta(s,e){if(s&1&&(c(0,"li",17),p(1),l()),s&2){let t=w(2);m(),x(" ... v\xE0 ",t.data.duplicateItems.length-5," m\u1EE5c kh\xE1c ")}}function Fa(s,e){if(s&1&&(c(0,"div",11)(1,"p",12)(2,"mat-icon",13),p(3,"error"),l(),p(4),l(),c(5,"ul",14),E(6,Ba,2,1,"li",15)(7,Ta,2,1,"li",16),l()()),s&2){let t=w();m(4),x(" Ph\xE1t hi\u1EC7n ",t.data.duplicateItems.length," m\u1EE5c tr\xF9ng l\u1EB7p: "),m(2),g("ngForOf",t.data.duplicateItems.slice(0,5)),m(),g("ngIf",t.data.duplicateItems.length>5)}}function Na(s,e){s&1&&(c(0,"div",23),p(1," \u26A0\uFE0F D\u1EEF li\u1EC7u c\u0169 s\u1EBD b\u1ECB thay th\u1EBF b\u1EDFi d\u1EEF li\u1EC7u m\u1EDBi "),l())}function Ka(s,e){s&1&&(c(0,"div",17),p(1," \u2139\uFE0F Ch\u1EC9 th\xEAm m\u1EDBi c\xE1c m\u1EE5c ch\u01B0a t\u1ED3n t\u1EA1i, b\u1ECF qua c\xE1c m\u1EE5c tr\xF9ng l\u1EB7p "),l())}function Aa(s,e){if(s&1){let t=A();c(0,"div",18)(1,"mat-checkbox",19),$("ngModelChange",function(i){f(t);let n=w();return V(n.data.isOverwrite,i)||(n.data.isOverwrite=i),y(i)}),c(2,"span",20),p(3,"Ghi \u0111\xE8 l\xEAn d\u1EEF li\u1EC7u c\u0169 (c\xE1c m\u1EE5c tr\xF9ng l\u1EB7p s\u1EBD \u0111\u01B0\u1EE3c c\u1EADp nh\u1EADt)"),l()(),c(4,"div",21),E(5,Na,2,0,"div",22)(6,Ka,2,0,"div",16),l()()}if(s&2){let t=w();m(),R("ngModel",t.data.isOverwrite),m(4),g("ngIf",t.data.isOverwrite),m(),g("ngIf",!t.data.isOverwrite)}}function za(s,e){s&1&&(c(0,"div",24)(1,"div",25)(2,"mat-icon",26),p(3,"check_circle"),l(),c(4,"span"),p(5,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u tr\xF9ng l\u1EB7p. T\u1EA5t c\u1EA3 s\u1EBD \u0111\u01B0\u1EE3c th\xEAm m\u1EDBi."),l()()())}var st=class s{constructor(e,t){this.dialogRef=e;this.data=t}getItemDisplayName(e){switch(this.data.dataType){case"S\u1EA3n Ph\u1EA9m":return`${e.masp} - ${e.title}`;case"Kh\xE1ch H\xE0ng":return`${e.makh} - ${e.name}`;case"Nh\xE0 Cung C\u1EA5p":return`${e.mancc} - ${e.name}`;case"B\u1EA3ng Gi\xE1":return`${e.mabanggia} - ${e.title}`;default:return e.name||e.title||e.id||"N/A"}}onConfirm(){this.dialogRef.close({confirmed:!0,overwrite:this.data.isOverwrite})}onCancel(){this.dialogRef.close({confirmed:!1,overwrite:!1})}static \u0275fac=function(t){return new(t||s)(lt(Mt),lt(Pt))};static \u0275cmp=O({type:s,selectors:[["app-import-confirmation-dialog"]],decls:31,vars:7,consts:[[1,"p-6","min-w-96"],[1,"flex","items-center","mb-4"],[1,"text-orange-500","mr-2"],[1,"text-lg","font-semibold"],[1,"mb-4","text-gray-700"],["class","mt-3",4,"ngIf"],["class","mb-6",4,"ngIf"],["class","mb-4 p-3 bg-green-50 border border-green-200 rounded",4,"ngIf"],[1,"flex","justify-end","space-x-3","mt-6"],["mat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"mt-3"],[1,"text-red-600","font-medium"],[1,"text-red-500","text-sm"],[1,"list-disc","list-inside","text-sm","text-gray-600","mt-2","max-h-32","overflow-y-auto"],[4,"ngFor","ngForOf"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],[1,"mb-6"],[1,"text-sm",3,"ngModelChange","ngModel"],[1,"ml-2"],[1,"mt-2","text-sm","text-gray-600"],["class","text-orange-600",4,"ngIf"],[1,"text-orange-600"],[1,"mb-4","p-3","bg-green-50","border","border-green-200","rounded"],[1,"flex","items-center","text-green-700"],[1,"text-green-500","mr-2"]],template:function(t,a){t&1&&(c(0,"div",0)(1,"div",1)(2,"mat-icon",2),p(3,"warning"),l(),c(4,"h2",3),p(5,"X\xE1c nh\u1EADn Import D\u1EEF li\u1EC7u"),l()(),c(6,"div",4)(7,"p")(8,"strong"),p(9,"Lo\u1EA1i d\u1EEF li\u1EC7u:"),l(),p(10),l(),c(11,"p")(12,"strong"),p(13,"D\u1EEF li\u1EC7u hi\u1EC7n t\u1EA1i:"),l(),p(14),l(),c(15,"p")(16,"strong"),p(17,"D\u1EEF li\u1EC7u m\u1EDBi:"),l(),p(18),l(),E(19,Fa,8,3,"div",5),l(),E(20,Aa,7,3,"div",6)(21,za,6,0,"div",7),c(22,"div",8)(23,"button",9),S("click",function(){return a.onCancel()}),c(24,"mat-icon"),p(25,"cancel"),l(),p(26," H\u1EE7y b\u1ECF "),l(),c(27,"button",10),S("click",function(){return a.onConfirm()}),c(28,"mat-icon"),p(29,"file_upload"),l(),p(30),l()()()),t&2&&(m(10),x(" ",a.data.dataType,""),m(4),x(" ",a.data.existingCount," m\u1EE5c"),m(4),x(" ",a.data.newCount," m\u1EE5c"),m(),g("ngIf",a.data.duplicateItems.length>0),m(),g("ngIf",a.data.duplicateItems.length>0),m(),g("ngIf",a.data.duplicateItems.length===0),m(9),x(" ",a.data.duplicateItems.length>0?a.data.isOverwrite?"Import & Ghi \u0111\xE8":"Import & B\u1ECF qua tr\xF9ng l\u1EB7p":"Import"," "))},dependencies:[rt,J,X,at,tt,Q,U,W,ua,da,nt,et,it],encapsulation:2})};var b=class s{static checkDuplicates(e,t,a){let i=new Set(t.map(n=>n[a]));return e.filter(n=>i.has(n[a]))}static prepareSanphamData(e,t,a){if(a)return e;{let i=new Set(t.map(n=>n.masp));return e.filter(n=>!i.has(n.masp))}}static prepareKhachhangData(e,t,a){if(a)return e;{let i=new Set(t.map(n=>n.makh));return e.filter(n=>!i.has(n.makh))}}static prepareNhacungcapData(e,t,a){if(a)return e;{let i=new Set(t.map(n=>n.mancc));return e.filter(n=>!i.has(n.mancc))}}static prepareBanggiaData(e,t,a){if(a)return e;{let i=new Set(t.map(n=>n.mabanggia));return e.filter(n=>!i.has(n.mabanggia))}}static prepareKhoData(e,t,a){if(a)return e;{let i=new Set(t.map(n=>n.makho));return e.filter(n=>!i.has(n.makho))}}static prepareGenericData(e,t,a,i){if(i)return e;{let n=new Set(t.map(o=>o[a]));return e.filter(o=>!n.has(o[a]))}}static validateRequiredFields(e,t){let a=[],i=[];return e.forEach(n=>{let o=t.filter(h=>n[h]===void 0||n[h]===null||n[h]==="");o.length===0?a.push(n):i.push(_(d({},n),{_validationErrors:o.map(h=>`Missing required field: ${h}`)}))}),{valid:a,invalid:i}}static validateDataFormat(e,t){switch(t){case"sanpham":return this.validateSanphamFormat(e);case"khachhang":return this.validateKhachhangFormat(e);case"nhacungcap":return this.validateNhacungcapFormat(e);case"banggia":return this.validateBanggiaFormat(e);case"kho":return this.validateKhoFormat(e);default:return{valid:e,invalid:[]}}}static validateSanphamFormat(e){let t=[],a=[];return e.forEach(i=>{let n=[];(!i.masp||typeof i.masp!="string")&&n.push("Invalid product code (masp)"),i.giaban&&isNaN(Number(i.giaban))&&n.push("Invalid selling price (giaban)"),i.giagoc&&isNaN(Number(i.giagoc))&&n.push("Invalid cost price (giagoc)"),n.length===0?t.push(i):a.push(_(d({},i),{_validationErrors:n}))}),{valid:t,invalid:a}}static validateKhachhangFormat(e){let t=[],a=[];return e.forEach(i=>{let n=[];(!i.makh||typeof i.makh!="string")&&n.push("Invalid customer code (makh)"),(!i.name||typeof i.name!="string")&&n.push("Invalid customer name"),i.email&&!this.isValidEmail(i.email)&&n.push("Invalid email format"),n.length===0?t.push(i):a.push(_(d({},i),{_validationErrors:n}))}),{valid:t,invalid:a}}static validateNhacungcapFormat(e){let t=[],a=[];return e.forEach(i=>{let n=[];(!i.mancc||typeof i.mancc!="string")&&n.push("Invalid supplier code (mancc)"),(!i.name||typeof i.name!="string")&&n.push("Invalid supplier name"),n.length===0?t.push(i):a.push(_(d({},i),{_validationErrors:n}))}),{valid:t,invalid:a}}static validateBanggiaFormat(e){let t=[],a=[];return e.forEach(i=>{let n=[];(!i.mabanggia||typeof i.mabanggia!="string")&&n.push("Invalid price list code (mabanggia)"),n.length===0?t.push(i):a.push(_(d({},i),{_validationErrors:n}))}),{valid:t,invalid:a}}static validateKhoFormat(e){let t=[],a=[];return e.forEach(i=>{let n=[];(!i.makho||typeof i.makho!="string")&&n.push("Invalid warehouse code (makho)"),(!i.tenkho||typeof i.tenkho!="string")&&n.push("Invalid warehouse name (tenkho)"),n.length===0?t.push(i):a.push(_(d({},i),{_validationErrors:n}))}),{valid:t,invalid:a}}static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static getValidationSummary(e,t,a,i){return`
      T\u1ED5ng s\u1ED1 d\xF2ng: ${e}
      D\u1EEF li\u1EC7u h\u1EE3p l\u1EC7: ${t}
      D\u1EEF li\u1EC7u kh\xF4ng h\u1EE3p l\u1EC7: ${a}
      D\u1EEF li\u1EC7u tr\xF9ng l\u1EB7p: ${i}
    `}static transformDataForImport(e,t){switch(t){case"sanpham":return this.transformSanphamData(e);case"khachhang":return this.transformKhachhangData(e);case"nhacungcap":return this.transformNhacungcapData(e);case"banggia":return this.transformBanggiaData(e);case"kho":return this.transformKhoData(e);default:return e}}static transformSanphamData(e){return e.map(t=>_(d({},t),{masp:t.masp?.toString().trim()||"",subtitle:T((t.title||"")+(t.title2||"")),title:t.title?.toString().trim()||"",title2:t.title2?.toString().trim()||"",giaban:Number(t.giaban)||Number(t.giagoc)||0,giagoc:Number(t.giagoc)||0,vat:Number(t.vat)||0,dvt:t.dvt?.toString().trim()||"",haohut:Number(t.haohut)||0,ghichu:t.ghichu?.toString().trim()||""}))}static transformKhachhangData(e){return e.map(t=>_(d({},t),{makh:t.makh?.toString().trim()||"",name:t.name?.toString().trim()||"",tenfile:T(t.tenfile?.toString()||t.name?.toString()||""),subtitle:T((t.name?.toString()||"")+(t.namenn?.toString()||"")),namenn:t.namenn?.toString().trim()||"",diachi:t.diachi?.toString().trim()||"",quan:t.quan?.toString().trim()||"",email:t.email?.toString().trim()||"",sdt:t.sdt?.toString().trim()||"",mst:t.mst?.toString().trim()||"",gionhanhang:t.gionhanhang?.toString().trim()||"",loaikh:t.loaikh?.toString().trim()||"khachsi",hiengia:t.hiengia!==void 0?!!t.hiengia:!0,ghichu:t.ghichu?.toString().trim()||"",mabanggia:t.mabanggia?.toString().trim()||""}))}static transformNhacungcapData(e){return e.map(t=>_(d({},t),{mancc:t.mancc?.toString().trim()||"",name:t.name?.toString().trim()||"",tenfile:T(t.tenfile?.toString()||t.name?.toString()||""),diachi:t.diachi?.toString().trim()||"",email:t.email?.toString().trim()||"",sdt:t.sdt?.toString().trim()||"",ghichu:t.ghichu?.toString().trim()||""}))}static transformBanggiaData(e){return e.map(t=>_(d({},t),{mabanggia:t.mabanggia?.toString().trim()||"",title:t.title?.toString().trim()||"",type:t.type?.toString().trim()||"",ghichu:t.ghichu?.toString().trim()||"",status:t.status?.toString().trim()||"active"}))}static transformKhoData(e){return e.map(t=>_(d({},t),{makho:t.makho?.toString().trim()||"",tenkho:t.tenkho?.toString().trim()||"",diachi:t.diachi?.toString().trim()||"",ghichu:t.ghichu?.toString().trim()||"",status:t.status?.toString().trim()||"active"}))}static filterValidData(e,t){return e.filter(a=>t.every(i=>a[i]!==void 0&&a[i]!==null&&a[i]!==""))}static getRequiredFields(e){switch(e){case"sanpham":return["masp","title"];case"khachhang":return["makh","name"];case"nhacungcap":return["mancc","name"];case"banggia":return["mabanggia","title"];case"kho":return["makho","tenkho"];default:return[]}}static getUniqueField(e){switch(e){case"sanpham":return"masp";case"khachhang":return"makh";case"nhacungcap":return"mancc";case"banggia":return"mabanggia";case"kho":return"makho";default:return"id"}}static \u0275fac=function(t){return new(t||s)};static \u0275prov=Y({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ra=["drawer"],fa=()=>({standalone:!0}),Va=()=>[1,2,3,4,5];function $a(s,e){if(s&1&&(c(0,"div",42)(1,"div",43),M(2,"mat-progress-spinner",44),c(3,"span",45),p(4),l()()()),s&2){let t=w();m(4),P(t.loadingMessage())}}function Ya(s,e){s&1&&(c(0,"span"),p(1,"T\u1EA3i Xu\u1ED1ng"),l())}function Oa(s,e){s&1&&(c(0,"span",46),M(1,"mat-progress-spinner",47),p(2," \u0110ang xu\u1EA5t... "),l())}function Ha(s,e){s&1&&(c(0,"mat-icon",48),p(1,"download"),l())}function Ga(s,e){s&1&&(c(0,"span"),p(1,"T\u1EA3i L\xEAn"),l())}function ja(s,e){s&1&&(c(0,"span",46),M(1,"mat-progress-spinner",47),p(2," \u0110ang nh\u1EADp... "),l())}function qa(s,e){s&1&&(c(0,"mat-icon",48),p(1,"upload"),l())}function Ua(s,e){if(s&1&&(c(0,"div",49)(1,"div",23),M(2,"mat-progress-spinner",50),c(3,"span",51),p(4),l()()()),s&2){let t=w();m(4),P(t.loadingMessage())}}function Wa(s,e){s&1&&(c(0,"mat-icon"),p(1,"check"),l())}function Qa(s,e){if(s&1){let t=A();c(0,"span",52),S("click",function(){let i=f(t).$implicit,n=w();return y(!n.isLoading()&&!n.isImporting()&&!n.isExporting()&&i.status&&n.toggleItem(i))}),E(1,Wa,2,0,"mat-icon",29),c(2,"span"),p(3),l()()}if(s&2){let t=e.$implicit,a=w();kt("",t.status?"":"hidden",` 
                   `,a.CheckItem(t)?"bg-blue-100":"",` 
                   `,a.isLoading()||a.isImporting()||a.isExporting()?"opacity-50 cursor-not-allowed":"cursor-pointer",` 
                   flex flex-row space-x-2 items-center p-4 rounded-lg border transition-all duration-200`),m(),g("ngIf",a.CheckItem(t)),m(2),P(t.title)}}function Xa(s,e){s&1&&(c(0,"div",55),M(1,"div",56)(2,"div",57)(3,"div",58),l())}function Ja(s,e){s&1&&(ct(0),c(1,"div",53),E(2,Xa,4,0,"div",54),l(),ht()),s&2&&(m(2),g("ngForOf",q(1,Va)))}function Za(s,e){if(s&1&&(c(0,"div")(1,"span",60),p(2),l(),c(3,"span"),p(4),l(),c(5,"span",61),p(6),l()()),s&2){let t=e.$implicit,a=w(3);bt(`w-full flex flex-row space-x-2 items-center border p-4 rounded-lg
                    `,a.isImporting()||a.isExporting()?"opacity-50":"",""),m(2),P(t.type),m(2),P(t.title),m(2),P(t.description)}}function te(s,e){if(s&1&&(ct(0),E(1,Za,7,6,"div",59),ht()),s&2){let t=w(2);m(),g("ngForOf",t.ListImportdata())}}function ae(s,e){s&1&&(c(0,"div",62)(1,"span",63),p(2,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l()())}function ee(s,e){if(s&1&&E(0,te,2,1,"ng-container",41)(1,ae,3,0,"ng-template",null,3,gt),s&2){let t=z(2),a=w();g("ngIf",a.ListImportdata().length>0)("ngIfElse",t)}}var ya=class s{displayedColumns=[];ColumnName={stt:"#",codeId:"Code",name:"Ti\xEAu \u0110\u1EC1",group:"Nh\xF3m",description:"M\xF4 T\u1EA3",status:"Tr\u1EA1ng Th\xE1i",order:"Th\u1EE9 T\u1EF1",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt"};FilterColumns=JSON.parse(localStorage.getItem("ImportdataColFilter")||"[]");Columns=[];paginator;sort;drawer;_BanggiaService=C(sa);_SanphamService=C(ma);_KhachhangService=C(ca);_NhacungcapService=C(ha);_DonhangService=C(ia);_DathangService=C(la);_PhieukhoService=C(pa);_UserService=C(wt);_KhoService=C(ga);_ImportdataService=C(ot);_dialog=C(Bt);_snackBar=C(Z);isLoading=D(!1);isImporting=D(!1);isExporting=D(!1);loadingMessage=D("");batdau=new Date;ketthuc=new Date;ListImportType=D([{id:1,title:"S\u1EA3n Ph\u1EA9m",value:"sanpham",status:!0},{id:2,title:"Kh\xE1ch H\xE0ng",value:"khachhang",status:!0},{id:3,title:"Nh\xE0 Cung C\u1EA5p",value:"nhacungcap",status:!0},{id:4,title:"B\u1EA3ng Gi\xE1",value:"banggia",status:!0},{id:5,title:"\u0110\u01A1n H\xE0ng",value:"donhang",status:!0},{id:6,title:"\u0110\u1EB7t H\xE0ng",value:"dathang",status:!0},{id:7,title:"B\u1EA3ng Gi\xE1 Kh\xE1ch H\xE0ng",value:"banggiakhachhang",status:!0},{id:8,title:"B\u1EA3ng Gi\xE1 S\u1EA3n Ph\u1EA9m",value:"banggiasanpham",status:!0},{id:9,title:"Nh\xE0 Cung C\u1EA5p S\u1EA3n Ph\u1EA9m",value:"nhacungcapsanpham",status:!0},{id:10,title:"Xu\u1EA5t Nh\u1EADp T\u1ED3n",value:"xuatnhapton",status:!0},{id:11,title:"Kho",value:"kho",status:!0}]);ListEdit=D([]);ListImportdata=this._ImportdataService.ListImportdata;TitleExport="export";rawListSP=[];rawListKH=[];rawListNCC=[];rawListBG=[];rawListDH=[];rawListDathang=[];rawListTonkho=[];rawListKho=[];constructor(){let e=new Date;this.ketthuc=new Date(e),this.batdau=new Date(e),_t(()=>k(this,null,function*(){this.isLoading.set(!0),this.loadingMessage.set("\u0110ang t\u1EA3i d\u1EEF li\u1EC7u...");try{yield this._ImportdataService.getAllImportdata(100,!0),yield this.loadDataWithDateRange(),this.loadingMessage.set("\u0110ang ki\u1EC3m tra quy\u1EC1n..."),yield this._UserService.getProfile();let t=this._UserService.profile()?.permissions?.map(a=>a.name)||[];this.ListImportType.update(a=>a.map(i=>_(d({},i),{status:t.includes("importdata."+i.value)})))}catch(t){console.error("Error loading data:",t),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi t\u1EA3i d\u1EEF li\u1EC7u","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isLoading.set(!1),this.loadingMessage.set("")}}))}loadDataWithDateRange(){return k(this,null,function*(){try{let e={Batdau:this.batdau,Ketthuc:this.ketthuc,pageSize:9999};this.loadingMessage.set("\u0110ang t\u1EA3i danh s\xE1ch s\u1EA3n ph\u1EA9m..."),yield this._SanphamService.getSanphamBy({pageSize:99999}),this.rawListSP=this._SanphamService.ListSanpham(),this.loadingMessage.set("\u0110ang t\u1EA3i danh s\xE1ch kh\xE1ch h\xE0ng..."),yield this._KhachhangService.getKhachhangBy({pageSize:99999}),this.rawListKH=this._KhachhangService.ListKhachhang(),this.loadingMessage.set("\u0110ang t\u1EA3i danh s\xE1ch nh\xE0 cung c\u1EA5p..."),yield this._NhacungcapService.getNhacungcapBy({pageSize:99999}),this.rawListNCC=this._NhacungcapService.ListNhacungcap(),this.loadingMessage.set("\u0110ang t\u1EA3i b\u1EA3ng gi\xE1..."),yield this._BanggiaService.getAllBanggia(),this.rawListBG=this._BanggiaService.ListBanggia(),this.loadingMessage.set("\u0110ang t\u1EA3i \u0111\u01A1n h\xE0ng..."),yield this._DonhangService.searchDonhang(e),this.rawListDH=this._DonhangService.ListDonhang(),this.loadingMessage.set("\u0110ang t\u1EA3i \u0111\u1EB7t h\xE0ng..."),yield this._DathangService.searchDathang(e),this.rawListDathang=this._DathangService.ListDathang(),this.loadingMessage.set("\u0110ang t\u1EA3i t\u1ED3n kho..."),yield this._KhoService.getTonKho("1","1000").then(t=>{this.rawListTonkho=t.data}),this.loadingMessage.set("\u0110ang t\u1EA3i danh s\xE1ch kho..."),yield this._KhoService.getAllKho(),this.rawListKho=this._KhoService.ListKho()}catch(e){throw console.error("Error loading data with date range:",e),e}})}onDateChange(){return k(this,null,function*(){if(!this.isLoading()){this.isLoading.set(!0),this.loadingMessage.set("\u0110ang c\u1EADp nh\u1EADt d\u1EEF li\u1EC7u theo ng\xE0y...");try{yield this.loadDataWithDateRange()}catch(e){console.error("Error updating data with new date range:",e),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi c\u1EADp nh\u1EADt d\u1EEF li\u1EC7u","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isLoading.set(!1),this.loadingMessage.set("")}}})}applyDateFilter(){return k(this,null,function*(){yield this.onDateChange()})}setDateRange(e){return k(this,null,function*(){let t=new Date;switch(e){case"today":this.batdau=new Date(t),this.ketthuc=new Date(t);break;case"yesterday":let a=new Date(t);a.setDate(a.getDate()-1),this.batdau=new Date(a),this.ketthuc=new Date(a);break;case"last7days":this.ketthuc=new Date(t),this.batdau=new Date(t),this.batdau.setDate(this.batdau.getDate()-6);break;case"last30days":this.ketthuc=new Date(t),this.batdau=new Date(t),this.batdau.setDate(this.batdau.getDate()-29);break;case"thisMonth":this.batdau=new Date(t.getFullYear(),t.getMonth(),1),this.ketthuc=new Date(t);break;case"lastMonth":let i=new Date(t.getFullYear(),t.getMonth()-1,1);this.batdau=new Date(i),this.ketthuc=new Date(t.getFullYear(),t.getMonth(),0);break;case"thisWeek":let n=new Date(t);n.setDate(t.getDate()-t.getDay()),this.batdau=new Date(n),this.ketthuc=new Date(t);break}yield this.applyDateFilter()})}ngOnInit(){return k(this,null,function*(){this.loadDataWithDateRange()})}applyFilter(e){}toggleAll(){this.ListEdit().length===this.ListImportType().length?(this.ListEdit.set([]),this.TitleExport="export"):(this.ListEdit.set(this.ListImportType()),this.TitleExport="export_all")}toggleItem(e){this.ListEdit().findIndex(a=>a.id===e.id)===-1?(this.TitleExport+="_"+e.value,this.ListEdit.update(a=>[...a,e])):(this.TitleExport=this.TitleExport.replace("_"+e.value,""),this.ListEdit.update(a=>a.filter(i=>i.id!==e.id)))}CheckItem(e){return this.ListEdit().findIndex(a=>a.id===e.id)!==-1}ExportExcel(e){return k(this,null,function*(){if(!this.isExporting()){this.isExporting.set(!0),this.loadingMessage.set("\u0110ang chu\u1EA9n b\u1ECB d\u1EEF li\u1EC7u xu\u1EA5t theo kho\u1EA3ng th\u1EDDi gian...");try{let t=this.getFilteredExportData(),a=Array.isArray(t.ListSP)&&t.ListSP.length?t.ListSP.map(r=>({masp:r.masp,subtitle:r.subtitle,title:r.title,title2:r.title2,giaban:r.giaban,giagoc:r.giagoc,vat:r.vat,dvt:r.dvt,haohut:r.haohut,ghichu:r.ghichu})):[{masp:"",subtitle:"",title:"",title2:"",giaban:"",giagoc:"",vat:"",dvt:"",haohut:"",ghichu:""}],i=Array.isArray(t.ListKH)&&t.ListKH.length?t.ListKH.map(r=>({name:r.name?.trim()||"",tenfile:r.tenfile?.trim()||"",makh:r.makh?.trim()||"",namenn:r.namenn?.trim()||"",mabanggia:r.banggia?.mabanggia?.trim()||"",diachi:r.diachi?.trim()||"",quan:r.quan?.trim()||"",email:r.email?.trim()||"",sdt:r.sdt?.toString().trim()||"",mst:r.mst?.toString().trim()||"",gionhanhang:r.gionhanhang?.toString().trim()||"",loaikh:r.loaikh?.toString().trim()||"khachsi",hiengia:r.hiengia||!0,ghichu:r.ghichu?.toString().trim()||""})):[{name:"",tenfile:"",makh:"",namenn:"",diachi:"",quan:"",email:"",sdt:"",mst:"",gionhanhang:"",loaikh:"khachsi",hiengia:!0,ghichu:""}],n=Array.isArray(t.ListNCC)&&t.ListNCC.length>0?t.ListNCC.map(r=>({name:r.name?.trim()||"",tenfile:r.tenfile?.trim()||"",mancc:r.mancc?.trim()||"",diachi:r.diachi?.trim()||"",email:r.email?.trim()||"",sdt:r.sdt?.toString().trim()||"",ghichu:r.ghichu?.toString().trim()||""})):[{name:"",tenfile:"",mancc:"",diachi:"",email:"",sdt:"",ghichu:""}],o=Array.isArray(t.ListBG)&&t.ListBG.length>0?t.ListBG.map(r=>({title:r.title?.trim()||"",mabanggia:r.mabanggia?.trim()||"",type:r.type?.trim()||"",batdau:(0,v.default)(r.batdau).format("DD/MM/YYYY")||"",ketthuc:(0,v.default)(r.ketthuc).format("DD/MM/YYYY")||"",ghichu:r.ghichu?.trim()||"",status:r.status?.trim()||""})):[{title:"",mabanggia:"",type:"",batdau:"",ketthuc:"",ghichu:"",status:""}],h=Array.isArray(t.ListDH)&&t.ListDH.length>0?t.ListDH.flatMap(r=>Array.isArray(r.sanpham)?r.sanpham.map(u=>({ngaygiao:(0,v.default)(r.ngaygiao).format("DD/MM/YYYY"),makh:r.khachhang?.makh,name:r.khachhang?.name,mabanggia:r.khachhang?.banggia?.[0]?.mabanggia,masp:u.masp,tensp:u.title,sldat:u.sldat,slgiao:u.slgiao,slnhan:u.slnhan,ghichu:u.ghichu})):[]):[{ngaygiao:(0,v.default)().format("DD/MM/YYYY"),makh:"",mabanggia:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:""}],L=Array.isArray(t.ListDathang)&&t.ListDathang.length>0?t.ListDathang.flatMap(r=>Array.isArray(r.sanpham)?r.sanpham.map(u=>({ngaynhan:(0,v.default)(r.ngaynhan).format("DD/MM/YYYY"),mancc:r.nhacungcap?.mancc,name:r.nhacungcap?.name,mabanggia:r.banggia?.[0]?.mabanggia,masp:u.masp,tensp:u.title,sldat:Number(u.sldat)||0,slgiao:Number(u.slgiao)||0,slnhan:Number(u.slnhan)||0,ghichu:u.ghichu,makho:r?.kho?.makho||""})):[]):[{ngaynhan:(0,v.default)().format("DD/MM/YYYY"),mancc:"",name:"",mabanggia:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:"",makho:""}],F=this.convertBGSPToExport(t.ListBG,t.ListSP),N=t.ListKH.map(r=>({makh:r.makh||"",name:r.name||"",mabanggia:r.banggia?.mabanggia||""})),ba=t.ListSP.reduce((r,u)=>(u&&u.masp&&(r[u.masp]=""),r),{}),ka=t.ListNCC.map(r=>{let u={mancc:r.mancc||"",name:r.name||""},ft=1;for(let yt of Object.keys(ba))r.Sanpham?.some(Ca=>Ca.masp===yt)&&(u[ft]=yt,ft++);return u}),Sa=t.ListTonkho.map(r=>({masp:r.masp,title:r.title,dvt:r.dvt,slton:r.slton})),_a=Array.isArray(t.ListKho)&&t.ListKho.length?t.ListKho.map(r=>({makho:r.makho||"",tenkho:r.tenkho||"",diachi:r.diachi||"",ghichu:r.ghichu||"",status:r.status||"active"})):[{makho:"",tenkho:"",diachi:"",ghichu:"",status:"active"}],I={};if(this.ListEdit().some(r=>r.value==="sanpham")&&(I.sanpham={data:a}),this.ListEdit().some(r=>r.value==="khachhang")&&(I.khachhang={data:i}),this.ListEdit().some(r=>r.value==="nhacungcap")&&(I.nhacungcap={data:n}),this.ListEdit().some(r=>r.value==="banggia")&&(I.banggia={data:o}),this.ListEdit().some(r=>r.value==="donhang")&&(I.donhang={data:h}),this.ListEdit().some(r=>r.value==="dathang")&&(I.dathang={data:L}),this.ListEdit().some(r=>r.value==="banggiasanpham")&&(I.banggiasanpham={data:F}),this.ListEdit().some(r=>r.value==="banggiakhachhang")&&(I.banggiakhachhang={data:N}),this.ListEdit().some(r=>r.value==="nhacungcapsanpham")&&(I.nhacungcapsanpham={data:ka}),this.ListEdit().some(r=>r.value==="xuatnhapton")&&(I.xuatnhapton={data:Sa}),this.ListEdit().some(r=>r.value==="kho")&&(I.kho={data:_a}),Object.keys(I).length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 xu\u1EA5t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}this.loadingMessage.set("\u0110ang t\u1EA1o file Excel...");let va=`${this.batdau.toLocaleDateString("vi-VN").replace(/\//g,"-")}_${this.ketthuc.toLocaleDateString("vi-VN").replace(/\//g,"-")}`,Ea=`${e}_${va}`;jt(I,Ea),this._snackBar.open("Xu\u1EA5t d\u1EEF li\u1EC7u th\xE0nh c\xF4ng!","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("Error exporting Excel:",t),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi xu\u1EA5t d\u1EEF li\u1EC7u","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isExporting.set(!1),this.loadingMessage.set("")}}})}convertBGSPToExport(e,t){let a=new Set(e.map(i=>i.mabanggia));return t.map(i=>d({masp:i.masp,title:i.title,giaban:i.giaban.toString()},Array.from(a).reduce((n,o)=>(n[o]=i.giaban.toString(),n),{})))}convertBGSPToImport(e){return!e||e.length===0?[]:Object.keys(e[0]).filter(i=>!["masp","title","giagoc"].includes(i)).map(i=>({mabanggia:i,title:`B\u1EA3ng gi\xE1 ${i.replace("BG","")}`,sanpham:e.map(n=>({masp:n.masp?.toString().trim()||"",title:n.title?.toString().trim()||"",giagoc:n.giagoc||0,giaban:n[i]||0}))}))}convertNCCSPToImport(e){if(!e||e.length===0)return[];let t=Object.keys(e[0]).filter(a=>!["mancc","name"].includes(a));return e.forEach(a=>{a.Sanpham=[];for(let i of t)a[i]!==void 0&&a[i]!==null&&a[i]!==""&&a.Sanpham.push(a[i]),delete a[i]}),e}ImportExcel(e){return k(this,null,function*(){if(!this.isImporting()){this.isImporting.set(!0),this.loadingMessage.set("\u0110ang \u0111\u1ECDc file Excel...");try{let t=yield qt(e);this.loadingMessage.set("\u0110ang x\u1EED l\xFD d\u1EEF li\u1EC7u..."),yield this.DoImportData(t)}catch(t){console.error("Error importing Excel:",t),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi \u0111\u1ECDc file Excel","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isImporting.set(!1),this.loadingMessage.set("")}}})}showImportConfirmDialog(e,t,a,i){return k(this,null,function*(){return new Promise(n=>{let o={dataType:e,existingCount:t,newCount:a,duplicateItems:i,isOverwrite:!1};this._dialog.open(st,{width:"500px",data:o,disableClose:!0}).afterClosed().subscribe(L=>{n(L||{confirmed:!1,overwrite:!1})})})})}DoImportData(e){return k(this,null,function*(){if(Object.keys(this.ListEdit()).length===0){this._snackBar.open("Ch\u01B0a Ch\u1ECDn Lo\u1EA1i D\u1EEF Li\u1EC7u","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}if(Object.keys(e).length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 nh\u1EADp","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}if(e.sanpham&&e.sanpham.length>0&&this.ListEdit().some(t=>t.value==="sanpham")){let t=b.transformDataForImport(e.sanpham,"sanpham"),a=b.filterValidData(t,b.getRequiredFields("sanpham")),i=b.checkDuplicates(a,this.rawListSP,b.getUniqueField("sanpham")),n=yield this.showImportConfirmDialog("S\u1EA3n Ph\u1EA9m",this.rawListSP.length,a.length,i);if(!n.confirmed)return;let o=b.prepareSanphamData(a,this.rawListSP,n.overwrite);if(o.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u m\u1EDBi \u0111\u1EC3 import","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let h=this._snackBar.open(`\u0110ang import ${o.length} s\u1EA3n ph\u1EA9m...`,"",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});try{yield this._SanphamService.ImportSanpham(o),h.dismiss(),this._snackBar.open(`Import th\xE0nh c\xF4ng ${o.length} s\u1EA3n ph\u1EA9m${n.overwrite?" (ghi \u0111\xE8)":" (th\xEAm m\u1EDBi)"}!`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{h.dismiss(),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi import s\u1EA3n ph\u1EA9m","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}if(e.khachhang&&e.khachhang.length>0&&this.ListEdit().some(t=>t.value==="khachhang")){let t=b.transformDataForImport(e.khachhang,"khachhang"),a=b.filterValidData(t,b.getRequiredFields("khachhang")),i=b.checkDuplicates(a,this.rawListKH,b.getUniqueField("khachhang")),n=yield this.showImportConfirmDialog("Kh\xE1ch H\xE0ng",this.rawListKH.length,a.length,i);if(!n.confirmed)return;let o=b.prepareKhachhangData(a,this.rawListKH,n.overwrite);if(o.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u m\u1EDBi \u0111\u1EC3 import","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let h=this._snackBar.open(`\u0110ang import ${o.length} kh\xE1ch h\xE0ng...`,"",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});try{yield this._KhachhangService.ImportKhachhang(o),h.dismiss(),this._snackBar.open(`Import th\xE0nh c\xF4ng ${o.length} kh\xE1ch h\xE0ng${n.overwrite?" (ghi \u0111\xE8)":" (th\xEAm m\u1EDBi)"}!`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{h.dismiss(),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi import kh\xE1ch h\xE0ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}if(e.nhacungcap&&e.nhacungcap.length>0&&this.ListEdit().some(t=>t.value==="nhacungcap")){let t=(e.nhacungcap||[]).map(h=>({name:h.name,tenfile:T(h.tenfile.toString()||h.name||""),mancc:h.mancc,diachi:h.diachi,email:h.email,sdt:h.sdt.toString(),ghichu:h.ghichu})).filter(h=>h.mancc!==void 0&&h.mancc!==null&&h.mancc!==""),a=b.checkDuplicates(t,this.rawListNCC,"mancc"),i=yield this.showImportConfirmDialog("Nh\xE0 Cung C\u1EA5p",this.rawListNCC.length,t.length,a);if(!i.confirmed)return;let n=b.prepareNhacungcapData(t,this.rawListNCC,i.overwrite);if(n.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u m\u1EDBi \u0111\u1EC3 import","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let o=this._snackBar.open(`\u0110ang import ${n.length} nh\xE0 cung c\u1EA5p...`,"",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});try{yield this._NhacungcapService.ImportNhacungcap(n),o.dismiss(),this._snackBar.open(`Import th\xE0nh c\xF4ng ${n.length} nh\xE0 cung c\u1EA5p${i.overwrite?" (ghi \u0111\xE8)":" (th\xEAm m\u1EDBi)"}!`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{o.dismiss(),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi import nh\xE0 cung c\u1EA5p","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}if(e.banggia&&e.banggia.length>0&&this.ListEdit().some(t=>t.value==="banggia")){let t=(e.banggia||[]).map(h=>({title:"B\u1EA3ng Gi\xE1 "+h.mabanggia,mabanggia:h.mabanggia,type:h.type,batdau:(0,v.default)(h.batdau,"DD/MM/YYYY").toDate(),ketthuc:(0,v.default)(h.ketthuc,"DD/MM/YYYY").toDate(),ghichu:h.ghichu,status:h.status})).filter(h=>h.mabanggia!==void 0&&h.mabanggia!==null&&h.mabanggia!==""),a=b.checkDuplicates(t,this.rawListBG,"mabanggia"),i=yield this.showImportConfirmDialog("B\u1EA3ng Gi\xE1",this.rawListBG.length,t.length,a);if(!i.confirmed)return;let n=b.prepareBanggiaData(t,this.rawListBG,i.overwrite);if(n.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u m\u1EDBi \u0111\u1EC3 import","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let o=this._snackBar.open(`\u0110ang import ${n.length} b\u1EA3ng gi\xE1...`,"",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});try{yield this._BanggiaService.ImportBanggia(n),o.dismiss(),this._snackBar.open(`Import th\xE0nh c\xF4ng ${n.length} b\u1EA3ng gi\xE1${i.overwrite?" (ghi \u0111\xE8)":" (th\xEAm m\u1EDBi)"}!`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{o.dismiss(),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi import b\u1EA3ng gi\xE1","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}if(e.kho&&e.kho.length>0&&this.ListEdit().some(t=>t.value==="kho")){let t=(e.kho||[]).map(h=>({makho:h.makho?.toString().trim()||"",tenkho:h.tenkho?.toString().trim()||"",diachi:h.diachi?.toString().trim()||"",ghichu:h.ghichu?.toString().trim()||"",status:h.status?.toString().trim()||"active"})).filter(h=>h.makho!==void 0&&h.makho!==null&&h.makho!==""),a=b.checkDuplicates(t,this.rawListKho,"makho"),i=yield this.showImportConfirmDialog("Kho",this.rawListKho.length,t.length,a);if(!i.confirmed)return;let n=b.prepareKhoData(t,this.rawListKho,i.overwrite);if(n.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u m\u1EDBi \u0111\u1EC3 import","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}let o=this._snackBar.open(`\u0110ang import ${n.length} kho...`,"",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});try{let h=n.map(L=>k(this,null,function*(){let F=this.rawListKho.find(N=>N.makho===L.makho);if(F){let N=d(d({},F),L);yield this._KhoService.updateKho(N)}else yield this._KhoService.CreateKho(L)}));yield Promise.all(h),yield this._KhoService.getAllKho(),this.rawListKho=this._KhoService.ListKho(),o.dismiss(),this._snackBar.open(`Import th\xE0nh c\xF4ng ${n.length} kho${a.length>0?` (${a.length} tr\xF9ng l\u1EB7p)`:""}!`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch{o.dismiss(),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi import kho","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}if(e.donhang&&e.donhang.length>0&&this.ListEdit().some(t=>t.value==="donhang")){let t=(e.donhang||[]).map(i=>({ngay:i.ngay,makh:i.makh,mabangia:i.mabangia,masp:i.masp,sldat:Number(i.sldat),slgiao:Number(i.slgiao),slnhan:Number(i.slnhan),ghichu:i.ghichu})).filter(i=>i.makh!==void 0&&i.makh!==null&&i.makh!==""&&i.masp!==void 0&&i.masp!==null&&i.masp!==""),a=this._snackBar.open("\u0110ang import \u0110\u01A1n h\xE0ng...","",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});yield this._DonhangService.ImportDonhang(t),a.dismiss(),this._snackBar.open("Import \u0110\u01A1n h\xE0ng th\xE0nh c\xF4ng!","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}if(e.banggiasanpham&&e.banggiasanpham.length>0&&this.ListEdit().some(t=>t.value==="banggiasanpham")){let t=this.convertBGSPToImport(e.banggiasanpham),a=t.find(n=>n.mabanggia==="giaban");if(!a)return;let i=t.map(n=>{if(n.mabanggia==="giaban")return n;let o=n.sanpham.map(h=>{if(h.giaban==="0"){let L=a.sanpham.find(F=>F.masp===h.masp);return _(d({},h),{giaban:L?L.giaban:h.giaban})}return h});return _(d({},n),{sanpham:o})});yield this._BanggiaService.importSPBG(i)}if(e.banggiakhachhang&&e.banggiakhachhang.length>0&&this.ListEdit().some(t=>t.value==="banggiakhachhang")){console.log("Importing banggiakhachhang data:",e.banggiakhachhang);let t=(e.banggiakhachhang||[]).map(a=>({makh:a.makh,name:a.name,mabanggia:a.mabanggia})).filter(a=>a.mabanggia!==void 0&&a.mabanggia!==null&&a.mabanggia!=="");console.log("Importing ListBGKH data:",t),yield this._KhachhangService.ImportKhachhang(t),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}if(e.nhacungcapsanpham&&e.nhacungcapsanpham.length>0&&this.ListEdit().some(t=>t.value==="nhacungcapsanpham")){let t=this.convertNCCSPToImport(e.nhacungcapsanpham);console.log(t);let a=t.filter(n=>n?.Sanpham?.length>0).map(n=>_(d({},n),{Sanpham:n?.Sanpham?.map(o=>this.rawListSP.find(h=>h?.masp===o))})),i=this._snackBar.open("\u0110ang import Nh\xE0 cung c\u1EA5p s\u1EA3n ph\u1EA9m...","",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});yield this._NhacungcapService.ImportNhacungcap(a),i.dismiss(),this._snackBar.open("Import Nh\xE0 cung c\u1EA5p s\u1EA3n ph\u1EA9m th\xE0nh c\xF4ng!","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}if(e.xuatnhapton&&e.xuatnhapton.length>0&&this.ListEdit().some(t=>t.value==="xuatnhapton")){let t=[],a=[];e.xuatnhapton.forEach(i=>{let n=this.rawListTonkho.find(o=>o.masp===i.masp);n&&(i.slton>n.slton?t.push({sanphamId:this.rawListSP.find(o=>o.masp===i.masp).id,soluong:i.slton-n.slton}):i.slton<n.slton&&a.push({sanphamId:this.rawListSP.find(o=>o.masp===i.masp).id,soluong:n.slton-i.slton}))}),t.length>0&&(yield this._PhieukhoService.CreatePhieukho({title:`\u0110i\u1EC1u Ch\u1EC9nh Kho Ng\xE0y ${(0,v.default)().format("DD/MM/YYYY ")}`,type:"nhap",sanpham:t,ghichu:`C\u1EADp nh\u1EADt t\u1ED3n kho l\xFAc ${(0,v.default)().format("HH:mm:ss DD/MM/YYYY ")}`,ngay:(0,v.default)()}),this._snackBar.open("C\u1EADp nh\u1EADt t\u1ED3n kho th\xE0nh c\xF4ng Th\xEAm phi\u1EBFu Nh\u1EADp Kho","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})),a.length>0&&(yield this._PhieukhoService.CreatePhieukho({title:`\u0110i\u1EC1u Ch\u1EC9nh Kho Ng\xE0y ${(0,v.default)().format("DD/MM/YYYY ")}`,type:"xuat",sanpham:a,ghichu:`C\u1EADp nh\u1EADt t\u1ED3n kho l\xFAc ${(0,v.default)().format("HH:mm:ss DD/MM/YYYY ")}`,ngay:(0,v.default)()}),this._snackBar.open("C\u1EADp nh\u1EADt t\u1ED3n kho th\xE0nh c\xF4ng Th\xEAm phi\u1EBFu Xu\u1EA5t Kho","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})),t.length===0&&a.length===0&&this._snackBar.open("Kho kh\xF4ng thay \u0111\u1ED5i","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}if(e.dathang&&this.ListEdit().some(t=>t.value==="dathang")){let t=(e.dathang||[]).filter(i=>i.mancc&&i.masp).map(i=>({ngaynhan:(0,v.default)(dt(i.ngaynhan)).toDate(),mancc:i.mancc,mabanggia:i.mabanggia,masp:i.masp,sldat:Number(i.sldat),slgiao:Number(i.sldat),slnhan:Number(i.sldat),ghichu:i.ghichu}));console.log(t);let a=this._snackBar.open("\u0110ang import \u0110\u1EB7t h\xE0ng...","",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});yield this._DathangService.ImportDathang(t),a.dismiss(),this._snackBar.open("Import \u0110\u1EB7t h\xE0ng th\xE0nh c\xF4ng!","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}if(e.donhang&&this.ListEdit().some(t=>t.value==="donhang")){let t=(e.donhang||[]).filter(i=>i.makh&&i.masp).map(i=>({ngaygiao:(0,v.default)(dt(i.ngaygiao)).toDate(),makh:i.makh,mabanggia:i.mabangia,masp:i.masp,sldat:Number(i.sldat),slgiao:Number(i.slgiao),slnhan:Number(i.slnhan),ghichu:i.ghichu})),a=this._snackBar.open("\u0110ang import \u0110\u01A1n h\xE0ng...","",{horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});yield this._DonhangService.ImportDonhang(t),a.dismiss(),this._snackBar.open("Import \u0110\u01A1n h\xE0ng th\xE0nh c\xF4ng!","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}})}trackByFn(e,t){return t.id||e}filterDataByDateRange(e,t="createdAt"){if(!e||!Array.isArray(e))return[];let a=new Date(this.batdau);a.setHours(0,0,0,0);let i=new Date(this.ketthuc);return i.setHours(23,59,59,999),e.filter(n=>{if(!n[t])return!0;let o;if(typeof n[t]=="string")o=new Date(n[t]);else if(n[t]instanceof Date)o=n[t];else return!0;return o>=a&&o<=i})}getFilteredExportData(){let e={batdau:this.batdau,ketthuc:this.ketthuc,dateRange:`${this.batdau.toLocaleDateString("vi-VN")} - ${this.ketthuc.toLocaleDateString("vi-VN")}`};return{ListSP:this.rawListSP,ListKH:this.rawListKH,ListNCC:this.rawListNCC,ListBG:this.rawListBG,ListDH:this.filterDataByDateRange(this.rawListDH,"ngaygiao"),ListDathang:this.filterDataByDateRange(this.rawListDathang,"ngaynhan"),ListTonkho:this.filterDataByDateRange(this.rawListTonkho,"createdAt"),ListKho:this.filterDataByDateRange(this.rawListKho,"createdAt"),dateInfo:e}}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=O({type:s,selectors:[["app-listimportdata"]],viewQuery:function(t,a){if(t&1&&(H($t,5),H(Ot,5),H(Ra,7)),t&2){let i;G(i=j())&&(a.paginator=i.first),G(i=j())&&(a.sort=i.first),G(i=j())&&(a.drawer=i.first)}},decls:73,vars:42,consts:[["dateRangePicker",""],["uploadfile",""],["dataContent",""],["noData",""],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"col-span-full","mb-6","p-6","bg-white","rounded-lg","shadow-sm","border"],[1,"flex","flex-col","items-center","gap-4"],[1,"flex","flex-col","lg:flex-row","lg:items-center","gap-4"],[1,"flex","flex-col","lg:flex-row","items-center","gap-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","lg:w-auto"],[3,"rangePicker"],["matStartDate","","placeholder","T\u1EEB ng\xE0y",3,"ngModelChange","dateChange","ngModel","ngModelOptions","disabled"],["matEndDate","","placeholder","\u0110\u1EBFn ng\xE0y",3,"ngModelChange","dateChange","ngModel","ngModelOptions","disabled"],["matIconSuffix","",3,"for"],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply","",3,"click"],["mat-raised-button","","color","primary",1,"h-14",3,"click","disabled"],[1,"mr-2"],[1,"flex","flex-wrap","gap-2"],[1,"text-sm","text-gray-600","mr-2","self-center"],["mat-button","",1,"text-sm",3,"click","disabled"],[1,"mt-4","p-3","bg-blue-50","rounded-lg","border","border-blue-200"],[1,"flex","items-center","space-x-2"],[1,"text-blue-600"],[1,"text-blue-700","font-medium"],[1,"flex","flex-col","space-y-2","p-8"],[1,"flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],["class","ml-1",4,"ngIf"],["type","file","accept",".xlsx,.xls",1,"hidden",3,"change","disabled"],["class","w-full p-4 bg-blue-50 rounded-lg border border-blue-200",4,"ngIf"],[1,"grid","grid-cols-3","gap-4"],[3,"class","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","flex","flex-col","space-y-2","p-8"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40","disabled:bg-gray-100","disabled:cursor-not-allowed",3,"keyup","disabled"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","flex","flex-col","items-center","space-y-4"],["diameter","50","mode","indeterminate"],[1,"text-lg","font-medium"],[1,"flex","items-center"],["diameter","20","mode","indeterminate",1,"mr-2"],[1,"ml-1"],[1,"w-full","p-4","bg-blue-50","rounded-lg","border","border-blue-200"],["diameter","20","mode","indeterminate"],[1,"text-blue-700"],[3,"click"],[1,"w-full","flex","flex-col","space-y-2"],["class","w-full flex flex-row space-x-2 items-center border p-4 rounded-lg bg-gray-100 animate-pulse",4,"ngFor","ngForOf"],[1,"w-full","flex","flex-row","space-x-2","items-center","border","p-4","rounded-lg","bg-gray-100","animate-pulse"],[1,"rounded-lg","p-2","bg-gray-300","w-16","h-8"],[1,"bg-gray-300","h-4","w-1/3","rounded"],[1,"bg-gray-300","h-3","w-1/2","rounded"],[3,"class",4,"ngFor","ngForOf"],[1,"rounded-lg","p-2","bg-blue-100"],[1,"text-sm","text-gray-600"],[1,"w-full","flex","flex-row","items-center","justify-center","border","p-4","rounded-lg","bg-gray-100"],[1,"text-gray-600"]],template:function(t,a){if(t&1){let i=A();c(0,"div",4),E(1,$a,5,1,"div",5),c(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"mat-form-field",10)(7,"mat-label"),p(8,"Ch\u1ECDn kho\u1EA3ng th\u1EDDi gian"),l(),c(9,"mat-date-range-input",11)(10,"input",12),$("ngModelChange",function(o){return f(i),V(a.batdau,o)||(a.batdau=o),y(o)}),S("dateChange",function(){return f(i),y(a.onDateChange())}),l(),c(11,"input",13),$("ngModelChange",function(o){return f(i),V(a.ketthuc,o)||(a.ketthuc=o),y(o)}),S("dateChange",function(){return f(i),y(a.onDateChange())}),l()(),M(12,"mat-datepicker-toggle",14),c(13,"mat-date-range-picker",null,0)(15,"mat-datepicker-actions")(16,"button",15),p(17,"H\u1EE7y"),l(),c(18,"button",16),S("click",function(){return f(i),y(a.applyDateFilter())}),p(19,"\xC1p d\u1EE5ng"),l()()()(),c(20,"button",17),S("click",function(){return f(i),y(a.applyDateFilter())}),c(21,"mat-icon",18),p(22,"refresh"),l(),p(23," L\xE0m m\u1EDBi "),l()()(),c(24,"div",19)(25,"span",20),p(26,"Ch\u1ECDn nhanh:"),l(),c(27,"button",21),S("click",function(){return f(i),y(a.setDateRange("today"))}),p(28," H\xF4m nay "),l(),c(29,"button",21),S("click",function(){return f(i),y(a.setDateRange("yesterday"))}),p(30," H\xF4m qua "),l(),c(31,"button",21),S("click",function(){return f(i),y(a.setDateRange("last7days"))}),p(32," 7 ng\xE0y qua "),l(),c(33,"button",21),S("click",function(){return f(i),y(a.setDateRange("last30days"))}),p(34," 30 ng\xE0y qua "),l(),c(35,"button",21),S("click",function(){return f(i),y(a.setDateRange("thisMonth"))}),p(36," Th\xE1ng n\xE0y "),l(),c(37,"button",21),S("click",function(){return f(i),y(a.setDateRange("lastMonth"))}),p(38," Th\xE1ng tr\u01B0\u1EDBc "),l()()(),c(39,"div",22)(40,"div",23)(41,"mat-icon",24),p(42,"date_range"),l(),c(43,"span",25),p(44),mt(45,"date"),mt(46,"date"),l()()()(),c(47,"div",26)(48,"div",27)(49,"button",28),S("click",function(){return f(i),y(a.ExportExcel(a.TitleExport))}),E(50,Ya,2,0,"span",29)(51,Oa,3,0,"span",30)(52,Ha,2,0,"mat-icon",31),l(),c(53,"button",28),S("click",function(){f(i);let o=z(60);return y(o.click())}),E(54,Ga,2,0,"span",29)(55,ja,3,0,"span",30)(56,qa,2,0,"mat-icon",31),l(),c(57,"button",28),S("click",function(){return f(i),y(a.toggleAll())}),p(58," Ch\u1ECDn T\u1EA5t C\u1EA3 "),l(),c(59,"input",32,1),S("change",function(o){return f(i),y(a.ImportExcel(o))}),l()(),E(61,Ua,5,1,"div",33),c(62,"div",34),E(63,Qa,4,7,"span",35),l()(),c(64,"div",36)(65,"div",37)(66,"input",38),S("keyup",function(o){return f(i),y(a.applyFilter(o))}),l(),c(67,"div",39)(68,"span",40),p(69,"search"),l()()(),E(70,Ja,3,2,"ng-container",41)(71,ee,3,2,"ng-template",null,2,gt),l()()}if(t&2){let i=z(14),n=z(72);m(),g("ngIf",a.isLoading()||a.isImporting()||a.isExporting()),m(8),g("rangePicker",i),m(),R("ngModel",a.batdau),g("ngModelOptions",q(40,fa))("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(),R("ngModel",a.ketthuc),g("ngModelOptions",q(41,fa))("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(),g("for",i),m(8),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(7),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(7),St(" \u0110ang hi\u1EC3n th\u1ECB d\u1EEF li\u1EC7u t\u1EEB ",pt(45,34,a.batdau,"dd/MM/yyyy")," \u0111\u1EBFn ",pt(46,37,a.ketthuc,"dd/MM/yyyy")," "),m(5),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(),g("ngIf",!a.isExporting()),m(),g("ngIf",a.isExporting()),m(),g("ngIf",!a.isExporting()),m(),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(),g("ngIf",!a.isImporting()),m(),g("ngIf",a.isImporting()),m(),g("ngIf",!a.isImporting()),m(),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(2),g("ngIf",a.isLoading()),m(2),g("ngForOf",a.ListImportType())("ngForTrackBy",a.trackByFn),m(3),g("disabled",a.isLoading()||a.isImporting()||a.isExporting()),m(4),g("ngIf",a.isLoading())("ngIfElse",n)}},dependencies:[Kt,Nt,Tt,Ft,At,Gt,Ht,Yt,Lt,It,at,tt,J,X,zt,Q,U,W,vt,nt,xt,et,it,Vt,rt,oa,ra,ea,Ut,Wt,Qt,Xt,Jt,aa,ta,Zt,Ct],encapsulation:2,changeDetection:0})};export{ot as a,ya as b};
