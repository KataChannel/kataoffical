import './polyfills.server.mjs';
import{a as Ct}from"./chunk-KB6T2C2W.mjs";import{a as xt}from"./chunk-5IGIVQ3I.mjs";import{a as ft}from"./chunk-7OLVCWKX.mjs";import{a as _t,b as ht}from"./chunk-DGIE6FTP.mjs";import{a as gt}from"./chunk-OD5WLG7F.mjs";import"./chunk-GJ4NKHBL.mjs";import{a as ut}from"./chunk-FEJ5N7SF.mjs";import{a as B,b as lt}from"./chunk-RHSABDND.mjs";import{a as A,b as st,c as ct}from"./chunk-COSQG4OV.mjs";import"./chunk-GBWCUV22.mjs";import{b as mt,f as pt,g as dt}from"./chunk-POE2MFM3.mjs";import"./chunk-UBJTQR5H.mjs";import{a as bt}from"./chunk-MGIVCIKU.mjs";import"./chunk-7R3XH5DT.mjs";import{b as Ae,d as $e,e as Ne}from"./chunk-4AA42E7K.mjs";import{a as Ge}from"./chunk-26NM6QMQ.mjs";import{a as he,b as ge,c as fe}from"./chunk-2WVZEUAT.mjs";import{a as ye,b as ve,c as Se,d as we}from"./chunk-WRSBCCBG.mjs";import{a as qe,b as Oe,c as Re,k as He}from"./chunk-MENNXLFS.mjs";import{b as le,d as se}from"./chunk-HQVYZIQD.mjs";import{a as Qe,b as je,c as We,e as Je,f as Ze,h as Xe,i as Ye,k as Ue,l as et,n as tt,o as it,p as nt,q as at}from"./chunk-KKZPVVZF.mjs";import"./chunk-JGIKJIHL.mjs";import{a as ze,b as Ke}from"./chunk-22BMP7OA.mjs";import"./chunk-GS6F3HBF.mjs";import"./chunk-6EFOJMAD.mjs";import"./chunk-EUVDKCNO.mjs";import{a as ot,b as rt}from"./chunk-JPZMWWYO.mjs";import{b as Be}from"./chunk-SNL6NQRQ.mjs";import{b as Pe,c as Le}from"./chunk-HXEL4YEF.mjs";import{B as Me,C as Ie,b as Ee,g as be,j as Te,s as Ve,u as Fe,x as De,y as ke}from"./chunk-67NKMS7C.mjs";import"./chunk-SU2HN6EZ.mjs";import{a as xe,b as Ce}from"./chunk-Z6WUDYX6.mjs";import{a as _e}from"./chunk-AKVYLSG6.mjs";import"./chunk-23D4RJ7E.mjs";import"./chunk-QY26ANMS.mjs";import{a as pe,c as de,e as ue}from"./chunk-LQWFEOWT.mjs";import{y as ce,z as me}from"./chunk-YS2PDZ6Q.mjs";import"./chunk-7T6LZHUD.mjs";import"./chunk-SYOYXCNA.mjs";import{m as te,n as ie,o as ne,u as ae,x as oe,z as re}from"./chunk-EYW3XZCQ.mjs";import{Ac as I,Bc as P,Cc as L,Fb as Q,Fc as b,Gc as m,Hc as T,Ic as y,Lc as O,Mb as C,Mc as R,Nc as H,Pc as z,Qc as Y,Uc as U,Vc as v,Xb as j,Xc as S,Yb as p,ac as W,cc as k,ec as J,fc as G,gc as q,hc as o,ic as r,jc as x,kc as Z,lc as X,nc as E,pa as F,sc as g,tb as c,uc as s,wd as ee,ya as u,za as _}from"./chunk-LL6B6DB7.mjs";import"./chunk-XAZRL6IZ.mjs";import{a as $,g as Et,h as N,j as f}from"./chunk-RIAI3ORJ.mjs";var K=Et(bt());var Tt=["drawer"],yt=()=>({standalone:!0}),Vt=n=>[50,100,n],Ft=(n,i,e,t,a)=>({"text-blue-500":n,"text-yellow-500":i,"text-green-500":e,"text-purple-500":t,"text-red-500":a}),Dt=(n,i)=>i.key;function kt(n,i){n&1&&x(0,"mat-progress-bar",29)}function Mt(n,i){if(n&1&&(o(0,"div",30)(1,"span",31),m(2,"L\u1ED7i:"),r(),m(3),r()),n&2){let e=s();c(3),y(" ",e.error()," ")}}function It(n,i){if(n&1){let e=E();o(0,"button",48),g("click",function(a){let l=u(e).$implicit;return s(2).toggleColumn(l),_(a.stopPropagation())}),o(1,"mat-icon"),m(2),r(),o(3,"span"),m(4),r()()}if(n&2){let e=i.$implicit;c(2),T(e.isShow?"check_box":"check_box_outline_blank"),c(2),T(e.value)}}function Pt(n,i){n&1&&(o(0,"span",49),m(1,"(\u0110ang t\u1EA3i...)"),r())}function Lt(n,i){if(n&1){let e=E();o(0,"div",32)(1,"div",33)(2,"button",34)(3,"mat-icon"),m(4,"tune"),r()(),o(5,"mat-menu",null,3)(7,"div",35)(8,"mat-form-field",36)(9,"input",37),g("input",function(a){u(e);let l=s();return _(l.doFilterColumns(a))})("click",function(a){return u(e),_(a.stopPropagation())}),r(),o(10,"mat-icon",38),m(11,"search"),r()()(),o(12,"div",39),G(13,It,5,2,"button",40,Dt),r()(),o(15,"button",41),g("click",function(){u(e);let a=s();return _(a.isSearch=!a.isSearch)}),o(16,"mat-icon"),m(17,"search"),r()(),o(18,"button",42),g("click",function(){u(e);let a=s();return _(a.exportVandonToExcel())}),o(19,"mat-icon"),m(20,"file_download"),r()(),o(21,"input",43,4),g("change",function(a){u(e);let l=s();return _(l.ImportPhieuChuyenExcel(a))}),r(),o(23,"button",44),g("click",function(){u(e);let a=b(22);return _(a.click())}),o(24,"mat-icon"),m(25,"file_upload"),r()(),o(26,"input",45,5),g("change",function(a){u(e);let l=s();return _(l.ImporExcel(a))}),r(),o(28,"span",46),m(29),C(30,Pt,2,0,"span",47),r()()()}if(n&2){let e=b(6),t=s();c(2),p("matMenuTriggerFor",e),c(11),q(t.FilterColumns),c(5),p("disabled",t.loading()),c(5),p("disabled",t.loading()),c(6),y(" ",t.CountItem," \u0110\u01A1n H\xE0ng "),c(),p("ngIf",t.loading())}}function Bt(n,i){if(n&1){let e=E();o(0,"div",50)(1,"mat-form-field",36)(2,"mat-label"),m(3,"T\xECm Ki\u1EBFm"),r(),o(4,"input",51),g("keyup",function(a){u(e);let l=s();return _(l.applyFilter(a))}),r()(),o(5,"button",52),g("click",function(){u(e);let a=s();return _(a.isSearch=!a.isSearch)}),o(6,"mat-icon"),m(7,"cancel"),r()()()}}function At(n,i){n&1&&x(0,"mat-spinner",19)}function $t(n,i){n&1&&(o(0,"mat-icon"),m(1,"search"),r())}function Nt(n,i){if(n&1){let e=E();o(0,"div",21)(1,"mat-icon",53),m(2,"search"),r(),o(3,"h3",54),m(4,"Ch\u01B0a c\xF3 d\u1EEF li\u1EC7u"),r(),o(5,"p",55),m(6," Vui l\xF2ng ch\u1ECDn th\u1EDDi gian t\xECm ki\u1EBFm"),x(7,"br"),m(8," v\xE0 nh\u1EA5n n\xFAt "),o(9,"strong",56),m(10,"T\xECm Ki\u1EBFm"),r(),m(11," \u0111\u1EC3 t\u1EA3i d\u1EEF li\u1EC7u v\u1EADn \u0111\u01A1n "),r(),o(12,"button",57),g("click",function(){u(e);let a=s();return _(a.searchData())}),o(13,"mat-icon"),m(14,"search"),r(),o(15,"span",58),m(16,"T\xECm Ki\u1EBFm Ngay"),r()()()}}function Gt(n,i){n&1&&(o(0,"div",59)(1,"div",60),x(2,"mat-spinner",61),o(3,"p",62),m(4,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u..."),r()()())}function qt(n,i){if(n&1&&(o(0,"span",80),m(1),v(2,"date"),r()),n&2){let e=s().$implicit,t=s(2).$implicit;c(),T(S(2,1,e[t],"dd/MM/yyyy"))}}function Ot(n,i){if(n&1&&(o(0,"span",80),m(1),v(2,"date"),r()),n&2){let e=s().$implicit,t=s(2).$implicit;c(),T(S(2,1,e[t],"dd/MM/yyyy"))}}function Rt(n,i){if(n&1&&(o(0,"span",80),m(1),v(2,"number"),r()),n&2){let e=s().$implicit,t=s(2).$implicit;c(),T(S(2,1,e[t],"1.0-0"))}}function Ht(n,i){if(n&1&&(o(0,"span",80),m(1),v(2,"number"),r()),n&2){let e=s().$implicit,t=s(2).$implicit;c(),T(S(2,1,e[t],"1.0-0"))}}function zt(n,i){if(n&1&&(o(0,"span",80),m(1),r()),n&2){let e=s().$implicit,t=s(2).$implicit;c(),T(e[t]||"Tr\u1ED1ng")}}function Kt(n,i){if(n&1){let e=E();o(0,"div",78),g("click",function(){let a=u(e).$implicit,l=s(2).$implicit,d=s();return _(d.ChosenItem(a,l))}),x(1,"input",79),o(2,"span"),C(3,qt,3,4,"span",80)(4,Ot,3,4,"span",80)(5,Rt,3,4,"span",80)(6,Ht,3,4,"span",80)(7,zt,2,1,"span",80),r()()}if(n&2){let e,t=i.$implicit,a=s(2).$implicit,l=s();c(),p("checked",l.CheckItem(t)),c(2),k((e=a)==="ngaygiao"?3:e==="ngaydat"?4:e==="tongtien"?5:e==="thanhtien"?6:7)}}function Qt(n,i){if(n&1){let e=E();o(0,"th",65)(1,"span",66),m(2),r(),o(3,"span",67,6),m(5," filter_alt "),r(),o(6,"mat-menu",null,3)(8,"div",68),g("click",function(a){return u(e),_(a.stopPropagation())}),o(9,"input",69),g("keyup",function(a){u(e);let l=s().$implicit,d=s();return _(d.doFilterHederColumn(a,l))}),r(),o(10,"span",70),g("click",function(){u(e);let a=s().$implicit,l=s();return _(l.ChosenAll(l.FilterHederColumn(l.dataSource().filteredData,a)))}),m(11,"Ch\u1ECDn T\u1EA5t C\u1EA3"),r(),o(12,"span",71),g("click",function(){u(e);let a=s(2);return _(a.EmptyFiter())}),m(13,"B\u1ECF Ch\u1ECDn T\u1EA5t C\u1EA3"),r(),o(14,"span",72),g("click",function(){u(e);let a=s(2);return _(a.ResetFilter())}),m(15,"Reset"),r(),o(16,"div",73),C(17,Kt,8,2,"div",74),r(),o(18,"div",75)(19,"button",76),g("click",function(){u(e);let a=b(4),l=s(2);return _(l.ApplyFilterColum(a))}),m(20,"\xC1p D\u1EE5ng"),r(),o(21,"button",77),g("click",function(){u(e);let a=b(4);return _(a.closeMenu())}),m(22,"\u0110\xF3ng"),r()()()()()}if(n&2){let e=b(7),t=s().$implicit,a=s();c(2),y(" ",a.ColumnName[t]," "),c(),p("matMenuTriggerFor",e),c(14),p("ngForOf",a.FilterHederColumn(a.dataSource().filteredData,t))("ngForTrackBy",a.trackByFn)}}function jt(n,i){if(n&1&&(o(0,"span",82),m(1),r()),n&2){let e=s().index;c(),y(" ",e+1," ")}}function Wt(n,i){if(n&1&&(o(0,"span",82),m(1),v(2,"date"),r()),n&2){let e=s().$implicit,t=s().$implicit;c(),y(" ",S(2,1,e[t],"dd/MM/yyyy")," ")}}function Jt(n,i){if(n&1&&(o(0,"span",83),m(1),r()),n&2){let e=s().$implicit,t=s().$implicit,a=s();p("ngClass",U(2,Ft,e[t]==="dadat",e[t]==="dagiao",e[t]==="danhan",e[t]==="hoanthanh",e[t]==="huy")),c(),y(" ",a.Trangthaidon[e[t]]," ")}}function Zt(n,i){if(n&1&&(o(0,"span",84),m(1),v(2,"number"),r()),n&2){let e=s().$implicit,t=s().$implicit;c(),y(" ",S(2,1,e[t],"1.0-2")," ")}}function Xt(n,i){if(n&1&&(o(0,"span",85),m(1),v(2,"number"),r()),n&2){let e=s().$implicit,t=s().$implicit;c(),y(" ",S(2,1,e[t],"1.0-2")," ")}}function Yt(n,i){if(n&1&&(o(0,"span",86),m(1),v(2,"number"),r()),n&2){let e=s().$implicit,t=s().$implicit;c(),y(" ",S(2,1,e[t],"1.0-2")," ")}}function Ut(n,i){if(n&1&&(o(0,"span",82),m(1),r()),n&2){let e=s().$implicit,t=s().$implicit;c(),y(" ",e[t]," ")}}function ei(n,i){if(n&1&&(o(0,"td",81),C(1,jt,2,1,"span",82)(2,Wt,3,4,"span",82)(3,Jt,2,8,"span",83)(4,Zt,3,4,"span",84)(5,Xt,3,4,"span",85)(6,Yt,3,4,"span",86)(7,Ut,2,1,"span",82),r()),n&2){let e,t=s().$implicit;c(),k((e=t)==="STT"?1:e==="ngaygiao"?2:e==="status"?3:e==="sldat"?4:e==="slgiao"?5:e==="slnhan"?6:7)}}function ti(n,i){if(n&1&&(Z(0,24),C(1,Qt,23,4,"th",63)(2,ei,8,1,"td",64),X()),n&2){let e=i.$implicit;p("matColumnDef",e)}}function ii(n,i){n&1&&x(0,"tr",87)}function ni(n,i){if(n&1&&x(0,"tr",88),n&2){let e=i.$implicit,t=s();W("hover:bg-slate-100 ",t.donhangId()==e.id?"!bg-slate-200":"",""),j("data-id",e.id)}}function ai(n,i){n&1&&(o(0,"div",91),x(1,"mat-spinner",92),o(2,"p",93),m(3,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u..."),r()())}function oi(n,i){n&1&&m(0," Kh\xF4ng t\xECm th\u1EA5y ")}function ri(n,i){if(n&1&&(o(0,"tr",89)(1,"td",90),C(2,ai,4,0,"div",91)(3,oi,1,0),r()()),n&2){let e=s();c(2),k(e.loading()?2:3)}}var M=class M{DateHelpers=Ct;Detail={};displayedColumns=["madonhang","khachhang","title","dvt","sldat","slgiao","slnhan","ngaygiao","status"];ColumnName={madonhang:"M\xE3 \u0110\u01A1n H\xE0ng",khachhang:"Kh\xE1ch H\xE0ng",diachi:"\u0110\u1ECBa Ch\u1EC9",sdt:"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",status:"Tr\u1EA1ng Th\xE1i",masp:"M\xE3 S\u1EA3n Ph\u1EA9m",title:"T\xEAn S\u1EA3n Ph\u1EA9m",giagoc:"Gi\xE1 G\u1ED1c",giaban:"Gi\xE1 B\xE1n",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slgiao:"SL Giao",slnhan:"SL Nh\u1EADn",slhuy:"SL H\u1EE7y",ttdat:"TT \u0110\u1EB7t",ttgiao:"TT Giao",ttnhan:"TT Nh\u1EADn",ttsauvat:"TT Sau VAT",vat:"VAT (%)",order:"Th\u1EE9 T\u1EF1",ghichu:"Ghi Ch\xFA",ngaygiao:"Ng\xE0y Giao",shipper:"Shipper",phieuve:"Phi\u1EBFu V\u1EC1",giodi:"Gi\u1EDD \u0110i",giove:"Gi\u1EDD V\u1EC1",kynhan:"K\xFD Nh\u1EADn"};FilterColumns=JSON.parse(localStorage.getItem("VandonColFilter")||"[]");Columns=[];Trangthaidon=xt;isFilter=!1;paginator;sort;drawer;filterValues={};_DonhangGraphqlService=F(ft);_DonhangService=F(gt);_breakpointObserver=F(ce);_GoogleSheetService=F(ut);_router=F(se);_snackBar=F(_e);dataSource=ee(()=>{let i=new at(this.Listvandon);return i.filterPredicate=this.createFilter(),this.sort&&(i.sort=this.sort),i});donhangId=this._DonhangGraphqlService.donhangId;loading=this._DonhangGraphqlService.loading;error=this._DonhangGraphqlService.error;CountItem=0;SearchParams={Batdau:(0,K.default)().startOf("day").toDate(),Ketthuc:(0,K.default)().endOf("day").toDate(),pageSize:9999};ListDate=[{id:1,Title:"1 Ng\xE0y",value:"day"},{id:2,Title:"1 Tu\u1EA7n",value:"week"},{id:3,Title:"1 Th\xE1ng",value:"month"},{id:4,Title:"1 N\u0103m",value:"year"}];Chonthoigian="day";isSearch=!1;constructor(){this.displayedColumns.forEach(i=>{this.filterValues[i]=""})}get Listvandon(){return this._DonhangGraphqlService.ListVandon()}searchData(){return f(this,null,function*(){yield this.loadData()})}onSelectionChange(i){}onDateChange(i){}createFilter(){return(i,e)=>{let t=JSON.parse(e),a=!0;return this.displayedColumns.forEach(l=>{if(t[l]){let d=i[l]?i[l].toString().toLowerCase():"";a=a&&d.includes(t[l].toLowerCase())}}),a}}applyFilter(i){let e=i.target.value;this.dataSource().filter=e.trim().toLowerCase(),this.dataSource().paginator&&this.dataSource()?.paginator?.firstPage()}ngOnInit(){return f(this,null,function*(){this.initializeColumns(),this.setupDrawer(),this.paginator&&(this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"),yield this.loadData()})}loadData(){return f(this,null,function*(){try{setTimeout(()=>f(this,null,function*(){yield this._DonhangGraphqlService.searchDonhang(this.SearchParams),yield this._DonhangService.Phieuchuyen(this.SearchParams),this.CountItem=this._DonhangGraphqlService.ListDonhang().length,requestAnimationFrame(()=>{let i=this.dataSource();i.data=this.Listvandon,i.paginator=this.paginator})}),0)}catch(i){console.error("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u:",i)}})}refresh(){return f(this,null,function*(){yield this._DonhangGraphqlService.searchDonhang(this.SearchParams),yield this._DonhangService.Phieuchuyen(this.SearchParams)})}initializeColumns(){let i=["madonhang","khachhang","title","dvt","sldat","slgiao","slnhan","ngaygiao","status"];this.Columns=i.map(e=>({key:e,value:this.ColumnName[e],isShow:this.displayedColumns.includes(e)})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:(this.FilterColumns=this.FilterColumns.filter(e=>i.includes(e.key)),localStorage.setItem("VandonColFilter",JSON.stringify(this.FilterColumns))),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDrawer(){this._breakpointObserver.observe([me.Handset]).subscribe(i=>{i.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(i){let e=this.FilterColumns.find(t=>t.key===i.key);e&&(e.isShow=!e.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,e)=>(e.isShow&&(i[e.key]=e.value),i),{}),localStorage.setItem("VandonColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let e=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(t=>t.value.toLowerCase().includes(e))}LoadDrive(){return f(this,null,function*(){let i={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"SPImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(i),t=Ae(e.values);console.log(t),this.DoImportData(t)})}DoImportData(i){console.log(i);let t=i.map(h=>({title:h.title?.trim()||"",masp:h.masp?.trim()||"",slug:`${$e(h?.title?.trim()||"")}_${Ne(5,!1)}`,giagoc:Number(h.giagoc)||0,dvt:h.dvt||"",soluong:Number(h.soluong)||0,soluongkho:Number(h.soluongkho)||0,ghichu:h.ghichu||"",order:Number(h.order)||0})).filter((h,w,V)=>w===V.findIndex(wt=>wt.masp===h.masp)),a=t.map(h=>h.masp),l=this._DonhangGraphqlService.ListDonhang().map(h=>h.masp),d=a.filter(h=>!l.includes(h)),D=t.map(h=>f(this,null,function*(){let w=this._DonhangGraphqlService.ListDonhang().find(V=>V.masp===h.masp);if(w){let V=$($({},w),h);yield this._DonhangGraphqlService.updateDonhang(V)}else yield this._DonhangGraphqlService.CreateDonhang(h)})),St=d.map(h=>f(this,null,function*(){let w=this._DonhangGraphqlService.ListDonhang().find(V=>V.masp===h);w&&(w.isActive=!1,yield this._DonhangGraphqlService.updateDonhang(w))}));Promise.all([...D,...St]).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ImporExcel(i){return f(this,null,function*(){let e=yield pt(i);this.DoImportData(e)})}ImportPhieuChuyenExcel(i){return f(this,null,function*(){let e=Date.now();try{this._snackBar.open("\u{1F4C2} \u0110ang \u0111\u1ECDc file Excel...","",{duration:void 0,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-info"]});let t=yield dt(i,"Phi\u1EBFu Chuy\u1EC3n");if(!t||t.length===0){this._snackBar.open("\u26A0\uFE0F File kh\xF4ng c\xF3 d\u1EEF li\u1EC7u","\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}console.log(`[IMPORT] \u0110\u1ECDc \u0111\u01B0\u1EE3c ${t.length} d\xF2ng t\u1EEB Excel`);let a=yield this._DonhangGraphqlService.importPhieuChuyenFromExcel(t),l=((Date.now()-e)/1e3).toFixed(1);yield this.refresh(),console.log(`[IMPORT] Ho\xE0n th\xE0nh trong ${l}s:`,a)}catch(t){console.error("[IMPORT] Error:",t),this._snackBar.open(`\u274C ${t.message||"L\u1ED7i import"}`,"\u0110\xF3ng",{duration:4e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{i.target.value=""}})}ExportExcel(i,e){mt(i,e)}exportVandonToExcel(){return f(this,null,function*(){yield this._DonhangGraphqlService.exportVandonToExcel(this.dataSource().filteredData||this.Listvandon)})}exportAllToExcel(){return f(this,null,function*(){yield this._DonhangGraphqlService.exportVandonToExcel()})}FilterHederColumn(i,e){return!i||i.length===0?[]:i.filter((a,l,d)=>l===d.findIndex(D=>D[e]===a[e])).slice(0,100)}doFilterHederColumn(i,e){if(!this.Listvandon||this.Listvandon.length===0)return;let t=i.target.value.toLowerCase();t.length<2&&t.length>0||requestAnimationFrame(()=>{this.dataSource().filteredData=this.Listvandon.filter(a=>Ge(a[e]||"").toLowerCase().includes(t)||(a[e]||"").toString().toLowerCase().includes(t))})}trackByFn(i,e){return e.id}ListFilter=[];ChosenItem(i,e){if(!this.dataSource().filteredData)return;let t=this.dataSource().filteredData.filter(l=>l[e]===i[e]);this.ListFilter.filter(l=>l[e]===i[e]).length>0?this.ListFilter=this.ListFilter.filter(l=>l[e]!==i[e]):this.ListFilter=[...this.ListFilter,...t]}ChosenAll(i){i&&i.forEach(e=>{!!this.ListFilter.find(a=>a.id===e.id)?this.ListFilter=this.ListFilter.filter(a=>a.id!==e.id):this.ListFilter.push(e)})}ResetFilter(){this.ListFilter=this.Listvandon||[],this.dataSource().data=this.Listvandon||[],this.dataSource().sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(i){return!!this.ListFilter.find(e=>e.id===i.id)}ApplyFilterColum(i){this.ListFilter.length===0?this.dataSource().data=[]:this.dataSource().data=this.Listvandon.filter(e=>this.ListFilter.some(t=>t.id===e.id)),this.dataSource().sort=this.sort,i.closeMenu()}static \u0275fac=function(e){return new(e||M)};static \u0275cmp=Q({type:M,selectors:[["app-vandon"]],viewQuery:function(e,t){if(e&1&&(I(B,5),I(A,5),I(Tt,7)),e&2){let a;P(a=L())&&(t.paginator=a.first),P(a=L())&&(t.sort=a.first),P(a=L())&&(t.drawer=a.first)}},decls:37,vars:30,consts:[["drawer",""],["pickerBatdau",""],["pickerKetthuc",""],["menu","matMenu"],["uploadPhieuChuyen",""],["uploadfile",""],["menuTrigger","matMenuTrigger"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],["mode","indeterminate","color","primary",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","cursor-pointer w-full relative flex lg:flex-row lg:space-y-2 space-y-0 flex-col space-x-2 justify-between items-center p-2 bg-white rounded-lg",4,"ngIf"],["class","py-2 w-full flex flex-row space-x-2 items-center",4,"ngIf"],[1,"w-full","grid","lg:grid-cols-4","grid-cols-2","gap-2","items-center"],[3,"appearance","subscriptSizing"],["matInput","",3,"dateChange","ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],["mat-icon-button","","color","primary","matTooltip","Nh\u1EA5n \u0111\u1EC3 t\u1EA3i d\u1EEF li\u1EC7u v\u1EADn \u0111\u01A1n",1,"!h-12",3,"click","disabled"],["diameter","20"],[1,"w-full","overflow-auto","relative"],[1,"flex","flex-col","items-center","justify-center","p-12","bg-gray-50","rounded-lg"],["class","absolute inset-0 bg-white bg-opacity-75 z-10 flex items-center justify-center",4,"ngIf"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],["mode","indeterminate","color","primary"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"font-bold"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","T\xECm Ki\u1EBFm","color","primary","mat-icon-button","",3,"click"],["matTooltip","Xu\u1EA5t Excel (2 sheet: V\u1EADn \u0111\u01A1n + Phi\u1EBFu chuy\u1EC3n)","mat-icon-button","","color","accent",3,"click","disabled"],["type","file","accept",".xlsx,.xls",1,"hidden",3,"change"],["matTooltip","Import Phi\u1EBFu Chuy\u1EC3n (C\u1EADp nh\u1EADt Shipper, Gi\u1EDD \u0111i/v\u1EC1, v.v.)","mat-icon-button","","color","primary",3,"click","disabled"],["type","file",1,"hidden",3,"change"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["class","ml-2 animate-pulse text-blue-600",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"ml-2","animate-pulse","text-blue-600"],[1,"py-2","w-full","flex","flex-row","space-x-2","items-center"],["matInput","","placeholder","Vui l\xF2ng T\xECm Ki\u1EBFm",3,"keyup"],["mat-icon-button","","color","warn",3,"click"],[1,"!text-6xl","!w-24","!h-24","text-gray-400","mb-4"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"text-gray-500","text-center","mb-4"],[1,"text-blue-600"],["mat-flat-button","","color","primary",3,"click"],[1,"ml-2"],[1,"absolute","inset-0","bg-white","bg-opacity-75","z-10","flex","items-center","justify-center"],[1,"text-center"],["diameter","40"],[1,"mt-2","text-gray-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[1,"z-10","material-symbols-outlined","text-gray-500",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],["type","text","placeholder","Search",1,"rounded","border","px-2","py-1",3,"keyup"],[1,"text-blue-500","hover:underline",3,"click"],[1,"text-red-500","hover:underline",3,"click"],[1,"text-gray-500","hover:underline",3,"click"],[1,"max-h-64","overflow-y-auto"],["class","flex items-center space-x-2 p-2 hover:bg-gray-100 rounded",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","justify-end","space-x-2","pt-2","border-t"],[1,"bg-blue-500","text-white","px-4","py-1","rounded","hover:bg-blue-600",3,"click"],[1,"bg-gray-300","px-4","py-1","rounded","hover:bg-gray-400",3,"click"],[1,"flex","items-center","space-x-2","p-2","hover:bg-gray-100","rounded",3,"click"],["type","checkbox",1,"cursor-pointer",3,"checked"],[1,"whitespace-nowrap"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"max-w-40","line-clamp-4","text-right","text-blue-600"],[1,"max-w-40","line-clamp-4","text-right","text-orange-600"],[1,"max-w-40","line-clamp-4","text-right","text-green-600"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"text-center","py-4"],["diameter","30"],[1,"mt-2"]],template:function(e,t){if(e&1){let a=E();o(0,"mat-drawer-container",7)(1,"mat-drawer",8,0),x(3,"router-outlet"),r(),o(4,"div",9),C(5,kt,1,0,"mat-progress-bar",10)(6,Mt,4,1,"div",11)(7,Lt,31,5,"div",12)(8,Bt,8,0,"div",13),o(9,"div",14)(10,"mat-form-field",15)(11,"mat-label"),m(12,"B\u1EAFt \u0110\u1EA7u"),r(),o(13,"input",16),g("dateChange",function(d){return u(a),_(t.onDateChange(d))}),H("ngModelChange",function(d){return u(a),R(t.SearchParams.Batdau,d)||(t.SearchParams.Batdau=d),_(d)}),r(),x(14,"mat-datepicker-toggle",17)(15,"mat-datepicker",null,1),r(),o(17,"mat-form-field",15)(18,"mat-label"),m(19,"K\u1EBFt Th\xFAc"),r(),o(20,"input",16),g("dateChange",function(d){return u(a),_(t.onDateChange(d))}),H("ngModelChange",function(d){return u(a),R(t.SearchParams.Ketthuc,d)||(t.SearchParams.Ketthuc=d),_(d)}),r(),x(21,"mat-datepicker-toggle",17)(22,"mat-datepicker",null,2),r(),o(24,"button",18),g("click",function(){return u(a),_(t.searchData())}),C(25,At,1,0,"mat-spinner",19)(26,$t,2,0,"mat-icon"),r()(),o(27,"div",20),C(28,Nt,17,0,"div",21)(29,Gt,5,0,"div",22),o(30,"table",23),G(31,ti,3,1,"ng-container",24,J),C(33,ii,1,0,"tr",25)(34,ni,1,4,"tr",26)(35,ri,4,1,"tr",27),r()(),x(36,"mat-paginator",28),r()()}if(e&2){let a=b(16),l=b(23);c(),p("position","end"),c(4),p("ngIf",t.loading()),c(),p("ngIf",t.error()),c(),p("ngIf",!t.isSearch),c(),p("ngIf",t.isSearch),c(2),p("appearance","outline")("subscriptSizing","dynamic"),c(3),p("matDatepicker",a),O("ngModel",t.SearchParams.Batdau),p("ngModelOptions",z(26,yt)),c(),p("for",a),c(3),p("appearance","outline")("subscriptSizing","dynamic"),c(3),p("matDatepicker",l),O("ngModel",t.SearchParams.Ketthuc),p("ngModelOptions",z(27,yt)),c(),p("for",l),c(3),p("disabled",t.loading()),c(),k(t.loading()?25:26),c(3),k(!t.loading()&&t.Listvandon.length===0?28:-1),c(),p("ngIf",t.loading()),c(),p("dataSource",t.dataSource()),c(),q(t.displayedColumns),c(2),p("matHeaderRowDef",t.displayedColumns),c(),p("matRowDefColumns",t.displayedColumns),c(2),p("pageSizeOptions",Y(28,Vt,t.dataSource().data.length))("pageSize",50)}},dependencies:[Ie,Me,Fe,De,ke,Le,Pe,nt,Qe,We,Ye,Je,je,Ue,Ze,Xe,et,tt,it,ct,A,st,lt,B,we,ve,ye,Se,fe,he,ge,le,Ce,xe,ue,pe,de,Be,re,te,ie,ne,oe,ae,Ve,Ee,be,Te,rt,ot,He,qe,Oe,Re,Ke,ze,ht,_t],encapsulation:2,changeDetection:0})};N([li()],M.prototype,"FilterHederColumn",1),N([si(500)],M.prototype,"doFilterHederColumn",1);var vt=M;function li(){return function(n,i,e){let t=e.value,a=new Map;return e.value=function(...l){let d=JSON.stringify(l);if(a.has(d))return a.get(d);let D=t.apply(this,l);return a.set(d,D),D},e}}function si(n=300){return function(i,e,t){let a=t.value,l;return t.value=function(...d){clearTimeout(l),l=setTimeout(()=>{a.apply(this,d)},n)},t}}export{vt as VandonComponent};
