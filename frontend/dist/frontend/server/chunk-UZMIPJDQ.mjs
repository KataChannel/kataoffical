import './polyfills.server.mjs';
import{a as it,b as nt}from"./chunk-4CHKK7DO.mjs";import{a as et}from"./chunk-UKT5JAVP.mjs";import"./chunk-N7E3W7IB.mjs";import{a as tt}from"./chunk-D6ZTYSBE.mjs";import{a as Xe}from"./chunk-FXG3QSOC.mjs";import"./chunk-73IBRO6I.mjs";import{a as Te}from"./chunk-DHMJTHFT.mjs";import"./chunk-N7WAOINW.mjs";import{a as Je,b as Ze}from"./chunk-CT4PDFXG.mjs";import{a as Ye}from"./chunk-4Q4M2Y7U.mjs";import{a as Ie,b as Fe}from"./chunk-BYHP6Y2D.mjs";import{a as A,b as Le,c as Ve}from"./chunk-72Z7B4L4.mjs";import{c as Pe,d as Ae,e as Oe,g as Ke,h as Ne,j as Ue,k as Re,m as He,n as We,p as ze,q as Ge,r as qe,s as $e}from"./chunk-O5QB3POD.mjs";import"./chunk-7AX3QXDA.mjs";import{a as Ee,b as ve,c as Me,k as ke}from"./chunk-IIJ7BPZV.mjs";import{h as Ce}from"./chunk-VVGSYJK4.mjs";import{b as we,d as Se}from"./chunk-4AA42E7K.mjs";import"./chunk-26NM6QMQ.mjs";import"./chunk-VKZDLN2B.mjs";import{d as _e}from"./chunk-ZYVGB4QF.mjs";import{a as X,b as xe}from"./chunk-LMINGIR7.mjs";import{b as ye,c as Be}from"./chunk-B3PX7AHP.mjs";import{b as he,g as Q,j as Y,p as fe,r as J,u as De,x as Z,y as be}from"./chunk-AX7HEFN2.mjs";import"./chunk-AMJ6U7FR.mjs";import{a as j,b as ue}from"./chunk-ADGAW7R6.mjs";import"./chunk-6EFOJMAD.mjs";import"./chunk-VT4NXQX5.mjs";import{a as de}from"./chunk-P5O5LZCS.mjs";import"./chunk-6CMIKFNE.mjs";import"./chunk-PFC65XRO.mjs";import{a as me,c as $,e as pe}from"./chunk-FMDQCH3J.mjs";import{ka as q}from"./chunk-FRFHEJIU.mjs";import"./chunk-7T6LZHUD.mjs";import{a as ce,d as ge}from"./chunk-N6ZUYKC5.mjs";import"./chunk-5YOTNGM2.mjs";import{o as G,x as le,z as se}from"./chunk-OZK2OCZT.mjs";import{Bc as R,Cc as H,Dc as W,Fb as ee,Gc as z,Hc as m,Ic as L,Jc as B,Mb as y,Mc as w,Nc as S,Oc as E,Qc as b,Ra as v,Sc as ae,Vb as te,Wb as ie,Wc as V,Yb as g,Yc as P,dc as ne,fc as U,gc as k,hc as T,ic as r,jc as l,kc as M,lc as I,mc as F,oc as D,pa as h,tb as s,tc as u,vc as c,xd as oe,ya as p,za as d,zd as re}from"./chunk-TKMPR5S6.mjs";import"./chunk-XAZRL6IZ.mjs";import{b as je,f as Qe}from"./chunk-POE2MFM3.mjs";import"./chunk-UBJTQR5H.mjs";import{a as lt}from"./chunk-MGIVCIKU.mjs";import{a as N,g as rt,j as _}from"./chunk-RIAI3ORJ.mjs";var O=rt(lt());var st=()=>[Z,J,Q,Y,j,$,X,q,G,le,A,Le,Pe,Oe,Re,Ke,Ae,He,Ne,Ue,We,ze,Ge,import("./chunk-ZZSPHOCP.mjs").then(a=>a.SearchfilterComponent)],K=()=>({standalone:!0}),ct=()=>({id:1,title:"B\xE1n S\u1EC9",value:"bansi"}),gt=()=>({id:2,title:"B\xE1n L\u1EBB",value:"banle"}),mt=(a,e)=>[a,e],at=()=>[],pt=(a,e)=>e.id;function dt(a,e){if(a&1){let t=D();r(0,"button",3),u("click",function(){p(t);let n=c();return d(n.handleBanggiaAction())}),r(1,"mat-icon"),m(2,"save"),l()()}}function ut(a,e){if(a&1){let t=D();r(0,"button",3),u("click",function(){p(t);let n=c();return d(n.toggleEdit())}),r(1,"mat-icon"),m(2,"edit"),l()()}}function _t(a,e){if(a&1){let t=D();r(0,"button",11),u("click",function(){p(t);let n=c();return d(n.toggleDelete())}),r(1,"mat-icon"),m(2,"delete"),l()()}}function ht(a,e){if(a&1){let t=D();I(0),r(1,"div",12)(2,"div",13),m(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),l(),r(4,"div",14)(5,"button",15),u("click",function(){p(t);let n=c();return d(n.DeleteData())}),m(6,"\u0110\u1ED3ng \xDD"),l(),r(7,"button",16),u("click",function(){p(t);let n=c();return d(n.toggleDelete())}),m(8,"Hu\u1EF7 B\u1ECF"),l()()(),F()}}function ft(a,e){if(a&1&&(r(0,"mat-option",23),m(1),l()),a&2){let t=e.$implicit;g("value",t.value),s(),L(t.title)}}function Ct(a,e){if(a&1&&(r(0,"mat-option",23),m(1),l()),a&2){let t=e.$implicit;g("value",t.value),s(),L(t.title)}}function Dt(a,e){a&1&&(r(0,"mat-option",29),m(1,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l())}function bt(a,e){if(a&1&&(r(0,"th",40)(1,"span",41),m(2),l()()),a&2){let t=c().$implicit,i=c(3);s(2),B(" ",i.ColumnName[t]," ")}}function yt(a,e){if(a&1){let t=D();r(0,"span",43)(1,"span"),m(2),l(),r(3,"button",31),u("click",function(){p(t);let n=c().$implicit,o=c(4);return d(o.RemoveSanpham(n))}),r(4,"mat-icon"),m(5,"delete"),l()()()}if(a&2){let t=c().index,i=c(4);s(2),B("",t+1," "),s(),g("disabled",!i.isEdit())}}function Bt(a,e){if(a&1){let t=D();r(0,"div",48),u("keydown.enter",function(n){p(t);let o=c(2),f=o.$implicit,C=o.index,x=c(4);return d(x.updateValue(n,C,f,"giaban","number"))}),m(1),V(2,"number"),l()}if(a&2){let t=c(2).$implicit,i=c().$implicit;g("contentEditable",!0),s(),B(" ",P(2,2,t[i]||0,"1.0-2")," ")}}function xt(a,e){if(a&1&&(r(0,"span",44),m(1),V(2,"number"),l()),a&2){let t=c(2).$implicit,i=c().$implicit;s(),B(" ",P(2,1,t[i],"1.0-2")," ")}}function wt(a,e){if(a&1&&y(0,Bt,3,5,"div",46)(1,xt,3,4,"span",47),a&2){let t=c(5);g("ngIf",t.isEdit()),s(),g("ngIf",!t.isEdit())}}function St(a,e){if(a&1&&(r(0,"span",44),m(1),V(2,"number"),l()),a&2){let t=c().$implicit,i=c().$implicit;s(),B(" ",P(2,1,t[i],"1.0-2")," ")}}function Et(a,e){if(a&1&&(r(0,"span",45),m(1),l()),a&2){let t=c().$implicit,i=c().$implicit;s(),B(" ",t[i]," ")}}function vt(a,e){if(a&1&&(r(0,"td",42),y(1,yt,6,2,"span",43)(2,wt,2,2)(3,St,3,4,"span",44)(4,Et,2,1,"span",45),l()),a&2){let t,i=c().$implicit;s(),ne((t=i)==="STT"?1:t==="giaban"?2:t==="giagoc"?3:4)}}function Mt(a,e){if(a&1&&(I(0,34),y(1,bt,3,1,"th",38)(2,vt,5,1,"td",39),F()),a&2){let t=e.$implicit;g("matColumnDef",t)}}function kt(a,e){a&1&&M(0,"tr",49)}function Tt(a,e){a&1&&M(0,"tr",50)}function It(a,e){a&1&&(r(0,"tr",51)(1,"td",52),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),l()())}function Ft(a,e){if(a&1){let t=D();r(0,"div",26)(1,"div",5)(2,"mat-form-field",27)(3,"mat-label"),m(4,"T\xECnh Tr\u1EA1ng"),l(),r(5,"mat-select",28),E("ngModelChange",function(n){p(t);let o=c(2);return S(o.DetailBanggia().status,n)||(o.DetailBanggia().status=n),d(n)}),k(6,Ct,2,2,"mat-option",23,U,!1,Dt,2,0,"mat-option",29),l()(),r(9,"app-searchfilter",30),u("OutFilter",function(n){p(t);let o=c(2);return d(o.DoOutFilter(n))}),l(),r(10,"app-searchfilter",30),u("OutFilter",function(n){p(t);let o=c(2);return d(o.DoOutKhachhang(n))}),l(),r(11,"button",31),u("click",function(){p(t);let n=c(2);return d(n.EmptyCart())}),r(12,"mat-icon"),m(13,"delete"),l()()()(),r(14,"div",32)(15,"table",33),k(16,Mt,3,1,"ng-container",34,U),y(18,kt,1,0,"tr",35)(19,Tt,1,0,"tr",36)(20,It,3,0,"tr",37),l()()}if(a&2){let t,i,n,o=c(2);s(5),g("disabled",!o.isEdit()),w("ngModel",o.DetailBanggia().status),g("ngModelOptions",b(22,K)),s(),T(o.ListStatus),s(3),g("isEdit",o.isEdit)("title","S\u1EA3n Ph\u1EA9m")("ListFilter",((t=o.DetailBanggia())==null?null:t.sanpham)||b(23,at))("filterItem",o.filterSanpham)("CountItems",o.dataSource().filteredData.length)("fieldsearch","title")("ListItem",o.ListSanpham),s(),g("isEdit",o.isEdit)("title","Kh\xE1ch H\xE0ng")("ListFilter",((i=o.DetailBanggia())==null?null:i.khachhang)||b(24,at))("filterItem",o.filterKhachhang)("CountItems",(n=o.DetailBanggia())==null||n.khachhang==null?null:n.khachhang.length)("fieldsearch","name")("ListItem",o.ListKhachhang),s(),g("disabled",!o.isEdit()),s(4),g("dataSource",o.dataSource()),s(),T(o.displayedColumns),s(2),g("matHeaderRowDef",o.displayedColumns),s(),g("matRowDefColumns",o.displayedColumns)}}function Lt(a,e){if(a&1){let t=D();I(0)(1),r(2,"div",17)(3,"mat-form-field",18)(4,"mat-label"),m(5,"Ti\xEAu \u0110\u1EC1"),l(),r(6,"input",19),E("ngModelChange",function(n){p(t);let o=c();return S(o.DetailBanggia().title,n)||(o.DetailBanggia().title=n),d(n)}),u("input",function(){p(t);let n=c();return d(n.FillSlug())}),l()(),r(7,"mat-form-field",18)(8,"mat-label"),m(9,"Lo\u1EA1i"),l(),r(10,"mat-select",20),E("ngModelChange",function(n){p(t);let o=c();return S(o.DetailBanggia().type,n)||(o.DetailBanggia().type=n),d(n)}),r(11,"div",21)(12,"div",22),k(13,ft,2,2,"mat-option",23,pt),l()()()(),r(15,"mat-form-field",18)(16,"mat-label"),m(17,"B\u1EAFt \u0110\u1EA7u"),l(),r(18,"input",24),E("ngModelChange",function(n){p(t);let o=c();return S(o.DetailBanggia().batdau,n)||(o.DetailBanggia().batdau=n),d(n)}),l(),M(19,"mat-datepicker-toggle",25)(20,"mat-datepicker",null,0),l(),r(22,"mat-form-field",18)(23,"mat-label"),m(24,"K\u1EBFt Th\xFAc"),l(),r(25,"input",24),E("ngModelChange",function(n){p(t);let o=c();return S(o.DetailBanggia().ketthuc,n)||(o.DetailBanggia().ketthuc=n),d(n)}),l(),M(26,"mat-datepicker-toggle",25)(27,"mat-datepicker",null,1),l()(),y(29,Ft,21,25),te(30,29,st),ie(),F()()}if(a&2){let t=z(21),i=z(28),n=c();s(6),w("ngModel",n.DetailBanggia().title),g("disabled",!n.isEdit()),s(4),w("ngModel",n.DetailBanggia().type),g("ngModelOptions",b(15,K))("disabled",!n.isEdit()),s(3),T(ae(18,mt,b(16,ct),b(17,gt))),s(5),g("matDatepicker",t),w("ngModel",n.DetailBanggia().batdau),g("ngModelOptions",b(21,K))("disabled",!n.isEdit()),s(),g("for",t),s(6),g("matDatepicker",i),w("ngModel",n.DetailBanggia().ketthuc),g("ngModelOptions",b(22,K))("disabled",!n.isEdit()),s(),g("for",i)}}var ot=class a{_ListbanggiaComponent=h(nt);_BanggiaService=h(it);_SanphamService=h(tt);_KhachhangService=h(et);_GoogleSheetService=h(Ye);_GraphqlService=h(Te);_route=h(ce);_router=h(ge);_snackBar=h(de);paginator;sort;displayedColumns=["STT","title","masp","dvt","giaban"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",giaban:"Gi\xE1 B\xE1n"};dataSource=v(new $e([]));CountItem=oe(()=>this.dataSource().data.length);pendingChanges=new Map;debounceTimer=null;batchUpdateTimer=null;DEBOUNCE_TIME=300;BATCH_UPDATE_TIME=1e3;hasUnsavedChanges=v(!1);filterSanpham=[];ListSanpham=[];ListKhachhang=[];ListStatus=[{value:"baogia",title:"B\xE1o Gi\xE1"},{value:"dangban",title:"\u0110ang B\xE1n"},{value:"ngungban",title:"Ng\u1EEBng B\xE1n"}];filterKhachhang=[];CheckListKhachhang=[];constructor(){this._route.paramMap.subscribe(e=>_(this,null,function*(){let t=e.get("id");this._BanggiaService.setBanggiaId(t)})),re(()=>_(this,null,function*(){let e=this._BanggiaService.banggiaId();console.log("Detected banggiaId change:",e),e||(this._router.navigate(["/admin/banggia"]),this._ListbanggiaComponent.drawer.close()),e==="new"?(this.DetailBanggia.set({title:`BG - ${(0,O.default)().format("DD/MM/YYYY")}`,status:"baogia",type:"bansi",batdau:(0,O.default)().startOf("month").toDate(),ketthuc:(0,O.default)().endOf("month").toDate()}),this._ListbanggiaComponent.drawer.open(),this.isEdit.update(t=>!t),this._router.navigate(["/admin/banggia","new"])):(yield this._BanggiaService.getBanggiaByid(e),this.dataSource().data=this.DetailBanggia().sanpham||[],this._ListbanggiaComponent.drawer.open(),this._router.navigate(["/admin/banggia",e]))}))}DetailBanggia=this._BanggiaService.DetailBanggia;isEdit=v(!1);isDelete=v(!1);banggiaId=this._BanggiaService.banggiaId;ngOnInit(){return _(this,null,function*(){yield this.LoadListKhachhang(),yield this.LoadListSanpham()})}LoadListSanpham(){return _(this,null,function*(){try{let e=yield this._GraphqlService.findAll("sanpham",{select:{id:!0,title:!0,masp:!0,dvt:!0},take:99999,aggressiveCache:!0,enableParallelFetch:!0,orderBy:{title:"asc"}});console.log("Danh s\xE1ch s\u1EA3n ph\u1EA9m t\u1EEB GraphQL:",e),this.ListSanpham=e.data}catch(e){console.error("L\u1ED7i load danh s\xE1ch s\u1EA3n ph\u1EA9m:",e)}})}LoadListKhachhang(){return _(this,null,function*(){try{let e=yield this._GraphqlService.findAll("khachhang",{select:{id:!0,name:!0,makh:!0,diachi:!0,sdt:!0,email:!0,loaikh:!0,isActive:!0},where:{isActive:!0},orderBy:{name:"asc"},take:99999,aggressiveCache:!0,enableParallelFetch:!0});console.log("Danh s\xE1ch kh\xE1ch h\xE0ng t\u1EEB GraphQL:",e),this.filterKhachhang=this.ListKhachhang=e.data}catch(e){console.error("L\u1ED7i load danh s\xE1ch s\u1EA3n ph\u1EA9m:",e)}})}ngAfterViewInit(){setTimeout(()=>{this.paginator&&(this.dataSource().sort=this.sort)},0)}ngOnDestroy(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.pendingChanges.size>0&&this.flushPendingChanges()}flushPendingChanges(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.pendingChanges.size>0&&(this.DetailBanggia.update(e=>(this.pendingChanges.forEach((t,i)=>{Object.assign(e.sanpham[i],t)}),e)),this.pendingChanges.clear(),this.dataSource().data=[...this.DetailBanggia().sanpham])}handleBanggiaAction(){return _(this,null,function*(){this.banggiaId()==="new"?yield this.createBanggia():yield this.updateBanggia()})}createBanggia(){return _(this,null,function*(){console.log(this.DetailBanggia())})}updateBanggia(){return _(this,null,function*(){this.flushPendingChanges(),console.log(this.DetailBanggia());try{yield this._BanggiaService.updateBanggia(this.DetailBanggia()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e),this.hasUnsavedChanges.set(!1)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt banggia:",e),this._snackBar.open("L\u1ED7i khi c\u1EADp nh\u1EADt!","\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}debounceUpdate(e,t=this.DEBOUNCE_TIME){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(e,t)}scheduleBatchUpdate(){this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.batchUpdateTimer=setTimeout(()=>{this.processBatchUpdate()},this.BATCH_UPDATE_TIME)}processBatchUpdate(){if(this.pendingChanges.size===0)return;let e=this.pendingChanges.size;this.DetailBanggia.update(t=>(this.pendingChanges.forEach((i,n)=>{Object.assign(t.sanpham[n],i)}),t)),this.pendingChanges.clear(),this.hasUnsavedChanges.set(!0),this.dataSource().data=[...this.DetailBanggia().sanpham],console.log(`Batch update completed for ${e} items - Manual save required`)}addPendingChange(e,t,i){this.pendingChanges.has(e)||this.pendingChanges.set(e,{});let n=this.pendingChanges.get(e);n[t]=i,this.scheduleBatchUpdate()}DeleteData(){return _(this,null,function*(){try{yield this._BanggiaService.DeleteBanggia(this.DetailBanggia()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/banggia"])}catch(e){console.error("L\u1ED7i khi x\xF3a banggia:",e)}})}goBack(){this._router.navigate(["/admin/banggia"]),this._ListbanggiaComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.DetailBanggia.update(e=>(e.slug=Se(e.title),e))}updateValue(e,t,i,n,o){let f=o==="number"?Number(e.target.innerText.trim().replace(/[^0-9]/g,""))||0:e.target.innerText.trim(),C=e;if(C.key==="Enter"&&!C.shiftKey&&e.preventDefault(),o==="number"){let x=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(C.key)&&!x.includes(C.key)&&e.preventDefault()}t!==null&&n==="giaban"?this.debounceUpdate(()=>{this.addPendingChange(t,n,f),C.key==="Enter"&&this.moveToNextInput(t)}):this.DetailBanggia.update(x=>(t!==null?x.sanpham[t][n]=f:x[n]=f,x)),console&&console.log&&console.log(`Updated ${String(n)}:`,f)}moveToNextInput(e){let t=document.querySelectorAll(".giaban-input");if(e<t.length-1){let i=t[e+1];i&&requestAnimationFrame(()=>{i.focus(),i instanceof HTMLInputElement&&i.select()})}}LoadDrive(){return _(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"BGImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._GoogleSheetService.getDrive(e),i=we(t.values);this.DoImportData(i)})}AddSanpham(){}EmptyCart(){this.DetailBanggia.update(e=>(e.sanpham=[],e)),this.dataSource().data=this.DetailBanggia().sanpham,this.dataSource().sort=this.sort}RemoveSanpham(e){this.DetailBanggia.update(t=>(t.sanpham=t.sanpham.filter(i=>i.id!==e.id),t)),this.dataSource().data=this.DetailBanggia().sanpham,this.dataSource().sort=this.sort}CoppyDon(){this._snackBar.open("\u0110ang Coppy \u0110\u01A1n H\xE0ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),this.DetailBanggia.update(e=>(delete e.id,e.title=`${e.title} - Coppy`,e)),this._BanggiaService.CreateBanggia(this.DetailBanggia()).then(e=>{this._snackBar.open("Coppy \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/banggia",this.banggiaId()])})}printContent(){let e=document.getElementById("printContent");e&&Xe(e,{scale:2}).then(t=>{let i=t.toDataURL("image/png"),n=window.open("","_blank");n&&(n.document.write(`
            <html>
              <head>
                <title>${this.DetailBanggia()?.title}</title>
              </head>
              <body style="text-align: center;">
                <img src="${i}" style="max-width: 100%;"/>
                <script>
                  window.onload = function() {
                    window.print();
                    window.onafterprint = function() { window.close(); };
                  };
                </script>
              </body>
            </html>
          `),n.document.close())})}ImporExcel(e){return _(this,null,function*(){let t=yield Qe(e);this.DoImportData(t)})}ExportExcel(e,t){let i=e.data.map(n=>({masp:n.masp?.trim()||"",giaban:Number(n.giaban)||0}));je(i,t)}DoImportData(e){let t=e.map(i=>({masp:i.masp?.trim()||"",giaban:Number(i.giaban)||0})).filter(i=>i.masp);this.DetailBanggia.update(i=>{let n=t.map(o=>{o.masp=o.masp?.trim()||"",o.giaban=Number(o.giaban)||0;let f=this._SanphamService.ListSanpham().find(C=>C.masp===o.masp);return f?N(N({},f),o):o});return i.sanpham=n,i}),console.log(this.DetailBanggia().sanpham),this.dataSource().data=this.DetailBanggia().sanpham,this.dataSource().sort=this.sort,this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}DoOutFilter(e){return _(this,null,function*(){console.log("C\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m cho b\u1EA3ng gi\xE1:",e);try{this.DetailBanggia.update(t=>(t.sanpham=e.map(i=>({sanphamId:i.sanphamId||i.id,giaban:Number(i.giaban)||0,title:i.title,masp:i.masp,dvt:i.dvt,order:i.order||1})),t)),this.filterSanpham=this.DetailBanggia().sanpham,this.dataSource().data=this.DetailBanggia().sanpham,this.dataSource().sort=this.sort,console.log(this.DetailBanggia()),this._snackBar.open("C\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("L\u1ED7i c\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m:",t),this._snackBar.open("L\u1ED7i c\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}DoOutKhachhang(e){return _(this,null,function*(){console.log("C\u1EADp nh\u1EADt kh\xE1ch h\xE0ng cho b\u1EA3ng gi\xE1:",e);try{let t={khachhang:{set:e.map(i=>({id:i.id}))}};console.log("D\u1EEF li\u1EC7u c\u1EADp nh\u1EADt kh\xE1ch h\xE0ng:",t),this.DetailBanggia.update(i=>(i.khachhang=e,i)),this._snackBar.open("C\u1EADp nh\u1EADt kh\xE1ch h\xE0ng th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("L\u1ED7i c\u1EADp nh\u1EADt kh\xE1ch h\xE0ng:",t),this._snackBar.open("L\u1ED7i c\u1EADp nh\u1EADt kh\xE1ch h\xE0ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=ee({type:a,selectors:[["app-detailbanggia"]],viewQuery:function(t,i){if(t&1&&(R(Ie,5),R(A,5)),t&2){let n;H(n=W())&&(i.paginator=n.first),H(n=W())&&(i.sort=n.first)}},decls:21,vars:9,consts:[["pickerbatdau",""],["pickerketthuc",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptsizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","input","ngModel","disabled"],[3,"ngModelChange","ngModel","ngModelOptions","disabled"],[1,"w-full","flex","flex-col"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions","disabled"],["matIconSuffix","",3,"for"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],["disabled",""],[3,"OutFilter","isEdit","title","ListFilter","filterItem","CountItems","fieldsearch","ListItem"],["mat-icon-button","","color","warn",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"max-w-20","line-clamp-4"],[1,"max-w-40","line-clamp-4"],["class","giaban-input p-2 min-w-28 bg-slate-200 focus:border rounded-lg focus:border-blue-600 focus:bg-slate-100 focus:outline-none",3,"contentEditable","keydown.enter",4,"ngIf"],["class","max-w-20 line-clamp-4",4,"ngIf"],[1,"giaban-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){if(t&1&&(r(0,"div",2)(1,"button",3),u("click",function(){return i.goBack()}),r(2,"mat-icon"),m(3,"arrow_back"),l()(),r(4,"div",4),m(5),l(),r(6,"div",5)(7,"mat-slide-toggle",6),E("ngModelChange",function(o){return S(i.DetailBanggia().isActive,o)||(i.DetailBanggia().isActive=o),o}),m(8),l(),r(9,"button",3),u("click",function(){return i.CoppyDon()}),r(10,"mat-icon"),m(11,"content_copy"),l()(),r(12,"button",3),u("click",function(){return i.printContent()}),r(13,"mat-icon"),m(14,"print"),l()(),y(15,dt,3,0,"button",7)(16,ut,3,0,"button",7)(17,_t,3,0,"button",8),l()(),r(18,"div",9),y(19,ht,9,0,"ng-container",10)(20,Lt,32,23,"ng-container",10),l()),t&2){let n;s(5),B(" ",((n=i.DetailBanggia())==null?null:n.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"," "),s(2),w("ngModel",i.DetailBanggia().isActive),g("disabled",!i.isEdit()),s(),L(i.DetailBanggia().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(7),g("ngIf",i.isEdit()),s(),g("ngIf",!i.isEdit()),s(),g("ngIf",i.banggiaId()!=="new"),s(2),g("ngIf",i.isDelete()),s(),g("ngIf",!i.isDelete())}},dependencies:[be,Z,J,De,Be,ye,fe,he,Q,Y,ue,j,pe,me,$,xe,X,q,Ce,se,G,Ze,Je,ke,Ee,ve,Me,Ve,Fe,qe,_e],encapsulation:2})};export{ot as DetailBanggiaComponent};
