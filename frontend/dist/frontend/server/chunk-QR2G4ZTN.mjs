import './polyfills.server.mjs';
import{b as te}from"./chunk-RHSABDND.mjs";import{c as ie}from"./chunk-COSQG4OV.mjs";import{a as Y}from"./chunk-26NM6QMQ.mjs";import{b as R,c as g,d as W}from"./chunk-WRSBCCBG.mjs";import{k as Z}from"./chunk-MENNXLFS.mjs";import{p as $}from"./chunk-KKZPVVZF.mjs";import{b as ee}from"./chunk-YKH4FGCS.mjs";import{h as G}from"./chunk-7TGHQDBE.mjs";import{b as U}from"./chunk-SNL6NQRQ.mjs";import{c as J}from"./chunk-HXEL4YEF.mjs";import{C as H,b as j,g as K,j as X,s as z}from"./chunk-67NKMS7C.mjs";import{a as Q,b as q}from"./chunk-Z6WUDYX6.mjs";import{a as B,c as N,e as P}from"./chunk-LQWFEOWT.mjs";import{Ac as k,Bc as b,Cc as E,Fb as v,Fc as x,Gc as s,Hc as L,Ic as F,Jc as V,Ka as I,Lc as D,Mb as C,Mc as A,Nc as O,Ra as _,Yb as y,cc as h,fc as T,gc as S,hc as o,ic as a,nc as M,sc as f,tb as u,uc as d,xa as w,ya as c,za as m}from"./chunk-LL6B6DB7.mjs";function ne(l,i){if(l&1&&(o(0,"button",2,1),s(2),a()),l&2){let t=d(),e=x(3);y("disabled",!t.isEdit())("matMenuTriggerFor",e),u(2),V(" ",t.CountItems," ",t.title," ")}}function oe(l,i){if(l&1&&(o(0,"button",3,1)(2,"mat-icon"),s(3),a()()),l&2){let t=d(),e=x(3);y("matMenuTriggerFor",e),u(3),L(t.icon)}}function le(l,i){l&1&&(o(0,"span",18),s(1,"check"),a())}function ae(l,i){if(l&1){let t=M();o(0,"div",17),f("click",function(){let r=c(t).$implicit,n=d();return m(n.ChosenItem(r))}),C(1,le,2,0,"span",18),s(2),a()}if(l&2){let t=i.$implicit,e=d();u(),h(e.CheckItem(t)?1:-1),u(),F(" ",t[e.fieldsearch]||"(Tr\u1ED1ng)"," ")}}var re=class l{ListItem=[];filterItem=[];ListFilter=[];CountItems=0;icon="";title="Items";fieldsearch="title";isEdit=_(!1);isDelete=_(!1);OutFilter=new I;menuTrigger;searchText="";initFilter=[];ngOnInit(){this.initFilter=this.filterItem}ngOnChanges(){}trackByFn(i,t){return t.id}ChosenAll(){this.ListFilter=this.ListItem,this.filterItem=this.initFilter}RemoveAll(){this.ListFilter=[],this.filterItem=this.initFilter,this.searchText=""}CheckItem(i){return!!this.ListFilter?.find(t=>t.id===i.id)}doFilterItem(i,t){let e=i.target.value;if(this.searchText=e,!e){this.filterItem=this.initFilter;return}this.filterItem=this.initFilter.filter(r=>Y(r[t]).includes(e.toLowerCase())||r[t].toLowerCase().includes(e.toLowerCase()))}DoListFilter(){let i=new Map;this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),this.filterItem=Array.from(i.values())}getChosen(){let i=new Map;return this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),Array.from(i.values()).length}ChosenItem(i){console.log("ListFilter",this.ListFilter);let t=i[this.fieldsearch],e=this.ListItem.filter(n=>n[this.fieldsearch]===t);this.ListFilter.filter(n=>n[this.fieldsearch]===t).length>0?this.ListFilter=this.ListFilter?.filter(n=>n[this.fieldsearch]!==t):this.ListFilter=[...this.ListFilter,...e]}ApplyFilterColum(i){this.OutFilter.emit(this.ListFilter),i.closeMenu()}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=v({type:l,selectors:[["app-searchfilter"]],viewQuery:function(t,e){if(t&1&&k(g,5),t&2){let r;b(r=E())&&(e.menuTrigger=r.first)}},inputs:{ListItem:"ListItem",filterItem:"filterItem",ListFilter:"ListFilter",CountItems:"CountItems",icon:"icon",title:"title",fieldsearch:"fieldsearch",isEdit:"isEdit",isDelete:"isDelete"},outputs:{OutFilter:"OutFilter"},features:[w],decls:26,vars:4,consts:[["menu","matMenu"],["menuTrigger","matMenuTrigger"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"ngModelChange","keyup","ngModel"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],[1,"material-symbols-outlined","text-blue-600"]],template:function(t,e){if(t&1){let r=M();C(0,ne,3,4,"button",2)(1,oe,4,2,"button",3),o(2,"mat-menu",null,0)(4,"div",4),f("click",function(p){return c(r),m(p.stopPropagation())}),o(5,"div",5)(6,"input",6),O("ngModelChange",function(p){return c(r),A(e.searchText,p)||(e.searchText=p),m(p)}),f("keyup",function(p){return c(r),m(e.doFilterItem(p,e.fieldsearch))}),a(),o(7,"div",7)(8,"span",8),s(9,"search"),a()()(),o(10,"div",9)(11,"div",10)(12,"span",11),f("click",function(){return c(r),m(e.ChosenAll())}),s(13,"Ch\u1ECDn T\u1EA5t C\u1EA3"),a(),o(14,"span",11),f("click",function(){return c(r),m(e.RemoveAll())}),s(15,"Xo\xE1"),a()(),o(16,"span",11),f("click",function(){return c(r),m(e.DoListFilter())}),s(17),a()(),o(18,"div",12),T(19,ae,3,2,"div",13,e.trackByFn,!0),a(),o(21,"div",14)(22,"button",15),f("click",function(){return c(r),m(e.menuTrigger.closeMenu())}),s(23,"\u0110\xF3ng"),a(),o(24,"button",16),f("click",function(){return c(r),m(e.ApplyFilterColum(e.menuTrigger))}),s(25,"\xC1p D\u1EE5ng"),a()()()()}t&2&&(h(e.icon?-1:0),u(),h(e.icon?1:-1),u(5),D("ngModel",e.searchText),u(11),F("",e.getChosen()," \u0110ang ch\u1ECDn"),u(2),S(e.filterItem))},dependencies:[H,J,z,j,K,X,q,Q,P,B,N,U,G,ee,Z,ie,te,$,W,R,g],encapsulation:2,changeDetection:0})};export{re as a};
