import './polyfills.server.mjs';
import{a as Oe}from"./chunk-LZKQXSTY.mjs";import{a as pe}from"./chunk-UCBMPSBV.mjs";import{a as ze,b as Be,c as Re,e as $e}from"./chunk-6JZS72IP.mjs";import{a as qe,b as Ve,r as Ge,s as Je}from"./chunk-5BBGYI5R.mjs";import{c as xe,d as ke,e as we,f as Le,g as Ae,h as Ee}from"./chunk-U6A3DJDD.mjs";import{a as he,b as fe,c as ge}from"./chunk-BRACC4JN.mjs";import{a as Fe,b as Ne}from"./chunk-QHN5TGS3.mjs";import{d as Ce}from"./chunk-7TOIZ2AP.mjs";import{a as ye,b as Te}from"./chunk-5M63TDDJ.mjs";import{A as Ie,b as _e,g as ve,j as be,o as Se,q as De,w as Me,x as Pe,z as He}from"./chunk-GS6CKRHG.mjs";import{a as g}from"./chunk-7ZQLLCLM.mjs";import{a as me}from"./chunk-GQMUTPQ3.mjs";import{a as ue}from"./chunk-CG43H366.mjs";import{a as se,c as ce,e as de}from"./chunk-NORDYRBX.mjs";import{ja as le,y as ne,z as oe}from"./chunk-O3DAWGN3.mjs";import{b as ie,d as H,e as ae,f as re}from"./chunk-7FNXQ3TW.mjs";import{o as X,t as ee,w as te,z as P}from"./chunk-NOPYZMUE.mjs";import{Cc as E,Dc as D,Ec as M,Gb as G,Ic as O,Jc as s,Kc as T,Mc as j,Nb as x,Oc as q,Pc as V,Qc as z,Ra as C,Sc as B,Tc as Q,Wa as b,Yc as K,Zb as f,_c as W,ad as Y,bc as k,ec as J,fc as Z,hc as w,ia as $,ic as L,jc as n,kc as l,lc as A,na as v,oa as y,pb as N,pc as _,tb as c,uc as p,wc as d,xa as u,ya as m,yb as S,zc as U}from"./chunk-UIMG47TQ.mjs";import{j as h}from"./chunk-RIAI3ORJ.mjs";var R=[{id:"8efd5ba3-d073-4baf-ab89-31180ee7471d",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"098765421",idGroup:"",Code:"751221",Hoten:"test1",Avatar:"",Ngaysinh:null,email:"test1@gmail.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$YSq7l4/1fe7ihGsxRaS/CuG0bP93xyYmcBWVuMbXr96c18HIQOU/e",ListImage:[],Profile:[],Role:"user",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-12-11T03:11:52.074Z",UpdateAt:"2024-12-11T03:11:52.074Z",DeleteAt:null,idCreate:null},{id:"930e46a3-c2be-4063-a395-0adda0c24218",ref_id:"0",gid:"115812709741721912709",fid:"",zid:"",pid:"",SDT:"",idGroup:"",Code:"655487",Hoten:"",Avatar:"",Ngaysinh:null,email:"quocbao280783@gmail.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$iqsxkNI.ljPmvC/Cu.0hWOtRVzRkcHmE.xz1Oc59godPAjdLJ.pTS",ListImage:[],Profile:[],Role:"user",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-12-06T07:23:12.949Z",UpdateAt:"2024-12-10T05:06:03.000Z",DeleteAt:null,idCreate:null},{id:"ba962571-6c61-4a63-8dfd-7550ef982468",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"",idGroup:"",Code:"342212",Hoten:"",Avatar:"",Ngaysinh:null,email:"chikietit@gmail.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$f6emY.ehT0BnUnObpIz8iOERl8AOOsTDicz9VZsmKHrh5FQyHBRwi",ListImage:[],Profile:[],Role:"user",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-12-05T08:29:55.283Z",UpdateAt:"2024-12-05T08:29:55.283Z",DeleteAt:null,idCreate:null},{id:"e94a4da4-12d1-4e3c-8759-23a0a5914156",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"",idGroup:"",Code:"470177",Hoten:"",Avatar:"",Ngaysinh:null,email:"wetdragon1996@gmail.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$HQqUp5pLAPDedsNI4h8s9eg/NB1FCBQ/HtOPOJx72i/v90J4ZV9SK",ListImage:[],Profile:[],Role:"user",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-12-02T03:09:43.472Z",UpdateAt:"2024-12-05T09:02:12.000Z",DeleteAt:null,idCreate:null},{id:"0ca0f7b4-56ad-414a-846b-4c867da4c891",ref_id:"0",gid:"116895729763152566602",fid:"",zid:"",pid:"",SDT:"",idGroup:"",Code:"256165",Hoten:"",Avatar:"",Ngaysinh:null,email:"katachanneloffical@gmail.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$pJxBQaiFty9D1e6Bjv.0j.GX5mobsLCt6t22/eoX.Hf8FfIQoo94u",ListImage:[],Profile:[],Role:"user",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-11-25T09:18:25.812Z",UpdateAt:"2024-12-17T11:51:53.000Z",DeleteAt:null,idCreate:null},{id:"7fa80031-41e4-4dea-ab3d-8b6b989cf124",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"0934123456",idGroup:"",Code:"896331",Hoten:"H\u1ED3 Anh Tu\u1EA5n",Avatar:"",Ngaysinh:null,email:"tuan.mkt@tuanho.com",Gioitinh:"",EditChinhanhs:[],Diachi:[],password:"$2b$10$iZZK6SLEdvG2Wjj3cdsxFOQYwl.xx9zeRev6wZUG0FYcniyJpcPY6",ListImage:[],Profile:[],Role:"customer",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-01-19T01:26:43.112Z",UpdateAt:"2024-01-19T01:26:43.112Z",DeleteAt:null,idCreate:null},{id:"43921534-d600-443e-8ec1-26cc7d93ff18",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"0987654321",idGroup:"caaeadb0-64d3-4e5a-b42f-bc45abbbba06",Code:"757379",Hoten:"Tester",Avatar:"",Ngaysinh:null,email:"tester@gmail.com",Gioitinh:"",EditChinhanhs:[{Title:"Taza Skin Clinic ?\xE0 N?ng",id:"9887ad61-4b2c-4db1-83e6-570f33cb540a",Checked:!1},{Title:"Taza Skin Clinic Nha Trang",id:"e173b1c0-fbdb-4eeb-a00c-b56664068515",Checked:!1},{Title:"Taza Skin Clinic G\xF2 V?p",id:"268b7a06-d2c5-4c98-af1d-334144ae280f",Checked:!1},{Title:"Taza Skin Clinic Th? ??c",id:"f54de1e1-66bd-4690-8015-ad7315d6f14e",Checked:!1},{Title:"Taza Skin Clinic Qu?n 10",id:"ca725bf4-4810-4ea2-8ef2-520b2a3121cc",Checked:!1},{Title:"Timona Academy C? S? Qu?n 10",id:"34aa91e2-c469-42bb-898b-a11618452ebd",Checked:!1},{Title:"Timona Academy C? S? G\xF2 V?p",id:"ee3d1ed9-eafa-4b89-b045-46fa347c377e",Checked:!1},{Title:"Timona Academy c? s? ?\xE0 N?ng",id:"7c152522-3858-4669-b745-a1fd2d25ad9a",Checked:!1},{Title:"Timona Academy c? s? Nha Trang",id:"9a5cdc4d-fbbf-41c2-9222-9c01d5433148",Checked:!1},{Title:"Timona Academy c? s? Th? ??c",id:"c4a68bd5-c120-4bf0-a4d1-447e4921eb76",Checked:!1},{Title:"Timona Academy c? s? C\xE1ch M?ng Th\xE1ng 8",id:"3b9e91d5-21ac-44b2-ba01-e87ee310fdcd",Checked:!1}],Diachi:[],password:"$2b$10$YuEyU32KQxnI8JACV3/Ab.aSxLZilRAn1hcAmwBcUGJ2gp.t/7sI.",ListImage:[],Profile:[],Role:"admin",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2024-01-15T01:02:36.313Z",UpdateAt:"2024-04-09T01:23:42.000Z",DeleteAt:null,idCreate:null},{id:"b045e2e2-5c44-4bef-ba84-7cb6b14ef6a5",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"0786810434",idGroup:"e3be8e89-0530-435d-be42-29e8aef77794",Code:"935519",Hoten:"\u0110an Thanh",Avatar:"",Ngaysinh:null,email:"leadercskh.cgo@tazagroup.vn",Gioitinh:"",EditChinhanhs:[{Title:"Taza Skin Clinic ?\xE0 N?ng",id:"9887ad61-4b2c-4db1-83e6-570f33cb540a",Checked:!0},{Title:"Taza Skin Clinic Nha Trang",id:"e173b1c0-fbdb-4eeb-a00c-b56664068515",Checked:!0},{Title:"Taza Skin Clinic G\xF2 V?p",id:"268b7a06-d2c5-4c98-af1d-334144ae280f",Checked:!0},{Title:"Taza Skin Clinic Th? ??c",id:"f54de1e1-66bd-4690-8015-ad7315d6f14e",Checked:!0},{Title:"Taza Skin Clinic Qu?n 10",id:"ca725bf4-4810-4ea2-8ef2-520b2a3121cc",Checked:!0}],Diachi:[],password:"$2b$10$zimmBmMej7nv2Jpx.BH.JOQ6dSyUZIiKiHZoWBIyccflCxLqftyf2",ListImage:[],Profile:[],Role:"admin",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2023-12-14T01:51:51.061Z",UpdateAt:"2024-11-26T05:07:30.000Z",DeleteAt:null,idCreate:null},{id:"6a56a975-7244-4a50-9f2c-4b7c49b2b4ac",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"0935380828",idGroup:"4817d73d-1eba-4a57-97f1-13452e175478",Code:"515874",Hoten:"Anh S\u01A1n",Avatar:"",Ngaysinh:null,email:"sonpham.design@gmail.com",Gioitinh:"",EditChinhanhs:[{Title:"Taza Skin Clinic ?\xE0 N?ng",id:"9887ad61-4b2c-4db1-83e6-570f33cb540a",Checked:!0},{Title:"Taza Skin Clinic Nha Trang",id:"e173b1c0-fbdb-4eeb-a00c-b56664068515",Checked:!0},{Title:"Taza Skin Clinic G\xF2 V?p",id:"268b7a06-d2c5-4c98-af1d-334144ae280f",Checked:!0},{Title:"Taza Skin Clinic Th? ??c",id:"f54de1e1-66bd-4690-8015-ad7315d6f14e",Checked:!0},{Title:"Taza Skin Clinic Qu?n 10",id:"ca725bf4-4810-4ea2-8ef2-520b2a3121cc",Checked:!0}],Diachi:[],password:"$2b$10$YuEyU32KQxnI8JACV3/Ab.aSxLZilRAn1hcAmwBcUGJ2gp.t/7sI.",ListImage:[],Profile:[],Role:"admin",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2023-12-12T07:19:26.376Z",UpdateAt:"2024-05-31T07:58:02.800Z",DeleteAt:null,idCreate:null},{id:"6b6292d1-84f5-43af-920f-ea812df614a2",ref_id:"0",gid:"",fid:"",zid:"",pid:"",SDT:"0935670135",idGroup:"4817d73d-1eba-4a57-97f1-13452e175478",Code:"563050",Hoten:"Tr\u1EA7n M\u1EF9 Duy\xEAn",Avatar:"",Ngaysinh:null,email:"myduyen.cgo@tazagroup.vn",Gioitinh:"",EditChinhanhs:[{Title:"Taza Skin Clinic ?\xE0 N?ng",id:"9887ad61-4b2c-4db1-83e6-570f33cb540a",Checked:!0},{Title:"Taza Skin Clinic Nha Trang",id:"e173b1c0-fbdb-4eeb-a00c-b56664068515",Checked:!0},{Title:"Taza Skin Clinic G\xF2 V?p",id:"268b7a06-d2c5-4c98-af1d-334144ae280f",Checked:!0},{Title:"Taza Skin Clinic Th? ??c",id:"f54de1e1-66bd-4690-8015-ad7315d6f14e",Checked:!0},{Title:"Taza Skin Clinic Qu?n 10",id:"ca725bf4-4810-4ea2-8ef2-520b2a3121cc",Checked:!0}],Diachi:[],password:"$2b$10$YuEyU32KQxnI8JACV3/Ab.aSxLZilRAn1hcAmwBcUGJ2gp.t/7sI.",ListImage:[],Profile:[],Role:"admin",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2023-12-12T07:18:24.127Z",UpdateAt:"2024-05-31T07:58:38.118Z",DeleteAt:null,idCreate:null},{id:"c47af21e-5d5a-490b-95f6-e86dacc21139",ref_id:"0",gid:"103386279635221088134",fid:"",zid:"",pid:"",SDT:"0977272967",idGroup:"4817d73d-1eba-4a57-97f1-13452e175478",Code:"604815",Hoten:"Ph\u1EA1m Ch\xED Ki\u1EC7t",Avatar:"",Ngaysinh:null,email:"chikiet88@gmail.com",Gioitinh:"",EditChinhanhs:[{Title:"Taza Skin Clinic ?\xE0 N?ng",id:"9887ad61-4b2c-4db1-83e6-570f33cb540a",Checked:!0},{Title:"Taza Skin Clinic Nha Trang",id:"e173b1c0-fbdb-4eeb-a00c-b56664068515",Checked:!0},{Title:"Taza Skin Clinic G\xF2 V?p",id:"268b7a06-d2c5-4c98-af1d-334144ae280f",Checked:!0},{Title:"Taza Skin Clinic Th? ??c",id:"f54de1e1-66bd-4690-8015-ad7315d6f14e",Checked:!0},{Title:"Taza Skin Clinic Qu?n 10",id:"ca725bf4-4810-4ea2-8ef2-520b2a3121cc",Checked:!0}],Diachi:[],password:"$2b$10$PdDd7L4QuFht5iqEMWkPmeIjweFGnp3b.TCtBdZfp/Rpu7fv71hY.",ListImage:[],Profile:[],Role:"admin",Phanquyen:[],Menu:[],fcmToken:[],Type:"",Ordering:1,idDelete:!1,Status:0,CreateAt:"2023-12-11T07:57:50.473Z",UpdateAt:"2024-12-10T13:50:52.000Z",DeleteAt:null,idCreate:null}];var I=[{id:1,Title:"B\xE1o l\u1ED7i",value:"baoloi",bg:"bg-[#f44336]"},{id:2,Title:"H\u1ED7 tr\u1EE3",value:"hotro",bg:"bg-[#4caf50]"},{id:2,Title:"\u0110\u1EC1 Xu\u1EA5t",value:"dexuat",bg:"bg-[#2196f3]"},{id:3,Title:"C\xF4ng vi\u1EC7c",value:"congviec",bg:"bg-[#ff9800]"},{id:4,Title:"Kh\xE1c",value:"khac"}],ct={channels:[{id:1,name:"abc",description:"K\xEAnh h\u1ED7 tr\u1EE3 chung"}],users:[{id:1,username:"testuser",email:"test@example.com"},{id:2,username:"support_admin",email:"support@example.com"}],tickets:[{id:101,user_id:1,channel_id:1,message:"Xin ch\xE0o, t\xF4i g\u1EB7p l\u1ED7i khi \u0111\u0103ng nh\u1EADp v\xE0o h\u1EC7 th\u1ED1ng.",created_at:"2024-02-10T14:00:00Z"}],replies:[{id:201,ticket_id:101,user_id:2,message:"Ch\xE0o b\u1EA1n, b\u1EA1n c\xF3 th\u1EC3 cung c\u1EA5p \u1EA3nh ch\u1EE5p m\xE0n h\xECnh l\u1ED7i kh\xF4ng?",created_at:"2024-02-10T14:05:00Z"},{id:202,ticket_id:101,user_id:1,message:"\u0110\xE2y l\xE0 \u1EA3nh l\u1ED7i khi t\xF4i \u0111\u0103ng nh\u1EADp.",created_at:"2024-02-10T14:10:00Z",attachment:{file_name:"login_error.png",file_url:"https://example.com/files/login_error.png"}},{id:203,ticket_id:101,user_id:2,message:"C\u1EA3m \u01A1n b\u1EA1n! B\u1EA1n th\u1EED x\xF3a cache tr\xECnh duy\u1EC7t v\xE0 th\u1EED l\u1EA1i nh\xE9.",created_at:"2024-02-10T14:15:00Z"},{id:204,ticket_id:101,user_id:1,message:"T\xF4i \u0111\xE3 th\u1EED nh\u01B0ng v\u1EABn g\u1EB7p l\u1ED7i.",created_at:"2024-02-10T14:20:00Z"},{id:205,ticket_id:101,user_id:2,message:"B\u1EA1n c\xF3 th\u1EC3 th\u1EED tr\xEAn m\u1ED9t tr\xECnh duy\u1EC7t kh\xE1c ho\u1EB7c b\u1EADt ch\u1EBF \u0111\u1ED9 \u1EA9n danh?",created_at:"2024-02-10T14:25:00Z"}]};var F=class o{constructor(a,e,t){this._StorageService=a;this.platformId=e;this.router=t;this.isBrowser=P(this.platformId)}_authenticated=!1;APIURL=g.APIURL;isBrowser;ListHotro=C([]);Hotro=C({});CreateHotro(a){return h(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t=yield fetch(`${g.APIURL}/hotro`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}return this.ListHotro.update(r=>[...r,i]),this.getAllHotro(),i}catch(e){return console.error(e)}})}getAllHotro(){return h(this,null,function*(){try{let a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},e=yield fetch(`${g.APIURL}/hotro?page=1&perPage=10`,a);if(!e.ok)if(e.status===401){let i=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(e.status===403){let i=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(e.status===500){let i=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else{let i=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}let t=yield e.json();return this.ListHotro.set(t.data),t.data}catch(a){return console.error(a)}})}SearchHotro(a){return h(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t=yield fetch(`${g.APIURL}/setting/search`,e);if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let i=yield t.json();return this.Hotro.set(i.items),i}catch(e){return console.error(e)}})}getHotroByid(a){return h(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json"}},t=yield fetch(`${g.APIURL}/hotro/findid/${a}`,e);if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let i=yield t.json();return this.Hotro.set(i),i}catch(e){return console.error(e)}})}updateOneHotro(a){return h(this,null,function*(){try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t=yield fetch(`${g.APIURL}/hotro/${a.id}`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}return this.getAllHotro(),i}catch(e){return console.error(e)}})}DeleteHotro(a){return h(this,null,function*(){try{let e={method:"DELETE",headers:{"Content-Type":"application/json"}},t=yield fetch(`${g.APIURL}/hotro/${a.id}`,e);if(!t.ok)if(t.status===401){let i=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===403){let i=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===500){let i=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else{let i=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}return this.getAllHotro(),yield t.json()}catch(e){return console.error(e)}})}static \u0275fac=function(e){return new(e||o)(v(me),v(b),v(H))};static \u0275prov=$({token:o,factory:o.\u0275fac,providedIn:"root"})};var We=["drawer"],Ye=o=>[o],Ze=()=>({standalone:!0}),je=(o,a)=>a.id;function Xe(o,a){if(o&1){let e=_();n(0,"div",8)(1,"mat-form-field",16)(2,"mat-label"),s(3,"T\xECm Ki\u1EBFm"),l(),n(4,"input",17,2),p("keyup",function(i){u(e);let r=d();return m(r.applyFilter(i))}),l()(),n(6,"button",18),p("click",function(){u(e);let i=d();return m(i.isSearch=!i.isSearch)}),n(7,"mat-icon"),s(8,"close"),l()()()}}function et(o,a){if(o&1){let e=_();n(0,"div",19)(1,"button",20),p("click",function(){u(e);let i=d(),r=O(18);return m(i.openCreateDialog(r))}),n(2,"mat-icon"),s(3,"add_circle"),l()(),n(4,"button",21),p("click",function(){u(e);let i=d();return m(i.isSearch=!i.isSearch)}),n(5,"mat-icon"),s(6,"search"),l()(),n(7,"button",22),p("click",function(){u(e);let i=d();return m(i.writeExcelFile())}),n(8,"mat-icon"),s(9,"file_download"),l()(),n(10,"button",23),p("click",function(){u(e);let i=O(14);return m(i.click())}),n(11,"mat-icon"),s(12,"file_upload"),l()(),n(13,"input",24,3),p("change",function(i){u(e);let r=d();return m(r.readExcelFile(i))}),l(),n(15,"button",25),p("click",function(){u(e);let i=d();return m(i.LoadDrive())}),n(16,"mat-icon"),s(17,"cloud_download"),l()()()}}function tt(o,a){if(o&1){let e=_();n(0,"div",26),p("click",function(){let i=u(e).$implicit,r=d();return m(r.FilterType(i))}),s(1),l()}if(o&2){let e,t,i=a.$implicit,r=d();k("whitespace-nowrap rounded-lg p-1 text-white ",((e=r.GetNameType(i.value))==null?null:e.bg)||"bg-slate-600",""),c(),j(" ",((t=r.GetNameType(i.value))==null?null:t.Title)||"Kh\xF4ng c\xF3 m\xF4 t\u1EA3"," (",r.CountListType(i),") ")}}function it(o,a){if(o&1&&A(0,"img",27),o&2){let e=d().$implicit;U("src",e==null||e.Nguoitao==null||e.Nguoitao.avatar==null?null:e.Nguoitao.avatar.url,N)}}function at(o,a){o&1&&(n(0,"span",28),s(1," account_circle"),l())}function rt(o,a){if(o&1&&(n(0,"a",14),x(1,it,1,1,"img",27)(2,at,2,0,"span",28),n(3,"div",29)(4,"div",30)(5,"div",31),s(6),l(),n(7,"div",31),s(8),K(9,"date"),l()(),n(10,"div",32),s(11),l(),n(12,"div")(13,"span"),s(14),l()()()()),o&2){let e,t,i=a.$implicit,r=d();f("href",Q(13,Ye,"admin/hotro"+i.id),N)("routerLink",i.id),c(),J(!(i==null||i.Nguoitao==null)&&i.Nguoitao.avatar?1:2),c(5),T((i==null?null:i.Hoten)||"Ch\u01B0a C\xF3 T\xEAn"),c(2),T(W(9,10,i==null?null:i.CreateAt,"dd/MM/yyyy")),c(3),T(i.Title),c(2),k("rounded-lg p-1 text-white ",((e=r.GetNameType(i.Type))==null?null:e.bg)||"bg-slate-600",""),c(),T(((t=r.GetNameType(i.Type))==null?null:t.Title)||"Kh\xF4ng c\xF3 m\xF4 t\u1EA3")}}function nt(o,a){o&1&&(n(0,"div",15),s(1,"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u."),l())}function ot(o,a){if(o&1&&(n(0,"mat-option",41),s(1),l()),o&2){let e=a.$implicit;f("value",e.value),c(),T(e.Title)}}function lt(o,a){o&1&&(n(0,"div",15),s(1,"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u."),l())}function st(o,a){if(o&1){let e=_();n(0,"h2",33),s(1,"T\u1EA1o M\u1EDBi H\u1ED7 Tr\u1EE3"),l(),n(2,"mat-dialog-content")(3,"div",34)(4,"mat-form-field",16)(5,"mat-label"),s(6,"Ti\xEAu \u0110\u1EC1"),l(),n(7,"input",35),z("ngModelChange",function(i){u(e);let r=d();return V(r.Detail.Title,i)||(r.Detail.Title=i),m(i)}),l()(),n(8,"mat-form-field",16)(9,"mat-label"),s(10,"Danh M\u1EE5c"),l(),n(11,"mat-select",36),z("ngModelChange",function(i){u(e);let r=d();return V(r.Detail.Type,i)||(r.Detail.Type=i),m(i)}),n(12,"div",37)(13,"mat-form-field",38)(14,"input",39),p("input",function(i){u(e);let r=d();return m(r.DoFindKhachhang(i))}),l()(),n(15,"div",40),w(16,ot,2,2,"mat-option",41,je,!1,lt,2,0,"div",15),l()()()()()(),n(19,"mat-dialog-actions",42)(20,"button",43),s(21,"\u0110\xF3ng"),l(),n(22,"button",44),p("click",function(){u(e);let i=d();return m(i.create())}),s(23,"T\u1EA1o"),l()()}if(o&2){let e=d();c(7),q("ngModel",e.Detail.Title),f("ngModelOptions",B(5,Ze)),c(4),q("ngModel",e.Detail.Type),f("ngModelOptions",B(6,Ze)),c(5),L(e.FilterListType)}}var Ue=class o{constructor(a,e,t){this._breakpointObserver=a;this._router=e;this.platformId=t;P(this.platformId)&&(this.FilterColumns=JSON.parse(localStorage.getItem("hotro_FilterColumns")||"[]")),this._AdminmainComponent.drawer1.close(),this._AdminmainComponent.drawer.close(),this._AdminmainComponent.drawer.mode="over"}Detail={Type:"baoloi"};dataSource;displayedColumns=[];ColumnName={STT:"STT"};FilterColumns=[];Columns=[];ListHotro=C([]);InitHotro=[];CountItem=0;isFullScreen=!1;profile={};paginator;sort;drawer;_hotrosService=y(F);_UserService=y(pe);_AdminmainComponent=y(Oe);_snackBar=y(ue);ngOnInit(){return h(this,null,function*(){this.profile=yield this._UserService.getProfile(),yield this._hotrosService.getAllHotro(),this.ListHotro=this._hotrosService.ListHotro,this.InitHotro=this.ListHotro(),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}initializeColumns(){this.Columns=Object.keys(R[0]).map(a=>({key:a,value:R[0][a],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("hotro_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(a=>a.isShow).map(a=>a.key),this.ColumnName=this.FilterColumns.reduce((a,e)=>(e.isShow&&(a[e.key]=e.value),a),{})}setupDataSource(){this.dataSource=new Je(this.ListHotro().slice(1).map(a=>this.FilterColumns.filter(e=>e.isShow).reduce((e,t)=>(e[t.key]=a[t.key],e),{}))),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.paginator&&(this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i")}setupDrawer(){this._breakpointObserver.observe([oe.Handset]).subscribe(a=>{a.matches?this.drawer.mode="side":this.drawer.mode="side"})}toggleColumn(a){let e=this.FilterColumns.find(t=>t.key===a.key);e&&(e.isShow=!e.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(a=>a.isShow).map(a=>a.key),this.ColumnName=this.FilterColumns.reduce((a,e)=>(e.isShow&&(a[e.key]=e.value),a),{}),this.setupDataSource(),localStorage.setItem("hotro_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(a){let e=a.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(t=>t.value.toLowerCase().includes(e))}applyFilter(a){let e=a.target.value;this.dataSource.filter=e.trim().toLowerCase(),console.log(this.dataSource),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}create(){return h(this,null,function*(){if(!this.Detail.Title||this.Detail.Title=="")this._snackBar.open("Vui l\xF2ng nh\u1EADp ti\xEAu \u0111\u1EC1","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});else{this.Detail.idCreate=this.profile.id;let a=yield this._hotrosService.CreateHotro(this.Detail);this.dialogCreateRef.close(),this.Detail={Type:"baoloi"},this._router.navigate(["admin/hotro",a.id])}})}dialog=y(xe);dialogCreateRef;openCreateDialog(a){this.dialogCreateRef=this.dialog.open(a,{hasBackdrop:!0,disableClose:!0})}FilterListType=I;GetNameType(a){return I.find(t=>t.value===a)}FilterType(a){this.ListHotro.set(this.InitHotro.filter(e=>e.Type===a.value))}CountListType(a){return this.InitHotro.filter(e=>e.Type===a.value).length}DoFindKhachhang(a){let e=a.target.value.toLowerCase();this.FilterListType=I.filter(t=>t.Title.toLowerCase().includes(e))}applyFilterType(a){let e=a.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isSearch=!1;writeExcelFile(){}readExcelFile(a){}LoadDrive(){}static \u0275fac=function(e){return new(e||o)(S(ne),S(H),S(b))};static \u0275cmp=G({type:o,selectors:[["app-listhotro"]],viewQuery:function(e,t){if(e&1&&(E(ze,5),E(Re,5),E(We,7)),e&2){let i;D(i=M())&&(t.paginator=i.first),D(i=M())&&(t.sort=i.first),D(i=M())&&(t.drawer=i.first)}},decls:19,vars:7,consts:[["drawer",""],["dialogCreateTemplate",""],["input",""],["uploadfile",""],["autosize","",1,"w-full","h-full"],[3,"position"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","justify-between"],[1,"relative","flex","flex-col","space-y-2","w-full","h-full","p-2"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["class","w-full flex flex-row space-x-2 items-center",4,"ngIf"],["class","flex flex-row space-x-2 items-center",4,"ngIf"],[1,"flex","flex-row","space-x-2","items-center","cursor-pointer"],[3,"class"],[1,"relative","w-full","overflow-auto","cursor-pointer"],["routerLinkActive","bg-slate-100",1,"flex","flex-row","space-x-2","items-center","hover:bg-slate-100","rounded-lg",3,"href","routerLink"],[1,"p-2","text-center","text-red-700","font-bold"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","",1,"!rounded-lg",3,"keyup"],["matTooltip","\u0110\xF3ng","color","primary","mat-icon-button","",3,"click"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\xECm Ki\u1EBFm","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[3,"click"],[1,"w-8","h-8","rounded-full",3,"src"],[1,"text-[48px]","material-symbols-outlined"],[1,"w-full","flex","flex-col","space-y-1","p-2"],[1,"w-full","flex","flex-row","items-center","space-x-2","justify-between"],[1,"text-xs","italic"],[1,"font-bold"],["mat-dialog-title",""],[1,"lg:min-w-[400px]","w-full","h-full","flex","flex-col","space-y-8","items-center","p-4"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["align","end"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){e&1&&(n(0,"mat-drawer-container",4)(1,"mat-drawer",5,0),A(3,"router-outlet"),l(),n(4,"div",6)(5,"div",7)(6,"div",8),x(7,Xe,9,0,"div",9)(8,et,18,0,"div",10),l(),n(9,"div",11),w(10,tt,2,5,"div",12,je),l(),n(12,"div",13),w(13,rt,15,15,"a",14,Z,!1,nt,2,0,"div",15),A(16,"div"),l()()()(),x(17,st,24,7,"ng-template",null,1,Y)),e&2&&(c(),k("flex flex-col ",t.isFullScreen?"lg:!w-full":"lg:!w-2/3"," !w-screen h-full"),f("position","end"),c(6),f("ngIf",t.isSearch),c(),f("ngIf",!t.isSearch),c(2),L(t.FilterListType),c(3),L(t.ListHotro()))},dependencies:[Pe,Me,De,Ie,He,Ge,$e,Be,Ce,ge,he,fe,ie,Te,ye,de,se,ce,Ne,Fe,le,te,X,ee,Se,_e,ve,be,ae,re,Ee,ke,we,Ae,Le,Ve,qe],encapsulation:2,changeDetection:0})};export{R as a,I as b,ct as c,F as d,Ue as e};
