import './polyfills.server.mjs';
import{a as m}from"./chunk-ZYIPHREZ.mjs";import{a as u}from"./chunk-6EFOJMAD.mjs";import{a as h,d}from"./chunk-5YOTNGM2.mjs";import{ja as p,pa as g,u as n}from"./chunk-TKMPR5S6.mjs";import{j as i}from"./chunk-RIAI3ORJ.mjs";var l=class o{http=g(d);storageService=g(m);baseUrl=u.APIURL;getHeaders(){return new h({"Content-Type":"application/json",Authorization:"Bearer "+this.storageService.getItem("token")})}getPriceHistory(t,r){return i(this,null,function*(){try{let e=`${this.baseUrl}/banggia/${t}/sanpham/${r}/price-history`;return yield n(this.http.get(e,{headers:this.getHeaders()}))}catch(e){throw console.error("Error fetching price history:",e),e}})}getCurrentPrice(t,r){return i(this,null,function*(){try{let e=`${this.baseUrl}/banggia/${t}/sanpham/${r}/current-price`;return yield n(this.http.get(e,{headers:this.getHeaders()}))}catch(e){throw console.error("Error fetching current price:",e),e}})}updateSinglePrice(t,r,e,a,c){return i(this,null,function*(){try{let s=`${this.baseUrl}/banggia/bulk-update-prices`;return yield n(this.http.post(s,{updates:[{banggiaId:t,sanphamId:r,newPrice:e,reason:a||"C\u1EADp nh\u1EADt gi\xE1 t\u1EEB b\u1EA3ng gi\xE1"}],userId:c||"system"},{headers:this.getHeaders()}))}catch(s){throw console.error("Error updating single price:",s),s}})}bulkUpdatePrices(t){return i(this,null,function*(){try{let r=`${this.baseUrl}/banggia/bulk-update-prices`;return yield n(this.http.post(r,t,{headers:this.getHeaders()}))}catch(r){throw console.error("Error bulk updating prices:",r),r}})}verifyOrderPrices(t){return i(this,null,function*(){try{let r=`${this.baseUrl}/donhang/verify-prices/${t}`;return yield n(this.http.get(r,{headers:this.getHeaders()}))}catch(r){throw console.error("Error verifying order prices:",r),r}})}getPriceAtDate(t,r,e){return i(this,null,function*(){try{let a=e.toISOString(),c=`${this.baseUrl}/donhang/price-at-date?banggiaId=${t}&sanphamId=${r}&date=${a}`;return yield n(this.http.get(c,{headers:this.getHeaders()}))}catch(a){throw console.error("Error fetching price at date:",a),a}})}static \u0275fac=function(r){return new(r||o)};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
