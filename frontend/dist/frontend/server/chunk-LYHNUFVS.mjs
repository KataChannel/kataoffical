import './polyfills.server.mjs';
import{c as Ye}from"./chunk-YGRLSL7Y.mjs";import{a as Xe}from"./chunk-FXG3QSOC.mjs";import{a as Je}from"./chunk-APAA3HFR.mjs";import"./chunk-K4FHW6UW.mjs";import{a as je,b as P,c as O,d as ze,e as qe}from"./chunk-E5CIQFFK.mjs";import{c as Re,d as Ue,e as Ke,g as Ge,s as Qe}from"./chunk-PE5EYNGJ.mjs";import"./chunk-FXE5I4G3.mjs";import"./chunk-KFOBXJYA.mjs";import"./chunk-B4GTQC4O.mjs";import"./chunk-DXHRUIR5.mjs";import"./chunk-OFJ27WX3.mjs";import"./chunk-UYEYZYNQ.mjs";import"./chunk-UDJCPRBF.mjs";import"./chunk-26WWJ5GO.mjs";import"./chunk-7BHYQM75.mjs";import"./chunk-26NM6QMQ.mjs";import{a as fe,b as Ee,c as ve}from"./chunk-ZA5LSI2B.mjs";import{a as Le,b as Ne}from"./chunk-AL3ZCZTD.mjs";import"./chunk-SWDJOT3A.mjs";import{a as xe}from"./chunk-STJ2MORB.mjs";import"./chunk-73IBRO6I.mjs";import{a as Ae,b as Oe,c as We,k as Pe}from"./chunk-2COFYB7K.mjs";import{d as ye}from"./chunk-NCVHCAMC.mjs";import{a as q,b as Ce}from"./chunk-Q2K4SCD6.mjs";import{b as we,g as Te,j as be,l as Se,n as Me,p as He,r as Ve,u as Fe,v as Ie,x as Be,y as ke}from"./chunk-IQUZIOHZ.mjs";import"./chunk-SDPZX77S.mjs";import"./chunk-7ZQLLCLM.mjs";import{a as _e}from"./chunk-KOBSONV6.mjs";import"./chunk-JSSZE7PS.mjs";import{a as z,c as ge,e as he}from"./chunk-6HDYPSHY.mjs";import"./chunk-IDUXSRZE.mjs";import{ha as De,y as pe,z as ce}from"./chunk-D22ASRXW.mjs";import"./chunk-7T6LZHUD.mjs";import{a as de,d as me}from"./chunk-2ATDIMG4.mjs";import"./chunk-CA6MWP3S.mjs";import{n as le,o as ae,t as oe,u as re,v as ue,y as se}from"./chunk-6BL7Z2F4.mjs";import{Ac as F,Bc as I,Cc as B,Gb as ee,Gc as L,Hc as o,Ic as g,Jc as _,Mc as x,Nb as H,Nc as f,Oc as E,Qc as v,Wa as J,Wb as te,Wc as b,Xb as ie,Xc as k,Yc as j,Zb as c,bc as K,cc as ne,fc as G,gc as Q,hc as n,ic as t,jc as y,nc as A,oa as M,ob as Y,pb as U,sb as Z,sc as h,tb as u,uc as D,xa as m,xb as $,ya as p,yb as W}from"./chunk-GWTCN232.mjs";import"./chunk-KB5IWD3E.mjs";import{j as R}from"./chunk-RIAI3ORJ.mjs";function Ze(d){if(isNaN(d))return"Kh\xF4ng ph\u1EA3i s\u1ED1 h\u1EE3p l\u1EC7";let a=["","m\u1ED9t","hai","ba","b\u1ED1n","n\u0103m","s\xE1u","b\u1EA3y","t\xE1m","ch\xEDn"],e=["l\u1EBB","m\u01B0\u1EDDi","hai m\u01B0\u01A1i","ba m\u01B0\u01A1i","b\u1ED1n m\u01B0\u01A1i","n\u0103m m\u01B0\u01A1i","s\xE1u m\u01B0\u01A1i","b\u1EA3y m\u01B0\u01A1i","t\xE1m m\u01B0\u01A1i","ch\xEDn m\u01B0\u01A1i"],l=["","ngh\xECn","tri\u1EC7u","t\u1EF7","ngh\xECn t\u1EF7","tri\u1EC7u t\u1EF7"],i="",r=d?.toString(),s=[];for(;r?.length>0;)s.unshift(r.slice(-3)),r=r.slice(0,-3);for(let S=0;S<s.length;S++){if(parseInt(s[S])===0)continue;let[w,N,T]=s[S].padStart(3,"0").split("").map(Number),V="";w&&(V+=a[w]+" tr\u0103m "),N>1?(V+=e[N]+" ",T!==0&&(V+=(T===5?"l\u0103m":a[T])+" ")):N===1?(V+="m\u01B0\u1EDDi ",T!==0&&(V+=(T===5?"l\u0103m":a[T])+" ")):T!==0&&(V+=(w?"l\u1EBB ":"")+(T===5?"n\u0103m":a[T])+" "),i+=V+l[s.length-1-S]+" "}return i.trim()+" \u0110\u1ED3ng"}var it=["drawer"],$e=["editable"],nt=["viewChat"],lt=()=>[Fe,He,Ve,Be,q,z,Le,De,we,Se,Te,be,Ae,Oe,We],C=()=>({standalone:!0}),et=(d,a)=>a.id;function at(d,a){if(d&1&&(n(0,"mat-option",38),o(1),t()),d&2){let e=a.$implicit;c("value",e.value),u(),g(e.Title)}}function ot(d,a){d&1&&(n(0,"div",39),o(1,"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u."),t())}function rt(d,a){if(d&1){let e=A();n(0,"div",49)(1,"span"),o(2),t(),n(3,"mat-form-field",31)(4,"mat-label"),o(5,"Ti\xEAu \u0110\u1EC1"),t(),n(6,"input",32),E("ngModelChange",function(i){let r=m(e).$index,s=D(3);return f(s.Detail.Dexuat.Chitiet[r].Title,i)||(s.Detail.Dexuat.Chitiet[r].Title=i),p(i)}),t()(),n(7,"mat-form-field",31)(8,"mat-label"),o(9,"Th\xE0nh Ti\u1EC1n"),t(),n(10,"input",50),E("ngModelChange",function(i){let r=m(e).$index,s=D(3);return f(s.Detail.Dexuat.Chitiet[r].Thanhtien,i)||(s.Detail.Dexuat.Chitiet[r].Thanhtien=i),p(i)}),t()(),n(11,"mat-form-field",31)(12,"mat-label"),o(13,"Ghi Ch\xFA"),t(),n(14,"input",51),E("ngModelChange",function(i){let r=m(e).$index,s=D(3);return f(s.Detail.Dexuat.Chitiet[r].Ghichu,i)||(s.Detail.Dexuat.Chitiet[r].Ghichu=i),p(i)}),t()(),n(15,"button",25),h("click",function(){let i=m(e).$index,r=D(3);return p(r.RemoveItem(i))}),o(16,"Xo\xE1 "),n(17,"mat-icon"),o(18,"delete"),t()()()}if(d&2){let e=a.$index,l=D(3);u(2),g(e+1),u(4),x("ngModel",l.Detail.Dexuat.Chitiet[e].Title),c("ngModelOptions",v(7,C)),u(4),x("ngModel",l.Detail.Dexuat.Chitiet[e].Thanhtien),c("ngModelOptions",v(8,C)),u(4),x("ngModel",l.Detail.Dexuat.Chitiet[e].Ghichu),c("ngModelOptions",v(9,C))}}function ut(d,a){if(d&1){let e=A();n(0,"div",27)(1,"mat-form-field",28)(2,"mat-label"),o(3,"Ng\xE0y T\u1EA1o"),t(),n(4,"input",29),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Ngaytao,i)||(r.Detail.Dexuat.Ngaytao=i),p(i)}),t(),y(5,"mat-datepicker-toggle",30)(6,"mat-datepicker",null,4),t(),n(8,"mat-form-field",31)(9,"mat-label"),o(10,"Ti\xEAu \u0110\u1EC1"),t(),n(11,"input",32),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Title,i)||(r.Detail.Title=i),p(i)}),t()(),n(12,"mat-form-field",31)(13,"mat-label"),o(14,"Danh M\u1EE5c"),t(),n(15,"mat-select",33),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Type,i)||(r.Detail.Type=i),p(i)}),n(16,"div",34)(17,"mat-form-field",35)(18,"input",36),h("input",function(i){m(e);let r=D(2);return p(r.DoFindKhachhang(i))}),t()(),n(19,"div",37),G(20,at,2,2,"mat-option",38,et,!1,ot,2,0,"div",39),t()()()(),n(23,"mat-form-field",31)(24,"mat-label"),o(25,"Ng\u01B0\u1EDDi Nh\u1EADn"),t(),n(26,"input",40),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Nguoinhan,i)||(r.Detail.Dexuat.Nguoinhan=i),p(i)}),t()(),n(27,"mat-form-field",31)(28,"mat-label"),o(29,"Tr\u01B0\u1EDFng b\u1ED9 ph\u1EADn"),t(),n(30,"input",41),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Truongbophan,i)||(r.Detail.Dexuat.Truongbophan=i),p(i)}),t()(),n(31,"mat-form-field",31)(32,"mat-label"),o(33,"Gi\xE1m \u0111\u1ED1c K\u1EBF to\xE1n"),t(),n(34,"input",42),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Ketoan,i)||(r.Detail.Dexuat.Ketoan=i),p(i)}),t()(),n(35,"mat-form-field",31)(36,"mat-label"),o(37,"Ng\u01B0\u1EDDi \u0110\u1EC1 Xu\u1EA5t"),t(),n(38,"input",43),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Nguoidexuat,i)||(r.Detail.Dexuat.Nguoidexuat=i),p(i)}),t()(),n(39,"mat-form-field",31)(40,"mat-label"),o(41,"B\u1ED9 Ph\u1EADn"),t(),n(42,"input",44),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Bophan,i)||(r.Detail.Dexuat.Bophan=i),p(i)}),t()(),n(43,"mat-form-field",31)(44,"mat-label"),o(45,"V\u1ECB Tr\xED"),t(),n(46,"input",45),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Vitri,i)||(r.Detail.Dexuat.Vitri=i),p(i)}),t()(),n(47,"div",46)(48,"div",47)(49,"div",48),G(50,rt,19,10,"div",49,et),t()(),n(52,"div")(53,"button",26),h("click",function(){m(e);let i=D(2);return p(i.Detail.Dexuat.Chitiet.push({Title:"",Thanhtien:0,Ghichu:""}))}),o(54,"Th\xEAm "),n(55,"mat-icon"),o(56,"add"),t()()()(),n(57,"mat-form-field",31)(58,"mat-label"),o(59,"T\u1EA1m \u1EE8ng"),t(),n(60,"input",50),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Tamung,i)||(r.Detail.Dexuat.Tamung=i),p(i)}),t()(),n(61,"mat-form-field",31)(62,"mat-label"),o(63,"Ti\u1EC1n B\u1EB1ng Ch\u1EEF"),t(),n(64,"input",45),E("ngModelChange",function(i){m(e);let r=D(2);return f(r.Detail.Dexuat.Tienbangchu,i)||(r.Detail.Dexuat.Tienbangchu=i),p(i)}),t()()()}if(d&2){let e=L(7),l=D(2);u(),c("appearance","outline")("subscriptSizing","dynamic"),u(3),c("matDatepicker",e),x("ngModel",l.Detail.Dexuat.Ngaytao),c("ngModelOptions",v(27,C)),u(),c("for",e),u(6),x("ngModel",l.Detail.Title),c("ngModelOptions",v(28,C)),u(4),x("ngModel",l.Detail.Type),c("ngModelOptions",v(29,C)),u(5),Q(l.FilterListType),u(6),x("ngModel",l.Detail.Dexuat.Nguoinhan),c("ngModelOptions",v(30,C)),u(4),x("ngModel",l.Detail.Dexuat.Truongbophan),c("ngModelOptions",v(31,C)),u(4),x("ngModel",l.Detail.Dexuat.Ketoan),c("ngModelOptions",v(32,C)),u(4),x("ngModel",l.Detail.Dexuat.Nguoidexuat),c("ngModelOptions",v(33,C)),u(4),x("ngModel",l.Detail.Dexuat.Bophan),c("ngModelOptions",v(34,C)),u(4),x("ngModel",l.Detail.Dexuat.Vitri),c("ngModelOptions",v(35,C)),u(4),Q(l.Detail==null||l.Detail.Dexuat==null?null:l.Detail.Dexuat.Chitiet),u(10),x("ngModel",l.Detail.Dexuat.Tamung),c("ngModelOptions",v(36,C)),u(4),x("ngModel",l.Detail.Dexuat.Tienbangchu),c("ngModelOptions",v(37,C))}}function st(d,a){if(d&1){let e=A();n(0,"div",22)(1,"div",23),o(2,"Th\xF4ng Tin \u0110\u1EC1 Xu\u1EA5t"),t(),H(3,ut,65,38),te(4,3,lt),ie(),n(6,"div",24)(7,"button",25),h("click",function(){m(e),D();let i=L(2);return p(i.toggle())}),o(8,"\u0110\xF3ng"),t(),n(9,"button",26),h("click",function(){m(e);let i=D();return p(i.saveContent())}),o(10,"L\u01B0u"),t()()()}}function dt(d,a){if(d&1&&(n(0,"tr")(1,"td",78),o(2),t(),n(3,"td",61),o(4),t(),n(5,"td",64),o(6),b(7,"number"),t(),n(8,"td",79),o(9),t()()),d&2){let e=a.$implicit,l=a.index;u(2),g(l+1),u(2),g(e.Title),u(2),_("",k(7,4,e.Thanhtien),"\u0111"),u(3),g(e.Ghichu)}}function mt(d,a){if(d&1&&(n(0,"li",80)(1,"span"),o(2),t(),n(3,"span",81),o(4),t()()),d&2){let e=a.$implicit;u(2),g(e.Title),u(2),g(e.Ghichu)}}function pt(d,a){if(d&1&&(n(0,"div",52)(1,"div",53)(2,"div",54),o(3,"BM-04-QT-KT-02"),t(),n(4,"div",54),o(5,"Ng\xE0y hi\u1EC7u l\u1EF1c: 10/01/2018"),t(),n(6,"div",55),o(7,"PHI\u1EBEU \u0110\u1EC0 NGH\u1ECA THANH TO\xC1N, QUY\u1EBET TO\xC1N"),t(),n(8,"div",54),o(9),b(10,"date"),t(),n(11,"div",56)(12,"span")(13,"strong"),o(14,"K\xEDnh g\u1EEDi:"),t(),o(15),t(),n(16,"span")(17,"strong"),o(18,"H\u1ECD v\xE0 t\xEAn:"),t(),o(19),t(),n(20,"span")(21,"strong"),o(22,"B\u1ED9 ph\u1EADn:"),t(),o(23),t(),n(24,"span")(25,"strong"),o(26,"Ch\u1EE9c v\u1EE5:"),t(),o(27),t(),n(28,"span")(29,"strong"),o(30,"\u0110\u1EC1 Ngh\u1ECB Chi S\u1ED1 Ti\u1EC1n:"),t(),o(31),b(32,"number"),t()(),n(33,"div",57)(34,"table",58)(35,"thead")(36,"tr",59)(37,"th",60),o(38,"STT"),t(),n(39,"th",61),o(40,"N\u1ED9i dung"),t(),n(41,"th",61),o(42,"S\u1ED1 ti\u1EC1n"),t(),n(43,"th",61),o(44,"Ghi ch\xFA"),t()()(),n(45,"tbody"),H(46,dt,10,6,"tr",18),t(),n(47,"tfoot")(48,"tr",62)(49,"td",63),o(50,"T\u1ED5ng c\u1ED9ng:"),t(),n(51,"td",64),o(52),b(53,"number"),t(),y(54,"td",61),t(),n(55,"tr",62)(56,"td",63),o(57,"S\u1ED1 \u0111\xE3 t\u1EA1m \u1EE9ng:"),t(),n(58,"td",64)(59,"span"),o(60),b(61,"number"),t()(),y(62,"td",61),t(),n(63,"tr",62)(64,"td",63),o(65,"S\u1ED1 ti\u1EC1n (C\xF2n l\u1EA1i) \u0111\u1EC1 ngh\u1ECB chi:"),t(),n(66,"td",64),o(67),b(68,"number"),t(),y(69,"td",61),t()()()(),n(70,"p",65)(71,"strong"),o(72,"S\u1ED1 Ti\u1EC1n B\u1EB1ng Ch\u1EEF:"),t(),o(73),t(),n(74,"div",66)(75,"div",67)(76,"span")(77,"strong"),o(78,"Gi\xE1m \u0111\u1ED1c K\u1EBF to\xE1n"),t(),y(79,"br"),o(80,"(K\xFD v\xE0 Ghi r\xF5 H\u1ECD T\xEAn)"),t(),n(81,"span",68),o(82),t()(),n(83,"div",67)(84,"span")(85,"strong"),o(86,"Tr\u01B0\u1EDFng b\u1ED9 ph\u1EADn"),t(),y(87,"br"),o(88,"(K\xFD v\xE0 Ghi r\xF5 H\u1ECD T\xEAn)"),t(),n(89,"span",68),o(90),t()(),n(91,"div",67)(92,"span")(93,"strong"),o(94,"Ng\u01B0\u1EDDi \u0111\u1EC1 ngh\u1ECB"),t(),y(95,"br"),o(96,"(K\xFD v\xE0 Ghi r\xF5 H\u1ECD T\xEAn)"),t(),n(97,"span",68),o(98),t()()()(),n(99,"div",53)(100,"div",69),o(101,"BM-01-QT-KT-02"),t(),n(102,"div",69),o(103,"Ng\xE0y hi\u1EC7u l\u1EF1c: 10/01/2018"),t(),n(104,"div",70),o(105,"PHI\u1EBEU \u0110\u1EC0 XU\u1EA4T C\xD4NG VI\u1EC6C"),t(),n(106,"div",71)(107,"div")(108,"strong"),o(109,"H\u1ECD v\xE0 t\xEAn:"),t(),o(110),t(),n(111,"div")(112,"strong"),o(113,"B\u1ED9 ph\u1EADn:"),t(),o(114),t(),n(115,"div")(116,"strong"),o(117,"Ch\u1EE9c danh:"),t(),o(118),t()(),n(119,"div",72)(120,"strong"),o(121,"\u0110\u1EC1 xu\u1EA5t c\xF4ng vi\u1EC7c nh\u01B0 sau: "),t(),n(122,"span",62),o(123),t()(),n(124,"div",73)(125,"ul",74),H(126,mt,5,2,"li",75),t()(),n(127,"div",76),o(128),b(129,"number"),t(),n(130,"div",69),o(131),b(132,"date"),t(),n(133,"div",77)(134,"div",67)(135,"span")(136,"strong"),o(137,"BG\u0110/Tr\u01B0\u1EDFng B\u1ED9 ph\u1EADn"),t(),y(138,"br"),o(139,"(K\xFD v\xE0 Ghi r\xF5 H\u1ECD T\xEAn)"),t(),n(140,"span",68),o(141),t()(),n(142,"div",67)(143,"span")(144,"strong"),o(145,"Ng\u01B0\u1EDDi \u0111\u1EC1 ngh\u1ECB"),t(),y(146,"br"),o(147,"(K\xFD v\xE0 Ghi r\xF5 H\u1ECD T\xEAn)"),t(),n(148,"span",68),o(149),t()()()()()),d&2){let e=D();u(9),g(j(10,23,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Ngaytao,"dd/MM/yyyy")),u(6),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Nguoinhan,""),u(4),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Nguoidexuat,""),u(4),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Bophan,""),u(4),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Vitri,""),u(4),_(" ",k(32,26,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Tongtien),"\u0111"),u(15),c("ngForOf",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Chitiet),u(6),_("",k(53,28,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Tongtien),"\u0111"),u(8),_("",k(61,30,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Tamung),"\u0111"),u(7),_("",k(68,32,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.TongChi),"\u0111"),u(6),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Tienbangchu,""),u(9),g(e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Ketoan),u(8),g(e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Truongbophan),u(8),g(e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Nguoidexuat),u(12),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Nguoidexuat,""),u(4),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Bophan,""),u(4),_(" ",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Vitri,""),u(5),g(e.Detail==null?null:e.Detail.Title),u(3),c("ngForOf",e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Chitiet),u(2),_("D\u1EF1 to\xE1n kinh ph\xED: ",k(129,34,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Tongtien),"\u0111"),u(3),_("Ng\xE0y ",j(132,36,e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Ngaytao,"dd/MM/yyyy"),""),u(10),g(e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Truongbophan),u(8),g(e.Detail==null||e.Detail.Dexuat==null?null:e.Detail.Dexuat.Nguoidexuat)}}function ct(d,a){if(d&1&&(n(0,"div",82)(1,"span",62),o(2),t(),y(3,"span",83),t()),d&2){let e=D().$implicit;u(2),g(e.idUser),u(),c("innerHTML",e.Content,Y)}}function Dt(d,a){if(d&1&&(n(0,"div",82)(1,"span",62),o(2),t(),y(3,"img",84),t()),d&2){let e=D().$implicit;u(2),g(e.idUser),u(),c("src",e.Content,U)}}function gt(d,a){if(d&1&&(n(0,"div",82)(1,"span",62),o(2),t(),n(3,"a",85),o(4),t()()),d&2){let e=D().$implicit;u(2),g(e.idUser),u(),c("href",e.Content,U),u(),g(e.FileName)}}function ht(d,a){if(d&1&&(n(0,"div",null,5),H(2,ct,4,2,"div",82)(3,Dt,4,2,"div",82)(4,gt,5,3,"div",82),t()),d&2){let e=a.$implicit;u(2),ne(e.Type==="text"?2:e.Type==="image"?3:e.Type==="file"?4:-1)}}var tt=class d{constructor(a,e,l){this._breakpointObserver=a;this.renderer=e;this.platformId=l;se(this.platformId)&&(this.FilterColumns=JSON.parse(localStorage.getItem("hotro_FilterColumns")||"[]"))}Detail={};dataSource;displayedColumns=[];ColumnName={STT:"STT"};FilterColumns=[];Columns=[];Listhotro=je;toolbar=["heading","alignment","|","bold","italic","link","bulletedList","numberedList","blockQuote","undo","redo"];tickets=O.tickets;users=O.users;channels=O.channels;replies=O.replies;ListItem=[{Title:"",Thanhtien:0,Ghichu:""}];profile={};paginator;sort;drawer;_hotrosService=M(ze);_router=M(de);_route=M(me);_ListHotroComponent=M(qe);_UploadService=M(Je);_UserService=M(xe);_snackBar=M(_e);editable;viewChat;handleShortcut(a){a.ctrlKey&&a.key.toLowerCase()==="i"&&(a.preventDefault(),this.editable&&(this.editable.nativeElement.focus(),this.moveCursorToEnd(this.editable.nativeElement)))}scrollToBottom(){console.log(this.viewChat),setTimeout(()=>{this.viewChat&&this.viewChat.length>0&&this.viewChat.last.nativeElement.scrollIntoView({behavior:"smooth"})},100)}ngOnInit(){return R(this,null,function*(){this._router.paramMap.subscribe(a=>R(this,null,function*(){let e=a.get("id");e?yield this._hotrosService.getHotroByid(e).then(l=>{l&&(this.Detail=this._hotrosService.Hotro(),this.Detail.Dexuat.Chitiet=this.Detail.Dexuat.Chitiet||[],this.Detail.Dexuat.Tienbangchu=Ze(this.Detail.Dexuat.TongChi)||"Ki\u1EC3m tra l\u1EA1i s\u1ED1 ti\u1EC1n",this.Detail.Chat=this.Detail.idChat||[],console.log(this.Detail),this._UserService.getProfile().then(i=>{this.profile=i}),this._ListHotroComponent.drawer.open())}):this._ListHotroComponent.drawer.close()}))})}editableDiv;editiorValue="";ngAfterViewInit(){this.scrollToBottom(),this.editableDiv.nativeElement.innerHTML=this.editiorValue,this.renderer.listen(this.editableDiv.nativeElement,"keydown",a=>{if(a.key==="Enter"&&!a.shiftKey){if(this.editiorValue.trim()==="")return;a.preventDefault(),this.SendMess(),document.execCommand("insertHTML",!1,"<br><br>")}}),this.renderer.listen(this.editableDiv.nativeElement,"input",()=>{let a=this.editableDiv.nativeElement.innerHTML;(a.trim()==="<br>"||a.trim()==="<br><br>"||!this.editableDiv.nativeElement.innerText.trim())&&(a="",this.editableDiv.nativeElement.innerHTML=a),this.editiorValue=a})}getUserName(a){let e=this.users.find(l=>l.id===a);return e?e.username:"Unknown"}GetNameType(a){return P.find(e=>e.value===a)}printContent(){let a=document.getElementById("printContent");a&&Xe(a,{scale:2}).then(e=>{let l=e.toDataURL("image/png"),i=window.open("","_blank");i&&(i.document.write(`
        <html>
          <head>
            <title>${this.Detail?.Title}</title>
          </head>
          <body style="text-align: center;">
            <img src="${l}" style="max-width: 100%;"/>
            <script>
              window.onload = function() {
                window.print();
                window.onafterprint = function() { window.close(); };
              };
            </script>
          </body>
        </html>
      `),i.document.close())})}CopyContent(){this._snackBar.open("\u0110ang Coppy \u0110\u1EC1 Xu\u1EA5t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),delete this.Detail.id,this.Detail.Title=`Copy ${this.Detail.Title}`,this._hotrosService.CreateHotro(this.Detail).then(a=>{console.log(a),setTimeout(()=>{},1e3)})}getChannelName(a){let e=this.channels.find(l=>l.id===a);return e?e.name:"Unknown"}onEditorChange(a){console.log(a)}RemoveItem(a){this.Detail.Dexuat.Chitiet.splice(a,1)}saveContent(){this.Detail.Dexuat.Tongtien=this.Detail.Dexuat.Chitiet.reduce((a,e)=>a+e.Thanhtien,0),this.Detail.Dexuat.TongChi=this.Detail.Dexuat.Tongtien-this.Detail.Dexuat.Tamung,this.drawer.close(),this._hotrosService.updateOneHotro(this.Detail).then(()=>{this.ngOnInit()})}DeleteItem(){this._hotrosService.DeleteHotro(this.Detail).then(()=>{this._snackBar.open("\u0110\xE3 X\xF3a","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._ListHotroComponent.drawer.close(),this._route.navigate(["admin/hotro"])})}getReplies(a){return this.replies.filter(e=>e.ticket_id===a)}setupDrawer(){this._breakpointObserver.observe([ce.Handset]).subscribe(a=>{a.matches?this.drawer.mode="side":this.drawer.mode="side"})}onContentChange(a){this.Detail=a}FilterListType=P;DoFindKhachhang(a){let e=a.target.value.toLowerCase();this.FilterListType=P.filter(l=>l.Title.toLowerCase().includes(e))}uploadfile(a){let e=a.target.files[0]}filePreview=null;isImage=!1;onFileSelected(a){let e=a.target.files[0];if(!e)return;let l=new FileReader;l.onload=i=>{this.filePreview=i.target.result,this.isImage=e.type.startsWith("image"),this.TempMess("image",i.target.result)},l.readAsDataURL(e)}uploadDriver(a){let e=a.target.files[0];this._UploadService.uploadDriver(e).then(l=>{console.log(l)})}isDragging=!1;onDragOver(a){this.isDragging=!0,a.preventDefault()}onDragLeave(a){this.isDragging=!1}ListtempsMess=[];TempMess(a,e){let l={idUser:this.profile?.id,Type:a||"text",Content:e};this.ListtempsMess.push(l)}SendMess(){this.editiorValue.trim()!==""&&this.ListtempsMess.push({idUser:this.profile?.id,Type:"text",Content:this.editiorValue}),this.ListtempsMess.length>0&&(this.Detail.Chat=[...this.Detail.Chat,...this.ListtempsMess],this.Detail.idChat=[...this.Detail.idChat,...this.ListtempsMess],this.ListtempsMess=[]),this.editableDiv.nativeElement.innerHTML="",this.scrollToBottom(),this._hotrosService.updateOneHotro(this.Detail).then(()=>{this.ngOnInit()})}onInput(a){let e=a.target;this.editiorValue=e.innerHTML}onDrop(a){a.preventDefault();let e=a.dataTransfer?.items,l=a.target;if(e){for(let i of e)if(i.kind==="file"){let r=i.getAsFile();r&&(r.type.startsWith("image/")?this.handleImageDrop(r,l):this.handleFileUpload(r,l))}else i.kind==="string"&&i.getAsString(r=>{this.editableDiv.nativeElement.innerHTML+=r,this.moveCursorToEnd(l)});this.isDragging=!1}}handleImageDrop(a,e){let l=new FileReader;l.onload=i=>{let r=document.createElement("img");r.src=i.target?.result,r.style.maxWidth="100%",r.style.margin="5px 0",e.appendChild(r),this.editableDiv.nativeElement.innerHTML+=r,this.ListtempsMess.push({idUser:this.profile?.id,Type:"image",Content:r.src}),this.moveCursorToEnd(e)},l.readAsDataURL(a)}handlePaste(a){a.preventDefault();let e=a.clipboardData||window.clipboardData,l=e.items,i=a.target;for(let r of l)if(r.type.startsWith("image/")){let s=r.getAsFile(),S=new FileReader;S.onload=X=>{let w=document.createElement("img");w.src=X.target?.result,w.style.maxWidth="100%",w.style.margin="5px 0",i.appendChild(w);let N=document.createTextNode(" ");i.appendChild(N),this.ListtempsMess.push({idUser:this.profile?.id,Type:"image",Content:w.src}),this.moveCursorToEnd(i)},S.readAsDataURL(s)}else if(r.type==="text/plain"){let s=e.getData("text/plain");this.editableDiv.nativeElement.innerHTML+=s,this.moveCursorToEnd(i)}else if(r.kind==="file"){let s=r.getAsFile();s&&this.handleFileUpload(s,i)}}handleFileUpload(a,e){let l=document.createElement("a");l.href=URL.createObjectURL(a),l.textContent=`\u{1F4CE} ${a.name}`,l.download=a.name,l.style.display="block",l.style.margin="5px 0",e.appendChild(l);let i=document.createTextNode(" ");e.appendChild(i),this.ListtempsMess.push({idUser:this.profile?.id,Type:"file",Content:l.download}),this.moveCursorToEnd(e)}moveCursorToEnd(a){let e=document.createRange(),l=window.getSelection();e.selectNodeContents(a),e.collapse(!1),l?.removeAllRanges(),l?.addRange(e)}goBack(){this._route.navigate(["admin/hotro"]),this._ListHotroComponent.drawer.close()}static \u0275fac=function(e){return new(e||d)(W(pe),W($),W(J))};static \u0275cmp=ee({type:d,selectors:[["app-detailhotro"]],viewQuery:function(e,l){if(e&1&&(F(Re,5),F(Ke,5),F(it,7),F($e,5),F($e,5),F(nt,5)),e&2){let i;I(i=B())&&(l.paginator=i.first),I(i=B())&&(l.sort=i.first),I(i=B())&&(l.drawer=i.first),I(i=B())&&(l.editable=i.first),I(i=B())&&(l.editableDiv=i.first),I(i=B())&&(l.viewChat=i)}},hostBindings:function(e,l){e&1&&h("keydown",function(r){return l.handleShortcut(r)},!1,Z)},decls:52,vars:12,consts:[["drawer",""],["editable",""],["fileInput",""],["fileDrive",""],["picker",""],["viewChat",""],["autosize","",1,"w-full","h-screen-16"],["mode","over",1,"flex","flex-col","!w-full","h-full","p-4","z-10",3,"position"],["class","relative w-full h-full flex flex-col space-y-2",4,"ngIf"],[1,"flex","flex-col","space-y-2","h-screen-16","w-full","p-4"],[1,"w-full","relative","flex","lg:flex-row","flex-col","space-x-2","items-center","justify-between","p-2"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary",3,"click"],[1,"text-[16px]","font-bold"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","space-y-2","h-full","w-full","overflow-auto","cursor-pointer"],["id","printContent","class","flex flex-row space-x-2 justify-between w-full",4,"ngIf"],[1,"w-full","h-full","flex","flex-col","space-y-2","items-start","p-2"],[4,"ngFor","ngForOf"],[1,"relative","w-full","flex","flex-col"],["contenteditable","true","data-placeholder","Nh\u1EADp n\u1ED9i dung \u1EDF \u0111\xE2y...","autofocus","",3,"paste","dragover","dragleave","drop","input"],["type","file",1,"hidden",3,"change"],[1,"relative","w-full","h-full","flex","flex-col","space-y-2"],[1,"relative","text-xl","text-center","font-bold"],[1,"relative","flex","flex-row","space-x-2","items-center","justify-center","p-2"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"relative","mx-auto","lg:max-w-[780px]","w-full","h-full","flex","flex-col","space-y-2","p-4","overflow-auto"],[1,"w-full",3,"appearance","subscriptSizing"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],[1,"p-2","text-center","text-red-700","font-bold"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ng\u01B0\u1EDDi Nh\u1EADn",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Tr\u01B0\u1EDFng b\u1ED9 ph\u1EADn",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Gi\xE1m \u0111\u1ED1c K\u1EBF to\xE1n",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ng\u01B0\u1EDDi \u0110\u1EC1 Xu\u1EA5t",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp B\u1ED9 Ph\u1EADn",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp V\u1ECB Tr\xED",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","flex-col","space-y-2","p-2","border","rounded-lg"],[1,"overflow-auto"],[1,"lg:w-full","w-[780px]","flex","flex-col","space-y-2","items-center","p-4"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp V\u1ECB Tr\xED",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","ngModel","ngModelOptions"],["id","printContent",1,"flex","flex-row","space-x-2","justify-between","w-full"],[1,"w-full","p-2","border"],[1,"text-end"],[1,"text-[16px]","font-bold","text-center"],[1,"flex","flex-col","space-y-2"],[1,"overflow-x-auto"],[1,"w-full","mt-4","border","border-gray-300"],[1,"bg-gray-100"],[1,"border","px-2","py-1","w-10"],[1,"border","px-2","py-1"],[1,"font-bold"],["colspan","2",1,"border","px-2","py-1","text-right"],[1,"border","px-2","py-1","text-right"],[1,"mt-4","capitalize"],[1,"grid","grid-cols-3","gap-4","text-center","mt-6"],[1,"flex","flex-col","space-y-16","text-center"],[1,"uppercase","font-bold"],[1,"text-right","text-sm"],[1,"text-center","font-bold","text-lg","my-2"],[1,"grid","grid-cols-3","gap-4","text-sm"],[1,"mt-4","p-2","border","rounded","bg-gray-100"],[1,"mt-4"],[1,"border","rounded","divide-y"],["class","p-2 flex justify-between",4,"ngFor","ngForOf"],[1,"mt-4","font-bold"],[1,"flex","justify-between","text-sm"],[1,"border","px-2","py-1","text-center","w-10"],[1,"border","px-2","py-1","text-center"],[1,"p-2","flex","justify-between"],[1,"text-gray-600"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","border","w-2/3"],[3,"innerHTML"],[1,"max-h-24","max-w-24","rounded-lg","border","p-2",3,"src"],["target","_blank",3,"href"]],template:function(e,l){if(e&1){let i=A();n(0,"mat-drawer-container",6)(1,"mat-drawer",7,0),H(3,st,11,0,"div",8),t(),n(4,"div",9)(5,"div",10)(6,"div",11)(7,"button",12),h("click",function(){return m(i),p(l.goBack())}),n(8,"mat-icon"),o(9,"arrow_back"),t()(),n(10,"span"),o(11),t(),n(12,"div",13),o(13),t()(),n(14,"div",11)(15,"button",12),h("click",function(){return m(i),p(l.CopyContent())}),n(16,"mat-icon"),o(17,"content_copy"),t()(),n(18,"button",12),h("click",function(){return m(i),p(l.printContent())}),n(19,"mat-icon"),o(20,"print"),t()(),n(21,"button",12),h("click",function(){m(i);let s=L(2);return p(s.open())}),n(22,"mat-icon"),o(23,"edit"),t()(),n(24,"button",12),h("click",function(){return m(i),p(l._ListHotroComponent.isFullScreen=!l._ListHotroComponent.isFullScreen)}),n(25,"mat-icon"),o(26,"fullscreen"),t()(),n(27,"button",14),h("click",function(){return m(i),p(l.DeleteItem())}),n(28,"mat-icon"),o(29,"delete"),t()()()(),n(30,"div",15),H(31,pt,150,39,"div",16),n(32,"div",17),H(33,ht,5,1,"div",18),t()(),n(34,"div",19)(35,"div",11)(36,"div",20,1),h("paste",function(s){return m(i),p(l.handlePaste(s))})("dragover",function(s){return m(i),p(l.onDragOver(s))})("dragleave",function(s){return m(i),p(l.onDragLeave(s))})("drop",function(s){return m(i),p(l.onDrop(s))})("input",function(s){return m(i),p(l.onInput(s))}),t(),n(38,"button",12),h("click",function(){return m(i),p(l.SendMess())}),n(39,"mat-icon"),o(40,"send"),t()()(),n(41,"div",11)(42,"button",12),h("click",function(){m(i);let s=L(49);return p(s.click())}),n(43,"mat-icon"),o(44,"image"),t()(),n(45,"button",12),h("click",function(){m(i);let s=L(51);return p(s.click())}),n(46,"mat-icon"),o(47,"cloud_upload"),t()(),n(48,"input",21,2),h("change",function(s){return m(i),p(l.onFileSelected(s))}),t(),n(50,"input",21,3),h("change",function(s){return m(i),p(l.uploadDriver(s))}),t()()()()()}if(e&2){let i,r;u(),c("position","end"),u(2),c("ngIf",l.Detail.Type=="dexuat"),u(7),K("whitespace-nowrap rounded-lg p-1 text-white ",((i=l.GetNameType(l.Detail.Type))==null?null:i.bg)||"bg-slate-600",""),u(),g((r=l.GetNameType(l.Detail.Type))==null?null:r.Title),u(2),g(l.Detail.Title),u(18),c("ngIf",l.Detail.Type=="dexuat"),u(2),c("ngForOf",l.Detail.Chat),u(3),K("w-full border p-4 editable rounded-lg ",l.isDragging?"h-40 border-2 border-dashed border-blue-500 bg-slate-100":"","")}},dependencies:[Ie,ke,Qe,Ge,Ue,ye,ve,fe,Ee,Ce,q,he,z,ge,Ne,ue,le,ae,re,oe,Me,Pe,Ye],encapsulation:2})};export{tt as DetailHotroComponent};
