import './polyfills.server.mjs';
import{a as ve}from"./chunk-TD7AGLUO.mjs";import{a as Pe}from"./chunk-LERECX63.mjs";import{a as De}from"./chunk-PTNYO3GE.mjs";import{a as xe}from"./chunk-4MSFHA4B.mjs";import{a as Se}from"./chunk-EIV2LRWP.mjs";import{a as ye}from"./chunk-2JB65MB3.mjs";import{a as Ce}from"./chunk-AICHI2NV.mjs";import"./chunk-73IBRO6I.mjs";import{a as fe,b as ke}from"./chunk-LFUKLPS4.mjs";import"./chunk-2WSS3LRP.mjs";import"./chunk-NLBTEMSF.mjs";import"./chunk-UWYQSDH5.mjs";import"./chunk-3WL3NMNZ.mjs";import{a as pe,b as de,c as _e,k as ge}from"./chunk-2TQFR6EH.mjs";import{h as te}from"./chunk-KVUHCEAF.mjs";import{a as se}from"./chunk-26NM6QMQ.mjs";import{d as ce,e as me}from"./chunk-4AA42E7K.mjs";import"./chunk-UYI34SQK.mjs";import"./chunk-OMPCUEDD.mjs";import{a as he,b as ue}from"./chunk-PHB7O5XE.mjs";import{A as le,b as U,g as Y,j as Z,l as $,o as ee,q as ie,t as ne,w as oe,x as ae,z as re}from"./chunk-KHW5ZZEG.mjs";import"./chunk-J6642ETB.mjs";import{a as J,b as Q}from"./chunk-X7LLP2RY.mjs";import"./chunk-6EFOJMAD.mjs";import"./chunk-Q5TTQGDU.mjs";import{a as q}from"./chunk-Y4GFH6XC.mjs";import"./chunk-2DIQ5JYQ.mjs";import"./chunk-RLIINVZD.mjs";import{a as G,c as X,e as H}from"./chunk-7QZZCVTG.mjs";import{ka as j}from"./chunk-LYCTG6ML.mjs";import"./chunk-7T6LZHUD.mjs";import{a as z,d as R}from"./chunk-XSJY5HPB.mjs";import"./chunk-EMLDMP5T.mjs";import{n as N,o as O,y as K}from"./chunk-7VXCQSQV.mjs";import{Fb as I,Gc as L,Hc as c,Ic as T,Jc as S,Kc as F,Mb as x,Mc as f,Nc as k,Oc as C,Qc as P,Ra as v,Uc as B,Yb as u,gc as E,hc as w,ic as o,jc as a,kc as A,lc as M,mc as b,oc as y,pa as _,tb as h,tc as d,vc as m,ya as s,yd as W,za as p}from"./chunk-KYBR54ZN.mjs";import"./chunk-XAZRL6IZ.mjs";import"./chunk-POE2MFM3.mjs";import"./chunk-UBJTQR5H.mjs";import"./chunk-MGIVCIKU.mjs";import{j as D}from"./chunk-RIAI3ORJ.mjs";var Me=()=>({title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"}),be=()=>({title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"}),Te=()=>({title:"Chuy\u1EC3n Kho",value:"chuyenkho"}),Fe=()=>({title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}),Ve=(r,n,e,i)=>[r,n,e,i],V=()=>({standalone:!0}),we=(r,n)=>n.id;function Ie(r,n){if(r&1){let e=y();o(0,"button",2),d("click",function(){s(e);let t=m();return p(t.handlePhieukhoAction())}),o(1,"mat-icon"),c(2,"save"),a()()}}function Ae(r,n){if(r&1){let e=y();o(0,"button",2),d("click",function(){s(e);let t=m();return p(t.toggleEdit())}),o(1,"mat-icon"),c(2,"edit"),a()()}}function Le(r,n){if(r&1){let e=y();M(0),o(1,"div",10)(2,"div",11),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),o(4,"div",12)(5,"button",13),d("click",function(){s(e);let t=m();return p(t.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),a(),o(7,"button",14),d("click",function(){s(e);let t=m();return p(t.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),a()()(),b()}}function Be(r,n){if(r&1&&(o(0,"mat-option",27),c(1),a()),r&2){let e=n.$implicit;u("value",e.value),h(),S(" ",e.title," ")}}function We(r,n){if(r&1&&(o(0,"mat-option",27),c(1),a()),r&2){let e=n.$implicit;u("value",e.id),h(),F(" (",e.makho,")",e.name," ")}}function Ne(r,n){if(r&1&&(o(0,"mat-option",27),c(1),a()),r&2){let e=n.$implicit;u("value",e.id),h(),S(" ",e.madonhang," ")}}function Oe(r,n){if(r&1){let e=y();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n B\xE1n"),a(),o(3,"mat-select",28),d("selectionChange",function(t){s(e);let l=m(2);return p(l.ChosenDonhang(t,"xuat"))}),x(4,Ne,2,2,"mat-option",20),a()()}if(r&2){let e=m(2);h(3),u("disabled",!e.isEdit()),h(),u("ngForOf",e._DonhangService.ListDonhang())}}function Ke(r,n){if(r&1&&(o(0,"mat-option",27),c(1),a()),r&2){let e=n.$implicit;u("value",e.id),h(),S(" ",e.madncc," ")}}function ze(r,n){if(r&1){let e=y();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n Mua"),a(),o(3,"mat-select",28),d("selectionChange",function(t){s(e);let l=m(2);return p(l.ChosenDonhang(t,"nhap"))}),x(4,Ke,2,2,"mat-option",20),a()()}if(r&2){let e=m(2);h(3),u("disabled",!e.isEdit()),h(),u("ngForOf",e._DathangService.ListDathang())}}function Re(r,n){if(r&1&&(o(0,"mat-option",27),c(1),a()),r&2){let e=n.$implicit;u("value",e.id),h(),F("",e.title," (",e.dvt,")")}}function je(r,n){if(r&1){let e=y();o(0,"div",25)(1,"mat-form-field",17)(2,"mat-label"),c(3,"S\u1EA3n Ph\u1EA9m"),a(),o(4,"mat-select",29),C("ngModelChange",function(t){let l=s(e).$index,g=m(2);return k(g.DetailPhieukho().sanpham[l].sanphamId,t)||(g.DetailPhieukho().sanpham[l].sanphamId=t),p(t)}),o(5,"div",30)(6,"div",4)(7,"mat-form-field",31)(8,"input",32),d("input",function(t){s(e);let l=m(2);return p(l.DoFindSanpham(t))}),a()(),o(9,"button",33)(10,"mat-icon"),c(11,"add_circle"),a()()(),o(12,"div",34),E(13,Re,2,3,"mat-option",27,we),a()()()(),o(15,"mat-form-field",35)(16,"mat-label"),c(17,"S\u1ED1 L\u01B0\u1EE3ng"),a(),o(18,"input",36),C("ngModelChange",function(t){let l=s(e).$index,g=m(2);return k(g.DetailPhieukho().sanpham[l].soluong,t)||(g.DetailPhieukho().sanpham[l].soluong=t),p(t)}),d("change",function(t){let l=s(e).$implicit,g=m(2);return p(g.onChangeSoluong(l,t))}),a()(),o(19,"mat-form-field",17)(20,"mat-label"),c(21,"Ghi Ch\xFA"),a(),o(22,"input",37),C("ngModelChange",function(t){let l=s(e).$index,g=m(2);return k(g.DetailPhieukho().sanpham[l].ghichu,t)||(g.DetailPhieukho().sanpham[l].ghichu=t),p(t)}),a()()()}if(r&2){let e=n.$index,i=m(2);h(4),u("disabled",!i.isEdit)("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].sanphamId),u("ngModelOptions",P(10,V)),h(9),w(i.filterSP),h(5),u("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].soluong),u("ngModelOptions",P(11,V)),h(4),u("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].ghichu),u("ngModelOptions",P(12,V))}}function Ge(r,n){if(r&1){let e=y();M(0)(1),o(2,"div",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),c(6,"Ti\xEAu \u0110\u1EC1"),a(),o(7,"input",18),C("ngModelChange",function(t){s(e);let l=m();return k(l.DetailPhieukho().title,t)||(l.DetailPhieukho().title=t),p(t)}),a()(),o(8,"mat-form-field",17)(9,"mat-label"),c(10,"Lo\u1EA1i Phi\u1EBFu"),a(),o(11,"mat-select",19),C("ngModelChange",function(t){s(e);let l=m();return k(l.DetailPhieukho().type,t)||(l.DetailPhieukho().type=t),p(t)}),d("selectionChange",function(t){s(e);let l=m();return p(l.ChangeType(t))}),x(12,Be,2,2,"mat-option",20),a()(),o(13,"mat-form-field",17)(14,"mat-label"),c(15,"Kho"),a(),o(16,"mat-select",5),C("ngModelChange",function(t){s(e);let l=m();return k(l.DetailPhieukho().khoId,t)||(l.DetailPhieukho().khoId=t),p(t)}),x(17,We,2,3,"mat-option",20),a()(),x(18,Oe,5,2,"mat-form-field",21)(19,ze,5,2,"mat-form-field",21),o(20,"mat-form-field",17)(21,"mat-label"),c(22,"Ng\xE0y"),a(),o(23,"input",22),C("ngModelChange",function(t){s(e);let l=m();return k(l.DetailPhieukho().ngay,t)||(l.DetailPhieukho().ngay=t),p(t)}),a(),A(24,"mat-datepicker-toggle",23)(25,"mat-datepicker",null,0),a()(),o(27,"div",24),E(28,je,23,13,"div",25,we),a(),o(30,"div")(31,"button",26),d("click",function(){s(e);let t=m();return p(t.AddSanpham())}),o(32,"span"),c(33,"Th\xEAm"),a(),o(34,"mat-icon"),c(35,"add"),a()()()(),b()()}if(r&2){let e=L(26),i=m();h(7),f("ngModel",i.DetailPhieukho().title),u("disabled",!i.isEdit()),h(4),f("ngModel",i.DetailPhieukho().type),u("disabled",!i.isEdit()),h(),u("ngForOf",B(19,Ve,P(15,Me),P(16,be),P(17,Te),P(18,Fe))),h(4),f("ngModel",i.DetailPhieukho().khoId),u("disabled",!i.isEdit()),h(),u("ngForOf",i._KhoService.ListKho()),h(),u("ngIf",i.DetailPhieukho().type=="xuat"),h(),u("ngIf",i.DetailPhieukho().type=="nhap"),h(4),u("matDatepicker",e),f("ngModel",i.DetailPhieukho().ngay),u("disabled",!i.isEdit()),h(),u("for",e),h(4),w(i.DetailPhieukho().sanpham),h(3),u("disabled",!i.isEdit())}}var Ee=class r{_ListphieukhoComponent=_(ve);_PhieukhoService=_(Pe);_KhoService=_(Se);_DonhangService=_(xe);_DathangService=_(De);_SanphamService=_(ye);_timezoneService=_(Ce);_route=_(z);_router=_(R);_snackBar=_(q);filterSP=[];LoaiPhieu=[{title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"},{title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"},{title:"Chuy\u1EC3n Kho",value:"chuyenkho"},{title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}];constructor(){this._route.paramMap.subscribe(n=>D(this,null,function*(){let e=n.get("id");this._PhieukhoService.setPhieukhoId(e),yield this._DonhangService.getAllDonhang(),yield this._DathangService.getAllDathang(),yield this._SanphamService.getAllSanpham(),yield this._KhoService.getAllKho(),this.filterSP=this._SanphamService.ListSanpham()})),W(()=>D(this,null,function*(){let n=this._PhieukhoService.phieukhoId();n||(this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()),n==="0"?(this.DetailPhieukho.set({sanpham:[],ngay:new Date}),this._ListphieukhoComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieukho","0"])):(yield this._PhieukhoService.getPhieukhoByid(n),this._ListphieukhoComponent.drawer.open(),this._router.navigate(["/admin/phieukho",n]))}))}ChangeType(n){}ChosenDonhang(n,e){console.log(n.value),e=="xuat"?this.DetailPhieukho.update(i=>(i.sanpham=this._DonhangService.ListDonhang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)):this.DetailPhieukho.update(i=>(i.sanpham=this._DathangService.ListDathang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)),console.log(this.DetailPhieukho())}DetailPhieukho=this._PhieukhoService.DetailPhieukho;isEdit=v(!1);isDelete=v(!1);phieukhoId=this._PhieukhoService.phieukhoId;ngOnInit(){return D(this,null,function*(){})}handlePhieukhoAction(){return D(this,null,function*(){this.phieukhoId()==="0"?yield this.createPhieukho():yield this.updatePhieukho()})}createPhieukho(){return D(this,null,function*(){try{yield this._PhieukhoService.CreatePhieukho(this.DetailPhieukho()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieukho:",n)}console.log(this.DetailPhieukho())})}updatePhieukho(){return D(this,null,function*(){try{yield this._PhieukhoService.updatePhieukho(this.DetailPhieukho()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieukho:",n)}console.log(this.DetailPhieukho())})}DeleteData(){return D(this,null,function*(){try{yield this._PhieukhoService.DeletePhieukho(this.DetailPhieukho()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieukho"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieukho:",n)}})}goBack(){this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieukho.update(n=>(n.slug=ce(n.title),n))}DoFindSanpham(n){let e=n.target.value.toLowerCase();this.filterSP=this._SanphamService.ListSanpham().filter(i=>se(i.title).includes(e)||i.title.toLowerCase().includes(e))}onChangeSoluong(n,e){}AddSanpham(){this.DetailPhieukho.update(n=>(n.sanpham.push({id:me(8,!1),idSP:"",sldat:0,soluong:0,ghichu:""}),n)),console.log(this.DetailPhieukho())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-detailphieukho"]],decls:17,vars:8,consts:[["picker",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-4"],[1,"w-full","flex","flex-row","space-x-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","selectionChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","w-full","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["matInput","","placeholder","Ch\u1ECDn ng\xE0y",3,"ngModelChange","matDatepicker","ngModel","disabled"],["matSuffix","",3,"for"],[1,"w-full","flex","flex-col","space-y-2","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"],[3,"selectionChange","disabled"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],["mat-icon-button","","color","primary"],[1,"overflow-y-auto","max-h-44"],["appearance","outline","subscriptSizing","dynamic",1,"w-80"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"button",2),d("click",function(){return i.goBack()}),o(2,"mat-icon"),c(3,"arrow_back"),a()(),o(4,"div",3),c(5),a(),o(6,"div",4)(7,"mat-slide-toggle",5),C("ngModelChange",function(l){return k(i.DetailPhieukho().isActive,l)||(i.DetailPhieukho().isActive=l),l}),c(8),a(),x(9,Ie,3,0,"button",6)(10,Ae,3,0,"button",6),o(11,"button",7),d("click",function(){return i.toggleDelete()}),o(12,"mat-icon"),c(13,"delete"),a()()()(),o(14,"div",8),x(15,Le,9,0,"ng-container",9)(16,Ge,36,24,"ng-container",9),a()),e&2){let t;h(5),T(((t=i.DetailPhieukho())==null?null:t.maphieu)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),h(2),f("ngModel",i.DetailPhieukho().isActive),u("disabled",!i.isEdit()),h(),T(i.DetailPhieukho().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),h(),u("ngIf",i.isEdit()),h(),u("ngIf",!i.isEdit()),h(5),u("ngIf",i.isDelete()),h(),u("ngIf",!i.isDelete())}},dependencies:[ae,oe,ie,ne,le,re,ee,U,$,Y,Z,Q,J,H,G,X,ue,he,j,te,K,N,O,ke,fe,ge,pe,de,_e],encapsulation:2})};export{Ee as DetailPhieukhoComponent};
