import './polyfills.server.mjs';
import{a as We,b as je}from"./chunk-ZJIXEHSC.mjs";import{a as Ne}from"./chunk-VGLDPSNT.mjs";import{c as ze,e as Qe,f as N}from"./chunk-6U5WG2CK.mjs";import{a as Ee}from"./chunk-Z2D3DSH5.mjs";import"./chunk-UKXQMY2P.mjs";import{a as Oe}from"./chunk-XSDCRXGH.mjs";import{a as Be,b as Le}from"./chunk-UKVYI7NX.mjs";import{a as V,b as O,c as G,d as q,f as z,g as Q}from"./chunk-QHKEBWIO.mjs";import{f as Ve,g as se}from"./chunk-ETGHWKBN.mjs";import"./chunk-KNPDMIFW.mjs";import{a as Ge,b as qe}from"./chunk-LFUKLPS4.mjs";import"./chunk-NLBTEMSF.mjs";import"./chunk-UWYQSDH5.mjs";import"./chunk-3WL3NMNZ.mjs";import"./chunk-2TQFR6EH.mjs";import{h as De}from"./chunk-KVUHCEAF.mjs";import"./chunk-26NM6QMQ.mjs";import{d as Fe,e as Ae}from"./chunk-4AA42E7K.mjs";import"./chunk-UYI34SQK.mjs";import{a as he,b as Ce,c as ye,d as ve}from"./chunk-OMPCUEDD.mjs";import{b as ke}from"./chunk-PHB7O5XE.mjs";import{A as Te,b as Se,g as Pe,j as Re,o as be,q as we,w as Ue,x as Me,z as Ie}from"./chunk-KHW5ZZEG.mjs";import"./chunk-J6642ETB.mjs";import{a as B,b as L}from"./chunk-X7LLP2RY.mjs";import"./chunk-6EFOJMAD.mjs";import{a as xe}from"./chunk-Q5TTQGDU.mjs";import{a as fe}from"./chunk-Y4GFH6XC.mjs";import"./chunk-2DIQ5JYQ.mjs";import"./chunk-RLIINVZD.mjs";import{a as J,c as ge,e as Y}from"./chunk-7QZZCVTG.mjs";import"./chunk-LYCTG6ML.mjs";import"./chunk-7T6LZHUD.mjs";import{a as pe,d as _e}from"./chunk-XSJY5HPB.mjs";import"./chunk-EMLDMP5T.mjs";import{o as ue,y as A}from"./chunk-7VXCQSQV.mjs";import{$b as ce,Fb as U,Gc as X,Hc as a,Ic as E,Jc as C,Mb as _,Mc as T,Na as H,Nc as k,Oc as F,Ra as p,Yb as u,Zb as le,_b as me,dc as g,ec as oe,gc as R,hc as b,ic as s,ja as K,jc as r,kc as D,lc as M,mc as I,oa as ae,oc as P,pa as S,tb as l,tc as v,v as re,vc as c,wd as w,ya as x,yd as de,za as h}from"./chunk-KYBR54ZN.mjs";import"./chunk-XAZRL6IZ.mjs";import{a as W,b as j,j as f}from"./chunk-RIAI3ORJ.mjs";var Z=class i{constructor(t){this.storageService=t}_allRoles=p([]);_searchTerm=p("");_currentPage=p(1);_pageSize=p(50);_isLoading=p(!1);_selectedRoles=p(new Set);_statusFilter=p("all");searchResults=w(()=>{let t=this._allRoles(),e=this._searchTerm().toLowerCase();return e&&(t=t.filter(n=>n.name.toLowerCase().includes(e))),t});allRoles=this._allRoles.asReadonly();filteredRoles=this.searchResults;searchTerm=this._searchTerm.asReadonly();currentPage=this._currentPage.asReadonly();pageSize=this._pageSize.asReadonly();isLoading=this._isLoading.asReadonly();selectedRoles=this._selectedRoles.asReadonly();statusFilter=this._statusFilter.asReadonly();totalItems=w(()=>this.searchResults().length);totalPages=w(()=>Math.ceil(this.totalItems()/this._pageSize()));paginatedRoles=w(()=>{let t=(this._currentPage()-1)*this._pageSize(),e=t+this._pageSize();return this.searchResults().slice(t,e)});graphqlService=S(Oe);loadAllRoles(t=!1){return f(this,null,function*(){if(!t&&this._allRoles().length>0)return this._allRoles();this._isLoading.set(!0);try{let e={orderBy:{name:"asc"},include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}},n=yield this.graphqlService.findMany("role",e);return this._allRoles.set(n),this._currentPage.set(1),n}catch(e){throw console.error("Error loading roles:",e),e}finally{this._isLoading.set(!1)}})}createRole(t){return f(this,null,function*(){this._isLoading.set(!0);try{let e={name:t.name},n=yield this.graphqlService.createOne("role",{data:e,include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}});if(t.permissionIds&&t.permissionIds.length>0){yield this.assignPermissionsToRole(n.id,t.permissionIds);let m=yield this.getRoleById(n.id);if(m){let d=this._allRoles();return this._allRoles.set([m,...d.filter(y=>y.id!==n.id)]),m}}let o=this._allRoles();return this._allRoles.set([n,...o]),n}catch(e){throw console.error("Error creating role:",e),e}finally{this._isLoading.set(!1)}})}updateRole(t,e){return f(this,null,function*(){this._isLoading.set(!0);try{let n=yield this.graphqlService.updateOne("role",{id:t},e,{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}}),o=this._allRoles(),m=o.findIndex(d=>d.id===t);if(m!==-1){let d=[...o];d[m]=n,this._allRoles.set(d)}return n}catch(n){throw console.error("Error updating role:",n),n}finally{this._isLoading.set(!1)}})}deleteRole(t){return f(this,null,function*(){this._isLoading.set(!0);try{yield this.graphqlService.deleteOne("role",{id:t});let n=this._allRoles().filter(m=>m.id!==t);this._allRoles.set(n);let o=new Set(this._selectedRoles());o.delete(t),this._selectedRoles.set(o)}catch(e){throw console.error("Error deleting role:",e),e}finally{this._isLoading.set(!1)}})}getRoleById(t){return f(this,null,function*(){try{return yield this.graphqlService.findUnique("role",{id:t},{include:{permissions:{include:{permission:{select:{id:!0,name:!0,codeId:!0}}}},users:{include:{user:{include:{profile:{select:{name:!0,avatar:!0,bio:!0}}}}}}}})}catch(e){return console.error("Error getting role by id:",e),null}})}assignPermissionsToRole(t,e){return f(this,null,function*(){this._isLoading.set(!0);try{let n=e.map(m=>({roleId:t,permissionId:m}));yield this.graphqlService.batchCreate("rolePermission",n);let o=yield this.getRoleById(t);if(o){let m=this._allRoles(),d=m.findIndex(y=>y.id===t);if(d!==-1){let y=[...m];y[d]=o,this._allRoles.set(y)}}}catch(n){throw console.error("Error assigning permissions to role:",n),n}finally{this._isLoading.set(!1)}})}removePermissionFromRole(t,e){return f(this,null,function*(){this._isLoading.set(!0);try{let o=(yield this.getRoleById(t))?.permissions?.find(m=>m.permissionId===e);if(o){yield this.graphqlService.deleteOne("rolePermission",{id:o.id});let m=yield this.getRoleById(t);if(m){let d=this._allRoles(),y=d.findIndex($=>$.id===t);if(y!==-1){let $=[...d];$[y]=m,this._allRoles.set($)}}}}catch(n){throw console.error("Error removing permission from role:",n),n}finally{this._isLoading.set(!1)}})}setSearchTerm(t){this._searchTerm.set(t),this._currentPage.set(1)}setStatusFilter(t){this._statusFilter.set(t),this._currentPage.set(1)}setPage(t){t>=1&&t<=this.totalPages()&&this._currentPage.set(t)}setPageSize(t){this._pageSize.set(t),this._currentPage.set(1)}nextPage(){this._currentPage()<this.totalPages()&&this._currentPage.set(this._currentPage()+1)}previousPage(){this._currentPage()>1&&this._currentPage.set(this._currentPage()-1)}toggleRoleSelection(t){let e=new Set(this._selectedRoles());e.has(t)?e.delete(t):e.add(t),this._selectedRoles.set(e)}selectAllCurrentPage(){let t=new Set(this._selectedRoles());this.paginatedRoles().forEach(e=>{t.add(e.id)}),this._selectedRoles.set(t)}deselectAllCurrentPage(){let t=new Set(this._selectedRoles());this.paginatedRoles().forEach(e=>{t.delete(e.id)}),this._selectedRoles.set(t)}clearSelection(){this._selectedRoles.set(new Set)}isSelected(t){return this._selectedRoles().has(t)}get selectedCount(){return this._selectedRoles().size}get selectedIds(){return Array.from(this._selectedRoles())}findRoleById(t){return this._allRoles().find(e=>e.id===t)}getRolesByPermission(t){return this._allRoles().filter(e=>e.permissions?.some(n=>n.permissionId===t))}getRolePermissions(t){let e=this.findRoleById(t);return!e||!e.permissions?[]:e.permissions.map(n=>n.permission)}hasPermission(t,e){return this.getRolePermissions(t).some(o=>o.codeId===e)}getRolesByGroup(t){return this._allRoles().filter(e=>e.permissions?.some(n=>n.permission.group===t))}getUsersInRole(t){let e=this.findRoleById(t);return!e||!e.users?[]:e.users.map(n=>n.user)}clearCache(){this._allRoles.set([]),this._searchTerm.set(""),this._currentPage.set(1),this.clearSelection()}refreshData(){return this.loadAllRoles(!0)}static \u0275fac=function(e){return new(e||i)(ae(xe))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ze=se`
  query GetUserPermissionDetails($userId: String!) {
    user: getUserById(id: $userId) {
      id
      username
      email
      roles {
        id
        name
        description
        permissions {
          id
          name
          description
          resource
          action
        }
      }
      userPermissions {
        id
        type
        permission {
          id
          name
          description
          resource
          action
        }
        createdAt
        updatedAt
      }
    }
  }
`,et=se`
  query GetAllPermissions {
    permissions: getAllPermissions {
      id
      name
      description
      resource
      action
    }
  }
`,te=class i{apollo=S(Ve);getUserPermissionDetails(t){return this.apollo.query({query:Ze,variables:{userId:t},errorPolicy:"all"}).pipe(re(e=>e.data?.user||null))}getAllPermissions(){return this.apollo.query({query:et,errorPolicy:"all"}).pipe(re(t=>t.data?.permissions||[]))}calculateEffectivePermissions(t){if(!t)return[];let e=new Map;t.roles?.forEach(d=>{d.permissions?.forEach(y=>{e.set(y.name,y)})});let n=new Set,o=new Map;t.userPermissions?.forEach(d=>{d.type==="DENIED"?(n.add(d.permission.name),o.delete(d.permission.name)):d.type==="GRANTED"&&(n.has(d.permission.name)||o.set(d.permission.name,d.permission))});let m=new Map;return e.forEach((d,y)=>{n.has(y)||m.set(y,d)}),o.forEach((d,y)=>{m.set(y,d)}),Array.from(m.values())}getPermissionSummary(t){if(!t)return{totalRolePermissions:0,grantedPermissions:0,deniedPermissions:0,effectivePermissions:[],rolePermissions:[],userGranted:[],userDenied:[]};let e=t.roles?.flatMap(d=>d.permissions||[])||[],n=t.userPermissions?.filter(d=>d.type==="GRANTED")||[],o=t.userPermissions?.filter(d=>d.type==="DENIED")||[],m=this.calculateEffectivePermissions(t);return{totalRolePermissions:e.length,grantedPermissions:n.length,deniedPermissions:o.length,effectivePermissions:m,rolePermissions:e,userGranted:n,userDenied:o}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var Xe=(i,t)=>t.id||t.name,Je=(i,t)=>t.id;function tt(i,t){i&1&&D(0,"mat-spinner",3)}function it(i,t){i&1&&(s(0,"div",5),D(1,"mat-spinner",7),s(2,"p",8),a(3,"\u0110ang t\u1EA3i quy\u1EC1n..."),r()())}function nt(i,t){if(i&1&&(s(0,"span",26),a(1),r()),i&2){let e=t.$implicit;u("title",e.description),l(),E(e.name)}}function rt(i,t){if(i&1){let e=P();s(0,"button",28),v("click",function(){x(e);let o=c(3);return h(o.toggleShowAllRolePerms())}),a(1),r()}if(i&2){let e=c(3);l(),C(" ",e.showAllRolePerms()?"Thu g\u1ECDn":"..."+(e.currentSummary().rolePermissions.length-5)+" n\u1EEFa"," ")}}function ot(i,t){if(i&1&&(s(0,"div")(1,"div",25)(2,"mat-icon",22),a(3,"groups"),r(),a(4),r(),s(5,"div",23),R(6,nt,2,2,"span",26,Xe),_(8,rt,2,1,"button",27),r()()),i&2){let e=c(2);l(4),C(" Quy\u1EC1n t\u1EEB Roles (",e.currentSummary().rolePermissions.length,") "),l(2),b(e.currentSummary().rolePermissions.slice(0,e.showAllRolePerms()?e.currentSummary().rolePermissions.length:5)),l(2),g(e.currentSummary().rolePermissions.length>5?8:-1)}}function st(i,t){if(i&1&&(s(0,"span",30),a(1),r()),i&2){let e=t.$implicit;u("title",e.permission.description),l(),E(e.permission.name)}}function at(i,t){if(i&1&&(s(0,"div")(1,"div",29)(2,"mat-icon",22),a(3,"add_circle"),r(),a(4),r(),s(5,"div",23),R(6,st,2,2,"span",30,Je),r()()),i&2){let e=c(2);l(4),C(" Quy\u1EC1n \u0110\u01B0\u1EE3c C\u1EA5p (",e.currentSummary().userGranted.length,") "),l(2),b(e.currentSummary().userGranted)}}function lt(i,t){if(i&1&&(s(0,"span",32),a(1),r()),i&2){let e=t.$implicit;u("title",e.permission.description),l(),E(e.permission.name)}}function mt(i,t){if(i&1&&(s(0,"div")(1,"div",31)(2,"mat-icon",22),a(3,"remove_circle"),r(),a(4),r(),s(5,"div",23),R(6,lt,2,2,"span",32,Je),r()()),i&2){let e=c(2);l(4),C(" Quy\u1EC1n B\u1ECB T\u1EEB Ch\u1ED1i (",e.currentSummary().userDenied.length,") "),l(2),b(e.currentSummary().userDenied)}}function ct(i,t){if(i&1&&(s(0,"span",33),a(1),r()),i&2){let e=t.$implicit;u("title",e.description),l(),E(e.name)}}function dt(i,t){if(i&1){let e=P();s(0,"button",35),v("click",function(){x(e);let o=c(3);return h(o.toggleShowAllEffective())}),a(1),r()}if(i&2){let e=c(3);l(),C(" ",e.showAllEffective()?"Thu g\u1ECDn":"..."+(e.currentSummary().effectivePermissions.length-8)+" n\u1EEFa"," ")}}function ut(i,t){if(i&1&&(s(0,"div",23),R(1,ct,2,2,"span",33,Xe),_(3,dt,2,1,"button",34),r()),i&2){let e=c(2);l(),b(e.currentSummary().effectivePermissions.slice(0,e.showAllEffective()?e.currentSummary().effectivePermissions.length:8)),l(2),g(e.currentSummary().effectivePermissions.length>8?3:-1)}}function pt(i,t){i&1&&(s(0,"div",24)(1,"mat-icon",36),a(2,"block"),r(),s(3,"p"),a(4,"Kh\xF4ng c\xF3 quy\u1EC1n n\xE0o"),r()())}function _t(i,t){if(i&1&&(s(0,"div",9)(1,"div",10)(2,"div",11),a(3),r(),s(4,"div",12),a(5,"T\u1EEB Roles"),r()(),s(6,"div",13)(7,"div",14),a(8),r(),s(9,"div",12),a(10,"\u0110\u01B0\u1EE3c C\u1EA5p"),r()(),s(11,"div",15)(12,"div",16),a(13),r(),s(14,"div",12),a(15,"B\u1ECB T\u1EEB Ch\u1ED1i"),r()(),s(16,"div",17)(17,"div",18),a(18),r(),s(19,"div",12),a(20,"Cu\u1ED1i C\xF9ng"),r()()(),s(21,"div",19),_(22,ot,9,2,"div")(23,at,8,1,"div")(24,mt,8,1,"div"),s(25,"div",20)(26,"div",21)(27,"mat-icon",22),a(28,"verified_user"),r(),a(29),r(),_(30,ut,4,1,"div",23)(31,pt,5,0,"div",24),r()()),i&2){let e=c();l(3),E(e.currentSummary().totalRolePermissions),l(5),E(e.currentSummary().grantedPermissions),l(5),E(e.currentSummary().deniedPermissions),l(5),E(e.currentSummary().effectivePermissions.length),l(4),g(e.currentSummary().rolePermissions.length>0?22:-1),l(),g(e.currentSummary().userGranted.length>0?23:-1),l(),g(e.currentSummary().userDenied.length>0?24:-1),l(5),C(" Quy\u1EC1n Cu\u1ED1i C\xF9ng (",e.currentSummary().effectivePermissions.length,") "),l(),g(e.currentSummary().effectivePermissions.length>0?30:31)}}function gt(i,t){i&1&&(s(0,"div",6)(1,"mat-icon",36),a(2,"info"),r(),s(3,"p",37),a(4,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u quy\u1EC1n"),r()())}var ie=class i{userPermissionService=S(te);userId=H.required();user=H();isLoading=p(!1);summary=p(null);showAllRolePerms=p(!1);showAllEffective=p(!1);currentSummary=w(()=>this.summary());constructor(){de(()=>f(this,null,function*(){let t=this.userId();t&&t!=="new"?yield this.loadPermissionSummary():this.summary.set(null)}))}loadPermissionSummary(){return f(this,null,function*(){if(this.userId()){this.isLoading.set(!0);try{this.userPermissionService.getUserPermissionDetails(this.userId()).subscribe({next:t=>{if(t){let e=this.userPermissionService.getPermissionSummary(t);this.summary.set(e)}else this.summary.set(null)},error:t=>{console.error("Error loading permission details:",t),this.summary.set(null)},complete:()=>{this.isLoading.set(!1)}})}catch(t){console.error("Error loading permission summary:",t),this.summary.set(null),this.isLoading.set(!1)}}})}toggleShowAllRolePerms(){this.showAllRolePerms.update(t=>!t)}toggleShowAllEffective(){this.showAllEffective.update(t=>!t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=U({type:i,selectors:[["app-user-permission-summary"]],inputs:{userId:[1,"userId"],user:[1,"user"]},decls:13,vars:2,consts:[[1,"permission-summary"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-purple-500"],["diameter","16",1,"ml-2"],[1,"text-xs"],[1,"text-center","py-4"],[1,"text-center","py-4","text-gray-500"],["diameter","32"],[1,"mt-2","text-sm","text-gray-600"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-4"],[1,"text-center","p-2","bg-blue-50","rounded"],[1,"text-lg","font-bold","text-blue-600"],[1,"text-xs","text-gray-600"],[1,"text-center","p-2","bg-green-50","rounded"],[1,"text-lg","font-bold","text-green-600"],[1,"text-center","p-2","bg-red-50","rounded"],[1,"text-lg","font-bold","text-red-600"],[1,"text-center","p-2","bg-purple-50","rounded"],[1,"text-lg","font-bold","text-purple-600"],[1,"space-y-3"],[1,"border-t","pt-3"],[1,"text-sm","font-medium","text-purple-600","mb-1","flex","items-center"],[1,"mr-1","text-sm"],[1,"flex","flex-wrap","gap-1"],[1,"text-center","py-2","text-gray-500","text-sm"],[1,"text-sm","font-medium","text-blue-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-blue-100","text-blue-800","rounded",3,"title"],[1,"px-2","py-1","text-xs","text-blue-600","hover:text-blue-800"],[1,"px-2","py-1","text-xs","text-blue-600","hover:text-blue-800",3,"click"],[1,"text-sm","font-medium","text-green-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-green-100","text-green-800","rounded",3,"title"],[1,"text-sm","font-medium","text-red-600","mb-1","flex","items-center"],[1,"px-2","py-1","text-xs","bg-red-100","text-red-800","rounded",3,"title"],[1,"px-2","py-1","text-xs","bg-purple-100","text-purple-800","rounded","font-medium",3,"title"],[1,"px-2","py-1","text-xs","text-purple-600","hover:text-purple-800"],[1,"px-2","py-1","text-xs","text-purple-600","hover:text-purple-800",3,"click"],[1,"text-gray-400"],[1,"mt-1","text-sm"]],template:function(e,n){e&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"mat-icon",2),a(4,"security"),r(),a(5," T\xF3m T\u1EAFt Quy\u1EC1n H\u1EA1n "),_(6,tt,1,0,"mat-spinner",3),r(),s(7,"mat-card-subtitle",4),a(8," Quy\u1EC1n cu\u1ED1i c\xF9ng = Quy\u1EC1n role + Quy\u1EC1n c\u1EA5p - Quy\u1EC1n t\u1EEB ch\u1ED1i "),r()(),s(9,"mat-card-content"),_(10,it,4,0,"div",5)(11,_t,32,9)(12,gt,5,0,"div",6),r()()),e&2&&(l(6),g(n.isLoading()?6:-1),l(4),g(n.isLoading()?10:n.currentSummary()?11:12))},dependencies:[A,Q,V,G,z,q,O,L,B,N,Le,Be],styles:[".permission-summary[_ngcontent-%COMP%]{border-left:4px solid #9c27b0}.permission-summary[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.permission-summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var xt=(i,t)=>t.id||t.roleId,ht=(i,t)=>t.id||t.name;function Ct(i,t){if(i&1&&(s(0,"p",11),a(1),r()),i&2){let e=c().$implicit;l(),C(" ",(e.role==null?null:e.role.description)||e.description," ")}}function yt(i,t){if(i&1&&(s(0,"span",12),a(1),r()),i&2){let e=c().$implicit,n=c(2);l(),C(" ",n.getRolePermissions(e).length," quy\u1EC1n ")}}function vt(i,t){if(i&1&&(s(0,"span",17),a(1),r()),i&2){let e=t.$implicit;u("title",e.description||e.name),l(),C(" ",e.name," ")}}function Et(i,t){if(i&1){let e=P();s(0,"button",19),v("click",function(){x(e);let o=c(2).$implicit,m=c(2);return h(m.toggleShowPermissions(o.id||o.roleId))}),a(1),r()}if(i&2){let e=c(2).$implicit,n=c(2);l(),C(" ",n.showAllPermissions[e.id||e.roleId]?"Thu g\u1ECDn":"..."+(n.getRolePermissions(e).length-4)+" n\u1EEFa"," ")}}function St(i,t){if(i&1&&(s(0,"div",13)(1,"div",16),R(2,vt,2,2,"span",17,ht),_(4,Et,2,1,"button",18),r()()),i&2){let e=c().$implicit,n=c(2);l(2),b(n.getRolePermissions(e).slice(0,n.showAllPermissions[e.id||e.roleId]?n.getRolePermissions(e).length:4)),l(2),g(n.getRolePermissions(e).length>4?4:-1)}}function Pt(i,t){i&1&&(s(0,"div",14)(1,"mat-icon",20),a(2,"block"),r(),s(3,"p"),a(4,"Kh\xF4ng c\xF3 quy\u1EC1n"),r()())}function Rt(i,t){if(i&1&&(s(0,"div",15)(1,"mat-icon",21),a(2,"schedule"),r(),s(3,"span",22),a(4),r()()),i&2){let e=c().$implicit,n=c(2);l(4),C(" G\xE1n l\xFAc: ",n.formatDate(e.assignedAt||e.createdAt)," ")}}function bt(i,t){if(i&1&&(s(0,"div",6)(1,"div",7)(2,"div",8)(3,"mat-icon",9),a(4),r(),s(5,"div")(6,"h4",10),a(7),r(),_(8,Ct,2,1,"p",11),r()(),_(9,yt,2,1,"span",12),r(),_(10,St,5,1,"div",13)(11,Pt,5,0,"div",14)(12,Rt,5,1,"div",15),r()),i&2){let e=t.$implicit,n=c(2);l(3),ce(n.getRoleIcon((e.role==null?null:e.role.name)||e.name)),l(),C(" ",n.getRoleIcon((e.role==null?null:e.role.name)||e.name)," "),l(3),C(" ",(e.role==null?null:e.role.name)||e.name," "),l(),g(e.role!=null&&e.role.description||e.description?8:-1),l(),g(n.getRolePermissions(e).length>0?9:-1),l(),g(n.getRolePermissions(e).length>0?10:11),l(2),g(e.assignedAt||e.createdAt?12:-1)}}function Dt(i,t){if(i&1&&(s(0,"div",4),R(1,bt,13,8,"div",6,xt),r()),i&2){let e=c();l(),b(e.user().roles)}}function wt(i,t){i&1&&(s(0,"div",5)(1,"mat-icon",23),a(2,"person_outline"),r(),s(3,"p",24),a(4,"Ch\u01B0a c\xF3 vai tr\xF2 n\xE0o"),r(),s(5,"p",3),a(6,"User n\xE0y ch\u01B0a \u0111\u01B0\u1EE3c g\xE1n vai tr\xF2 n\xE0o"),r()())}var ne=class i{user=H();showAllPermissions={};getRolePermissions(t){return t.role?.permissions||t.permissions||t.role?.rolePermissions?.map(e=>e.permission)||[]}getRoleIcon(t){if(!t)return"person";let e=t.toLowerCase();return e.includes("admin")?"admin_panel_settings":e.includes("manager")||e.includes("qu\u1EA3n l\xFD")?"manage_accounts":e.includes("user")||e.includes("ng\u01B0\u1EDDi d\xF9ng")?"person":e.includes("guest")||e.includes("kh\xE1ch")?"person_outline":e.includes("moderator")?"gavel":e.includes("editor")?"edit":e.includes("viewer")?"visibility":"group"}toggleShowPermissions(t){this.showAllPermissions[t]=!this.showAllPermissions[t]}formatDate(t){return t?new Date(t).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=U({type:i,selectors:[["app-user-roles-info"]],inputs:{user:[1,"user"]},decls:11,vars:2,consts:[[1,"roles-info"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-blue-500"],[1,"text-xs"],[1,"space-y-4"],[1,"text-center","py-6","text-gray-500"],[1,"border","rounded-lg","p-3","bg-gray-50"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center"],[1,"mr-2","text-blue-600"],[1,"font-medium","text-sm","text-gray-800"],[1,"text-xs","text-gray-600"],[1,"px-2","py-1","text-xs","bg-blue-100","text-blue-800","rounded-full"],[1,"mt-2"],[1,"text-center","text-gray-400","text-xs","py-2"],[1,"flex","items-center","mt-2","pt-2","border-t","border-gray-200"],[1,"flex","flex-wrap","gap-1"],[1,"px-2","py-1","text-xs","bg-white","border","border-blue-200","text-blue-700","rounded",3,"title"],["mat-button","",1,"!text-xs","!p-1","!min-w-0","text-blue-600"],["mat-button","",1,"!text-xs","!p-1","!min-w-0","text-blue-600",3,"click"],[1,"text-gray-300"],[1,"mr-1","text-gray-400",2,"font-size","14px"],[1,"text-xs","text-gray-500"],[1,"text-4xl","text-gray-300"],[1,"mt-2","text-sm"]],template:function(e,n){if(e&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"mat-icon",2),a(4,"groups"),r(),a(5," Vai Tr\xF2 & Quy\u1EC1n "),r(),s(6,"mat-card-subtitle",3),a(7),r()(),s(8,"mat-card-content"),_(9,Dt,3,0,"div",4)(10,wt,7,0,"div",5),r()()),e&2){let o,m;l(7),C(" ",((o=n.user())==null||o.roles==null?null:o.roles.length)||0," vai tr\xF2 \u0111\u01B0\u1EE3c g\xE1n "),l(2),g((m=n.user())!=null&&m.roles&&n.user().roles.length>0?9:10)}},dependencies:[A,Q,V,G,z,q,O,L,B,N,Y,J],styles:[".roles-info[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.roles-info[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.roles-info[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}.roles-info[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]:hover{border-color:#2196f3;background-color:#f3f4f6}"]})};function Ut(i,t){if(i&1){let e=P();s(0,"button",3),v("click",function(){x(e);let o=c();return h(o.handleUserAction())}),s(1,"mat-icon"),a(2,"save"),r()()}}function Mt(i,t){if(i&1){let e=P();s(0,"button",3),v("click",function(){x(e);let o=c();return h(o.toggleEdit())}),s(1,"mat-icon"),a(2,"edit"),r()()}}function It(i,t){if(i&1){let e=P();M(0),s(1,"div",11)(2,"div",12),a(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),s(4,"div",13)(5,"button",14),v("click",function(){x(e);let o=c();return h(o.DeleteData())}),a(6,"\u0110\u1ED3ng \xDD"),r(),s(7,"button",15),v("click",function(){x(e);let o=c();return h(o.toggleDelete())}),a(8,"Hu\u1EF7 B\u1ECF"),r()()(),I()}}function Tt(i,t){i&1&&(M(0),s(1,"mat-icon",39),a(2,"refresh"),r(),a(3," \u0110ang th\xEAm... "),I())}function kt(i,t){i&1&&(M(0),s(1,"mat-icon"),a(2,"add"),r(),a(3," Th\xEAm Nh\xF3m "),I())}function Ft(i,t){i&1&&(s(0,"mat-icon",43),a(1,"refresh"),r())}function At(i,t){if(i&1){let e=P();s(0,"mat-icon",45),v("click",function(){x(e);let o=c().$implicit,m=c(3);return h(m.handleRemoveRole(o))}),a(1," close "),r()}i&2&&le("cursor","pointer")}function Bt(i,t){if(i&1&&(s(0,"mat-chip-listbox")(1,"mat-chip-option",40)(2,"div",41)(3,"span",42),a(4),r(),_(5,Ft,2,0,"mat-icon",43)(6,At,2,2,"mat-icon",44),r()()()),i&2){let e=t.$implicit,n=c(3);l(),me("opacity-50",n.isRemovingRole()),l(3),E((e==null||e.role==null?null:e.role.name)||(e==null?null:e.name)),l(),g(n.isRemovingRole()?5:n.isEdit()?6:-1)}}function Lt(i,t){if(i&1&&(s(0,"div",28),R(1,Bt,7,4,"mat-chip-listbox",null,oe),r()),i&2){let e=c(2);l(),b(e.DetailUser().roles)}}function Vt(i,t){if(i&1&&(s(0,"button",48),M(1),s(2,"mat-icon"),a(3,"add"),r(),a(4," Th\xEAm nh\xF3m \u0111\u1EA7u ti\xEAn "),I(),r()),i&2){c(2);let e=X(34);u("matMenuTriggerFor",e)}}function Ot(i,t){if(i&1&&(s(0,"div",29)(1,"mat-icon",46),a(2,"group_off"),r(),s(3,"p",47),a(4,"Ch\u01B0a c\xF3 nh\xF3m quy\u1EC1n n\xE0o"),r(),_(5,Vt,5,1,"button",48),r()),i&2){let e=c(2);l(5),g(e.isEdit()?5:-1)}}function Gt(i,t){if(i&1){let e=P();s(0,"button",49),v("click",function(){let o=x(e).$implicit,m=c(2);return h(m.handleAddRole(o))}),a(1),r()}if(i&2){let e=t.$implicit;l(),E(e.name)}}function qt(i,t){if(i&1&&(s(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53),D(4,"app-user-roles-info",54),r(),s(5,"div",53),D(6,"app-user-permission-summary",55),r(),s(7,"div",53)(8,"mat-card",56)(9,"mat-card-header")(10,"mat-card-title",26)(11,"mat-icon",57),a(12,"settings"),r(),a(13," Quy\u1EC1n \u0110\u1EB7c Bi\u1EC7t "),r(),s(14,"mat-card-subtitle",58),a(15," Override quy\u1EC1n t\u1EEB roles "),r()(),s(16,"mat-card-content"),D(17,"app-user-permission-management",59),r()()()()()()),i&2){let e=c(2);l(4),u("user",e.DetailUser()),l(2),u("userId",e.DetailUser().id)("user",e.DetailUser()),l(11),u("userId",e.DetailUser().id)}}function zt(i,t){i&1&&(s(0,"div",50)(1,"div",51)(2,"div",60)(3,"mat-icon",61),a(4,"info"),r(),s(5,"p",62),a(6,"L\u01B0u user tr\u01B0\u1EDBc \u0111\u1EC3 qu\u1EA3n l\xFD quy\u1EC1n \u0111\u1EB7c bi\u1EC7t"),r(),s(7,"p",58),a(8,"Sau khi t\u1EA1o user, b\u1EA1n c\xF3 th\u1EC3 c\u1EA5p/thu h\u1ED3i quy\u1EC1n ri\xEAng"),r()()()())}function Qt(i,t){if(i&1){let e=P();M(0),s(1,"div",16)(2,"mat-form-field",17)(3,"mat-label"),a(4,"Email"),r(),s(5,"input",18),F("ngModelChange",function(o){x(e);let m=c();return k(m.DetailUser().email,o)||(m.DetailUser().email=o),h(o)}),r()(),s(6,"mat-form-field",17)(7,"mat-label"),a(8,"H\u1ECD V\xE0 T\xEAn"),r(),s(9,"input",19),F("ngModelChange",function(o){x(e);let m=c();return k(m.DetailUser().name,o)||(m.DetailUser().name=o),h(o)}),r()(),s(10,"mat-form-field",17)(11,"mat-label"),a(12,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),r(),s(13,"input",20),F("ngModelChange",function(o){x(e);let m=c();return k(m.DetailUser().SDT,o)||(m.DetailUser().SDT=o),h(o)}),r()(),s(14,"mat-form-field",17)(15,"mat-label"),a(16,"M\u1EADt Kh\u1EA9u "),r(),s(17,"input",21),F("ngModelChange",function(o){x(e);let m=c();return k(m.DetailUser().password,o)||(m.DetailUser().password=o),h(o)}),r()(),s(18,"div",22)(19,"button",23,0),_(21,Tt,4,0,"ng-container")(22,kt,4,0,"ng-container"),r()(),s(23,"div",24)(24,"mat-card",25)(25,"mat-card-header")(26,"mat-card-title",26)(27,"mat-icon",27),a(28,"groups"),r(),a(29),r()(),s(30,"mat-card-content"),_(31,Lt,3,0,"div",28)(32,Ot,6,1,"div",29),r()()(),s(33,"mat-menu",null,1)(35,"div",30),v("click",function(o){return x(e),h(o.stopPropagation())}),s(36,"div",31)(37,"input",32),v("keyup",function(o){x(e);let m=c();return h(m.doFilterHederColumn(o))}),r(),s(38,"div",33)(39,"span",34),a(40,"search"),r()()(),s(41,"div",35),R(42,Gt,2,1,"button",36,oe),r(),s(44,"div",37)(45,"button",15),v("click",function(){x(e);let o=X(20);return h(o.closeMenu())}),a(46,"\u0110\xF3ng"),r()()()(),_(47,qt,18,4,"div",38)(48,zt,9,0,"div",38),r(),I()}if(i&2){let e,n=X(34),o=c();l(5),T("ngModel",o.DetailUser().email),u("disabled",!o.isEdit()),l(4),T("ngModel",o.DetailUser().name),u("disabled",!o.isEdit()),l(4),T("ngModel",o.DetailUser().SDT),u("disabled",!o.isEdit()),l(4),T("ngModel",o.DetailUser().password),u("disabled",!o.isEdit()),l(2),u("disabled",!o.isEdit()||o.isAddingRole())("matMenuTriggerFor",n),l(2),g(o.isAddingRole()?21:22),l(8),C(" Nh\xF3m Quy\u1EC1n (",((e=o.DetailUser().roles)==null?null:e.length)||0,") "),l(2),g(o.DetailUser().roles&&o.DetailUser().roles.length>0?31:32),l(11),b(o.FilterRole()),l(5),u("ngIf",o.DetailUser().id&&o.DetailUser().id!=="new"),l(),u("ngIf",o.DetailUser().id==="new")}}var Ye=class i{_ListuserComponent=S(je);_UserGraphQLService=S(We);_RoleGraphQLService=S(Z);_route=S(pe);_router=S(_e);_snackBar=S(fe);constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");e==="new"?this.userId.set(e):e&&!this._UserGraphQLService.currentUser()&&this.userId.set(e)})}DetailUser=p({});isEdit=p(!1);isDelete=p(!1);isLoading=p(!1);isAddingRole=p(!1);isRemovingRole=p(!1);userId=p(null);ListRole=p([]);FilterRole=p([]);getUserById(t){return f(this,null,function*(){try{let e=yield this._UserGraphQLService.getUserById(t);e&&this.DetailUser.set(j(W({},e),{SDT:e.SDT||""}))}catch(e){console.error("Error loading user:",e),this._snackBar.open("L\u1ED7i khi t\u1EA3i th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng","\u0110\xF3ng",{duration:3e3})}})}ngOnInit(){return f(this,null,function*(){let t=this.userId();if(!t){this._router.navigate(["/admin/user"]),this._ListuserComponent.drawer.close();return}t==="new"?(this.DetailUser.set({email:"",password:"",SDT:"",isActive:!0,roles:[],profile:{name:"",avatar:"",bio:""}}),this._ListuserComponent?.drawer?.open(),this.isEdit.update(e=>!e)):t&&(yield this.getUserById(t),this._ListuserComponent?.drawer?.open(),this._router.navigate(["/admin/user",t])),yield this._RoleGraphQLService.loadAllRoles(),this.ListRole.set(this._RoleGraphQLService.allRoles()),this.updateFilterRole()})}updateFilterRole(){let t=this.ListRole()||[],e=this.DetailUser()?.roles||[];if(t.length===0){this.FilterRole.set([]);return}let n=t.filter(o=>!o||!o.id?!1:!e.some(m=>m?m.roleId===o.id||m.role?.id===o.id:!1));this.FilterRole.set(n)}handleUserAction(){return f(this,null,function*(){this.userId()==="new"?yield this.createUser():yield this.updateUser()})}createUser(){return f(this,null,function*(){try{if(!this.DetailUser().password||this.DetailUser().password.trim()===""){this._snackBar.open("Vui l\xF2ng nh\u1EADp password","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}if(!this.DetailUser().SDT||this.DetailUser().SDT.trim()===""){this._snackBar.open("Vui l\xF2ng nh\u1EADp SDT","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}yield this._UserGraphQLService.createUser(this.DetailUser()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o user:",t)}})}updateUser(){return f(this,null,function*(){try{yield this._UserGraphQLService.updateUser(this.DetailUser().id,this.DetailUser()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt user:",t)}})}DeleteData(){return f(this,null,function*(){try{yield this._UserGraphQLService.deleteUser(this.DetailUser().id),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/user"])}catch(t){console.error("L\u1ED7i khi x\xF3a user:",t)}})}FillSlug(){this.DetailUser.update(t=>j(W({},t),{slug:Fe(t.title)}))}doFilterHederColumn(t){let e=this.ListRole();this.FilterRole.set(e.filter(n=>n.name.toLowerCase().includes(t.target.value.toLowerCase())))}handleAddRole(t){return f(this,null,function*(){if(!t||!t.id||this.isAddingRole()){(!t||!t.id)&&this._snackBar.open("D\u1EEF li\u1EC7u vai tr\xF2 kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isAddingRole.set(!0);try{if((this.DetailUser()?.roles||[]).some(o=>o.roleId===t.id||o.role?.id===t.id)){this._snackBar.open("Vai tr\xF2 \u0111\xE3 \u0111\u01B0\u1EE3c th\xEAm","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}yield this._UserGraphQLService.assignRolesToUser(this.DetailUser().id,[t.id]),this.DetailUser.update(o=>j(W({},o),{roles:[...o.roles||[],{id:Ae(8,!1),userId:this.DetailUser().id,roleId:t.id,role:t}]})),this.updateFilterRole(),this._snackBar.open("Th\xEAm vai tr\xF2 th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("Error adding role:",e),this._snackBar.open("L\u1ED7i khi th\xEAm vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isAddingRole.set(!1)}})}handleRemoveRole(t){return f(this,null,function*(){if(!t||this.isRemovingRole()){t||this._snackBar.open("D\u1EEF li\u1EC7u vai tr\xF2 kh\xF4ng h\u1EE3p l\u1EC7","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isRemovingRole.set(!0);try{let e=t.role?.id||t.roleId;if(!e){this._snackBar.open("Kh\xF4ng th\u1EC3 x\xE1c \u0111\u1ECBnh ID vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}yield this._UserGraphQLService.removeRoleFromUser(this.DetailUser().id,e),this.DetailUser.update(n=>j(W({},n),{roles:(n.roles||[]).filter(o=>(o.role?.id||o.roleId)!==e)})),this.updateFilterRole(),this._snackBar.open("X\xF3a vai tr\xF2 th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("Error removing role:",e),this._snackBar.open("L\u1ED7i khi x\xF3a vai tr\xF2","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isRemovingRole.set(!1)}})}goBack(){this._UserGraphQLService.clearCurrentUser(),this._ListuserComponent.drawer.close(),this._router.navigate(["/admin/user"])}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=U({type:i,selectors:[["app-detailuser"]],decls:17,vars:8,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp H\u1ECD V\xE0 T\xEAn",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],["matInput","","type","password","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],[1,"w-full","flex","flex-wrap","gap-2","space-x-2"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"mb-4"],[1,"bg-blue-50"],[1,"text-sm","font-medium","flex","items-center"],[1,"mr-2","text-blue-500"],[1,"flex","flex-row","flex-wrap","gap-2"],[1,"text-center","text-gray-500","py-4"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["mat-menu-item",""],[1,"flex","flex-row","space-x-2","items-center","justify-end"],["class","mt-8",4,"ngIf"],[1,"animate-spin"],[1,"bg-blue-100"],[1,"flex","items-center"],[1,"mr-2"],[1,"animate-spin","text-gray-500","text-sm"],["color","warn",1,"text-sm","hover:text-red-600",3,"cursor"],["color","warn",1,"text-sm","hover:text-red-600",3,"click"],[1,"text-gray-400"],[1,"text-sm","mt-1"],["mat-stroked-button","","color","primary",1,"mt-2",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"mt-8"],[1,"border-t","pt-6"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],[1,"xl:col-span-1"],[3,"user"],[3,"userId","user"],[1,"permission-management"],[1,"mr-2","text-green-500"],[1,"text-xs"],[3,"userId"],[1,"text-center","text-gray-500","py-8"],[1,"text-4xl","text-gray-400"],[1,"mt-2"]],template:function(e,n){if(e&1&&(s(0,"div",2)(1,"button",3),v("click",function(){return n.goBack()}),s(2,"mat-icon"),a(3,"arrow_back"),r()(),s(4,"div",4),a(5),r(),s(6,"div",5)(7,"mat-slide-toggle",6),F("ngModelChange",function(m){return k(n.DetailUser().isActive,m)||(n.DetailUser().isActive=m),m}),a(8),r(),_(9,Ut,3,0,"button",7)(10,Mt,3,0,"button",7),s(11,"button",8),v("click",function(){return n.toggleDelete()}),s(12,"mat-icon"),a(13,"delete"),r()()()(),s(14,"div",9),_(15,It,9,0,"ng-container",10)(16,Qt,49,15,"ng-container",10),r()),e&2){let o;l(5),E(((o=n.DetailUser())==null?null:o.email)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l(2),T("ngModel",n.DetailUser().isActive),u("disabled",!n.isEdit()),l(),E(n.DetailUser().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),l(),u("ngIf",n.isEdit()),l(),u("ngIf",!n.isEdit()),l(5),u("ngIf",n.isDelete()),l(),u("ngIf",!n.isDelete())}},dependencies:[Me,Ue,we,Te,Ie,be,Se,Pe,Re,L,B,Y,J,ge,ke,De,A,ue,qe,Ge,ve,Ce,he,ye,Q,V,G,z,q,O,Ee,N,Qe,ze,Ne,ie,ne],styles:[".permission-management[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.permission-management[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.permission-management[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-size:12px}"]})};export{Ye as DetailUserComponent};
