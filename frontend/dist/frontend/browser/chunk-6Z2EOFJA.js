import{a as m}from"./chunk-JNVUT6FC.js";import{a as s}from"./chunk-VUZTNYK4.js";import{b as u}from"./chunk-7U2T4VS7.js";import{c as y}from"./chunk-ID7SQFGG.js";import{Ra as c,ia as g,na as p}from"./chunk-OSJESZB6.js";import{a as h,g as f,j as r}from"./chunk-6DYNGEAS.js";var i=f(m());var l=class d{constructor(n,t){this._StorageService=n;this.router=t}ListDonhang=c([]);DetailDonhang=c({});page=c(1);pageCount=c(1);total=c(0);pageSize=c(50);donhangId=c(null);setDonhangId(n){this.donhangId.set(n)}ImportDonhangCu(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/importold`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(e.id),e}catch(t){return console.error(t)}})}ImportDonhang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/import`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(e.id),e}catch(t){return console.error(t)}})}DongboGia(n){return r(this,null,function*(){let t=n.map(o=>o.id);try{let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e=yield fetch(`${s.APIURL}/donhang/dongbogia`,o);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();return e.ok,this.getAllDonhang(),a}catch(o){return console.error(o)}})}CreateDonhang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(e.id),e}catch(t){return console.error(t)}})}DagiaoDonhang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/${n.id}/dagiao`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();o.ok,console.log(e)}catch(t){return console.error(t)}})}getSLChogiao(n){return r(this,null,function*(){let t=h({},n);t.Batdau=(0,i.default)(t.Batdau).utc(),t.Ketthuc=(0,i.default)(t.Ketthuc).utc();try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},e=yield fetch(`${s.APIURL}/donhang/getchogiao`,o);e.ok;let a=yield e.json();return this.ListDonhang.set(a.data),this.page.set(a.pageNumber),this.pageCount.set(a.totalPages),this.total.set(a.total),this.pageSize.set(a.pageSize),a}catch(o){return console.error(o)}})}searchDonhang(n){return r(this,null,function*(){let t=h({},n);t.Batdau=(0,i.default)(t.Batdau).utc(),t.Ketthuc=(0,i.default)(t.Ketthuc).utc();try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},e=yield fetch(`${s.APIURL}/donhang/search`,o);e.ok;let a=yield e.json();return console.log("search data",a),this.ListDonhang.set(a.data),this.page.set(a.pageNumber),this.pageCount.set(a.totalPages),this.total.set(a.total),this.pageSize.set(a.pageSize),a}catch(o){return console.error(o)}})}searchCongno(n){return r(this,null,function*(){let t=h({},n);t.Batdau=(0,i.default)(t.Batdau).utc(),t.Ketthuc=(0,i.default)(t.Ketthuc).utc();try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},e=yield fetch(`${s.APIURL}/donhang/congnokhachhang`,o);e.ok;let a=yield e.json();return this.ListDonhang.set(a),a}catch(o){return console.error(o)}})}Phieuchuyen(n){return r(this,null,function*(){let t=h({},n);t.Batdau=(0,i.default)(t.Batdau).utc(),t.Ketthuc=(0,i.default)(t.Ketthuc).utc();try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},e=yield fetch(`${s.APIURL}/donhang/phieuchuyen`,o);e.ok;let a=yield e.json();this.ListDonhang.set(a)}catch(o){return console.error(o)}})}Phieugiaohang(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/phieugiao`,t);o.ok;let e=yield o.json();this.DetailDonhang.set(e)}catch(t){return console.error(t)}})}findbysanpham(n){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},o=yield fetch(`${s.APIURL}/donhang/findbysanpham/${n}`,t);return o.ok,yield o.json()}catch(t){return console.error(t)}})}getAllDonhang(){return r(this,null,function*(){try{let n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${s.APIURL}/donhang`,n);t.ok;let o=yield t.json();this.ListDonhang.set(o)}catch(n){return console.error(n)}})}getDonhangByid(n){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},o=yield fetch(`${s.APIURL}/donhang/findid/${n}`,t);o.ok;let e=yield o.json();this.DetailDonhang.set(e)}catch(t){return console.error(t)}})}updateDonhang(n){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/${n.id}`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();return o.ok,this.getAllDonhang(),this.getDonhangByid(n.id),e}catch(t){return console.error(t)}})}updatePhieugiao(n){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/phieugiao/${n.id}`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let e=yield o.json();o.ok,this.getAllDonhang(),this.Phieugiaohang({id:n.id})}catch(t){return console.error(t)}})}DeleteDonhang(n){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};(yield fetch(`${s.APIURL}/donhang/${n.id}`,t)).ok}catch(t){return console.error(t)}})}UpdateBulkDonhang(n){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/bulk`,t);return o.ok,this.getAllDonhang(),yield o.json()}catch(t){return console.error(t)}})}DeleteBulkDonhang(n){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/bulk`,t);return o.ok,this.getAllDonhang(),yield o.json()}catch(t){return console.error(t)}})}SearchField(n){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=yield fetch(`${s.APIURL}/donhang/searchfield`,t);o.ok;let e=yield o.json();return this.DetailDonhang.set(e),e}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||d)(p(u),p(y))};static \u0275prov=g({token:d,factory:d.\u0275fac,providedIn:"root"})};export{l as a};
