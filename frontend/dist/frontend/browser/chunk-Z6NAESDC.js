import{a as P}from"./chunk-LDTHYFEJ.js";import{a as U}from"./chunk-DYSICJE4.js";import{a as w}from"./chunk-MC3P4QZI.js";import"./chunk-EOEI42HP.js";import"./chunk-HVTWWBOW.js";import"./chunk-3OJFS6UR.js";import{a as b,d as I}from"./chunk-VNKEAMBS.js";import{a as R,b as T}from"./chunk-K6XGRCBI.js";import{n as B,v as F,y as z}from"./chunk-6CYPKWCK.js";import"./chunk-MZWUMQWW.js";import"./chunk-T3Q3DASN.js";import"./chunk-AQK6ZTVG.js";import"./chunk-N7CMVMO3.js";import"./chunk-R6Q2HSJ3.js";import{a as C,c as M}from"./chunk-QVXMGLJZ.js";import{h as L}from"./chunk-LW5A5GOC.js";import{q as D}from"./chunk-2CV4OV4X.js";import{Ab as u,Hb as _,Ob as v,Pb as S,Rb as y,ac as n,bc as r,cc as k,fd as x,gc as h,kb as g,la as t,lc as A,nc as s,ob as m,ua as p,va as d,zc as f}from"./chunk-FKNCN4IQ.js";import{j as o}from"./chunk-XXD5T5ZZ.js";var V=()=>[b,R];function j(a,i){if(a&1){let e=h();n(0,"div",1),k(1,"iframe",2),r(),n(2,"div",3)(3,"button",4),A("click",function(){p(e);let l=s();return d(l.onRegister())}),n(4,"mat-icon"),f(5,"how_to_reg"),r(),n(6,"span"),f(7,"\u0110\u0103ng K\xFD"),r()()()}if(a&2){let e=s();m(),y("src",e.SecurityTrustUrl(e.DetailLandingpage().contentHtml),g)}}var E=class a{_LandingpageService=t(U);_AffiliatelinkService=t(P);_UserService=t(w);sanitizer=t(L);DetailLandingpage=this._LandingpageService.DetailLandingpage;LinkAffiliate=this._AffiliatelinkService.ListAffiliatelink;Profile;_route=t(C);_router=t(M);constructor(){x(()=>o(this,null,function*(){yield this._UserService.getProfile(),this.Profile=this._UserService.profile(),this._route.paramMap.subscribe(i=>o(this,null,function*(){let e=i.get("slug");yield this._LandingpageService.getLandingpageBy({slug:e}),console.log(this.DetailLandingpage())})),this._route.queryParamMap.subscribe(i=>{let e=i.get("ref");e&&(console.log("Affiliate ref code:",e),this._AffiliatelinkService.Tracking(e))})}))}ngOnInit(){this._AffiliatelinkService.listenAffiliatelinkUpdates()}getAffiliateLink(i){console.log(i);let e=this.LinkAffiliate().find(l=>l.landingPageId==i.id);return console.log("affiliateLink",e),e?e?.landingPage?.slug+"/?ref="+e.codeId:null}SecurityTrustUrl(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}CreateAffiliateLink(i){return o(this,null,function*(){console.log(i),this.Profile.id;let e={landingPageId:i.id,createdById:this.Profile.id};yield this._AffiliatelinkService.CreateAffiliatelink(e),yield this._AffiliatelinkService.getAffiliateListBy({createdById:this.Profile.id}),console.log(this._AffiliatelinkService.ListAffiliatelink())})}CopyLinkAffiliate(i){}SharedAffiliate(i){}onRegister(){}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-detaillandingpage"]],decls:4,vars:0,consts:[[1,"h-screen","flex","flex-col","space-y-2","container","mx-auto"],[1,"iframe-container"],["width","100%","frameborder","0","allowfullscreen","",1,"h-screen-16",3,"src"],[1,"flex","flex-row","justify-center","space-x-2"],["mat-flat-button","","color","primary",1,"flex","flex-row","space-x-1",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0),_(1,j,8,1),v(2,1,V),S(),r())},dependencies:[D,F,I,T,z,B],encapsulation:2})};export{E as DetaillandingpageComponent};
