import{a as ue,b as pe,c as _e}from"./chunk-RCCIGWPX.js";import{a as de,b as me}from"./chunk-NADNCFBX.js";import{a as se}from"./chunk-RS3DJPZC.js";import"./chunk-DFEBKCCY.js";import"./chunk-RRZ644JX.js";import"./chunk-OW7KWBRK.js";import{b as ce}from"./chunk-NULFSBS2.js";import{a as he,b as re}from"./chunk-RHQ5CJJM.js";import"./chunk-ESCBPH3J.js";import"./chunk-YD2BIOSH.js";import"./chunk-SQH7M7MX.js";import"./chunk-SAM22JC7.js";import{h as Y}from"./chunk-O7VO4XO6.js";import{d as oe}from"./chunk-SUUFLDBI.js";import{a as le}from"./chunk-ZW44ZSN2.js";import"./chunk-46UWFLTR.js";import"./chunk-ND75BKP7.js";import"./chunk-Q7E7WSHM.js";import{b as ge}from"./chunk-IRWZMXJO.js";import"./chunk-AZMUMNOS.js";import"./chunk-WUAM3BNH.js";import"./chunk-YGTKRZ2Q.js";import"./chunk-EBI7LVEN.js";import{a as ne,b as ae}from"./chunk-CUG5MLOS.js";import{b as Q,g as X,j as J,n as U,p as Z,v as $,w as ee,y as te,z as ie}from"./chunk-O3RCQDSL.js";import"./chunk-AW6ETFJX.js";import{a as j,b as z}from"./chunk-2N22N4JL.js";import{a as R}from"./chunk-ZKZQQDX4.js";import"./chunk-CGRWJC6J.js";import"./chunk-PFBZBLNL.js";import"./chunk-2PPFUFFT.js";import{a as N,c as O,e as q}from"./chunk-YAKXWPNU.js";import{ja as G}from"./chunk-DYZREONY.js";import{a as P,c as H}from"./chunk-VF6Z3BLE.js";import"./chunk-HB5OTZ3Y.js";import{l as I,m as W,v as L}from"./chunk-CNCZQRZQ.js";import{Cc as v,Db as k,Dc as r,Ec as S,Fc as V,Gc as T,Ic as u,Jc as p,Kb as K,Kc as _,Mc as b,Oc as A,Ra as y,Ub as c,ec as o,fc as l,hc as x,ic as M,kc as D,ld as F,pa as C,pc as f,rb as h,rc as g,ya as s,za as d}from"./chunk-TAKLKH4V.js";import{h as B,j as E}from"./chunk-WJTR2IJE.js";var Ee=()=>({value:"khachsi",title:"Kh\xE1ch S\u1EC9"}),Ce=()=>({value:"khachle",title:"Kh\xE1ch L\u1EBB"}),De=(m,n)=>[m,n];function ye(m,n){if(m&1){let i=D();o(0,"button",2),f("click",function(){s(i);let e=g();return d(e.handleKhachhangAction())}),o(1,"mat-icon"),r(2,"save"),l()()}}function Ke(m,n){if(m&1){let i=D();o(0,"button",2),f("click",function(){s(i);let e=g();return d(e.toggleEdit())}),o(1,"mat-icon"),r(2,"edit"),l()()}}function we(m,n){if(m&1){let i=D();x(0),o(1,"div",10)(2,"div",11),r(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),l(),o(4,"div",12)(5,"button",13),f("click",function(){s(i);let e=g();return d(e.DeleteData())}),r(6,"\u0110\u1ED3ng \xDD"),l(),o(7,"button",14),f("click",function(){s(i);let e=g();return d(e.toggleDelete())}),r(8,"Hu\u1EF7 B\u1ECF"),l()()(),M()}}function xe(m,n){if(m&1&&(o(0,"mat-option",32),r(1),l()),m&2){let i=n.$implicit;c("value",i.value),h(),V(" ",i.title," ")}}function Me(m,n){if(m&1){let i=D();o(0,"mat-option",33),f("click",function(){let e=s(i).$implicit,a=g(2);return d(a.onBanggiaSelected(e))}),r(1),l()}if(m&2){let i=n.$implicit;c("value",i),h(),T(" ",i.title," - ",i.mabanggia," ")}}function Se(m,n){if(m&1){let i=D();x(0),o(1,"div",15)(2,"mat-form-field",16)(3,"mat-label"),r(4,"T\xEAn Kh\xE1ch H\xE0ng"),l(),o(5,"input",17),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().name,e)||(a.DetailKhachhang().name=e),d(e)}),f("keyup",function(){s(i);let e=g();return d(e.autoSubtitle())}),l()(),o(6,"mat-form-field",16)(7,"mat-label"),r(8,"Vi\u1EBFt T\u1EAFt"),l(),o(9,"input",18),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().subtitle,e)||(a.DetailKhachhang().subtitle=e),d(e)}),l()(),o(10,"mat-form-field",16)(11,"mat-label"),r(12,"T\xEAn File"),l(),o(13,"input",19),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().tenfile,e)||(a.DetailKhachhang().tenfile=e),d(e)}),l()(),o(14,"mat-form-field",16)(15,"mat-label"),r(16,"Lo\u1EA1i Kh\xE1ch H\xE0ng"),l(),o(17,"mat-select",5),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().loaikh,e)||(a.DetailKhachhang().loaikh=e),d(e)}),K(18,xe,2,2,"mat-option",20),l()(),o(19,"mat-form-field",16)(20,"mat-label"),r(21,"Email"),l(),o(22,"input",21),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().email,e)||(a.DetailKhachhang().email=e),d(e)}),l()(),o(23,"mat-form-field",16)(24,"mat-label"),r(25,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),l(),o(26,"input",22),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().sdt,e)||(a.DetailKhachhang().sdt=e),d(e)}),l()(),o(27,"mat-form-field",16)(28,"mat-label"),r(29,"M\xE3 S\u1ED1 Thu\u1EBF"),l(),o(30,"input",23),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().mst,e)||(a.DetailKhachhang().mst=e),d(e)}),l()(),o(31,"mat-form-field",16)(32,"mat-label"),r(33,"Gi\u1EDD Nh\u1EADn H\xE0ng"),l(),o(34,"input",24),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().gionhanhang,e)||(a.DetailKhachhang().gionhanhang=e),d(e)}),l()(),o(35,"mat-form-field",16)(36,"mat-label"),r(37,"\u0110\u1ECBa Ch\u1EC9"),l(),o(38,"input",25),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().diachi,e)||(a.DetailKhachhang().diachi=e),d(e)}),l()(),o(39,"mat-form-field",16)(40,"mat-label"),r(41,"Qu\u1EADn"),l(),o(42,"input",26),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().quan,e)||(a.DetailKhachhang().quan=e),d(e)}),l()(),o(43,"mat-form-field",16)(44,"mat-label"),r(45,"B\u1EA3ng Gi\xE1"),l(),o(46,"input",27),f("input",function(e){s(i);let a=g();return d(a.onBanggiaInput(e))}),l(),o(47,"mat-autocomplete",28,0),K(49,Me,2,3,"mat-option",29),l()(),o(50,"mat-slide-toggle",30),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().hiengia,e)||(a.DetailKhachhang().hiengia=e),d(e)}),r(51,"Hi\u1EC7n Gi\xE1"),l(),o(52,"mat-slide-toggle",30),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().istitle2,e)||(a.DetailKhachhang().istitle2=e),d(e)}),r(53,"Hi\u1EC7n T\xEAn S\u1EA3n Ph\u1EA9m 2"),l(),o(54,"mat-slide-toggle",30),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().isshowvat,e)||(a.DetailKhachhang().isshowvat=e),d(e)}),r(55,"Hi\u1EC7n VAT"),l(),o(56,"mat-form-field",16)(57,"mat-label"),r(58,"Ghi Ch\xFA"),l(),o(59,"textarea",31),_("ngModelChange",function(e){s(i);let a=g();return p(a.DetailKhachhang().ghichu,e)||(a.DetailKhachhang().ghichu=e),d(e)}),l()()(),M()}if(m&2){let i=v(48),t=g();h(5),u("ngModel",t.DetailKhachhang().name),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().subtitle),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().tenfile),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().loaikh),c("disabled",!t.isEdit()),h(),c("ngForOf",A(36,De,b(34,Ee),b(35,Ce))),h(4),u("ngModel",t.DetailKhachhang().email),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().sdt),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().mst),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().gionhanhang),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().diachi),c("disabled",!t.isEdit()),h(4),u("ngModel",t.DetailKhachhang().quan),c("disabled",!t.isEdit()),h(4),c("value",t.getSelectedBanggiaTitle())("matAutocomplete",i)("disabled",!t.isEdit()),h(),c("displayWith",t.displayBanggia),h(2),c("ngForOf",t.filteredBanggia()),h(),u("ngModel",t.DetailKhachhang().hiengia),c("disabled",!t.isEdit()),h(2),u("ngModel",t.DetailKhachhang().istitle2),c("disabled",!t.isEdit()),h(2),u("ngModel",t.DetailKhachhang().isshowvat),c("disabled",!t.isEdit()),h(5),u("ngModel",t.DetailKhachhang().ghichu),c("disabled",!t.isEdit())}}var w=class w{_ListkhachhangComponent=C(me);_KhachhangService=C(de);_BanggiaService=C(se);_route=C(P);_router=C(H);_snackBar=C(R);DetailKhachhang=this._KhachhangService.DetailKhachhang;loading=this._KhachhangService.loading;error=this._KhachhangService.error;ListFilter=[];filterItem=[];isEdit=y(!1);isDelete=y(!1);khachhangId=this._KhachhangService.khachhangId;filteredBanggia=y([]);selectedBanggia=y(null);constructor(){this._route.paramMap.subscribe(n=>{let i=n.get("id");this._KhachhangService.setKhachhangId(i)}),F(()=>E(this,null,function*(){let n=this._KhachhangService.khachhangId();n||(this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()),n==="new"?(this.DetailKhachhang.set({loaikh:"khachsi"}),this._ListkhachhangComponent.drawer.open(),this.isEdit.update(i=>!i),this._router.navigate(["/admin/khachhang","new"])):(console.log("KhachhangId:",n),n&&(yield this._KhachhangService.getKhachhangById(n),this.ListFilter=this._KhachhangService.DetailKhachhang().banggia),this._ListkhachhangComponent.drawer.open(),this._router.navigate(["/admin/khachhang",n]))}))}ngOnInit(){return E(this,null,function*(){if(yield this._BanggiaService.getAllBanggia(),this.filterItem=this._BanggiaService.ListBanggia(),this.filteredBanggia.set(this._BanggiaService.ListBanggia()),this.DetailKhachhang()?.banggiaId){let n=this._BanggiaService.ListBanggia().find(i=>i.id===this.DetailKhachhang().banggiaId);this.selectedBanggia.set(n)}console.log("DetailKhachhang:",this.DetailKhachhang())})}handleKhachhangAction(){return E(this,null,function*(){this.khachhangId()==="new"?yield this.createKhachhang():yield this.updateKhachhang()})}autoSubtitle(){this.DetailKhachhang.update(n=>(n.subtitle=le(n.name),n))}createKhachhang(){return E(this,null,function*(){try{yield this._KhachhangService.createKhachhang(this.DetailKhachhang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o khachhang:",n)}})}updateKhachhang(){return E(this,null,function*(){try{let n=this.DetailKhachhang(),i=this.khachhangId();i&&i!=="new"&&(yield this._KhachhangService.updateKhachhang(i,n),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t))}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt khachhang:",n)}})}DeleteData(){return E(this,null,function*(){try{let n=this.DetailKhachhang();n?.id&&(yield this._KhachhangService.deleteKhachhang(n.id),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/khachhang"]))}catch(n){console.error("L\u1ED7i khi x\xF3a khachhang:",n)}})}goBack(){this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()}trackByFn(n,i){return i.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailKhachhang.update(n=>(n.slug=oe(n.title),n))}DoOutFilter(n){this.DetailKhachhang.update(i=>(i.banggia=n,i))}onBanggiaInput(n){let i=n.target.value.toLowerCase(),t=this._BanggiaService.ListBanggia().filter(e=>e.title.toLowerCase().includes(i)||e.mabanggia?.toLowerCase().includes(i));this.filteredBanggia.set(t)}onBanggiaSelected(n){n&&(this.selectedBanggia.set(n),this.DetailKhachhang.update(i=>(i.banggiaId=n.id,i)))}getSelectedBanggiaTitle(){let n=this.selectedBanggia();if(n)return`${n.title} - ${n.mabanggia}`;if(this.DetailKhachhang()?.banggiaId){let i=this._BanggiaService.ListBanggia().find(t=>t.id===this.DetailKhachhang().banggiaId);if(i)return this.selectedBanggia.set(i),`${i.title} - ${i.mabanggia}`}return""}displayBanggia(n){return n?`${n.title} - ${n.mabanggia}`:""}static \u0275fac=function(i){return new(i||w)};static \u0275cmp=k({type:w,selectors:[["app-detailkhachhang"]],decls:17,vars:8,consts:[["autoBanggia","matAutocomplete"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","grid","grid-cols-2","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn Kh\xE1ch H\xE0ng",3,"ngModelChange","keyup","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Vi\u1EBFt T\u1EAFt",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn File",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1ED1 Thu\u1EBF",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Gi\u1EDD Nh\u1EADn H\xE0ng",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u1ECBa Ch\u1EC9",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Qu\u1EADn",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","T\xECm ki\u1EBFm b\u1EA3ng gi\xE1...",3,"input","value","matAutocomplete","disabled"],[3,"displayWith"],[3,"value","click",4,"ngFor","ngForOf"],["color","primary",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","ngModel","disabled"],[3,"value"],[3,"click","value"]],template:function(i,t){if(i&1&&(o(0,"div",1)(1,"button",2),f("click",function(){return t.goBack()}),o(2,"mat-icon"),r(3,"arrow_back"),l()(),o(4,"div",3),r(5),l(),o(6,"div",4)(7,"mat-slide-toggle",5),_("ngModelChange",function(a){return p(t.DetailKhachhang().isActive,a)||(t.DetailKhachhang().isActive=a),a}),r(8),l(),K(9,ye,3,0,"button",6)(10,Ke,3,0,"button",6),o(11,"button",7),f("click",function(){return t.toggleDelete()}),o(12,"mat-icon"),r(13,"delete"),l()()()(),o(14,"div",8),K(15,we,9,0,"ng-container",9)(16,Se,60,39,"ng-container",9),l()),i&2){let e;h(5),S(((e=t.DetailKhachhang())==null?null:e.name)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),h(2),u("ngModel",t.DetailKhachhang().isActive),c("disabled",!t.isEdit()),h(),S(t.DetailKhachhang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),h(),c("ngIf",t.isEdit()),h(),c("ngIf",!t.isEdit()),h(5),c("ngIf",t.isDelete()),h(),c("ngIf",!t.isDelete())}},dependencies:[ee,$,Z,ie,te,U,Q,X,J,z,j,q,N,O,ae,ne,G,Y,L,I,W,re,he,ge,_e,ue,pe],encapsulation:2})};B([ce(300)],w.prototype,"autoSubtitle",1);var fe=w;export{fe as DetailKhachhangComponent};
