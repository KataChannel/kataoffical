import{a as re}from"./chunk-R6JDTC27.js";import"./chunk-ZEYFBF7A.js";import{a as ne,b as ae}from"./chunk-DFB73ZZB.js";import"./chunk-ZJWFFP6L.js";import"./chunk-HBRAORIW.js";import"./chunk-QDEULWY5.js";import{h as X}from"./chunk-CUQ6QKAF.js";import{d as ie,e as T}from"./chunk-3F7BKIWY.js";import"./chunk-ZW44ZSN2.js";import"./chunk-ZDGAGPNI.js";import{b as te}from"./chunk-DCE357X5.js";import"./chunk-HPTQNHDM.js";import"./chunk-FGZC2PIB.js";import"./chunk-4G52HXRP.js";import"./chunk-JNVUT6FC.js";import"./chunk-L6E4ZXPP.js";import{a as j,b as R}from"./chunk-ZJKHI5OQ.js";import{b as G,g as H,j as U,l as z,n as K,p as Q,u as Y,v as Z,x as $,y as ee}from"./chunk-MZSAWWIW.js";import"./chunk-DRWWD46T.js";import{a as C}from"./chunk-VUZTNYK4.js";import{a as J,b as W}from"./chunk-7U2T4VS7.js";import"./chunk-ZKHECKSJ.js";import"./chunk-GPUTGLTH.js";import{a as q,c as O,e as F}from"./chunk-I4ICTC7O.js";import"./chunk-2PPFUFFT.js";import"./chunk-UN7UZB5W.js";import{a as N,c as E}from"./chunk-WDMWHZJL.js";import"./chunk-UUFUGRFO.js";import{m as L,u as B}from"./chunk-XQ7FWWG3.js";import{Eb as A,Fc as s,Gc as k,Kc as f,Lb as x,Lc as _,Mc as y,Ra as P,Vb as p,fc as r,gc as o,ia as I,ic as M,jc as b,lc as S,ld as V,na as w,oa as v,qc as m,rb as l,sc as c,xa as g,ya as d}from"./chunk-OSJESZB6.js";import"./chunk-EU2KAMEK.js";import{j as u}from"./chunk-6DYNGEAS.js";var D=class h{constructor(n,e){this._StorageService=n;this.router=e}ListPhieuchiahang=P([]);DetailPhieuchiahang=P({});phieuchiahangId=P(null);setPhieuchiahangId(n){this.phieuchiahangId.set(n)}CreatePhieuchiahang(n){return u(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},t=yield fetch(`${C.APIURL}/phieuchiahang`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();if(!t.ok)if(t.status===401){let a=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===403){let a=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===500){let a=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}this.getAllPhieuchiahang(),this.phieuchiahangId.set(i.id)}catch(e){return console.error(e)}})}getAllPhieuchiahang(){return u(this,null,function*(){try{let n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},e=yield fetch(`${C.APIURL}/phieuchiahang`,n);if(!e.ok)if(e.status===401){let i=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(e.status===403){let i=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(e.status===500){let i=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else{let i=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}let t=yield e.json()}catch(n){return console.error(n)}})}getPhieuchiahangByid(n){return u(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json"}},t=yield fetch(`${C.APIURL}/phieuchiahang/findid/${n}`,e);if(!t.ok)if(t.status===401){let a=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===403){let a=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===500){let a=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}let i=yield t.json();this.DetailPhieuchiahang.set(i)}catch(e){return console.error(e)}})}updatePhieuchiahang(n){return u(this,null,function*(){try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},t=yield fetch(`${C.APIURL}/phieuchiahang/${n.id}`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();if(!t.ok)if(t.status===401){let a=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===403){let a=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===500){let a=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}this.getAllPhieuchiahang(),this.getPhieuchiahangByid(n.id)}catch(e){return console.error(e)}})}DeletePhieuchiahang(n){return u(this,null,function*(){try{let e={method:"DELETE",headers:{"Content-Type":"application/json"}},t=yield fetch(`${C.APIURL}/phieuchiahang/${n.id}`,e);if(!t.ok)if(t.status===401){let i=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===403){let i=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===500){let i=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else{let i=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}this.getAllPhieuchiahang()}catch(e){return console.error(e)}})}static \u0275fac=function(e){return new(e||h)(w(W),w(E))};static \u0275prov=I({token:h,factory:h.\u0275fac,providedIn:"root"})};function he(h,n){if(h&1){let e=S();r(0,"button",1),m("click",function(){g(e);let i=c();return d(i.handlePhieuchiahangAction())}),r(1,"mat-icon"),s(2,"save"),o()()}}function le(h,n){if(h&1){let e=S();r(0,"button",1),m("click",function(){g(e);let i=c();return d(i.toggleEdit())}),r(1,"mat-icon"),s(2,"edit"),o()()}}function ue(h,n){if(h&1){let e=S();M(0),r(1,"div",9)(2,"div",10),s(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),r(4,"div",11)(5,"button",12),m("click",function(){g(e);let i=c();return d(i.DeleteData())}),s(6,"\u0110\u1ED3ng \xDD"),o(),r(7,"button",13),m("click",function(){g(e);let i=c();return d(i.toggleDelete())}),s(8,"Hu\u1EF7 B\u1ECF"),o()()(),b()}}function ce(h,n){if(h&1){let e=S();M(0)(1),r(2,"mat-form-field",14)(3,"mat-label"),s(4,"Ti\xEAu \u0110\u1EC1"),o(),r(5,"input",15),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().title,i)||(a.DetailPhieuchiahang().title=i),d(i)}),m("input",function(){g(e);let i=c();return d(i.FillSlug())}),o()(),r(6,"mat-form-field",14)(7,"mat-label"),s(8,"M\xE3 S\u1EA3n Ph\u1EA9m"),o(),r(9,"input",16),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().masp,i)||(a.DetailPhieuchiahang().masp=i),d(i)}),o()(),r(10,"mat-form-field",14)(11,"mat-label"),s(12,"Gi\xE1 G\u1ED1c"),o(),r(13,"input",17),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().giagoc,i)||(a.DetailPhieuchiahang().giagoc=i),d(i)}),o()(),r(14,"mat-form-field",14)(15,"mat-label"),s(16,"\u0110\u01A1n V\u1ECB T\xEDnh"),o(),r(17,"input",16),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().dvt,i)||(a.DetailPhieuchiahang().dvt=i),d(i)}),o()(),r(18,"div",18)(19,"mat-form-field",14)(20,"mat-label"),s(21,"S\u1ED1 L\u01B0\u1EE3ng"),o(),r(22,"input",19),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().soluong,i)||(a.DetailPhieuchiahang().soluong=i),d(i)}),o()(),r(23,"mat-form-field",14)(24,"mat-label"),s(25,"S\u1ED1 L\u01B0\u1EE3ng Kho"),o(),r(26,"input",19),y("ngModelChange",function(i){g(e);let a=c();return _(a.DetailPhieuchiahang().soluongkho,i)||(a.DetailPhieuchiahang().soluongkho=i),d(i)}),o()()(),b()()}if(h&2){let e=c();l(5),f("ngModel",e.DetailPhieuchiahang().title),p("disabled",!e.isEdit()),l(4),f("ngModel",e.DetailPhieuchiahang().masp),p("disabled",!e.isEdit()),l(4),f("ngModel",e.DetailPhieuchiahang().giagoc),p("disabled",!e.isEdit()),l(4),f("ngModel",e.DetailPhieuchiahang().dvt),p("disabled",!e.isEdit()),l(5),f("ngModel",e.DetailPhieuchiahang().soluong),p("disabled",!e.isEdit()),l(4),f("ngModel",e.DetailPhieuchiahang().soluongkho),p("disabled",!e.isEdit())}}var oe=class h{_ListphieuchiahangComponent=v(re);_PhieuchiahangService=v(D);_route=v(N);_router=v(E);_snackBar=v(J);constructor(){this._route.paramMap.subscribe(n=>{let e=n.get("id");this._PhieuchiahangService.setPhieuchiahangId(e)}),V(()=>u(this,null,function*(){let n=this._PhieuchiahangService.phieuchiahangId();n||(this._router.navigate(["/admin/phieuchiahang"]),this._ListphieuchiahangComponent.drawer.close()),n==="0"?(this.DetailPhieuchiahang.set({title:T(8,!1),slug:T(8,!1)}),this._ListphieuchiahangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieuchiahang","0"])):(yield this._PhieuchiahangService.getPhieuchiahangByid(n),this._ListphieuchiahangComponent.drawer.open(),this._router.navigate(["/admin/phieuchiahang",n]))}))}DetailPhieuchiahang=this._PhieuchiahangService.DetailPhieuchiahang;isEdit=P(!1);isDelete=P(!1);phieuchiahangId=this._PhieuchiahangService.phieuchiahangId;ngOnInit(){return u(this,null,function*(){})}handlePhieuchiahangAction(){return u(this,null,function*(){this.phieuchiahangId()==="0"?yield this.createPhieuchiahang():yield this.updatePhieuchiahang()})}createPhieuchiahang(){return u(this,null,function*(){try{yield this._PhieuchiahangService.CreatePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieuchiahang:",n)}})}updatePhieuchiahang(){return u(this,null,function*(){try{yield this._PhieuchiahangService.updatePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieuchiahang:",n)}})}DeleteData(){return u(this,null,function*(){try{yield this._PhieuchiahangService.DeletePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieuchiahang"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieuchiahang:",n)}})}goBack(){this._router.navigate(["/admin/phieuchiahang"]),this._ListphieuchiahangComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieuchiahang.update(n=>(n.slug=ie(n.title),n))}static \u0275fac=function(e){return new(e||h)};static \u0275cmp=A({type:h,selectors:[["app-detailphieuchiahang"]],decls:17,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","input","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1EA3n Ph\u1EA9m",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Gi\xE1 G\u1ED1c",3,"ngModelChange","ngModel","disabled"],[1,"flex","flex-row","space-x-2"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1EA3n Ph\u1EA9m",3,"ngModelChange","ngModel","disabled"]],template:function(e,t){if(e&1&&(r(0,"div",0)(1,"button",1),m("click",function(){return t.goBack()}),r(2,"mat-icon"),s(3,"arrow_back"),o()(),r(4,"div",2),s(5),o(),r(6,"div",3)(7,"mat-slide-toggle",4),y("ngModelChange",function(a){return _(t.DetailPhieuchiahang().isActive,a)||(t.DetailPhieuchiahang().isActive=a),a}),s(8),o(),x(9,he,3,0,"button",5)(10,le,3,0,"button",5),r(11,"button",6),m("click",function(){return t.toggleDelete()}),r(12,"mat-icon"),s(13,"delete"),o()()()(),r(14,"div",7),x(15,ue,9,0,"ng-container",8)(16,ce,27,12,"ng-container",8),o()),e&2){let i;l(5),k(((i=t.DetailPhieuchiahang())==null?null:i.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l(2),f("ngModel",t.DetailPhieuchiahang().isActive),p("disabled",!t.isEdit()),l(),k(t.DetailPhieuchiahang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),l(),p("ngIf",t.isEdit()),l(),p("ngIf",!t.isEdit()),l(5),p("ngIf",t.isDelete()),l(),p("ngIf",!t.isDelete())}},dependencies:[Z,Y,Q,ee,$,K,G,z,H,U,R,j,F,q,O,te,X,B,L,ae,ne],encapsulation:2})};export{oe as DetailPhieuchiahangComponent};
