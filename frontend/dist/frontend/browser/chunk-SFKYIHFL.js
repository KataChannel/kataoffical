import{a as Kt}from"./chunk-UXDCT2GG.js";import"./chunk-ZEYFBF7A.js";import{a as Nt}from"./chunk-N32XMGWZ.js";import{a as Ht}from"./chunk-PXOONVEK.js";import{a as Vt}from"./chunk-54B3CW7P.js";import"./chunk-MFOZXGRX.js";import"./chunk-DZVZNLOS.js";import{b as Lt}from"./chunk-FWMTOWPE.js";import"./chunk-EHGCZ4C4.js";import{a as Bt}from"./chunk-Q5FTU75I.js";import{c as F,d as gt,e as L,f as _t,g as ft,h as Dt,i as xt,j as Ct,k as St,l as Et,m as bt,n as yt,o as vt,p as wt,q as kt,r as Tt,s as It,t as Mt}from"./chunk-BDJM53MD.js";import"./chunk-UBXPXHNZ.js";import{h as ht}from"./chunk-2G7ERXZL.js";import"./chunk-MC2RAUNI.js";import"./chunk-ZW44ZSN2.js";import"./chunk-NJKT2VL6.js";import{b as mt}from"./chunk-KMKBUXPR.js";import{b as pt,d as ut,e as B}from"./chunk-3F7BKIWY.js";import"./chunk-4ZVJO4SQ.js";import{a as At}from"./chunk-LFDRHLNZ.js";import{k as Ft}from"./chunk-DR4ODI6B.js";import{a as Rt}from"./chunk-JNVUT6FC.js";import{d as lt}from"./chunk-G4LL5VCW.js";import{a as G,b as rt}from"./chunk-ICUFHBRR.js";import{n as ct,v as st,y as dt}from"./chunk-VHS3IPDU.js";import"./chunk-EZX2WGQN.js";import"./chunk-VUZTNYK4.js";import{a as ot}from"./chunk-REAWTH4A.js";import"./chunk-OX537TJT.js";import"./chunk-D4DZ4OD4.js";import{a as it,c as R,e as at}from"./chunk-JPSOFPPM.js";import"./chunk-2PPFUFFT.js";import"./chunk-NQNNJGTR.js";import{a as et,c as nt}from"./chunk-CESPK7AW.js";import"./chunk-QNTBMZNO.js";import{m as U,t as $,u as tt}from"./chunk-VXEGRUUB.js";import{Dc as r,Eb as j,Ec as u,Fc as x,Lb as S,Nc as W,Ra as T,Sb as Q,Sc as _,Tb as q,Uc as f,Vb as m,Zb as Y,_b as O,ac as J,bc as N,cc as H,dc as i,ec as a,fc as v,gc as I,hc as M,hd as X,jc as w,jd as Z,mb as z,oa as C,oc as D,qc as s,rb as c,wc as V,xa as b,xc as K,ya as y,yc as P}from"./chunk-PRJD77D5.js";import"./chunk-EU2KAMEK.js";import{a as A,g as $t,j as E}from"./chunk-6DYNGEAS.js";var k=$t(Rt());var Gt=()=>[G,R,$,Dt,Ct,yt,St,xt,vt,Et,bt,wt,kt,Tt,L,_t,F],zt=o=>[5,10,25,100,o],jt=(o,e)=>e.id;function Qt(o,e){if(o&1){let t=w();i(0,"button",1),D("click",function(){b(t);let l=s();return y(l.handleDonhangAction())}),i(1,"mat-icon"),r(2,"save"),a()()}}function qt(o,e){if(o&1){let t=w();i(0,"button",5),D("click",function(){b(t);let l=s();return y(l.toggleEdit())}),i(1,"mat-icon"),r(2,"edit"),a()()}if(o&2){let t=s();m("disabled",t.DetailDonhang().status=="danhan")}}function Yt(o,e){if(o&1){let t=w();I(0),i(1,"div",11)(2,"div",12),r(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),i(4,"div",13)(5,"button",14),D("click",function(){b(t);let l=s();return y(l.DeleteData())}),r(6,"\u0110\u1ED3ng \xDD"),a(),i(7,"button",15),D("click",function(){b(t);let l=s();return y(l.toggleDelete())}),r(8,"Hu\u1EF7 B\u1ECF"),a()()(),M()}}function Ot(o,e){o&1&&(i(0,"div",26),v(1,"img",27),i(2,"div",28)(3,"div",29),r(4,"C\xD4NG TY TNHH N\xD4NG S\u1EA2N TH\u1EF0C PH\u1EA8M TR\u1EA6N GIA"),a(),i(5,"div"),r(6,"H\u1EE3p t\xE1c x\xE3: \u1EA4p L\u1ED9c Ti\u1EBFn, X\xE3 M\u1EF9 L\u1ED9c, Huy\u1EC7n C\u1EA7n Giu\u1ED9c, T\u1EC9nh Long An"),a(),i(7,"div"),r(8,"V\u0103n ph\xF2ng: T\xF2a nh\xE0 An Ph\xFA Plaza, 117-119 L\xFD Ch\xEDnh Th\u1EAFng, P.7, Q.3, TP.HCM"),a(),i(9,"div"),r(10,"Kho s\u01A1 ch\u1EBF: 30 Kha V\u1EA1n C\xE2n, P. Hi\u1EC7p B\xECnh Ch\xE1nh, TP. Th\u1EE7 \u0110\u1EE9c, TP.HCM"),a(),i(11,"div"),r(12,"Website: http://rausachtrangia.com - Hotline: 090.245.8081"),a()()())}function Jt(o,e){if(o&1&&v(0,"div",30),o&2){let t=s(2);m("innerHTML",t.DetailDonhang().khachhang.ghichu,z)}}function Wt(o,e){if(o&1&&(i(0,"th",41)(1,"span",42),r(2),a()()),o&2){let t=s().$implicit,n=s(4);c(2),x(" ",n.ColumnName[t]," ")}}function Xt(o,e){if(o&1){let t=w();i(0,"span",44)(1,"span"),r(2),a(),i(3,"button",49),D("click",function(){b(t);let l=s().$implicit,h=s(5);return y(h.RemoveSanpham(l))}),i(4,"mat-icon"),r(5,"delete"),a()()()}if(o&2){let t=s().index;c(2),x("",t+1," ")}}function Zt(o,e){if(o&1){let t=w();i(0,"div",50),D("blur",function(l){b(t);let h=s(),g=h.$implicit,p=h.index,d=s(5);return y(d.updateValue(l,p,g,"slnhan","number"))})("keydown.enter",function(l){b(t);let h=s(),g=h.$implicit,p=h.index,d=s(5);return y(d.updateValue(l,p,g,"slnhan","number"))}),r(1),_(2,"number"),a()}if(o&2){let t=s().$implicit,n=s().$implicit;m("contentEditable",!0),c(),x(" ",f(2,2,t[n]||0,"1.0-2")," ")}}function Ut(o,e){if(o&1&&(i(0,"div",46),r(1),_(2,"number"),a()),o&2){let t=s().$implicit,n=s().$implicit;c(),u(f(2,1,t[n]||0,"1.0-2"))}}function te(o,e){if(o&1&&(i(0,"div",46),r(1),_(2,"number"),a()),o&2){let t=s().$implicit,n=s().$implicit;c(),u(f(2,1,t[n]||0,"1.0-2"))}}function ee(o,e){if(o&1&&(i(0,"div",46),r(1),_(2,"number"),a()),o&2){let t=s().$implicit,n=s().$implicit;c(),u(f(2,1,t[n]||0,"1.0-2"))}}function ne(o,e){if(o&1&&(i(0,"div",46),r(1),_(2,"number"),a()),o&2){let t=s().$implicit,n=s().$implicit;c(),u(f(2,1,t[n]||0,"1.0-2"))}}function ie(o,e){if(o&1){let t=w();i(0,"div",51),D("blur",function(l){b(t);let h=s(),g=h.$implicit,p=h.index,d=s(5);return y(d.updateValue(l,p,g,"ghichu","string"))}),r(1),a()}if(o&2){let t=s().$implicit,n=s().$implicit;m("contentEditable",!0),c(),x(" ",t[n]||""," ")}}function ae(o,e){if(o&1&&(i(0,"span",48),r(1),a()),o&2){let t=s().$implicit,n=s().$implicit;c(),x(" ",t[n]," ")}}function oe(o,e){if(o&1&&(i(0,"td",43),S(1,Xt,6,1,"span",44)(2,Zt,3,5,"div",45)(3,Ut,3,4,"div",46)(4,te,3,4,"div",46)(5,ee,3,4,"div",46)(6,ne,3,4,"div",46)(7,ie,2,2,"div",47)(8,ae,2,1,"span",48),a()),o&2){let t,n=s().$implicit;c(),O((t=n)==="STT"?1:t==="slnhan"?2:t==="slgiao"?3:t==="sldat"?4:t==="giaban"?5:t==="ttnhan"?6:t==="ghichu"?7:8)}}function re(o,e){if(o&1&&(I(0,34),S(1,Wt,3,1,"th",39)(2,oe,9,1,"td",40),M()),o&2){let t=e.$implicit;m("matColumnDef",t)}}function le(o,e){o&1&&v(0,"tr",52)}function ce(o,e){o&1&&v(0,"tr",53)}function he(o,e){o&1&&(i(0,"tr",54)(1,"td",55),r(2,"Kh\xF4ng t\xECm th\u1EA5y"),a()())}function se(o,e){if(o&1&&(i(0,"div",32)(1,"table",33),N(2,re,3,1,"ng-container",34,J),S(4,le,1,0,"tr",35)(5,ce,1,0,"tr",36)(6,he,3,0,"tr",37),a(),v(7,"mat-paginator",38),a()),o&2){let t=s(3);c(),m("dataSource",t.dataSource()),c(),H(t.displayedColumns),c(2),m("matHeaderRowDef",t.displayedColumns),c(),m("matRowDefColumns",t.displayedColumns),c(2),m("pageSizeOptions",W(5,zt,t.dataSource().data.length))("pageSize",t.dataSource().data.length)}}function de(o,e){o&1&&(i(0,"div",31),S(1,se,8,7),Q(2,1,Gt),q(),a())}function me(o,e){if(o&1&&(i(0,"tr",57)(1,"td",63),r(2),a(),i(3,"td",58),r(4),a(),i(5,"td",63),r(6),a(),i(7,"td",64),r(8),_(9,"number"),a(),i(10,"td",65),r(11),_(12,"number"),a(),i(13,"td",64),r(14),_(15,"number"),a(),i(16,"td",64),r(17),_(18,"number"),a(),i(19,"td",64),r(20),_(21,"number"),a(),i(22,"td",58),r(23),a()()),o&2){let t=e.$implicit,n=e.$index;c(2),u(n+1),c(2),u(t.title),c(2),u(t.dvt),c(2),u(f(9,9,t.sldat,"1.0-2")),c(3),u(f(12,12,t.slgiao,"1.0-2")),c(3),u(f(15,15,t.slnhan,"1.0-2")),c(3),u(f(18,18,t.giaban,"1.0-2")),c(3),u(f(21,21,t.ttnhan,"1.0-2")),c(3),u(t.ghichu)}}function pe(o,e){if(o&1&&(i(0,"table",56)(1,"thead")(2,"tr",57)(3,"th",58),r(4,"STT"),a(),i(5,"th",58),r(6,"T\xEAn s\u1EA3n ph\u1EA9m"),a(),i(7,"th",58),r(8,"\u0110VT"),a(),i(9,"th",59),r(10,"SL \u0110\u1EB7t"),a(),i(11,"th",59),r(12,"SL Giao"),a(),i(13,"th",59),r(14,"SL Nh\u1EADn"),a(),i(15,"th",59),r(16,"Gi\xE1 B\xE1n"),a(),i(17,"th",59),r(18,"TT Nh\u1EADn"),a(),i(19,"th",58),r(20,"Ghi ch\xFA"),a()()(),i(21,"tbody"),N(22,me,24,24,"tr",57,jt),i(24,"tr",57)(25,"td",60),r(26,"T\u1ED5ng:"),a(),i(27,"td",61),r(28),_(29,"number"),a(),i(30,"td",61),r(31),_(32,"number"),a(),i(33,"td",61),r(34),_(35,"number"),a(),v(36,"td",61),i(37,"td",61),r(38),_(39,"number"),a(),v(40,"td",62),a()()()),o&2){let t=s(2);c(22),H(t.DetailDonhang().sanpham),c(6),u(f(29,4,t.TinhTong(t.DetailDonhang().sanpham,"sldat"),"1.0-2")),c(3),u(f(32,7,t.TinhTong(t.DetailDonhang().sanpham,"slgiao"),"1.0-2")),c(3),u(f(35,10,t.TinhTong(t.DetailDonhang().sanpham,"slnhan"),"1.0-2")),c(4),u(f(39,13,t.TinhTong(t.DetailDonhang().sanpham,"ttnhan"),"1.0-2"))}}function ue(o,e){if(o&1&&(I(0),i(1,"div",16)(2,"div",17),S(3,Ot,13,0,"div",18),i(4,"div",19),r(5,"B\u1EA3ng Sao K\xEA H\xE0ng Ng\xE0y"),a(),i(6,"div"),r(7),a(),S(8,Jt,1,1,"div",20),i(9,"div",21)(10,"strong"),r(11,"\u0110\u1ECBa Ch\u1EC9 : "),a(),r(12),a(),i(13,"div",21)(14,"strong"),r(15,"Ghi Ch\xFA : "),a(),r(16),a(),i(17,"div",21)(18,"strong"),r(19,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i : "),a(),r(20),a(),i(21,"div",21)(22,"strong"),r(23),_(24,"number"),a()(),S(25,de,4,0,"div",22)(26,pe,41,16,"table",23),i(27,"div",24),r(28,"Ng\xE0y In:"),a(),i(29,"div",25)(30,"p")(31,"strong"),r(32,"Ng\u01B0\u1EDDi v\u1EADn chuy\u1EC3n"),a()(),i(33,"p")(34,"strong"),r(35,"Ng\u01B0\u1EDDi nh\u1EADn h\xE0ng"),a()(),i(36,"p")(37,"strong"),r(38,"Th\u1EE7 kho"),a()(),i(39,"p")(40,"strong"),r(41,"Ng\u01B0\u1EDDi l\u1EADp"),a()()()()(),M()),o&2){let t,n,l,h,g,p,d=s();c(3),m("ngIf",!d.isEdit()),c(3),Y("font-bold text-[18px] uppercase ",(t=d.DetailDonhang())!=null&&t.khachhangId?"":"text-red-700 italic",""),c(),u(((n=d.getName((n=d.DetailDonhang())==null?null:n.khachhangId))==null?null:n.name)||"Ch\u01B0a Ch\u1ECDn Kh\xE1ch H\xE0ng"),c(),m("ngIf",d.isEdit()&&((l=d.DetailDonhang())==null||l.khachhang==null?null:l.khachhang.ghichu)),c(4),x(" ",(h=d.DetailDonhang())==null||h.khachhang==null?null:h.khachhang.diachi,""),c(4),x(" ",(g=d.DetailDonhang())==null?null:g.ghichu,""),c(4),x(" ",(p=d.DetailDonhang())==null||p.khachhang==null?null:p.khachhang.sdt,""),c(3),x("T\u1ED5ng kh\u1ED1i l\u01B0\u1EE3ng nh\u1EADn : ",f(24,12,d.TinhTong(d.DetailDonhang().sanpham,"slnhan"),"1.0-2"),""),c(2),m("ngIf",d.isEdit()),c(),m("ngIf",!d.isEdit())}}var Pt=class o{_ListcongnokhachhangComponent=C(Kt);_DonhangService=C(At);_KhachhangService=C(Ht);_BanggiaService=C(Nt);_SanphamService=C(Vt);_route=C(et);_router=C(nt);_snackBar=C(ot);constructor(){this._route.paramMap.subscribe(e=>E(this,null,function*(){let t=e.get("id");this._DonhangService.setDonhangId(t),yield this._KhachhangService.getAllKhachhang(),this.filterKhachhang=this.ListKhachhang().filter(n=>n.isActive),yield this._BanggiaService.getAllBanggia(),this.filterBanggia=this._BanggiaService.ListBanggia(),yield this._SanphamService.getAllSanpham(),this.filterSanpham=this._SanphamService.ListSanpham(),this.dataSource().data=this.DetailDonhang().sanpham,this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort})),Z(()=>E(this,null,function*(){let e=this._DonhangService.donhangId();e||(this._router.navigate(["/admin/congnokhachhang"]),this._ListcongnokhachhangComponent.drawer.close()),e==="0"?(this.DetailDonhang.set({title:B(8,!1),madonhang:B(8,!1),ngaygiao:(0,k.default)().add(1,"days").format("YYYY-MM-DD")}),this._ListcongnokhachhangComponent.drawer.open(),this.isEdit.update(t=>!t),this._router.navigate(["/admin/congnokhachhang","0"])):(yield this._DonhangService.getDonhangByid(e),this.DetailDonhang.update(t=>(t.sanpham.forEach(n=>(n.ttnhan=n.slnhan*n.giaban,n)),t)),this._ListcongnokhachhangComponent.drawer.open(),this._router.navigate(["/admin/congnokhachhang",e]))}))}DetailDonhang=this._DonhangService.DetailDonhang;ListKhachhang=this._KhachhangService.ListKhachhang;isEdit=T(!1);isDelete=T(!1);filterKhachhang=[];filterBanggia=[];filterSanpham=[];donhangId=this._DonhangService.donhangId;ngOnInit(){return E(this,null,function*(){document.addEventListener("keydown",e=>{e.key==="Enter"&&document.activeElement?.getAttribute("contenteditable")==="true"&&e.preventDefault()})})}DoneDonhang(){this.DetailDonhang.update(e=>(e.status="danhan",e)),this._DonhangService.updateDonhang(this.DetailDonhang())}handleDonhangAction(){return E(this,null,function*(){this.donhangId()==="0"?yield this.createDonhang():yield this.updateDonhang()})}createDonhang(){return E(this,null,function*(){try{this.DetailDonhang.update(e=>(e.type="donsi",e)),this.DetailDonhang().sanpham=this.DetailDonhang().sanpham.map(e=>(e.ttgiao=Number(e.slgiao)*Number(e.giaban)||0,e)),yield this._DonhangService.CreateDonhang(this.DetailDonhang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi t\u1EA1o donhang:",e)}})}updateDonhang(){return E(this,null,function*(){try{this.DetailDonhang().sanpham=this.DetailDonhang().sanpham.map(e=>(e.ttgiao=Number(e.slgiao)*Number(e.giaban)||0,e)),yield this._DonhangService.updateDonhang(this.DetailDonhang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(e=>!e)}catch(e){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt donhang:",e)}})}DeleteData(){return E(this,null,function*(){try{yield this._DonhangService.DeleteDonhang(this.DetailDonhang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/congnokhachhang"])}catch(e){console.error("L\u1ED7i khi x\xF3a donhang:",e)}})}goBack(){this._router.navigate(["/admin/congnokhachhang"]),this._ListcongnokhachhangComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.DetailDonhang.update(e=>(e.slug=ut(e.title),e))}DoFindKhachhang(e){let t=e.target.value.toLowerCase();this.filterKhachhang=this.ListKhachhang().filter(n=>n.isActive&&n.name?.toLowerCase().includes(t)||n.namenn?.toLowerCase().includes(t)||n.sdt?.toLowerCase().includes(t))}DoFindBanggia(e){let t=e.target.value.toLowerCase()}UpdateBangia(){}SelectBanggia(e){console.log(e.value)}Chonkhachhang(e){this.DetailDonhang.update(t=>(t.khachhangId=e.id,t))}updateValue(e,t,n,l,h){let g=h==="number"?Number(e.target.innerText.trim())||0:e.target.innerText.trim();this.DetailDonhang.update(p=>{if(t!==null)if(l==="slnhan"){let d=g;Number(d)<0?this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n ho\u1EB7c b\u1EB1ng 0","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]}):(p.sanpham[t].slnhan=d,p.sanpham[t].ttnhan=p.sanpham[t].slnhan*p.sanpham[t].giaban)}else p.sanpham[t][l]=g;else p[l]=g;return p}),setTimeout(()=>{t!==null&&(e.target.innerText=this.DetailDonhang()?.sanpham[t]?.slnhan||"0")},0),console.log(this.DetailDonhang())}Tongcong=0;Tong=0;Tinhtongcong(e){this.Tongcong=e.Tongcong,this.Tong=e.Tong}TinhTong(e,t){return e?.reduce((n,l)=>n+(l[t]||0),0)||0}SelectKhachhang(e){let t=this.ListKhachhang().find(n=>n.id===e.value);console.log(t),t&&this.DetailDonhang.update(n=>{let l={name:t.name,diachi:t.diachi,sdt:t.sdt,ghichu:t.ghichu};return n.khachhangId=t.id,n.khachhang=l,n.banggiaId=t.banggia.find(h=>(0,k.default)()>(0,k.default)(h.batdau)&&(0,k.default)()<(0,k.default)(h.ketthuc))?.id,n}),console.log(this.DetailDonhang())}displayedColumns=["STT","title","masp","dvt","sldat","slgiao","slnhan","giaban","ttnhan","ghichu"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slgiao:"SL Giao",slnhan:"SL Nh\u1EADn",giaban:"Gi\xE1 B\xE1n",ttnhan:"TT Nh\u1EADn",ghichu:"Ghi Ch\xFA"};dataSource=T(new Mt([]));CountItem=X(()=>this.dataSource().data.length);paginator;sort;_GoogleSheetService=C(Bt);LoadDrive(){return E(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"GHImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._GoogleSheetService.getDrive(e),n=pt(t.values);console.log(n),this.DetailDonhang.update(l=>(l.sanpham=n.map(h=>{h.sldat=Number(h.sldat)||0,h.slgiao=Number(h.slgiao)||0,h.slnhan=Number(h.slnhan)||0,h.ttdat=Number(h.ttdat)||0,h.ttgiao=Number(h.ttgiao)||0,h.ttnhan=Number(h.ttnhan)||0;let g=this._SanphamService.ListSanpham().find(p=>p.masp===h.masp);return console.log(g),g?A(A({},g),h):h}),l)),console.log(this.DetailDonhang()),this.dataSource().data=this.DetailDonhang().sanpham,this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort,this.reloadfilter()})}applyFilter(e){let t=e.target.value;this.dataSource().filter=t.trim().toLowerCase()}EmptyCart(){this.DetailDonhang.update(e=>(e.sanpham=[],e)),this.dataSource().data=this.DetailDonhang().sanpham,this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort,this.reloadfilter()}getName(e){return this.ListKhachhang().find(t=>t.id===e)}reloadfilter(){this.filterSanpham=this._SanphamService.ListSanpham().filter(e=>!this.DetailDonhang().sanpham.some(t=>t.id===e.id))}DoFindSanpham(e){let t=e.target.value;console.log(t),this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>n.title.toLowerCase().includes(t.toLowerCase()))}SelectSanpham(e){let t=e.value,n=this._SanphamService.ListSanpham().find(l=>l.id===t);this.DetailDonhang.update(l=>(l.sanpham?(n.sldat=n.slgiao=1,l.sanpham.push(n)):(l.sanpham=[],n.sldat=n.slgiao=1,l.sanpham.push(n)),this.reloadfilter(),l)),this.dataSource().data=this.DetailDonhang().sanpham,this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort}RemoveSanpham(e){this.DetailDonhang.update(t=>(t.sanpham=t.sanpham.filter(n=>n.id!==e.id),this.reloadfilter(),t)),this.dataSource().data=this.DetailDonhang().sanpham,this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort}CoppyDon(){this._snackBar.open("\u0110ang Coppy \u0110\u01A1n H\xE0ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),this.DetailDonhang.update(e=>(delete e.id,e.title=`${e.title} - Coppy`,e.madonhang=B(8,!1),e)),console.log(this.DetailDonhang()),this._DonhangService.CreateDonhang(this.DetailDonhang()).then(e=>{e?(this._snackBar.open("Coppy \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/congnokhachhang",e.id])):this._snackBar.open("Coppy \u0110\u01A1n H\xE0ng Th\u1EA5t B\u1EA1i","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}printContent(){let e=document.getElementById("printContent");if(e){let t=window.open("","_blank");t?(t.document.write(`
            <html>
            <head>
              <title>In B\u1EA3ng</title>
               
      <script src="https://cdn.tailwindcss.com"><\/script>
      <script>
        tailwind.config = {
          theme: { extend: {} }
        };
      <\/script>
    
              <style>
                body { font-size: 12px; font-family: Arial, sans-serif; }
                table { width: 100%; border-collapse: collapse; }
                th, td { border: 1px solid #000; padding: 4px; text-align: left; }
                @media print { 
                body { margin: 0; } 
                img {height:80px}
                }
              </style>
            </head>
            <body>
              ${e.outerHTML}
              <script>
                window.onload = function() { window.print(); window.close(); }
              <\/script>
            </body>
            </html>
          `),t.document.close()):console.error("Kh\xF4ng th\u1EC3 m\u1EDF c\u1EEDa s\u1ED5 in")}else console.error("Kh\xF4ng t\xECm th\u1EA5y ph\u1EA7n t\u1EED printContent")}GetGoiy(e){return parseFloat(((e.soluongkho-e.soluong)*(1+e.haohut/100)).toString()).toFixed(2)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=j({type:o,selectors:[["app-detailcongnokhachhang"]],viewQuery:function(t,n){if(t&1&&(V(F,5),V(L,5)),t&2){let l;K(l=P())&&(n.paginator=l.first),K(l=P())&&(n.sort=l.first)}},decls:23,vars:9,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click","disabled"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["id","printContent",1,"min-w-[800px]","flex","flex-col","space-y-6","items-center","p-2","border","rounded-lg"],[1,"w-full","flex","flex-col","space-y-4","items-center","justify-center"],["class","w-full flex flex-row space-x-2 items-center justify-between",4,"ngIf"],[1,"font-bold","text-[18px]","uppercase"],["class","p-2 rounded-lg border text-red-600",3,"innerHTML",4,"ngIf"],[1,"w-full","flex","items-start"],["class","w-full flex flex-col overflow-y-auto",4,"ngIf"],["class","w-full border-collapse border mt-4",4,"ngIf"],[1,"w-full","text-end","font-bold","p-2"],[1,"w-full","flex","justify-between","items-center","text-center","mt-6","p-2"],[1,"w-full","flex","flex-row","space-x-2","items-center","justify-between"],["src","/images/logo-full.png",1,"h-20","mx-auto"],[1,"w-2/3","flex","flex-col","space-y-2"],[1,"font-bold","text-[18px]"],[1,"p-2","rounded-lg","border","text-red-600",3,"innerHTML"],[1,"w-full","flex","flex-col","overflow-y-auto"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"text-end"],[1,"p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],["mat-icon-button","","color","warn",3,"click"],[1,"p-2","min-w-28","text-end","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","keydown.enter","contentEditable"],[1,"p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-full","border-collapse","border","mt-4"],[1,"border"],[1,"border","p-2"],[1,"border","p-2","max-w-10"],["colspan","3",1,"border","p-2","text-start"],[1,"border","p-2","text-end","font-bold"],[1,"border","p-2","text-end"],[1,"border","p-2","text-center"],[1,"border","p-2","text-end","max-w-10"],[1,"border","p-2","text-end","max-w-"]],template:function(t,n){if(t&1&&(i(0,"div",0)(1,"button",1),D("click",function(){return n.goBack()}),i(2,"mat-icon"),r(3,"arrow_back"),a()(),i(4,"div",2),D("blur",function(h){return n.updateValue(h,null,n.DetailDonhang(),"title","string")}),r(5),a(),i(6,"div",3)(7,"button",4),D("click",function(){return n.DoneDonhang()}),r(8," \u0110\xE3 Nh\u1EADn"),a(),i(9,"button",5),D("click",function(){return n.CoppyDon()}),i(10,"mat-icon"),r(11,"content_copy"),a()(),i(12,"button",1),D("click",function(){return n.printContent()}),i(13,"mat-icon"),r(14,"print"),a()(),S(15,Qt,3,0,"button",6)(16,qt,3,1,"button",7),i(17,"button",8),D("click",function(){return n.toggleDelete()}),i(18,"mat-icon"),r(19,"delete"),a()()()(),i(20,"div",9),S(21,Yt,9,0,"ng-container",10)(22,ue,42,15,"ng-container",10),a()),t&2){let l;c(4),m("contentEditable",!0),c(),x(" ",((l=n.DetailDonhang())==null?null:l.madonhang)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"," "),c(2),m("disabled",n.DetailDonhang().status=="danhan"),c(2),m("disabled",n.DetailDonhang().status=="danhan"),c(6),m("ngIf",n.isEdit()),c(),m("ngIf",!n.isEdit()),c(),m("disabled",n.DetailDonhang().status=="danhan"),c(4),m("ngIf",n.isDelete()),c(),m("ngIf",!n.isDelete())}},dependencies:[st,dt,ct,rt,G,at,it,R,mt,ht,tt,U,$,Lt,lt,Ft,It,ft,gt],encapsulation:2})};export{Pt as DetailCongnokhachhangComponent};
