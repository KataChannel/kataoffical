import{a as K}from"./chunk-LSO2ECJT.js";import{a as De}from"./chunk-OU7W6YZE.js";import{b as je}from"./chunk-SV4XXZ3F.js";import{a as be,c as Te,d as Le,e as Re,f as Ue,g as We,h as Fe}from"./chunk-KVZFNZAQ.js";import"./chunk-FSCSPFQQ.js";import"./chunk-4ZVJO4SQ.js";import{a as Ce}from"./chunk-ESFBXNE4.js";import{a as we,b as Ae}from"./chunk-EI6QBKUT.js";import{A as Pe,b as ye,g as _e,j as Se,o as Ie,q as xe,s as ke,w as Ee,z as Me}from"./chunk-7HD343AH.js";import"./chunk-DRWWD46T.js";import"./chunk-VUZTNYK4.js";import{a as ve}from"./chunk-ZS2YBXCI.js";import"./chunk-U372JANJ.js";import"./chunk-RJIUDVK6.js";import{e as fe}from"./chunk-VMFW3YFK.js";import"./chunk-2CYG4DEY.js";import"./chunk-2PPFUFFT.js";import"./chunk-ZQXWC5PU.js";import{a as me,c as he}from"./chunk-WDMWHZJL.js";import"./chunk-UUFUGRFO.js";import{w as q,x as ge}from"./chunk-XQ7FWWG3.js";import{Aa as re,E as Y,Eb as se,Fc as h,G as $,Ka as oe,Kc as G,Lb as le,Lc as H,Mb as ue,Mc as z,Oc as Z,S as ee,Sb as ce,Tb as de,Vb as M,Wa as L,Z as N,aa as v,ba as V,c as j,f as X,fc as s,gc as c,hc as P,ia as te,la as C,lc as pe,n as S,na as l,nb as B,o as T,oa as x,p as O,q as I,qb as ae,qc as b,rb as k,sc as m,ta as ie,u as D,wb as E,xa as w,ya as A,za as ne}from"./chunk-OSJESZB6.js";import"./chunk-EU2KAMEK.js";import{j as F}from"./chunk-6DYNGEAS.js";var Oe={Backgroup:{url:"https://png.pngtree.com/thumb_back/fw800/background/20240103/pngtree-vibrant-foliage-a-green-textured-background-of-banana-tree-leaves-image_13865143.png",alt:""},Logo:{url:"images/logo-full.png",alt:""}};var qe=new C("angularfire2.auth.use-emulator"),Ke=new C("angularfire2.auth.settings"),Je=new C("angularfire2.auth.tenant-id"),Qe=new C("angularfire2.auth.langugage-code"),Xe=new C("angularfire2.auth.use-device-language"),Ye=new C("angularfire.auth.persistence"),$e=(a,n,e,t,i,o,u,y)=>Fe(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{let d=n.runOutsideAngular(()=>a.auth());if(e&&d.useEmulator(...e),t&&(d.tenantId=t),d.languageCode=i,o&&d.useDeviceLanguage(),u)for(let[R,U]of Object.entries(u))d.settings[R]=U;return y&&d.setPersistence(y),d},[e,t,i,o,u,y]),Ne=(()=>{class a{injector=x(ie);authState;idToken;user;idTokenResult;credential;constructor(e,t,i,o,u,y,d,R,U,Ge,He,rt){let J=new X,_=I(void 0).pipe(S(u.outsideAngular),v(()=>o.runOutsideAngular(()=>import("./chunk-SGXWTGL5.js"))),D(()=>We(e,o,t)),D(g=>$e(g,o,y,R,U,Ge,d,He)),N({bufferSize:1,refCount:!1}));if(ge(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=I(null);else{_.pipe(ee()).subscribe();let g=_.pipe(v(r=>r.getRedirectResult().then(p=>p,()=>null)),be(this.injector),N({bufferSize:1,refCount:!1})),Q=_.pipe(v(r=>new j(p=>({unsubscribe:o.runOutsideAngular(()=>r.onAuthStateChanged(f=>p.next(f),f=>p.error(f),()=>p.complete()))})))),W=_.pipe(v(r=>new j(p=>({unsubscribe:o.runOutsideAngular(()=>r.onIdTokenChanged(f=>p.next(f),f=>p.error(f),()=>p.complete()))}))));this.authState=g.pipe(V(Q),T(u.outsideAngular),S(u.insideAngular)),this.user=g.pipe(V(W),T(u.outsideAngular),S(u.insideAngular)),this.idToken=this.user.pipe(v(r=>r?O(r.getIdToken()):I(null))),this.idTokenResult=this.user.pipe(v(r=>r?O(r.getIdTokenResult()):I(null))),this.credential=Y(g,J,this.authState.pipe($(r=>!r))).pipe(D(r=>r?.user?r:null),T(u.outsideAngular),S(u.insideAngular))}return Le(this,_,o,{spy:{apply:(g,Q,W)=>{(g.startsWith("signIn")||g.startsWith("createUser"))&&W.then(r=>J.next(r))}}})}static \u0275fac=function(t){return new(t||a)(l(Re),l(Ue,8),l(L),l(oe),l(Te),l(qe,8),l(Ke,8),l(Je,8),l(Qe,8),l(Xe,8),l(Ye,8),l(De,8))};static \u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var tt=()=>[Me,Ee,xe,ke,ye,_e,Se,we],Ve=()=>({standalone:!0});function it(a,n){if(a&1){let e=pe();s(0,"div",1),P(1,"img",2),s(2,"div",3)(3,"div",4)(4,"div",5),P(5,"div",6),s(6,"div",7),P(7,"img",8),s(8,"mat-form-field",9)(9,"mat-label"),h(10,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),c(),s(11,"input",10),z("ngModelChange",function(i){w(e);let o=m();return H(o.User.SDT,i)||(o.User.SDT=i),A(i)}),c(),s(12,"mat-icon",11),h(13,"call"),c()(),s(14,"mat-form-field",9)(15,"mat-label"),h(16,"M\u1EADt kh\u1EA9u"),c(),s(17,"input",12),b("keyup.enter",function(){w(e);let i=m();return A(i.Dangnhap())}),z("ngModelChange",function(i){w(e);let o=m();return H(o.User.password,i)||(o.User.password=i),A(i)}),c(),s(18,"mat-icon",11),h(19,"lock"),c()(),s(20,"div",13),b("click",function(){w(e);let i=m();return A(i.Dangnhap())})("keyup.enter",function(){w(e);let i=m();return A(i.Dangnhap())}),s(21,"span"),h(22,"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n"),c()(),s(23,"div",14),h(24," Ho\u1EB7c \u0110\u0103ng Nh\u1EADp B\u1EB1ng"),c(),s(25,"div",15)(26,"span",16),b("click",function(){w(e);let i=m();return A(i.loginGoogle())}),ne(),s(27,"svg",17),P(28,"path",18)(29,"path",19)(30,"path",20)(31,"path",21),c(),re(),s(32,"span"),h(33,"Gmail"),c()()()()()()()()}if(a&2){let e=m();k(),M("src",e.Config.Backgroup.url,B)("alt",e.Config.Backgroup.alt),k(6),M("src",e.Config.Logo.url,B)("alt",e.Config.Logo.alt),k(4),G("ngModel",e.User.SDT),M("ngModelOptions",Z(10,Ve))("placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),k(6),G("ngModel",e.User.password),M("ngModelOptions",Z(11,Ve))("placeholder","M\u1EADt kh\u1EA9u")}}function nt(a,n){}var Be=class a{constructor(n,e,t,i){this.auth=n;this.route=e;this.router=t;this.platformId=i;q(this.platformId)&&(this.token=localStorage.getItem("token")||null)}token;gotonew="translate-x-0";_UserService=x(Ce);_StorageService=x(ve);Config=Oe;order1="order-1";order2="order-2";rightpanel="transform-x-0";leftpanel="transform-x-0";User={};onMessage(n){n.origin}SlidingForm(){this.order1=="order-1"?(this.rightpanel="opacity-0",this.leftpanel="opacity-0"):(this.rightpanel="opacity-100",this.leftpanel="opacity-100"),setTimeout(()=>{this.order1=="order-1"?this.order1="order-2":this.order1="order-1",this.order2=="order-1"?this.order2="order-2":this.order2="order-1",this.rightpanel="opacity-100",this.leftpanel="opacity-100"},200)}ngOnInit(){this.route.queryParams.subscribe(n=>{let e=n.token;e?(console.log("Token from URL:",e),this.validateToken(e)):(this.router.navigate(["/admin/lienheadmin"]),console.error("Token not found in URL"))})}validateToken(n){try{let e=JSON.parse(atob(n.split(".")[1]));e.exp&&e.exp<Date.now()/1e3||(this._StorageService.setItem("token",n),this._UserService.getProfile().then(t=>{t&&(t.permissions>0?(console.log(t),window.location.reload()):this.router.navigate(["/admin/lienheadmin"]))}))}catch{}}Dangnhap(){return F(this,null,function*(){if(this.User.SDT&&this.User.SDT!==""&&this.User.password&&this.User.password!==""){this.User.email=this.User.SDT;try{this._UserService.login(this.User).then(n=>{console.log(n),n[0]&&setTimeout(()=>{window.location.reload()},100)})}catch(n){console.error("Login error:",n)}}})}loginWithGoogle(){return F(this,null,function*(){let n=new K;try{let e=yield this.auth.signInWithPopup(n);console.log("Logged in:",e),console.log("Logged in:",e.user),console.log("Logged in:",e.user?.providerData[0]),this._UserService.LoginByGoogle(e.user?.providerData[0]).then(t=>{t[0]&&q(this.platformId)})}catch(e){console.error("Login error:",e)}})}loginGoogle(){this._UserService.loginWithGoogle()}loginFacebook(){this._UserService.loginWithFacebook()}loginZalo(){this._UserService.loginWithZalo()}static \u0275fac=function(e){return new(e||a)(E(Ne),E(me),E(he),E(L))};static \u0275cmp=se({type:a,selectors:[["app-login"]],hostBindings:function(e,t){e&1&&b("message",function(o){return t.onMessage(o)},!1,ae)},decls:4,vars:0,consts:[[1e3,100],[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col"],[1,"object-cover","absolute","top-0","right-0","w-full","h-full",3,"src","alt"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"max-h-36","w-auto","rounded-lg",3,"src","alt"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","text","matInput","",1,"w-ful",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matPrefix","",1,"material-symbols-outlined"],["type","password","matInput","",1,"w-full",3,"keyup.enter","ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"cursor-pointer","lg:w-64","w-full","flex","space-x-2","border","items-center","justify-center","p-4","rounded-lg","bg-slate-100","hover:bg-white",3,"click","keyup.enter"],[1,"text-center","font-bold"],[1,"cursor-pointer","lg:w-64","w-full"],[1,"border","flex","space-x-2","items-center","justify-center","p-2","rounded-lg","bg-slate-100","hover:bg-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","100","height","100","viewBox","0 0 48 48",1,"!w-8","!h-8"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"]],template:function(e,t){e&1&&(le(0,it,34,12)(1,nt,0,0),ce(2,0,tt,1,null,null,0,null,ue),de())},dependencies:[Pe,je,fe,Ie,Ae],encapsulation:2})};export{Be as LoginComponent};
