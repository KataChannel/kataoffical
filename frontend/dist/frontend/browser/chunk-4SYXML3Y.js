import{a as V}from"./chunk-LDTHYFEJ.js";import{a as U}from"./chunk-DYSICJE4.js";import{a as B}from"./chunk-MC3P4QZI.js";import"./chunk-EOEI42HP.js";import"./chunk-HVTWWBOW.js";import"./chunk-3OJFS6UR.js";import{a as N}from"./chunk-H54S5G77.js";import"./chunk-FGFEII7E.js";import"./chunk-TRYEEDFV.js";import"./chunk-D4QDDQOA.js";import{a as F,b as O,d as P}from"./chunk-VNKEAMBS.js";import{a as $,b as j}from"./chunk-K6XGRCBI.js";import{b as K,g as H,j as R,n as Z,p as z,u as G,v as Y,x as q,y as J}from"./chunk-6CYPKWCK.js";import"./chunk-MZWUMQWW.js";import"./chunk-T3Q3DASN.js";import"./chunk-AQK6ZTVG.js";import"./chunk-N7CMVMO3.js";import"./chunk-R6Q2HSJ3.js";import"./chunk-QVXMGLJZ.js";import"./chunk-LW5A5GOC.js";import{d as D,l as w,m as T,q as E}from"./chunk-2CV4OV4X.js";import{Ab as L,Ac as x,Bc as M,Hb as m,Ob as A,Pb as S,Rb as p,ac as a,bc as r,cc as v,fa as k,fd as I,gc as C,jb as b,la as l,lc as u,nc as c,ob as s,ua as g,va as _,zc as d}from"./chunk-FKNCN4IQ.js";import{j as y}from"./chunk-XXD5T5ZZ.js";var h=class{_document;_textarea;constructor(i,e){this._document=e;let t=this._textarea=this._document.createElement("textarea"),o=t.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",t.setAttribute("aria-hidden","true"),t.value=i,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let i=this._textarea,e=!1;try{if(i){let t=this._document.activeElement;i.select(),i.setSelectionRange(0,i.value.length),e=this._document.execCommand("copy"),t&&t.focus()}}catch{}return e}destroy(){let i=this._textarea;i&&(i.remove(),this._textarea=void 0)}},Q=(()=>{class n{_document=l(D);constructor(){}copy(e){let t=this.beginCopy(e),o=t.copy();return t.destroy(),o}beginCopy(e){return new h(e,this._document)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ee=()=>[w,T,G,z,F,O,$,q,K,H,R];function te(n,i){if(n&1){let e=C();a(0,"button",7),u("click",function(){g(e);let o=c().$implicit,f=c(2);return _(f.CreateAffiliateLink(o))}),d(1,"T\u1EA1o M\u1EDBi"),r()}}function ie(n,i){if(n&1){let e=C();a(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),d(3,"Li\xEAn K\u1EBFt"),r(),v(4,"input",10),r(),a(5,"button",11),u("click",function(){g(e);let o=c().$implicit,f=c(2);return _(f.CopyLinkAffiliate(o))}),a(6,"mat-icon"),d(7,"content_copy"),r()(),a(8,"button",11),u("click",function(){g(e);let o=c().$implicit,f=c(2);return _(f.SharedAffiliate(o))}),a(9,"mat-icon"),d(10,"share"),r()()()}if(n&2){let e=c().$implicit,t=c(2);s(4),p("disabled",!0)("ngModel",t.getAffiliateLink(e))}}function ne(n,i){if(n&1&&(a(0,"div",2),d(1),a(2,"div",3),d(3),r(),v(4,"img",4),a(5,"div"),d(6),r(),a(7,"div"),m(8,te,2,0,"button",5),r(),m(9,ie,11,2,"div",6),r()),n&2){let e=i.$implicit,t=c(2);s(),M(" ",e.link," "),s(2),x(e.title),s(),p("src",e.thumbnail,b),s(2),x(e.description),s(2),p("ngIf",!t.getAffiliateLink(e)),s(),p("ngIf",t.getAffiliateLink(e))}}function oe(n,i){if(n&1&&m(0,ne,10,6,"div",1),n&2){let e=c();p("ngForOf",e.ListLandingpage())}}var W=class n{_LandingpageService=l(U);_AffiliatelinkService=l(V);_UserService=l(B);_clipboard=l(Q);_MatSnackBar=l(N);ListLandingpage=this._LandingpageService.ListLandingpage;LinkAffiliate=this._AffiliatelinkService.ListAffiliatelink;Profile;constructor(){I(()=>y(this,null,function*(){yield this._LandingpageService.getAllLandingpage(),yield this._UserService.getProfile(),this.Profile=this._UserService.profile(),yield this._AffiliatelinkService.getAffiliateListBy({createdById:this.Profile.id})}))}ngOnInit(){this._AffiliatelinkService.listenAffiliatelinkUpdates()}getAffiliateLink(i){let e=this.LinkAffiliate().find(o=>o.landingPageId==i.id);return console.log("affiliateLink",e),e?e?.landingPage?.slug+"/?ref="+e.codeId:null}CreateAffiliateLink(i){return y(this,null,function*(){this.Profile.id;let e={landingPageId:i.id,createdById:this.Profile.id};yield this._AffiliatelinkService.CreateAffiliatelink(e),yield this._AffiliatelinkService.getAffiliateListBy({createdById:this.Profile.id}),console.log(this._AffiliatelinkService.ListAffiliatelink())})}CopyLinkAffiliate(i){let t=`${window.location.origin}/landingpage/${this.getAffiliateLink(i)}`;this._clipboard.copy(t),this._MatSnackBar.open("\u0110\xE3 copy li\xEAn k\u1EBFt","\u0110\xF3ng",{duration:2e3,panelClass:["snackbar-success"]})}SharedAffiliate(i){window.open(`/landingpage/${this.getAffiliateLink(i)}`,"_blank")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=L({type:n,selectors:[["app-landingpage"]],decls:4,vars:0,consts:[[1,"container","grid","grid-cols-3","gap-4","m-auto","p-8"],["class","rounded-lg p-3 flex flex-col space-y-2 border",4,"ngFor","ngForOf"],[1,"rounded-lg","p-3","flex","flex-col","space-y-2","border"],[1,"font-bold"],["alt","Thumbnail",1,"w-full","h-auto","rounded-md",3,"src"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["class","flex flex-row space-x-2 items-center",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Li\xEAn K\u1EBFt",3,"disabled","ngModel"],["mat-icon-button","","color","primary",3,"click"]],template:function(e,t){e&1&&(a(0,"div",0),m(1,oe,1,1),A(2,1,ee),S(),r())},dependencies:[E,Y,P,j,J,Z],encapsulation:2})};export{W as LandingpageComponent};
