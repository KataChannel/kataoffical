import{a as Le}from"./chunk-BT3BR7MQ.js";import{a as Ve}from"./chunk-MFOZXGRX.js";import{a as Te}from"./chunk-5CD4NEAI.js";import{a as X,b as Ee}from"./chunk-65HCGQ2R.js";import{a as tt,b as ve,c as Se}from"./chunk-MOEEJ3PY.js";import{b as we,f as Be}from"./chunk-N62VL4FK.js";import"./chunk-P7PTBZX5.js";import{a as Fe}from"./chunk-LCARII4T.js";import{a as ke}from"./chunk-5RUPBBPT.js";import"./chunk-MXRERSWW.js";import{a as Ie}from"./chunk-VYDSVYRU.js";import{a as Ue}from"./chunk-JNVUT6FC.js";import"./chunk-4ZVJO4SQ.js";import{b as Zt,d as Jt}from"./chunk-STTHC4C4.js";import"./chunk-ZW44ZSN2.js";import"./chunk-KXVHPTGE.js";import{d as At}from"./chunk-54NKCXFK.js";import"./chunk-IXY23C6B.js";import{a as kt,c as Ft}from"./chunk-PWU56VV4.js";import{a as J}from"./chunk-OOE7SRMD.js";import{a as re,b as ce}from"./chunk-55FEK267.js";import"./chunk-H7UDLENL.js";import"./chunk-RQQ6YENK.js";import{a as be,b as De}from"./chunk-2UMZU62V.js";import{a as Rt,b as Ht}from"./chunk-A4OWY6HH.js";import{a as Nt,b as zt,c as Kt,e as $t,f as Gt,g as Wt,h as Z}from"./chunk-OX3TZWZA.js";import{a as Lt}from"./chunk-VXBHOSYZ.js";import{a as Xt,b as te,c as ee,k as ne}from"./chunk-YSNYL5AM.js";import{a as le}from"./chunk-RHYJKD3I.js";import"./chunk-KZMYTDV6.js";import{a as ge,b as se,c as me,e as pe,f as de,h as _e,i as he,k as ue,l as Ce,n as fe,o as Me,p as Pe,q as Ct}from"./chunk-BZVMQJ4C.js";import{b as Oe,f as ye}from"./chunk-U7JSXEMB.js";import{a as ft,b as xe}from"./chunk-NPGOXYZL.js";import{a as ut,b as Qt}from"./chunk-L5KBJURB.js";import{b as ht,c as Yt}from"./chunk-KOXUJKQJ.js";import{B as _t,C as qt,b as Ut,g as mt,j as pt,s as Vt,u as dt,y as jt}from"./chunk-25GHV3TY.js";import"./chunk-5HHQ5INI.js";import{a as ie,c as ae,g as oe}from"./chunk-S7DL3WCP.js";import{a as A,b as Q}from"./chunk-73LHEHCA.js";import"./chunk-ZKNE6K2R.js";import"./chunk-3OYUZXR2.js";import"./chunk-2PPFUFFT.js";import{a as q,c as L,e as Y}from"./chunk-VPMLDNK4.js";import{la as st}from"./chunk-A7LAK7O4.js";import"./chunk-3QZHTKAG.js";import{k as Bt,l as Tt,m as F,v as It,x as j}from"./chunk-KFQ5FW2D.js";import{$b as Et,Cc as lt,Db as U,Dc as g,Ec as S,Fc as y,Gc as vt,Ic as T,Jc as I,Kb as M,Kc as k,Mc as w,Oc as St,Ra as b,Rb as xt,Sb as bt,Sc as G,Tb as Dt,Ub as m,Uc as W,Wb as V,bc as at,cc as N,dc as z,ec as o,fc as r,gc as B,hc as K,ic as $,kc as E,ld as gt,md as x,nd as wt,pa as D,pc as _,rb as l,rc as s,wb as H,xc as ot,ya as h,yc as rt,za as u,zc as ct}from"./chunk-WYL4U5YK.js";import"./chunk-LWLSKGAV.js";import{a as R,b as Ot,g as yt,j as f}from"./chunk-6DYNGEAS.js";function We(a,e){if(a&1&&(o(0,"p")(1,"strong"),g(2,"S\u1EA3n ph\u1EA9m:"),r(),g(3),r()),a&2){let t=s(2);l(3),y(" ",t.data.sanphamTitle,"")}}function je(a,e){if(a&1&&(o(0,"p")(1,"strong"),g(2,"B\u1EA3ng gi\xE1:"),r(),g(3),r()),a&2){let t=s(2);l(3),y(" ",t.data.banggiaTitle,"")}}function qe(a,e){if(a&1&&(o(0,"div",10),M(1,We,4,1,"p",11)(2,je,4,1,"p",11),r()),a&2){let t=s();l(),m("ngIf",t.data.sanphamTitle),l(),m("ngIf",t.data.banggiaTitle)}}function Ye(a,e){a&1&&(o(0,"div",12),B(1,"mat-spinner",13),o(2,"p"),g(3,"\u0110ang t\u1EA3i l\u1ECBch s\u1EED gi\xE1..."),r()())}function Qe(a,e){if(a&1){let t=E();o(0,"div",14)(1,"mat-icon",15),g(2,"error"),r(),o(3,"p"),g(4),r(),o(5,"button",16),_("click",function(){h(t);let i=s();return u(i.loadPriceHistory())}),o(6,"mat-icon"),g(7,"refresh"),r(),g(8," Th\u1EED l\u1EA1i "),r()()}if(a&2){let t=s();l(4),S(t.error())}}function Ze(a,e){a&1&&(o(0,"div",20)(1,"mat-icon"),g(2,"info"),r(),o(3,"p"),g(4,"Ch\u01B0a c\xF3 l\u1ECBch s\u1EED thay \u0111\u1ED5i gi\xE1"),r()())}function Je(a,e){if(a&1&&(o(0,"p",40)(1,"mat-icon"),g(2,"description"),r(),g(3),r()),a&2){let t=s().$implicit;l(3),y(" ",t.reason," ")}}function Xe(a,e){if(a&1&&(o(0,"p",41)(1,"mat-icon"),g(2,"person"),r(),g(3),r()),a&2){let t=s().$implicit;l(3),y(" Ng\u01B0\u1EDDi thay \u0111\u1ED5i: ",t.changedByName||t.changedBy," ")}}function tn(a,e){if(a&1&&(o(0,"p",42)(1,"mat-icon"),g(2,"source"),r(),g(3),r()),a&2){let t=s().$implicit;l(3),y(" Ngu\u1ED3n: ",t.sourceType," ")}}function en(a,e){if(a&1&&(o(0,"div",23)(1,"div",24)(2,"mat-icon"),g(3),r()(),o(4,"mat-card",25)(5,"mat-card-content")(6,"div",26)(7,"span",27),g(8),r(),o(9,"mat-chip",28),g(10),r()(),o(11,"div",29)(12,"div",30)(13,"span",31),g(14,"Gi\xE1 c\u0169:"),r(),o(15,"span",32),g(16),r()(),o(17,"div",33)(18,"mat-icon"),g(19,"arrow_forward"),r()(),o(20,"div",30)(21,"span",31),g(22,"Gi\xE1 m\u1EDBi:"),r(),o(23,"span",34),g(24),r()()(),o(25,"div",35)(26,"mat-icon"),g(27),r(),o(28,"span"),g(29),r()(),o(30,"div",36),M(31,Je,4,1,"p",37)(32,Xe,4,1,"p",38)(33,tn,4,1,"p",39),r()()()()),a&2){let t=e.$implicit,n=e.first,i=s(3);V("first-item",n),l(),m("ngClass",i.getPriceChangeClass(t)),l(2),S(i.getPriceChangeIcon(t)),l(5),S(i.formatDate(t.changedAt)),l(),m("ngClass",i.getPriceChangeClass(t)),l(),y(" ",i.formatPercentage(t.percentChange)," "),l(6),S(i.formatPrice(t.oldPrice)),l(7),m("ngClass",i.getPriceChangeClass(t)),l(),y(" ",i.formatPrice(t.newPrice)," "),l(),m("ngClass",i.getPriceChangeClass(t)),l(2),S(i.getPriceChangeIcon(t)),l(2),S(i.formatPriceDifference(t.difference)),l(2),m("ngIf",t.reason),l(),m("ngIf",t.changedBy),l(),m("ngIf",t.sourceType)}}function nn(a,e){if(a&1&&(o(0,"div",21),M(1,en,34,16,"div",22),r()),a&2){let t=s(2);l(),m("ngForOf",t.priceHistory())}}function an(a,e){if(a&1&&(o(0,"div",17),M(1,Ze,5,0,"div",18)(2,nn,2,1,"div",19),r()),a&2){let t=s();l(),m("ngIf",t.priceHistory().length===0),l(),m("ngIf",t.priceHistory().length>0)}}var et=class a{constructor(e,t,n){this.dialogRef=e;this.data=t;this.priceHistoryService=n}loading=b(!0);priceHistory=b([]);error=b(null);ngOnInit(){return f(this,null,function*(){yield this.loadPriceHistory()})}loadPriceHistory(){return f(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let e=yield this.priceHistoryService.getPriceHistory(this.data.banggiaId,this.data.sanphamId);this.priceHistory.set(e)}catch(e){this.error.set(e.message||"Kh\xF4ng th\u1EC3 t\u1EA3i l\u1ECBch s\u1EED gi\xE1"),console.error("Error loading price history:",e)}finally{this.loading.set(!1)}})}getPriceChangeClass(e){return e.difference>0?"price-increase":e.difference<0?"price-decrease":"price-no-change"}getPriceChangeIcon(e){return e.difference>0?"trending_up":e.difference<0?"trending_down":"remove"}formatPrice(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}formatDate(e){let t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}formatPercentage(e){return`${e>0?"+":""}${e.toFixed(2)}%`}formatPriceDifference(e){return this.formatPrice(Math.abs(e))}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||a)(H(Nt),H(zt),H(J))};static \u0275cmp=U({type:a,selectors:[["app-price-history-dialog"]],decls:18,vars:4,consts:[[1,"price-history-dialog","mx-auto"],[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"click"],["class","product-info",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","price-history-timeline",4,"ngIf"],["align","end"],["mat-raised-button","",3,"click"],[1,"product-info"],[4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"price-history-timeline"],["class","no-history",4,"ngIf"],["class","timeline",4,"ngIf"],[1,"no-history"],[1,"timeline"],["class","timeline-item",3,"first-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-icon",3,"ngClass"],[1,"timeline-content"],[1,"change-header"],[1,"change-date"],[3,"ngClass"],[1,"price-details"],[1,"price-row"],[1,"label"],[1,"old-price"],[1,"arrow-icon"],[1,"new-price",3,"ngClass"],[1,"price-difference",3,"ngClass"],[1,"change-metadata"],["class","reason",4,"ngIf"],["class","user",4,"ngIf"],["class","source-type",4,"ngIf"],[1,"reason"],[1,"user"],[1,"source-type"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon"),g(4,"history"),r(),g(5," L\u1ECBch S\u1EED Gi\xE1 "),r(),o(6,"button",3),_("click",function(){return n.close()}),o(7,"mat-icon"),g(8,"close"),r()()(),o(9,"mat-dialog-content"),M(10,qe,3,2,"div",4),B(11,"mat-divider"),M(12,Ye,4,0,"div",5)(13,Qe,9,1,"div",6)(14,an,3,2,"div",7),r(),o(15,"mat-dialog-actions",8)(16,"button",9),_("click",function(){return n.close()}),g(17,"\u0110\xF3ng"),r()()()),t&2&&(l(10),m("ngIf",n.data.sanphamTitle||n.data.banggiaTitle),l(2),m("ngIf",n.loading()),l(),m("ngIf",n.error()),l(),m("ngIf",!n.loading()&&!n.error()&&n.priceHistory()))},dependencies:[j,Bt,Tt,F,Z,$t,Wt,Gt,Y,q,L,Q,A,ce,re,oe,ie,ae,Ht,Rt,ye,Oe],styles:['.price-history-dialog[_ngcontent-%COMP%]{min-width:600px;max-width:800px}.price-history-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.price-history-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:24px;font-weight:500}.price-history-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.price-history-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:-8px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:24px;min-height:300px;max-height:600px;overflow-y:auto}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{margin-bottom:16px;padding:12px;background-color:#f5f5f5;border-radius:8px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:16px 0}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .no-history[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .no-history[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .no-history[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#666}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .no-history[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{position:relative;padding-left:40px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:19px;top:20px;bottom:0;width:2px;background-color:#e0e0e0}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:32px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{position:absolute;left:-40px;top:0;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:#fff;border:3px solid;z-index:1}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon.price-increase[_ngcontent-%COMP%]{border-color:#f44336;color:#f44336}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon.price-decrease[_ngcontent-%COMP%]{border-color:#4caf50;color:#4caf50}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon.price-no-change[_ngcontent-%COMP%]{border-color:#9e9e9e;color:#9e9e9e}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{margin-left:16px;box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px!important}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]   .change-date[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-weight:600;font-size:13px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]   mat-chip.price-increase[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]   mat-chip.price-decrease[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#4caf50}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-header[_ngcontent-%COMP%]   mat-chip.price-no-change[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#9e9e9e}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:center;padding:12px;background-color:#fafafa;border-radius:8px;margin-bottom:12px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;font-weight:500}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .old-price[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#666;text-decoration:line-through}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price.price-increase[_ngcontent-%COMP%]{color:#f44336}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .new-price.price-decrease[_ngcontent-%COMP%]{color:#4caf50}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{color:#1976d2}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-difference[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:6px;font-size:16px;font-weight:600;margin-bottom:12px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-difference.price-increase[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-difference.price-decrease[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#4caf50}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-difference[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-metadata[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:12px;margin-top:12px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:6px 0;font-size:13px;color:#666}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#1976d2}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-metadata[_ngcontent-%COMP%]   p.reason[_ngcontent-%COMP%]{font-style:italic}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .change-metadata[_ngcontent-%COMP%]   p.user[_ngcontent-%COMP%]{font-weight:500}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.price-history-dialog[_ngcontent-%COMP%]{min-width:unset;width:100%}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:16px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{padding-left:32px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{left:15px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{left:-32px;width:32px;height:32px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.price-history-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .price-history-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .price-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}}']})};var nt=yt(Ue());var He=yt(Ve());var on=()=>[_t,dt,ht,mt,pt,A,L,ut,st,F,It,tt,ve,X,ge,me,he,pe,se,ue,de,_e,Ce,fe,Me,ft,import("./chunk-LRLYX75I.js").then(a=>a.SearchfilterComponent)],it=()=>({standalone:!0}),rn=()=>({id:1,title:"B\xE1n S\u1EC9",value:"bansi"}),cn=()=>({id:2,title:"B\xE1n L\u1EBB",value:"banle"}),ln=(a,e)=>[a,e],Ae=()=>[],gn=()=>[10,25,50,100],sn=(a,e)=>e.id;function mn(a,e){if(a&1){let t=E();o(0,"button",3),_("click",function(){h(t);let i=s();return u(i.handleBanggiaAction())}),o(1,"mat-icon"),g(2,"save"),r()()}}function pn(a,e){if(a&1){let t=E();o(0,"button",3),_("click",function(){h(t);let i=s();return u(i.toggleEdit())}),o(1,"mat-icon"),g(2,"edit"),r()()}}function dn(a,e){if(a&1){let t=E();o(0,"button",14),_("click",function(){h(t);let i=s();return u(i.toggleDelete())}),o(1,"mat-icon"),g(2,"delete"),r()()}}function _n(a,e){if(a&1){let t=E();K(0),o(1,"div",15)(2,"div",16),g(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),o(4,"div",17)(5,"button",18),_("click",function(){h(t);let i=s();return u(i.DeleteData())}),g(6,"\u0110\u1ED3ng \xDD"),r(),o(7,"button",19),_("click",function(){h(t);let i=s();return u(i.toggleDelete())}),g(8,"Hu\u1EF7 B\u1ECF"),r()()(),$()}}function hn(a,e){if(a&1&&(o(0,"mat-option",26),g(1),r()),a&2){let t=e.$implicit;m("value",t.value),l(),S(t.title)}}function un(a,e){if(a&1&&(o(0,"mat-option",26),g(1),r()),a&2){let t=e.$implicit;m("value",t.value),l(),S(t.title)}}function Cn(a,e){a&1&&(o(0,"mat-option",32),g(1,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),r())}function fn(a,e){if(a&1&&(o(0,"span",45),g(1),r()),a&2){let t=s(3);l(),vt(" ",t.dataSource().filteredData.length," / ",t.CountItem()," s\u1EA3n ph\u1EA9m ")}}function Mn(a,e){if(a&1&&(o(0,"th",48)(1,"span",49),g(2),r()()),a&2){let t=s().$implicit,n=s(3);l(2),y(" ",n.ColumnName[t]," ")}}function Pn(a,e){if(a&1){let t=E();o(0,"span",51)(1,"span"),g(2),r(),o(3,"button",37),_("click",function(){h(t);let i=s().$implicit,c=s(4);return u(c.RemoveSanpham(i))}),o(4,"mat-icon"),g(5,"delete"),r()()()}if(a&2){let t=s().index,n=s(4);l(2),y("",t+1," "),l(),m("disabled",!n.isEdit())}}function On(a,e){a&1&&(o(0,"mat-icon",59),g(1," sync "),r())}function yn(a,e){if(a&1){let t=E();o(0,"div",57),_("keydown.enter",function(i){h(t);let c=s(2),p=c.$implicit,d=c.index,P=s(4);return u(P.updateValue(i,d,p,"giaban","number"))})("blur",function(i){h(t);let c=s(2),p=c.$implicit,d=c.index,P=s(4);return u(P.updateValue(i,d,p,"giaban","number"))}),g(1),G(2,"number"),M(3,On,2,0,"mat-icon",58),r()}if(a&2){let t=s(2),n=t.$implicit,i=t.index,c=s().$implicit,p=s(3);V("opacity-50",p.updatingPriceForRow()===i),m("contentEditable",!0),Dt("contenteditable",p.updatingPriceForRow()===i?"false":"true"),l(),y(" ",W(2,6,n[c]||0,"1.0-2")," "),l(2),m("ngIf",p.updatingPriceForRow()===i)}}function xn(a,e){if(a&1&&(o(0,"span",52),g(1),G(2,"number"),r()),a&2){let t=s(2).$implicit,n=s().$implicit;l(),y(" ",W(2,1,t[n],"1.0-2")," ")}}function bn(a,e){if(a&1&&M(0,yn,4,9,"div",55)(1,xn,3,4,"span",56),a&2){let t=s(5);m("ngIf",t.isEdit()),l(),m("ngIf",!t.isEdit())}}function Dn(a,e){if(a&1&&(o(0,"span",52),g(1),G(2,"number"),r()),a&2){let t=s().$implicit,n=s().$implicit;l(),y(" ",W(2,1,t[n],"1.0-2")," ")}}function En(a,e){if(a&1){let t=E();o(0,"div",53)(1,"button",60),_("click",function(){h(t);let i=s().$implicit,c=s(4);return u(c.showPriceHistory(i))}),o(2,"mat-icon"),g(3,"history"),r()()()}}function vn(a,e){if(a&1&&(o(0,"span",54),g(1),r()),a&2){let t=s().$implicit,n=s().$implicit;l(),y(" ",t[n]," ")}}function Sn(a,e){if(a&1&&(o(0,"td",50),M(1,Pn,6,2,"span",51)(2,bn,2,2)(3,Dn,3,4,"span",52)(4,En,4,0,"div",53)(5,vn,2,1,"span",54),r()),a&2){let t,n=s().$implicit;l(),Et((t=n)==="STT"?1:t==="giaban"?2:t==="giagoc"?3:t==="actions"?4:5)}}function wn(a,e){if(a&1&&(K(0,40),M(1,Mn,3,1,"th",46)(2,Sn,6,1,"td",47),$()),a&2){let t=e.$implicit;m("matColumnDef",t)}}function Bn(a,e){a&1&&B(0,"tr",61)}function Tn(a,e){a&1&&B(0,"tr",62)}function In(a,e){a&1&&(o(0,"tr",63)(1,"td",64),g(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}function kn(a,e){if(a&1){let t=E();o(0,"div",29)(1,"div",5)(2,"mat-form-field",30)(3,"mat-label"),g(4,"T\xECnh Tr\u1EA1ng"),r(),o(5,"mat-select",31),k("ngModelChange",function(i){h(t);let c=s(2);return I(c.DetailBanggia().status,i)||(c.DetailBanggia().status=i),u(i)}),N(6,un,2,2,"mat-option",26,at,!1,Cn,2,0,"mat-option",32),r()(),o(9,"mat-form-field",33)(10,"mat-label"),g(11,"T\xECm ki\u1EBFm s\u1EA3n ph\u1EA9m"),r(),o(12,"input",34),_("input",function(i){h(t);let c=s(2);return u(c.applyFilter(i))}),r()(),M(13,fn,2,2,"span",35),o(14,"app-searchfilter",36),_("OutFilter",function(i){h(t);let c=s(2);return u(c.DoOutFilter(i))}),r(),o(15,"app-searchfilter",36),_("OutFilter",function(i){h(t);let c=s(2);return u(c.DoOutKhachhang(i))}),r(),o(16,"button",37),_("click",function(){h(t);let i=s(2);return u(i.EmptyCart())}),o(17,"mat-icon"),g(18,"delete"),r()()()(),o(19,"div",38)(20,"table",39),N(21,wn,3,1,"ng-container",40,at),M(23,Bn,1,0,"tr",41)(24,Tn,1,0,"tr",42)(25,In,3,0,"tr",43),r(),B(26,"mat-paginator",44),r()}if(a&2){let t,n,i,c=s(2);l(5),m("disabled",!c.isEdit()),T("ngModel",c.DetailBanggia().status),m("ngModelOptions",w(26,it)),l(),z(c.ListStatus),l(6),m("value",c.searchText()),l(),m("ngIf",c.searchText()),l(),m("isEdit",c.isEdit)("title","S\u1EA3n Ph\u1EA9m")("ListFilter",((t=c.DetailBanggia())==null?null:t.sanpham)||w(27,Ae))("filterItem",c.filterSanpham)("CountItems",c.dataSource().filteredData.length)("fieldsearch","title")("ListItem",c.ListSanpham),l(),m("isEdit",c.isEdit)("title","Kh\xE1ch H\xE0ng")("ListFilter",((n=c.DetailBanggia())==null?null:n.khachhang)||w(28,Ae))("filterItem",c.filterKhachhang)("CountItems",((i=c.DetailBanggia())==null||i.khachhang==null?null:i.khachhang.length)||0)("fieldsearch","name")("ListItem",c.ListKhachhang),l(),m("disabled",!c.isEdit()),l(4),m("dataSource",c.dataSource()),l(),z(c.displayedColumns),l(2),m("matHeaderRowDef",c.displayedColumns),l(),m("matRowDefColumns",c.displayedColumns),l(2),m("pageSizeOptions",w(29,gn))("pageSize",25)}}function Fn(a,e){if(a&1){let t=E();K(0)(1),o(2,"div",20)(3,"mat-form-field",21)(4,"mat-label"),g(5,"Ti\xEAu \u0110\u1EC1"),r(),o(6,"input",22),k("ngModelChange",function(i){h(t);let c=s();return I(c.DetailBanggia().title,i)||(c.DetailBanggia().title=i),u(i)}),_("input",function(){h(t);let i=s();return u(i.FillSlug())}),r()(),o(7,"mat-form-field",21)(8,"mat-label"),g(9,"Lo\u1EA1i"),r(),o(10,"mat-select",23),k("ngModelChange",function(i){h(t);let c=s();return I(c.DetailBanggia().type,i)||(c.DetailBanggia().type=i),u(i)}),o(11,"div",24)(12,"div",25),N(13,hn,2,2,"mat-option",26,sn),r()()()(),o(15,"mat-form-field",21)(16,"mat-label"),g(17,"B\u1EAFt \u0110\u1EA7u"),r(),o(18,"input",27),k("ngModelChange",function(i){h(t);let c=s();return I(c.DetailBanggia().batdau,i)||(c.DetailBanggia().batdau=i),u(i)}),r(),B(19,"mat-datepicker-toggle",28)(20,"mat-datepicker",null,0),r(),o(22,"mat-form-field",21)(23,"mat-label"),g(24,"K\u1EBFt Th\xFAc"),r(),o(25,"input",27),k("ngModelChange",function(i){h(t);let c=s();return I(c.DetailBanggia().ketthuc,i)||(c.DetailBanggia().ketthuc=i),u(i)}),r(),B(26,"mat-datepicker-toggle",28)(27,"mat-datepicker",null,1),r()(),M(29,kn,27,30),xt(30,29,on),bt(),$()()}if(a&2){let t=lt(21),n=lt(28),i=s();l(6),T("ngModel",i.DetailBanggia().title),m("disabled",!i.isEdit()),l(4),T("ngModel",i.DetailBanggia().type),m("ngModelOptions",w(15,it))("disabled",!i.isEdit()),l(3),z(St(18,ln,w(16,rn),w(17,cn))),l(5),m("matDatepicker",t),T("ngModel",i.DetailBanggia().batdau),m("ngModelOptions",w(21,it))("disabled",!i.isEdit()),l(),m("for",t),l(6),m("matDatepicker",n),T("ngModel",i.DetailBanggia().ketthuc),m("ngModelOptions",w(22,it))("disabled",!i.isEdit()),l(),m("for",n)}}var Re=class a{_ListbanggiaComponent=D(Le);_BanggiaService=D(Fe);_PriceHistoryService=D(J);_SanphamService=D(Ie);_KhachhangService=D(ke);_GoogleSheetService=D(Te);_GraphqlService=D(le);_route=D(kt);_router=D(Ft);_snackBar=D(Lt);_dialog=D(Kt);paginator;sort;displayedColumns=["STT","title","masp","dvt","giaban","actions"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",giaban:"Gi\xE1 B\xE1n",actions:"Thao t\xE1c"};dataSource=b(new Ct([]));updatingPriceForRow=b(null);CountItem=gt(()=>this.dataSource().data.length);searchText=b("");filteredCount=gt(()=>this.dataSource().filteredData?.length||0);pendingChanges=new Map;debounceTimer=null;batchUpdateTimer=null;DEBOUNCE_TIME=300;BATCH_UPDATE_TIME=1e3;hasUnsavedChanges=b(!1);isLoadingBanggia=b(!1);isComponentInitialized=b(!1);effectRef;routeSubscription;lastProcessedId=null;filterSanpham=[];ListSanpham=[];ListKhachhang=[];ListStatus=[{value:"baogia",title:"B\xE1o Gi\xE1"},{value:"dangban",title:"\u0110ang B\xE1n"},{value:"ngungban",title:"Ng\u1EEBng B\xE1n"}];filterKhachhang=[];CheckListKhachhang=[];get DetailBanggia(){return this._BanggiaService.DetailBanggia}updateDetailBanggiaUntracked(e){x(()=>{this._BanggiaService.DetailBanggia.update(e)})}constructor(){this.effectRef=wt(()=>{let e=this._BanggiaService.banggiaId(),t=this.isComponentInitialized();x(()=>{t?this.handleBanggiaIdChange(e):console.log("[EFFECT] Waiting for component initialization...")})})}handleBanggiaIdChange(e){return f(this,null,function*(){if(console.log("[EFFECT-HANDLER] Processing ID:",e,"lastProcessed:",this.lastProcessedId),this.lastProcessedId===e){console.log("[EFFECT-HANDLER] ID already processed, skipping:",e);return}if(this.isLoadingBanggia()){console.log("[EFFECT-HANDLER] Already loading, skipping...");return}if(this.lastProcessedId=e,!e){console.log("[EFFECT-HANDLER] No ID, navigating to list..."),this._router.navigate(["/admin/banggia"]),this._ListbanggiaComponent.drawer.close();return}e==="new"?(console.log("[EFFECT-HANDLER] Creating new banggia..."),this.handleNewBanggia()):(console.log("[EFFECT-HANDLER] Loading banggia:",e),yield this.loadBanggiaData(e)),console.log("[EFFECT-HANDLER] Completed for ID:",e)})}handleNewBanggia(){this._BanggiaService.DetailBanggia.set({title:`BG - ${(0,nt.default)().format("DD/MM/YYYY")}`,status:"baogia",type:"bansi",batdau:(0,nt.default)().startOf("month").toDate(),ketthuc:(0,nt.default)().endOf("month").toDate()}),this._ListbanggiaComponent.drawer.open(),this.isEdit.set(!0),this._router.url!=="/admin/banggia/new"&&this._router.navigate(["/admin/banggia","new"])}isEdit=b(!1);isDelete=b(!1);banggiaId=this._BanggiaService.banggiaId;ngOnInit(){return f(this,null,function*(){console.log("[INIT] ===== Component Initialization Started ====="),console.log("[INIT] Loading lists in parallel..."),yield Promise.all([this.LoadListKhachhang(),this.LoadListSanpham()]),console.log("[INIT] Lists loaded successfully"),this.isComponentInitialized.set(!0),console.log("[INIT] Component initialized - effect is now active"),this.routeSubscription=this._route.paramMap.subscribe(e=>{let t=e.get("id"),n=this._BanggiaService.banggiaId();console.log("[ROUTE] Param changed:",{from:n,to:t}),n!==t?(console.log("[ROUTE] ID changed - resetting lastProcessedId"),this.lastProcessedId=null,this._BanggiaService.setBanggiaId(t)):console.log("[ROUTE] Same ID - no action needed")}),console.log("[INIT] ===== Component Initialization Completed =====")})}loadBanggiaData(e){return f(this,null,function*(){console.log("[LOAD] ===== Starting Load Process ====="),console.log("[LOAD] Target ID:",e),this.isLoadingBanggia.set(!0);try{console.log("[LOAD] Calling service.getBanggiaByid..."),yield this._BanggiaService.getBanggiaByid(e),console.log("[LOAD] Data loaded, updating UI (in untracked)..."),x(()=>{let n=this._BanggiaService.DetailBanggia(),i=new Ct(n?.sanpham||[]);this.paginator&&this.sort&&(i.paginator=this.paginator,i.sort=this.sort),this.dataSource.set(i),console.log("[LOAD] DataSource updated with",n?.sanpham?.length||0,"items")}),this._ListbanggiaComponent.drawer.open();let t=`/admin/banggia/${e}`;this._router.url!==t?(console.log("[LOAD] Navigating to:",t),yield this._router.navigate(["/admin/banggia",e])):console.log("[LOAD] Already at target URL"),console.log("[LOAD] ===== Load Completed Successfully =====")}catch(t){console.error("[LOAD] ===== Load Failed ====="),console.error("[LOAD] Error:",t),this._snackBar.open("L\u1ED7i t\u1EA3i b\u1EA3ng gi\xE1","\u0110\xF3ng",{duration:3e3}),this.lastProcessedId=null}finally{console.log("[LOAD] Resetting loading state"),this.isLoadingBanggia.set(!1)}})}LoadListSanpham(){return f(this,null,function*(){try{console.log("Loading danh s\xE1ch s\u1EA3n ph\u1EA9m...");let e=yield this._GraphqlService.findAll("sanpham",{select:{id:!0,title:!0,masp:!0,dvt:!0},take:99999,aggressiveCache:!0,enableParallelFetch:!0,orderBy:{title:"asc"}});console.log("Danh s\xE1ch s\u1EA3n ph\u1EA9m t\u1EEB GraphQL:",e?.data?.length||0,"items"),this.ListSanpham=e.data||[]}catch(e){console.error("L\u1ED7i load danh s\xE1ch s\u1EA3n ph\u1EA9m:",e),this._snackBar.open("L\u1ED7i t\u1EA3i danh s\xE1ch s\u1EA3n ph\u1EA9m","\u0110\xF3ng",{duration:3e3})}})}LoadListKhachhang(){return f(this,null,function*(){try{console.log("Loading danh s\xE1ch kh\xE1ch h\xE0ng...");let e=yield this._GraphqlService.findAll("khachhang",{select:{id:!0,name:!0,makh:!0,diachi:!0,sdt:!0,email:!0,loaikh:!0,isActive:!0},where:{isActive:!0},orderBy:{name:"asc"},take:99999,aggressiveCache:!0,enableParallelFetch:!0});console.log("Danh s\xE1ch kh\xE1ch h\xE0ng t\u1EEB GraphQL:",e?.data?.length||0,"items"),this.filterKhachhang=this.ListKhachhang=e.data||[]}catch(e){console.error("L\u1ED7i load danh s\xE1ch kh\xE1ch h\xE0ng:",e),this._snackBar.open("L\u1ED7i t\u1EA3i danh s\xE1ch kh\xE1ch h\xE0ng","\u0110\xF3ng",{duration:3e3})}})}ngAfterViewInit(){setTimeout(()=>{if(this.paginator&&this.sort){let e=this.dataSource();e.paginator=this.paginator,e.sort=this.sort,e.filterPredicate=(t,n)=>{let i=n.toLowerCase().trim();if(!i)return!0;let c=(t.title||"").toLowerCase(),p=(t.masp||"").toLowerCase(),d=(t.dvt||"").toLowerCase();return c.includes(i)||p.includes(i)||d.includes(i)},this.dataSource.set(e),console.log("[PAGINATION] Paginator, Sort, and Filter initialized")}},100)}ngOnDestroy(){console.log("[DESTROY] Cleaning up component..."),this.routeSubscription&&(this.routeSubscription.unsubscribe(),console.log("[DESTROY] Route subscription unsubscribed")),this.effectRef&&(this.effectRef.destroy(),console.log("[DESTROY] Effect destroyed")),this.debounceTimer&&clearTimeout(this.debounceTimer),this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.pendingChanges.size>0&&this.flushPendingChanges(),this.isComponentInitialized.set(!1),this.isLoadingBanggia.set(!1),this.lastProcessedId=null,console.log("[DESTROY] Component destroyed")}flushPendingChanges(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.pendingChanges.size>0&&x(()=>{this._BanggiaService.DetailBanggia.update(n=>(this.pendingChanges.forEach((i,c)=>{Object.assign(n.sanpham[c],i)}),n)),this.pendingChanges.clear();let e=this._BanggiaService.DetailBanggia(),t=this.dataSource();t.data=[...e?.sanpham||[]],this.paginator&&this.sort&&(t.paginator=this.paginator,t.sort=this.sort),this.dataSource.set(t)})}handleBanggiaAction(){return f(this,null,function*(){this.banggiaId()==="new"?yield this.createBanggia():yield this.updateBanggia()})}createBanggia(){return f(this,null,function*(){console.log(this.DetailBanggia())})}updateBanggia(){return f(this,null,function*(){this.flushPendingChanges(),console.log("[UPDATE] Updating banggia...");try{let e=x(()=>this._BanggiaService.DetailBanggia());if(console.log("[UPDATE] Data to update:",e),console.log("[UPDATE] Banggia ID:",e?.id),console.log("[UPDATE] Khachhang to save:",e?.khachhang),!e?.id)throw new Error("Banggia ID is missing! Cannot update.");let t=Ot(R({},e),{khachhang:e?.khachhang||[]});console.log("[UPDATE] Final data being sent:",t),yield this._BanggiaService.updateBanggia(t),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.set(!1),this.hasUnsavedChanges.set(!1)}catch(e){console.error("[UPDATE] Error:",e),this._snackBar.open("L\u1ED7i khi c\u1EADp nh\u1EADt!","\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}debounceUpdate(e,t=this.DEBOUNCE_TIME){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(e,t)}scheduleBatchUpdate(){this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.batchUpdateTimer=setTimeout(()=>{this.processBatchUpdate()},this.BATCH_UPDATE_TIME)}processBatchUpdate(){if(this.pendingChanges.size===0)return;let e=this.pendingChanges.size;x(()=>{this._BanggiaService.DetailBanggia.update(t=>(this.pendingChanges.forEach((n,i)=>{Object.assign(t.sanpham[i],n)}),t))}),this.pendingChanges.clear(),this.hasUnsavedChanges.set(!0),x(()=>{let t=this._BanggiaService.DetailBanggia(),n=this.dataSource();n.data=[...t?.sanpham||[]],this.paginator&&this.sort&&(n.paginator=this.paginator,n.sort=this.sort),this.dataSource.set(n)}),console.log(`[BATCH] Updated ${e} items - Manual save required`)}addPendingChange(e,t,n){this.pendingChanges.has(e)||this.pendingChanges.set(e,{});let i=this.pendingChanges.get(e);i[t]=n,this.scheduleBatchUpdate()}DeleteData(){return f(this,null,function*(){try{yield this._BanggiaService.DeleteBanggia(this.DetailBanggia()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/banggia"])}catch(e){console.error("L\u1ED7i khi x\xF3a banggia:",e)}})}goBack(){this._router.navigate(["/admin/banggia"]),this._ListbanggiaComponent.drawer.close()}trackByFn(e,t){return t.id}toggleEdit(){this.isEdit.update(e=>!e)}toggleDelete(){this.isDelete.update(e=>!e)}FillSlug(){this.updateDetailBanggiaUntracked(e=>(e.slug=Jt(e.title),e))}updateValue(e,t,n,i,c){let p=c==="number"?Number(e.target.innerText.trim().replace(/[^0-9]/g,""))||0:e.target.innerText.trim(),d=e;if(d.key==="Enter"&&!d.shiftKey){e.preventDefault(),t!==null&&i==="giaban"&&n&&(this.updatePriceToServer(t,n,Number(p)),this.moveToNextInput(t));return}if(c==="number"){let P=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(d.key)&&!P.includes(d.key)&&e.preventDefault()}t!==null&&i==="giaban"?this.addPendingChange(t,i,p):this.updateDetailBanggiaUntracked(P=>(t!==null?P.sanpham[t][i]=p:P[i]=p,P)),console&&console.log&&console.log(`Updated ${String(i)}:`,p)}updatePriceToServer(e,t,n){return f(this,null,function*(){let i=this.banggiaId(),c=t.sanphamId||t.id,p=t.giaban||0;if(console.log("[UPDATE-PRICE] Debug:",{banggiaId:i,elementId:t.id,sanphamId:t.sanphamId,usingSanphamId:c,element:t}),!i||!c){console.error("[UPDATE-PRICE] Missing banggiaId or sanphamId"),this._snackBar.open("\u2717 L\u1ED7i: Thi\u1EBFu th\xF4ng tin b\u1EA3ng gi\xE1 ho\u1EB7c s\u1EA3n ph\u1EA9m","\u0110\xF3ng",{duration:3e3,panelClass:["snackbar-error"]});return}if(n===p){console.log("[UPDATE-PRICE] Price unchanged, skipping");return}this.updatingPriceForRow.set(e);try{console.log(`[UPDATE-PRICE] Updating price for ${t.title}: ${p} \u2192 ${n}`);let d=p>0?(n-p)/p*100:0,P=d>20||d<-20?`Thay \u0111\u1ED5i gi\xE1 ${d>0?"+":""}${d.toFixed(1)}%`:"C\u1EADp nh\u1EADt gi\xE1 t\u1EEB b\u1EA3ng gi\xE1";yield this._PriceHistoryService.updateSinglePrice(i,c,n,P),this.updateDetailBanggiaUntracked(O=>(O.sanpham&&O.sanpham[e]&&(O.sanpham[e].giaban=n),O)),x(()=>{let O=this._BanggiaService.DetailBanggia(),v=this.dataSource();v.data=[...O?.sanpham||[]],this.paginator&&this.sort&&(v.paginator=this.paginator,v.sort=this.sort),this.dataSource.set(v)}),this.pendingChanges.delete(e),this._snackBar.open(`\u2713 \u0110\xE3 c\u1EADp nh\u1EADt gi\xE1: ${n.toLocaleString("vi-VN")} VND`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),console.log("[UPDATE-PRICE] Success")}catch(d){console.error("[UPDATE-PRICE] Failed:",d),this.updateDetailBanggiaUntracked(O=>(O.sanpham&&O.sanpham[e]&&(O.sanpham[e].giaban=p),O)),x(()=>{let O=this._BanggiaService.DetailBanggia(),v=this.dataSource();v.data=[...O?.sanpham||[]],this.paginator&&this.sort&&(v.paginator=this.paginator,v.sort=this.sort),this.dataSource.set(v)});let P=d instanceof Error?d.message:"Vui l\xF2ng th\u1EED l\u1EA1i";this._snackBar.open(`\u2717 L\u1ED7i c\u1EADp nh\u1EADt gi\xE1: ${P}`,"\u0110\xF3ng",{duration:4e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.updatingPriceForRow.set(null)}})}moveToNextInput(e){let t=document.querySelectorAll(".giaban-input");if(e<t.length-1){let n=t[e+1];n&&requestAnimationFrame(()=>{n.focus(),n instanceof HTMLInputElement&&n.select()})}}LoadDrive(){return f(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"BGImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._GoogleSheetService.getDrive(e),n=Zt(t.values);this.DoImportData(n)})}AddSanpham(){}EmptyCart(){this.updateDetailBanggiaUntracked(e=>(e.sanpham=[],e)),x(()=>{let e=this._BanggiaService.DetailBanggia(),t=this.dataSource();t.data=e?.sanpham||[],this.paginator&&this.sort&&(t.paginator=this.paginator,t.sort=this.sort),this.dataSource.set(t)})}RemoveSanpham(e){this.updateDetailBanggiaUntracked(t=>(t.sanpham=t.sanpham.filter(n=>n.id!==e.id),t)),x(()=>{let t=this._BanggiaService.DetailBanggia(),n=this.dataSource();n.data=t?.sanpham||[],this.paginator&&this.sort&&(n.paginator=this.paginator,n.sort=this.sort),this.dataSource.set(n)})}CoppyDon(){this._snackBar.open("\u0110ang Coppy \u0110\u01A1n H\xE0ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),this.updateDetailBanggiaUntracked(t=>(delete t.id,t.title=`${t.title} - Coppy`,t));let e=x(()=>this._BanggiaService.DetailBanggia());this._BanggiaService.CreateBanggia(e).then(t=>{this._snackBar.open("Coppy \u0110\u01A1n H\xE0ng Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/banggia",this.banggiaId()])})}printContent(){let e=document.getElementById("printContent");e&&(0,He.default)(e,{scale:2}).then(t=>{let n=t.toDataURL("image/png"),i=window.open("","_blank");i&&(i.document.write(`
            <html>
              <head>
                <title>${this.DetailBanggia()?.title}</title>
              </head>
              <body style="text-align: center;">
                <img src="${n}" style="max-width: 100%;"/>
                <script>
                  window.onload = function() {
                    window.print();
                    window.onafterprint = function() { window.close(); };
                  };
                <\/script>
              </body>
            </html>
          `),i.document.close())})}ImporExcel(e){return f(this,null,function*(){let t=yield Be(e);this.DoImportData(t)})}ExportExcel(e,t){let n=e.data.map(i=>({masp:i.masp?.trim()||"",giaban:Number(i.giaban)||0}));we(n,t)}DoImportData(e){let t=e.map(n=>({masp:n.masp?.trim()||"",giaban:Number(n.giaban)||0})).filter(n=>n.masp);this.updateDetailBanggiaUntracked(n=>{let i=t.map(c=>{c.masp=c.masp?.trim()||"",c.giaban=Number(c.giaban)||0;let p=this._SanphamService.ListSanpham().find(d=>d.masp===c.masp);return p?R(R({},p),c):c});return n.sanpham=i,n}),console.log("[IMPORT] Imported data"),x(()=>{let n=this._BanggiaService.DetailBanggia(),i=this.dataSource();i.data=n?.sanpham||[],this.paginator&&this.sort&&(i.paginator=this.paginator,i.sort=this.sort),this.dataSource.set(i)}),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}DoOutFilter(e){return f(this,null,function*(){console.log("[FILTER] Updating products for banggia:",e);try{this.updateDetailBanggiaUntracked(t=>(t.sanpham=e.map(n=>({sanphamId:n.sanphamId||n.id,giaban:Number(n.giaban)||0,title:n.title,masp:n.masp,dvt:n.dvt,order:n.order||1})),t)),x(()=>{let t=this._BanggiaService.DetailBanggia();this.filterSanpham=t?.sanpham||[];let n=this.dataSource();n.data=t?.sanpham||[],this.paginator&&this.sort&&(n.paginator=this.paginator,n.sort=this.sort),this.dataSource.set(n),console.log("[FILTER] Updated banggia:",t)}),this._snackBar.open("C\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("[FILTER] Error updating products:",t),this._snackBar.open("L\u1ED7i c\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}DoOutKhachhang(e){return f(this,null,function*(){console.log("[CUSTOMER] Updating customers for banggia:",e);try{let t=this.banggiaId();if(console.log("[CUSTOMER] Banggia ID:",t),!t)throw new Error("Kh\xF4ng c\xF3 banggia ID, vui l\xF2ng l\u01B0u b\u1EA3ng gi\xE1 tr\u01B0\u1EDBc!");let n=Array.isArray(e)?e.map(C=>({id:C.id,name:C.name,makh:C.makh,loaikh:C.loaikh})):[];console.log("[CUSTOMER] Normalized khachhang:",n),console.log("[CUSTOMER] Event count:",n.length);let i=yield this._BanggiaService.getBanggiaByid(t);console.log("[CUSTOMER] Current banggia from server:",i);let c=i?.khachhang?.map(C=>C.id)||[],p=n.map(C=>C.id),d=p.filter(C=>!c.includes(C)),P=c.filter(C=>!p.includes(C));console.log("[CUSTOMER] Current IDs from server:",c),console.log("[CUSTOMER] New IDs:",p),console.log("[CUSTOMER] To Connect:",d),console.log("[CUSTOMER] To Disconnect:",P);let O={id:t,khachhang:{disconnect:P.map(C=>({id:C})),connect:d.map(C=>({id:C}))}};console.log("[CUSTOMER] Sending update with structure:",O);let v=yield this._BanggiaService.updateBanggia(O);console.log("[CUSTOMER] Khachhang saved successfully:",v),console.log("[CUSTOMER] Reloading data from server..."),yield this._BanggiaService.getBanggiaByid(t),yield new Promise(C=>setTimeout(C,200));let Mt=x(()=>this._BanggiaService.DetailBanggia()),Pt=Mt?.khachhang?.length||0;console.log("[CUSTOMER] Verified data after reload:",Mt?.khachhang),console.log("[CUSTOMER] Final customer count:",Pt),this._snackBar.open(`\u2713 C\u1EADp nh\u1EADt ${Pt} kh\xE1ch h\xE0ng th\xE0nh c\xF4ng`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("[CUSTOMER] Error updating customers:",t),this._snackBar.open("\u2717 L\u1ED7i c\u1EADp nh\u1EADt kh\xE1ch h\xE0ng: "+(t instanceof Error?t.message:"Vui l\xF2ng th\u1EED l\u1EA1i"),"\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}showPriceHistory(e){this._dialog.open(et,{width:"900px",maxWidth:"95vw",data:{banggiaId:this.banggiaId(),sanphamId:e.sanphamId||e.id,sanphamTitle:e.title,currentPrice:e.giaban}})}goToBulkUpdate(){this._router.navigate(["/admin/bulk-price-update"])}goToPriceAnalytics(){this._router.navigate(["/admin/price-analytics"])}goToPriceComparison(){this._router.navigate(["/admin/price-comparison"])}applyFilter(e){let t=e.target.value;this.searchText.set(t);let n=this.dataSource();n.filter=t.trim().toLowerCase(),n.paginator&&n.paginator.firstPage(),this.dataSource.set(n),console.log(`[SEARCH] Filtered: ${this.filteredCount()} / ${this.CountItem()} items`)}clearFilter(){this.searchText.set("");let e=this.dataSource();e.filter="",e.paginator&&e.paginator.firstPage(),this.dataSource.set(e),console.log("[SEARCH] Filter cleared")}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=U({type:a,selectors:[["app-detailbanggia"]],viewQuery:function(t,n){if(t&1&&(ot(X,5),ot(tt,5)),t&2){let i;rt(i=ct())&&(n.paginator=i.first),rt(i=ct())&&(n.sort=i.first)}},decls:30,vars:9,consts:[["pickerbatdau",""],["pickerketthuc",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary","matTooltip","C\u1EADp nh\u1EADt gi\xE1 h\xE0ng lo\u1EA1t",3,"click"],["mat-icon-button","","color","primary","matTooltip","Ph\xE2n t\xEDch gi\xE1",3,"click"],["mat-icon-button","","color","primary","matTooltip","So s\xE1nh gi\xE1",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptsizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","input","ngModel","disabled"],[3,"ngModelChange","ngModel","ngModelOptions","disabled"],[1,"w-full","flex","flex-col"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions","disabled"],["matIconSuffix","",3,"for"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],["disabled",""],["appearance","outline","subscriptSizing","dynamic",1,"search-field"],["matInput","","placeholder","T\xECm theo t\xEAn, m\xE3 SP, \u0110VT...","autocomplete","off",3,"input","value"],["class","whitespace-nowrap p-2 rounded-lg bg-blue-100 text-blue-700",4,"ngIf"],[3,"OutFilter","isEdit","title","ListFilter","filterItem","CountItems","fieldsearch","ListItem"],["mat-icon-button","","color","warn",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Ch\u1ECDn trang s\u1EA3n ph\u1EA9m",3,"pageSizeOptions","pageSize"],[1,"whitespace-nowrap","p-2","rounded-lg","bg-blue-100","text-blue-700"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"max-w-20","line-clamp-4"],[1,"flex","flex-row","items-center","space-x-1"],[1,"max-w-40","line-clamp-4"],["class","giaban-input p-2 min-w-28 bg-slate-200 focus:border rounded-lg focus:border-blue-600 focus:bg-slate-100 focus:outline-none relative",3,"contentEditable","opacity-50","keydown.enter","blur",4,"ngIf"],["class","max-w-20 line-clamp-4",4,"ngIf"],[1,"giaban-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none","relative",3,"keydown.enter","blur","contentEditable"],["class","absolute right-1 top-1 text-blue-600 animate-spin","style","font-size: 16px; width: 16px; height: 16px;",4,"ngIf"],[1,"absolute","right-1","top-1","text-blue-600","animate-spin",2,"font-size","16px","width","16px","height","16px"],["mat-icon-button","","color","primary","matTooltip","Xem l\u1ECBch s\u1EED gi\xE1",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,n){if(t&1&&(o(0,"div",2)(1,"button",3),_("click",function(){return n.goBack()}),o(2,"mat-icon"),g(3,"arrow_back"),r()(),o(4,"div",4),g(5),r(),o(6,"div",5)(7,"mat-slide-toggle",6),k("ngModelChange",function(c){return I(n.DetailBanggia().isActive,c)||(n.DetailBanggia().isActive=c),c}),g(8),r(),o(9,"button",7),_("click",function(){return n.goToBulkUpdate()}),o(10,"mat-icon"),g(11,"upload"),r()(),o(12,"button",8),_("click",function(){return n.goToPriceAnalytics()}),o(13,"mat-icon"),g(14,"analytics"),r()(),o(15,"button",9),_("click",function(){return n.goToPriceComparison()}),o(16,"mat-icon"),g(17,"compare"),r()(),o(18,"button",3),_("click",function(){return n.CoppyDon()}),o(19,"mat-icon"),g(20,"content_copy"),r()(),o(21,"button",3),_("click",function(){return n.printContent()}),o(22,"mat-icon"),g(23,"print"),r()(),M(24,mn,3,0,"button",10)(25,pn,3,0,"button",10)(26,dn,3,0,"button",11),r()(),o(27,"div",12),M(28,_n,9,0,"ng-container",13)(29,Fn,32,23,"ng-container",13),r()),t&2){let i;l(5),y(" ",((i=n.DetailBanggia())==null?null:i.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"," "),l(2),T("ngModel",n.DetailBanggia().isActive),m("disabled",!n.isEdit()),l(),S(n.DetailBanggia().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),l(16),m("ngIf",n.isEdit()),l(),m("ngIf",!n.isEdit()),l(),m("ngIf",n.banggiaId()!=="new"),l(2),m("ngIf",n.isDelete()),l(),m("ngIf",!n.isDelete())}},dependencies:[qt,_t,dt,jt,Yt,ht,Vt,Ut,mt,pt,Q,A,Y,q,L,Qt,ut,st,Z,j,F,De,be,ne,Xt,te,ee,Se,Ee,Pe,At,xe,ft],styles:[".search-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px}.search-field[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{background-color:#fff}  .mat-mdc-table .mat-mdc-row:hover{background-color:#f5f5f5;transition:background-color .2s ease}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}  .mat-mdc-table{transform:translateZ(0);will-change:scroll-position;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}  .mat-mdc-paginator{background-color:#fff;border-top:1px solid rgba(0,0,0,.12)}.giaban-input[_ngcontent-%COMP%]{cursor:text;transition:all .2s ease}.giaban-input[_ngcontent-%COMP%]:hover{background-color:#e3f2fd!important}.giaban-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #1976d24d}"]})};export{Re as DetailBanggiaComponent};
