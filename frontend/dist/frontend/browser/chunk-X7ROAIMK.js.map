{
  "version": 3,
  "sources": ["src/app/shared/common/searchfilter/searchfilter.component.ts", "src/app/shared/common/searchfilter/searchfilter.component.html"],
  "sourcesContent": ["\r\nimport { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, signal, ViewChild } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { MatButtonModule } from \"@angular/material/button\";\r\nimport { MatDatepickerModule } from \"@angular/material/datepicker\";\r\nimport { MatDialogModule } from \"@angular/material/dialog\";\r\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { MatMenuModule, MatMenuTrigger } from \"@angular/material/menu\";\r\nimport { MatPaginatorModule } from \"@angular/material/paginator\";\r\nimport { MatSelectModule } from \"@angular/material/select\";\r\nimport { MatSlideToggleModule } from \"@angular/material/slide-toggle\";\r\nimport { MatSortModule } from \"@angular/material/sort\";\r\nimport { MatTableModule } from \"@angular/material/table\";\r\nimport { removeVietnameseAccents } from \"../../utils/texttransfer.utils\";\r\n\r\n@Component({\r\n  selector: 'app-searchfilter',\r\n  templateUrl: './searchfilter.component.html',\r\n  styleUrl: './searchfilter.component.scss',\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    FormsModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatSelectModule,\r\n    MatDialogModule,\r\n    MatSlideToggleModule,\r\n    MatDatepickerModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    MatTableModule,\r\n    MatMenuModule\r\n],\r\n changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SearchfilterComponent {\r\n  @Input() ListItem: any[] = [];\r\n  @Input() filterItem: any[] = [];\r\n  @Input() ListFilter: any[] = [];\r\n  @Input() CountItems: any = 0;\r\n  @Input() icon: any = '';\r\n  @Input() title: any = 'Items';\r\n  @Input() fieldsearch: any = 'title';\r\n  @Input() isEdit = signal(false);\r\n  @Input() isDelete = signal(false);\r\n  @Output() OutFilter = new EventEmitter<any>();\r\n  @ViewChild(MatMenuTrigger) menuTrigger!: MatMenuTrigger;\r\n  searchText: string = '';\r\n  initFilter: any[] = [];\r\n  ngOnInit(): void {\r\n      this.initFilter = this.filterItem;\r\n    // console.log('ListItem', this.ListItem);   \r\n    // console.log('filterItem', this.filterItem);   \r\n    // console.log('ListFilter', this.ListFilter);   \r\n    // console.log('fieldsearch', this.fieldsearch);   \r\n    \r\n  }\r\n  trackByFn(index: number, item: any): any {\r\n    return item.id;\r\n  }\r\n  ChosenAll()\r\n  {\r\n    this.ListFilter =this.ListItem\r\n    this.filterItem = this.initFilter\r\n  }\r\n  RemoveAll()\r\n  {\r\n    this.ListFilter = [];\r\n    this.filterItem = this.initFilter\r\n    this.searchText = '';\r\n  }\r\n  CheckItem(item:any)\r\n  {\r\n    return this.ListFilter?.find((v)=>v.id===item.id)?true:false;\r\n  }\r\n  doFilterItem(event: any,field:any): void {\r\n      const value = event.target.value;\r\n      this.searchText = value;\r\n      if (!value) {\r\n        this.filterItem = this.initFilter\r\n        return;\r\n      }\r\n      this.filterItem = this.initFilter.filter((v:any) => \r\n      removeVietnameseAccents(v[field]).includes(value.toLowerCase())\r\n      ||v[field].toLowerCase().includes(value.toLowerCase()));\r\n\r\n  }\r\n  DoListFilter()\r\n  {\r\n    const uniqueMap = new Map();\r\n    this.ListFilter.forEach(item => {\r\n      const key = item[this.fieldsearch];\r\n      if (!uniqueMap.has(key)) {\r\n        uniqueMap.set(key, item);\r\n      }\r\n    });\r\n    this.filterItem = Array.from(uniqueMap.values());\r\n  }\r\n  getChosen(){\r\n    const uniqueMap = new Map();\r\n    this.ListFilter.forEach(item => {\r\n      const key = item[this.fieldsearch];\r\n      if (!uniqueMap.has(key)) {\r\n        uniqueMap.set(key, item);\r\n      }\r\n    });\r\n    return Array.from(uniqueMap.values()).length;\r\n  }\r\n  ChosenItem(item:any)\r\n  {\r\n    // console.log('filterItem', this.filterItem);\r\n    console.log('ListFilter', this.ListFilter);\r\n    const value = item[this.fieldsearch]\r\n    // this.ListFilter = this.ListItem?.filter((v:any)=>v[this.fieldsearch]===value);\r\n    \r\n    \r\n    const CheckItem = this.ListItem.filter((v:any)=>v[this.fieldsearch]===value);\r\n    const CheckItem1 = this.ListFilter.filter((v:any)=>v[this.fieldsearch]===value);\r\n    if(CheckItem1.length>0)\r\n    {\r\n      this.ListFilter = this.ListFilter?.filter((v) => v[this.fieldsearch] !== value);\r\n    }\r\n    else{\r\n      this.ListFilter = [...this.ListFilter,...CheckItem];\r\n    }   \r\n  }\r\n\r\n  ApplyFilterColum(menu: any) {  \r\n    this.OutFilter.emit(this.ListFilter);\r\n    menu.closeMenu();\r\n  }\r\n}\r\n", "@if (!icon) {\r\n  <button mat-flat-button color=\"primary\" [disabled]=\"!isEdit()\" [matMenuTriggerFor]=\"menu\" #menuTrigger=\"matMenuTrigger\">\r\n    {{CountItems}} {{title}}\r\n  </button>\r\n}\r\n@if (icon) {\r\n  <button mat-icon-button color=\"primary\" [matMenuTriggerFor]=\"menu\" #menuTrigger=\"matMenuTrigger\">\r\n    <mat-icon>{{icon}}</mat-icon>\r\n  </button>\r\n}\r\n<mat-menu #menu=\"matMenu\">\r\n  <div (click)=\"$event.stopPropagation()\"  class=\"cursor-pointer flex flex-col space-y-4 p-3\">\r\n    <div class=\"relative w-full\">\r\n      <input type=\"text\" [(ngModel)]=\"searchText\"\r\n        placeholder=\"Tìm Kiếm...\" (keyup)=\"doFilterItem($event,fieldsearch)\"\r\n        class=\"block w-full pl-10 pr-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40\">\r\n        <div class=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\r\n          <span class=\"material-symbols-outlined text-gray-500\">search</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex flex-row space-x-2 items-center justify-between\">\r\n        <div class=\"flex flex-row space-x-2 items-center\">\r\n          <span class=\"text-xs text-blue-600 underline\" (click)=\"ChosenAll()\">Chọn Tất Cả</span>\r\n          <span class=\"text-xs text-blue-600 underline\" (click)=\"RemoveAll()\">Xoá</span>\r\n        </div>\r\n\r\n        <span class=\"text-xs text-blue-600 underline\" (click)=\"DoListFilter()\">{{getChosen()}} Đang chọn</span>\r\n      </div>\r\n      <div class=\"w-full flex flex-col space-y-2 max-h-44 overflow-auto\">\r\n        @for (item of filterItem; track trackByFn($index, item)) {\r\n          <div (click)=\"ChosenItem(item)\" class=\"flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100\">\r\n            @if (CheckItem(item)) {\r\n              <span class=\"material-symbols-outlined text-blue-600\">check</span>\r\n            }\r\n            {{item[fieldsearch]||'(Trống)'}}\r\n          </div>\r\n        }\r\n      </div>\r\n      <div class=\"flex flex-row space-x-2 items-end justify-end\">\r\n        <button mat-flat-button color=\"warn\" (click)=\"menuTrigger.closeMenu()\">Đóng</button>\r\n        <button mat-flat-button color=\"primary\" (click)=\"ApplyFilterColum(menuTrigger)\" >Áp Dụng</button>\r\n      </div>\r\n    </div>\r\n  </mat-menu>"],
  "mappings": "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",
  "names": []
}
