import{a as oe}from"./chunk-NN5CCGI7.js";import"./chunk-GKIIKLHH.js";import"./chunk-VTCQHFRM.js";import"./chunk-5CMFZWN4.js";import"./chunk-ESCBPH3J.js";import"./chunk-OVJKPLRU.js";import{a as ne,b as ae}from"./chunk-RLTNMUN6.js";import"./chunk-2PVH7Z6P.js";import{d as ie,e as T}from"./chunk-SUUFLDBI.js";import{h as X}from"./chunk-EJAZH3JY.js";import"./chunk-ZW44ZSN2.js";import"./chunk-Z2ZDGSWT.js";import"./chunk-UQRYBWA2.js";import{a as E}from"./chunk-Q7E7WSHM.js";import"./chunk-L5GX4ZSB.js";import"./chunk-YGTKRZ2Q.js";import"./chunk-IDXNS6DX.js";import"./chunk-POPZSE3V.js";import{b as te}from"./chunk-POHUA43U.js";import{b as G,g as H,j as U,l as z,n as K,p as Q,v as Y,w as Z,y as $,z as ee}from"./chunk-A3B3GZND.js";import"./chunk-AW6ETFJX.js";import{a as q,b as J}from"./chunk-MGAKVDEP.js";import{a as R,b as O}from"./chunk-CBIWJPH2.js";import"./chunk-2NDWID3Z.js";import"./chunk-KMDUY2WI.js";import"./chunk-2PPFUFFT.js";import{a as W,c as j,e as N}from"./chunk-K4TPENAW.js";import"./chunk-27DT4LBZ.js";import{a as F,c as w}from"./chunk-VF6Z3BLE.js";import"./chunk-HB5OTZ3Y.js";import{m as B,v as L}from"./chunk-CNCZQRZQ.js";import{Db as A,Dc as h,Ec as k,Ic as _,Jc as f,Kb as v,Kc as P,Ra as y,Ub as d,ec as o,fc as r,hc as M,ic as b,ja as I,kc as D,ld as V,oa as x,pa as C,pc as m,rb as l,rc as u,ya as g,za as p}from"./chunk-TAKLKH4V.js";import{j as s}from"./chunk-WJTR2IJE.js";var S=class c{constructor(n,e){this._StorageService=n;this.router=e}ListPhieuchiahang=y([]);DetailPhieuchiahang=y({});phieuchiahangId=y(null);setPhieuchiahangId(n){this.phieuchiahangId.set(n)}CreatePhieuchiahang(n){return s(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},t=yield fetch(`${E.APIURL}/phieuchiahang`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();t.ok,this.getAllPhieuchiahang(),this.phieuchiahangId.set(i.id)}catch(e){return console.error(e)}})}getAllPhieuchiahang(){return s(this,null,function*(){try{let n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},e=yield fetch(`${E.APIURL}/phieuchiahang`,n);e.ok;let t=yield e.json()}catch(n){return console.error(n)}})}getPhieuchiahangByid(n){return s(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json"}},t=yield fetch(`${E.APIURL}/phieuchiahang/findid/${n}`,e);if(!t.ok)if(t.status===401){let a=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===403){let a=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===500){let a=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}let i=yield t.json();this.DetailPhieuchiahang.set(i)}catch(e){return console.error(e)}})}updatePhieuchiahang(n){return s(this,null,function*(){try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},t=yield fetch(`${E.APIURL}/phieuchiahang/${n.id}`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let i=yield t.json();t.ok,this.getAllPhieuchiahang(),this.getPhieuchiahangByid(n.id)}catch(e){return console.error(e)}})}DeletePhieuchiahang(n){return s(this,null,function*(){try{let e={method:"DELETE",headers:{"Content-Type":"application/json"}},t=yield fetch(`${E.APIURL}/phieuchiahang/${n.id}`,e);if(!t.ok)if(t.status===401){let i=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===403){let i=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else if(t.status===500){let i=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}else{let i=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:i}})}this.getAllPhieuchiahang()}catch(e){return console.error(e)}})}static \u0275fac=function(e){return new(e||c)(x(O),x(w))};static \u0275prov=I({token:c,factory:c.\u0275fac,providedIn:"root"})};function ce(c,n){if(c&1){let e=D();o(0,"button",1),m("click",function(){g(e);let i=u();return p(i.handlePhieuchiahangAction())}),o(1,"mat-icon"),h(2,"save"),r()()}}function le(c,n){if(c&1){let e=D();o(0,"button",1),m("click",function(){g(e);let i=u();return p(i.toggleEdit())}),o(1,"mat-icon"),h(2,"edit"),r()()}}function se(c,n){if(c&1){let e=D();M(0),o(1,"div",9)(2,"div",10),h(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),o(4,"div",11)(5,"button",12),m("click",function(){g(e);let i=u();return p(i.DeleteData())}),h(6,"\u0110\u1ED3ng \xDD"),r(),o(7,"button",13),m("click",function(){g(e);let i=u();return p(i.toggleDelete())}),h(8,"Hu\u1EF7 B\u1ECF"),r()()(),b()}}function ue(c,n){if(c&1){let e=D();M(0)(1),o(2,"mat-form-field",14)(3,"mat-label"),h(4,"Ti\xEAu \u0110\u1EC1"),r(),o(5,"input",15),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().title,i)||(a.DetailPhieuchiahang().title=i),p(i)}),m("input",function(){g(e);let i=u();return p(i.FillSlug())}),r()(),o(6,"mat-form-field",14)(7,"mat-label"),h(8,"M\xE3 S\u1EA3n Ph\u1EA9m"),r(),o(9,"input",16),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().masp,i)||(a.DetailPhieuchiahang().masp=i),p(i)}),r()(),o(10,"mat-form-field",14)(11,"mat-label"),h(12,"Gi\xE1 G\u1ED1c"),r(),o(13,"input",17),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().giagoc,i)||(a.DetailPhieuchiahang().giagoc=i),p(i)}),r()(),o(14,"mat-form-field",14)(15,"mat-label"),h(16,"\u0110\u01A1n V\u1ECB T\xEDnh"),r(),o(17,"input",16),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().dvt,i)||(a.DetailPhieuchiahang().dvt=i),p(i)}),r()(),o(18,"div",18)(19,"mat-form-field",14)(20,"mat-label"),h(21,"S\u1ED1 L\u01B0\u1EE3ng"),r(),o(22,"input",19),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().soluong,i)||(a.DetailPhieuchiahang().soluong=i),p(i)}),r()(),o(23,"mat-form-field",14)(24,"mat-label"),h(25,"S\u1ED1 L\u01B0\u1EE3ng Kho"),r(),o(26,"input",19),P("ngModelChange",function(i){g(e);let a=u();return f(a.DetailPhieuchiahang().soluongkho,i)||(a.DetailPhieuchiahang().soluongkho=i),p(i)}),r()()(),b()()}if(c&2){let e=u();l(5),_("ngModel",e.DetailPhieuchiahang().title),d("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailPhieuchiahang().masp),d("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailPhieuchiahang().giagoc),d("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailPhieuchiahang().dvt),d("disabled",!e.isEdit()),l(5),_("ngModel",e.DetailPhieuchiahang().soluong),d("disabled",!e.isEdit()),l(4),_("ngModel",e.DetailPhieuchiahang().soluongkho),d("disabled",!e.isEdit())}}var re=class c{_ListphieuchiahangComponent=C(oe);_PhieuchiahangService=C(S);_route=C(F);_router=C(w);_snackBar=C(R);constructor(){this._route.paramMap.subscribe(n=>{let e=n.get("id");this._PhieuchiahangService.setPhieuchiahangId(e)}),V(()=>s(this,null,function*(){let n=this._PhieuchiahangService.phieuchiahangId();n||(this._router.navigate(["/admin/phieuchiahang"]),this._ListphieuchiahangComponent.drawer.close()),n==="0"?(this.DetailPhieuchiahang.set({title:T(8,!1),slug:T(8,!1)}),this._ListphieuchiahangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieuchiahang","0"])):(yield this._PhieuchiahangService.getPhieuchiahangByid(n),this._ListphieuchiahangComponent.drawer.open(),this._router.navigate(["/admin/phieuchiahang",n]))}))}DetailPhieuchiahang=this._PhieuchiahangService.DetailPhieuchiahang;isEdit=y(!1);isDelete=y(!1);phieuchiahangId=this._PhieuchiahangService.phieuchiahangId;ngOnInit(){return s(this,null,function*(){})}handlePhieuchiahangAction(){return s(this,null,function*(){this.phieuchiahangId()==="0"?yield this.createPhieuchiahang():yield this.updatePhieuchiahang()})}createPhieuchiahang(){return s(this,null,function*(){try{yield this._PhieuchiahangService.CreatePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieuchiahang:",n)}})}updatePhieuchiahang(){return s(this,null,function*(){try{yield this._PhieuchiahangService.updatePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieuchiahang:",n)}})}DeleteData(){return s(this,null,function*(){try{yield this._PhieuchiahangService.DeletePhieuchiahang(this.DetailPhieuchiahang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieuchiahang"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieuchiahang:",n)}})}goBack(){this._router.navigate(["/admin/phieuchiahang"]),this._ListphieuchiahangComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieuchiahang.update(n=>(n.slug=ie(n.title),n))}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=A({type:c,selectors:[["app-detailphieuchiahang"]],decls:17,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"ngModelChange","input","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1EA3n Ph\u1EA9m",3,"ngModelChange","ngModel","disabled"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp Gi\xE1 G\u1ED1c",3,"ngModelChange","ngModel","disabled"],[1,"flex","flex-row","space-x-2"],["matInput","","type","number","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1EA3n Ph\u1EA9m",3,"ngModelChange","ngModel","disabled"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"button",1),m("click",function(){return t.goBack()}),o(2,"mat-icon"),h(3,"arrow_back"),r()(),o(4,"div",2),h(5),r(),o(6,"div",3)(7,"mat-slide-toggle",4),P("ngModelChange",function(a){return f(t.DetailPhieuchiahang().isActive,a)||(t.DetailPhieuchiahang().isActive=a),a}),h(8),r(),v(9,ce,3,0,"button",5)(10,le,3,0,"button",5),o(11,"button",6),m("click",function(){return t.toggleDelete()}),o(12,"mat-icon"),h(13,"delete"),r()()()(),o(14,"div",7),v(15,se,9,0,"ng-container",8)(16,ue,27,12,"ng-container",8),r()),e&2){let i;l(5),k(((i=t.DetailPhieuchiahang())==null?null:i.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),l(2),_("ngModel",t.DetailPhieuchiahang().isActive),d("disabled",!t.isEdit()),l(),k(t.DetailPhieuchiahang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),l(),d("ngIf",t.isEdit()),l(),d("ngIf",!t.isEdit()),l(5),d("ngIf",t.isDelete()),l(),d("ngIf",!t.isDelete())}},dependencies:[Z,Y,Q,ee,$,K,G,z,H,U,J,q,N,W,j,te,X,L,B,ae,ne],encapsulation:2})};export{re as DetailPhieuchiahangComponent};
