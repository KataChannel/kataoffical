import{c as zt}from"./chunk-LY2XLU73.js";import{a as B,b as Et,c as It,e as At,f as Ot,g as j,h as U,i as N}from"./chunk-FABN4FKA.js";import{a as Ct}from"./chunk-OU2ECELK.js";import{a as Bt}from"./chunk-3VGVAFKP.js";import{a as Mt}from"./chunk-3OJFS6UR.js";import{a as W,b as G,c as jt,d as K,h as $}from"./chunk-VY3VMUK4.js";import{a as Zt}from"./chunk-EF567M4M.js";import{a as Q,b as H,c as Ft,d as q}from"./chunk-RKSUXRSP.js";import{a as Lt,b as Dt,c as Tt}from"./chunk-H2G5L6SK.js";import{b as Ht}from"./chunk-GZGTJBDK.js";import{d as qt}from"./chunk-NVPNJQEU.js";import{a as yt}from"./chunk-H54S5G77.js";import{b as kt,c as wt,d as P}from"./chunk-VNKEAMBS.js";import{b as Rt,g as Pt,j as Vt,n as X,p as Ut,u as Nt,v as Z,x as Qt,y as Y}from"./chunk-6CYPKWCK.js";import{a as St,b as V}from"./chunk-R3HJY4YP.js";import{T as S,ba as vt,ca as xt,w as ut,x as bt,y as ft}from"./chunk-R6Q2HSJ3.js";import{b as _t,d as R,e as gt}from"./chunk-VRKGIU2A.js";import{q as w}from"./chunk-2CV4OV4X.js";import{$b as st,Ab as f,Ac as _,Bb as E,Bc as mt,Ga as at,Gc as dt,Hb as I,Hc as ht,Ic as pt,Kc as M,Qb as A,Rb as s,Ub as ct,Xb as ot,_b as lt,ac as t,bc as n,cc as v,ga as T,gc as x,jb as y,la as C,lc as d,nc as g,ob as c,ta as nt,tb as b,tc as O,ua as h,uc as F,va as p,vc as z,yc as k,zc as o}from"./chunk-FKNCN4IQ.js";import{g as $t,j as D}from"./chunk-XXD5T5ZZ.js";var Xt={Logoimage:"/images/logo-full.svg"};var J=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=E({type:r});static \u0275inj=T({imports:[S,S]})}return r})();var Wt=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=E({type:r});static \u0275inj=T({imports:[ut,S,vt,xt,J]})}return r})();var tt=class r{constructor(e,i){this.dialogRef=e;this.data=i;this.Detail=i}Detail={};onClick(){this.dialogRef.close({Detail:this.Detail})}static \u0275fac=function(i){return new(i||r)(b(W),b(G))};static \u0275cmp=f({type:r,selectors:[["app-deletedialog"]],decls:13,vars:1,consts:[[1,"p-4","flex","flex-col","space-y-2"],[1,"font-bold","text-xl"],[1,"flex","flex-row","space-x-2","items-center","w-full","p-4"],[1,"font-bold","text-red-500"],[1,"relative","flex","flex-row","space-x-2","justify-center"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],["mat-dialog-close","false",1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded"]],template:function(i,a){i&1&&(t(0,"div",0)(1,"span",1),o(2,"Xo\xE1"),n(),t(3,"div",2)(4,"span"),o(5,"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn xo\xE1 "),n(),t(6,"span",3),o(7),n()(),t(8,"div",4)(9,"button",5),d("click",function(){return a.onClick()}),o(10," \u0110\u1ED3ng \xFD "),n(),t(11,"button",6),o(12," Hu\u1EF7 "),n()()()),i&2&&(c(7),_(a.Detail.Title||a.Detail.email))},dependencies:[w,Z,X,Y,$,K],encapsulation:2})};var te=()=>({standalone:!0}),ee=(r,e)=>e.id;function ie(r,e){if(r&1){let i=x();t(0,"mat-form-field",3)(1,"mat-label"),o(2),n(),t(3,"input",8),pt("ngModelChange",function(l){let m=h(i).$implicit,u=g();return ht(u.Detail[m.value],l)||(u.Detail[m.value]=l),p(l)}),n()()}if(r&2){let i=e.$implicit,a=g();c(2),_(i.Title),c(),dt("ngModel",a.Detail[i.value]),s("ngModelOptions",M(4,te))("placeholder",i.Title)}}function ne(r,e){r&1&&(t(0,"span",4),o(1,"There are no items."),n())}var et=class r{constructor(e,i){this.dialogRef=e;this.data=i;this.Detail=i.Detail,this.Forms=i.Forms}Detail={};Forms=[];FillSlug(){this.Detail.Slug=qt(this.Detail.Title)}onSaveClick(){this.dialogRef.close({Detail:this.Detail})}static \u0275fac=function(i){return new(i||r)(b(W),b(G))};static \u0275cmp=f({type:r,selectors:[["app-updatedialog"]],decls:12,vars:1,consts:[[1,"p-8","lg:w-[50vw]","w-[80vw]","max-h-[90vh]","flex","flex-col","space-y-8"],[1,"relative","font-bold","text-xl"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],["appearance","outline",1,"w-full"],[1,"p-2","text-center"],[1,"relative","flex","flex-row","space-x-2","justify-center"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],["mat-dialog-close","false",1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded"],["matInput","",3,"ngModelChange","ngModel","ngModelOptions","placeholder"]],template:function(i,a){i&1&&(t(0,"div",0)(1,"span",1),o(2,"C\u1EADp Nh\u1EADt"),n(),t(3,"div",2),lt(4,ie,4,5,"mat-form-field",3,ee,!1,ne,2,0,"span",4),n(),t(7,"div",5)(8,"button",6),d("click",function(){return a.onSaveClick()}),o(9," \u0110\u1ED3ng \xDD "),n(),t(10,"button",7),o(11," \u0110\xF3ng "),n()()()),i&2&&(c(4),st(a.Forms))},dependencies:[w,Z,Nt,Ut,X,Rt,Pt,Vt,Y,Qt,$,K,Ht],encapsulation:2})};function re(r,e){if(r&1){let i=x();t(0,"mat-tree-node")(1,"div",6)(2,"a",7),o(3),n(),t(4,"mat-menu",null,0)(6,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Update(l.Item))}),t(7,"div",9)(8,"span",10),o(9,"edit"),n(),t(10,"span"),o(11,"S\u1EEDa"),n()()(),t(12,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Delete(l.Item))}),t(13,"div",9)(14,"span",11),o(15,"delete"),n(),t(16,"span"),o(17,"Xo\xE1"),n()()()()()()}if(r&2){let i=e.$implicit;c(2),s("routerLink",i.Item.slug),c(),_(i.Item.title)}}function ce(r,e){if(r&1){let i=x();t(0,"mat-tree-node",12)(1,"div",6)(2,"a",13),o(3),n(),t(4,"a",14)(5,"span",15),o(6),n()(),t(7,"mat-menu",null,1)(9,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Update(l.Item))}),t(10,"div",9)(11,"span",10),o(12,"edit"),n(),t(13,"span"),o(14,"S\u1EEDa"),n()()(),t(15,"button",8),d("click",function(){let l=h(i).$implicit,m=g(2);return p(m.Delete(l.Item))}),t(16,"div",9)(17,"span",11),o(18,"delete"),n(),t(19,"span"),o(20,"Xo\xE1"),n()()()()()()}if(r&2){let i=e.$implicit,a=g(2);s("cdkTreeNodeTypeaheadLabel",i.title),c(2),s("routerLink",i.Slug),c(),_(i.Item.title),c(),A("aria-label","Toggle "+i.Item.title),c(2),mt(" ",a.treeControl.isExpanded(i)?"expand_more":"chevron_right"," ")}}function le(r,e){if(r&1&&(t(0,"mat-tree",2),I(1,re,18,2,"mat-tree-node",4)(2,ce,21,5,"mat-tree-node",5),n()),r&2){let i=g();s("dataSource",i.dataSource)("treeControl",i.treeControl),c(2),s("matTreeNodeDefWhen",i.hasChild)}}function se(r,e){r&1&&(t(0,"span",3),o(1,"Ch\u01B0a C\xF3 D\u1EEF Li\u1EC7u"),n())}var it=class r{ListMenu=[];UpdateEmit=new at;DeleteEmit=new at;_transformer=(e,i)=>({expandable:!!e?.children&&e?.children.length>0,Item:e,level:i});treeControl=new B(e=>e.level,e=>e.expandable);treeFlattener=new U(this._transformer,e=>e.level,e=>e.expandable,e=>e?.children);dataSource=new N(this.treeControl,this.treeFlattener);dialog=C(jt);constructor(){}hasChild=(e,i)=>i.expandable;ngOnChanges(e){this.ListMenu=e.ListMenu.currentValue,this.dataSource.data=this.ListMenu,this.treeControl.expandAll()}Update(e){e.Parent=this.ListMenu,this.dialog.open(et,{data:e}).afterClosed().subscribe(a=>{a!="false"&&this.UpdateEmit.emit(a.Detail)})}Delete(e){this.dialog.open(tt,{data:e}).afterClosed().subscribe(a=>{a!="false"&&this.DeleteEmit.emit(a.Detail)})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=f({type:r,selectors:[["app-treemenu"]],inputs:{ListMenu:"ListMenu"},outputs:{UpdateEmit:"UpdateEmit",DeleteEmit:"DeleteEmit"},features:[nt],decls:2,vars:1,consts:[["menu1","matMenu"],["menu2","matMenu"],[1,"!bg-white","p-2",3,"dataSource","treeControl"],[1,"p-2","text-center"],[4,"matTreeNodeDef"],["matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"w-full","flex","items-center","justify-between"],["routerLinkActive","!bg-slate-200",1,"hover:bg-slate-200","rounded-lg","p-2","truncate","flex-grow",3,"routerLink"],["mat-menu-item","",3,"click"],[1,"flex","flex-row","items-center"],[1,"material-symbols-outlined","text-blue-500","mr-2"],[1,"material-symbols-outlined","text-red-500","mr-2"],["matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],[1,"hover:bg-slate-200","rounded-lg","p-2","truncate","flex-grow",3,"routerLink"],["mat-icon-button","","matTreeNodeToggle",""],[1,"material-symbols-outlined"]],template:function(i,a){i&1&&I(0,le,3,3,"mat-tree",2)(1,se,2,0,"span",3),i&2&&ot(a.ListMenu.length>0?0:1)},dependencies:[j,It,Ot,At,Et,P,wt,V,w,R,gt,q,H,Q],styles:['mat-tree-node[aria-level="2"][_ngcontent-%COMP%]{padding-left:20px}mat-tree-node[aria-level="3"][_ngcontent-%COMP%]{padding-left:40px}mat-tree-node[aria-level="4"][_ngcontent-%COMP%]{padding-left:60px}'],changeDetection:0})};var Kt=$t(Zt());var me=["drawer"],de=["drawer1"],he=()=>["/admin/profile"],pe=()=>["/admin/account"],Gt=class r{constructor(e,i,a){this._breakpointObserver=e;this._UserService=i;this._ErrorLogService=a}isFullscreen=!1;showFiller=!1;Config=Xt;User={};version=(0,Kt.default)().format("hh:mm:ss dd/mm/yyyy");_transformer=(e,i)=>({expandable:!!e?.children&&e?.children.length>0,title:e.title,level:i,node:e});treeControl=new B(e=>e.level,e=>e.expandable);treeFlattener=new U(this._transformer,e=>e.level,e=>e.expandable,e=>e?.children);dataSource=new N(this.treeControl,this.treeFlattener);_MenuService=C(Bt);hasChild=(e,i)=>i.expandable;drawer;drawer1;_snackBar=C(yt);ListMenu=[];ngOnInit(){return D(this,null,function*(){yield this._UserService.getProfile().then(e=>D(this,null,function*(){if(e){this.User=e;let i=this.User?.permissions?.map(a=>a.name);yield this._MenuService.getTreeMenu(i),this.ListMenu=this._MenuService.ListMenu(),this.dataSource.data=this._MenuService.ListMenu()}})),this._breakpointObserver.observe([ft.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.drawer.close()):(this.drawer.mode="side",this.drawer.open())})})}logout(){this._UserService.logout().then(e=>{e&&setTimeout(()=>{window.location.reload()},100)})}ClearCache(){return D(this,null,function*(){let e=localStorage.getItem("token"),i=localStorage.getItem("permissions");localStorage.clear(),e&&localStorage.setItem("token",e),i&&localStorage.setItem("permissions",i),yield this._ErrorLogService.ClearRedisCache(),this._snackBar.open("Xo\xE1 Cache Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}static \u0275fac=function(i){return new(i||r)(b(bt),b(Ct),b(Mt))};static \u0275cmp=f({type:r,selectors:[["app-adminmain"]],viewQuery:function(i,a){if(i&1&&(O(me,7),O(de,7)),i&2){let l;F(l=z())&&(a.drawer=l.first),F(l=z())&&(a.drawer1=l.first)}},decls:91,vars:22,consts:[["drawer",""],["menu","matMenu"],["menu1","matMenu"],["drawer1",""],["autosize","",1,"!w-screen","!h-screen"],["mode","side","position","start"],[1,"relative","h-full","flex","flex-col","space-y-2"],[1,"relative","flex","flex-col","space-y-2","p-2",3,"href"],["alt","Logo",1,"h-10","object-fill",3,"src"],[1,"relative","h-full","overflow-auto","p-2"],[3,"ListMenu"],[1,"relative","w-full","justify-between","flex","flex-row","space-x-2","items-center","p-2"],[1,"flex","flex-row","space-x-2"],["alt","Avatar",1,"max-w-14","max-h-14","object-cover","rounded-full",3,"src"],[1,"flex","flex-col"],[1,"font-bold"],[1,"italic","text-xs"],[1,"italic","text-[8px]"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"relative","flex","flex-col","w-full","h-full","primary"],[1,"relative","flex","flex-row","space-x-2","justify-between","items-center","p-1","bg-[#3154A1]"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"flex","flex-row","space-x-2","items-center","p-4"],["mat-menu-item","",3,"href"],["mode","over","position","end"]],template:function(i,a){if(i&1){let l=x();t(0,"mat-drawer-container",4)(1,"mat-drawer",5,0)(3,"div",6)(4,"a",7),v(5,"img",8),n(),t(6,"div",9),v(7,"app-treemenu",10),n(),t(8,"div",11)(9,"div",12),v(10,"img",13),t(11,"div",14)(12,"div",15),o(13),n(),t(14,"div",16),o(15),n(),t(16,"div",16),o(17),n(),t(18,"div",17),o(19),n()()(),t(20,"button",18)(21,"mat-icon"),o(22,"more_vert"),n()(),t(23,"mat-menu",null,1)(25,"a",19)(26,"mat-icon"),o(27,"account_circle"),n(),t(28,"span"),o(29,"Profile"),n()(),t(30,"a",19)(31,"mat-icon"),o(32,"account_circle"),n(),t(33,"span"),o(34,"Account"),n()(),t(35,"button",20)(36,"mat-icon"),o(37,"settings"),n(),t(38,"span"),o(39,"Settings"),n()(),t(40,"button",21),d("click",function(){return h(l),p(a.logout())}),t(41,"mat-icon"),o(42,"logout"),n(),t(43,"span"),o(44,"Logout"),n()()()()()(),t(45,"div",22)(46,"div",23)(47,"div",24)(48,"button",25),d("click",function(){h(l);let u=k(2);return p(u.toggle())}),t(49,"mat-icon"),o(50,"menu"),n()(),t(51,"button",26)(52,"mat-icon"),o(53,"search"),n()()(),t(54,"div",24)(55,"button",25),d("click",function(){return h(l),p(a.ClearCache())}),t(56,"mat-icon"),o(57,"cached"),n()(),t(58,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(59,"mat-icon"),o(60,"dashboard"),n()(),t(61,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(62,"mat-icon"),o(63,"notifications"),n()(),t(64,"button",25),d("click",function(){h(l);let u=k(89);return p(u.toggle())}),t(65,"mat-icon"),o(66,"chat"),n()(),t(67,"button",18)(68,"mat-icon"),o(69,"account_circle"),n()(),t(70,"mat-menu",null,2)(72,"div",27),v(73,"img",13),t(74,"div",14)(75,"div",15),o(76),n(),t(77,"div",16),o(78),n(),t(79,"div",16),o(80),n()()(),t(81,"a",28),o(82,"Th\xF4ng Tin"),n(),t(83,"button",20),o(84,"C\xE0i \u0110\u1EB7t"),n(),t(85,"button",21),d("click",function(){return h(l),p(a.logout())}),o(86,"\u0110\u0103ng Xu\u1EA5t"),n()()()(),v(87,"router-outlet"),n(),t(88,"mat-drawer",29,3),v(90,"div",6),n()()}if(i&2){let l=k(24),m=k(71);c(4),s("href","admin/welcome",y),c(),s("src",a.Config.Logoimage,y),c(2),s("ListMenu",a.ListMenu),c(3),s("src",a.User==null?null:a.User.Avatar,y),c(3),_(a.User==null?null:a.User.Hoten),c(2),_(a.User==null?null:a.User.Vitri),c(2),_(a.User==null?null:a.User.email),c(2),_(a.version),c(),s("matMenuTriggerFor",l),c(5),s("routerLink",M(20,he)),c(5),s("routerLink",M(21,pe)),c(37),s("matMenuTriggerFor",m),c(6),s("src",a.User==null?null:a.User.Avatar,y),c(3),_(a.User==null?null:a.User.Hoten),c(2),_(a.User==null?null:a.User.Vitri),c(2),_(a.User==null?null:a.User.email),c(),s("href","/admin/profile",y),c(7),ct(a.isFullscreen?"!w-screen":"!w-1/3")}},dependencies:[j,Tt,Lt,Dt,P,kt,V,St,_t,q,H,Q,Ft,zt,J,Wt,w,R,it],encapsulation:2})};export{Gt as a};
