import{a as h}from"./chunk-SAM22JC7.js";import{a as i}from"./chunk-Q7E7WSHM.js";import{a as c,b as u}from"./chunk-CBIWJPH2.js";import{Ra as n,ja as l,oa as s,pa as g}from"./chunk-TAKLKH4V.js";import{j as o}from"./chunk-WJTR2IJE.js";var p=class d{constructor(t,r,e=g(c)){this._StorageService=t;this._ErrorLogService=r;this._snackBar=e}ListUserguide=n([]);DetailUserguide=n({});userguideId=n(null);setUserguideId(t){this.userguideId.set(t)}CreateUserguide(t){return o(this,null,function*(){try{let r={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(t)},e=yield fetch(`${i.APIURL}/userguide`,r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();e.ok||this.handleError(e.status),this.getAllUserguide(),this.userguideId.set(a.id)}catch(r){return this._ErrorLogService.logError("Failed to CreateUserguide",r),console.error(r)}})}getAllUserguide(){return o(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},r=yield fetch(`${i.APIURL}/userguide`,t);r.ok||this.handleError(r.status);let e=yield r.json();return this.ListUserguide.set(e.data),e.data}catch(t){console.error(t)}})}getUserguideBy(t){return o(this,null,function*(){try{let r={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(t)},e=yield fetch(`${i.APIURL}/userguide/findby`,r);e.ok||this.handleError(e.status);let a=yield e.json();this.DetailUserguide.set(a.data[0])}catch(r){return this._ErrorLogService.logError("Failed to getUserguideBy",r),console.error(r)}})}updateUserguide(t){return o(this,null,function*(){try{let r={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._StorageService.getItem("token")}`},body:JSON.stringify(t)},e=yield fetch(`${i.APIURL}/userguide/${t.id}`,r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();e.ok||this.handleError(e.status),yield this.getAllUserguide()}catch(r){return this._ErrorLogService.logError("Failed to updateUserguide",r),console.error(r)}})}DeleteUserguide(t){return o(this,null,function*(){try{let r={method:"DELETE",headers:{"Content-Type":"application/json"}},e=yield fetch(`${i.APIURL}/userguide/${t.id}`,r);e.ok||this.handleError(e.status),this.getAllUserguide()}catch(r){return this._ErrorLogService.logError("Failed to DeleteUserguide",r),console.error(r)}})}handleError(t){let r="L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh";switch(t){case 400:r="Th\xF4ng tin \u0111\xE3 t\u1ED3n t\u1EA1i",this._snackBar.open(r,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});break;case 404:r="Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i";break;case 401:r="Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i";break;case 403:r="B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp",this._snackBar.open(r,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});break;case 500:r="L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau",this._snackBar.open(r,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});break;default:this._snackBar.open(r,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});break}let e=JSON.stringify({code:t,title:r})}static \u0275fac=function(r){return new(r||d)(s(u),s(h),s(c))};static \u0275prov=l({token:d,factory:d.\u0275fac,providedIn:"root"})};export{p as a};
