import{b as te}from"./chunk-62OL67U4.js";import{b as Y,e as Z}from"./chunk-MRBSEOP3.js";import{h as z}from"./chunk-MUXLIOTO.js";import{a as U}from"./chunk-ZW44ZSN2.js";import{b as q,c as g,d as R}from"./chunk-HQSQA26E.js";import{k as ee}from"./chunk-IHZF43U3.js";import{r as $}from"./chunk-EK5OIXPS.js";import{b as J}from"./chunk-KC2JAF6W.js";import{b as W,g as j,j as K,n as X,w as G,z as H}from"./chunk-6K5ZWVAI.js";import{a as P,b as Q}from"./chunk-T32LGCQW.js";import{a as B,c as O,e as N}from"./chunk-W4JKNNWY.js";import{$b as h,Cc as x,Db as I,Dc as s,Ec as E,Fc as F,Gc as L,Ic as V,Jc as D,Ka as w,Kb as C,Kc as A,Ra as _,Ub as y,cc as T,dc as v,ec as o,fc as a,kc as M,pc as f,rb as u,rc as d,xc as S,ya as c,yc as k,za as m,zc as b}from"./chunk-52B2MLDA.js";function re(l,i){if(l&1&&(o(0,"button",2,1),s(2),a()),l&2){let t=d(),e=x(3);y("disabled",!t.isEdit())("matMenuTriggerFor",e),u(2),L(" ",t.CountItems," ",t.title," ")}}function ne(l,i){if(l&1&&(o(0,"button",3,1)(2,"mat-icon"),s(3),a()()),l&2){let t=d(),e=x(3);y("matMenuTriggerFor",e),u(3),E(t.icon)}}function oe(l,i){l&1&&(o(0,"span",18),s(1,"check"),a())}function le(l,i){if(l&1){let t=M();o(0,"div",17),f("click",function(){let r=c(t).$implicit,n=d();return m(n.ChosenItem(r))}),C(1,oe,2,0,"span",18),s(2),a()}if(l&2){let t=i.$implicit,e=d();u(),h(e.CheckItem(t)?1:-1),u(),F(" ",t[e.fieldsearch]||"(Tr\u1ED1ng)"," ")}}var ie=class l{ListItem=[];filterItem=[];ListFilter=[];CountItems=0;icon="";title="Items";fieldsearch="title";isEdit=_(!1);isDelete=_(!1);OutFilter=new w;menuTrigger;searchText="";initFilter=[];ngOnInit(){this.initFilter=this.filterItem}trackByFn(i,t){return t.id}ChosenAll(){this.ListFilter=this.ListItem,this.filterItem=this.initFilter}RemoveAll(){this.ListFilter=[],this.filterItem=this.initFilter,this.searchText=""}CheckItem(i){return!!this.ListFilter?.find(t=>t.id===i.id)}doFilterItem(i,t){let e=i.target.value;if(this.searchText=e,!e){this.filterItem=this.initFilter;return}this.filterItem=this.initFilter.filter(r=>U(r[t]).includes(e.toLowerCase())||r[t].toLowerCase().includes(e.toLowerCase()))}DoListFilter(){let i=new Map;this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),this.filterItem=Array.from(i.values())}getChosen(){let i=new Map;return this.ListFilter.forEach(t=>{let e=t[this.fieldsearch];i.has(e)||i.set(e,t)}),Array.from(i.values()).length}ChosenItem(i){console.log("ListFilter",this.ListFilter);let t=i[this.fieldsearch],e=this.ListItem.filter(n=>n[this.fieldsearch]===t);this.ListFilter.filter(n=>n[this.fieldsearch]===t).length>0?this.ListFilter=this.ListFilter?.filter(n=>n[this.fieldsearch]!==t):this.ListFilter=[...this.ListFilter,...e]}ApplyFilterColum(i){this.OutFilter.emit(this.ListFilter),i.closeMenu()}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=I({type:l,selectors:[["app-searchfilter"]],viewQuery:function(t,e){if(t&1&&S(g,5),t&2){let r;k(r=b())&&(e.menuTrigger=r.first)}},inputs:{ListItem:"ListItem",filterItem:"filterItem",ListFilter:"ListFilter",CountItems:"CountItems",icon:"icon",title:"title",fieldsearch:"fieldsearch",isEdit:"isEdit",isDelete:"isDelete"},outputs:{OutFilter:"OutFilter"},decls:26,vars:4,consts:[["menu","matMenu"],["menuTrigger","matMenuTrigger"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"ngModelChange","keyup","ngModel"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],[1,"material-symbols-outlined","text-blue-600"]],template:function(t,e){if(t&1){let r=M();C(0,re,3,4,"button",2)(1,ne,4,2,"button",3),o(2,"mat-menu",null,0)(4,"div",4),f("click",function(p){return c(r),m(p.stopPropagation())}),o(5,"div",5)(6,"input",6),A("ngModelChange",function(p){return c(r),D(e.searchText,p)||(e.searchText=p),m(p)}),f("keyup",function(p){return c(r),m(e.doFilterItem(p,e.fieldsearch))}),a(),o(7,"div",7)(8,"span",8),s(9,"search"),a()()(),o(10,"div",9)(11,"div",10)(12,"span",11),f("click",function(){return c(r),m(e.ChosenAll())}),s(13,"Ch\u1ECDn T\u1EA5t C\u1EA3"),a(),o(14,"span",11),f("click",function(){return c(r),m(e.RemoveAll())}),s(15,"Xo\xE1"),a()(),o(16,"span",11),f("click",function(){return c(r),m(e.DoListFilter())}),s(17),a()(),o(18,"div",12),T(19,le,3,2,"div",13,e.trackByFn,!0),a(),o(21,"div",14)(22,"button",15),f("click",function(){return c(r),m(e.menuTrigger.closeMenu())}),s(23,"\u0110\xF3ng"),a(),o(24,"button",16),f("click",function(){return c(r),m(e.ApplyFilterColum(e.menuTrigger))}),s(25,"\xC1p D\u1EE5ng"),a()()()()}t&2&&(h(e.icon?-1:0),u(),h(e.icon?1:-1),u(5),V("ngModel",e.searchText),u(11),F("",e.getChosen()," \u0110ang ch\u1ECDn"),u(2),v(e.filterItem))},dependencies:[G,H,X,W,j,K,Q,P,N,B,O,J,z,te,ee,Z,Y,$,R,q,g],encapsulation:2,changeDetection:0})};export{ie as a};
