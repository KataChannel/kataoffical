import{a as Be}from"./chunk-VTCQHFRM.js";import{a as Ke}from"./chunk-4SRDVDFV.js";import{a as Ve}from"./chunk-QH5IT2XE.js";import{a as Ae}from"./chunk-O4NH3HCF.js";import{a as Oe}from"./chunk-KCYCUJFN.js";import{a as Pe}from"./chunk-NWO3O5TK.js";import{a as ne,b as ae}from"./chunk-DTH4QSCT.js";import{a as Ie,b as et}from"./chunk-NULFSBS2.js";import{a as ue,b as de}from"./chunk-3FNN46PZ.js";import{a as kt,b as Lt,c as It}from"./chunk-OTBM7FCQ.js";import{a as Nt,b as At,c as Vt,d as Ot}from"./chunk-CDVLS2VJ.js";import{b as Te,f as Fe}from"./chunk-5L43S7G4.js";import{e as Pt}from"./chunk-ROXAFEUT.js";import{a as q,b as he,c as ge}from"./chunk-JNFQJYYE.js";import{c as Yt,d as Rt,e as Ht,f as Wt,g as Qt,h as jt}from"./chunk-C6ZTKERY.js";import{a as Ne}from"./chunk-6WUPS4UK.js";import{a as oe,b as re,c as le,k as se}from"./chunk-GUGI676T.js";import{b as xt,c as Ct}from"./chunk-PWU56VV4.js";import{b as ke,h as Le}from"./chunk-N62VL4FK.js";import{a as He}from"./chunk-JNVUT6FC.js";import{b as ce}from"./chunk-MRUSYMHE.js";import{a as me,b as pe,c as _e,d as fe,e as xe,g as Ce,h as ye,j as Ee,k as Se,m as we,n as De,p as ve,q as be,r as Me,s as tt}from"./chunk-DRGFONJ6.js";import{a as ee,b as ie}from"./chunk-WGYCBDOD.js";import{b as Zt,c as te}from"./chunk-ZVLEUULZ.js";import{b as Kt,g as Bt,j as $t,p as zt,r as Xt,t as qt,u as Gt,x as Jt,y as Ut}from"./chunk-GPRU6KV3.js";import{a as Tt,b as Ft}from"./chunk-5BIREHNW.js";import{a as Mt}from"./chunk-TXVIVA74.js";import{a as Dt,c as vt,e as bt}from"./chunk-SKIRCMX2.js";import{_ as St,ka as wt,y as yt,z as Et}from"./chunk-LXJDFCF2.js";import{k as dt,l as ht,m as gt,s as _t,x as ft}from"./chunk-KFQ5FW2D.js";import{$b as k,Cc as w,Db as ot,Dc as l,Ec as y,Fc as C,Gc as Y,Hc as Z,Ic as L,Jc as I,Kb as E,Kc as T,Mc as Q,Oc as mt,Rc as pt,Sc as j,Ub as h,Uc as X,Yb as rt,Yc as R,bc as lt,cc as N,dc as A,ec as a,fc as o,gc as b,hc as st,ic as ct,kc as S,nd as ut,pa as D,pc as f,rb as c,rc as p,xc as P,ya as u,yc as K,za as d,zc as B}from"./chunk-WYL4U5YK.js";import{a as nt,b as at,g as Re,h as W,j as M}from"./chunk-6DYNGEAS.js";var H=Re(He());var We=["drawer"],Qe=["dialogImportExcel"],je=["dialogImportExcelCu"],it=()=>({standalone:!0}),Xe=(r,i,t,e,n)=>({"text-blue-500":r,"text-yellow-500":i,"text-green-500":t,"text-purple-500":e,"text-red-500":n}),qe=(r,i)=>({"text-green-600 font-semibold":r,"text-yellow-600 font-semibold":i}),Ge=(r,i)=>i.key,G=(r,i)=>i.id,Je=(r,i)=>(i.sanpham==null?null:i.sanpham.id)||r;function Ue(r,i){if(r&1){let t=S();a(0,"button",54),f("click",function(n){let s=u(t).$implicit;return p().toggleColumn(s),d(n.stopPropagation())}),a(1,"mat-icon"),l(2),o(),a(3,"span"),l(4),o()()}if(r&2){let t=i.$implicit;c(2),y(t.isShow?"check_box":"check_box_outline_blank"),c(2),y(t.value)}}function Ze(r,i){if(r&1){let t=S();a(0,"button",57),f("click",function(){u(t);let n=p(2),s=w(97);return d(n.openDeleteDialog(s))}),a(1,"mat-icon"),l(2,"delete"),o(),a(3,"span",24),l(4,"Xo\xE1"),o()()}}function ti(r,i){if(r&1){let t=S();a(0,"button",58),f("click",function(){u(t);let n=p(2);return d(n.DoDanhan())}),a(1,"span",24),l(2,"\u0110\xE3 Nh\u1EADn"),o()()}}function ei(r,i){if(r&1&&E(0,Ze,5,0,"button",55)(1,ti,3,0,"button",56),r&2){let t=p();h("ngIf",t.EditList.length>0),c(),h("ngIf",t.EditList.length>0)}}function ii(r,i){if(r&1&&(a(0,"th",61)(1,"span",62),l(2),o()()),r&2){let t=p().$implicit,e=p();c(2),C(" ",e.ColumnName[t]," ")}}function ni(r,i){if(r&1&&(a(0,"span",64),l(1),o()),r&2){let t=p().index;c(),C(" ",t+1," ")}}function ai(r,i){if(r&1){let t=S();a(0,"span",68),f("click",function(){u(t);let n=p().$implicit,s=p(2);return d(s.goToDetail(n))}),l(1),o()}if(r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",t[e]," ")}}function oi(r,i){if(r&1&&(a(0,"span",64),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",t[e].length," ")}}function ri(r,i){if(r&1&&(a(0,"span",64),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),Y(" (",t[e].mancc,") ",t[e].name," ")}}function li(r,i){if(r&1&&(a(0,"span",66),l(1),j(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",X(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function si(r,i){if(r&1&&(a(0,"span",66),l(1),j(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",X(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function ci(r,i){if(r&1&&(a(0,"span",67),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit,n=p();h("ngClass",pt(2,Xe,t[e]==="dadat",t[e]==="dagiao",t[e]==="danhan",t[e]==="hoanthanh",t[e]==="huy")),c(),C(" ",n.Trangthaidon[t[e]]," ")}}function mi(r,i){r&1&&(a(0,"mat-icon",69),l(1,"check_circle"),o())}function pi(r,i){r&1&&(a(0,"mat-icon",70),l(1,"cancel"),o())}function ui(r,i){if(r&1&&(a(0,"span",64),E(1,mi,2,0,"mat-icon",69)(2,pi,2,0,"mat-icon",70),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),k(t[e]?1:2)}}function di(r,i){if(r&1&&(a(0,"span",66),l(1),j(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",X(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function hi(r,i){r&1&&b(0,"span",64)}function gi(r,i){if(r&1&&(a(0,"span",64),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),C(" ",t[e]," ")}}function _i(r,i){if(r&1&&(a(0,"td",63),E(1,ni,2,1,"span",64)(2,ai,2,1,"span",65)(3,oi,2,1,"span",64)(4,ri,2,2,"span",64)(5,li,3,4,"span",66)(6,si,3,4,"span",66)(7,ci,2,8,"span",67)(8,ui,3,1,"span",64)(9,di,3,4,"span",66)(10,hi,1,0,"span",64)(11,gi,2,1,"span",64),o()),r&2){let t,e=p().$implicit;c(),k((t=e)==="STT"?1:t==="madncc"?2:t==="sanpham"?3:t==="nhacungcap"?4:t==="ngaynhan"?5:t==="createdAt"?6:t==="status"?7:t==="isActive"?8:t==="updatedAt"?9:t==="action"?10:11)}}function fi(r,i){if(r&1&&(st(0,40),E(1,ii,3,1,"th",59)(2,_i,12,1,"td",60),ct()),r&2){let t=i.$implicit;h("matColumnDef",t)}}function xi(r,i){r&1&&b(0,"tr",71)}function Ci(r,i){if(r&1){let t=S();a(0,"tr",72),f("click",function(){let n=u(t).$implicit,s=p();return d(s.AddToEdit(n))}),o()}if(r&2){let t=i.$implicit,e=p();rt("hover:bg-slate-100 ",e.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function yi(r,i){r&1&&(a(0,"tr",73)(1,"td",74),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}function Ei(r,i){r&1&&(a(0,"mat-dialog-content")(1,"div",75)(2,"div",76),l(3,"X\xE1c Nh\u1EADn"),o(),a(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),a(6,"div",77)(7,"button",78),l(8,"\u0110\u1ED3ng \xDD"),o(),a(9,"button",79),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function Si(r,i){r&1&&(a(0,"mat-dialog-content")(1,"div",75)(2,"div",76),l(3,"X\xE1c Nh\u1EADn"),o(),a(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),a(6,"div",77)(7,"button",78),l(8,"\u0110\u1ED3ng \xDD"),o(),a(9,"button",79),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function wi(r,i){if(r&1){let t=S();l(0),a(1,"button",105),f("click",function(){u(t);let n=p().$implicit,s=p(2);return d(s.removeItemImport(n))}),a(2,"mat-icon"),l(3,"delete"),o()()}if(r&2){let t=p().index;C(" ",t+1," ")}}function Di(r,i){if(r&1&&(a(0,"mat-option",111),l(1),o()),r&2){let t=i.$implicit;h("value",t.id),c(),y(t.name)}}function vi(r,i){if(r&1){let t=S();a(0,"mat-form-field",30)(1,"mat-label"),l(2,"Nh\xE0 Cung C\u1EA5p"),o(),a(3,"mat-select",106),f("selectionChange",function(n){u(t);let s=p().$implicit,m=p(2);return d(m.SelectNhacungcap(s,n))}),a(4,"div",107)(5,"mat-form-field",108)(6,"input",109),f("input",function(n){u(t);let s=p().index,m=p(2);return d(m.DoFindNhacungcap(n,s))}),o()(),a(7,"div",110),N(8,Di,2,2,"mat-option",111,G),o()()()()}if(r&2){let t=p().index,e=p(2);c(8),A(e.FilterNhacungcap[t])}}function bi(r,i){if(r&1){let t=S();a(0,"mat-form-field",30)(1,"mat-label"),l(2,"Ng\xE0y Nh\u1EADn "),o(),a(3,"input",112),f("dateChange",function(n){u(t);let s=p().$implicit,m=p(2);return d(m.DoChonNgaynhan(n,s))}),o(),b(4,"mat-datepicker-toggle",37)(5,"mat-datepicker",null,11),o()}if(r&2){let t=w(6),e=p().index,n=p(2);c(3),h("ngModel",n.statusDetails[e]==null?null:n.statusDetails[e].ngaynhan)("matDatepicker",t),c(),h("for",t)}}function Mi(r,i){if(r&1&&(a(0,"tr")(1,"td",98),E(2,wi,4,1),o(),a(3,"td",99),E(4,vi,10,0,"mat-form-field",30),o(),a(5,"td",100),E(6,bi,7,3,"mat-form-field",30),o(),a(7,"td",101),l(8),o(),a(9,"td",101),l(10),o(),a(11,"td",102)(12,"span",103),l(13),o()(),a(14,"td",104),l(15),o()()),r&2){let t=i.$implicit;c(2),k(t.status==="Processed"?2:-1),c(2),k(t.status==="Processed"?4:-1),c(2),k(t.status==="Processed"?6:-1),c(2),y(t.fileName),c(2),y(t.tenkhongdau),c(2),h("ngClass",mt(8,qe,t.status==="Processed"||t.status==="Success",t.status==="Skipped")),c(),C(" ",t.status," "),c(2),y(t.message)}}function ki(r,i){if(r&1){let t=S();a(0,"h2",80),l(1,"Import \u0110\u1EB7t H\xE0ng"),o(),a(2,"mat-dialog-content",81)(3,"div",82)(4,"div",83)(5,"table",84)(6,"thead",85)(7,"tr")(8,"th",86),l(9," # "),o(),a(10,"th",87),l(11," Nh\xE0 Cung C\u1EA5p "),o(),a(12,"th",88),l(13," Ng\xE0y Nh\u1EADn "),a(14,"mat-form-field",50)(15,"mat-label"),l(16,"Ng\xE0y Nh\u1EADn All "),o(),a(17,"input",89),f("dateChange",function(n){u(t);let s=p();return d(s.DoChonNgaynhan(n,"All"))}),o(),b(18,"mat-datepicker-toggle",37)(19,"mat-datepicker",null,11),o()(),a(21,"th",90),l(22," File Name"),o(),a(23,"th",90),l(24," T\xEAn Kh\xF4ng D\u1EA5u"),o(),a(25,"th",91),l(26," Status"),o(),a(27,"th",92),l(28," Message"),o()()(),a(29,"tbody",93),E(30,Mi,16,11,"tr",94),o()()()()(),a(31,"mat-dialog-actions",95)(32,"button",96),l(33,"\u0110\xF3ng"),o(),a(34,"button",97),f("click",function(){u(t);let n=p();return d(n.DoImportNhacungcapCu())}),l(35,"C\u1EADp Nh\u1EADt"),o()()}if(r&2){let t=w(20),e=p();c(17),h("matDatepicker",t),c(),h("for",t),c(12),h("ngForOf",e.statusDetails)}}function Li(r,i){if(r&1&&(a(0,"mat-option",124),l(1),o()),r&2){let t=i.$implicit;h("value",t.makho),c(),Y(" ",t.makho," (",t.name,") ")}}function Ii(r,i){if(r&1&&(a(0,"mat-option",124),l(1),o()),r&2){let t=i.$implicit;h("value",t),c(),Y(" ",t.makho," (",t.name,") ")}}function Ti(r,i){if(r&1&&(a(0,"div",141)(1,"span",147),l(2),o(),a(3,"mat-chip",148),l(4),o()()),r&2){let t=p().$implicit,e=p(2);c(2),C("Excel: ",t.originalMakho,""),c(),h("color",e.getKhoMatchStatusColor(t.configOptions==null?null:t.configOptions.khoMatchStatus)),c(),C(" ",e.getKhoMatchStatusText(t.configOptions==null?null:t.configOptions.khoMatchStatus)," ")}}function Fi(r,i){if(r&1&&(a(0,"tr",146)(1,"td",149),l(2),o(),a(3,"td",150),l(4),o(),a(5,"td",149),l(6),o(),a(7,"td",149),l(8),o(),a(9,"td",151),l(10),o(),a(11,"td",149),l(12),o(),a(13,"td",149),l(14),o(),a(15,"td",152),l(16),o()()),r&2){let t=i.$implicit,e=i.$index;c(2),y(e+1),c(2),y((t.sanpham==null?null:t.sanpham.masp)||t.masp||"N/A"),c(2),y((t.sanpham==null?null:t.sanpham.title)||t.title||"N/A"),c(2),y((t.sanpham==null?null:t.sanpham.dvt)||t.dvt||""),c(2),y(t.sldat||0),c(2),y(t.slgiao||0),c(2),y(t.slnhan||0),c(2),y(t.ghichu||"")}}function Ni(r,i){r&1&&(a(0,"tr")(1,"td",153),l(2,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m"),o()())}function Ai(r,i){if(r&1){let t=S();a(0,"div",127)(1,"div",134)(2,"div",135)(3,"mat-checkbox",136),T("ngModelChange",function(n){let s=u(t).$implicit;return I(s.configOptions.confirmed,n)||(s.configOptions.confirmed=n),d(n)}),f("change",function(){let n=u(t).$implicit,s=p(2);return d(s.toggleOrderConfirmation(n))}),o(),a(4,"div")(5,"h3",137),l(6),o(),a(7,"p",131),l(8),o()()(),a(9,"button",138),f("click",function(){let n=u(t).$implicit,s=p(2);return d(s.removeOrderFromImport(n))}),a(10,"mat-icon"),l(11,"delete"),o()()(),a(12,"div",139)(13,"mat-form-field",50)(14,"mat-label"),l(15,"Ng\xE0y nh\u1EADn"),o(),a(16,"input",121),T("ngModelChange",function(n){let s=u(t).$implicit;return I(s.configOptions.selectedDate,n)||(s.configOptions.selectedDate=n),d(n)}),f("dateChange",function(n){let s=u(t).$implicit,m=p(2);return d(m.updateOrderDate(s,n.value))}),o(),b(17,"mat-datepicker-toggle",37)(18,"mat-datepicker",null,13),o(),a(20,"div",140)(21,"mat-form-field",50)(22,"mat-label"),l(23,"Kho"),o(),a(24,"mat-select",123),T("ngModelChange",function(n){let s=u(t).$implicit;return I(s.khoSelected,n)||(s.khoSelected=n),d(n)}),f("selectionChange",function(n){let s=u(t).$implicit,m=p(2);return d(m.updateOrderKhoSelection(s,n.value))}),N(25,Ii,2,3,"mat-option",124,G),o()(),E(27,Ti,5,3,"div",141),o()(),a(28,"div",83)(29,"table",142)(30,"thead",143)(31,"tr")(32,"th",144),l(33,"STT"),o(),a(34,"th",144),l(35,"M\xE3 SP"),o(),a(36,"th",144),l(37,"T\xEAn s\u1EA3n ph\u1EA9m"),o(),a(38,"th",144),l(39,"\u0110VT"),o(),a(40,"th",144),l(41,"SL \u0110\u1EB7t"),o(),a(42,"th",144),l(43,"SL Giao"),o(),a(44,"th",144),l(45,"SL Nh\u1EADn"),o(),a(46,"th",144),l(47,"Ghi ch\xFA"),o()()(),a(48,"tbody",145),N(49,Fi,17,8,"tr",146,Je,!1,Ni,3,0,"tr"),o()()()()}if(r&2){let t=i.$implicit,e=w(19),n=p(2);h("ngClass",t.configOptions!=null&&t.configOptions.confirmed?"border-green-500 bg-green-50":"border-gray-300"),c(3),L("ngModel",t.configOptions.confirmed),c(3),C("",(t.summary==null?null:t.summary.supplierName)||(t.nhacungcap==null?null:t.nhacungcap.name)||"N/A"," "),c(2),Z(" M\xE3 NCC: ",(t.summary==null?null:t.summary.supplierCode)||(t.nhacungcap==null?null:t.nhacungcap.mancc)||"N/A"," | ",(t.summary==null?null:t.summary.totalProducts)||(t.sanpham==null?null:t.sanpham.length)||0," s\u1EA3n ph\u1EA9m | T\u1ED5ng SL: ",(t.summary==null?null:t.summary.totalQuantity)||n.getTotalQuantity(t)," "),c(8),h("matDatepicker",e),L("ngModel",t.configOptions.selectedDate),c(),h("for",e),c(7),L("ngModel",t.khoSelected),c(),A(n.ImportConfig.ListKho),c(2),k(t.originalMakho?27:-1),c(22),A(t.sanpham)}}function Vi(r,i){r&1&&(a(0,"div",128)(1,"div",154),l(2,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 import"),o(),a(3,"div",155),l(4,"Vui l\xF2ng ch\u1ECDn file Excel h\u1EE3p l\u1EC7"),o()())}function Oi(r,i){if(r&1){let t=S();a(0,"h2",113)(1,"span"),l(2,"Import \u0110\u1EB7t H\xE0ng t\u1EEB Excel"),o(),a(3,"div",114)(4,"span"),l(5),o(),a(6,"span",115),l(7),o()()(),a(8,"mat-dialog-content",116)(9,"div",117)(10,"div",118)(11,"div",119)(12,"mat-form-field",120)(13,"mat-label"),l(14,"Ng\xE0y nh\u1EADn (T\u1EA5t c\u1EA3)"),o(),a(15,"input",121),T("ngModelChange",function(n){u(t);let s=p();return I(s.ImportConfig.selectedDate,n)||(s.ImportConfig.selectedDate=n),d(n)}),f("dateChange",function(n){u(t);let s=p();return d(s.updateAllOrdersDate(n.value))}),o(),b(16,"mat-datepicker-toggle",37)(17,"mat-datepicker",null,12),o(),a(19,"mat-form-field",122)(20,"mat-label"),l(21,"Kho (T\u1EA5t c\u1EA3)"),o(),a(22,"mat-select",123),T("ngModelChange",function(n){u(t);let s=p();return I(s.ImportConfig.selectedKho,n)||(s.ImportConfig.selectedKho=n),d(n)}),f("selectionChange",function(n){u(t);let s=p();return d(s.updateAllOrdersKho(n.value))}),N(23,Li,2,3,"mat-option",124,G),o()(),a(25,"button",97),f("click",function(){u(t);let n=p();return d(n.toggleAllOrdersConfirmation())}),a(26,"mat-icon"),l(27),o(),l(28),o()()(),a(29,"div",125)(30,"div",126),N(31,Ai,52,12,"div",127,G),o(),E(33,Vi,5,0,"div",128),o()()(),a(34,"mat-dialog-actions",129)(35,"div",130)(36,"div",131),l(37),o(),a(38,"div",132)(39,"button",79),l(40,"\u0110\xF3ng"),o(),a(41,"button",133),f("click",function(){u(t);let n=p();return d(n.ImportConfirmedDathang())}),l(42),o()()()()}if(r&2){let t=w(18),e=p();c(5),C("",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng"),c(2),C("",e.getConfirmedOrdersCount()," \u0111\xE3 x\xE1c nh\u1EADn"),c(8),h("matDatepicker",t),L("ngModel",e.ImportConfig.selectedDate),c(),h("for",t),c(6),L("ngModel",e.ImportConfig.selectedKho),c(),A(e.ImportConfig.ListKho),c(4),y(e.getConfirmedOrdersCount()===e.ListImportExcel.length?"check_box":"check_box_outline_blank"),c(),C(" ",e.getConfirmedOrdersCount()===e.ListImportExcel.length?"B\u1ECF ch\u1ECDn t\u1EA5t c\u1EA3":"Ch\u1ECDn t\u1EA5t c\u1EA3"," "),c(3),A(e.ListImportExcel),c(2),k(e.ListImportExcel.length===0?33:-1),c(),h("align","end"),c(3),Y(" \u0110\xE3 ch\u1ECDn ",e.getConfirmedOrdersCount()," / ",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng "),c(4),h("disabled",e.getConfirmedOrdersCount()===0),c(),C(" Import ",e.getConfirmedOrdersCount()," \u0111\u01A1n h\xE0ng ")}}var V=class V{Detail={};displayedColumns=["STT","madncc","nhacungcap","sanpham","ngaynhan","status","ghichu","createdAt","updatedAt"];ColumnName={STT:"STT",madncc:"M\xE3 \u0110\u01A1n Nh\u1EADp",nhacungcap:"Nh\xE0 Cung C\u1EA5p",sanpham:"S\u1EA3n Ph\u1EA9m",ngaynhan:"Ng\xE0y Nh\u1EADn",status:"Tr\u1EA1ng Th\xE1i",ghichu:"Ghi Ch\xFA",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt"};FilterColumns=JSON.parse(localStorage.getItem("DathangColFilter")||"[]");Columns=[];isFilter=!1;Trangthaidon=Be;paginator;sort;drawer;dialogImportExcel;dialogImportExcelCu;filterValues={};_DathangService=D(Ve);_breakpointObserver=D(yt);_NhacungcapService=D(Oe);_SanphamService=D(Pe);_BanggiaService=D(Ae);_KhoService=D(Ke);_router=D(Ct);_timezoneService=D(Ne);Listdathang=this._DathangService.ListDathang;page=this._DathangService.page;pageCount=this._DathangService.pageCount;total=this._DathangService.total;pageSize=this._DathangService.pageSize;dathangId=this._DathangService.dathangId;dataSource=new tt([]);_snackBar=D(Mt);CountItem=0;suppliers=[];dialog=D(Yt);ListImportExcel=[];searchParam={Batdau:(0,H.default)().toDate(),Ketthuc:(0,H.default)().toDate(),page:this.page(),pageSize:this.pageSize()};totalItems=0;constructor(){ut(()=>M(this,null,function*(){this.dataSource.data=this.Listdathang(),this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page()-1,this.paginator.pageSize=this.pageSize(),this.paginator.length=this.total())}))}createFilter(){return(i,t)=>{let e=JSON.parse(t),n=!0;return this.displayedColumns.forEach(s=>{if(e[s]){let m=i[s]?i[s].toString().toLowerCase():"";n=n&&m.includes(e[s].toLowerCase())}}),n}}onPageSizeChange(i,t){i>this.total()&&(this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.total()}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),i=this.total()),this._DathangService.page.set(1),this._DathangService.getDathangBy(this.searchParam),t.closeMenu()}onPreviousPage(){this.page()>1&&(this._DathangService.page.set(this.page()-1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onNextPage(){this.page()<this.pageCount()&&(this._DathangService.page.set(this.page()+1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onDateChange(){this.ngOnInit()}ngOnInit(){return M(this,null,function*(){yield this._DathangService.getDathangBy(this.searchParam),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new tt(this.Listdathang()),this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer(),yield this._NhacungcapService.getAllNhacungcap(),this.FilterNhacungcap=Array(20).fill(null).map(()=>this._NhacungcapService.ListNhacungcap()),yield this._KhoService.getAllKho(),this.ImportConfig.ListKho=this._KhoService.ListKho(),this.FilterKho=Array(20).fill(null).map(()=>this._KhoService.ListKho())})}initializeColumns(){this.Columns=Object.entries(this.ColumnName).map(([i,t])=>({key:i,value:t,isShow:!0})),this.FilterColumns=this.FilterColumns.length?this.FilterColumns:this.Columns,localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,{key:t,value:e,isShow:n})=>n?at(nt({},i),{[t]:e}):i,{})}applyFilter(i){let t=i.target.value;if(!t){this.searchParam={page:this.page(),pageSize:this.pageSize()},this._DathangService.getDathangBy(this.searchParam);return}this.searchParam.subtitle=t.trim().toLowerCase(),this._DathangService.getDathangBy(this.searchParam)}setupDrawer(){this._breakpointObserver.observe([Et.Handset]).subscribe(i=>{i.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(i){let t=this.FilterColumns.find(e=>e.key===i.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(i,t){return i.filter((n,s,m)=>s===m.findIndex(g=>g[t]===n[t]))}doFilterHederColumn(i,t){this.dataSource.filteredData=this.Listdathang().filter(e=>e[t].toLowerCase().includes(i.target.value.toLowerCase()))}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,t)=>(t.isShow&&(i[t.key]=t.value),i),{}),localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let t=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(e=>e.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/dathang","new"])}goToDetail(i){this._DathangService.setDathangId(i.id),this.drawer.open(),this._router.navigate(["admin/dathang",i.id])}UpdateDathang(i){i.status="dagiao",this._DathangService.updateDathang(i).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ExportExcel(){return M(this,null,function*(){this.searchParam.pageSize=99999,yield this._DathangService.getDathangBy(this.searchParam);let i=this.Listdathang(),t=`Danh S\xE1ch \u0110\u1EB7t H\xE0ng ${this._timezoneService.formatForDisplay(new Date,"DD-MM-YYYY")}`;yield this._NhacungcapService.getAllNhacungcap(),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._BanggiaService.getAllBanggia();let e=Array.isArray(i)&&i.length>0?i.flatMap(n=>Array.isArray(n.sanpham)?n.sanpham.map(s=>({ngaynhan:this._timezoneService.formatForDisplay(n.ngaynhan,"DD/MM/YYYY"),mancc:n.nhacungcap?.mancc,name:n.nhacungcap?.name,masp:s?.sanpham?.masp,tensp:s?.sanpham?.title,sldat:Number(s?.sldat)||0,slgiao:Number(s?.slgiao)||0,slnhan:Number(s?.slnhan)||0,ghichu:s?.ghichu,makho:n?.kho?.makho})):[]):[{ngaynhan:this._timezoneService.nowLocal("DD/MM/YYYY"),mancc:"",name:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:"",makho:""}];console.log(e),console.log(this.Listdathang()),ke(e,t)})}EditList=[];AddToEdit(i){this.EditList.find(e=>e.id===i.id)?this.EditList=this.EditList.filter(e=>e.id!==i.id):this.EditList.push(i)}CheckItemInEdit(i){return this.EditList.some(t=>t.id===i.id)}DoDanhan(){Promise.all(this.EditList.map(i=>(i.status="danhan",this._DathangService.updateDathang(i)))).then(()=>{this.EditList=[],this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}dialogCreateRef;openDeleteDialog(i,t){this.dialog.open(i,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(n=>M(this,null,function*(){if(n=="true"){if(t){yield this._DathangService.DeleteDathang(t);return}this.DeleteListItem()}}))}openDathangDialog(i){this.dialog.open(i,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(e=>M(this,null,function*(){e=="true"}))}DeleteListItem(){return M(this,null,function*(){if(!this.EditList?.length){this._snackBar.open("Kh\xF4ng c\xF3 m\u1EE5c n\xE0o \u0111\u01B0\u1EE3c ch\u1ECDn \u0111\u1EC3 x\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}try{let i=yield this._DathangService.DeleteBulkDathang(this.EditList.map(t=>t.id));this._snackBar.open(`X\xF3a th\xE0nh c\xF4ng ${i.success} \u0111\u1EB7t h\xE0ng ${i.fail} l\u1ED7i`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(i){console.error("L\u1ED7i khi x\xF3a \u0111\u1EB7t h\xE0ng:",i),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a \u0111\u1EB7t h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.EditList=[],yield this.ngOnInit()}})}statusDetails=[];ListImportData=[];FilterNhacungcap=[];FilterKho=[];ImportConfig={selectedDate:new Date,selectedKho:"",ListKho:[]};ImporExcel(i){return M(this,null,function*(){let t=Array.from(i.target.files),e=0,n=0,s=0;this.ListImportData=[],this.statusDetails=[],this.ListImportExcel=[],yield this._NhacungcapService.getAllNhacungcap({pageSize:99999}),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._KhoService.getAllKho();for(let m=0;m<t.length;m++){let g=t[m];try{let _=yield Le(g);console.log("Excel data:",_);let O=_.Sheet1||_.dathang;if(O&&O.length>0){let F=this.processImportData(O,g.name);F.length>0?(this.ListImportExcel.push(...F),e++):n++}else n++,this.statusDetails.push({fileName:g.name,status:"Skipped",message:"No valid data found in Sheet1 or dathang sheet"})}catch(_){console.error("Error processing file:",_),s++,this.statusDetails.push({fileName:g.name,status:"Error",message:_.message})}}this.ListImportExcel.length>0?(this.ImportConfig.selectedDate=new Date,this.setDefaultKhoForOrders(),this.dialog.open(this.dialogImportExcel,{width:"95vw",maxWidth:"1400px",height:"95vh",disableClose:!0})):this.dialog.open(this.dialogImportExcelCu,{width:"90vw",maxWidth:"1200px",height:"90vh"}),this._snackBar.open(`X\u1EED l\xFD ${t.length} file: ${e} th\xE0nh c\xF4ng, ${n} b\u1ECF qua, ${s} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),i.target.value=""})}processImportData(i,t){let e=this._NhacungcapService.ListNhacungcap(),n=this._SanphamService.ListSanpham(),s=this._KhoService.ListKho(),m=[];try{let g={};for(let _ of i)!_.mancc||!_.masp||(g[_.mancc]||(g[_.mancc]=[]),g[_.mancc].push(_));for(let[_,O]of Object.entries(g)){let F=e.find(x=>x.mancc===_);if(!F){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y nh\xE0 cung c\u1EA5p: ${_}`,mancc:_});continue}let $=[],ze=!1;for(let x of O){let v=n.find(J=>J.masp===x.masp);if(!v){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y s\u1EA3n ph\u1EA9m: ${x.masp}`,mancc:_,masp:x.masp}),ze=!0;continue}$.push({sanpham:{id:v.id,masp:v.masp,title:v.title,dvt:v.dvt||""},sldat:Number(x.sldat)||0,slgiao:Number(x.sldat)||0,slnhan:Number(x.sldat)||0,ghichu:x.ghichu||"",originalData:x}),this.statusDetails.push({fileName:t,status:"Processed",message:`\u0110\xE3 x\u1EED l\xFD: ${v.title} - SL: ${x.sldat}`,mancc:_,masp:x.masp})}if($.length>0){let x=O[0],v=new Date;if(x.ngaynhan)try{let[z,U,Ye]=x.ngaynhan.split("/");v=(0,H.default)(`${Ye}-${U}-${z}`,"YYYY-MM-DD").toDate()}catch(z){console.warn("Error parsing date, using current date:",z)}let J={id:`temp_${_}_${Date.now()}`,title:`\u0110\u01A1n h\xE0ng ${x.ngaynhan||this._timezoneService.nowLocal("DD/MM/YYYY")} - ${F.name}`,ngaynhan:v,nhacungcapId:F.id,nhacungcap:F,makho:this.autoSelectKho(x.makho,s),khoSelected:this.getKhoByMakho(x.makho,s),originalMakho:x.makho||"",status:"dadat",sanpham:$,ghichu:"",fileName:t,configOptions:{canChangeDate:!0,canChangeKho:!0,selectedDate:v,selectedKho:this.autoSelectKho(x.makho,s),confirmed:!1,khoMatchStatus:this.getKhoMatchStatus(x.makho,s)},summary:{totalProducts:$.length,totalQuantity:$.reduce((z,U)=>z+U.sldat,0),supplierCode:_,supplierName:F.name}};m.push(J)}}}catch(g){console.error("Error processing import data:",g),this.statusDetails.push({fileName:t,status:"Error",message:g.message})}return m}generateOrderCode(i){let t=this._timezoneService.formatForDisplay(new Date,"YYYYMMDD"),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`DH${i}-${t}-${e}`}updateOrderDate(i,t){i.ngaynhan=t,i.configOptions.selectedDate=t,i.title=`\u0110\u01A1n h\xE0ng ${this._timezoneService.formatForDisplay(t,"DD/MM/YYYY")} - ${i.nhacungcap.name}`}updateOrderKho(i,t){i.makho=t,i.configOptions.selectedKho=t}updateOrderKhoSelection(i,t){i.makho=t.makho,i.khoSelected=t,i.configOptions.selectedKho=t.makho,i.configOptions.khoMatchStatus="manual"}updateAllOrdersDate(i){this.ImportConfig.selectedDate=i,this.ListImportExcel.forEach(t=>{this.updateOrderDate(t,i)})}updateAllOrdersKho(i){this.ImportConfig.selectedKho=i;let t=this.ImportConfig.ListKho.find(e=>e.makho===i);this.ListImportExcel.forEach(e=>{t&&this.updateOrderKhoSelection(e,t)})}toggleOrderConfirmation(i){i.configOptions.confirmed=!i.configOptions.confirmed}toggleAllOrdersConfirmation(){let i=this.ListImportExcel.every(t=>t.configOptions.confirmed);this.ListImportExcel.forEach(t=>{t.configOptions.confirmed=!i})}getConfirmedOrdersCount(){return this.ListImportExcel.filter(i=>i.configOptions.confirmed).length}getKhoMatchStatusText(i){switch(i){case"exact":return"Kh\u1EDBp ch\xEDnh x\xE1c";case"partial":return"Kh\u1EDBp m\u1ED9t ph\u1EA7n";case"name":return"Kh\u1EDBp theo t\xEAn";case"default":return"M\u1EB7c \u0111\u1ECBnh";case"manual":return"\u0110\xE3 ch\u1EC9nh s\u1EEDa";default:return"Kh\xF4ng t\xECm th\u1EA5y"}}getKhoMatchStatusColor(i){switch(i){case"exact":return"success";case"partial":return"warn";case"name":return"accent";case"manual":return"primary";default:return"warn"}}ImportConfirmedDathang(){return M(this,null,function*(){let i=this.ListImportExcel.filter(t=>t.configOptions.confirmed);if(i.length===0){this._snackBar.open("Vui l\xF2ng x\xE1c nh\u1EADn \xEDt nh\u1EA5t m\u1ED9t \u0111\u01A1n h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}yield this._KhoService.getAllKho();try{let t=i.map(n=>{let s=this._KhoService.ListKho().find(g=>g.makho===n.makho),m=this.mergeProductsByMasp(n.sanpham);return{ngaynhan:(0,H.default)(n.ngaynhan).format("YYYY-MM-DD"),mancc:n?.nhacungcap.mancc,makho:n.makho,khoId:s?.id,status:n.status,sanpham:m.map(g=>({masp:g.masp,sldat:Number(g.sldat),slgiao:Number(g.slgiao),slnhan:Number(g.slnhan),ghichu:g.ghichu})),ghichu:n.ghichu}}),e=yield this._DathangService.ImportDathang(t);this._snackBar.open(`Import th\xE0nh c\xF4ng: ${e.success} \u0111\u01A1n h\xE0ng, ${e.fail} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.dialog.closeAll(),yield this.ngOnInit()}catch(t){console.error("L\u1ED7i khi import \u0111\u1EB7t h\xE0ng:",t),this._snackBar.open(`L\u1ED7i khi import: ${t.message}`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}removeOrderFromImport(i){this.ListImportExcel=this.ListImportExcel.filter(t=>t.id!==i.id),this.ListImportExcel.length===0&&this.dialog.closeAll()}DoChonNgaynhan(i,t){let e=i.value;t&&t!=="All"?t.ngaynhan=this._timezoneService.formatForDisplay(e,"YYYY-MM-DD"):this.ListImportExcel.forEach(n=>{n.details?.forEach(s=>{s.ngaynhan=this._timezoneService.formatForDisplay(e,"YYYY-MM-DD")})})}removeItemImport(i){this.ListImportExcel.forEach(t=>{t.details&&(t.details=t.details.filter(e=>e!==i))}),this.ListImportExcel=this.ListImportExcel.filter(t=>t.details&&t.details.length>0)}SelectNhacungcap(i,t){let e=t.value;i.nhacungcap=e,i.manhacungcap=e?.id||e?.manhacungcap}DoFindNhacungcap(i,t){let e=i.target.value.toLowerCase();this.suppliers=this.suppliers.filter(n=>n.name?.toLowerCase().includes(e)||n.manhacungcap?.toLowerCase().includes(e))}DoImportNhacungcapCu(){this.ImportConfirmedDathang()}mergeProductsByMasp(i){let t=new Map;return i.forEach(e=>{let n=e.sanpham?.masp||e.masp;if(t.has(n)){let s=t.get(n);s.sldat=(Number(s.sldat)||0)+(Number(e.sldat)||0),s.slgiao=(Number(s.slgiao)||0)+(Number(e.slgiao)||0),s.slnhan=(Number(s.slnhan)||0)+(Number(e.slnhan)||0);let m=s.ghichu||"",g=e.ghichu||"";g&&m!==g&&(s.ghichu=m?`${m}; ${g}`:g)}else t.set(n,{masp:n,sanpham:e.sanpham||{masp:n},sldat:Number(e.sldat)||0,slgiao:Number(e.slgiao)||0,slnhan:Number(e.slnhan)||0,ghichu:e.ghichu||"",title:e.sanpham?.title||e.title||"",dvt:e.sanpham?.dvt||e.dvt||""})}),Array.from(t.values())}getTotalQuantity(i){return!i.details||!Array.isArray(i.details)?0:i.details.reduce((t,e)=>t+(parseFloat(e.soluong||"0")||0),0)}autoSelectKho(i,t){if(!i||!t?.length)return t?.[0]?.makho||"";let e=t.find(m=>m.makho===i);if(e)return e.makho;let n=t.find(m=>m.makho?.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(m.makho?.toLowerCase()));if(n)return n.makho;let s=t.find(m=>m.name?.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(m.name?.toLowerCase()));return s?s.makho:t[0]?.makho||""}getKhoByMakho(i,t){let e=this.autoSelectKho(i,t);return t.find(n=>n.makho===e)||t[0]||null}getKhoMatchStatus(i,t){return!i||!t?.length?t?.length?"default":"none":t.find(e=>e.makho===i)?"exact":t.find(e=>e.makho?.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(e.makho?.toLowerCase()))?"partial":t.find(e=>e.name?.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(e.name?.toLowerCase()))?"name":"default"}setDefaultKhoForOrders(){let i=this.ImportConfig.ListKho?.[0];i&&this.ListImportExcel.forEach(t=>{!t.khoSelected&&t.configOptions.khoMatchStatus==="default"&&(t.khoSelected=i,t.makho=i.makho,t.configOptions.selectedKho=i.makho)})}getOrdersStatistics(){let i=this.ListImportExcel.length,t=this.getConfirmedOrdersCount(),e=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="exact").length,n=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="partial").length,s=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="name").length,m=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="default").length,g=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="manual").length;return{total:i,confirmed:t,exactMatch:e,partialMatch:n,nameMatch:s,defaultMatch:m,manualMatch:g}}static \u0275fac=function(t){return new(t||V)};static \u0275cmp=ot({type:V,selectors:[["app-listdathang"]],viewQuery:function(t,e){if(t&1&&(P(ue,5),P(q,5),P(We,7),P(Qe,5),P(je,5)),t&2){let n;K(n=B())&&(e.paginator=n.first),K(n=B())&&(e.sort=n.first),K(n=B())&&(e.drawer=n.first),K(n=B())&&(e.dialogImportExcel=n.first),K(n=B())&&(e.dialogImportExcelCu=n.first)}},decls:104,vars:32,consts:[["drawer",""],["uploadfile",""],["menu","matMenu"],["pickerBatdau",""],["pickerKetthuc",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["DathangDialog",""],["dialogImportExcelCu",""],["dialogImportExcel",""],["picker",""],["globalDatePicker",""],["orderDatePicker",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["multiple","","type","file",1,"hidden",3,"change"],["mat-icon-button","","color","primary",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[3,"appearance","subscriptSizing"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click",4,"ngIf"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["mat-dialog-title",""],[1,"mat-typography"],[1,"w-full"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","shadow-md","rounded-lg"],[1,"bg-gray-50"],[1,"w-16","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"min-w-[350px]","px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-48","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["matInput","",3,"dateChange","matDatepicker"],[1,"w-40","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-24","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-32","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],["align","end"],["mat-flat-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"click"],[1,"w-16","px-4","py-4","whitespace-nowrap","text-gray-900","items-center"],[1,"min-w-[350px]","px-6","py-4","whitespace-nowrap","text-gray-900"],[1,"w-48","px-4","py-4","whitespace-nowrap","text-gray-900"],[1,"w-40","px-4","py-4","whitespace-nowrap","text-sm","text-gray-900","truncate"],[1,"w-24","px-4","py-4","whitespace-nowrap","text-sm"],[3,"ngClass"],[1,"w-32","px-4","py-4","whitespace-nowrap","text-sm","text-gray-500","truncate"],["mat-icon-button","","color","warn",3,"click"],[3,"selectionChange"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[1,"!whitespace-normal","!h-auto","!py-2",3,"value"],["matInput","",3,"dateChange","ngModel","matDatepicker"],["mat-dialog-title","",1,"flex","items-center","justify-between"],[1,"text-sm","font-normal","text-gray-600","flex","items-center","gap-4"],[1,"text-green-600"],[1,"!max-h-[90vh]","h-[90vh]","!p-0"],[1,"h-full","flex","flex-col"],[1,"border-b","p-4","bg-gray-50"],[1,"flex","flex-wrap","gap-4","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[200px]"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[250px]"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex-1","overflow-auto","p-4"],[1,"grid","gap-4"],[1,"border","rounded-lg","p-4",3,"ngClass"],[1,"text-center","py-8"],[1,"border-t","p-4",3,"align"],[1,"flex","items-center","justify-between","w-full"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[3,"ngModelChange","change","ngModel"],[1,"font-semibold","text-lg"],["mat-icon-button","","color","warn","matTooltip","X\xF3a \u0111\u01A1n h\xE0ng n\xE0y",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","gap-2","text-xs"],[1,"min-w-full","border","border-gray-200","text-sm"],[1,"bg-gray-100"],[1,"px-3","py-2","text-left","font-medium","text-gray-700"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"text-gray-600"],[1,"!text-xs","!py-0","!px-2","!min-h-[20px]",3,"color"],[1,"px-3","py-2"],[1,"px-3","py-2","font-mono"],[1,"px-3","py-2","font-semibold","text-blue-600"],[1,"px-3","py-2","text-gray-600"],["colspan","8",1,"px-3","py-4","text-center","text-gray-500"],[1,"text-gray-500","text-lg","mb-2"],[1,"text-gray-400"]],template:function(t,e){if(t&1){let n=S();a(0,"mat-drawer-container",14)(1,"mat-drawer",15,0),b(3,"router-outlet"),o(),a(4,"div",16)(5,"div",17)(6,"div",18)(7,"div",19)(8,"input",20),f("keyup",function(m){return u(n),d(e.applyFilter(m))}),o(),a(9,"div",21)(10,"span",22),l(11,"search"),o()()(),a(12,"button",23),f("click",function(){return u(n),d(e.create())}),a(13,"mat-icon"),l(14,"add_circle"),o(),a(15,"span",24),l(16,"T\u1EA1o M\u1EDBi"),o()(),a(17,"div",18)(18,"button",25),f("click",function(){u(n);let m=w(22);return d(m.click())}),a(19,"mat-icon"),l(20,"file_upload"),o()(),a(21,"input",26,1),f("change",function(m){return u(n),d(e.ImporExcel(m))}),o(),a(23,"button",27),f("click",function(){return u(n),d(e.ExportExcel())}),a(24,"mat-icon"),l(25,"download"),o()(),a(26,"button",28)(27,"mat-icon"),l(28,"tune"),o()(),a(29,"mat-menu",null,2)(31,"div",29)(32,"mat-form-field",30)(33,"input",31),f("input",function(m){return u(n),d(e.doFilterColumns(m))})("click",function(m){return u(n),d(m.stopPropagation())}),o(),a(34,"mat-icon",32),l(35,"search"),o()()(),a(36,"div",33),N(37,Ue,5,2,"button",34,Ge),o()()(),E(39,ei,2,2),o()(),a(40,"div",18)(41,"mat-form-field",35)(42,"mat-label"),l(43,"B\u1EAFt \u0110\u1EA7u"),o(),a(44,"input",36),T("ngModelChange",function(m){return u(n),I(e.searchParam.Batdau,m)||(e.searchParam.Batdau=m),d(m)}),o(),b(45,"mat-datepicker-toggle",37)(46,"mat-datepicker",null,3),o(),a(48,"mat-form-field",35)(49,"mat-label"),l(50,"K\u1EBFt Th\xFAc"),o(),a(51,"input",36),T("ngModelChange",function(m){return u(n),I(e.searchParam.Ketthuc,m)||(e.searchParam.Ketthuc=m),d(m)}),o(),b(52,"mat-datepicker-toggle",37)(53,"mat-datepicker",null,4),o(),a(55,"button",27),f("click",function(){return u(n),d(e.onDateChange())}),a(56,"mat-icon"),l(57,"search"),o()()(),a(58,"div",38)(59,"table",39),N(60,fi,3,1,"ng-container",40,lt),E(62,xi,1,0,"tr",41)(63,Ci,1,3,"tr",42)(64,yi,3,0,"tr",43),o()(),a(65,"div",44)(66,"div",45)(67,"span",46),l(68,"\u0110ang Xem "),a(69,"strong"),l(70),o(),l(71," - "),a(72,"strong"),l(73),o(),l(74),o(),a(75,"div",47)(76,"span",48,5),l(78),o(),a(79,"mat-menu",null,6)(81,"div",49),f("click",function(m){return u(n),d(m.stopPropagation())}),a(82,"mat-form-field",50)(83,"mat-label"),l(84,"S\u1ED1 l\u01B0\u1EE3ng"),o(),a(85,"input",51),T("ngModelChange",function(m){return u(n),I(e.pageSize,m)||(e.pageSize=m),d(m)}),o()(),a(86,"button",27),f("click",function(){u(n);let m=w(77);return d(e.onPageSizeChange(e.pageSize(),m))}),a(87,"mat-icon"),l(88,"published_with_changes"),o()()()(),a(89,"div",52)(90,"button",53),f("click",function(){return u(n),d(e.onPreviousPage())}),a(91,"mat-icon"),l(92,"keyboard_arrow_left"),o()(),a(93,"button",53),f("click",function(){return u(n),d(e.onNextPage())}),a(94,"mat-icon"),l(95,"keyboard_arrow_right"),o()()()()()()()(),E(96,Ei,11,0,"ng-template",null,7,R)(98,Si,11,0,"ng-template",null,8,R)(100,ki,36,3,"ng-template",null,9,R)(102,Oi,43,14,"ng-template",null,10,R)}if(t&2){let n=w(30),s=w(47),m=w(54),g=w(80);c(),h("position","end"),c(25),h("matMenuTriggerFor",n),c(11),A(e.FilterColumns),c(2),k(e.EditList.length>0?39:-1),c(2),h("appearance","outline")("subscriptSizing","dynamic"),c(3),h("matDatepicker",s),L("ngModel",e.searchParam.Batdau),h("ngModelOptions",Q(29,it)),c(),h("for",s),c(3),h("appearance","outline")("subscriptSizing","dynamic"),c(3),h("matDatepicker",m),L("ngModel",e.searchParam.Ketthuc),h("ngModelOptions",Q(30,it)),c(),h("for",m),c(7),h("dataSource",e.dataSource),c(),A(e.displayedColumns),c(2),h("matHeaderRowDef",e.displayedColumns),c(),h("matRowDefColumns",e.displayedColumns),c(7),y((e.page()-1)*e.pageSize()+1),c(3),y(e.page()*e.pageSize()>e.total()?e.total():e.page()*e.pageSize()),c(),Z(" trong s\u1ED1 ",e.total()," m\u1EE5c, ",e.page(),"/",e.pageCount()," Trang"),c(2),h("matMenuTriggerFor",g),c(2),C("Hi\u1EC7n Th\u1ECB : ",e.pageSize()," m\u1EE5c"),c(7),L("ngModel",e.pageSize),h("ngModelOptions",Q(31,it)),c(5),h("disabled",e.page()===1),c(3),h("disabled",e.page()===e.pageCount())}},dependencies:[Ut,Jt,Xt,qt,Gt,te,Zt,Me,_e,xe,Se,Ce,fe,we,ye,Ee,De,ve,be,ge,q,he,de,Ot,At,Nt,Vt,It,kt,Lt,xt,Ft,Tt,bt,Dt,vt,ie,ee,wt,ft,dt,ht,gt,_t,zt,Kt,Bt,$t,pe,me,ae,ne,se,oe,re,le,St,jt,Rt,Ht,Qt,Wt,Pt,ce,Fe,Te],encapsulation:2,changeDetection:0})};W([et(500)],V.prototype,"applyFilter",1),W([Ie()],V.prototype,"FilterHederColumn",1),W([et(300)],V.prototype,"doFilterHederColumn",1);var $e=V;export{$e as a};
