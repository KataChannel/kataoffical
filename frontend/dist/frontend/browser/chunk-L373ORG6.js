import{a as He}from"./chunk-JYDSESM7.js";import{a as Ye}from"./chunk-VTCQHFRM.js";import{a as Re}from"./chunk-MAOVLIWQ.js";import{a as ze}from"./chunk-H6LJHFTW.js";import{a as Ne,b as rt}from"./chunk-NULFSBS2.js";import{a as Te,b as Ie}from"./chunk-65HCGQ2R.js";import{a as Z,b as Pe,c as Fe}from"./chunk-MOEEJ3PY.js";import{b as Ae,h as Ve}from"./chunk-N62VL4FK.js";import{a as Be}from"./chunk-3AFBHXH6.js";import{a as $e}from"./chunk-DRPH4QS3.js";import{a as Ke}from"./chunk-VYDSVYRU.js";import{a as Oe}from"./chunk-6WUPS4UK.js";import{a as Qe}from"./chunk-JNVUT6FC.js";import{a as It,b as Pt,c as Ft}from"./chunk-KXVHPTGE.js";import{a as Nt,b as Ot,c as Bt,d as Kt}from"./chunk-54NKCXFK.js";import{b as Et,c as St}from"./chunk-PWU56VV4.js";import{b as ue}from"./chunk-55FEK267.js";import{k as Le,n as U}from"./chunk-ZUE3IRRM.js";import{c as Wt,d as jt,e as Xt,f as Qt,g as qt,h as Gt}from"./chunk-OX3TZWZA.js";import{a as Tt}from"./chunk-VXBHOSYZ.js";import{a as se,b as ce,c as me,k as pe}from"./chunk-YSNYL5AM.js";import{a as re,b as le}from"./chunk-BWEJYXHM.js";import{e as $t}from"./chunk-32TGAMII.js";import{a as de,b as he,c as ge,e as _e,f as fe,h as xe,i as Ce,k as ye,l as Ee,n as Se,o as De,p as we,q as ot}from"./chunk-BZVMQJ4C.js";import{b as ve,f as be}from"./chunk-U7JSXEMB.js";import{a as ke,b as Me}from"./chunk-NPGOXYZL.js";import{a as ae,b as oe}from"./chunk-L5KBJURB.js";import{b as ne,c as ie}from"./chunk-KOXUJKQJ.js";import{B as te,C as ee,b as zt,g as Rt,j as Yt,s as Ht,u as Jt,x as Ut,y as Zt}from"./chunk-25GHV3TY.js";import{a as At,b as Vt}from"./chunk-73LHEHCA.js";import{a as kt,c as Mt,e as Lt}from"./chunk-VPMLDNK4.js";import{_ as vt,la as bt,y as Dt,z as wt}from"./chunk-A7LAK7O4.js";import{k as gt,l as _t,m as ft,s as xt,v as Ct,x as yt}from"./chunk-KFQ5FW2D.js";import{$b as M,Cc as T,Db as mt,Dc as l,Ec as S,Fc as C,Gc as X,Hc as at,Ic as V,Jc as N,Kb as E,Kc as O,Mc as J,Oc as ut,Rc as dt,Sc as H,Ub as g,Uc as W,Yb as pt,Yc as Q,bc as it,cc as F,dc as A,ec as i,fc as a,gc as L,hc as K,ic as $,kc as v,nd as ht,pa as k,pc as f,rb as c,rc as p,xc as z,ya as d,yc as R,za as h,zc as Y}from"./chunk-WYL4U5YK.js";import{a as st,b as ct,g as Xe,h as G,j as b}from"./chunk-6DYNGEAS.js";var B=Xe(Qe());var qe=["drawer"],Ge=["dialogImportExcel"],Je=["dialogImportExcelCu"],Ue=["dialogComparePrice"],lt=()=>({standalone:!0}),Ze=(r,e,t,n,o)=>({"text-blue-500":r,"text-yellow-500":e,"text-green-500":t,"text-purple-500":n,"text-red-500":o}),tn=(r,e)=>({"text-green-600 font-semibold":r,"text-yellow-600 font-semibold":e}),en=(r,e)=>e.key,tt=(r,e)=>e.id,nn=(r,e)=>(e.sanpham==null?null:e.sanpham.id)||r;function an(r,e){if(r&1){let t=v();i(0,"button",56),f("click",function(o){let s=d(t).$implicit;return p().toggleColumn(s),h(o.stopPropagation())}),i(1,"mat-icon"),l(2),a(),i(3,"span"),l(4),a()()}if(r&2){let t=e.$implicit;c(2),S(t.isShow?"check_box":"check_box_outline_blank"),c(2),S(t.value)}}function on(r,e){if(r&1){let t=v();i(0,"button",59),f("click",function(){d(t);let o=p(2),s=T(100);return h(o.openDeleteDialog(s))}),i(1,"mat-icon"),l(2,"delete"),a(),i(3,"span",25),l(4,"Xo\xE1"),a()()}}function rn(r,e){if(r&1){let t=v();i(0,"button",60),f("click",function(){d(t);let o=p(2);return h(o.DoDanhan())}),i(1,"span",25),l(2,"\u0110\xE3 Nh\u1EADn"),a()()}}function ln(r,e){if(r&1&&E(0,on,5,0,"button",57)(1,rn,3,0,"button",58),r&2){let t=p();g("ngIf",t.EditList.length>0),c(),g("ngIf",t.EditList.length>0)}}function sn(r,e){if(r&1&&(i(0,"th",63)(1,"span",64),l(2),a()()),r&2){let t=p().$implicit,n=p();c(2),C(" ",n.ColumnName[t]," ")}}function cn(r,e){if(r&1&&(i(0,"span",66),l(1),a()),r&2){let t=p().index;c(),C(" ",t+1," ")}}function mn(r,e){if(r&1){let t=v();i(0,"span",71),f("click",function(){d(t);let o=p().$implicit,s=p(2);return h(s.goToDetail(o))}),l(1),a()}if(r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",t[n]," ")}}function pn(r,e){if(r&1&&(i(0,"span",66),l(1),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",t[n].length," ")}}function un(r,e){if(r&1&&(i(0,"span",66),l(1),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),X(" (",t[n].mancc,") ",t[n].name," ")}}function dn(r,e){if(r&1&&(i(0,"span",68),l(1),H(2,"date"),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",W(2,1,t[n],"HH:mm:ss dd/MM/yyyy")," ")}}function hn(r,e){if(r&1&&(i(0,"span",68),l(1),H(2,"date"),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",W(2,1,t[n],"HH:mm:ss dd/MM/yyyy")," ")}}function gn(r,e){if(r&1&&(i(0,"span",69),l(1),a()),r&2){let t=p().$implicit,n=p().$implicit,o=p();g("ngClass",dt(2,Ze,t[n]==="dadat",t[n]==="dagiao",t[n]==="danhan",t[n]==="hoanthanh",t[n]==="huy")),c(),C(" ",o.Trangthaidon[t[n]]," ")}}function _n(r,e){r&1&&(i(0,"mat-icon",72),l(1,"check_circle"),a())}function fn(r,e){r&1&&(i(0,"mat-icon",73),l(1,"cancel"),a())}function xn(r,e){if(r&1&&(i(0,"span",66),E(1,_n,2,0,"mat-icon",72)(2,fn,2,0,"mat-icon",73),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),M(t[n]?1:2)}}function Cn(r,e){if(r&1&&(i(0,"span",68),l(1),H(2,"date"),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",W(2,1,t[n],"HH:mm:ss dd/MM/yyyy")," ")}}function yn(r,e){if(r&1){let t=v();i(0,"div",74),f("click",function(o){return d(t),h(o.stopPropagation())}),i(1,"button",75),f("click",function(){d(t);let o=p().$implicit,s=p(2);return h(s.handleCancelDathang(o))}),i(2,"mat-icon"),l(3,"cancel"),a()()()}if(r&2){let t=p().$implicit,n=p(2);c(),g("disabled",!n.cancelOrderService.canCancelOrder(t))("matTooltip",n.cancelOrderService.getCancelButtonTooltip(t))}}function En(r,e){r&1&&L(0,"span",66)}function Sn(r,e){if(r&1&&(i(0,"span",66),l(1),a()),r&2){let t=p().$implicit,n=p().$implicit;c(),C(" ",t[n]," ")}}function Dn(r,e){if(r&1&&(i(0,"td",65),E(1,cn,2,1,"span",66)(2,mn,2,1,"span",67)(3,pn,2,1,"span",66)(4,un,2,2,"span",66)(5,dn,3,4,"span",68)(6,hn,3,4,"span",68)(7,gn,2,8,"span",69)(8,xn,3,1,"span",66)(9,Cn,3,4,"span",68)(10,yn,4,2,"div",70)(11,En,1,0,"span",66)(12,Sn,2,1,"span",66),a()),r&2){let t,n=p().$implicit;c(),M((t=n)==="STT"?1:t==="madncc"?2:t==="sanpham"?3:t==="nhacungcap"?4:t==="ngaynhan"?5:t==="createdAt"?6:t==="status"?7:t==="isActive"?8:t==="updatedAt"?9:t==="actions"?10:t==="action"?11:12)}}function wn(r,e){if(r&1&&(K(0,42),E(1,sn,3,1,"th",61)(2,Dn,13,1,"td",62),$()),r&2){let t=e.$implicit;g("matColumnDef",t)}}function vn(r,e){r&1&&L(0,"tr",76)}function bn(r,e){if(r&1){let t=v();i(0,"tr",77),f("click",function(){let o=d(t).$implicit,s=p();return h(s.AddToEdit(o))}),a()}if(r&2){let t=e.$implicit,n=p();pt("hover:bg-slate-100 ",n.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function kn(r,e){r&1&&(i(0,"tr",78)(1,"td",79),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),a()())}function Mn(r,e){r&1&&(i(0,"mat-dialog-content")(1,"div",80)(2,"div",81),l(3,"X\xE1c Nh\u1EADn"),a(),i(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),i(6,"div",82)(7,"button",83),l(8,"\u0110\u1ED3ng \xDD"),a(),i(9,"button",84),l(10,"Hu\u1EF7 B\u1ECF"),a()()()())}function Ln(r,e){r&1&&(i(0,"mat-dialog-content")(1,"div",80)(2,"div",81),l(3,"X\xE1c Nh\u1EADn"),a(),i(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),i(6,"div",82)(7,"button",83),l(8,"\u0110\u1ED3ng \xDD"),a(),i(9,"button",84),l(10,"Hu\u1EF7 B\u1ECF"),a()()()())}function Tn(r,e){if(r&1){let t=v();l(0),i(1,"button",110),f("click",function(){d(t);let o=p().$implicit,s=p(2);return h(s.removeItemImport(o))}),i(2,"mat-icon"),l(3,"delete"),a()()}if(r&2){let t=p().index;C(" ",t+1," ")}}function In(r,e){if(r&1&&(i(0,"mat-option",116),l(1),a()),r&2){let t=e.$implicit;g("value",t.id),c(),S(t.name)}}function Pn(r,e){if(r&1){let t=v();i(0,"mat-form-field",31)(1,"mat-label"),l(2,"Nh\xE0 Cung C\u1EA5p"),a(),i(3,"mat-select",111),f("selectionChange",function(o){d(t);let s=p().$implicit,m=p(2);return h(m.SelectNhacungcap(s,o))}),i(4,"div",112)(5,"mat-form-field",113)(6,"input",114),f("input",function(o){d(t);let s=p().index,m=p(2);return h(m.DoFindNhacungcap(o,s))}),a()(),i(7,"div",115),F(8,In,2,2,"mat-option",116,tt),a()()()()}if(r&2){let t=p().index,n=p(2);c(8),A(n.FilterNhacungcap[t])}}function Fn(r,e){if(r&1){let t=v();i(0,"mat-form-field",31)(1,"mat-label"),l(2,"Ng\xE0y Nh\u1EADn "),a(),i(3,"input",117),f("dateChange",function(o){d(t);let s=p().$implicit,m=p(2);return h(m.DoChonNgaynhan(o,s))}),a(),L(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",null,12),a()}if(r&2){let t=T(6),n=p().index,o=p(2);c(3),g("ngModel",o.statusDetails[n]==null?null:o.statusDetails[n].ngaynhan)("matDatepicker",t),c(),g("for",t)}}function An(r,e){if(r&1&&(i(0,"tr")(1,"td",103),E(2,Tn,4,1),a(),i(3,"td",104),E(4,Pn,10,0,"mat-form-field",31),a(),i(5,"td",105),E(6,Fn,7,3,"mat-form-field",31),a(),i(7,"td",106),l(8),a(),i(9,"td",106),l(10),a(),i(11,"td",107)(12,"span",108),l(13),a()(),i(14,"td",109),l(15),a()()),r&2){let t=e.$implicit;c(2),M(t.status==="Processed"?2:-1),c(2),M(t.status==="Processed"?4:-1),c(2),M(t.status==="Processed"?6:-1),c(2),S(t.fileName),c(2),S(t.tenkhongdau),c(2),g("ngClass",ut(8,tn,t.status==="Processed"||t.status==="Success",t.status==="Skipped")),c(),C(" ",t.status," "),c(2),S(t.message)}}function Vn(r,e){if(r&1){let t=v();i(0,"h2",85),l(1,"Import \u0110\u1EB7t H\xE0ng"),a(),i(2,"mat-dialog-content",86)(3,"div",87)(4,"div",88)(5,"table",89)(6,"thead",90)(7,"tr")(8,"th",91),l(9," # "),a(),i(10,"th",92),l(11," Nh\xE0 Cung C\u1EA5p "),a(),i(12,"th",93),l(13," Ng\xE0y Nh\u1EADn "),i(14,"mat-form-field",52)(15,"mat-label"),l(16,"Ng\xE0y Nh\u1EADn All "),a(),i(17,"input",94),f("dateChange",function(o){d(t);let s=p();return h(s.DoChonNgaynhan(o,"All"))}),a(),L(18,"mat-datepicker-toggle",39)(19,"mat-datepicker",null,12),a()(),i(21,"th",95),l(22," File Name"),a(),i(23,"th",95),l(24," T\xEAn Kh\xF4ng D\u1EA5u"),a(),i(25,"th",96),l(26," Status"),a(),i(27,"th",97),l(28," Message"),a()()(),i(29,"tbody",98),E(30,An,16,11,"tr",99),a()()()()(),i(31,"mat-dialog-actions",100)(32,"button",101),l(33,"\u0110\xF3ng"),a(),i(34,"button",102),f("click",function(){d(t);let o=p();return h(o.DoImportNhacungcapCu())}),l(35,"C\u1EADp Nh\u1EADt"),a()()}if(r&2){let t=T(20),n=p();c(17),g("matDatepicker",t),c(),g("for",t),c(12),g("ngForOf",n.statusDetails)}}function Nn(r,e){if(r&1&&(i(0,"mat-option",129),l(1),a()),r&2){let t=e.$implicit;g("value",t.makho),c(),X(" ",t.makho," (",t.name,") ")}}function On(r,e){if(r&1&&(i(0,"mat-option",129),l(1),a()),r&2){let t=e.$implicit;g("value",t),c(),X(" ",t.makho," (",t.name,") ")}}function Bn(r,e){if(r&1&&(i(0,"div",146)(1,"span",152),l(2),a(),i(3,"mat-chip",153),l(4),a()()),r&2){let t=p().$implicit,n=p(2);c(2),C("Excel: ",t.originalMakho,""),c(),g("color",n.getKhoMatchStatusColor(t.configOptions==null?null:t.configOptions.khoMatchStatus)),c(),C(" ",n.getKhoMatchStatusText(t.configOptions==null?null:t.configOptions.khoMatchStatus)," ")}}function Kn(r,e){if(r&1&&(i(0,"tr",151)(1,"td",154),l(2),a(),i(3,"td",155),l(4),a(),i(5,"td",154),l(6),a(),i(7,"td",154),l(8),a(),i(9,"td",156),l(10),a(),i(11,"td",154),l(12),a(),i(13,"td",154),l(14),a(),i(15,"td",157),l(16),a()()),r&2){let t=e.$implicit,n=e.$index;c(2),S(n+1),c(2),S((t.sanpham==null?null:t.sanpham.masp)||t.masp||"N/A"),c(2),S((t.sanpham==null?null:t.sanpham.title)||t.title||"N/A"),c(2),S((t.sanpham==null?null:t.sanpham.dvt)||t.dvt||""),c(2),S(t.sldat||0),c(2),S(t.slgiao||0),c(2),S(t.slnhan||0),c(2),S(t.ghichu||"")}}function $n(r,e){r&1&&(i(0,"tr")(1,"td",158),l(2,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m"),a()())}function zn(r,e){if(r&1){let t=v();i(0,"div",132)(1,"div",139)(2,"div",140)(3,"mat-checkbox",141),O("ngModelChange",function(o){let s=d(t).$implicit;return N(s.configOptions.confirmed,o)||(s.configOptions.confirmed=o),h(o)}),f("change",function(){let o=d(t).$implicit,s=p(2);return h(s.toggleOrderConfirmation(o))}),a(),i(4,"div")(5,"h3",142),l(6),a(),i(7,"p",136),l(8),a()()(),i(9,"button",143),f("click",function(){let o=d(t).$implicit,s=p(2);return h(s.removeOrderFromImport(o))}),i(10,"mat-icon"),l(11,"delete"),a()()(),i(12,"div",144)(13,"mat-form-field",52)(14,"mat-label"),l(15,"Ng\xE0y nh\u1EADn"),a(),i(16,"input",126),O("ngModelChange",function(o){let s=d(t).$implicit;return N(s.configOptions.selectedDate,o)||(s.configOptions.selectedDate=o),h(o)}),f("dateChange",function(o){let s=d(t).$implicit,m=p(2);return h(m.updateOrderDate(s,o.value))}),a(),L(17,"mat-datepicker-toggle",39)(18,"mat-datepicker",null,14),a(),i(20,"div",145)(21,"mat-form-field",52)(22,"mat-label"),l(23,"Kho"),a(),i(24,"mat-select",128),O("ngModelChange",function(o){let s=d(t).$implicit;return N(s.khoSelected,o)||(s.khoSelected=o),h(o)}),f("selectionChange",function(o){let s=d(t).$implicit,m=p(2);return h(m.updateOrderKhoSelection(s,o.value))}),F(25,On,2,3,"mat-option",129,tt),a()(),E(27,Bn,5,3,"div",146),a()(),i(28,"div",88)(29,"table",147)(30,"thead",148)(31,"tr")(32,"th",149),l(33,"STT"),a(),i(34,"th",149),l(35,"M\xE3 SP"),a(),i(36,"th",149),l(37,"T\xEAn s\u1EA3n ph\u1EA9m"),a(),i(38,"th",149),l(39,"\u0110VT"),a(),i(40,"th",149),l(41,"SL \u0110\u1EB7t"),a(),i(42,"th",149),l(43,"SL Giao"),a(),i(44,"th",149),l(45,"SL Nh\u1EADn"),a(),i(46,"th",149),l(47,"Ghi ch\xFA"),a()()(),i(48,"tbody",150),F(49,Kn,17,8,"tr",151,nn,!1,$n,3,0,"tr"),a()()()()}if(r&2){let t=e.$implicit,n=T(19),o=p(2);g("ngClass",t.configOptions!=null&&t.configOptions.confirmed?"border-green-500 bg-green-50":"border-gray-300"),c(3),V("ngModel",t.configOptions.confirmed),c(3),C("",(t.summary==null?null:t.summary.supplierName)||(t.nhacungcap==null?null:t.nhacungcap.name)||"N/A"," "),c(2),at(" M\xE3 NCC: ",(t.summary==null?null:t.summary.supplierCode)||(t.nhacungcap==null?null:t.nhacungcap.mancc)||"N/A"," | ",(t.summary==null?null:t.summary.totalProducts)||(t.sanpham==null?null:t.sanpham.length)||0," s\u1EA3n ph\u1EA9m | T\u1ED5ng SL: ",(t.summary==null?null:t.summary.totalQuantity)||o.getTotalQuantity(t)," "),c(8),g("matDatepicker",n),V("ngModel",t.configOptions.selectedDate),c(),g("for",n),c(7),V("ngModel",t.khoSelected),c(),A(o.ImportConfig.ListKho),c(2),M(t.originalMakho?27:-1),c(22),A(t.sanpham)}}function Rn(r,e){r&1&&(i(0,"div",133)(1,"div",159),l(2,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 import"),a(),i(3,"div",160),l(4,"Vui l\xF2ng ch\u1ECDn file Excel h\u1EE3p l\u1EC7"),a()())}function Yn(r,e){if(r&1){let t=v();i(0,"h2",118)(1,"span"),l(2,"Import \u0110\u1EB7t H\xE0ng t\u1EEB Excel"),a(),i(3,"div",119)(4,"span"),l(5),a(),i(6,"span",120),l(7),a()()(),i(8,"mat-dialog-content",121)(9,"div",122)(10,"div",123)(11,"div",124)(12,"mat-form-field",125)(13,"mat-label"),l(14,"Ng\xE0y nh\u1EADn (T\u1EA5t c\u1EA3)"),a(),i(15,"input",126),O("ngModelChange",function(o){d(t);let s=p();return N(s.ImportConfig.selectedDate,o)||(s.ImportConfig.selectedDate=o),h(o)}),f("dateChange",function(o){d(t);let s=p();return h(s.updateAllOrdersDate(o.value))}),a(),L(16,"mat-datepicker-toggle",39)(17,"mat-datepicker",null,13),a(),i(19,"mat-form-field",127)(20,"mat-label"),l(21,"Kho (T\u1EA5t c\u1EA3)"),a(),i(22,"mat-select",128),O("ngModelChange",function(o){d(t);let s=p();return N(s.ImportConfig.selectedKho,o)||(s.ImportConfig.selectedKho=o),h(o)}),f("selectionChange",function(o){d(t);let s=p();return h(s.updateAllOrdersKho(o.value))}),F(23,Nn,2,3,"mat-option",129,tt),a()(),i(25,"button",102),f("click",function(){d(t);let o=p();return h(o.toggleAllOrdersConfirmation())}),i(26,"mat-icon"),l(27),a(),l(28),a()()(),i(29,"div",130)(30,"div",131),F(31,zn,52,12,"div",132,tt),a(),E(33,Rn,5,0,"div",133),a()()(),i(34,"mat-dialog-actions",134)(35,"div",135)(36,"div",136),l(37),a(),i(38,"div",137)(39,"button",84),l(40,"\u0110\xF3ng"),a(),i(41,"button",138),f("click",function(){d(t);let o=p();return h(o.ImportConfirmedDathang())}),l(42),a()()()()}if(r&2){let t=T(18),n=p();c(5),C("",n.ListImportExcel.length," \u0111\u01A1n h\xE0ng"),c(2),C("",n.getConfirmedOrdersCount()," \u0111\xE3 x\xE1c nh\u1EADn"),c(8),g("matDatepicker",t),V("ngModel",n.ImportConfig.selectedDate),c(),g("for",t),c(6),V("ngModel",n.ImportConfig.selectedKho),c(),A(n.ImportConfig.ListKho),c(4),S(n.getConfirmedOrdersCount()===n.ListImportExcel.length?"check_box":"check_box_outline_blank"),c(),C(" ",n.getConfirmedOrdersCount()===n.ListImportExcel.length?"B\u1ECF ch\u1ECDn t\u1EA5t c\u1EA3":"Ch\u1ECDn t\u1EA5t c\u1EA3"," "),c(3),A(n.ListImportExcel),c(2),M(n.ListImportExcel.length===0?33:-1),c(),g("align","end"),c(3),X(" \u0110\xE3 ch\u1ECDn ",n.getConfirmedOrdersCount()," / ",n.ListImportExcel.length," \u0111\u01A1n h\xE0ng "),c(4),g("disabled",n.getConfirmedOrdersCount()===0),c(),C(" Import ",n.getConfirmedOrdersCount()," \u0111\u01A1n h\xE0ng ")}}function Hn(r,e){r&1&&(i(0,"th",188),l(1,"STT"),a())}function Wn(r,e){if(r&1&&(i(0,"td",189),l(1),a()),r&2){let t=e.index;c(),C(" ",t+1," ")}}function jn(r,e){r&1&&(i(0,"th",190),l(1,"M\xE3 SP"),a())}function Xn(r,e){if(r&1&&(i(0,"td",191),l(1),a()),r&2){let t=e.$implicit;c(),C(" ",t.masp," ")}}function Qn(r,e){r&1&&(i(0,"th",192),l(1,"T\xEAn s\u1EA3n ph\u1EA9m"),a())}function qn(r,e){if(r&1&&(i(0,"td",193),l(1),a()),r&2){let t=e.$implicit;c(),C(" ",t.title," ")}}function Gn(r,e){r&1&&(i(0,"th",194),l(1,"\u0110VT"),a())}function Jn(r,e){if(r&1&&(i(0,"td",195),l(1),a()),r&2){let t=e.$implicit;c(),C(" ",t.dvt," ")}}function Un(r,e){if(r&1&&(i(0,"th",198)(1,"div",199)(2,"div",200),l(3),a(),i(4,"div",201),l(5),a(),i(6,"div",202),l(7),a()()()),r&2){let t,n,o,s=p(2).$implicit,m=p(2);c(3),C(" ",((t=m.getDisplayedComparePriceData()[0])==null||t.suppliers[s]==null?null:t.suppliers[s].nhacungcap)||"N/A"," "),c(2),C(" M\xE3: ",((n=m.getDisplayedComparePriceData()[0])==null||n.suppliers[s]==null?null:n.suppliers[s].nhacungcapCode)||"N/A"," "),c(2),C(" Ng\xE0y: ",((o=m.getDisplayedComparePriceData()[0])==null||o.suppliers[s]==null?null:o.suppliers[s].ngaynhan)||"N/A"," ")}}function Zn(r,e){if(r&1&&(i(0,"div",199)(1,"div",205)(2,"span",152),l(3,"SL:"),a(),i(4,"span",206),l(5),a()(),i(6,"div",205)(7,"span",152),l(8,"Gi\xE1:"),a(),i(9,"span",207),l(10),H(11,"number"),a()()()),r&2){let t=p().$implicit,n=p(2).$implicit;c(5),S(t.suppliers[n].sldat),c(5),C(" ",W(11,2,t.suppliers[n].gianhap,"1.0-0")," \u0111 ")}}function ti(r,e){r&1&&(i(0,"div",204),l(1,"-"),a())}function ei(r,e){if(r&1&&(i(0,"td",203),E(1,Zn,12,5,"div",199)(2,ti,2,0,"div",204),a()),r&2){let t=e.$implicit,n=p(2).$implicit;c(),M(t.suppliers[n]?1:2)}}function ni(r,e){if(r&1&&(K(0,42),E(1,Un,8,3,"th",196)(2,ei,3,1,"td",197),$()),r&2){let t=p().$implicit;g("matColumnDef",t)}}function ii(r,e){if(r&1&&E(0,ni,3,1,"ng-container",42),r&2){let t=e.$implicit;M(t!=="stt"&&t!=="masp"&&t!=="title"&&t!=="dvt"?0:-1)}}function ai(r,e){r&1&&L(0,"tr",76)}function oi(r,e){r&1&&L(0,"tr",208)}function ri(r,e){r&1&&(i(0,"div",185)(1,"mat-icon",209),l(2,"inventory_2"),a(),i(3,"div",210),l(4,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),a(),i(5,"div",211),l(6,"Vui l\xF2ng ch\u1ECDn kho\u1EA3ng th\u1EDDi gian kh\xE1c"),a()())}function li(r,e){if(r&1){let t=v();i(0,"div",161)(1,"div")(2,"h2",162),l(3,"So S\xE1nh Gi\xE1 Nh\xE0 Cung C\u1EA5p"),a(),i(4,"div",163),l(5),H(6,"date"),H(7,"date"),a()(),i(8,"button",164)(9,"mat-icon"),l(10,"close"),a()()(),i(11,"mat-dialog-content",165)(12,"div",166)(13,"div",167)(14,"div",168),l(15," Hi\u1EC3n th\u1ECB "),i(16,"span",81),l(17),a(),l(18," / "),i(19,"span",81),l(20),a(),l(21," s\u1EA3n ph\u1EA9m "),a(),i(22,"button",102),f("click",function(){d(t);let o=p();return h(o.exportComparePriceExcel())}),i(23,"mat-icon"),l(24,"download"),a(),i(25,"span"),l(26),a()()(),i(27,"div",169)(28,"table",170),K(29,171),E(30,Hn,2,0,"th",172)(31,Wn,2,1,"td",173),$(),K(32,174),E(33,jn,2,0,"th",175)(34,Xn,2,1,"td",176),$(),K(35,177),E(36,Qn,2,0,"th",178)(37,qn,2,1,"td",179),$(),K(38,180),E(39,Gn,2,0,"th",181)(40,Jn,2,1,"td",182),$(),F(41,ii,1,1,null,null,it),E(43,ai,1,0,"tr",183)(44,oi,1,0,"tr",184),a()(),E(45,ri,7,0,"div",185),a()(),i(46,"mat-dialog-actions",186)(47,"button",187),l(48,"\u0110\xF3ng"),a()()}if(r&2){let t=p();c(5),X(" T\u1EEB ",W(6,10,t.searchParam.Batdau,"dd/MM/yyyy")," \u0111\u1EBFn ",W(7,13,t.searchParam.Ketthuc,"dd/MM/yyyy")," "),c(12),S(t.getDisplayedComparePriceData().length),c(3),S(t.comparePriceTotalRecords),c(6),C("Xu\u1EA5t Excel (To\xE0n b\u1ED9 ",t.comparePriceTotalRecords," SP)"),c(2),g("dataSource",t.getDisplayedComparePriceData()),c(13),A(t.comparePriceColumns),c(2),g("matHeaderRowDef",t.comparePriceColumns)("matHeaderRowDefSticky",!0),c(),g("matRowDefColumns",t.comparePriceColumns),c(),M(t.comparePriceData.length===0?45:-1)}}var j=class j{Detail={};displayedColumns=["STT","madncc","nhacungcap","sanpham","ngaynhan","status","ghichu","createdAt","updatedAt"];ColumnName={STT:"STT",madncc:"M\xE3 \u0110\u01A1n Nh\u1EADp",nhacungcap:"Nh\xE0 Cung C\u1EA5p",sanpham:"S\u1EA3n Ph\u1EA9m",ngaynhan:"Ng\xE0y Nh\u1EADn",status:"Tr\u1EA1ng Th\xE1i",ghichu:"Ghi Ch\xFA",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt"};FilterColumns=JSON.parse(localStorage.getItem("DathangColFilter")||"[]");Columns=[];isFilter=!1;Trangthaidon=Ye;paginator;sort;drawer;dialogImportExcel;dialogImportExcelCu;filterValues={};_DathangService=k(Be);_breakpointObserver=k(Dt);_NhacungcapService=k($e);_SanphamService=k(Ke);_BanggiaService=k(ze);_KhoService=k(Re);_router=k(St);_timezoneService=k(Oe);cancelOrderService=k(He);Listdathang=this._DathangService.ListDathang;page=this._DathangService.page;pageCount=this._DathangService.pageCount;total=this._DathangService.total;pageSize=this._DathangService.pageSize;dathangId=this._DathangService.dathangId;dataSource=new ot([]);_snackBar=k(Tt);CountItem=0;suppliers=[];dialog=k(Wt);ListImportExcel=[];searchParam={Batdau:(0,B.default)().toDate(),Ketthuc:(0,B.default)().toDate(),page:this.page(),pageSize:this.pageSize()};totalItems=0;constructor(){ht(()=>b(this,null,function*(){this.dataSource.data=this.Listdathang(),this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page()-1,this.paginator.pageSize=this.pageSize(),this.paginator.length=this.total())}))}createFilter(){return(e,t)=>{let n=JSON.parse(t),o=!0;return this.displayedColumns.forEach(s=>{if(n[s]){let m=e[s]?e[s].toString().toLowerCase():"";o=o&&m.includes(n[s].toLowerCase())}}),o}}onPageSizeChange(e,t){e>this.total()&&(this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.total()}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),e=this.total()),this._DathangService.page.set(1),this._DathangService.getDathangBy(this.searchParam),t.closeMenu()}onPreviousPage(){this.page()>1&&(this._DathangService.page.set(this.page()-1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onNextPage(){this.page()<this.pageCount()&&(this._DathangService.page.set(this.page()+1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onDateChange(){this.ngOnInit()}ngOnInit(){return b(this,null,function*(){yield this._DathangService.getDathangBy(this.searchParam),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new ot(this.Listdathang()),this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer(),yield this._NhacungcapService.getAllNhacungcap(),this.FilterNhacungcap=Array(20).fill(null).map(()=>this._NhacungcapService.ListNhacungcap()),yield this._KhoService.getAllKho(),this.ImportConfig.ListKho=this._KhoService.ListKho(),this.FilterKho=Array(20).fill(null).map(()=>this._KhoService.ListKho())})}initializeColumns(){this.Columns=Object.entries(this.ColumnName).map(([e,t])=>({key:e,value:t,isShow:!0})),this.FilterColumns=this.FilterColumns.length?this.FilterColumns:this.Columns,localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,{key:t,value:n,isShow:o})=>o?ct(st({},e),{[t]:n}):e,{})}applyFilter(e){let t=e.target.value;if(!t){this.searchParam={page:this.page(),pageSize:this.pageSize()},this._DathangService.getDathangBy(this.searchParam);return}this.searchParam.subtitle=t.trim().toLowerCase(),this._DathangService.getDathangBy(this.searchParam)}setupDrawer(){this._breakpointObserver.observe([wt.Handset]).subscribe(e=>{e.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(n=>n.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(e,t){return e.filter((o,s,m)=>s===m.findIndex(_=>_[t]===o[t]))}doFilterHederColumn(e,t){this.dataSource.filteredData=this.Listdathang().filter(n=>n[t].toLowerCase().includes(e.target.value.toLowerCase()))}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(n=>n.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/dathang","new"])}goToDetail(e){this._DathangService.setDathangId(e.id),this.drawer.open(),this._router.navigate(["admin/dathang",e.id])}UpdateDathang(e){e.status="dagiao",this._DathangService.updateDathang(e).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ExportExcel(){return b(this,null,function*(){this.searchParam.pageSize=99999,yield this._DathangService.getDathangBy(this.searchParam);let e=this.Listdathang(),t=`Danh S\xE1ch \u0110\u1EB7t H\xE0ng ${this._timezoneService.formatForDisplay(new Date,"DD-MM-YYYY")}`;yield this._NhacungcapService.getAllNhacungcap(),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._BanggiaService.getAllBanggia();let n=Array.isArray(e)&&e.length>0?e.flatMap(o=>Array.isArray(o.sanpham)?o.sanpham.map(s=>({ngaynhan:this._timezoneService.formatForDisplay(o.ngaynhan,"DD/MM/YYYY"),mancc:o.nhacungcap?.mancc,name:o.nhacungcap?.name,masp:s?.sanpham?.masp,tensp:s?.sanpham?.title,sldat:Number(s?.sldat)||0,slgiao:Number(s?.slgiao)||0,slnhan:Number(s?.slnhan)||0,ghichu:s?.ghichu,makho:o?.kho?.makho})):[]):[{ngaynhan:this._timezoneService.nowLocal("DD/MM/YYYY"),mancc:"",name:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:"",makho:""}];console.log(n),console.log(this.Listdathang()),Ae(n,t)})}EditList=[];AddToEdit(e){this.EditList.find(n=>n.id===e.id)?this.EditList=this.EditList.filter(n=>n.id!==e.id):this.EditList.push(e)}CheckItemInEdit(e){return this.EditList.some(t=>t.id===e.id)}DoDanhan(){Promise.all(this.EditList.map(e=>(e.status="danhan",this._DathangService.updateDathang(e)))).then(()=>{this.EditList=[],this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}dialogCreateRef;openDeleteDialog(e,t){this.dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(o=>b(this,null,function*(){if(o=="true"){if(t){yield this._DathangService.DeleteDathang(t);return}this.DeleteListItem()}}))}openDathangDialog(e){this.dialog.open(e,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(n=>b(this,null,function*(){n=="true"}))}DeleteListItem(){return b(this,null,function*(){if(!this.EditList?.length){this._snackBar.open("Kh\xF4ng c\xF3 m\u1EE5c n\xE0o \u0111\u01B0\u1EE3c ch\u1ECDn \u0111\u1EC3 x\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}try{let e=yield this._DathangService.DeleteBulkDathang(this.EditList.map(t=>t.id));this._snackBar.open(`X\xF3a th\xE0nh c\xF4ng ${e.success} \u0111\u1EB7t h\xE0ng ${e.fail} l\u1ED7i`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("L\u1ED7i khi x\xF3a \u0111\u1EB7t h\xE0ng:",e),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a \u0111\u1EB7t h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.EditList=[],yield this.ngOnInit()}})}statusDetails=[];ListImportData=[];FilterNhacungcap=[];FilterKho=[];ImportConfig={selectedDate:new Date,selectedKho:"",ListKho:[]};ImporExcel(e){return b(this,null,function*(){let t=Array.from(e.target.files),n=0,o=0,s=0;this.ListImportData=[],this.statusDetails=[],this.ListImportExcel=[],yield this._NhacungcapService.getAllNhacungcap({pageSize:99999}),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._KhoService.getAllKho();for(let m=0;m<t.length;m++){let _=t[m];try{let u=yield Ve(_);console.log("Excel data:",u);let I=u.Sheet1||u.dathang;if(I&&I.length>0){let y=this.processImportData(I,_.name);y.length>0?(this.ListImportExcel.push(...y),n++):o++}else o++,this.statusDetails.push({fileName:_.name,status:"Skipped",message:"No valid data found in Sheet1 or dathang sheet"})}catch(u){console.error("Error processing file:",u),s++,this.statusDetails.push({fileName:_.name,status:"Error",message:u.message})}}this.ListImportExcel.length>0?(this.ImportConfig.selectedDate=new Date,this.setDefaultKhoForOrders(),this.dialog.open(this.dialogImportExcel,{width:"95vw",maxWidth:"1400px",height:"95vh",disableClose:!0})):this.dialog.open(this.dialogImportExcelCu,{width:"90vw",maxWidth:"1200px",height:"90vh"}),this._snackBar.open(`X\u1EED l\xFD ${t.length} file: ${n} th\xE0nh c\xF4ng, ${o} b\u1ECF qua, ${s} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),e.target.value=""})}processImportData(e,t){let n=this._NhacungcapService.ListNhacungcap(),o=this._SanphamService.ListSanpham(),s=this._KhoService.ListKho(),m=[];try{let _={};for(let u of e)!u.mancc||!u.masp||(_[u.mancc]||(_[u.mancc]=[]),_[u.mancc].push(u));for(let[u,I]of Object.entries(_)){let y=n.find(x=>x.mancc===u);if(!y){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y nh\xE0 cung c\u1EA5p: ${u}`,mancc:u});continue}let D=[],P=!1;for(let x of I){let w=o.find(et=>et.masp===x.masp);if(!w){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y s\u1EA3n ph\u1EA9m: ${x.masp}`,mancc:u,masp:x.masp}),P=!0;continue}D.push({sanpham:{id:w.id,masp:w.masp,title:w.title,dvt:w.dvt||""},sldat:Number(x.sldat)||0,slgiao:Number(x.sldat)||0,slnhan:Number(x.sldat)||0,ghichu:x.ghichu||"",originalData:x}),this.statusDetails.push({fileName:t,status:"Processed",message:`\u0110\xE3 x\u1EED l\xFD: ${w.title} - SL: ${x.sldat}`,mancc:u,masp:x.masp})}if(D.length>0){let x=I[0],w=new Date;if(x.ngaynhan)try{let[q,nt,je]=x.ngaynhan.split("/");w=(0,B.default)(`${je}-${nt}-${q}`,"YYYY-MM-DD").toDate()}catch(q){console.warn("Error parsing date, using current date:",q)}let et={id:`temp_${u}_${Date.now()}`,title:`\u0110\u01A1n h\xE0ng ${x.ngaynhan||this._timezoneService.nowLocal("DD/MM/YYYY")} - ${y.name}`,ngaynhan:w,nhacungcapId:y.id,nhacungcap:y,makho:this.autoSelectKho(x.makho,s),khoSelected:this.getKhoByMakho(x.makho,s),originalMakho:x.makho||"",status:"dadat",sanpham:D,ghichu:"",fileName:t,configOptions:{canChangeDate:!0,canChangeKho:!0,selectedDate:w,selectedKho:this.autoSelectKho(x.makho,s),confirmed:!1,khoMatchStatus:this.getKhoMatchStatus(x.makho,s)},summary:{totalProducts:D.length,totalQuantity:D.reduce((q,nt)=>q+nt.sldat,0),supplierCode:u,supplierName:y.name}};m.push(et)}}}catch(_){console.error("Error processing import data:",_),this.statusDetails.push({fileName:t,status:"Error",message:_.message})}return m}generateOrderCode(e){let t=this._timezoneService.formatForDisplay(new Date,"YYYYMMDD"),n=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`DH${e}-${t}-${n}`}updateOrderDate(e,t){e.ngaynhan=t,e.configOptions.selectedDate=t,e.title=`\u0110\u01A1n h\xE0ng ${this._timezoneService.formatForDisplay(t,"DD/MM/YYYY")} - ${e.nhacungcap.name}`}updateOrderKho(e,t){e.makho=t,e.configOptions.selectedKho=t}updateOrderKhoSelection(e,t){e.makho=t.makho,e.khoSelected=t,e.configOptions.selectedKho=t.makho,e.configOptions.khoMatchStatus="manual"}updateAllOrdersDate(e){this.ImportConfig.selectedDate=e,this.ListImportExcel.forEach(t=>{this.updateOrderDate(t,e)})}updateAllOrdersKho(e){this.ImportConfig.selectedKho=e;let t=this.ImportConfig.ListKho.find(n=>n.makho===e);this.ListImportExcel.forEach(n=>{t&&this.updateOrderKhoSelection(n,t)})}toggleOrderConfirmation(e){e.configOptions.confirmed=!e.configOptions.confirmed}toggleAllOrdersConfirmation(){let e=this.ListImportExcel.every(t=>t.configOptions.confirmed);this.ListImportExcel.forEach(t=>{t.configOptions.confirmed=!e})}getConfirmedOrdersCount(){return this.ListImportExcel.filter(e=>e.configOptions.confirmed).length}getKhoMatchStatusText(e){switch(e){case"exact":return"Kh\u1EDBp ch\xEDnh x\xE1c";case"partial":return"Kh\u1EDBp m\u1ED9t ph\u1EA7n";case"name":return"Kh\u1EDBp theo t\xEAn";case"default":return"M\u1EB7c \u0111\u1ECBnh";case"manual":return"\u0110\xE3 ch\u1EC9nh s\u1EEDa";default:return"Kh\xF4ng t\xECm th\u1EA5y"}}getKhoMatchStatusColor(e){switch(e){case"exact":return"success";case"partial":return"warn";case"name":return"accent";case"manual":return"primary";default:return"warn"}}ImportConfirmedDathang(){return b(this,null,function*(){let e=this.ListImportExcel.filter(t=>t.configOptions.confirmed);if(e.length===0){this._snackBar.open("Vui l\xF2ng x\xE1c nh\u1EADn \xEDt nh\u1EA5t m\u1ED9t \u0111\u01A1n h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}yield this._KhoService.getAllKho();try{let t=e.map(o=>{let s=this._KhoService.ListKho().find(_=>_.makho===o.makho),m=this.mergeProductsByMasp(o.sanpham);return{ngaynhan:(0,B.default)(o.ngaynhan).format("YYYY-MM-DD"),mancc:o?.nhacungcap.mancc,makho:o.makho,khoId:s?.id,status:o.status,sanpham:m.map(_=>({masp:_.masp,sldat:Number(_.sldat),slgiao:Number(_.slgiao),slnhan:Number(_.slnhan),ghichu:_.ghichu})),ghichu:o.ghichu}}),n=yield this._DathangService.ImportDathang(t);this._snackBar.open(`Import th\xE0nh c\xF4ng: ${n.success} \u0111\u01A1n h\xE0ng, ${n.fail} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.dialog.closeAll(),yield this.ngOnInit()}catch(t){console.error("L\u1ED7i khi import \u0111\u1EB7t h\xE0ng:",t),this._snackBar.open(`L\u1ED7i khi import: ${t.message}`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}removeOrderFromImport(e){this.ListImportExcel=this.ListImportExcel.filter(t=>t.id!==e.id),this.ListImportExcel.length===0&&this.dialog.closeAll()}DoChonNgaynhan(e,t){let n=e.value;t&&t!=="All"?t.ngaynhan=this._timezoneService.formatForDisplay(n,"YYYY-MM-DD"):this.ListImportExcel.forEach(o=>{o.details?.forEach(s=>{s.ngaynhan=this._timezoneService.formatForDisplay(n,"YYYY-MM-DD")})})}removeItemImport(e){this.ListImportExcel.forEach(t=>{t.details&&(t.details=t.details.filter(n=>n!==e))}),this.ListImportExcel=this.ListImportExcel.filter(t=>t.details&&t.details.length>0)}SelectNhacungcap(e,t){let n=t.value;e.nhacungcap=n,e.manhacungcap=n?.id||n?.manhacungcap}DoFindNhacungcap(e,t){let n=e.target.value.toLowerCase();this.suppliers=this.suppliers.filter(o=>o.name?.toLowerCase().includes(n)||o.manhacungcap?.toLowerCase().includes(n))}DoImportNhacungcapCu(){this.ImportConfirmedDathang()}mergeProductsByMasp(e){let t=new Map;return e.forEach(n=>{let o=n.sanpham?.masp||n.masp;if(t.has(o)){let s=t.get(o);s.sldat=(Number(s.sldat)||0)+(Number(n.sldat)||0),s.slgiao=(Number(s.slgiao)||0)+(Number(n.slgiao)||0),s.slnhan=(Number(s.slnhan)||0)+(Number(n.slnhan)||0);let m=s.ghichu||"",_=n.ghichu||"";_&&m!==_&&(s.ghichu=m?`${m}; ${_}`:_)}else t.set(o,{masp:o,sanpham:n.sanpham||{masp:o},sldat:Number(n.sldat)||0,slgiao:Number(n.slgiao)||0,slnhan:Number(n.slnhan)||0,ghichu:n.ghichu||"",title:n.sanpham?.title||n.title||"",dvt:n.sanpham?.dvt||n.dvt||""})}),Array.from(t.values())}getTotalQuantity(e){return!e.details||!Array.isArray(e.details)?0:e.details.reduce((t,n)=>t+(parseFloat(n.soluong||"0")||0),0)}autoSelectKho(e,t){if(!e||!t?.length)return t?.[0]?.makho||"";let n=t.find(m=>m.makho===e);if(n)return n.makho;let o=t.find(m=>m.makho?.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(m.makho?.toLowerCase()));if(o)return o.makho;let s=t.find(m=>m.name?.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(m.name?.toLowerCase()));return s?s.makho:t[0]?.makho||""}getKhoByMakho(e,t){let n=this.autoSelectKho(e,t);return t.find(o=>o.makho===n)||t[0]||null}getKhoMatchStatus(e,t){return!e||!t?.length?t?.length?"default":"none":t.find(n=>n.makho===e)?"exact":t.find(n=>n.makho?.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.makho?.toLowerCase()))?"partial":t.find(n=>n.name?.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.name?.toLowerCase()))?"name":"default"}setDefaultKhoForOrders(){let e=this.ImportConfig.ListKho?.[0];e&&this.ListImportExcel.forEach(t=>{!t.khoSelected&&t.configOptions.khoMatchStatus==="default"&&(t.khoSelected=e,t.makho=e.makho,t.configOptions.selectedKho=e.makho)})}getOrdersStatistics(){let e=this.ListImportExcel.length,t=this.getConfirmedOrdersCount(),n=this.ListImportExcel.filter(u=>u.configOptions?.khoMatchStatus==="exact").length,o=this.ListImportExcel.filter(u=>u.configOptions?.khoMatchStatus==="partial").length,s=this.ListImportExcel.filter(u=>u.configOptions?.khoMatchStatus==="name").length,m=this.ListImportExcel.filter(u=>u.configOptions?.khoMatchStatus==="default").length,_=this.ListImportExcel.filter(u=>u.configOptions?.khoMatchStatus==="manual").length;return{total:e,confirmed:t,exactMatch:n,partialMatch:o,nameMatch:s,defaultMatch:m,manualMatch:_}}handleCancelDathang(e){return b(this,null,function*(){(yield this.cancelOrderService.cancelDathang(e))&&console.log("\u0110\u01A1n \u0111\u1EB7t h\xE0ng \u0111\xE3 \u0111\u01B0\u1EE3c h\u1EE7y th\xE0nh c\xF4ng")})}getStatusLabel(e){return{choxuly:"Ch\u1EDD x\u1EED l\xFD",dangxuly:"\u0110ang x\u1EED l\xFD",hoanthanh:"Ho\xE0n th\xE0nh",huy:"\u0110\xE3 h\u1EE7y",dahuy:"\u0110\xE3 h\u1EE7y"}[e]||e}getStatusClass(e){return{hoanthanh:"bg-green-100 text-green-800",dangxuly:"bg-blue-100 text-blue-800",choxuly:"bg-yellow-100 text-yellow-800",huy:"bg-red-100 text-red-800",dahuy:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"}dialogComparePrice;comparePriceData=[];comparePriceColumns=[];comparePriceTotalRecords=0;openComparePriceDialog(){return b(this,null,function*(){try{console.log("[COMPARE-PRICE] Opening dialog..."),console.log("[COMPARE-PRICE] Date range:",this.searchParam.Batdau,"->",this.searchParam.Ketthuc);let e=this._snackBar.open("\u0110ang t\u1EA3i d\u1EEF li\u1EC7u so s\xE1nh gi\xE1...","",{duration:0,horizontalPosition:"end",verticalPosition:"top"}),t=yield this.fetchComparePriceData();if(e.dismiss(),!t||t.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u trong kho\u1EA3ng th\u1EDDi gian n\xE0y","\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}this.comparePriceData=t,this.comparePriceTotalRecords=t.length,this.buildComparePriceColumns(t),console.log("[COMPARE-PRICE] Data loaded:",t.length,"products"),this.dialog.open(this.dialogComparePrice,{width:"95vw",maxWidth:"95vw",height:"90vh",maxHeight:"90vh",panelClass:"compare-price-dialog"})}catch(e){console.error("[COMPARE-PRICE] Error:",e),this._snackBar.open("L\u1ED7i t\u1EA3i d\u1EEF li\u1EC7u so s\xE1nh gi\xE1","\u0110\xF3ng",{duration:3e3,panelClass:["snackbar-error"]})}})}fetchComparePriceData(){return b(this,null,function*(){let e=this.searchParam.pageSize;this.searchParam.pageSize=99999,yield this._DathangService.getDathangBy(this.searchParam),this.searchParam.pageSize=e;let t=this._DathangService.ListDathang(),n=new Map;return t.forEach(o=>{let s=o.nhacungcap?.name||"N/A",m=o.nhacungcap?.mancc||"N/A",_=o.ngaynhan?(0,B.default)(o.ngaynhan).format("DD/MM/YYYY"):"N/A";o.sanpham?.forEach(u=>{let I=u.sanpham?.masp||u.masp||"N/A",y=u.sanpham?.title||u.title||"N/A",D=u.sanpham?.dvt||u.dvt||"",P=I;n.has(P)||n.set(P,{masp:I,title:y,dvt:D,suppliers:{}});let x=n.get(P),w=`${m}_${_}`;x.suppliers[w]||(x.suppliers[w]={nhacungcap:s,nhacungcapCode:m,ngaynhan:_,sldat:0,gianhap:u.gianhap||0,count:0}),x.suppliers[w].sldat+=u.sldat||0,x.suppliers[w].count+=1})}),Array.from(n.values())})}buildComparePriceColumns(e){let t=new Set;e.forEach(n=>{Object.keys(n.suppliers||{}).forEach(o=>{t.add(o)})}),this.comparePriceColumns=["stt","masp","title","dvt",...Array.from(t)]}getDisplayedComparePriceData(){return this.comparePriceData.slice(0,10)}exportComparePriceExcel(){return b(this,null,function*(){try{console.log("[EXPORT] Exporting",this.comparePriceData.length,"products...");let e=[],t=new Set;this.comparePriceData.forEach(y=>{Object.keys(y.suppliers||{}).forEach(D=>t.add(D))});let n=Array.from(t).sort(),o={STT:"STT","M\xE3 SP":"M\xE3 SP","T\xEAn s\u1EA3n ph\u1EA9m":"T\xEAn s\u1EA3n ph\u1EA9m",\u0110VT:"\u0110VT"};n.forEach(y=>{let D=this.comparePriceData[0]?.suppliers[y];D&&(o[y]=`${D.nhacungcap} (${D.nhacungcapCode}) - ${D.ngaynhan}`)});let s={STT:"","M\xE3 SP":"","T\xEAn s\u1EA3n ph\u1EA9m":"",\u0110VT:""};n.forEach(y=>{s[y]="SL \u0110\u1EB7t | Gi\xE1 nh\u1EADp"}),e.push(o),e.push(s),this.comparePriceData.forEach((y,D)=>{let P={STT:D+1,"M\xE3 SP":y.masp,"T\xEAn s\u1EA3n ph\u1EA9m":y.title,\u0110VT:y.dvt};n.forEach(x=>{let w=y.suppliers[x];w?P[x]=`${w.sldat} | ${w.gianhap.toLocaleString("vi-VN")} \u0111`:P[x]="-"}),e.push(P)});let m=U.json_to_sheet(e,{skipHeader:!0}),_=U.book_new();U.book_append_sheet(_,m,"So s\xE1nh gi\xE1");let u={};e.forEach(y=>{Object.keys(y).forEach(D=>{let P=String(y[D]||"");u[D]=Math.max(u[D]||10,P.length)})}),m["!cols"]=Object.keys(e[0]||{}).map(y=>({wch:Math.min(u[y]||10,50)}));let I=`So_sanh_gia_${(0,B.default)(this.searchParam.Batdau).format("DDMMYYYY")}_${(0,B.default)(this.searchParam.Ketthuc).format("DDMMYYYY")}.xlsx`;Le(_,I),this._snackBar.open("\u2713 Xu\u1EA5t Excel th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(e){console.error("[EXPORT] Error:",e),this._snackBar.open("L\u1ED7i xu\u1EA5t Excel","\u0110\xF3ng",{duration:3e3,panelClass:["snackbar-error"]})}})}static \u0275fac=function(t){return new(t||j)};static \u0275cmp=mt({type:j,selectors:[["app-listdathang"]],viewQuery:function(t,n){if(t&1&&(z(Te,5),z(Z,5),z(qe,7),z(Ge,5),z(Je,5),z(Ue,5)),t&2){let o;R(o=Y())&&(n.paginator=o.first),R(o=Y())&&(n.sort=o.first),R(o=Y())&&(n.drawer=o.first),R(o=Y())&&(n.dialogImportExcel=o.first),R(o=Y())&&(n.dialogImportExcelCu=o.first),R(o=Y())&&(n.dialogComparePrice=o.first)}},decls:109,vars:32,consts:[["drawer",""],["uploadfile",""],["menu","matMenu"],["pickerBatdau",""],["pickerKetthuc",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["DathangDialog",""],["dialogImportExcelCu",""],["dialogImportExcel",""],["dialogComparePrice",""],["picker",""],["globalDatePicker",""],["orderDatePicker",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["multiple","","type","file",1,"hidden",3,"change"],["mat-icon-button","","color","primary",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","So S\xE1nh Gi\xE1","mat-icon-button","","color","primary",3,"click"],[3,"appearance","subscriptSizing"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click",4,"ngIf"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"flex","items-center","gap-2"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],[1,"flex","items-center","gap-2",3,"click"],["mat-icon-button","","color","warn",1,"text-red-600",3,"click","disabled","matTooltip"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["mat-dialog-title",""],[1,"mat-typography"],[1,"w-full"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","shadow-md","rounded-lg"],[1,"bg-gray-50"],[1,"w-16","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"min-w-[350px]","px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-48","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["matInput","",3,"dateChange","matDatepicker"],[1,"w-40","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-24","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-32","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],["align","end"],["mat-flat-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"click"],[1,"w-16","px-4","py-4","whitespace-nowrap","text-gray-900","items-center"],[1,"min-w-[350px]","px-6","py-4","whitespace-nowrap","text-gray-900"],[1,"w-48","px-4","py-4","whitespace-nowrap","text-gray-900"],[1,"w-40","px-4","py-4","whitespace-nowrap","text-sm","text-gray-900","truncate"],[1,"w-24","px-4","py-4","whitespace-nowrap","text-sm"],[3,"ngClass"],[1,"w-32","px-4","py-4","whitespace-nowrap","text-sm","text-gray-500","truncate"],["mat-icon-button","","color","warn",3,"click"],[3,"selectionChange"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[1,"!whitespace-normal","!h-auto","!py-2",3,"value"],["matInput","",3,"dateChange","ngModel","matDatepicker"],["mat-dialog-title","",1,"flex","items-center","justify-between"],[1,"text-sm","font-normal","text-gray-600","flex","items-center","gap-4"],[1,"text-green-600"],[1,"!max-h-[90vh]","h-[90vh]","!p-0"],[1,"h-full","flex","flex-col"],[1,"border-b","p-4","bg-gray-50"],[1,"flex","flex-wrap","gap-4","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[200px]"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[250px]"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex-1","overflow-auto","p-4"],[1,"grid","gap-4"],[1,"border","rounded-lg","p-4",3,"ngClass"],[1,"text-center","py-8"],[1,"border-t","p-4",3,"align"],[1,"flex","items-center","justify-between","w-full"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[3,"ngModelChange","change","ngModel"],[1,"font-semibold","text-lg"],["mat-icon-button","","color","warn","matTooltip","X\xF3a \u0111\u01A1n h\xE0ng n\xE0y",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","gap-2","text-xs"],[1,"min-w-full","border","border-gray-200","text-sm"],[1,"bg-gray-100"],[1,"px-3","py-2","text-left","font-medium","text-gray-700"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"text-gray-600"],[1,"!text-xs","!py-0","!px-2","!min-h-[20px]",3,"color"],[1,"px-3","py-2"],[1,"px-3","py-2","font-mono"],[1,"px-3","py-2","font-semibold","text-blue-600"],[1,"px-3","py-2","text-gray-600"],["colspan","8",1,"px-3","py-4","text-center","text-gray-500"],[1,"text-gray-500","text-lg","mb-2"],[1,"text-gray-400"],["mat-dialog-title","",1,"flex","justify-between","items-center","border-b","pb-3","mb-4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],["mat-icon-button","","mat-dialog-close",""],[1,"!p-0"],[1,"flex","flex-col","h-full"],[1,"flex","justify-between","items-center","px-4","py-3","bg-blue-50","border-b"],[1,"text-sm","font-medium","text-blue-900"],[1,"overflow-auto","flex-1",2,"max-height","calc(90vh - 200px)"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","stt"],["mat-header-cell","","class","!font-semibold !bg-gray-100 !text-center !border !sticky !left-0 !z-20",4,"matHeaderCellDef"],["mat-cell","","class","!text-center !border !sticky !left-0 !z-10 !bg-white",4,"matCellDef"],["matColumnDef","masp"],["mat-header-cell","","class","!font-semibold !bg-gray-100 !border !sticky !left-12 !z-20",4,"matHeaderCellDef"],["mat-cell","","class","!border !font-mono !text-sm !sticky !left-12 !z-10 !bg-white",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","class","!font-semibold !bg-gray-100 !border !sticky !left-36 !z-20 !min-w-[250px]",4,"matHeaderCellDef"],["mat-cell","","class","!border !sticky !left-36 !z-10 !bg-white !min-w-[250px]",4,"matCellDef"],["matColumnDef","dvt"],["mat-header-cell","","class","!font-semibold !bg-gray-100 !border !text-center",4,"matHeaderCellDef"],["mat-cell","","class","!border !text-center !text-sm",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],[1,"flex","flex-col","items-center","justify-center","py-12"],["align","end",1,"border-t","px-4","py-3"],["mat-stroked-button","","mat-dialog-close",""],["mat-header-cell","",1,"!font-semibold","!bg-gray-100","!text-center","!border","!sticky","!left-0","!z-20"],["mat-cell","",1,"!text-center","!border","!sticky","!left-0","!z-10","!bg-white"],["mat-header-cell","",1,"!font-semibold","!bg-gray-100","!border","!sticky","!left-12","!z-20"],["mat-cell","",1,"!border","!font-mono","!text-sm","!sticky","!left-12","!z-10","!bg-white"],["mat-header-cell","",1,"!font-semibold","!bg-gray-100","!border","!sticky","!left-36","!z-20","!min-w-[250px]"],["mat-cell","",1,"!border","!sticky","!left-36","!z-10","!bg-white","!min-w-[250px]"],["mat-header-cell","",1,"!font-semibold","!bg-gray-100","!border","!text-center"],["mat-cell","",1,"!border","!text-center","!text-sm"],["mat-header-cell","","class","!font-semibold !bg-gray-100 !border !min-w-[200px]",4,"matHeaderCellDef"],["mat-cell","","class","!border",4,"matCellDef"],["mat-header-cell","",1,"!font-semibold","!bg-gray-100","!border","!min-w-[200px]"],[1,"flex","flex-col","gap-1","p-2"],[1,"font-bold","text-blue-800"],[1,"text-xs","text-gray-600"],[1,"text-xs","text-gray-500"],["mat-cell","",1,"!border"],[1,"text-center","text-gray-400","p-2"],[1,"text-sm"],[1,"font-semibold","text-blue-600","ml-1"],[1,"font-semibold","text-green-600","ml-1"],["mat-row","",1,"hover:bg-gray-50"],[1,"text-gray-300","!text-6xl","mb-4"],[1,"text-gray-500","text-lg"],[1,"text-gray-400","text-sm","mt-1"]],template:function(t,n){if(t&1){let o=v();i(0,"mat-drawer-container",15)(1,"mat-drawer",16,0),L(3,"router-outlet"),a(),i(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"input",21),f("keyup",function(m){return d(o),h(n.applyFilter(m))}),a(),i(9,"div",22)(10,"span",23),l(11,"search"),a()()(),i(12,"button",24),f("click",function(){return d(o),h(n.create())}),i(13,"mat-icon"),l(14,"add_circle"),a(),i(15,"span",25),l(16,"T\u1EA1o M\u1EDBi"),a()(),i(17,"div",19)(18,"button",26),f("click",function(){d(o);let m=T(22);return h(m.click())}),i(19,"mat-icon"),l(20,"file_upload"),a()(),i(21,"input",27,1),f("change",function(m){return d(o),h(n.ImporExcel(m))}),a(),i(23,"button",28),f("click",function(){return d(o),h(n.ExportExcel())}),i(24,"mat-icon"),l(25,"download"),a()(),i(26,"button",29)(27,"mat-icon"),l(28,"tune"),a()(),i(29,"mat-menu",null,2)(31,"div",30)(32,"mat-form-field",31)(33,"input",32),f("input",function(m){return d(o),h(n.doFilterColumns(m))})("click",function(m){return d(o),h(m.stopPropagation())}),a(),i(34,"mat-icon",33),l(35,"search"),a()()(),i(36,"div",34),F(37,an,5,2,"button",35,en),a()(),i(39,"button",36),f("click",function(){return d(o),h(n.openComparePriceDialog())}),i(40,"mat-icon"),l(41,"compare"),a()()(),E(42,ln,2,2),a()(),i(43,"div",19)(44,"mat-form-field",37)(45,"mat-label"),l(46,"B\u1EAFt \u0110\u1EA7u"),a(),i(47,"input",38),O("ngModelChange",function(m){return d(o),N(n.searchParam.Batdau,m)||(n.searchParam.Batdau=m),h(m)}),a(),L(48,"mat-datepicker-toggle",39)(49,"mat-datepicker",null,3),a(),i(51,"mat-form-field",37)(52,"mat-label"),l(53,"K\u1EBFt Th\xFAc"),a(),i(54,"input",38),O("ngModelChange",function(m){return d(o),N(n.searchParam.Ketthuc,m)||(n.searchParam.Ketthuc=m),h(m)}),a(),L(55,"mat-datepicker-toggle",39)(56,"mat-datepicker",null,4),a(),i(58,"button",28),f("click",function(){return d(o),h(n.onDateChange())}),i(59,"mat-icon"),l(60,"search"),a()()(),i(61,"div",40)(62,"table",41),F(63,wn,3,1,"ng-container",42,it),E(65,vn,1,0,"tr",43)(66,bn,1,3,"tr",44)(67,kn,3,0,"tr",45),a()(),i(68,"div",46)(69,"div",47)(70,"span",48),l(71,"\u0110ang Xem "),i(72,"strong"),l(73),a(),l(74," - "),i(75,"strong"),l(76),a(),l(77),a(),i(78,"div",49)(79,"span",50,5),l(81),a(),i(82,"mat-menu",null,6)(84,"div",51),f("click",function(m){return d(o),h(m.stopPropagation())}),i(85,"mat-form-field",52)(86,"mat-label"),l(87,"S\u1ED1 l\u01B0\u1EE3ng"),a(),i(88,"input",53),O("ngModelChange",function(m){return d(o),N(n.pageSize,m)||(n.pageSize=m),h(m)}),a()(),i(89,"button",28),f("click",function(){d(o);let m=T(80);return h(n.onPageSizeChange(n.pageSize(),m))}),i(90,"mat-icon"),l(91,"published_with_changes"),a()()()(),i(92,"div",54)(93,"button",55),f("click",function(){return d(o),h(n.onPreviousPage())}),i(94,"mat-icon"),l(95,"keyboard_arrow_left"),a()(),i(96,"button",55),f("click",function(){return d(o),h(n.onNextPage())}),i(97,"mat-icon"),l(98,"keyboard_arrow_right"),a()()()()()()()(),E(99,Mn,11,0,"ng-template",null,7,Q)(101,Ln,11,0,"ng-template",null,8,Q)(103,Vn,36,3,"ng-template",null,9,Q)(105,Yn,43,14,"ng-template",null,10,Q)(107,li,49,16,"ng-template",null,11,Q)}if(t&2){let o=T(30),s=T(50),m=T(57),_=T(83);c(),g("position","end"),c(25),g("matMenuTriggerFor",o),c(11),A(n.FilterColumns),c(5),M(n.EditList.length>0?42:-1),c(2),g("appearance","outline")("subscriptSizing","dynamic"),c(3),g("matDatepicker",s),V("ngModel",n.searchParam.Batdau),g("ngModelOptions",J(29,lt)),c(),g("for",s),c(3),g("appearance","outline")("subscriptSizing","dynamic"),c(3),g("matDatepicker",m),V("ngModel",n.searchParam.Ketthuc),g("ngModelOptions",J(30,lt)),c(),g("for",m),c(7),g("dataSource",n.dataSource),c(),A(n.displayedColumns),c(2),g("matHeaderRowDef",n.displayedColumns),c(),g("matRowDefColumns",n.displayedColumns),c(7),S((n.page()-1)*n.pageSize()+1),c(3),S(n.page()*n.pageSize()>n.total()?n.total():n.page()*n.pageSize()),c(),at(" trong s\u1ED1 ",n.total()," m\u1EE5c, ",n.page(),"/",n.pageCount()," Trang"),c(2),g("matMenuTriggerFor",_),c(2),C("Hi\u1EC7n Th\u1ECB : ",n.pageSize()," m\u1EE5c"),c(7),V("ngModel",n.pageSize),g("ngModelOptions",J(31,lt)),c(5),g("disabled",n.page()===1),c(3),g("disabled",n.page()===n.pageCount())}},dependencies:[ee,te,Jt,Ut,Zt,ie,ne,we,de,ge,Ce,_e,he,ye,fe,xe,Ee,Se,De,Fe,Z,Pe,Ie,Kt,Ot,Nt,Bt,Ft,It,Pt,Et,Vt,At,Lt,kt,Mt,oe,ae,bt,yt,gt,_t,ft,Ct,xt,Ht,zt,Rt,Yt,Me,ke,le,re,pe,se,ce,me,vt,Gt,jt,Xt,qt,Qt,$t,ue,be,ve],encapsulation:2,changeDetection:0})};G([rt(500)],j.prototype,"applyFilter",1),G([Ne()],j.prototype,"FilterHederColumn",1),G([rt(300)],j.prototype,"doFilterHederColumn",1);var We=j;export{We as a};
