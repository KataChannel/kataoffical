import{a as s}from"./chunk-Q7E7WSHM.js";import{a as u}from"./chunk-L5GX4ZSB.js";import{b as y}from"./chunk-ZKZQQDX4.js";import{c as p}from"./chunk-VF6Z3BLE.js";import{Ra as i,ja as g,oa as h}from"./chunk-TAKLKH4V.js";import{a as c,j as r}from"./chunk-WJTR2IJE.js";var l=class d{constructor(e,t,o){this._StorageService=e;this.router=t;this.timezoneService=o}ListDonhang=i([]);DetailDonhang=i({});page=i(1);pageCount=i(1);total=i(0);pageSize=i(50);donhangId=i(null);setDonhangId(e){this.donhangId.set(e)}ImportDonhangCu(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/importold`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();return o.ok,n}catch(t){return console.error(t)}})}ImportDonhang(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/import`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(n.id),n}catch(t){return console.error(t)}})}DongboGia(e){return r(this,null,function*(){let t=e.map(o=>o.id);try{let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=yield fetch(`${s.APIURL}/donhang/dongbogia`,o);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let a=yield n.json();return n.ok,this.getAllDonhang(),a}catch(o){return console.error(o)}})}CreateDonhang(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();return o.ok,this.getAllDonhang(),this.donhangId.set(n.id),n}catch(t){return console.error(t)}})}DagiaoDonhang(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/${e.id}/dagiao`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();o.ok,console.log(n)}catch(t){return console.error(t)}})}getSLChogiao(e){return r(this,null,function*(){let t=c({},e);if(t.Batdau||t.Ketthuc){let o=this.timezoneService.getAPIDateRange(t.Batdau,t.Ketthuc);t.Batdau=o.Batdau,t.Ketthuc=o.Ketthuc}try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},n=yield fetch(`${s.APIURL}/donhang/getchogiao`,o);n.ok;let a=yield n.json();return this.ListDonhang.set(a.data),this.page.set(a.pageNumber),this.pageCount.set(a.totalPages),this.total.set(a.total),this.pageSize.set(a.pageSize),a}catch(o){return console.error(o)}})}searchDonhang(e){return r(this,null,function*(){let t=c({},e);if(t.Batdau||t.Ketthuc){let o=this.timezoneService.getAPIDateRange(t.Batdau,t.Ketthuc);t.Batdau=o.Batdau,t.Ketthuc=o.Ketthuc}try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},n=yield fetch(`${s.APIURL}/donhang/search`,o);n.ok;let a=yield n.json();return this.ListDonhang.set(a.data),this.page.set(a.pageNumber),this.pageCount.set(a.totalPages),this.total.set(a.total),this.pageSize.set(a.pageSize),a}catch(o){return console.error(o)}})}searchCongno(e){return r(this,null,function*(){let t=c({},e);if(t.Batdau||t.Ketthuc){let o=this.timezoneService.getAPIDateRange(t.Batdau,t.Ketthuc);t.Batdau=o.Batdau,t.Ketthuc=o.Ketthuc}try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},n=yield fetch(`${s.APIURL}/donhang/congnokhachhang`,o);n.ok;let a=yield n.json();return this.ListDonhang.set(a),a}catch(o){return console.error(o)}})}Phieuchuyen(e){return r(this,null,function*(){let t=c({},e);if(t.Batdau||t.Ketthuc){let o=this.timezoneService.getAPIDateRange(t.Batdau,t.Ketthuc);t.Batdau=o.Batdau,t.Ketthuc=o.Ketthuc}try{let o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(t)},n=yield fetch(`${s.APIURL}/donhang/phieuchuyen`,o);n.ok;let a=yield n.json();this.ListDonhang.set(a)}catch(o){return console.error(o)}})}Phieugiaohang(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/phieugiao`,t);o.ok;let n=yield o.json();this.DetailDonhang.set(n)}catch(t){return console.error(t)}})}findbysanpham(e){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},o=yield fetch(`${s.APIURL}/donhang/findbysanpham/${e}`,t);return o.ok,yield o.json()}catch(t){return console.error(t)}})}getAllDonhang(){return r(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${s.APIURL}/donhang`,e);t.ok;let o=yield t.json();this.ListDonhang.set(o)}catch(e){return console.error(e)}})}getDonhangByid(e){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},o=yield fetch(`${s.APIURL}/donhang/findid/${e}`,t);o.ok;let n=yield o.json();this.DetailDonhang.set(n)}catch(t){return console.error(t)}})}updateDonhang(e){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/${e.id}`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();return o.ok,this.getAllDonhang(),this.getDonhangByid(e.id),n}catch(t){return console.error(t)}})}updatePhieugiao(e){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/phieugiao/${e.id}`,t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);let n=yield o.json();o.ok,this.Phieugiaohang({id:e.id})}catch(t){return console.error(t)}})}DeleteDonhang(e){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};(yield fetch(`${s.APIURL}/donhang/${e.id}`,t)).ok}catch(t){return console.error(t)}})}UpdateBulkDonhang(e){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/bulk`,t);return o.ok,this.getAllDonhang(),yield o.json()}catch(t){return console.error(t)}})}DeleteBulkDonhang(e){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/bulk`,t);return o.ok,this.getAllDonhang(),yield o.json()}catch(t){return console.error(t)}})}SearchField(e){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=yield fetch(`${s.APIURL}/donhang/searchfield`,t);o.ok;let n=yield o.json();return this.DetailDonhang.set(n),n}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||d)(h(y),h(p),h(u))};static \u0275prov=g({token:d,factory:d.\u0275fac,providedIn:"root"})};export{l as a};
