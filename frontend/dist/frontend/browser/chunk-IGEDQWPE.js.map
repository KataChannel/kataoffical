{
  "version": 3,
  "sources": ["src/app/shared/utils/date-helpers.ts"],
  "sourcesContent": ["import moment from 'moment';\n\nexport class DateHelpers {\n  private static readonly TIMEZONE = 'Asia/Ho_Chi_Minh';\n  private static readonly ISO_FORMAT = 'YYYY-MM-DDTHH:mm:ss.SSSZ';\n  private static readonly DATE_FORMAT = 'YYYY-MM-DD';\n  private static readonly DATETIME_FORMAT = 'YYYY-MM-DD HH:mm:ss';\n\n  /**\n   * Initialize and suppress deprecation warnings\n   */\n  static init(): void {\n    // Suppress moment deprecation warnings\n    moment.suppressDeprecationWarnings = true;\n  }\n\n  /**\n   * Safely convert any date input to moment without deprecation warnings\n   */\n  static toMoment(date: Date | string | moment.Moment | null | undefined, timezone = 'Asia/Ho_Chi_Minh'): moment.Moment {\n    if (!date) {\n      return moment();\n    }\n\n    if (moment.isMoment(date)) {\n      return date.clone();\n    }\n    \n    if (date instanceof Date) {\n      // Convert Date to ISO string first to avoid deprecation warning\n      return moment(date.toISOString());\n    }\n    \n    if (typeof date === 'string') {\n      // Handle various string formats\n      if (date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n        // YYYY-MM-DD format\n        return moment(date, this.DATE_FORMAT);\n      }\n      if (date.match(/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/)) {\n        // YYYY-MM-DD HH:mm:ss format\n        return moment(date, this.DATETIME_FORMAT);\n      }\n      if (date.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n        // DD/MM/YYYY format (Vietnamese)\n        return moment(date, 'DD/MM/YYYY');\n      }\n      // For other formats, try to parse as ISO string\n      return moment(date);\n    }\n    \n    return moment();\n  }\n\n  /**\n   * Convert any date input to ISO string for API calls\n   */\n  static toISOString(date: Date | string | moment.Moment | null | undefined): string {\n    if (!date) {\n      return moment().toISOString();\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.toISOString();\n  }\n\n  /**\n   * Convert any date input to Date object\n   */\n  static toDate(date: Date | string | moment.Moment | null | undefined): Date {\n    if (!date) {\n      return new Date();\n    }\n\n    if (date instanceof Date) {\n      return date;\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.toDate();\n  }\n\n  /**\n   * Format date for display\n   */\n  static formatDate(date: Date | string | moment.Moment | null | undefined, format: string = 'DD/MM/YYYY'): string {\n    if (!date) {\n      return '';\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.format(format);\n  }\n\n  /**\n   * Format date for API (YYYY-MM-DD)\n   */\n  static formatDateForAPI(date: Date | string | moment.Moment | null | undefined): string {\n    if (!date) {\n      return '';\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.format(this.DATE_FORMAT);\n  }\n\n  /**\n   * Format datetime for API (YYYY-MM-DD HH:mm:ss)\n   */\n  static formatDateTimeForAPI(date: Date | string | moment.Moment | null | undefined): string {\n    if (!date) {\n      return '';\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.format(this.DATETIME_FORMAT);\n  }\n\n  /**\n   * Get start of day\n   */\n  static startOfDay(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.startOf('day').toDate();\n  }\n\n  /**\n   * Get end of day\n   */\n  static endOfDay(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.endOf('day').toDate();\n  }\n\n  /**\n   * Get start of week\n   */\n  static startOfWeek(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.startOf('week').toDate();\n  }\n\n  /**\n   * Get end of week\n   */\n  static endOfWeek(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.endOf('week').toDate();\n  }\n\n  /**\n   * Get start of month\n   */\n  static startOfMonth(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.startOf('month').toDate();\n  }\n\n  /**\n   * Get end of month\n   */\n  static endOfMonth(date?: Date | string | moment.Moment | null | undefined): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.endOf('month').toDate();\n  }\n\n  /**\n   * Add time to date\n   */\n  static add(date: Date | string | moment.Moment | null | undefined, amount: number, unit: moment.unitOfTime.DurationConstructor): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.add(amount, unit).toDate();\n  }\n\n  /**\n   * Subtract time from date\n   */\n  static subtract(date: Date | string | moment.Moment | null | undefined, amount: number, unit: moment.unitOfTime.DurationConstructor): Date {\n    const momentDate = this.toMoment(date);\n    return momentDate.subtract(amount, unit).toDate();\n  }\n\n  /**\n   * Format date safely\n   */\n  static format(date: Date | string | moment.Moment | null | undefined, format: string = 'YYYY-MM-DD'): string {\n    if (!date) {\n      return '';\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.format(format);\n  }\n\n  /**\n   * Get current date\n   */\n  static now(): Date {\n    return moment().toDate();\n  }\n\n  /**\n   * Get date range presets\n   */\n  static getDateRangePresets(): {\n    [key: string]: {\n      start: Date;\n      end: Date;\n      startFormatted: string;\n      endFormatted: string;\n    }\n  } {\n    const now = new Date();\n    \n    return {\n      today: {\n        start: this.startOfDay(now),\n        end: this.endOfDay(now),\n        startFormatted: this.formatDateForAPI(this.startOfDay(now)),\n        endFormatted: this.formatDateForAPI(this.endOfDay(now))\n      },\n      yesterday: {\n        start: this.startOfDay(this.subtract(now, 1, 'day')),\n        end: this.endOfDay(this.subtract(now, 1, 'day')),\n        startFormatted: this.formatDateForAPI(this.startOfDay(this.subtract(now, 1, 'day'))),\n        endFormatted: this.formatDateForAPI(this.endOfDay(this.subtract(now, 1, 'day')))\n      },\n      last7days: {\n        start: this.startOfDay(this.subtract(now, 6, 'days')),\n        end: this.endOfDay(now),\n        startFormatted: this.formatDateForAPI(this.startOfDay(this.subtract(now, 6, 'days'))),\n        endFormatted: this.formatDateForAPI(this.endOfDay(now))\n      },\n      last30days: {\n        start: this.startOfDay(this.subtract(now, 29, 'days')),\n        end: this.endOfDay(now),\n        startFormatted: this.formatDateForAPI(this.startOfDay(this.subtract(now, 29, 'days'))),\n        endFormatted: this.formatDateForAPI(this.endOfDay(now))\n      },\n      thisMonth: {\n        start: this.startOfMonth(now),\n        end: this.endOfDay(now),\n        startFormatted: this.formatDateForAPI(this.startOfMonth(now)),\n        endFormatted: this.formatDateForAPI(this.endOfDay(now))\n      },\n      lastMonth: {\n        start: this.startOfMonth(this.subtract(now, 1, 'month')),\n        end: this.endOfMonth(this.subtract(now, 1, 'month')),\n        startFormatted: this.formatDateForAPI(this.startOfMonth(this.subtract(now, 1, 'month'))),\n        endFormatted: this.formatDateForAPI(this.endOfMonth(this.subtract(now, 1, 'month')))\n      }\n    };\n  }\n\n  /**\n   * Safe moment creation from any input\n   */\n  static safeMoment(input?: any): moment.Moment {\n    if (!input) {\n      return moment();\n    }\n    \n    if (moment.isMoment(input)) {\n      return input.clone();\n    }\n    \n    if (input instanceof Date) {\n      return moment(input.toISOString());\n    }\n    \n    if (typeof input === 'string') {\n      return moment(input);\n    }\n    \n    return moment();\n  }\n\n  /**\n   * Check if date is valid\n   */\n  static isValid(date: Date | string | moment.Moment | null | undefined): boolean {\n    if (!date) {\n      return false;\n    }\n\n    const momentDate = this.toMoment(date);\n    return momentDate.isValid();\n  }\n\n  /**\n   * Compare two dates\n   */\n  static isBefore(date1: Date | string | moment.Moment, date2: Date | string | moment.Moment): boolean {\n    const moment1 = this.toMoment(date1);\n    const moment2 = this.toMoment(date2);\n    return moment1.isBefore(moment2);\n  }\n\n  /**\n   * Compare two dates\n   */\n  static isAfter(date1: Date | string | moment.Moment, date2: Date | string | moment.Moment): boolean {\n    const moment1 = this.toMoment(date1);\n    const moment2 = this.toMoment(date2);\n    return moment1.isAfter(moment2);\n  }\n\n  /**\n   * Check if dates are same day\n   */\n  static isSameDay(date1: Date | string | moment.Moment, date2: Date | string | moment.Moment): boolean {\n    const moment1 = this.toMoment(date1);\n    const moment2 = this.toMoment(date2);\n    return moment1.isSame(moment2, 'day');\n  }\n\n  /**\n   * Get difference between dates\n   */\n  static diff(date1: Date | string | moment.Moment, date2: Date | string | moment.Moment, unit: moment.unitOfTime.Diff = 'days'): number {\n    const moment1 = this.toMoment(date1);\n    const moment2 = this.toMoment(date2);\n    return moment1.diff(moment2, unit);\n  }\n}\n"],
  "mappings": "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",
  "names": ["moment"]
}
