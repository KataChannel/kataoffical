import{a}from"./chunk-VUZTNYK4.js";import{a as p}from"./chunk-GZG7KN3H.js";import{c as d}from"./chunk-F6BQ2XIX.js";import{Na as s,fa as h,ka as c}from"./chunk-6Q4IMLE7.js";import{j as r}from"./chunk-XXD5T5ZZ.js";var g=class i{constructor(o,t){this._StorageService=o;this.router=t}ListDonhang=s([]);DetailDonhang=s({});donhangId=s(null);setDonhangId(o){this.donhangId.set(o)}CreateDonhang(o){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},n=yield fetch(`${a.APIURL}/donhang`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return n.ok,this.getAllDonhang(),this.donhangId.set(e.id),e}catch(t){return console.error(t)}})}searchDonhang(o){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")},body:JSON.stringify(o)},n=yield fetch(`${a.APIURL}/donhang/search`,t);n.ok;let e=yield n.json();this.ListDonhang.set(e)}catch(t){return console.error(t)}})}getAllDonhang(){return r(this,null,function*(){try{let o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${a.APIURL}/donhang`,o);t.ok;let n=yield t.json();this.ListDonhang.set(n)}catch(o){return console.error(o)}})}getDonhangByid(o){return r(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},n=yield fetch(`${a.APIURL}/donhang/findid/${o}`,t);n.ok;let e=yield n.json();this.DetailDonhang.set(e)}catch(t){return console.error(t)}})}updateDonhang(o){return r(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},n=yield fetch(`${a.APIURL}/donhang/${o.id}`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();n.ok,this.getAllDonhang(),this.getDonhangByid(o.id)}catch(t){return console.error(t)}})}DeleteDonhang(o){return r(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};(yield fetch(`${a.APIURL}/donhang/${o.id}`,t)).ok,this.getAllDonhang()}catch(t){return console.error(t)}})}SearchDonhang(o){return r(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},n=yield fetch(`${a.APIURL}/donhang/search`,t);n.ok;let e=yield n.json();return this.ListDonhang.set(e.items),e}catch(t){return console.error(t)}})}SearchField(o){return r(this,null,function*(){console.log(o);try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},n=yield fetch(`${a.APIURL}/donhang/searchfield`,t);return n.ok,yield n.json()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||i)(c(p),c(d))};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
