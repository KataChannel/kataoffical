import{a as Ne}from"./chunk-ZW44ZSN2.js";import{k as Ke}from"./chunk-LKQIN2HU.js";import{b as Ve}from"./chunk-G6F3EUQ5.js";import{h as he}from"./chunk-5WSCXALS.js";import{b as Me,d as xe,e as B,f as Se,g as O,h as we,i as be,j as Ie,k as Fe,l as ve,m as Te,n as Ee,o as ke,p as De,q as Le,r as Pe,s as R,t as A}from"./chunk-RKCNNI2N.js";import{b as L,c as M,d as P}from"./chunk-AVIIXVGM.js";import{c as de}from"./chunk-B4FVYSZE.js";import{b as z}from"./chunk-3FHOQBDX.js";import{a as pe}from"./chunk-X66ZAGGX.js";import{a as v,b as T,d as E}from"./chunk-3QQ7WLKN.js";import{b as fe,g as _e,j as ge,n as V,u as Ce,v as K,x as ye,y as N}from"./chunk-4NZTMXFR.js";import{a as k,b as D}from"./chunk-K2APTHBJ.js";import{l as se,m as ce,o as ue,q as F}from"./chunk-IXS2H2R2.js";import{$b as r,Ab as I,Ac as g,Bc as ne,Cc as re,Fc as ae,Ga as U,Gc as oe,Hb as h,Hc as le,Jc as me,Na as $,Oc as q,Qc as W,Rb as u,Wb as Q,Yb as Y,Zb as Z,_b as ee,ac as o,bc as j,cc as te,dc as ie,fc as C,kc as f,la as J,mc as s,ob as m,sc as x,ta as G,tc as S,ua as p,uc as w,va as d,xc as y,yc as l,zc as b}from"./chunk-64COTWEO.js";import{a as X}from"./chunk-XXD5T5ZZ.js";function je(n,i){if(n&1&&(r(0,"button",17,1),l(2),o()),n&2){let t=s(),e=y(3);u("disabled",!t.isEdit())("matMenuTriggerFor",e),m(2),ne(" ",t.CountItems," ",t.title,`
`)}}function qe(n,i){if(n&1&&(r(0,"button",18,1)(2,"mat-icon"),l(3),o()()),n&2){let t=s(),e=y(3);u("matMenuTriggerFor",e),m(3),b(t.icon)}}function We(n,i){n&1&&(r(0,"span",21),l(1,"check"),o())}function Xe(n,i){if(n&1){let t=C();r(0,"div",19),f("click",function(){let a=p(t).$implicit,c=s();return d(c.ChosenItem(a))}),h(1,We,2,0,"span",20),l(2),o()}if(n&2){let t=i.$implicit,e=s();m(),u("ngIf",e.CheckItem(t)),m(),g(" ",t[e.fieldsearch]," ")}}var H=class n{ListItem=[];filterItem=[];ListFilter=[];CountItems=0;icon="";title="Items";fieldsearch="title";isEdit=$(!1);isDelete=$(!1);OutFilter=new U;menuTrigger;trackByFn(i,t){return t.id}ChosenAll(){this.ListFilter=this.ListItem}RemoveAll(){this.ListFilter=[],this.filterItem=this.ListItem}doFilterItem(i,t){let e=i.target.value;this.filterItem=this.ListItem.filter(a=>Ne(a[t]).includes(e.toLowerCase())||a[t].toLowerCase().includes(e.toLowerCase()))}DoListFilter(){this.filterItem=this.ListFilter}ChosenItem(i){let t=this.filterItem.filter(a=>a.id===i.id);this.ListFilter.filter(a=>a.id===i.id).length>0?this.ListFilter=this.ListFilter?.filter(a=>a.id!==i.id):this.ListFilter=[...this.ListFilter,...t]}CheckItem(i){return!!this.ListFilter?.find(t=>t.id===i.id)}ApplyFilterColum(i){this.OutFilter.emit(this.ListFilter),i.closeMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-searchfilter"]],viewQuery:function(t,e){if(t&1&&x(M,5),t&2){let a;S(a=w())&&(e.menuTrigger=a.first)}},inputs:{ListItem:"ListItem",filterItem:"filterItem",ListFilter:"ListFilter",CountItems:"CountItems",icon:"icon",title:"title",fieldsearch:"fieldsearch",isEdit:"isEdit",isDelete:"isDelete"},outputs:{OutFilter:"OutFilter"},decls:25,vars:5,consts:[["menu","matMenu"],["menuTrigger","matMenuTrigger"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"]],template:function(t,e){if(t&1){let a=C();h(0,je,3,4,"button",2)(1,qe,4,2,"button",3),r(2,"mat-menu",null,0)(4,"div",4),f("click",function(_){return p(a),d(_.stopPropagation())}),r(5,"div",5)(6,"input",6),f("keyup",function(_){return p(a),d(e.doFilterItem(_,e.fieldsearch))}),o(),r(7,"div",7)(8,"span",8),l(9,"search"),o()()(),r(10,"div",9)(11,"div",10)(12,"span",11),f("click",function(){return p(a),d(e.ChosenAll())}),l(13,"Ch\u1ECDn T\u1EA5t C\u1EA3"),o(),r(14,"span",11),f("click",function(){return p(a),d(e.RemoveAll())}),l(15,"Xo\xE1"),o()(),r(16,"span",11),f("click",function(){return p(a),d(e.DoListFilter())}),l(17),o()(),r(18,"div",12),h(19,Xe,3,2,"div",13),o(),r(20,"div",14)(21,"button",15),f("click",function(){return p(a),d(e.menuTrigger.closeMenu())}),l(22,"\u0110\xF3ng"),o(),r(23,"button",16),f("click",function(){return p(a),d(e.ApplyFilterColum(e.menuTrigger))}),l(24,"\xC1p D\u1EE5ng"),o()()()()}t&2&&(u("ngIf",!e.icon),m(),u("ngIf",e.icon),m(16),g("",e.ListFilter.length||0," \u0110ang ch\u1ECDn"),m(2),u("ngForOf",e.filterItem)("ngForTrackBy",e.trackByFn))},dependencies:[K,N,V,D,k,E,v,T,z,he,F,se,ce,Ve,Ke,O,xe,R,P,L,M],encapsulation:2,changeDetection:0})};var Je=["drawer"],Ge=()=>({standalone:!0});function Ue(n,i){if(n&1){let t=C();r(0,"th",22)(1,"span",23),l(2),o(),r(3,"app-searchfilter",24),f("OutFilter",function(a){p(t);let c=s(2);return d(c.onOutFilter(a))}),o()()}if(n&2){let t=s().$implicit,e=s();m(2),g(" ",e.ColumnName[t]," "),m(),u("icon","filter_alt")("ListItem",e.ListItem)("ListFilter",e.ListFilter)("filterItem",e.FilterHederColumn(e.dataSource.filteredData,t))}}function Ye(n,i){if(n&1&&(r(0,"span",26),l(1),o()),n&2){let t=s().index;m(),g(" ",t+1," ")}}function Ze(n,i){if(n&1&&(r(0,"span",26),l(1),q(2,"date"),o()),n&2){let t=s().$implicit,e=s().$implicit;m(),g(" ",W(2,1,t[e],"dd/MM/yyyy")," ")}}function et(n,i){n&1&&(r(0,"mat-icon",27),l(1,"check_circle"),o())}function tt(n,i){n&1&&(r(0,"mat-icon",28),l(1,"cancel"),o())}function it(n,i){if(n&1&&(r(0,"span",26),h(1,et,2,0,"mat-icon",27)(2,tt,2,0,"mat-icon",28),o()),n&2){let t=s().$implicit,e=s().$implicit;m(),Q(t[e]?1:2)}}function nt(n,i){if(n&1&&(r(0,"span",26),l(1),q(2,"date"),o()),n&2){let t=s().$implicit,e=s().$implicit;m(),g(" ",W(2,1,t[e],"dd/MM/yyyy")," ")}}function rt(n,i){if(n&1&&(r(0,"span",26),l(1),o()),n&2){let t=s().$implicit,e=s().$implicit;m(),g(" ",t[e]," ")}}function at(n,i){if(n&1&&(r(0,"td",25),h(1,Ye,2,1,"span",26)(2,Ze,3,4,"span",26)(3,it,3,1,"span",26)(4,nt,3,4,"span",26)(5,rt,2,1,"span",26),o()),n&2){let t,e=s().$implicit;m(),Q((t=e)==="STT"?1:t==="createdAt"?2:t==="isActive"?3:t==="updatedAt"?4:5)}}function ot(n,i){if(n&1&&(te(0,5),h(1,Ue,4,5,"th",20)(2,at,6,1,"td",21),ie()),n&2){let t=i.$implicit;u("matColumnDef",t)}}function lt(n,i){n&1&&j(0,"tr",29)}function mt(n,i){n&1&&j(0,"tr",30)}function st(n,i){n&1&&(r(0,"tr",31)(1,"td",32),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}var ze=class n{ListItem=[];displayedColumns=[];ColumnName={};totalItems=0;pageSize=10;currentPage=1;totalPages=1;FilterColumns=JSON.parse(localStorage.getItem("NhacungcapColFilter")||"[]");isFilter=!1;sort;drawer;filterValues={};dataSource=new A([]);_snackBar=J(pe);ngOnChanges(i){i.ListItem&&i.ListItem.currentValue,i.displayedColumns&&i.displayedColumns.currentValue&&(this.displayedColumns=[...this.displayedColumns]),i.ColumnName&&i.ColumnName.currentValue&&(this.ColumnName=X({},this.ColumnName)),this.totalItems=this.ListItem.length,this.pageSize=this.pageSize||10,this.currentPage=1,this.totalPages=Math.ceil(this.totalItems/this.pageSize),console.log(this.pageSize),this.calculateTotalPages(),this.updateDataSource()}updateDataSource(){this.dataSource=new A([...this.ListItem]),this.dataSource.sort=this.sort}ngAfterViewInit(){this.dataSource&&(this.dataSource.sort=this.sort)}onOutFilter(i){this.dataSource=new A([...i]),this.dataSource.sort=this.sort}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(i,t){i>this.ListItem.length?(this.pageSize=this.ListItem.length,this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.ListItem.length}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})):this.pageSize=i,this.currentPage=1,this.calculateTotalPages(),this.updateDisplayData(),t.closeMenu()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayData())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayData())}updateDisplayData(){let i=(this.currentPage-1)*this.pageSize,t=i+this.pageSize,e=this.ListItem.slice(i,t);this.dataSource.data=e}FilterHederColumn(i,t){return i.filter((a,c,_)=>c===_.findIndex(Be=>Be[t]===a[t]))}ListFilter=[];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-ktable"]],viewQuery:function(t,e){if(t&1&&(x(B,5),x(Je,7)),t&2){let a;S(a=w())&&(e.sort=a.first),S(a=w())&&(e.drawer=a.first)}},inputs:{ListItem:"ListItem",displayedColumns:"displayedColumns",ColumnName:"ColumnName",totalItems:"totalItems",pageSize:"pageSize",currentPage:"currentPage",totalPages:"totalPages"},features:[G],decls:38,vars:15,consts:[["menuHienthi","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-col","space-y-2","h-full","w-full","p-2"],[1,"border","rounded-lg","w-full","h-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-col","space-y-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary",3,"click"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[3,"OutFilter","icon","ListItem","ListFilter","filterItem"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,e){if(t&1){let a=C();r(0,"div",2)(1,"div",3)(2,"table",4),Z(3,ot,3,1,"ng-container",5,Y),h(5,lt,1,0,"tr",6)(6,mt,1,0,"tr",7)(7,st,3,0,"tr",8),o()(),r(8,"div",9)(9,"div",10)(10,"span",11),l(11,"\u0110ang Xem "),r(12,"strong"),l(13),o(),l(14," - "),r(15,"strong"),l(16),o(),l(17),o(),r(18,"div",12)(19,"span",13,0),l(21),o(),r(22,"mat-menu",null,1)(24,"div",14),f("click",function(_){return p(a),d(_.stopPropagation())}),r(25,"span"),l(26,"S\u1ED1 L\u01B0\u1EE3ng"),o(),r(27,"mat-form-field",15)(28,"input",16),le("ngModelChange",function(_){return p(a),oe(e.pageSize,_)||(e.pageSize=_),d(_)}),o()(),r(29,"button",17),f("click",function(){p(a);let _=y(20);return d(e.onPageSizeChange(e.pageSize,_))}),l(30,"\xC1p D\u1EE5ng"),o()()(),r(31,"div",18)(32,"button",19),f("click",function(){return p(a),d(e.onPreviousPage())}),r(33,"mat-icon"),l(34,"keyboard_arrow_left"),o()(),r(35,"button",19),f("click",function(){return p(a),d(e.onNextPage())}),r(36,"mat-icon"),l(37,"keyboard_arrow_right"),o()()()()()()()}if(t&2){let a=y(23);m(2),u("dataSource",e.dataSource),m(),ee(e.displayedColumns),m(2),u("matHeaderRowDef",e.displayedColumns),m(),u("matRowDefColumns",e.displayedColumns),m(7),b((e.currentPage-1)*e.pageSize+1),m(3),b(e.currentPage*e.pageSize>e.totalItems?e.totalItems:e.currentPage*e.pageSize),m(),re(" trong s\u1ED1 ",e.totalItems," m\u1EE5c, ",e.currentPage,"/",e.totalPages," Trang"),m(2),u("matMenuTriggerFor",a),m(2),g("Hi\u1EC7n Th\u1ECB : ",e.pageSize," m\u1EE5c"),m(7),ae("ngModel",e.pageSize),u("ngModelOptions",me(14,Ge)),m(4),u("disabled",e.currentPage===1),m(3),u("disabled",e.currentPage===e.totalPages)}},dependencies:[K,Ce,N,ye,R,we,Ie,Ee,Fe,be,ke,ve,Te,De,Le,Pe,O,B,Se,P,L,M,de,D,k,E,v,T,z,F,ue,V,fe,_e,ge,Me,H],encapsulation:2,changeDetection:0})};export{H as a,ze as b};
