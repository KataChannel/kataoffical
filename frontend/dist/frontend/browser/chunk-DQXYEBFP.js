import{a as Ht}from"./chunk-VTCQHFRM.js";import{a as Nt,b as At,c as Kt}from"./chunk-PZCQWKVF.js";import{a as It}from"./chunk-SVUQNHA7.js";import{a as Rt}from"./chunk-MFOZXGRX.js";import{a as Tt}from"./chunk-JCXO4TSM.js";import{a as ht,b as mt}from"./chunk-3FNN46PZ.js";import{b as et,d as tt,e as nt}from"./chunk-STTHC4C4.js";import{a as I}from"./chunk-ZW44ZSN2.js";import{a as Te,b as Le,c as De}from"./chunk-OTBM7FCQ.js";import{a as Ie,b as Ne,c as Ae,d as Ke}from"./chunk-CDVLS2VJ.js";import{a as Lt,b as Dt,d as Ft,f as Mt}from"./chunk-5L43S7G4.js";import{a as j,b as pt,c as dt}from"./chunk-JNFQJYYE.js";import{c as $e,d as Ge,e as Oe,f as Re,g as Xe,h as ze}from"./chunk-C6ZTKERY.js";import{a as lt}from"./chunk-RHYJKD3I.js";import{a as it,b as at,c as ot,k as rt}from"./chunk-GUGI676T.js";import{b as xe,c as Ce}from"./chunk-PWU56VV4.js";import{f as bt}from"./chunk-N62VL4FK.js";import{a as Ot}from"./chunk-P7PTBZX5.js";import{a as Gt}from"./chunk-JNVUT6FC.js";import{a as ct,b as st,c as ut,d as gt,e as _t,g as ft,h as xt,j as Ct,k as yt,m as Et,n as St,p as vt,q as kt,r as wt,s as oe}from"./chunk-DRGFONJ6.js";import{b as Ze}from"./chunk-WGYCBDOD.js";import{b as Qe,c as Je}from"./chunk-ZVLEUULZ.js";import{b as He,g as Ve,j as Pe,p as Be,r as Ye,t as qe,u as je,x as We,y as Ue}from"./chunk-GPRU6KV3.js";import{a as Fe,b as Me}from"./chunk-5BIREHNW.js";import{a as be}from"./chunk-TXVIVA74.js";import{a as ve,c as ke,e as we}from"./chunk-SKIRCMX2.js";import{ka as Se,y as ye,z as Ee}from"./chunk-LXJDFCF2.js";import{k as pe,l as de,m as ue,s as ge,v as _e,x as fe}from"./chunk-KFQ5FW2D.js";import{$b as K,Cc as M,Db as ce,Dc as c,Ec as b,Fc as d,Gc as he,Ic as ee,Jc as te,Kb as y,Kc as ne,Mc as ie,Rc as me,Sc as E,Tb as A,Ub as u,Uc as S,Wb as X,Yb as se,Yc as ae,bc as O,cc as P,dc as B,ec as a,fc as r,gc as F,hc as Q,ic as J,kc as w,pa as V,pc as x,rb as s,rc as m,uc as Z,xc as z,ya as _,yc as Y,za as f,zc as q}from"./chunk-WYL4U5YK.js";import{a as $,b as R,g as U,h as G,j as v}from"./chunk-6DYNGEAS.js";var N=U(Ot());var L=U(Gt());var Bt=U(Rt());var Xt=["drawer"],Vt=()=>({standalone:!0}),zt=(o,n,e,t,i)=>({"text-blue-500":o,"text-yellow-500":n,"text-green-500":e,"text-purple-500":t,"text-red-500":i}),Yt=(o,n)=>n.key;function qt(o,n){o&1&&(a(0,"div",44)(1,"div",45),F(2,"div",46),a(3,"span",47),c(4,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u..."),r()()())}function jt(o,n){o&1&&(a(0,"div",48),F(1,"div",49),r())}function Wt(o,n){o&1&&(a(0,"div",48),F(1,"div",49),r())}function Ut(o,n){if(o&1){let e=w();a(0,"button",26),x("click",function(i){let l=_(e).$implicit;return m().toggleColumn(l),f(i.stopPropagation())}),a(1,"mat-icon"),c(2),r(),a(3,"span"),c(4),r()()}if(o&2){let e=n.$implicit;s(2),b(e.isShow?"check_box":"check_box_outline_blank"),s(2),b(e.value)}}function Qt(o,n){if(o&1){let e=w();a(0,"mat-chip",61),x("removed",function(){let i=_(e).$implicit,l=m(2);return f(l.removeSelectedNhomkhachhang(i))}),a(1,"span"),c(2),r(),a(3,"button",62)(4,"mat-icon"),c(5,"cancel"),r()()()}if(o&2){let e=n.$implicit;u("removable",!0),s(2),b(typeof e=="string"?e:e.name),s(),A("aria-label","X\xF3a "+(typeof e=="string"?e:e.name))}}function Jt(o,n){if(o&1&&(a(0,"small",64),c(1),r()),o&2){let e=m().$implicit;s(),b(e.description)}}function Zt(o,n){if(o&1&&(a(0,"mat-option",57)(1,"span",63),c(2),r(),y(3,Jt,2,1,"small",64),r()),o&2){let e=n.$implicit;u("value",typeof e=="string"?e:e.name),s(2),b(typeof e=="string"?e:e.name),s(),K(typeof e!="string"&&e.description?3:-1)}}function en(o,n){if(o&1){let e=w();a(0,"button",65),x("click",function(){_(e);let i=m(2);return f(i.clearAllSelectedNhomKhachhang())}),a(1,"mat-icon"),c(2,"close"),r()()}}function tn(o,n){if(o&1){let e=w();a(0,"mat-chip",61),x("removed",function(){let i=_(e).$implicit,l=m(2);return f(l.removeSelectedCustomer(i))}),a(1,"span"),c(2),r(),a(3,"button",62)(4,"mat-icon"),c(5,"cancel"),r()()()}if(o&2){let e=n.$implicit;u("removable",!0),s(2),b(typeof e=="string"?e:e.name),s(),A("aria-label","X\xF3a "+(typeof e=="string"?e:e.name))}}function nn(o,n){if(o&1&&(a(0,"small",64),c(1),r()),o&2){let e=m().$implicit;s(),d("M\xE3 KH: ",e.makh,"")}}function an(o,n){if(o&1&&(a(0,"mat-option",57)(1,"span",63),c(2),r(),y(3,nn,2,1,"small",64),r()),o&2){let e=n.$implicit;u("value",typeof e=="string"?e:e.name),s(2),b(typeof e=="string"?e:e.name),s(),K(typeof e!="string"&&e.makh?3:-1)}}function on(o,n){if(o&1){let e=w();a(0,"button",66),x("click",function(){_(e);let i=m(2);return f(i.clearAllSelectedCustomers())}),a(1,"mat-icon"),c(2,"close"),r()()}}function rn(o,n){if(o&1){let e=w();a(0,"div",36)(1,"div",50)(2,"div",51),c(3,"Nh\xF3m Kh\xE1ch H\xE0ng "),r(),a(4,"mat-form-field",52)(5,"mat-chip-set",53),P(6,Qt,6,3,"mat-chip",54,O),r(),a(8,"input",55,7),x("keyup",function(i){_(e);let l=m();return f(l.doFilterNhomKhachhang(i))}),r(),a(10,"mat-autocomplete",56,8),x("optionSelected",function(i){_(e);let l=m();return f(l.onNhomKhachhangSelected(i))}),P(12,Zt,4,3,"mat-option",57,O),r(),y(14,en,3,0,"button",58),r()(),a(15,"div",50)(16,"div",51),c(17,"Kh\xE1ch H\xE0ng "),r(),a(18,"mat-form-field",52)(19,"mat-chip-set",59),P(20,tn,6,3,"mat-chip",54,O),r(),a(22,"input",55,9),x("keyup",function(i){_(e);let l=m();return f(l.doFilterKhachhang(i))}),r(),a(24,"mat-autocomplete",56,10),x("optionSelected",function(i){_(e);let l=m();return f(l.onCustomerSelected(i))}),P(26,an,4,3,"mat-option",57,O),r(),y(28,on,3,0,"button",60),r()()()}if(o&2){let e=M(11),t=M(25),i=m();s(4),u("appearance","outline")("subscriptSizing","dynamic"),s(2),B(i.SelectedNhomKhachhang),s(2),Z("placeholder",i.SelectedNhomKhachhang.length===0?"T\xECm v\xE0 ch\u1ECDn nhi\u1EC1u nh\xF3m kh\xE1ch h\xE0ng":"Th\xEAm nh\xF3m kh\xE1ch h\xE0ng"),u("matAutocomplete",e),s(4),B(i.filterListNhomKhachhang),s(2),K(i.SelectedNhomKhachhang.length>0?14:-1),s(4),u("appearance","outline")("subscriptSizing","dynamic"),s(2),B(i.SelectedKhachhang),s(2),Z("placeholder",i.SelectedKhachhang.length===0?"T\xECm v\xE0 ch\u1ECDn nhi\u1EC1u kh\xE1ch h\xE0ng":"Th\xEAm kh\xE1ch h\xE0ng"),u("matAutocomplete",t),s(4),B(i.filterListKhachhang),s(2),K(i.SelectedKhachhang.length>0?28:-1)}}function ln(o,n){o&1&&(a(0,"div",67)(1,"div",45),F(2,"div",68),a(3,"span",69),c(4,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u..."),r()()())}function cn(o,n){o&1&&(a(0,"span",90),c(1,"check"),r())}function sn(o,n){if(o&1&&(a(0,"span"),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m(2).$implicit;s(),b(S(2,1,e[t],"dd/MM/yyyy"))}}function hn(o,n){if(o&1&&(a(0,"span"),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m(2).$implicit;s(),b(S(2,1,e[t],"dd/MM/yyyy"))}}function mn(o,n){if(o&1&&(a(0,"span"),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m(2).$implicit;s(),b(S(2,1,e[t],"dd/MM/yyyy"))}}function pn(o,n){if(o&1&&(a(0,"span"),c(1),r()),o&2){let e=m().$implicit,t=m(2).$implicit;s(),d("",e[t],"%")}}function dn(o,n){if(o&1&&(a(0,"span"),c(1),r()),o&2){let e=m().$implicit,t=m(2).$implicit;s(),d(" ",e[t]||"Tr\u1ED1ng","")}}function un(o,n){if(o&1){let e=w();a(0,"div",88),x("click",function(){let i=_(e).$implicit,l=m(2).$implicit,h=m();return f(h.ChosenItem(i,l))}),y(1,cn,2,0,"span",89)(2,sn,3,4,"span")(3,hn,3,4,"span")(4,mn,3,4,"span")(5,pn,2,1,"span")(6,dn,2,1,"span"),r()}if(o&2){let e,t=n.$implicit,i=m(2).$implicit,l=m();s(),u("ngIf",l.CheckItem(t)),s(),K((e=i)==="createdAt"?2:e==="updatedAt"?3:e==="ngaygiao"?4:e==="haohut"?5:6)}}function gn(o,n){if(o&1){let e=w();a(0,"th",72)(1,"span",73),c(2),r(),a(3,"span",74,11),c(5," filter_alt "),r(),a(6,"mat-menu",null,4)(8,"div",75),x("click",function(i){return _(e),f(i.stopPropagation())}),a(9,"div",76)(10,"input",77),x("keyup",function(i){_(e);let l=m().$implicit,h=m();return f(h.doFilterHederColumn(i,l))}),r(),a(11,"div",78)(12,"span",79),c(13,"search"),r()()(),a(14,"div",80)(15,"div",81)(16,"span",82),x("click",function(){_(e);let i=m().$implicit,l=m();return f(l.ChosenAll(l.FilterHederColumn(l.dataSource.filteredData,i)))}),c(17),r(),a(18,"span",82),x("click",function(){_(e);let i=m(2);return f(i.EmptyFiter())}),c(19,"Xo\xE1"),r()(),a(20,"span",82),x("click",function(){_(e);let i=m(2);return f(i.ResetFilter())}),c(21,"Reset"),r()(),a(22,"div",83),y(23,un,7,2,"div",84),r(),a(24,"div",85)(25,"button",86),x("click",function(){_(e);let i=M(4);return f(i.closeMenu())}),c(26," \u0110\xF3ng "),r(),a(27,"button",87),x("click",function(){_(e);let i=M(4),l=m(2);return f(l.ApplyFilterColum(i))}),c(28," \xC1p D\u1EE5ng "),r()()()()()}if(o&2){let e=M(7),t=m().$implicit,i=m();s(2),d(" ",i.ColumnName[t]," "),s(),u("matMenuTriggerFor",e),s(14),d("Ch\u1ECDn T\u1EA5t C\u1EA3 ",i.FilterHederColumn(i.dataSource.filteredData,t).length||0,""),s(6),u("ngForOf",i.FilterHederColumn(i.dataSource.filteredData,t))("ngForTrackBy",i.trackByFn)}}function _n(o,n){o&1&&(a(0,"span",100),c(1,"check_box"),r())}function fn(o,n){if(o&1){let e=w();a(0,"span",98),x("click",function(){_(e);let i=m().$implicit,l=m(2);return f(l.toggleDonhang(i))}),c(1),y(2,_n,2,0,"span",99),r()}if(o&2){let e=m(),t=e.$implicit,i=e.index,l=m(2);s(),d(" ",i+1," "),s(),u("ngIf",l.CheckItemInDonhang(t))}}function xn(o,n){if(o&1&&(a(0,"span",93),c(1),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",e[t]," ")}}function Cn(o,n){if(o&1&&(a(0,"span",94),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"HH:mm:ss dd/MM/yyyy")," ")}}function yn(o,n){if(o&1&&(a(0,"span",95),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"dd/MM/yyyy")," ")}}function En(o,n){if(o&1&&(a(0,"span",95),c(1),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",e[t].name," ")}}function Sn(o,n){if(o&1&&(a(0,"span",96),c(1),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",e[t]," ")}}function vn(o,n){if(o&1&&(a(0,"span",96),c(1),E(2,"number"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"1.0-3")," ")}}function kn(o,n){if(o&1&&(a(0,"span",96),c(1),E(2,"number"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"1.0-3")," ")}}function wn(o,n){if(o&1&&(a(0,"span",96),c(1),E(2,"number"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"1.0-3")," ")}}function bn(o,n){if(o&1&&(a(0,"span",96),c(1),E(2,"number"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"1.0-3")," ")}}function Tn(o,n){o&1&&(a(0,"mat-icon",101),c(1,"check_circle"),r())}function Ln(o,n){o&1&&(a(0,"mat-icon",102),c(1,"cancel"),r())}function Dn(o,n){if(o&1&&(a(0,"span",95),y(1,Tn,2,0,"mat-icon",101)(2,Ln,2,0,"mat-icon",102),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),K(e[t]?1:2)}}function Fn(o,n){if(o&1&&(a(0,"span",97),c(1),r()),o&2){let e=m().$implicit,t=m().$implicit,i=m();u("ngClass",me(2,zt,e[t]==="dadat",e[t]==="dagiao",e[t]==="danhan",e[t]==="hoanthanh",e[t]==="huy")),s(),d(" ",i.Trangthaidon[e[t]]," ")}}function Mn(o,n){if(o&1&&(a(0,"span",94),c(1),E(2,"date"),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",S(2,1,e[t],"HH:mm:ss dd/MM/yyyy")," ")}}function In(o,n){if(o&1&&(a(0,"span",95),c(1),r()),o&2){let e=m().$implicit,t=m().$implicit;s(),d(" ",e[t]," ")}}function Nn(o,n){if(o&1&&(a(0,"td",91),y(1,fn,3,2,"span",92)(2,xn,2,1,"span",93)(3,Cn,3,4,"span",94)(4,yn,3,4,"span",95)(5,En,2,1,"span",95)(6,Sn,2,1,"span",96)(7,vn,3,4,"span",96)(8,kn,3,4,"span",96)(9,wn,3,4,"span",96)(10,bn,3,4,"span",96)(11,Dn,3,1,"span",95)(12,Fn,2,8,"span",97)(13,Mn,3,4,"span",94)(14,In,2,1,"span",95),r()),o&2){let e,t=m().$implicit;s(),K((e=t)==="STT"?1:e==="madonhang"?2:e==="createdAt"?3:e==="ngaygiao"?4:e==="khachhang"?5:e==="dvt"?6:e==="soluong"?7:e==="tong"?8:e==="tongvat"?9:e==="tongtien"?10:e==="isActive"?11:e==="status"?12:e==="updatedAt"?13:14)}}function An(o,n){if(o&1&&(Q(0,40),y(1,gn,29,5,"th",70)(2,Nn,15,1,"td",71),J()),o&2){let e=n.$implicit;u("matColumnDef",e)}}function Kn(o,n){o&1&&F(0,"tr",103)}function Hn(o,n){if(o&1){let e=w();a(0,"tr",104),x("click",function(){let i=_(e).$implicit,l=m();return f(l.toggleDonhang(i))}),r()}if(o&2){let e=n.$implicit,t=m();se("hover:bg-slate-100 ",t.CheckItemInDonhang(e)?"!bg-slate-200":"","")}}function Vn(o,n){o&1&&(a(0,"div",108)(1,"div",109)(2,"mat-icon",110),c(3,"search_off"),r()(),a(4,"span",111),c(5,"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u"),r()())}function Pn(o,n){if(o&1&&(a(0,"tr",105)(1,"td",106),y(2,Vn,6,0,"div",107),r()()),o&2){let e=m();s(),A("colspan",e.displayedColumns.length),s(),u("ngIf",!e.isLoading)}}function Bn(o,n){if(o&1&&(a(0,"td",125),c(1),E(2,"date"),r()),o&2){let e=m(2).$implicit;A("rowspan",e.sanpham.length),s(),d(" ",S(2,2,e.ngaygiao,"dd/MM/yyyy")," ")}}function $n(o,n){if(o&1&&(a(0,"td",125),c(1),r()),o&2){let e=m(2).$implicit;A("rowspan",e.sanpham.length),s(),d(" ",e.makh," ")}}function Gn(o,n){if(o&1&&(a(0,"td",125),c(1),r()),o&2){let e=m(2).$implicit;A("rowspan",e.sanpham.length),s(),d(" ",e.name," ")}}function On(o,n){if(o&1&&(a(0,"td",125),c(1),r()),o&2){let e=m(2).$implicit;A("rowspan",e.sanpham.length),s(),d(" ",e.madonhang," ")}}function Rn(o,n){if(o&1&&(a(0,"td",125),c(1),E(2,"number"),r()),o&2){let e=m(2).$implicit,t=m(2);A("rowspan",e.sanpham.length),s(),d(" ",S(2,2,t.TinhTong(e.sanpham,"ttgiao"),"1.0-0")," ")}}function Xn(o,n){if(o&1&&(a(0,"tr"),y(1,Bn,3,5,"td",121)(2,$n,2,2,"td",121)(3,Gn,2,2,"td",121)(4,On,2,2,"td",121)(5,Rn,3,5,"td",121),a(6,"td",122),c(7),r(),a(8,"td",123),c(9),r(),a(10,"td",122),c(11),r(),a(12,"td",124),c(13),E(14,"number"),r(),a(15,"td",124),c(16),E(17,"number"),r(),a(18,"td",124),c(19),E(20,"number"),r()()),o&2){let e=n.$implicit,t=n.index;s(),u("ngIf",t===0),s(),u("ngIf",t===0),s(),u("ngIf",t===0),s(),u("ngIf",t===0),s(),u("ngIf",t===0),s(2),d(" ",e.masp," "),s(2),b(e.title),s(2),d(" ",e.dvt," "),s(2),d(" ",S(14,11,e.soluong,"1.1-3")," "),s(3),d(" ",S(17,14,e.giaban,"1.0-0")," "),s(3),d(" ",S(20,17,e.ttgiao,"1.0-0")," ")}}function zn(o,n){if(o&1&&(Q(0),y(1,Xn,21,20,"tr",118),J()),o&2){let e=n.$implicit;s(),u("ngForOf",e.sanpham)}}function Yn(o,n){if(o&1){let e=w();a(0,"h2",112),c(1," C\xF4ng N\u1EE3 "),a(2,"button",113),x("click",function(){_(e);let i=m();return f(i.printContent())}),a(3,"mat-icon"),c(4,"print"),r()()(),a(5,"mat-dialog-content")(6,"div",114)(7,"div",115)(8,"table",116)(9,"thead")(10,"tr")(11,"th",117),c(12," NG\xC0Y GIAO "),r(),a(13,"th",117),c(14," M\xC3 KH\xC1CH H\xC0NG "),r(),a(15,"th",117),c(16," T\xCAN KH\xC1CH H\xC0NG "),r(),a(17,"th",117),c(18," M\xC3 \u0110\u01A0N H\xC0NG "),r(),a(19,"th",117),c(20," T\u1ED4NG TI\u1EC0N "),r(),a(21,"th",117),c(22," M\xC3 H\xC0NG "),r(),a(23,"th",117),c(24," T\xCAN H\xC0NG "),r(),a(25,"th",117),c(26," \u0110VT "),r(),a(27,"th",117),c(28," S\u1ED0 L\u01AF\u1EE2NG "),r(),a(29,"th",117),c(30," \u0110\u01A0N GI\xC1 "),r(),a(31,"th",117),c(32," TH\xC0NH TI\u1EC0N "),r()()(),a(33,"tbody"),y(34,zn,2,1,"ng-container",118),r()()()()(),a(35,"mat-dialog-actions",119)(36,"button",120),c(37,"\u0110\xF3ng"),r()()}if(o&2){let e=m();s(34),u("ngForOf",e.editDonhang),s(),u("align","end")}}function qn(o,n){if(o&1&&(a(0,"tr",142)(1,"td",122),c(2),E(3,"date"),r(),a(4,"td",122),c(5),r(),a(6,"td",123),c(7),r(),a(8,"td",122),c(9),r(),a(10,"td",122),c(11),r(),a(12,"td",123),c(13),r(),a(14,"td",122),c(15),r(),a(16,"td",124),c(17),E(18,"number"),r(),a(19,"td",124),c(20),E(21,"number"),r(),a(22,"td",124),c(23),E(24,"number"),r(),a(25,"td",124),c(26),r()()),o&2){let e=n.$implicit;s(2),d(" ",S(3,11,e.ngaygiao,"dd/MM/yyyy")," "),s(3),d(" ",e.makh," "),s(2),d(" ",e.tenkh," "),s(2),d(" ",e.madonhang," "),s(2),d(" ",e.masp," "),s(2),d(" ",e.tensp," "),s(2),d(" ",e.dvt," "),s(2),d(" ",S(18,14,e.slnhan,"1.1-3")," "),s(3),d(" ",S(21,17,e.giaban,"1.0-0")," "),s(3),d(" ",S(24,20,e.ttnhan,"1.0-0")," "),s(3),d(" ",e.ghichu," ")}}function jn(o,n){if(o&1&&(a(0,"h2",112),c(1,"Xem Tr\u01B0\u1EDBc M\u1EABu Excel"),r(),a(2,"mat-dialog-content",126)(3,"div",115)(4,"table",127)(5,"thead")(6,"tr")(7,"th",128),F(8,"img",129),r(),a(9,"th",130)(10,"span",131),c(11,"C\xD4NG TY TNHH N\xD4NG S\u1EA2N TH\u1EF0C PH\u1EA8M TR\u1EA6N GIA"),r(),a(12,"span"),c(13,"HTX: \u1EA4p L\u1ED9c Ti\u1EBFn, X\xE3 M\u1EF9 L\u1ED9c, Huy\u1EC7n C\u1EA7n Giu\u1ED9c, T\u1EC9nh Long An"),r(),a(14,"span"),c(15,"VP: T\xF2a nh\xE0 An Ph\xFA Plaza, 117-119 L\xFD Ch\xEDnh Th\u1EAFng, P.7. Q.3,"),r(),a(16,"span"),c(17,"TP.HCM Kho s\u01A1 ch\u1EBF: 30 Kha V\u1EA1n C\xE2n, P. Hi\u1EC7p B\xECnh Ch\xE1nh,"),r(),a(18,"span"),c(19,"TP.Th\u1EE7 \u0110\u1EE9c, TP.HCM Kho \u0110\xE0 L\u1EA1t: 69 Tr\u1EA7n Th\u1EE7 \u0110\u1ED9,"),r(),a(20,"span"),c(21,"TT Li\xEAn Ngh\u0129a, Huy\u1EC7n \u0110\u1EE9c Tr\u1ECDng, T\u1EC9nh L\xE2m \u0110\u1ED3ng."),r(),a(22,"span"),c(23,"Website: rausachtrangia.com - Hotline: 090.245.8081"),r()()()(),a(24,"thead")(25,"tr")(26,"th",132),c(27,"CHI TI\u1EBET \u0110\u1ED0I CHI\u1EBEU C\xD4NG N\u1EE2"),r()()(),a(28,"thead")(29,"tr")(30,"th",133),c(31),E(32,"date"),E(33,"date"),r()()(),a(34,"thead")(35,"tr")(36,"th",133),c(37),r()()(),a(38,"thead")(39,"tr")(40,"th",133),c(41),r()()(),a(42,"tbody")(43,"tr")(44,"th",128),c(45),r(),a(46,"th",134),c(47),r()()(),a(48,"thead")(49,"tr",135),F(50,"th",136),r()(),a(51,"thead")(52,"tr",137)(53,"th",138),c(54,"NG\xC0Y GIAO"),r(),a(55,"th",138),c(56,"M\xC3 KH\xC1CH H\xC0NG"),r(),a(57,"th",138),c(58,"T\xCAN KH\xC1CH H\xC0NG"),r(),a(59,"th",138),c(60,"M\xC3 \u0110\u01A0N H\xC0NG"),r(),a(61,"th",138),c(62,"M\xC3 H\xC0NG"),r(),a(63,"th",138),c(64,"T\xCAN H\xC0NG"),r(),a(65,"th",138),c(66,"\u0110VT"),r(),a(67,"th",138),c(68,"S\u1ED0 L\u01AF\u1EE2NG"),r(),a(69,"th",138),c(70,"\u0110\u01A0N GI\xC1"),r(),a(71,"th",138),c(72,"TH\xC0NH TI\u1EC0N"),r(),a(73,"th",138),c(74,"GHI CH\xDA"),r()()(),a(75,"tbody"),y(76,qn,27,23,"tr",139),r()()()(),a(77,"mat-dialog-actions",140)(78,"button",141),c(79,"\u0110\xF3ng"),r()()),o&2){let e=m();s(31),he(" T\u1EEB Ng\xE0y ",S(32,7,e.SearchParams.Batdau,"dd/MM/yyyy")," : - \u0110\u1EBFn Ng\xE0y : ",S(33,10,e.SearchParams.Ketthuc,"dd/MM/yyyy")," "),s(6),d("T\xEAn Kh\xE1ch H\xE0ng : ",e.exampleExport[0]==null?null:e.exampleExport[0].tenkh,""),s(4),d("\u0110\u1ECBa Ch\u1EC9 : ",e.exampleExport[0]==null?null:e.exampleExport[0].diachi,""),s(4),d("Ng\u01B0\u1EDDi Li\xEAn h\u1EC7 : ",e.exampleExport[0]==null?null:e.exampleExport[0].lienhe,""),s(2),d("Email : ",e.exampleExport[0]==null?null:e.exampleExport[0].email,""),s(29),u("ngForOf",e.exampleExport)}}var H=class H{Detail={};isLoading=!1;isSearching=!1;isExporting=!1;isShowKH=!0;displayedColumns=["ngaygiao","madonhang","makh","name","soluong","tong","tongvat","tongtien"];ColumnName={ngaygiao:"Ng\xE0y Giao",madonhang:"M\xE3 \u0110\u01A1n H\xE0ng",makh:"M\xE3 Kh\xE1ch H\xE0ng",name:"T\xEAn Kh\xE1ch H\xE0ng",soluong:"S\u1ED1 L\u01B0\u1EE3ng",tong:"T\u1ED5ng",tongvat:"T\u1ED5ng VAT",tongtien:"T\u1ED5ng Ti\u1EC1n"};FilterColumns=JSON.parse(localStorage.getItem("CongnoColFilter")||"[]");exampleExport={};Columns=[];isFilter=!1;Trangthaidon=Ht;paginator;sort;drawer;filterValues={};_DonhangService=V(It);_breakpointObserver=V(ye);_GoogleSheetService=V(Tt);_GraphqlService=V(lt);_router=V(Ce);Listdonhang=this._DonhangService.ListDonhang;ListKhachhang=[];filterListKhachhang=[];ListNhomKhachhang=[];filterListNhomKhachhang=[];SelectedKhachhang=[];SelectedNhomKhachhang=[];ListCongno=[];dataSource=new oe([]);donhangId=this._DonhangService.donhangId;_snackBar=V(be);CountItem=0;SearchParams={Batdau:(0,L.default)().toDate(),Ketthuc:(0,L.default)().toDate(),Type:"donsi",Status:["danhan","hoanthanh"],khachhangIds:[]};ListDate=[{id:1,Title:"1 Ng\xE0y",value:"day"},{id:2,Title:"1 Tu\u1EA7n",value:"week"},{id:3,Title:"1 Th\xE1ng",value:"month"},{id:4,Title:"1 N\u0103m",value:"year"}];Chonthoigian="day";isSearch=!1;constructor(){this.displayedColumns.forEach(n=>{this.filterValues[n]=""})}getCustomerName(n){return typeof n=="string"?n:n.name||n.makh||"Unknown"}getNhomKhachhangName(n){return typeof n=="string"?n:n.name||n.manhom||"Unknown"}onSelectionChange(n){this.ngOnInit()}onDateChange(n){}createFilter(){return(n,e)=>{let t=JSON.parse(e),i=!0;return this.displayedColumns.forEach(l=>{if(t[l]){let h=n[l]?n[l].toString().toLowerCase():"";i=i&&h.includes(t[l].toLowerCase())}}),i}}applyFilter(n){return v(this,null,function*(){let e=n.target.value;console.log("filterValue",e),this.SearchParams=R($({},this.SearchParams),{query:e}),this.loadData(this.SearchParams)})}ngOnInit(){return v(this,null,function*(){this.initializeColumns(),this.setupDrawer(),this.loadData(this.SearchParams)})}doSearch(){return v(this,null,function*(){this.isSearching=!0;try{yield this.loadData(this.SearchParams)}finally{this.isSearching=!1}})}ListExport=[];onKhachhangChange(n){this.onCustomerSelected(n)}onNhomKhachhangChange(n){this.onNhomKhachhangSelected(n)}onNhomKhachhangSelected(n){let e=n.option.value,t=this.ListNhomKhachhang.find(h=>(typeof h=="string"?h:h.name)===e),i=t||e;this.SelectedNhomKhachhang.some(h=>(typeof h=="string"?h:h.name)===e)||(this.SelectedNhomKhachhang.push(i),this.addCustomersFromGroup(t),this.refreshNhomKhachhangFilter(),this.refreshCustomerFilter()),setTimeout(()=>{document.querySelectorAll("input[matautocomplete]").forEach(g=>{(g.placeholder.includes("nh\xF3m kh\xE1ch h\xE0ng")||g.placeholder.includes("Th\xEAm nh\xF3m kh\xE1ch h\xE0ng"))&&(g.value="")})},100)}doFilterKhachhang(n){let e=n.target.value.toLowerCase();console.log("query",e);let t=this.SelectedKhachhang.map(l=>typeof l=="string"?l:l.name),i=this.ListKhachhang.filter(l=>{let h=typeof l=="string"?l:l.name;return!t.includes(h)});if(!e){this.filterListKhachhang=i;return}this.filterListKhachhang=i.filter(l=>l?.name?.toLowerCase().includes(e)||I(l?.name).toLowerCase().includes(I(e))||l?.makh?.toLowerCase().includes(e)||I(l?.makh).toLowerCase().includes(I(e)))}doFilterNhomKhachhang(n){let e=n.target.value.toLowerCase();console.log("query",e);let t=this.SelectedNhomKhachhang.map(l=>typeof l=="string"?l:l.name),i=this.ListNhomKhachhang.filter(l=>{let h=typeof l=="string"?l:l.name;return!t.includes(h)});if(!e){this.filterListNhomKhachhang=i;return}this.filterListNhomKhachhang=i.filter(l=>{let h=typeof l=="string"?l:l.name||"",g=typeof l!="string"&&l.description||"";return h.toLowerCase().includes(e)||I(h).toLowerCase().includes(I(e))||g.toLowerCase().includes(e)||I(g).toLowerCase().includes(I(e))})}onCustomerSelected(n){let e=n.option.value,i=this.ListKhachhang.find(h=>(typeof h=="string"?h:h.name)===e)||e;this.SelectedKhachhang.some(h=>(typeof h=="string"?h:h.name)===e)||(this.SelectedKhachhang.push(i),this.SearchParams.khachhangIds=this.SelectedKhachhang.map(h=>typeof h=="string"?h:h.id),this.refreshCustomerFilter()),setTimeout(()=>{document.querySelectorAll("input[matautocomplete]").forEach(g=>{(g.placeholder.includes("kh\xE1ch h\xE0ng")||g.placeholder.includes("Th\xEAm kh\xE1ch h\xE0ng"))&&(g.value="")})},100)}removeSelectedCustomer(n){let e=this.SelectedKhachhang.findIndex(t=>(typeof t=="string"?t:t.name)===(typeof n=="string"?n:n.name));e>=0&&(this.SelectedKhachhang.splice(e,1),this.SearchParams.khachhangIds=this.SelectedKhachhang.map(t=>typeof t=="string"?t:t.id),this.refreshCustomerFilter())}removeSelectedNhomkhachhang(n){let e=this.SelectedNhomKhachhang.findIndex(t=>(typeof t=="string"?t:t.name)===(typeof n=="string"?n:n.name));e>=0&&(this.removeCustomersFromGroup(n),this.SelectedNhomKhachhang.splice(e,1),this.refreshNhomKhachhangFilter(),this.refreshCustomerFilter())}clearAllSelectedCustomers(){this.SelectedKhachhang=[],this.SearchParams.khachhangIds=[],this.refreshCustomerFilter()}clearAllSelectedNhomKhachhang(){this.SelectedNhomKhachhang.forEach(n=>{this.removeCustomersFromGroup(n)}),this.SelectedNhomKhachhang=[],this.refreshNhomKhachhangFilter(),this.refreshCustomerFilter()}refreshCustomerFilter(){let n=this.SelectedKhachhang.map(e=>typeof e=="string"?e:e.name);this.filterListKhachhang=this.ListKhachhang.filter(e=>{let t=typeof e=="string"?e:e.name;return!n.includes(t)})}refreshNhomKhachhangFilter(){let n=this.SelectedNhomKhachhang.map(e=>typeof e=="string"?e:e.name);this.filterListNhomKhachhang=this.ListNhomKhachhang.filter(e=>{let t=typeof e=="string"?e:e.name;return!n.includes(t)})}addCustomersFromGroup(n){if(!n||typeof n=="string")return;(n.khachhang||[]).forEach(t=>{this.SelectedKhachhang.some(l=>(typeof l=="string"?l:l.name)===t.name)||this.SelectedKhachhang.push(t)}),this.SearchParams.khachhangIds=this.SelectedKhachhang.map(t=>typeof t=="string"?t:t.id)}removeCustomersFromGroup(n){if(!n||typeof n=="string")return;(n.khachhang||[]).forEach(t=>{let i=this.SelectedKhachhang.findIndex(l=>(typeof l=="string"?l:l.name)===t.name);i>=0&&this.SelectedKhachhang.splice(i,1)}),this.SearchParams.khachhangIds=this.SelectedKhachhang.map(t=>typeof t=="string"?t:t.id)}loadData(n){return v(this,null,function*(){this.isLoading=!0;try{yield this._DonhangService.searchCongno(n),this.CountItem=this.Listdonhang().length||0;let e=new Map;this.ListCongno=this.Listdonhang(),this.dataSource=new oe(this.ListCongno),this.dataSource.sort=this.sort,this.dataSource.filterPredicate=this.createFilter();let t=yield this._GraphqlService.findAll("khachhang",{aggressiveCache:!0,enableStreaming:!0,select:{id:!0,name:!0,makh:!0}});this.ListKhachhang=this.filterListKhachhang=t.data;let i=yield this._GraphqlService.findAll("nhomkhachhang",{aggressiveCache:!0,enableStreaming:!0,select:{id:!0,name:!0,description:!0,khachhang:{select:{id:!0,name:!0,makh:!0}}}});this.ListNhomKhachhang=this.filterListNhomKhachhang=i.data}finally{this.isLoading=!1}})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(n=>({key:n,value:this.ColumnName[n],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("CongnoColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,e)=>(e.isShow&&(n[e.key]=e.value),n),{})}setupDrawer(){this._breakpointObserver.observe([Ee.Handset]).subscribe(n=>{n.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,e)=>(e.isShow&&(n[e.key]=e.value),n),{}),localStorage.setItem("CongnoColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(n){let e=n.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(t=>t.value.toLowerCase().includes(e))}toggleColumn(n){let e=this.FilterColumns.find(t=>t.key===n.key);e&&(e.isShow=!e.isShow,this.updateDisplayedColumns())}FilterHederColumn(n,e){return n.filter((i,l,h)=>l===h.findIndex(g=>g[e]===i[e]))}doFilterHederColumn(n,e){this.dataSource.filteredData=this.Listdonhang().filter(i=>I(i[e]).includes(n.target.value.toLowerCase())||i[e].toLowerCase().includes(n.target.value.toLowerCase()));let t=n.target.value.toLowerCase()}ListFilter=[];ChosenItem(n,e){let t=this.dataSource.filteredData.filter(l=>l[e]===n[e]);this.ListFilter.filter(l=>l[e]===n[e]).length>0?this.ListFilter=this.ListFilter.filter(l=>l[e]!==n[e]):this.ListFilter=[...this.ListFilter,...t]}ChosenAll(n){n.forEach(e=>{!!this.ListFilter.find(i=>i.id===e.id)?this.ListFilter=this.ListFilter.filter(i=>i.id!==i.id):this.ListFilter.push(e)})}ResetFilter(){this.ListFilter=this.Listdonhang(),this.dataSource.data=this.Listdonhang(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(n){return!!this.ListFilter.find(e=>e.id===n.id)}ApplyFilterColum(n){this.dataSource.data=this.Listdonhang().filter(e=>this.ListFilter.some(t=>t.id===e.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,n.closeMenu()}create(){this.drawer.open(),this._router.navigate(["admin/congnokhachhang",0])}goToDetail(n){this._DonhangService.setDonhangId(n.id),this.drawer.open(),this._router.navigate(["admin/congnokhachhang",n.id])}ToggleAll(){this.editDonhang.length===this.dataSource.filteredData.length?this.editDonhang=[]:this.editDonhang=[...this.dataSource.filteredData]}editDonhang=[];toggleDonhang(n){let e=this.editDonhang.findIndex(t=>t.id===n.id);e!==-1?this.editDonhang.splice(e,1):this.editDonhang.push(n)}TinhTong(n,e){return n?.reduce((t,i)=>t+(i[e]||0),0)||0}dialog=V($e);dialogCreateRef;Phieuchia=[];openCreateDialog(n){this.Phieuchia=this.editDonhang.map(e=>({makh:e.khachhang?.makh,name:e.khachhang?.name,madonhang:e.madonhang,ngaygiao:e.ngaygiao,sanpham:e.sanpham.map(t=>({masp:t.masp,title:t.title,dvt:t.dvt,slgiao:t.slgiao,giaban:t.giaban,ttgiao:t.ttgiao}))})),console.log(this.Phieuchia),this.dialogCreateRef=this.dialog.open(n,{hasBackdrop:!0,disableClose:!0})}openPreviewExport(n){return v(this,null,function*(){if(this.editDonhang.length>0){let e=yield this.ChuyendoiExport(this.editDonhang);this.exampleExport=this.convertFlatData(e[0]||{}),console.log("exampleExport",this.exampleExport),this.dialogCreateRef=this.dialog.open(n,{hasBackdrop:!0,disableClose:!0})}else this._snackBar.open("Vui l\xF2ng ch\u1ECDn \xEDt nh\u1EA5t m\u1ED9t kh\xE1ch h\xE0ng","\u0110\xF3ng",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-warning"]})})}convertFlatData(n){return n?.sanpham?.map(e=>({madonhang:n.madonhang,ngaygiao:n.ngaygiao,masp:e.sanpham.masp,tensp:e.sanpham.title,dvt:e.sanpham.dvt,slnhan:e.slnhan,giaban:e.giaban,ttnhan:e.ttnhan,makh:n.khachhang.makh,tenkh:n.khachhang.name,diachi:n.khachhang.diachi||"",email:n.khachhang.email||"",ghichu:e.ghichu||""}))}ChuyendoiExport(n){return v(this,null,function*(){return(yield this._GraphqlService.findAll("donhang",{aggressiveCache:!0,enableStreaming:!0,where:{id:{in:n.map(t=>t.id)},ngaygiao:{gte:(0,L.default)(this.SearchParams.Batdau).startOf("day").toDate(),lte:(0,L.default)(this.SearchParams.Ketthuc).endOf("day").toDate()},status:{in:this.SearchParams.Status}},select:{id:!0,madonhang:!0,ngaygiao:!0,sanpham:{select:{slnhan:!0,ttnhan:!0,giaban:!0,ghichu:!0,sanpham:{select:{masp:!0,title:!0,dvt:!0}}}},khachhang:{select:{makh:!0,name:!0,diachi:!0,email:!0}}}})).data})}BackStatus(){this.editDonhang.forEach(n=>{n.status="dadat",this._DonhangService.updateDonhang(n)}),this.ngOnInit()}Hoanthanh(){this.editDonhang.forEach(n=>{n.status="hoanthanh",this._DonhangService.updateDonhang(n)})}getUniqueProducts(){let n=new Set;return this.Phieuchia.forEach(e=>e.sanpham.forEach(t=>n.add(t.title))),Array.from(n)}getProductQuantity(n,e){let i=this.Phieuchia.find(l=>l.makh===e)?.sanpham.find(l=>l.title===n);return i?i.slgiao:""}getDvtForProduct(n){let t=Array.from(new Map(this.Phieuchia.flatMap(i=>i.sanpham.map(l=>R($({},l),{makh:i.makh,name:i.name}))).map(i=>[i.title,i])).values()).find(i=>i.title===n);return t?t.dvt:""}CheckItemInDonhang(n){return this.editDonhang.findIndex(e=>e.id===n.id)!==-1}DeleteDonhang(){}LoadDrive(){return v(this,null,function*(){let n={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"SPImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(n),t=et(e.values);console.log(t),this.DoImportData(t)})}DoImportData(n){console.log(n);let t=n.map(p=>({title:p.title?.trim()||"",masp:p.masp?.trim()||"",slug:`${tt(p?.title?.trim()||"")}_${nt(5,!1)}`,giagoc:Number(p.giagoc)||0,dvt:p.dvt||"",soluong:Number(p.soluong)||0,soluongkho:Number(p.soluongkho)||0,ghichu:p.ghichu||"",order:Number(p.order)||0})).filter((p,D,C)=>D===C.findIndex(T=>T.masp===p.masp)),i=t.map(p=>p.masp),l=this._DonhangService.ListDonhang().map(p=>p.masp),h=i.filter(p=>!l.includes(p)),g=t.map(p=>v(this,null,function*(){let D=this._DonhangService.ListDonhang().find(C=>C.masp===p.masp);if(D){let C=$($({},D),p);yield this._DonhangService.updateDonhang(C)}else yield this._DonhangService.CreateDonhang(p)})),k=h.map(p=>v(this,null,function*(){let D=this._DonhangService.ListDonhang().find(C=>C.masp===p);D.isActive=!1,yield this._DonhangService.updateDonhang(D)}));Promise.all([...g,...k]).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ImporExcel(n){return v(this,null,function*(){let e=yield bt(n);this.DoImportData(e)})}ExportExcel(n,e){return v(this,null,function*(){this.isExporting=!0,this.editDonhang.length>0?this.SearchParams.ids=this.editDonhang.map(t=>t.id):this.SearchParams.ids=n.map(t=>t.id);try{console.log("Attempting server-based Excel export..."),yield this._DonhangService.downloadCongno(this.SearchParams),this._snackBar.open("Xu\u1EA5t file Excel t\u1EEB server th\xE0nh c\xF4ng!","\u0110\xF3ng",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}),this.editDonhang=[]}catch(t){console.warn("Server export failed, falling back to client-side export:",t);try{console.log("Attempting client-side Excel export with table format...");let i=[];this.editDonhang.length>0?i=(yield this.ChuyendoiExport(this.editDonhang)).flatMap(h=>this.convertFlatData(h)):i=(yield this.ChuyendoiExport(n)).flatMap(h=>this.convertFlatData(h)),yield this.generateExcelWithTableFormat(i,e),this._snackBar.open("Xu\u1EA5t file Excel (\u0111\u1ECBnh d\u1EA1ng b\u1EA3ng) th\xE0nh c\xF4ng!","\u0110\xF3ng",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]}),this.editDonhang=[]}catch(i){console.error("Client-side export also failed:",i),console.log("Attempting final fallback export..."),yield this.ExportExcelFallback(n,e)}}finally{this.isExporting=!1}})}ExportExcelTableFormat(n,e){return v(this,null,function*(){this.isExporting=!0;try{console.log("Exporting Excel with table format...");let t=[];this.editDonhang.length>0?t=(yield this.ChuyendoiExport(this.editDonhang)).flatMap(l=>this.convertFlatData(l)):t=(yield this.ChuyendoiExport(n)).flatMap(l=>this.convertFlatData(l)),yield this.generateExcelWithTableFormat(t,e),this.editDonhang=[],this._snackBar.open("Xu\u1EA5t file Excel (\u0111\u1ECBnh d\u1EA1ng b\u1EA3ng) th\xE0nh c\xF4ng!","\u0110\xF3ng",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(t){console.error("Error exporting Excel with table format:",t),this._snackBar.open("L\u1ED7i khi xu\u1EA5t file Excel (\u0111\u1ECBnh d\u1EA1ng b\u1EA3ng)!","\u0110\xF3ng",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isExporting=!1}})}ExportExcelFallback(n,e){return v(this,null,function*(){try{let t=["Ng\xE0y","M\xE3 Kh\xE1ch H\xE0ng","T\xEAn Kh\xE1ch H\xE0ng","M\xE3 \u0110\u01A1n H\xE0ng","M\xE3 H\xE0ng","T\xEAn H\xE0ng","\u0110VT","S\u1ED1 L\u01B0\u1EE3ng","\u0110\u01A1n Gi\xE1","Th\xE0nh Ti\u1EC1n Tr\u01B0\u1EDBc VAT","VAT","\u0110\u01A1n Gi\xE1 VAT","Th\xE0nh Ti\u1EC1n Sau VAT","Ghi Ch\xFA","T\u1ED5ng Ti\u1EC1n Sau Thu\u1EBF"],i=[];n.length>0?i=this.groupDataByCustomer(n):i=this.groupDataByCustomer(this.ListCongno),this.writeExcelFileWithMergedCells(i,e,t)}catch(t){console.error("Error in fallback Excel export:",t)}})}groupDataByCustomer(n){let e=new Map;n.forEach(i=>{let l=i.makhachhang;e.has(l)||e.set(l,[]),e.get(l).push(i)});let t=[];return e.forEach((i,l)=>{let h=i.reduce((g,k)=>g+(k.thanhtiensauvat||0),0);i.forEach((g,k)=>{t.push(R($({},g),{tongtiensauthue:k===0?h:null}))})}),t}writeExcelFileWithMergedCells(n,e,t){let i=n.map(p=>({Ng\u00E0y:(0,L.default)(p.ngaygiao).format("DD/MM/YYYY"),"M\xE3 Kh\xE1ch H\xE0ng":p.makhachhang,"T\xEAn Kh\xE1ch H\xE0ng":p.tenkhachhang,"M\xE3 \u0110\u01A1n H\xE0ng":p.madonhang,"M\xE3 H\xE0ng":p.mahang,"T\xEAn H\xE0ng":p.tenhang,\u0110VT:p.dvt,"S\u1ED1 L\u01B0\u1EE3ng":p.soluong,"\u0110\u01A1n Gi\xE1":p.dongia,"Th\xE0nh Ti\u1EC1n Tr\u01B0\u1EDBc VAT":p.thanhtientruocvat,VAT:p.vat,"\u0110\u01A1n Gi\xE1 VAT":p.dongiavathoadon,"Th\xE0nh Ti\u1EC1n Sau VAT":p.thanhtiensauvat,"Ghi Ch\xFA":p.ghichu,"T\u1ED5ng Ti\u1EC1n Sau Thu\u1EBF":p.tongtiensauthue})),l=N.utils.json_to_sheet(i),h=this.createMergeRanges(n);h.length>0&&(l["!merges"]=h);let g=N.utils.book_new();N.utils.book_append_sheet(g,l,"CongNo");let k=N.write(g,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(k,`${e}_${(0,L.default)().format("DD_MM_YYYY")}`)}createMergeRanges(n){let e=[],t=new Map;n.forEach((l,h)=>{let g=l.makhachhang;t.has(g)||t.set(g,{start:h+1,count:0}),t.get(g).count++});let i=14;return t.forEach(l=>{l.count>1&&e.push({s:{r:l.start,c:i},e:{r:l.start+l.count-1,c:i}})}),e}saveAsExcelFile(n,e){let t=new Blob([n],{type:"application/octet-stream"}),i=window.URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`${e}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}generateExcelWithTableFormat(n,e){return v(this,null,function*(){try{let t=N.utils.book_new(),i=new Map;if(n.forEach(h=>{let g=h.makh||"Unknown",k=h.tenkh||h.tenkhachhang||"Unknown Customer",p=`${g}_${k}`;i.has(p)||i.set(p,[]),i.get(p).push(h)}),i.size===0)yield this.createCustomerSheet(t,n,"All Customers",n[0]||{});else{let h=new Set;i.forEach((g,k)=>{let p=g[0]||{},D=p.tenkh||p.tenkhachhang||"Unknown Customer",C=this.sanitizeSheetName(D),T=C,re=1;for(;h.has(T);){let le=`_${re}`,$t=31-le.length;T=`${C.substring(0,$t)}${le}`,re++}h.add(T),this.createCustomerSheet(t,g,T,p)})}let l=N.write(t,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(l,`${e}_${(0,L.default)().format("DD_MM_YYYY")}`)}catch(t){throw console.error("Error generating Excel with table format:",t),t}})}createCustomerSheet(n,e,t,i){let l=[["LOGO","","","","C\xD4NG TY TNHH N\xD4NG S\u1EA2N TH\u1EF0C PH\u1EA8M TR\u1EA6N GIA","","","","","",""],["","","","","HTX: \u1EA4p L\u1ED9c Ti\u1EBFn, X\xE3 M\u1EF9 L\u1ED9c, Huy\u1EC7n C\u1EA7n Giu\u1ED9c, T\u1EC9nh Long An","","","","","",""],["","","","","VP: T\xF2a nh\xE0 An Ph\xFA Plaza, 117-119 L\xFD Ch\xEDnh Th\u1EAFng, P.7. Q.3,","","","","","",""],["","","","","TP.HCM Kho s\u01A1 ch\u1EBF: 30 Kha V\u1EA1n C\xE2n, P. Hi\u1EC7p B\xECnh Ch\xE1nh,","","","","","",""],["","","","","TP.Th\u1EE7 \u0110\u1EE9c, TP.HCM Kho \u0110\xE0 L\u1EA1t: 69 Tr\u1EA7n Th\u1EE7 \u0110\u1ED9,","","","","","",""],["","","","","TT Li\xEAn Ngh\u0129a, Huy\u1EC7n \u0110\u1EE9c Tr\u1ECDng, T\u1EC9nh L\xE2m \u0110\u1ED3ng.","","","","","",""],["","","","","Website: rausachtrangia.com - Hotline: 090.245.8081","","","","","",""],["CHI TI\u1EBET \u0110\u1ED0I CHI\u1EBEU C\xD4NG N\u1EE2","","","","","","","","","",""],[`T\u1EEB Ng\xE0y ${(0,L.default)(this.SearchParams.Batdau).format("DD/MM/YYYY")} : - \u0110\u1EBFn Ng\xE0y : ${(0,L.default)(this.SearchParams.Ketthuc).format("DD/MM/YYYY")}`,"","","","","","","","","",""],[`T\xEAn Kh\xE1ch H\xE0ng : ${i.tenkh||i.tenkhachhang||""}`,"","","","","","","","","",""],[`\u0110\u1ECBa Ch\u1EC9 : ${i.diachi||""}`,"","","","","","","","","",""],[`Ng\u01B0\u1EDDi Li\xEAn h\u1EC7 : ${i.lienhe||""}`,"","","",`Email : ${i.email||""}`,"","","","","",""],["","","","","","","","","","",""],["NG\xC0Y GIAO","M\xC3 KH\xC1CH H\xC0NG","T\xCAN KH\xC1CH H\xC0NG","M\xC3 \u0110\u01A0N H\xC0NG","M\xC3 H\xC0NG","T\xCAN H\xC0NG","\u0110VT","S\u1ED0 L\u01AF\u1EE2NG","\u0110\u01A0N GI\xC1","TH\xC0NH TI\u1EC0N","GHI CH\xDA"]];e.sort((C,T)=>(C.tensp||"").localeCompare(T.tensp||"")),e.forEach(C=>{l.push([(0,L.default)(C.ngaygiao).format("DD/MM/YYYY")||"",C.makh||"",C.tenkh||C.tenkhachhang||"",C.madonhang||"",C.masp||"",C.tensp||"",C.dvt||"",Number(C.slnhan)||0,Number(C.giaban)||0,Number(C.ttnhan)||0,C.ghichu||""])});let h=e.reduce((C,T)=>C+(Number(T.slnhan)||0),0),g=e.reduce((C,T)=>C+(Number(T.ttnhan)||0),0);l.push(["","","","","","T\u1ED4NG C\u1ED8NG:","",h,"",g,""]);let k=N.utils.aoa_to_sheet(l),p=[{wch:12},{wch:15},{wch:25},{wch:15},{wch:12},{wch:30},{wch:8},{wch:12},{wch:15},{wch:15},{wch:20}];k["!cols"]=p;let D=[{s:{r:0,c:0},e:{r:6,c:3}},{s:{r:0,c:4},e:{r:0,c:10}},{s:{r:1,c:4},e:{r:1,c:10}},{s:{r:2,c:4},e:{r:2,c:10}},{s:{r:3,c:4},e:{r:3,c:10}},{s:{r:4,c:4},e:{r:4,c:10}},{s:{r:5,c:4},e:{r:5,c:10}},{s:{r:6,c:4},e:{r:6,c:10}},{s:{r:7,c:0},e:{r:7,c:10}},{s:{r:8,c:0},e:{r:8,c:10}},{s:{r:9,c:0},e:{r:9,c:10}},{s:{r:10,c:0},e:{r:10,c:10}},{s:{r:11,c:0},e:{r:11,c:3}},{s:{r:11,c:4},e:{r:11,c:10}},{s:{r:12,c:0},e:{r:12,c:10}}];k["!merges"]=D,N.utils.book_append_sheet(n,k,t)}sanitizeSheetName(n){let e=n.replace(/[\/\\?*\[\]]/g,"_").trim();return e.length>31&&(e=e.substring(0,31)),(!e||e.length===0)&&(e="Customer"),e}addLogoToWorksheet(n,e){return v(this,null,function*(){try{(yield this.loadImageAsBase64("/images/logo.svg"))&&console.log("Logo loaded successfully for Excel");let l=n.A1;l&&(l.s={font:{bold:!0,size:12,color:{rgb:"2E5A87"},name:"Arial"},alignment:{horizontal:"center",vertical:"center"},fill:{fgColor:{rgb:"F8F9FA"}},border:{top:{style:"thin",color:{rgb:"D1D5DB"}},bottom:{style:"thin",color:{rgb:"D1D5DB"}},left:{style:"thin",color:{rgb:"D1D5DB"}},right:{style:"thin",color:{rgb:"D1D5DB"}}}},l.v="C\xD4NG TY TR\u1EA6N GIA",l.t="s")}catch(t){console.warn("Could not load/add logo to Excel file:",t);let i=n.A1;i&&(i.v="LOGO",i.s={font:{bold:!0,size:10},alignment:{horizontal:"center",vertical:"center"},fill:{fgColor:{rgb:"E5E7EB"}}})}})}loadImageAsBase64(n){return v(this,null,function*(){try{let e=yield fetch(n);if(!e.ok)throw new Error("Failed to load image");let t=yield e.blob();return new Promise((i,l)=>{let h=new FileReader;h.onload=()=>i(h.result),h.onerror=l,h.readAsDataURL(t)})}catch(e){return console.warn("Failed to load image:",e),null}})}printContent(){let n=document.getElementById("printContent");n&&(0,Bt.default)(n,{scale:2}).then(e=>{let t=e.toDataURL("image/png"),i=window.open("","_blank");i&&(i.document.write(`
        <html>
          <head>
            <title>Phi\u1EBFu Chia H\xE0ng ${(0,L.default)().format("DD/MM/YYYY")}</title>
          </head>
          <body style="text-align: center;">
            <img src="${t}" style="max-width: 100%;"/>
            <script>
              window.onload = function() {
                window.print();
                window.onafterprint = function() { window.close(); };
              };
            <\/script>
          </body>
        </html>
      `),i.document.close())})}trackByFn(n,e){return e.id}static \u0275fac=function(e){return new(e||H)};static \u0275cmp=ce({type:H,selectors:[["app-listcongnokhachhang"]],viewQuery:function(e,t){if(e&1&&(z(ht,5),z(j,5),z(Xt,7)),e&2){let i;Y(i=q())&&(t.paginator=i.first),Y(i=q())&&(t.sort=i.first),Y(i=q())&&(t.drawer=i.first)}},decls:78,vars:35,consts:[["drawer",""],["pickerBatdau",""],["pickerKetthuc",""],["exportMenu","matMenu"],["menu","matMenu"],["dialogCreateTemplate",""],["dialogPreviewExport",""],["nhomKHInput",""],["autoNhom","matAutocomplete"],["customerInput",""],["auto","matAutocomplete"],["menuTrigger","matMenuTrigger"],["autosize","",1,"w-full","h-full"],["class","fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50",4,"ngIf"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"w-full","grid","gap-2","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],[1,"w-full",3,"appearance","subscriptSizing"],["matInput","",3,"dateChange","ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"lg:flex","hidden","cursor-pointer","whitespace-nowrap","p-2","rounded-lg","bg-slate-200",3,"click"],[1,"lg:flex","hidden","cursor-pointer","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["matTooltip","Xem M\u1EABu","mat-icon-button","","color","primary",3,"click"],["matTooltip","Xu\u1EA5t file Excel","color","primary","mat-icon-button","",1,"relative",3,"matMenuTriggerFor"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],["mat-menu-item","",3,"click"],["matTooltip","T\xECm ki\u1EBFm","color","primary","mat-icon-button","",1,"relative",3,"click","disabled"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","\u1EA8n hi\u1EC7n Tool Kh\xE1ch H\xE0ng","mat-icon-button","","color","primary",3,"click"],[1,"w-full","grid","lg:grid-cols-2","gap-2","items-center"],[1,"w-full","overflow-auto","relative"],["class","absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 z-10",4,"ngIf"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"fixed","inset-0","bg-white","bg-opacity-75","flex","items-center","justify-center","z-50"],[1,"flex","flex-col","items-center","space-y-4"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"text-lg","text-gray-700"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-blue-600"],[1,"flex","flex-col","space-y-2","w-full"],[1,"font-bold"],[3,"appearance","subscriptSizing"],["aria-label","Ch\u1ECDn nh\xF3m kh\xE1ch h\xE0ng"],[3,"removable"],["matInput","",3,"keyup","placeholder","matAutocomplete"],["panelWidth","auto",1,"max-w-none",3,"optionSelected"],[1,"!whitespace-normal","!h-auto","!py-2",3,"value"],["matTooltip","X\xF3a t\u1EA5t c\u1EA3 nh\xF3m kh\xE1ch h\xE0ng \u0111\xE3 ch\u1ECDn","color","warn","mat-icon-button","","matSuffix",""],["aria-label","Ch\u1ECDn kh\xE1ch h\xE0ng"],["matTooltip","X\xF3a t\u1EA5t c\u1EA3 kh\xE1ch h\xE0ng \u0111\xE3 ch\u1ECDn","color","warn","mat-icon-button","","matSuffix",""],[3,"removed","removable"],["matChipRemove",""],[1,"text-sm"],[1,"text-xs","text-gray-500","block"],["matTooltip","X\xF3a t\u1EA5t c\u1EA3 nh\xF3m kh\xE1ch h\xE0ng \u0111\xE3 ch\u1ECDn","color","warn","mat-icon-button","","matSuffix","",3,"click"],["matTooltip","X\xF3a t\u1EA5t c\u1EA3 kh\xE1ch h\xE0ng \u0111\xE3 ch\u1ECDn","color","warn","mat-icon-button","","matSuffix","",3,"click"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-white","bg-opacity-90","z-10"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"text-gray-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[1,"z-10","material-symbols-outlined","text-gray-500",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["mat-cell",""],[1,"max-w-40","line-clamp-4","flex","items-center"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-700"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","text-end"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"max-w-40","line-clamp-4","flex","items-center",3,"click"],["class","material-symbols-outlined",4,"ngIf"],[1,"material-symbols-outlined"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],[1,"mat-cell","p-4"],["class","text-center py-8",4,"ngIf"],[1,"text-center","py-8"],[1,"text-gray-500","mb-2"],[1,"text-4xl"],[1,"text-gray-500"],["mat-dialog-title",""],["mat-icon-button","","color","primary",3,"click"],[1,"lg:min-w-[400px]","w-full","h-full","flex","flex-col","space-y-8","items-center","p-4"],[1,"w-full","overflow-x-auto"],["id","printContent",1,"w-full","border-collapse"],[1,"p-2","border","border-gray-300","bg-yellow-200","text-center","font-bold"],[4,"ngFor","ngForOf"],[3,"align"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["class","p-2 border border-gray-300 align-middle text-center",4,"ngIf"],[1,"p-2","border","border-gray-300","text-center"],[1,"p-2","border","border-gray-300"],[1,"p-2","border","border-gray-300","text-right"],[1,"p-2","border","border-gray-300","align-middle","text-center"],[1,"mat-typography"],["id","exporttable",1,"text-xs","border-collapse","border","border-gray-300"],["colspan","4",1,"text-start","p-2","border"],["src","/images/logo.svg",1,"h-20","mx-auto"],["colspan","7",1,"text-start","p-2","flex","flex-col","gap-2"],[1,"text-md","font-bold"],["colspan","11",1,"text-md","font-bold","text-start","p-2","border"],["colspan","11",1,"text-start","p-2","border"],["colspan","7",1,"text-start","p-2","border"],[1,"text-start"],["colspan","11",1,"p-8"],[1,"bg-gray-300"],[1,"p-2","border","border-gray-300","text-center","font-bold"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],[1,"hover:bg-gray-50"]],template:function(e,t){if(e&1){let i=w();a(0,"mat-drawer-container",12),y(1,qt,5,0,"div",13),a(2,"mat-drawer",14,0),F(4,"router-outlet"),r(),a(5,"div",15)(6,"div",16)(7,"div",17)(8,"mat-form-field",18)(9,"mat-label"),c(10,"B\u1EAFt \u0110\u1EA7u"),r(),a(11,"input",19),x("dateChange",function(h){return _(i),f(t.onDateChange(h))}),ne("ngModelChange",function(h){return _(i),te(t.SearchParams.Batdau,h)||(t.SearchParams.Batdau=h),f(h)}),r(),F(12,"mat-datepicker-toggle",20)(13,"mat-datepicker",null,1),r(),a(15,"mat-form-field",18)(16,"mat-label"),c(17,"K\u1EBFt Th\xFAc"),r(),a(18,"input",19),x("dateChange",function(h){return _(i),f(t.onDateChange(h))}),ne("ngModelChange",function(h){return _(i),te(t.SearchParams.Ketthuc,h)||(t.SearchParams.Ketthuc=h),f(h)}),r(),F(19,"mat-datepicker-toggle",20)(20,"mat-datepicker",null,2),r(),a(22,"span",21),x("click",function(){return _(i),f(t.ToggleAll())}),c(23),r(),a(24,"span",22),c(25),r(),a(26,"button",23),x("click",function(){_(i);let h=M(77);return f(t.openPreviewExport(h))}),a(27,"mat-icon"),c(28,"preview"),r()(),a(29,"button",24),y(30,jt,2,0,"div",25),a(31,"mat-icon"),c(32,"file_download"),r()(),a(33,"mat-menu",null,3)(35,"button",26),x("click",function(){return _(i),f(t.ExportExcel(t.editDonhang,"Congno"))}),a(36,"mat-icon"),c(37,"cloud_download"),r(),a(38,"span"),c(39,"Xu\u1EA5t t\u1EEB Server (Nhanh)"),r()(),a(40,"button",26),x("click",function(){return _(i),f(t.ExportExcelTableFormat(t.editDonhang,"Congno"))}),a(41,"mat-icon"),c(42,"table_view"),r(),a(43,"span"),c(44,"Xu\u1EA5t \u0111\u1ECBnh d\u1EA1ng b\u1EA3ng (Chi ti\u1EBFt)"),r()()(),a(45,"button",27),x("click",function(){return _(i),f(t.doSearch())}),y(46,Wt,2,0,"div",25),a(47,"mat-icon"),c(48,"search"),r()(),a(49,"button",28)(50,"mat-icon"),c(51,"tune"),r()(),a(52,"mat-menu",null,4)(54,"div",29)(55,"mat-form-field",30)(56,"input",31),x("input",function(h){return _(i),f(t.doFilterColumns(h))})("click",function(h){return _(i),f(h.stopPropagation())}),r(),a(57,"mat-icon",32),c(58,"search"),r()()(),a(59,"div",33),P(60,Ut,5,2,"button",34,Yt),r()(),a(62,"button",35),x("click",function(){return _(i),f(t.isShowKH=!t.isShowKH)}),a(63,"mat-icon"),c(64),r()()()(),y(65,rn,29,10,"div",36),a(66,"div",37),y(67,ln,5,0,"div",38),a(68,"table",39),P(69,An,3,1,"ng-container",40,O),y(71,Kn,1,0,"tr",41)(72,Hn,1,3,"tr",42)(73,Pn,3,2,"tr",43),r()()()(),y(74,Yn,38,2,"ng-template",null,5,ae)(76,jn,80,13,"ng-template",null,6,ae)}if(e&2){let i=M(14),l=M(21),h=M(34),g=M(53);s(),u("ngIf",t.isLoading),s(),u("position","end"),s(3),X("opacity-50",t.isLoading),s(3),u("appearance","outline")("subscriptSizing","dynamic"),s(3),u("matDatepicker",i),ee("ngModel",t.SearchParams.Batdau),u("ngModelOptions",ie(33,Vt)),s(),u("for",i),s(3),u("appearance","outline")("subscriptSizing","dynamic"),s(3),u("matDatepicker",l),ee("ngModel",t.SearchParams.Ketthuc),u("ngModelOptions",ie(34,Vt)),s(),u("for",l),s(4),d(" ",t.CountItem," B\u1EA3n Ghi "),s(2),d(" ",t.editDonhang.length," \u0110\xE3 Ch\u1ECDn "),s(4),u("matMenuTriggerFor",h),s(),u("ngIf",t.isExporting),s(),X("opacity-0",t.isExporting),s(14),u("disabled",t.isSearching),s(),u("ngIf",t.isSearching),s(),X("opacity-0",t.isSearching),s(2),u("matMenuTriggerFor",g),s(11),B(t.FilterColumns),s(4),b(t.isShowKH?"visibility":"visibility_off"),s(),K(t.isShowKH?65:-1),s(2),u("ngIf",t.isLoading&&t.dataSource.data.length===0),s(),u("dataSource",t.dataSource),s(),B(t.displayedColumns),s(2),u("matHeaderRowDef",t.displayedColumns),s(),u("matRowDefColumns",t.displayedColumns)}},dependencies:[Ue,We,Ye,qe,je,Je,Qe,wt,ut,_t,yt,ft,gt,Et,xt,Ct,St,vt,kt,dt,j,pt,mt,Ke,Ne,Ie,Ae,De,Te,Le,xe,Me,Fe,we,ve,ke,Ze,Se,fe,pe,de,ue,_e,ge,Be,He,Ve,Pe,st,ct,rt,it,at,ot,ze,Ge,Oe,Xe,Re,Kt,Nt,At,Mt,Dt,Lt,Ft],encapsulation:2})};G([W(300)],H.prototype,"applyFilter",1),G([W(100)],H.prototype,"doFilterKhachhang",1),G([W(100)],H.prototype,"doFilterNhomKhachhang",1),G([Wn()],H.prototype,"FilterHederColumn",1),G([W(300)],H.prototype,"doFilterHederColumn",1);var Pt=H;function Wn(){return function(o,n,e){let t=e.value,i=new Map;return e.value=function(...l){let h=JSON.stringify(l);if(i.has(h))return i.get(h);let g=t.apply(this,l);return i.set(h,g),g},e}}function W(o=300){return function(n,e,t){let i=t.value,l;return t.value=function(...h){clearTimeout(l),l=setTimeout(()=>{i.apply(this,h)},o)},t}}export{Pt as a};
