import{a as we}from"./chunk-FKL3M6KH.js";import{a as Se}from"./chunk-U64S2JK4.js";import{a as Pe}from"./chunk-Z36A3SCI.js";import{a as De}from"./chunk-Y6MGT4G2.js";import{a as ye}from"./chunk-N7IONIJ6.js";import"./chunk-MC2RAUNI.js";import"./chunk-4ZVJO4SQ.js";import{a as _e}from"./chunk-AQO3OYSB.js";import{a as de,b as ge,c as fe,k as ke}from"./chunk-4X5NMF6L.js";import{a as xe,b as Ce}from"./chunk-AOTATB2B.js";import{h as ne}from"./chunk-OJAO3OLV.js";import"./chunk-FWQGRR57.js";import"./chunk-FDKR5JS7.js";import"./chunk-2W54QBJ3.js";import{a as pe}from"./chunk-ZW44ZSN2.js";import"./chunk-ZBHKY25U.js";import{d as me,e as T}from"./chunk-3F7BKIWY.js";import{a as ce,b as se}from"./chunk-4GGWWSUC.js";import{a as J}from"./chunk-HNFXVBTY.js";import"./chunk-JNVUT6FC.js";import"./chunk-DJ7B7BMF.js";import{a as Q,b as U}from"./chunk-SFLISUEA.js";import{b as Y,g as Z,j as ee,l as te,n as ie,p as oe,r as ae,u as re,v as le,x as he,y as ue}from"./chunk-I3A3TI3P.js";import"./chunk-GNPWSDAG.js";import"./chunk-VUZTNYK4.js";import"./chunk-LAGKDNZC.js";import"./chunk-G7V2HUMM.js";import"./chunk-TUG4ZT24.js";import{a as H,c as X,e as q}from"./chunk-PR2AGH2S.js";import"./chunk-2PPFUFFT.js";import{ha as G}from"./chunk-LOWYV7XB.js";import"./chunk-SQDBX2PU.js";import{a as R,c as j}from"./chunk-CQQ7YZRV.js";import"./chunk-PQEZXTVZ.js";import{l as K,m as z,q as $}from"./chunk-5IB32XJF.js";import{Cc as A,Dc as s,Eb as I,Ec as V,Fc as w,Gc as B,Jc as W,Kc as g,Lb as D,Lc as f,Mc as k,Oc as x,Ra as E,Sc as O,Vb as h,bc as v,cc as M,dc as o,ec as r,fc as L,gc as b,hc as F,jc as y,jd as N,oa as C,oc as d,qc as c,rb as u,xa as p,ya as _}from"./chunk-3CJ5AOWH.js";import"./chunk-EU2KAMEK.js";import{j as P}from"./chunk-6DYNGEAS.js";var Me=()=>({title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"}),be=()=>({title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"}),Fe=()=>({title:"Chuy\u1EC3n Kho",value:"chuyenkho"}),Ve=()=>({title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}),Te=(l,n,e,i)=>[l,n,e,i],S=()=>({standalone:!0}),ve=(l,n)=>n.id;function Ie(l,n){if(l&1){let e=y();o(0,"button",2),d("click",function(){p(e);let t=c();return _(t.handlePhieukhoAction())}),o(1,"mat-icon"),s(2,"save"),r()()}}function Le(l,n){if(l&1){let e=y();o(0,"button",2),d("click",function(){p(e);let t=c();return _(t.toggleEdit())}),o(1,"mat-icon"),s(2,"edit"),r()()}}function Ae(l,n){if(l&1){let e=y();b(0),o(1,"div",10)(2,"div",11),s(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),o(4,"div",12)(5,"button",13),d("click",function(){p(e);let t=c();return _(t.DeleteData())}),s(6,"\u0110\u1ED3ng \xDD"),r(),o(7,"button",14),d("click",function(){p(e);let t=c();return _(t.toggleDelete())}),s(8,"Hu\u1EF7 B\u1ECF"),r()()(),F()}}function Be(l,n){if(l&1&&(o(0,"mat-option",27),s(1),r()),l&2){let e=n.$implicit;h("value",e.value),u(),w(" ",e.title," ")}}function We(l,n){if(l&1&&(o(0,"mat-option",27),s(1),r()),l&2){let e=n.$implicit;h("value",e.id),u(),B(" (",e.makho,")",e.name," ")}}function Oe(l,n){if(l&1&&(o(0,"mat-option",27),s(1),r()),l&2){let e=n.$implicit;h("value",e.id),u(),w(" ",e.madonhang," ")}}function Ne(l,n){if(l&1){let e=y();o(0,"mat-form-field",17)(1,"mat-label"),s(2,"\u0110\u01A1n B\xE1n"),r(),o(3,"mat-select",28),d("selectionChange",function(t){p(e);let a=c(2);return _(a.ChosenDonhang(t,"xuat"))}),D(4,Oe,2,2,"mat-option",20),r()()}if(l&2){let e=c(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DonhangService.ListDonhang())}}function Ke(l,n){if(l&1&&(o(0,"mat-option",27),s(1),r()),l&2){let e=n.$implicit;h("value",e.id),u(),w(" ",e.madncc," ")}}function ze(l,n){if(l&1){let e=y();o(0,"mat-form-field",17)(1,"mat-label"),s(2,"\u0110\u01A1n Mua"),r(),o(3,"mat-select",28),d("selectionChange",function(t){p(e);let a=c(2);return _(a.ChosenDonhang(t,"nhap"))}),D(4,Ke,2,2,"mat-option",20),r()()}if(l&2){let e=c(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DathangService.ListDathang())}}function $e(l,n){if(l&1&&(o(0,"mat-option",27),s(1),r()),l&2){let e=n.$implicit;h("value",e.id),u(),W("",e.title," [SL : ",e.soluong,"",e.dvt,"][SL T\u1ED3n : ",e.soluongkho,"",e.dvt,"]")}}function Re(l,n){if(l&1){let e=y();o(0,"mat-form-field",35)(1,"mat-label"),s(2,"SL H\u1EE7y"),r(),o(3,"input",37),k("ngModelChange",function(t){p(e);let a=c().$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].slhuy,t)||(m.DetailPhieukho().sanpham[a].slhuy=t),_(t)}),d("change",function(t){p(e);let a=c().$implicit,m=c(2);return _(m.onChangeSoluong(a,t))}),r()()}if(l&2){let e=c().$index,i=c(2);u(3),h("disabled",!i.isEdit()),g("ngModel",i.DetailPhieukho().sanpham[e].slhuy),h("ngModelOptions",x(3,S))}}function je(l,n){if(l&1){let e=y();o(0,"mat-form-field",35)(1,"mat-label"),s(2,"SL Tr\u1EA3"),r(),o(3,"input",37),k("ngModelChange",function(t){p(e);let a=c().$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].sltra,t)||(m.DetailPhieukho().sanpham[a].sltra=t),_(t)}),d("change",function(t){p(e);let a=c().$implicit,m=c(2);return _(m.onChangeSoluong(a,t))}),r()()}if(l&2){let e=c().$index,i=c(2);u(3),h("disabled",!i.isEdit()),g("ngModel",i.DetailPhieukho().sanpham[e].sltra),h("ngModelOptions",x(3,S))}}function Ge(l,n){if(l&1){let e=y();o(0,"div",25)(1,"mat-form-field",17)(2,"mat-label"),s(3,"S\u1EA3n Ph\u1EA9m"),r(),o(4,"mat-select",29),k("ngModelChange",function(t){let a=p(e).$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].sanphamId,t)||(m.DetailPhieukho().sanpham[a].sanphamId=t),_(t)}),o(5,"div",30)(6,"div",4)(7,"mat-form-field",31)(8,"input",32),d("input",function(t){p(e);let a=c(2);return _(a.DoFindSanpham(t))}),r()(),o(9,"button",33)(10,"mat-icon"),s(11,"add_circle"),r()()(),o(12,"div",34),v(13,$e,2,6,"mat-option",27,ve),r()()()(),o(15,"mat-form-field",35)(16,"mat-label"),s(17,"SL"),r(),o(18,"input",36),k("ngModelChange",function(t){let a=p(e).$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].sldat,t)||(m.DetailPhieukho().sanpham[a].sldat=t),_(t)}),d("change",function(t){let a=p(e).$implicit,m=c(2);return _(m.onChangeSoluong(a,t))}),r()(),o(19,"mat-form-field",35)(20,"mat-label"),s(21,"SL Th\u1EF1c"),r(),o(22,"input",37),k("ngModelChange",function(t){let a=p(e).$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].soluong,t)||(m.DetailPhieukho().sanpham[a].soluong=t),_(t)}),d("change",function(t){let a=p(e).$implicit,m=c(2);return _(m.onChangeSoluong(a,t))}),r()(),D(23,Re,4,4,"mat-form-field",38)(24,je,4,4,"mat-form-field",38),o(25,"mat-form-field",17)(26,"mat-label"),s(27,"Ghi Ch\xFA"),r(),o(28,"input",39),k("ngModelChange",function(t){let a=p(e).$index,m=c(2);return f(m.DetailPhieukho().sanpham[a].ghichu,t)||(m.DetailPhieukho().sanpham[a].ghichu=t),_(t)}),r()()()}if(l&2){let e=n.$index,i=c(2);u(4),h("disabled",!i.isEdit)("disabled",!i.isEdit()),g("ngModel",i.DetailPhieukho().sanpham[e].sanphamId),h("ngModelOptions",x(15,S)),u(9),M(i.filterSP),u(5),h("disabled",!0),g("ngModel",i.DetailPhieukho().sanpham[e].sldat),h("ngModelOptions",x(16,S)),u(4),h("disabled",!i.isEdit()),g("ngModel",i.DetailPhieukho().sanpham[e].soluong),h("ngModelOptions",x(17,S)),u(),h("ngIf",i.DetailPhieukho().type=="xuat"),u(),h("ngIf",i.DetailPhieukho().type=="nhap"),u(4),h("disabled",!i.isEdit()),g("ngModel",i.DetailPhieukho().sanpham[e].ghichu),h("ngModelOptions",x(18,S))}}function He(l,n){if(l&1){let e=y();b(0)(1),o(2,"div",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),s(6,"M\xE3 Phi\u1EBFu"),r(),o(7,"input",18),k("ngModelChange",function(t){p(e);let a=c();return f(a.DetailPhieukho().maphieu,t)||(a.DetailPhieukho().maphieu=t),_(t)}),r()(),o(8,"mat-form-field",17)(9,"mat-label"),s(10,"Lo\u1EA1i Phi\u1EBFu"),r(),o(11,"mat-select",19),k("ngModelChange",function(t){p(e);let a=c();return f(a.DetailPhieukho().type,t)||(a.DetailPhieukho().type=t),_(t)}),d("selectionChange",function(t){p(e);let a=c();return _(a.ChangeType(t))}),D(12,Be,2,2,"mat-option",20),r()(),o(13,"mat-form-field",17)(14,"mat-label"),s(15,"Kho"),r(),o(16,"mat-select",5),k("ngModelChange",function(t){p(e);let a=c();return f(a.DetailPhieukho().khoId,t)||(a.DetailPhieukho().khoId=t),_(t)}),D(17,We,2,3,"mat-option",20),r()(),D(18,Ne,5,2,"mat-form-field",21)(19,ze,5,2,"mat-form-field",21),o(20,"mat-form-field",17)(21,"mat-label"),s(22,"Ng\xE0y"),r(),o(23,"input",22),k("ngModelChange",function(t){p(e);let a=c();return f(a.DetailPhieukho().ngay,t)||(a.DetailPhieukho().ngay=t),_(t)}),r(),L(24,"mat-datepicker-toggle",23)(25,"mat-datepicker",null,0),r()(),o(27,"div",24),v(28,Ge,29,19,"div",25,ve),r(),o(30,"div")(31,"button",26),d("click",function(){p(e);let t=c();return _(t.AddSanpham())}),o(32,"span"),s(33,"Th\xEAm"),r(),o(34,"mat-icon"),s(35,"add"),r()()()(),F()()}if(l&2){let e=A(26),i=c();u(7),g("ngModel",i.DetailPhieukho().maphieu),h("disabled",!i.isEdit()),u(4),g("ngModel",i.DetailPhieukho().type),h("disabled",!i.isEdit()),u(),h("ngForOf",O(19,Te,x(15,Me),x(16,be),x(17,Fe),x(18,Ve))),u(4),g("ngModel",i.DetailPhieukho().khoId),h("disabled",!i.isEdit()),u(),h("ngForOf",i._KhoService.ListKho()),u(),h("ngIf",i.DetailPhieukho().type=="xuat"),u(),h("ngIf",i.DetailPhieukho().type=="nhap"),u(4),h("matDatepicker",e),g("ngModel",i.DetailPhieukho().ngay),h("disabled",!i.isEdit()),u(),h("for",e),u(4),M(i.DetailPhieukho().sanpham),u(3),h("disabled",!i.isEdit())}}var Ee=class l{_ListphieukhoComponent=C(we);_PhieukhoService=C(Se);_KhoService=C(Pe);_DonhangService=C(_e);_DathangService=C(De);_SanphamService=C(ye);_route=C(R);_router=C(j);_snackBar=C(J);filterSP=[];LoaiPhieu=[{title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"},{title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"},{title:"Chuy\u1EC3n Kho",value:"chuyenkho"},{title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}];constructor(){this._route.paramMap.subscribe(n=>P(this,null,function*(){let e=n.get("id");this._PhieukhoService.setPhieukhoId(e),yield this._DonhangService.getAllDonhang(),yield this._DathangService.getAllDathang(),yield this._SanphamService.getAllSanpham(),yield this._KhoService.getAllKho(),this.filterSP=this._SanphamService.ListSanpham()})),N(()=>P(this,null,function*(){let n=this._PhieukhoService.phieukhoId();n||(this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()),n==="0"?(this.DetailPhieukho.set({maphieu:T(8,!1),sanpham:[],ngay:new Date}),this._ListphieukhoComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieukho","0"])):(yield this._PhieukhoService.getPhieukhoByid(n),this._ListphieukhoComponent.drawer.open(),this._router.navigate(["/admin/phieukho",n]))}))}ChangeType(n){this.DetailPhieukho.update(e=>(e.sanpham=[],e))}ChosenDonhang(n,e){console.log(n.value),e=="xuat"?this.DetailPhieukho.update(i=>(i.sanpham=this._DonhangService.ListDonhang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)):this.DetailPhieukho.update(i=>(i.sanpham=this._DathangService.ListDathang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)),console.log(this.DetailPhieukho())}DetailPhieukho=this._PhieukhoService.DetailPhieukho;isEdit=E(!1);isDelete=E(!1);phieukhoId=this._PhieukhoService.phieukhoId;ngOnInit(){return P(this,null,function*(){})}handlePhieukhoAction(){return P(this,null,function*(){this.phieukhoId()==="0"?yield this.createPhieukho():yield this.updatePhieukho()})}createPhieukho(){return P(this,null,function*(){try{yield this._PhieukhoService.CreatePhieukho(this.DetailPhieukho()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieukho:",n)}console.log(this.DetailPhieukho())})}updatePhieukho(){return P(this,null,function*(){try{yield this._PhieukhoService.updatePhieukho(this.DetailPhieukho()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieukho:",n)}console.log(this.DetailPhieukho())})}DeleteData(){return P(this,null,function*(){try{yield this._PhieukhoService.DeletePhieukho(this.DetailPhieukho()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieukho"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieukho:",n)}})}goBack(){this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieukho.update(n=>(n.slug=me(n.title),n))}DoFindSanpham(n){let e=n.target.value.toLowerCase();this.filterSP=this._SanphamService.ListSanpham().filter(i=>pe(i.title).includes(e)||i.title.toLowerCase().includes(e))}onChangeSoluong(n,e){}AddSanpham(){this.DetailPhieukho.update(n=>(n.sanpham.push({id:T(8,!1),idSP:"",sldat:0,soluong:0,ghichu:""}),n)),console.log(this.DetailPhieukho())}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=I({type:l,selectors:[["app-detailphieukho"]],decls:17,vars:8,consts:[["picker",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],[1,"w-full","flex","flex-row","space-x-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 Phi\u1EBFu",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","selectionChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","w-full","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["matInput","","placeholder","Ch\u1ECDn ng\xE0y",3,"ngModelChange","matDatepicker","ngModel","disabled"],["matSuffix","",3,"for"],[1,"w-full","flex","flex-col","space-y-2","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"],[3,"selectionChange","disabled"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],["mat-icon-button","","color","primary"],[1,"overflow-y-auto","max-h-44"],["appearance","outline","subscriptSizing","dynamic",1,"w-80"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng Th\u1EF1c T\u1EBF",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["appearance","outline","class","w-80","subscriptSizing","dynamic",4,"ngIf"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"button",2),d("click",function(){return i.goBack()}),o(2,"mat-icon"),s(3,"arrow_back"),r()(),o(4,"div",3),s(5),r(),o(6,"div",4)(7,"mat-slide-toggle",5),k("ngModelChange",function(a){return f(i.DetailPhieukho().isActive,a)||(i.DetailPhieukho().isActive=a),a}),s(8),r(),D(9,Ie,3,0,"button",6)(10,Le,3,0,"button",6),o(11,"button",7),d("click",function(){return i.toggleDelete()}),o(12,"mat-icon"),s(13,"delete"),r()()()(),o(14,"div",8),D(15,Ae,9,0,"ng-container",9)(16,He,36,24,"ng-container",9),r()),e&2){let t;u(5),V(((t=i.DetailPhieukho())==null?null:t.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),u(2),g("ngModel",i.DetailPhieukho().isActive),h("disabled",!i.isEdit()),u(),V(i.DetailPhieukho().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),u(),h("ngIf",i.isEdit()),u(),h("ngIf",!i.isEdit()),u(5),h("ngIf",i.isDelete()),u(),h("ngIf",!i.isDelete())}},dependencies:[le,re,oe,ae,ue,he,ie,Y,te,Z,ee,U,Q,q,H,X,se,ce,G,ne,$,K,z,Ce,xe,ke,de,ge,fe],encapsulation:2})};export{Ee as DetailPhieukhoComponent};
