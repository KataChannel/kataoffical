import{a as ee,b as te,c as ie}from"./chunk-ME3WUDMG.js";import"./chunk-SI6OW6FA.js";import{a as $}from"./chunk-WGTMI3TL.js";import"./chunk-Q3EKFPHY.js";import"./chunk-H4Q3EX52.js";import{a as R}from"./chunk-YQ3XGS4L.js";import"./chunk-FLOPEQPR.js";import"./chunk-TDC46HHM.js";import"./chunk-73VEKB3F.js";import"./chunk-PKTJEQ3B.js";import{b as X,c as Y}from"./chunk-U3PIIE4W.js";import{b as J,c as Q,g as K}from"./chunk-7WTJKXMY.js";import{b as z,f as H,i as q,o as Z}from"./chunk-7C4ECVLS.js";import{a as N,b as G}from"./chunk-5SQUK3CW.js";import"./chunk-KDLSUHPH.js";import"./chunk-VR2W35LS.js";import{b as W}from"./chunk-DBWHEJBK.js";import"./chunk-SGYCFQGT.js";import"./chunk-LGNRZZPO.js";import{h as V}from"./chunk-7Q6IOVRA.js";import"./chunk-5IRBHD2O.js";import{b as O}from"./chunk-42KLW5LA.js";import"./chunk-Z6GF6IU5.js";import{a as P,c as F,d as j}from"./chunk-P2UNYZN7.js";import{j as T,p as B,q as M}from"./chunk-QPEFVQFW.js";import{$b as f,Ac as y,Bc as C,Cc as S,Fb as x,Fc as k,Gb as E,Mb as A,Nb as I,Pb as g,Ra as b,Zb as o,_b as r,dc as U,hc as v,ic as a,jb as w,ka as h,lb as D,mb as m,rb as d,ta as u,ua as p,vc as s,zb as L}from"./chunk-5F46NTIF.js";import"./chunk-LWLSKGAV.js";import{j as _}from"./chunk-47CWAPKR.js";var re=()=>[X,K,J,Q,z,H,q,N,T,j],ne=()=>({standalone:!0});function le(l,t){if(l&1&&f(0,"img",18),l&2){let e=a(2);g("src",e.Config.Backgroup.url,w)("alt",e.Config.Backgroup.alt)}}function ae(l,t){if(l&1){let e=U();o(0,"div",1),x(1,le,1,2,"img",2),o(2,"div",3)(3,"div",4)(4,"div",5),f(5,"div",6),o(6,"div",7),f(7,"img",8),o(8,"mat-form-field",9)(9,"mat-label"),s(10,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),r(),o(11,"input",10),S("ngModelChange",function(i){u(e);let c=a();return C(c.User.SDT,i)||(c.User.SDT=i),p(i)}),r(),o(12,"mat-icon",11),s(13,"call"),r()(),o(14,"mat-form-field",9)(15,"mat-label"),s(16,"M\u1EADt kh\u1EA9u"),r(),o(17,"input",12),v("keyup.enter",function(){u(e);let i=a();return p(i.Dangnhap())}),S("ngModelChange",function(i){u(e);let c=a();return C(c.User.password,i)||(c.User.password=i),p(i)}),r(),o(18,"mat-icon",11),s(19,"lock"),r()(),o(20,"div",13)(21,"a",14),s(22,"Qu\xEAn m\u1EADt kh\u1EA9u?"),r(),o(23,"a",15),s(24,"\u0110\u0103ng k\xFD"),r()(),o(25,"div",16),v("click",function(){u(e);let i=a();return p(i.Dangnhap())})("keyup.enter",function(){u(e);let i=a();return p(i.Dangnhap())}),o(26,"span"),s(27,"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n"),r()(),f(28,"div",17),r()()()()()}if(l&2){let e=a();m(),g("ngIf",e.Config==null||e.Config.Backgroup==null?null:e.Config.Backgroup.url),m(6),g("src",e.Config.Logo.url,w)("alt",e.Config.Logo.alt),m(4),y("ngModel",e.User.SDT),g("ngModelOptions",k(9,ne))("placeholder","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),m(6),y("ngModel",e.User.password),g("ngModelOptions",k(10,ne))("placeholder","M\u1EADt kh\u1EA9u")}}function se(l,t){}var oe=class l{constructor(t,e,n,i){this.auth=t;this.route=e;this.router=n;this.platformId=i;M(this.platformId)&&(this.token=localStorage.getItem("token")||null)}token;gotonew="translate-x-0";_UserService=h(R);_StorageService=h(O);Config=te;order1="order-1";order2="order-2";rightpanel="transform-x-0";leftpanel="transform-x-0";User={};_snackBar=h(W);onMessage(t){t.origin}ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.token;e?this.validateToken(e):this.router.navigate(["/admin/profile"])})}validateToken(t){try{let e=JSON.parse(atob(t.split(".")[1]));e.exp&&e.exp<Date.now()/1e3||(this._StorageService.setItem("token",t),this._UserService.getProfile().then(n=>{n&&(n.permissions>0?(console.log(n),window.location.reload()):this.router.navigate(["/404",{queryParams:{data:{code:403,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp li\xEAn h\u1EC7 admin"}}}]))}))}catch{}}Dangnhap(){return _(this,null,function*(){if(this.User.SDT&&this.User.SDT!==""&&this.User.password&&this.User.password!=="")try{this._UserService.login(this.User).then(t=>{console.log(t),t&&t[0]?setTimeout(()=>{window.location.href="/dashboardctv"},100):this._snackBar.open("Th\xF4ng Tin \u0110\u0103ng Nh\u1EADp Ch\u01B0a \u0110\xFAng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]})})}catch(t){console.error("Login error:",t)}else this._snackBar.open("Vui l\xF2ng \u0111i\u1EC1n \u0111\u1EE7 th\xF4ng tin","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})})}loginWithGoogle(){return _(this,null,function*(){let t=new $;try{let e=yield this.auth.signInWithPopup(t);console.log("Logged in:",e),console.log("Logged in:",e.user),console.log("Logged in:",e.user?.providerData[0]),this._UserService.LoginByGoogle(e.user?.providerData[0]).then(n=>{n[0]&&M(this.platformId)})}catch(e){console.error("Login error:",e)}})}loginGoogle(){this._UserService.loginWithGoogle()}loginFacebook(){this._UserService.loginWithFacebook()}loginZalo(){this._UserService.loginWithZalo()}static \u0275fac=function(e){return new(e||l)(d(ie),d(P),d(F),d(b))};static \u0275cmp=L({type:l,selectors:[["app-loginctv"]],hostBindings:function(e,n){e&1&&v("message",function(c){return n.onMessage(c)},!1,D)},decls:4,vars:0,consts:[[1e3,100],[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col","bg-slate-100"],["class","object-cover absolute top-0 right-0 w-full h-full",3,"src","alt",4,"ngIf"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"max-h-28","w-auto","rounded-lg",3,"src","alt"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","text","matInput","",1,"w-ful",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matPrefix","",1,"material-symbols-outlined"],["type","password","matInput","",1,"w-full",3,"keyup.enter","ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"w-full","flex","flex-row","justify-between","items-center"],["routerLink","/forgot-password-ctv",1,"text-blue-500","cursor-pointer","font-bold","hover:underline"],["routerLink","/dangkyctv",1,"text-blue-500","cursor-pointer","font-bold","hover:underline"],[1,"text-white","cursor-pointer","lg:w-64","w-full","flex","space-x-2","border","items-center","justify-center","p-4","rounded-lg","bg-blue-400","hover:bg-blue-600",3,"click","keyup.enter"],[1,"cursor-pointer","lg:w-64","w-full"],[1,"object-cover","absolute","top-0","right-0","w-full","h-full",3,"src","alt"]],template:function(e,n){e&1&&(x(0,ae,29,11)(1,se,0,0),A(2,0,re,1,null,null,0,null,E),I())},dependencies:[Y,ee,V,Z,G,B],encapsulation:2})};export{oe as LoginctvComponent};
