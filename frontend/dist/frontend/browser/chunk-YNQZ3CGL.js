import{a as te}from"./chunk-GMWWNSKI.js";import{a as ee}from"./chunk-54HR5OL4.js";import"./chunk-4SBRFZZE.js";import"./chunk-EGYIPWOD.js";import"./chunk-QBPAZZZC.js";import"./chunk-5KRV6C55.js";import"./chunk-TDC46HHM.js";import{b as S}from"./chunk-7HTKVVWT.js";import"./chunk-4Q7LVYLG.js";import"./chunk-6H7ULPNW.js";import{a as Z,b as $}from"./chunk-HMV5FT2X.js";import"./chunk-JQPT23SL.js";import"./chunk-P45BSFX3.js";import"./chunk-VQKD47J5.js";import"./chunk-SNOXSR5B.js";import"./chunk-73VEKB3F.js";import{h as K}from"./chunk-AALA6T4K.js";import"./chunk-XJO6HX2N.js";import{b as Y}from"./chunk-FQBC5V4N.js";import"./chunk-52ZCNIS7.js";import"./chunk-T67K4OKF.js";import"./chunk-54PG2AAV.js";import"./chunk-PKTJEQ3B.js";import{b as Q,c as U}from"./chunk-U3PIIE4W.js";import{b as G,g as X,h as q}from"./chunk-7WTJKXMY.js";import{b as z,f as R,i as j,o as O}from"./chunk-7C4ECVLS.js";import{a as J,b as H}from"./chunk-5SQUK3CW.js";import"./chunk-VR2W35LS.js";import"./chunk-VRNCYP3N.js";import"./chunk-GAYHZPO4.js";import"./chunk-4VR3POOM.js";import{b as N}from"./chunk-DBWHEJBK.js";import"./chunk-SGYCFQGT.js";import"./chunk-LGNRZZPO.js";import{c as B,f as W,h as P}from"./chunk-7Q6IOVRA.js";import"./chunk-5IRBHD2O.js";import"./chunk-42KLW5LA.js";import"./chunk-Z6GF6IU5.js";import{a as I,c as A}from"./chunk-P2UNYZN7.js";import{j as V,p as T}from"./chunk-QPEFVQFW.js";import{Ac as h,Bc as f,Cc as L,Fb as y,Ma as E,Pb as c,Zb as i,_b as a,ac as w,bc as x,bd as F,dc as D,hc as _,ic as d,ka as C,mb as g,ta as p,ua as s,vc as r,wc as M,zb as k}from"./chunk-5F46NTIF.js";import"./chunk-LWLSKGAV.js";import{a as b,b as v,j as m}from"./chunk-47CWAPKR.js";function ie(u,t){if(u&1){let e=D();i(0,"button",1),_("click",function(){p(e);let n=d();return s(n.handleLandingpageAction())}),i(1,"mat-icon"),r(2,"save"),a()()}}function ae(u,t){if(u&1){let e=D();i(0,"button",1),_("click",function(){p(e);let n=d();return s(n.toggleEdit())}),i(1,"mat-icon"),r(2,"edit"),a()()}}function oe(u,t){if(u&1){let e=D();w(0),i(1,"div",8)(2,"div",9),r(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),i(4,"div",10)(5,"button",11),_("click",function(){p(e);let n=d();return s(n.DeleteData())}),r(6,"\u0110\u1ED3ng \xDD"),a(),i(7,"button",12),_("click",function(){p(e);let n=d();return s(n.toggleDelete())}),r(8,"Hu\u1EF7 B\u1ECF"),a()()(),x()}}function le(u,t){if(u&1){let e=D();w(0),i(1,"div",13)(2,"mat-form-field",14)(3,"mat-label"),r(4,"Ti\xEAu \u0110\u1EC1"),a(),i(5,"input",15),_("input",function(){p(e);let n=d();return s(n.FillSlug())}),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().title,n)||(l.DetailLandingpage().title=n),s(n)}),a()(),i(6,"mat-form-field",14)(7,"mat-label"),r(8,"Slug"),a(),i(9,"input",16),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().slug,n)||(l.DetailLandingpage().slug=n),s(n)}),a()(),i(10,"div",17)(11,"mat-form-field",14)(12,"mat-label"),r(13,"Li\xEAn K\u1EBFt Ladipage"),a(),i(14,"input",18),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().contentHtml,n)||(l.DetailLandingpage().contentHtml=n),s(n)}),a()()(),i(15,"div",17)(16,"mat-form-field",14)(17,"mat-label"),r(18,"H\xECnh Nh\u1ECF"),a(),i(19,"input",19),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().thumbnail,n)||(l.DetailLandingpage().thumbnail=n),s(n)}),a()()(),i(20,"mat-form-field",14)(21,"mat-label"),r(22,"D\u1EEF Li\u1EC7u Json"),a(),i(23,"textarea",20),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().contentJson,n)||(l.DetailLandingpage().contentJson=n),s(n)}),a()(),i(24,"mat-form-field",14)(25,"mat-label"),r(26,"M\xF4 T\u1EA3 Nh\u1ECF"),a(),i(27,"textarea",21),L("ngModelChange",function(n){p(e);let l=d();return f(l.DetailLandingpage().description,n)||(l.DetailLandingpage().description=n),s(n)}),a()()(),x()}if(u&2){let e=d();g(5),h("ngModel",e.DetailLandingpage().title),c("disabled",!e.isEdit()),g(4),h("ngModel",e.DetailLandingpage().slug),c("disabled",!e.isEdit()),g(5),h("ngModel",e.DetailLandingpage().contentHtml),c("disabled",!e.isEdit()),g(5),h("ngModel",e.DetailLandingpage().thumbnail),c("disabled",!e.isEdit()),g(4),h("ngModel",e.DetailLandingpage().contentJson),c("disabled",!e.isEdit()),g(4),h("ngModel",e.DetailLandingpage().description),c("disabled",!e.isEdit())}}var ne=class u{_ListlandingpageComponent=C(te);_LandingpageService=C(ee);_route=C(I);_router=C(A);_snackBar=C(N);constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");this._LandingpageService.setLandingpageId(e)}),F(()=>m(this,null,function*(){let t=this._LandingpageService.landingpageId();t||(this._router.navigate(["/admin/landingpage"]),this._ListlandingpageComponent.drawer.close()),t==="new"?(this.DetailLandingpage.set({}),this._ListlandingpageComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/landingpage","new"])):(yield this._LandingpageService.getLandingpageBy({id:t,isOne:!0}),this._ListlandingpageComponent.drawer.open(),this._router.navigate(["/admin/landingpage",t])),this.DetailLandingpage.update(e=>(e.contentJson=JSON.stringify(e.contentJson),e))}))}DetailLandingpage=this._LandingpageService.DetailLandingpage;isEdit=E(!1);isDelete=E(!1);landingpageId=this._LandingpageService.landingpageId;ngOnInit(){return m(this,null,function*(){this.DetailLandingpage.update(t=>(t.contentJson=JSON.stringify(t.contentJson),t))})}handleLandingpageAction(){return m(this,null,function*(){this.landingpageId()==="new"?yield this.createLandingpage():yield this.updateLandingpage()})}createLandingpage(){return m(this,null,function*(){try{yield this._LandingpageService.CreateLandingpage(this.DetailLandingpage()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o landingpage:",t)}})}updateLandingpage(){return m(this,null,function*(){try{yield this._LandingpageService.updateLandingpage(this.DetailLandingpage()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt landingpage:",t)}})}Copy(){return m(this,null,function*(){try{let t=this.DetailLandingpage(),e=v(b({},t),{id:void 0,codeId:void 0,title:`${t.title} - Copy`,slug:S(`${t.title} - Copy`),createdAt:new Date,updatedAt:new Date});yield this._LandingpageService.CreateLandingpage(e),this._snackBar.open("Sao Ch\xE9p Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/landingpage",e.id])}catch(t){console.error("L\u1ED7i khi sao ch\xE9p landingpage:",t),this._snackBar.open("L\u1ED7i khi sao ch\xE9p","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}DeleteData(){return m(this,null,function*(){try{yield this._LandingpageService.DeleteLandingpage(this.DetailLandingpage()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/landingpage"])}catch(t){console.error("L\u1ED7i khi x\xF3a landingpage:",t)}})}goBack(){this._router.navigate(["/admin/landingpage"]),this._ListlandingpageComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailLandingpage.update(t=>(t.slug=S(t.title),t))}static \u0275fac=function(e){return new(e||u)};static \u0275cmp=k({type:u,selectors:[["app-detaillandingpage"]],decls:17,vars:8,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ti\xEAu \u0110\u1EC1",3,"input","ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Slug",3,"ngModelChange","ngModel","disabled"],[1,"flex","flex-col","space-y-2"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Li\xEAn K\u1EBFt Ladipage",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp H\xECnh Nh\u1ECF",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp D\u1EEF Li\u1EC7u Json",3,"ngModelChange","ngModel","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xF4 T\u1EA3 Nh\u1ECF",3,"ngModelChange","ngModel","disabled"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"button",1),_("click",function(){return o.goBack()}),i(2,"mat-icon"),r(3,"arrow_back"),a()(),i(4,"div",2),r(5),a(),i(6,"div",3)(7,"mat-slide-toggle",4),L("ngModelChange",function(l){return f(o.DetailLandingpage().isActive,l)||(o.DetailLandingpage().isActive=l),l}),r(8),a(),i(9,"button",1),_("click",function(){return o.Copy()}),i(10,"mat-icon"),r(11,"content_copy"),a()(),y(12,ie,3,0,"button",5)(13,ae,3,0,"button",5),a()(),i(14,"div",6),y(15,oe,9,0,"ng-container",7)(16,le,28,12,"ng-container",7),a()),e&2){let n;g(5),M(((n=o.DetailLandingpage())==null?null:n.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),g(2),h("ngModel",o.DetailLandingpage().isActive),c("disabled",!o.isEdit()),g(),M(o.DetailLandingpage().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),g(4),c("ngIf",o.isEdit()),g(),c("ngIf",!o.isEdit()),g(2),c("ngIf",o.isDelete()),g(),c("ngIf",!o.isDelete())}},dependencies:[q,X,G,U,Q,O,z,R,j,H,J,P,W,B,Y,K,T,V,$,Z],encapsulation:2})};export{ne as DetailLandingpageComponent};
