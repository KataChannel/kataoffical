{
  "version": 3,
  "sources": ["src/app/shared/services/errorlog.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { environment } from '../../../environments/environment.development';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ErrorLogService {\r\n  async logError(message: string, details?: any): Promise<void> {\r\n    const logEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      message,\r\n      details: {\r\n        ...details,\r\n        userAgent: navigator.userAgent, // Thêm thông tin client\r\n        url: window.location.href,\r\n      },\r\n    };\r\n    try {\r\n      await fetch(`${environment.APIURL}/errorlogs`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(logEntry),\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to send log to server:', err);\r\n      // Lưu cục bộ nếu gửi thất bại\r\n      localStorage.setItem('errorLogs', JSON.stringify(logEntry));\r\n    }\r\n  }\r\n  async ClearRedisCache(){\r\n    try {\r\n      await fetch(`${environment.APIURL}/redis/clear`, {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to send log to server:', err);\r\n    }\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;;;AAMM,IAAO,kBAAP,MAAO,iBAAe;EACpB,SAAS,SAAiB,SAAa;;AAC3C,YAAM,WAAW;QACf,YAAW,oBAAI,KAAI,GAAG,YAAW;QACjC;QACA,SAAS,iCACJ,UADI;UAEP,WAAW,UAAU;;UACrB,KAAK,OAAO,SAAS;;;AAGzB,UAAI;AACF,cAAM,MAAM,GAAG,YAAY,MAAM,cAAc;UAC7C,QAAQ;UACR,SAAS,EAAE,gBAAgB,mBAAkB;UAC7C,MAAM,KAAK,UAAU,QAAQ;SAC9B;MACH,SAAS,KAAK;AACZ,gBAAQ,MAAM,iCAAiC,GAAG;AAElD,qBAAa,QAAQ,aAAa,KAAK,UAAU,QAAQ,CAAC;MAC5D;IACF;;EACM,kBAAe;;AACnB,UAAI;AACF,cAAM,MAAM,GAAG,YAAY,MAAM,gBAAgB;UAC/C,QAAQ;UACR,SAAS,EAAE,gBAAgB,mBAAkB;SAC9C;MACH,SAAS,KAAK;AACZ,gBAAQ,MAAM,iCAAiC,GAAG;MACpD;IACF;;;qCAhCW,kBAAe;EAAA;4EAAf,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;;",
  "names": []
}
