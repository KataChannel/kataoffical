import{a as ct}from"./chunk-QHCPJI62.js";import{a as at}from"./chunk-4ZVJO4SQ.js";import{a as rt}from"./chunk-3RLVAOOD.js";import{a as O,b as He}from"./chunk-EQHO5CVZ.js";import{b as Oe}from"./chunk-6FM7CICS.js";import{a as Be}from"./chunk-ZW44ZSN2.js";import{a as ye,b as Ce,c as we}from"./chunk-P7BBNZNS.js";import{a as ve,b as be,c as Ne,d as ke}from"./chunk-LECLUHD2.js";import{a as ge}from"./chunk-IE4L6KDU.js";import{c as nt,h as ot}from"./chunk-35TLWMLN.js";import{a as B,b as je,c as Je}from"./chunk-N2KOTR2C.js";import{a as v}from"./chunk-H7UDLENL.js";import{a as _e}from"./chunk-Q3KOS33T.js";import{b as me,c as $}from"./chunk-OJMQSPC3.js";import{a as Re,b as qe,c as ze,d as Ge,e as Ke,g as Ue,h as Qe,j as We,k as Ze,m as Xe,n as Ye,p as et,q as tt,r as it,s as G}from"./chunk-LXFX5R3F.js";import{b as $e}from"./chunk-KJ3ORMDZ.js";import{b as Te,g as Fe,j as Le,n as Ee,p as Me,r as Ie,v as De,w as Pe,y as Ve,z as Ae}from"./chunk-M2YCC4SP.js";import{a as xe,b as Se}from"./chunk-PYCEOLIX.js";import{a as de,c as he,e as fe}from"./chunk-BAEDUNPT.js";import{y as pe,z as ue}from"./chunk-DL37TIRW.js";import{l as ae,m as ce,r as se,v as le}from"./chunk-GKGVKDD5.js";import{$b as H,Cc as T,Db as Q,Dc as m,Ec as A,Fc as w,Ic as ne,Jc as oe,Kb as S,Kc as re,Mc as j,Ra as L,Sc as J,Ub as y,Uc as z,Xb as W,Yb as Z,ac as X,bc as Y,cc as E,dc as M,ec as a,fc as c,gc as I,hc as ee,ic as te,ja as U,kc as N,oa as q,pa as b,pc as _,rb as p,rc as l,vc as ie,xc as D,ya as h,yc as P,za as f,zc as V}from"./chunk-OL5DVADB.js";import{a as F,b as K,j as d}from"./chunk-6DYNGEAS.js";var R=class o{constructor(i,t){this._StorageService=i;this.router=t}ListNhomncc=L([]);DetailNhomncc=L({});nhomnccId=L(null);setNhomnccId(i){this.nhomnccId.set(i)}addKHtoNhom(i){return d(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${v.APIURL}/nhomncc/addKHtoNhom`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let n=yield e.json();e.ok}catch(t){return console.error(t)}})}removeKHfromNhom(i){return d(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${v.APIURL}/nhomncc/removeKHfromNhom`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let n=yield e.json();e.ok}catch(t){return console.error(t)}})}CreateNhomncc(i){return d(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${v.APIURL}/nhomncc`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let n=yield e.json();e.ok,this.getAllNhomncc(),this.nhomnccId.set(n.id)}catch(t){return console.error(t)}})}getAllNhomncc(){return d(this,null,function*(){try{let i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${v.APIURL}/nhomncc`,i);t.ok;let e=yield t.json();this.ListNhomncc.set(e)}catch(i){return console.error(i)}})}listenNhomnccUpdates(){}initDB(){return d(this,null,function*(){return yield at("NhomnccDB",1,{upgrade(i){i.createObjectStore("nhomnccs",{keyPath:"id"})}})})}getNhomnccByid(i){return d(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},e=yield fetch(`${v.APIURL}/nhomncc/findid/${i}`,t);if(!e.ok)if(e.status===401){let r=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===403){let r=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===500){let r=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let n=yield e.json();this.DetailNhomncc.set(n)}catch(t){return console.error(t)}})}updateNhomncc(i){return d(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${v.APIURL}/nhomncc/${i.id}`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let n=yield e.json();e.ok,this.getAllNhomncc(),this.getNhomnccByid(i.id)}catch(t){return console.error(t)}})}DeleteNhomncc(i){return d(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}},e=yield fetch(`${v.APIURL}/nhomncc/${i.id}`,t);if(!e.ok)if(e.status===401){let n=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===403){let n=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===500){let n=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else{let n=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}this.getAllNhomncc()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||o)(q(ge),q($))};static \u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"})};var pt=["drawer"],ut=()=>[50,100],dt=()=>({standalone:!0}),ht=(o,i)=>i.key;function ft(o,i){if(o&1){let t=N();a(0,"button",32),_("click",function(n){let r=h(t).$implicit;return l().toggleColumn(r),f(n.stopPropagation())}),a(1,"mat-icon"),m(2),c(),a(3,"span"),m(4),c()()}if(o&2){let t=i.$implicit;p(2),A(t.isShow?"check_box":"check_box_outline_blank"),p(2),A(t.value)}}function _t(o,i){if(o&1){let t=N();a(0,"mat-form-field",35)(1,"mat-label"),m(2),c(),a(3,"input",36),_("keyup",function(){h(t);let n=l(2);return f(n.applyFilter())}),re("ngModelChange",function(n){let r=h(t).$implicit,s=l(2);return oe(s.filterValues[r],n)||(s.filterValues[r]=n),f(n)}),c()()}if(o&2){let t=i.$implicit,e=l(2);p(2),A(e.ColumnName[t]),p(),ie("placeholder","Vui l\xF2ng Nh\u1EADp ",t,""),ne("ngModel",e.filterValues[t]),y("ngModelOptions",j(5,dt))}}function gt(o,i){if(o&1&&(a(0,"div",33),S(1,_t,4,6,"mat-form-field",34),c()),o&2){let t=l();p(),y("ngForOf",t.displayedColumns)}}function yt(o,i){o&1&&(a(0,"span",56),m(1,"check"),c())}function Ct(o,i){if(o&1){let t=N();a(0,"div",54),_("click",function(){let n=h(t).$implicit,r=l(3);return f(r.ChosenItem(n))}),S(1,yt,2,0,"span",55),m(2),c()}if(o&2){let t=i.$implicit,e=l(2).$implicit,n=l();p(),y("ngIf",n.CheckItem(t)),p(),w(" ",t[e]||"Tr\u1ED1ng"," ")}}function wt(o,i){if(o&1){let t=N();a(0,"th",39)(1,"span",40),m(2),c(),a(3,"span",41,3),m(5," filter_alt "),c(),a(6,"mat-menu",null,1)(8,"div",42),_("click",function(n){return h(t),f(n.stopPropagation())}),a(9,"div",43)(10,"input",44),_("keyup",function(n){h(t);let r=l().$implicit,s=l();return f(s.doFilterHederColumn(n,r))}),c(),a(11,"div",45)(12,"span",46),m(13,"search"),c()()(),a(14,"div",47)(15,"div",8)(16,"span",48),_("click",function(){h(t);let n=l().$implicit,r=l();return f(r.ChosenAll(r.FilterHederColumn(r.dataSource.filteredData,n)))}),m(17),c(),a(18,"span",48),_("click",function(){h(t);let n=l(2);return f(n.EmptyFiter())}),m(19,"Xo\xE1"),c()(),a(20,"span",48),_("click",function(){h(t);let n=l(2);return f(n.ResetFilter())}),m(21,"Reset"),c()(),a(22,"div",49),E(23,Ct,3,2,"div",50,X),c(),a(25,"div",51)(26,"button",52),_("click",function(){h(t);let n=T(4);return f(n.closeMenu())}),m(27,"\u0110\xF3ng"),c(),a(28,"button",53),_("click",function(){h(t);let n=T(4),r=l(2);return f(r.ApplyFilterColum(n))}),m(29,"\xC1p D\u1EE5ng"),c()()()()()}if(o&2){let t=T(7),e=l().$implicit,n=l();p(2),w(" ",n.ColumnName[e]," "),p(),y("matMenuTriggerFor",t),p(14),w("Ch\u1ECDn T\u1EA5t C\u1EA3 ",n.FilterHederColumn(n.dataSource.filteredData,e).length||0,""),p(6),M(n.FilterHederColumn(n.dataSource.filteredData,e))}}function xt(o,i){if(o&1&&(a(0,"span",58),m(1),c()),o&2){let t=l().index;p(),w(" ",t+1," ")}}function St(o,i){if(o&1&&(a(0,"span",59),m(1),J(2,"date"),c()),o&2){let t=l().$implicit,e=l().$implicit;p(),w(" ",z(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function vt(o,i){o&1&&(a(0,"mat-icon",60),m(1,"check_circle"),c())}function bt(o,i){o&1&&(a(0,"mat-icon",61),m(1,"cancel"),c())}function Nt(o,i){if(o&1&&(a(0,"span",58),S(1,vt,2,0,"mat-icon",60)(2,bt,2,0,"mat-icon",61),c()),o&2){let t=l().$implicit,e=l().$implicit;p(),H(t[e]?1:2)}}function kt(o,i){if(o&1&&(a(0,"span",59),m(1),J(2,"date"),c()),o&2){let t=l().$implicit,e=l().$implicit;p(),w(" ",z(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function Tt(o,i){if(o&1&&(a(0,"span",58),m(1),c()),o&2){let t=l().$implicit,e=l().$implicit;p(),w(" ",t[e]," ")}}function Ft(o,i){if(o&1&&(a(0,"td",57),S(1,xt,2,1,"span",58)(2,St,3,4,"span",59)(3,Nt,3,1,"span",58)(4,kt,3,4,"span",59)(5,Tt,2,1,"span",58),c()),o&2){let t,e=l().$implicit;p(),H((t=e)==="STT"?1:t==="createdAt"?2:t==="isActive"?3:t==="updatedAt"?4:5)}}function Lt(o,i){if(o&1&&(ee(0,27),S(1,wt,30,3,"th",37)(2,Ft,6,1,"td",38),te()),o&2){let t=i.$implicit;y("matColumnDef",t)}}function Et(o,i){o&1&&I(0,"tr",62)}function Mt(o,i){if(o&1){let t=N();a(0,"tr",63),_("click",function(){let n=h(t).$implicit,r=l();return f(r.goToDetail(n))}),c()}if(o&2){let t=i.$implicit,e=l();Z("hover:bg-slate-100 ",e.nhomnccId()==t.id?"!bg-slate-200":"","")}}function It(o,i){o&1&&(a(0,"tr",64)(1,"td",65),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),c()())}var st=class o{Detail={};displayedColumns=["name","description","createdAt","updatedAt"];ColumnName={name:"Nh\xF3m Nh\xE0 Cung C\u1EA5p",description:"M\xF4 T\u1EA3",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt"};FilterColumns=JSON.parse(localStorage.getItem("NhomnccColFilter")||"[]");Columns=[];isFilter=!1;paginator;sort;drawer;filterValues={};_NhomnccService=b(R);_breakpointObserver=b(pe);_GoogleSheetService=b(rt);_GraphqlService=b(ct);_router=b($);Listnhomncc=this._NhomnccService.ListNhomncc;dataSource=new G([]);nhomnccId=this._NhomnccService.nhomnccId;_snackBar=b(_e);CountItem=0;constructor(){this.displayedColumns.forEach(i=>{this.filterValues[i]=""})}createFilter(){return(i,t)=>{let e=JSON.parse(t),n=!0;return this.displayedColumns.forEach(r=>{if(e[r]){let s=i[r]?i[r].toString().toLowerCase():"";n=n&&s.includes(e[r].toLowerCase())}}),n}}applyFilter(){this.dataSource.filter=JSON.stringify(this.filterValues)}ngOnInit(){return d(this,null,function*(){yield this.getAllNhomncc(),this.CountItem=this.Listnhomncc().length,this.dataSource=new G(this.Listnhomncc()),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=this.createFilter(),this.initializeColumns(),this.setupDrawer(),this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"})}refresh(){return d(this,null,function*(){yield this._NhomnccService.getAllNhomncc()})}getAllNhomncc(){return d(this,null,function*(){let i=yield this._GraphqlService.findAll("nhomncc",{select:{id:!0,name:!0,description:!0,createdAt:!0,updatedAt:!0}});this._NhomnccService.ListNhomncc.set(i.data)})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(i=>({key:i,value:this.ColumnName[i],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("NhomnccColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,t)=>(t.isShow&&(i[t.key]=t.value),i),{})}setupDrawer(){this._breakpointObserver.observe([ue.Handset]).subscribe(i=>{i.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(i){let t=this.FilterColumns.find(e=>e.key===i.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(i,t){return i.filter((n,r,s)=>r===s.findIndex(g=>g[t]===n[t]))}doFilterHederColumn(i,t){this.dataSource.filteredData=this.Listnhomncc().filter(n=>Be(n[t]).includes(i.target.value.toLowerCase())||n[t].toLowerCase().includes(i.target.value.toLowerCase()));let e=i.target.value.toLowerCase();console.log(e,t),console.log(this.dataSource.filteredData)}ListFilter=[];ChosenItem(i){this.ListFilter.includes(i.id)?this.ListFilter=this.ListFilter.filter(t=>t!==i.id):this.ListFilter.push(i.id),console.log(this.ListFilter)}ChosenAll(i){i.forEach(t=>{this.ListFilter.includes(t.id)?this.ListFilter=this.ListFilter.filter(e=>e!==e.id):this.ListFilter.push(t.id)})}ResetFilter(){this.ListFilter=this.Listnhomncc().map(i=>i.id),this.dataSource.data=this.Listnhomncc(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(i){return this.ListFilter.includes(i.id)}ApplyFilterColum(i){this.dataSource.data=this.Listnhomncc().filter(t=>this.ListFilter.includes(t.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log(this.dataSource.data),i.closeMenu()}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,t)=>(t.isShow&&(i[t.key]=t.value),i),{}),localStorage.setItem("NhomnccColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let t=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(e=>e.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/nhomncc","new"])}goToDetail(i){this._NhomnccService.setNhomnccId(i.id),this.drawer.open(),this._router.navigate(["admin/nhomncc",i.id])}LoadDrive(){return d(this,null,function*(){let i={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"NCCImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._GoogleSheetService.getDrive(i),e=Oe(t.values);console.log(e),this.DoImportData(e)})}DoImportData(i){console.log(i);let e=i.map(u=>({name:u.name?.trim()||"",mancc:u.mancc?.trim()||"",sdt:u.sdt?.trim()||"",diachi:u.diachi?.trim()||"",ghichu:u.ghichu?.trim()||""})).filter((u,x,C)=>x===C.findIndex(lt=>lt.mancc===u.mancc)),n=e.map(u=>u.mancc),r=this._NhomnccService.ListNhomncc().map(u=>u.mancc),s=n.filter(u=>!r.includes(u)),g=e.map(u=>d(this,null,function*(){let x=this._NhomnccService.ListNhomncc().find(C=>C.mancc===u.mancc);if(x){let C=F(F({},x),u);yield this._NhomnccService.updateNhomncc(C)}else yield this._NhomnccService.CreateNhomncc(u)})),k=s.map(u=>d(this,null,function*(){let x=this._NhomnccService.ListNhomncc().find(C=>C.mancc===u);x.isActive=!1,yield this._NhomnccService.updateNhomncc(x)}));Promise.all([...g,...k]).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}convertFlatToGroup(i){if(!i||i.length===0)return[];let t=Object.keys(i[0]).filter(e=>!["description","name"].includes(e));return i.forEach(e=>{e.khachhang=[];for(let n of t)e[n]!==void 0&&e[n]!==null&&e[n]!==""&&e.khachhang.push(e[n]),delete e[n]}),i}ImporExcel(i){return d(this,null,function*(){let t=yield ot(i);console.log(i),console.log(t);let e=this.convertFlatToGroup(t);console.log(e);let n=yield this._GraphqlService.findAll("khachhang",{select:{id:!0,name:!0,makh:!0},take:99999,aggressiveCache:!0,enableParallelFetch:!0}),r=e.filter(s=>s?.khachhang?.length>0).map(s=>K(F({},s),{khachhang:s?.khachhang?.map(g=>n.data.find(k=>k?.makh===g)?.id).filter(g=>g!==void 0)}));console.log("ListNCCSP for import:",r),yield this.processImportData(r)})}processImportData(i){return d(this,null,function*(){try{let t=i.map(e=>d(this,null,function*(){try{let n=this.Listnhomncc().find(s=>s.name===e.name),r={name:e.name,description:e.description||"",khachhang:{connect:e.khachhang.map(s=>({id:s}))}};n?(console.log(`Updating existing nhomncc: ${e.name}`),yield this._GraphqlService.updateOne("nhomncc",{id:n.id},r)):(console.log(`Creating new nhomncc: ${e.name}`),yield this._GraphqlService.createOne("nhomncc",r))}catch(n){console.error(`Error processing nhomncc "${e.name}":`,n),n.message?.includes("Unique constraint failed")&&n.message?.includes("name")?this._snackBar.open(`T\xEAn nh\xF3m "${e.name}" \u0111\xE3 t\u1ED3n t\u1EA1i, b\u1ECF qua.`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}):this._snackBar.open(`L\u1ED7i x\u1EED l\xFD nh\xF3m "${e.name}": ${n.message}`,"",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}}));yield Promise.all(t),yield this.refresh(),this._snackBar.open(`Import ho\xE0n t\u1EA5t! \u0110\xE3 x\u1EED l\xFD ${i.length} nh\xF3m kh\xE1ch h\xE0ng.`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),setTimeout(()=>{window.location.reload()},300)}catch(t){console.error("Import error:",t),this._snackBar.open(`L\u1ED7i import: ${t.message}`,"",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}testImportWithSampleData(){return d(this,null,function*(){let i=[{name:"Nh\xF3m 2",description:"M\xF4 t\u1EA3",khachhang:["0032fc11-b99f-4ab6-a10b-9bfdb32f61b5","003c52fc-4e54-4d58-92e2-a7bf3b847e2c","008fc6fb-4834-4c72-9f80-7281db4b09db","011c521e-8b2e-4ba1-a9dc-4a819321444d"]},{name:"Nh\xF3m 4",description:"M\xF4 T\u1EA3 2",khachhang:["0032fc11-b99f-4ab6-a10b-9bfdb32f61b5","008fc6fb-4834-4c72-9f80-7281db4b09db","01cc2b3e-a279-4fb7-8e78-7073cf7d8d8b","02f57b49-2734-4d92-988a-2fac2a5fbbfa","036b2dd7-8026-45ae-b388-e643f3546df8","036ded8c-a9ab-4d0b-b18a-daa0c04aaea8"]}];console.log("Testing import with sample data:",i),yield this.processImportData(i)})}ExportExcel(i,t){return d(this,null,function*(){console.log(i);let n=(yield this._GraphqlService.findAll("khachhang",{select:{id:!0,name:!0,makh:!0},take:99999,aggressiveCache:!0,enableParallelFetch:!0})).data.reduce((s,g)=>(g&&g.makh&&(s[g.makh]=""),s),{}),r=i.map(s=>{let g={name:s.name||"",description:s.description||""},k=1;for(let u of Object.keys(n))s.khachhang?.some(C=>C.makh===u)&&(g[k]=u,k++);return g});nt(r,t)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=Q({type:o,selectors:[["app-listnhomncc"]],viewQuery:function(t,e){if(t&1&&(D(O,5),D(B,5),D(pt,7)),t&2){let n;P(n=V())&&(e.paginator=n.first),P(n=V())&&(e.sort=n.first),P(n=V())&&(e.drawer=n.first)}},decls:50,vars:12,consts:[["drawer",""],["menu","matMenu"],["uploadfile",""],["menuTrigger","matMenuTrigger"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center","btn-primary",3,"click"],[1,"whitespace-nowrap"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","B\u1ED9 L\u1ECDc","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["class","w-full grid grid-cols-2 gap-2 lg:flex lg:flex-row lg:space-x-2 items-center",4,"ngIf"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],[1,"w-full","grid","grid-cols-2","gap-2","lg:flex","lg:flex-row","lg:space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",4,"ngFor","ngForOf"],["appearance","outline","subscriptSizing","dynamic"],["matInput","",3,"keyup","ngModelChange","ngModel","ngModelOptions","placeholder"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[1,"z-10","material-symbols-outlined","text-gray-500",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,e){if(t&1){let n=N();a(0,"mat-drawer-container",4)(1,"mat-drawer",5,0),I(3,"router-outlet"),c(),a(4,"div",6)(5,"div",7)(6,"div",8)(7,"button",9),_("click",function(){return h(n),f(e.create())}),a(8,"mat-icon"),m(9,"add_circle"),c(),a(10,"span",10),m(11,"T\u1EA1o M\u1EDBi"),c()(),a(12,"button",11)(13,"mat-icon"),m(14,"tune"),c()(),a(15,"mat-menu",null,1)(17,"div",12)(18,"mat-form-field",13)(19,"input",14),_("input",function(s){return h(n),f(e.doFilterColumns(s))})("click",function(s){return h(n),f(s.stopPropagation())}),c(),a(20,"mat-icon",15),m(21,"search"),c()()(),a(22,"div",16),E(23,ft,5,2,"button",17,ht),c()(),a(25,"button",18),_("click",function(){return h(n),f(e.isFilter=!e.isFilter)}),a(26,"mat-icon"),m(27,"filter_list"),c()(),a(28,"button",19),_("click",function(){return h(n),f(e.ExportExcel(e.Listnhomncc(),"Nhomncc"))}),a(29,"mat-icon"),m(30,"file_download"),c()(),a(31,"button",20),_("click",function(){h(n);let s=T(35);return f(s.click())}),a(32,"mat-icon"),m(33,"file_upload"),c()(),a(34,"input",21,2),_("change",function(s){return h(n),f(e.ImporExcel(s))}),c(),a(36,"button",22),_("click",function(){return h(n),f(e.LoadDrive())}),a(37,"mat-icon"),m(38,"cloud_download"),c()(),a(39,"span",23),m(40),c()()(),S(41,gt,2,1,"div",24),a(42,"div",25)(43,"table",26),E(44,Lt,3,1,"ng-container",27,Y),S(46,Et,1,0,"tr",28)(47,Mt,1,3,"tr",29)(48,It,3,0,"tr",30),c(),I(49,"mat-paginator",31),c()()()}if(t&2){let n=T(16);p(),y("position","end"),p(11),y("matMenuTriggerFor",n),p(11),M(e.FilterColumns),p(2),W(e.isFilter?"!bg-slate-200":""),p(15),w(" ",e.CountItem," Nh\xE0 Cung C\u1EA5p "),p(),y("ngIf",e.isFilter),p(2),y("dataSource",e.dataSource),p(),M(e.displayedColumns),p(2),y("matHeaderRowDef",e.displayedColumns),p(),y("matRowDefColumns",e.displayedColumns),p(2),y("pageSizeOptions",j(11,ut))}},dependencies:[Pe,De,Me,Ie,Ae,Ve,it,ze,Ke,Ze,Ue,Ge,Xe,Qe,We,Ye,et,tt,Je,B,je,He,O,ke,be,ve,Ne,we,ye,Ce,me,Se,xe,fe,de,he,$e,le,ae,ce,se,Ee,Te,Fe,Le,qe,Re],encapsulation:2})};export{R as a,st as b};
