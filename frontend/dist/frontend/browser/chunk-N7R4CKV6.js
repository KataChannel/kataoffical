import{a as Rt}from"./chunk-7MVBIEPH.js";import{a as Ot}from"./chunk-23SOXCPT.js";import{k as gt}from"./chunk-URIEAEGI.js";import{a as wt,b as vt,c as X,d as St,e as V,f as Mt,g as Ft,h as kt,i as Tt,j as bt,k as Et,l as Dt,m as It,n as Xt,o as Vt,p as Yt,q as Lt,r as Pt,s as $t,t as Bt}from"./chunk-A3KIOETZ.js";import{a as yt}from"./chunk-ZW44ZSN2.js";import{a as it,b as nt,c as at}from"./chunk-QR3VZXMW.js";import{b as Ct}from"./chunk-OCCYRB3G.js";import{a as Ht}from"./chunk-JNVUT6FC.js";import{a as lt,b as st,c as mt,d as ct}from"./chunk-5NUPTYVB.js";import{a as ot,b as rt}from"./chunk-WCQZDYIS.js";import{n as pt,p as ut,q as dt,u as _t,v as ht,x as ft,y as xt}from"./chunk-2G4G76BL.js";import"./chunk-3ZB7GGLY.js";import"./chunk-VUZTNYK4.js";import{a as et}from"./chunk-JBOUTHDD.js";import"./chunk-2H5HLGTB.js";import"./chunk-LYJBMBMC.js";import{a as W,c as Z,e as tt}from"./chunk-M4K2YFJY.js";import"./chunk-2PPFUFFT.js";import{y as G,z as U}from"./chunk-INKYKFQH.js";import{b as j,c as J}from"./chunk-4TLJXXI3.js";import"./chunk-EY4OT7TS.js";import{l as H,m as A,r as z,s as Q,t as q}from"./chunk-4KYRHQES.js";import{Cc as F,Dc as c,Eb as B,Ec as k,Fc as f,Lb as C,Mc as K,Sc as y,Uc as g,Vb as h,_b as b,ac as O,bc as L,cc as P,dc as o,ec as l,fc as M,gc as R,hc as N,jc as v,oa as w,oc as _,qc as r,rb as m,wc as E,xa as p,xc as D,ya as u,yc as I}from"./chunk-6QR2UCJZ.js";import"./chunk-EU2KAMEK.js";import{g as Kt,h as Y,j as $}from"./chunk-6DYNGEAS.js";var x=Kt(Ht());var At=["drawer"],zt=()=>[5,10,25,100],Qt=(n,e)=>e.key;function qt(n,e){if(n&1){let t=v();o(0,"button",25),_("click",function(a){let s=p(t).$implicit;return r(2).toggleColumn(s),u(a.stopPropagation())}),o(1,"mat-icon"),c(2),l(),o(3,"span"),c(4),l()()}if(n&2){let t=e.$implicit;m(2),k(t.isShow?"check_box":"check_box_outline_blank"),m(2),k(t.value)}}function jt(n,e){if(n&1){let t=v();o(0,"div",15)(1,"div",16)(2,"button",17)(3,"mat-icon"),c(4,"tune"),l()(),o(5,"mat-menu",null,1)(7,"div",18)(8,"mat-form-field",19)(9,"input",20),_("input",function(a){p(t);let s=r();return u(s.doFilterColumns(a))})("click",function(a){return p(t),u(a.stopPropagation())}),l(),o(10,"mat-icon",21),c(11,"search"),l()()(),o(12,"div",22),L(13,qt,5,2,"button",23,Qt),l()(),o(15,"button",24),_("click",function(){p(t);let a=r();return u(a.isSearch=!a.isSearch)}),o(16,"mat-icon"),c(17,"search"),l()()()()}if(n&2){let t=F(6),i=r();m(2),h("matMenuTriggerFor",t),m(11),P(i.FilterColumns)}}function Jt(n,e){if(n&1){let t=v();o(0,"div",26)(1,"mat-form-field",19)(2,"mat-label"),c(3,"T\xECm Ki\u1EBFm"),l(),o(4,"input",27),_("keyup",function(a){p(t);let s=r();return u(s.applyFilter(a))}),l()(),o(5,"button",28),_("click",function(){p(t);let a=r();return u(a.isSearch=!a.isSearch)}),o(6,"mat-icon"),c(7,"cancel"),l()()()}}function Gt(n,e){n&1&&(o(0,"span",48),c(1,"check"),l())}function Ut(n,e){if(n&1&&(o(0,"span"),c(1),y(2,"date"),l()),n&2){let t=r().$implicit,i=r(2).$implicit;m(),k(g(2,1,t[i],"dd/MM/yyyy"))}}function Wt(n,e){if(n&1&&(o(0,"span"),c(1),y(2,"date"),l()),n&2){let t=r().$implicit,i=r(2).$implicit;m(),k(g(2,1,t[i],"dd/MM/yyyy"))}}function Zt(n,e){if(n&1&&(o(0,"span"),c(1),l()),n&2){let t=r().$implicit,i=r(2).$implicit;m(),f("",t[i],"%")}}function te(n,e){if(n&1&&(o(0,"span"),c(1),l()),n&2){let t=r().$implicit,i=r(2).$implicit;m(),f(" ",t[i]||"Tr\u1ED1ng","")}}function ee(n,e){if(n&1){let t=v();o(0,"div",46),_("click",function(){let a=p(t).$implicit,s=r(2).$implicit,d=r();return u(d.ChosenItem(a,s))}),C(1,Gt,2,0,"span",47)(2,Ut,3,4,"span")(3,Wt,3,4,"span")(4,Zt,2,1,"span")(5,te,2,1,"span"),l()}if(n&2){let t,i=e.$implicit,a=r(2).$implicit,s=r();m(),h("ngIf",s.CheckItem(i)),m(),b((t=a)==="createdAt"?2:t==="updatedAt"?3:t==="haohut"?4:5)}}function ie(n,e){if(n&1){let t=v();o(0,"th",31)(1,"span",32),c(2),l(),o(3,"span",33,2),c(5," filter_alt "),l(),o(6,"mat-menu",null,1)(8,"div",34),_("click",function(a){return p(t),u(a.stopPropagation())}),o(9,"div",35)(10,"input",36),_("keyup",function(a){p(t);let s=r().$implicit,d=r();return u(d.doFilterHederColumn(a,s))}),l(),o(11,"div",37)(12,"span",38),c(13,"search"),l()()(),o(14,"div",39)(15,"div",16)(16,"span",40),_("click",function(){p(t);let a=r().$implicit,s=r();return u(s.ChosenAll(s.FilterHederColumn(s.dataSource.filteredData,a)))}),c(17),l(),o(18,"span",40),_("click",function(){p(t);let a=r(2);return u(a.EmptyFiter())}),c(19,"Xo\xE1"),l()(),o(20,"span",40),_("click",function(){p(t);let a=r(2);return u(a.ResetFilter())}),c(21,"Reset"),l()(),o(22,"div",41),C(23,ee,6,2,"div",42),l(),o(24,"div",43)(25,"button",44),_("click",function(){p(t);let a=F(4);return u(a.closeMenu())}),c(26,"\u0110\xF3ng"),l(),o(27,"button",45),_("click",function(){p(t);let a=F(4),s=r(2);return u(s.ApplyFilterColum(a))}),c(28,"\xC1p D\u1EE5ng"),l()()()()()}if(n&2){let t=F(7),i=r().$implicit,a=r();m(2),f(" ",a.ColumnName[i]," "),m(),h("matMenuTriggerFor",t),m(14),f("Ch\u1ECDn T\u1EA5t C\u1EA3 ",a.FilterHederColumn(a.dataSource.filteredData,i).length||0,""),m(6),h("ngForOf",a.FilterHederColumn(a.dataSource.filteredData,i))("ngForTrackBy",a.trackByFn)}}function ne(n,e){if(n&1&&(o(0,"span",50),c(1),l()),n&2){let t=r().index;m(),f(" ",t+1," ")}}function ae(n,e){if(n&1&&(o(0,"span",51),c(1),y(2,"number"),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),f(" + ",g(2,1,t[i],"1.0-2")," ")}}function oe(n,e){if(n&1&&(o(0,"span",52),c(1),y(2,"number"),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),f(" - ",g(2,1,t[i],"1.0-2")," ")}}function re(n,e){if(n&1&&(o(0,"span",50),c(1),y(2,"date"),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),f(" ",g(2,1,t[i],"dd/MM/yyyy")," ")}}function le(n,e){n&1&&(o(0,"mat-icon",53),c(1,"check_circle"),l())}function se(n,e){n&1&&(o(0,"mat-icon",54),c(1,"cancel"),l())}function me(n,e){if(n&1&&(o(0,"span",50),C(1,le,2,0,"mat-icon",53)(2,se,2,0,"mat-icon",54),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),b(t[i]?1:2)}}function ce(n,e){if(n&1&&(o(0,"span",50),c(1),y(2,"date"),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),f(" ",g(2,1,t[i],"dd/MM/yyyy")," ")}}function pe(n,e){if(n&1&&(o(0,"span",50),c(1),l()),n&2){let t=r().$implicit,i=r().$implicit;m(),f(" ",t[i]," ")}}function ue(n,e){if(n&1&&(o(0,"td",49),C(1,ne,2,1,"span",50)(2,ae,3,4,"span",51)(3,oe,3,4,"span",52)(4,re,3,4,"span",50)(5,me,3,1,"span",50)(6,ce,3,4,"span",50)(7,pe,2,1,"span",50),l()),n&2){let t,i=r().$implicit;m(),b((t=i)==="STT"?1:t==="slnhap"?2:t==="slxuat"?3:t==="ngaygiao"?4:t==="isActive"?5:t==="updatedAt"?6:7)}}function de(n,e){if(n&1&&(R(0,10),C(1,ie,29,5,"th",29)(2,ue,8,1,"td",30),N()),n&2){let t=e.$implicit;h("matColumnDef",t)}}function _e(n,e){n&1&&M(0,"tr",55)}function he(n,e){n&1&&M(0,"tr",56)}function fe(n,e){n&1&&(o(0,"tr",57)(1,"td",58),c(2,"Kh\xF4ng t\xECm th\u1EA5y"),l()())}var S=class S{Detail={};displayedColumns=["title","masp","dvt","slton","slchogiao","slchonhap","haohut","goiy"];ColumnName={title:"T\xEAn s\u1EA3n ph\u1EA9m",masp:"M\xE3 s\u1EA3n ph\u1EA9m",dvt:"\u0110\u01A1n v\u1ECB t\xEDnh",slton:"SL t\u1ED3n",slchogiao:"SL ch\u1EDD giao",slchonhap:"SL ch\u1EDD nh\u1EADp",haohut:"Hao h\u1EE5t",goiy:"G\u1EE3i \xFD"};FilterColumns=JSON.parse(localStorage.getItem("TonkhoColFilter")||"[]");Columns=[];isFilter=!1;paginator;sort;drawer;filterValues={};_PhieukhoService=w(Rt);_KhoService=w(Ot);_breakpointObserver=w(G);_router=w(J);Xuatnhapton=this._PhieukhoService.ListPhieukho;dataSource=new Bt([]);_snackBar=w(et);CountItem=0;SearchParams={Batdau:(0,x.default)().format("YYYY-MM-DD"),Ketthuc:(0,x.default)().add(1,"day").format("YYYY-MM-DD"),Type:"donsi",khoId:0};ListDate=[{id:1,Title:"1 Ng\xE0y",value:"day"},{id:2,Title:"1 Tu\u1EA7n",value:"week"},{id:3,Title:"1 Th\xE1ng",value:"month"},{id:4,Title:"1 N\u0103m",value:"year"}];Chonthoigian="day";isSearch=!1;ListKho=[];constructor(){this.displayedColumns.forEach(e=>{this.filterValues[e]=""})}onSelectionChange(e){({day:()=>{this.SearchParams.Batdau=(0,x.default)().startOf("day").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,x.default)().endOf("day").add(1,"day").format("YYYY-MM-DD")},week:()=>{this.SearchParams.Batdau=(0,x.default)().startOf("week").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,x.default)().endOf("week").format("YYYY-MM-DD")},month:()=>{this.SearchParams.Batdau=(0,x.default)().startOf("month").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,x.default)().endOf("month").format("YYYY-MM-DD")},year:()=>{this.SearchParams.Batdau=(0,x.default)().startOf("year").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,x.default)().endOf("year").format("YYYY-MM-DD")}})[e.value]?.()}onDateChange(e){this.ngOnInit()}createFilter(){return(e,t)=>{let i=JSON.parse(t),a=!0;return this.displayedColumns.forEach(s=>{if(i[s]){let d=e[s]?e[s].toString().toLowerCase():"";a=a&&d.includes(i[s].toLowerCase())}}),a}}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource?.paginator?.firstPage()}ngOnInit(){return $(this,null,function*(){this._KhoService.getTonKho("1","1000").then(e=>{this.Xuatnhapton.set(e.data),this.dataSource.data=this.Xuatnhapton(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer(),this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}),this.CountItem=this.Xuatnhapton().length})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("TonkhoColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDrawer(){this._breakpointObserver.observe([U.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(i=>i.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),localStorage.setItem("TonkhoColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(i=>i.value.toLowerCase().includes(t))}FilterHederColumn(e,t){return e.filter((a,s,d)=>s===d.findIndex(T=>T[t]===a[t]))}doFilterHederColumn(e,t){this.dataSource.filteredData=this.Xuatnhapton().filter(a=>yt(a[t]).includes(e.target.value.toLowerCase())||a[t].toLowerCase().includes(e.target.value.toLowerCase()));let i=e.target.value.toLowerCase()}trackByFn(e,t){return t.id}ListFilter=[];ChosenItem(e,t){let i=this.dataSource.filteredData.filter(s=>s[t]===e[t]);this.ListFilter.filter(s=>s[t]===e[t]).length>0?this.ListFilter=this.ListFilter.filter(s=>s[t]!==e[t]):this.ListFilter=[...this.ListFilter,...i]}ChosenAll(e){e.forEach(t=>{!!this.ListFilter.find(a=>a.id===t.id)?this.ListFilter=this.ListFilter.filter(a=>a.id!==a.id):this.ListFilter.push(t)})}ResetFilter(){this.ListFilter=this.Xuatnhapton(),this.dataSource.data=this.Xuatnhapton(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}EmptyFiter(){this.ListFilter=[]}CheckItem(e){return!!this.ListFilter.find(t=>t.id===e.id)}ApplyFilterColum(e){this.dataSource.data=this.Xuatnhapton().filter(t=>this.ListFilter.some(i=>i.id===t.id)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,e.closeMenu()}static \u0275fac=function(t){return new(t||S)};static \u0275cmp=B({type:S,selectors:[["app-xuatnhapton"]],viewQuery:function(t,i){if(t&1&&(E(X,5),E(V,5),E(At,7)),t&2){let a;D(a=I())&&(i.paginator=a.first),D(a=I())&&(i.sort=a.first),D(a=I())&&(i.drawer=a.first)}},decls:15,vars:8,consts:[["drawer",""],["menu","matMenu"],["menuTrigger","matMenuTrigger"],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],["class","cursor-pointer w-full relative flex lg:flex-row lg:space-y-2 space-y-0 flex-col space-x-2 justify-between items-center p-2 bg-white rounded-lg",4,"ngIf"],["class","py-2 w-full flex flex-row space-x-2 items-center",4,"ngIf"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","T\xECm Ki\u1EBFm","color","primary","mat-icon-button","",3,"click"],["mat-menu-item","",3,"click"],[1,"py-2","w-full","flex","flex-row","space-x-2","items-center"],["matInput","","placeholder","Vui l\xF2ng T\xECm Ki\u1EBFm",3,"keyup"],["mat-icon-button","","color","warn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],[1,"z-10","material-symbols-outlined","text-gray-500",3,"matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","text-green-700","font-bold"],[1,"max-w-40","line-clamp-4","text-red-700","font-bold"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){t&1&&(o(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),M(3,"router-outlet"),l(),o(4,"div",5),C(5,jt,18,1,"div",6)(6,Jt,8,0,"div",7),o(7,"div",8)(8,"table",9),L(9,de,3,1,"ng-container",10,O),C(11,_e,1,0,"tr",11)(12,he,1,0,"tr",12)(13,fe,3,0,"tr",13),l(),M(14,"mat-paginator",14),l()()()),t&2&&(m(),h("position","end"),m(4),h("ngIf",!i.isSearch),m(),h("ngIf",i.isSearch),m(2),h("dataSource",i.dataSource),m(),P(i.displayedColumns),m(2),h("matHeaderRowDef",i.displayedColumns),m(),h("matRowDefColumns",i.displayedColumns),m(2),h("pageSizeOptions",K(7,zt)))},dependencies:[ht,_t,ut,dt,xt,ft,$t,kt,bt,Xt,Et,Tt,Vt,Dt,It,Yt,Lt,Pt,Ft,V,Mt,St,X,ct,st,lt,mt,at,it,nt,j,rt,ot,tt,W,Z,Ct,q,H,A,Q,z,pt,vt,wt,gt],encapsulation:2})};Y([xe()],S.prototype,"FilterHederColumn",1),Y([Ce(300)],S.prototype,"doFilterHederColumn",1);var Nt=S;function xe(){return function(n,e,t){let i=t.value,a=new Map;return t.value=function(...s){let d=JSON.stringify(s);if(a.has(d))return a.get(d);let T=i.apply(this,s);return a.set(d,T),T},t}}function Ce(n=300){return function(e,t,i){let a=i.value,s;return i.value=function(...d){clearTimeout(s),s=setTimeout(()=>{a.apply(this,d)},n)},i}}export{Nt as XuatnhaptonComponent};
