import{a as it}from"./chunk-AP6Z4DEU.js";import{a as nt}from"./chunk-ULC5SDBN.js";import{a as et}from"./chunk-ZL5BEN7O.js";import{a as Ze}from"./chunk-BBETTCYW.js";import{a as tt}from"./chunk-Y3BYNOTX.js";import"./chunk-EOEI42HP.js";import{a as We,b as Je}from"./chunk-YBIOK4UQ.js";import{a as Ue}from"./chunk-ZW44ZSN2.js";import"./chunk-X27EREP7.js";import{a as Qe}from"./chunk-RWIE4WCV.js";import{a as lt}from"./chunk-EF567M4M.js";import{k as Xe}from"./chunk-S4NGQCVV.js";import"./chunk-HVTWWBOW.js";import{h as we}from"./chunk-NNJPWF5G.js";import{c as A,d as Le,e as R,f as Ve,g as Ne,h as Be,i as Ae,j as Re,k as He,l as $e,m as Pe,n as Ge,o as Ke,p as Oe,q as ze,r as je,s as qe,t as Ye}from"./chunk-YNA27T5J.js";import{b as xe,c as Ce,d as Se}from"./chunk-2MSH2TLI.js";import"./chunk-2S2XDSWG.js";import{a as ke,b as Ie}from"./chunk-OX364ZKX.js";import{b as Fe,e as ee}from"./chunk-3F7BKIWY.js";import{a as J,b as De}from"./chunk-N77JGQAQ.js";import{a as fe}from"./chunk-M3IS4DD4.js";import"./chunk-5VBHIHZR.js";import"./chunk-YYTU4XQK.js";import"./chunk-2ALS4WXU.js";import{g as X,j as Z,n as ye,p as ve,u as be,v as Ee,x as Te,y as Me}from"./chunk-SOD7IGFT.js";import"./chunk-ATQDKIKA.js";import"./chunk-VUZTNYK4.js";import"./chunk-EWCV66TG.js";import{a as U,b as W,d as he}from"./chunk-NGGX6JYK.js";import"./chunk-T3Q3DASN.js";import{ga as ge}from"./chunk-JRYPM6NW.js";import{a as pe,c as ue}from"./chunk-OVEG5ZSD.js";import"./chunk-WX77LP3N.js";import{l as de,m as Y,p as Q,q as _e}from"./chunk-BFXXMPSY.js";import{$b as a,Ac as x,Dc as se,Fc as O,Gb as w,Gc as z,Hc as j,Jc as q,Na as $,Nb as ae,Ob as oe,Oc as b,Qb as d,Qc as E,Ub as re,Wb as le,Yb as ce,Zb as F,_b as L,ac as r,bc as T,cc as V,dc as N,ed as me,fc as S,ib as ne,kc as _,la as y,mc as m,nb as s,sc as P,tc as G,ua as p,uc as K,va as u,xc as B,yc as c,zb as ie,zc as D}from"./chunk-HEYI2LIA.js";import{a as H,g as rt,j as v}from"./chunk-XXD5T5ZZ.js";var te=rt(lt());var ct=()=>[be,ve,Te,X,Z,J,U,W,ke,ge,de,Y,Q,xe,Ce,Be,Re,Ge,He,Ae,Ke,$e,Pe,Oe,ze,je,R,Ve,A],st=()=>({standalone:!0}),mt=()=>[5,10,25,100],ot=(o,t)=>t.id;function dt(o,t){if(o&1){let e=S();a(0,"button",3),_("click",function(){p(e);let i=m();return u(i.handleDathangAction())}),a(1,"mat-icon"),c(2,"save"),r()()}}function _t(o,t){if(o&1){let e=S();a(0,"button",3),_("click",function(){p(e);let i=m();return u(i.toggleEdit())}),a(1,"mat-icon"),c(2,"edit"),r()()}}function pt(o,t){if(o&1){let e=S();V(0),a(1,"div",11)(2,"div",12),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),r(),a(4,"div",13)(5,"button",14),_("click",function(){p(e);let i=m();return u(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),r(),a(7,"button",15),_("click",function(){p(e);let i=m();return u(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),r()()(),N()}}function ut(o,t){if(o&1&&T(0,"div",23),o&2){let e=m(2);d("innerHTML",e.DetailDathang().nhacungcap.ghichu,ne)}}function gt(o,t){o&1&&T(0,"div",24)}function ht(o,t){if(o&1&&(a(0,"mat-option",34),c(1),r()),o&2){let e=t.$implicit;d("value",e.id),s(),D(e.name)}}function ft(o,t){o&1&&(a(0,"span",58),c(1,"check"),r())}function Dt(o,t){if(o&1){let e=S();a(0,"div",56),_("click",function(){let i=p(e).$implicit,l=m(4);return u(l.ChosenItem(i))}),w(1,ft,2,0,"span",57),c(2),r()}if(o&2){let e=t.$implicit,n=m(4);s(),d("ngIf",n.CheckItem(e)),s(),x(" ",e.title," ")}}function xt(o,t){if(o&1&&(a(0,"th",61)(1,"span",62),c(2),r()()),o&2){let e=m().$implicit,n=m(4);s(2),x(" ",n.ColumnName[e]," ")}}function Ct(o,t){if(o&1){let e=S();a(0,"span",64)(1,"span"),c(2),r(),a(3,"button",8),_("click",function(){p(e);let i=m().$implicit,l=m(5);return u(l.RemoveSanpham(i))}),a(4,"mat-icon"),c(5,"delete"),r()()()}if(o&2){let e=m().index;s(2),x("",e+1," ")}}function St(o,t){if(o&1){let e=S();a(0,"div",69),_("keydown.enter",function(i){p(e);let l=m(),h=l.$implicit,f=l.index,g=m(5);return u(g.EnterUpdateValue(i,f,h,"sldat","number"))}),c(1),b(2,"number"),r(),a(3,"div"),c(4),r()}if(o&2){let e=m().$implicit,n=m().$implicit,i=m(4);d("contentEditable",!0),s(),x(" ",E(2,6,e[n]||0,"1.0-2")," "),s(3),se("(SL:",e.soluong,")-(SLkho:",e.soluongkho,")-(Hao h\u1EE5t:",e.haohut,"%)(G\u1EE3i \xFD: ",i.GetGoiy(e),")")}}function yt(o,t){if(o&1){let e=S();a(0,"div",70),_("keydown.enter",function(i){p(e);let l=m(),h=l.$implicit,f=l.index,g=m(5);return u(g.EnterUpdateValue(i,f,h,"slgiao","number"))}),c(1),b(2,"number"),r()}if(o&2){let e=m().$implicit,n=m().$implicit;d("contentEditable",!0),s(),x(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function wt(o,t){if(o&1){let e=S();a(0,"div",71),_("keydown.enter",function(i){p(e);let l=m(),h=l.$implicit,f=l.index,g=m(5);return u(g.EnterUpdateValue(i,f,h,"slnhan","number"))}),c(1),b(2,"number"),r()}if(o&2){let e=m().$implicit,n=m().$implicit;d("contentEditable",!0),s(),x(" ",E(2,2,e[n]||0,"1.0-2")," ")}}function vt(o,t){if(o&1){let e=S();a(0,"div",72),_("keydown.enter",function(i){p(e);let l=m(),h=l.$implicit,f=l.index,g=m(5);return u(g.EnterUpdateValue(i,f,h,"ghichu","string"))}),c(1),r()}if(o&2){let e=m().$implicit,n=m().$implicit;d("contentEditable",!0),s(),x(" ",e[n]||""," ")}}function bt(o,t){if(o&1&&(a(0,"span",68),c(1),r()),o&2){let e=m().$implicit,n=m().$implicit;s(),x(" ",e[n]," ")}}function Et(o,t){if(o&1&&(a(0,"td",63),w(1,Ct,6,1,"span",64)(2,St,5,9)(3,yt,3,5,"div",65)(4,wt,3,5,"div",66)(5,vt,2,2,"div",67)(6,bt,2,1,"span",68),r()),o&2){let e,n=m().$implicit;s(),le((e=n)==="STT"?1:e==="sldat"?2:e==="slgiao"?3:e==="slnhan"?4:e==="ghichu"?5:6)}}function Tt(o,t){if(o&1&&(V(0,51),w(1,xt,3,1,"th",59)(2,Et,7,1,"td",60),N()),o&2){let e=t.$implicit;d("matColumnDef",e)}}function Mt(o,t){o&1&&T(0,"tr",73)}function kt(o,t){o&1&&T(0,"tr",74)}function It(o,t){o&1&&(a(0,"tr",75)(1,"td",76),c(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}function Ft(o,t){if(o&1){let e=S();a(0,"div",26)(1,"div",27)(2,"mat-form-field",28)(3,"mat-label"),c(4,"Nh\xE0 Cung C\u1EA5p"),r(),a(5,"mat-select",29),j("ngModelChange",function(i){p(e);let l=m(3);return z(l.DetailDathang().nhacungcapId,i)||(l.DetailDathang().nhacungcapId=i),u(i)}),_("selectionChange",function(i){p(e);let l=m(3);return u(l.SelectNhacungcap(i))}),a(6,"div",30)(7,"mat-form-field",31)(8,"input",32),_("input",function(i){p(e);let l=m(3);return u(l.DoFindNhacungcap(i))}),r()(),a(9,"div",33),F(10,ht,2,2,"mat-option",34,ot),r()()()(),a(12,"mat-form-field",28)(13,"mat-label"),c(14,"T\xECm Ki\u1EBFm"),r(),a(15,"input",35),_("keyup",function(i){p(e);let l=m(3);return u(l.applyFilter(i))}),r()(),a(16,"button",36,0),c(18),r(),a(19,"mat-menu",null,1)(21,"div",37),_("click",function(i){return p(e),u(i.stopPropagation())}),a(22,"div",38)(23,"input",39),_("keyup",function(i){p(e);let l=m(3);return u(l.doFilterSanpham(i))}),r(),a(24,"div",40)(25,"span",41),c(26,"search"),r()()(),a(27,"div",42)(28,"div",5)(29,"span",43),_("click",function(){p(e);let i=m(3);return u(i.ChosenAll(i.filterSanpham))}),c(30),r(),a(31,"span",43),_("click",function(){p(e);let i=m(3);return u(i.EmptyFiter())}),c(32,"Xo\xE1"),r()(),a(33,"span",43),_("click",function(){p(e);let i=m(3);return u(i.ResetFilter())}),c(34,"Reset"),r()(),a(35,"div",44),w(36,Dt,3,2,"div",45),r(),a(37,"div",46)(38,"button",15),_("click",function(){p(e);let i=B(17);return u(i.closeMenu())}),c(39,"\u0110\xF3ng"),r(),a(40,"button",14),_("click",function(){p(e);let i=B(17),l=m(3);return u(l.ApplyFilterColum(i))}),c(41,"\xC1p D\u1EE5ng"),r()()()(),a(42,"button",47),_("click",function(){p(e);let i=m(3);return u(i.LoadDrive())}),a(43,"mat-icon"),c(44,"cloud_download"),r()(),a(45,"button",48),_("click",function(){p(e);let i=m(3);return u(i.EmptyCart())}),a(46,"mat-icon"),c(47,"delete"),r()()()(),a(48,"div",49)(49,"table",50),F(50,Tt,3,1,"ng-container",51,ce),w(52,Mt,1,0,"tr",52)(53,kt,1,0,"tr",53)(54,It,3,0,"tr",54),r(),T(55,"mat-paginator",55),r()}if(o&2){let e=B(20),n=m(3);s(5),O("ngModel",n.DetailDathang().nhacungcapId),d("ngModelOptions",q(15,st)),s(5),L(n.filterNhacungcap),s(6),d("disabled",!n.isEdit())("matMenuTriggerFor",e),s(2),x(" ",n.ListFilter.length," S\u1EA3n Ph\u1EA9m "),s(12),x("Ch\u1ECDn T\u1EA5t C\u1EA3 ",n.ListFilter.length,""),s(6),d("ngForOf",n.filterSanpham)("ngForTrackBy",n.trackByFn),s(6),d("disabled",!n.isEdit()),s(3),d("disabled",!n.isEdit()),s(4),d("dataSource",n.dataSource),s(),L(n.displayedColumns),s(2),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(2),d("pageSizeOptions",q(16,mt))("pageSize",n.dataSource.data.length)}}function Lt(o,t){o&1&&(a(0,"div",25),w(1,Ft,56,17),ae(2,1,ct),oe(),r())}function Vt(o,t){if(o&1&&(a(0,"tr",78)(1,"td",84),c(2),r(),a(3,"td",79),c(4),r(),a(5,"td",84),c(6),r(),a(7,"td",85),c(8),b(9,"number"),r(),a(10,"td",85),c(11),b(12,"number"),r(),a(13,"td",79),c(14),r()()),o&2){let e=t.$implicit,n=t.$index;s(2),D(n+1),s(2),D(e.title),s(2),D(e.dvt),s(2),D(E(9,6,e.sldat,"1.0-2")),s(3),D(E(12,9,e.slnhan||0,"1.0-2")),s(3),D(e.ghichu)}}function Nt(o,t){if(o&1&&(a(0,"table",77)(1,"thead")(2,"tr",78)(3,"th",79),c(4,"STT"),r(),a(5,"th",79),c(6,"T\xEAn s\u1EA3n ph\u1EA9m"),r(),a(7,"th",79),c(8,"\u0110VT"),r(),a(9,"th",80),c(10,"SL \u0110\u1EB7t"),r(),a(11,"th",80),c(12,"SL Nh\u1EADn"),r(),a(13,"th",79),c(14,"Ghi ch\xFA"),r()()(),a(15,"tbody"),F(16,Vt,15,12,"tr",78,ot),a(18,"tr",78)(19,"td",81),c(20,"T\u1ED5ng:"),r(),a(21,"td",82),c(22),b(23,"number"),r(),a(24,"td",82),c(25),b(26,"number"),r(),T(27,"td",83),r()()()),o&2){let e=m(2);s(16),L(e.DetailDathang().sanpham),s(6),D(E(23,2,e.TinhTong(e.DetailDathang().sanpham,"sldat"),"1.0-2")),s(3),D(E(26,5,e.TinhTong(e.DetailDathang().sanpham,"slnhan"),"1.0-2"))}}function Bt(o,t){if(o&1&&(V(0),a(1,"div",16)(2,"div",17)(3,"div",18),c(4,"\u0110\u1EB7t H\xE0ng Nh\xE0 Cung C\u1EA5p"),r(),a(5,"div"),c(6),r(),w(7,ut,1,1,"div",19)(8,gt,1,0,"div",20)(9,Lt,4,0,"div",21)(10,Nt,28,8,"table",22),r()(),N()),o&2){let e,n,i,l=m();s(5),re("font-bold text-[18px] uppercase ",(e=l.DetailDathang())!=null&&e.nhacungcapId?"":"text-red-700 italic",""),s(),D(((n=l.getName((n=l.DetailDathang())==null?null:n.nhacungcapId))==null?null:n.name)||"Ch\u01B0a Ch\u1ECDn Kh\xE1ch H\xE0ng"),s(),d("ngIf",l.isEdit()&&((i=l.DetailDathang())==null||i.nhacungcap==null?null:i.nhacungcap.ghichu)),s(),d("ngIf",l.isEdit()),s(),d("ngIf",l.isEdit()),s(),d("ngIf",!l.isEdit())}}var at=class o{_ListdathangComponent=y(it);_DathangService=y(nt);_NhacungcapService=y(et);_BanggiaService=y(tt);_SanphamService=y(Ze);_route=y(pe);_router=y(ue);_snackBar=y(fe);constructor(){this._route.paramMap.subscribe(t=>v(this,null,function*(){let e=t.get("id");this._DathangService.setDathangId(e),yield this._NhacungcapService.getAllNhacungcap(),this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive),yield this._BanggiaService.getAllBanggia(),this.filterBanggia=this._BanggiaService.ListBanggia(),yield this._SanphamService.getAllSanpham(),this.filterSanpham=this._SanphamService.ListSanpham(),this.dataSource.data=this.DetailDathang().sanpham})),me(()=>v(this,null,function*(){let t=this._DathangService.dathangId();t||(this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()),t==="0"?(this.DetailDathang.set({title:ee(8,!1),madncc:ee(8,!1),type:"dathang",ngaynhan:(0,te.default)().add(1,"days").format("YYYY-MM-DD")}),this._ListdathangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/dathang","0"])):(yield this._DathangService.getDathangByid(t),this.ListFilter=this.DetailDathang().sanpham,this._ListdathangComponent.drawer.open(),this._router.navigate(["/admin/dathang",t]))}))}DetailDathang=this._DathangService.DetailDathang;ListNhacungcap=this._NhacungcapService.ListNhacungcap;isEdit=$(!1);isDelete=$(!1);filterNhacungcap=[];filterBanggia=[];filterSanpham=[];dathangId=this._DathangService.dathangId;ngOnInit(){return v(this,null,function*(){})}handleDathangAction(){return v(this,null,function*(){this.dathangId()==="0"?yield this.createDathang():yield this.updateDathang()})}createDathang(){return v(this,null,function*(){try{this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t.ngaynhan=(0,te.default)(t.ngaygiao).format("YYYY-MM-DD"),t)),yield this._DathangService.CreateDathang(this.DetailDathang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o dathang:",t)}})}updateDathang(){return v(this,null,function*(){try{console.log(this.DetailDathang()),this.DetailDathang.update(t=>(t.sanpham=this.dataSource.data,t)),yield this._DathangService.updateDathang(this.DetailDathang()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt dathang:",t)}})}DeleteData(){return v(this,null,function*(){try{yield this._DathangService.DeleteDathang(this.DetailDathang()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/dathang"])}catch(t){console.error("L\u1ED7i khi x\xF3a dathang:",t)}})}goBack(){this._router.navigate(["/admin/dathang"]),this._ListdathangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){}DoFindNhacungcap(t){let e=t.target.value.toLowerCase();this.filterNhacungcap=this.ListNhacungcap().filter(n=>n.isActive&&n.name.toLowerCase().includes(e)||n.namenn.toLowerCase().includes(e)||n.sdt.toLowerCase().includes(e))}DoFindBanggia(t){let e=t.target.value.toLowerCase()}UpdateBangia(){}SelectBanggia(t){console.log(t.value)}Chonnhacungcap(t){this.DetailDathang.update(e=>(e.nhacungcapId=t.id,e))}EnterUpdateValue(t,e,n,i,l){let h=l==="number"?Number(t.target.innerText.trim())||0:t.target.innerText.trim(),f=t;if(f.key==="Enter"&&!f.shiftKey&&t.preventDefault(),l==="number"){let g=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(f.key)&&!g.includes(f.key)&&t.preventDefault()}console.log(this.DetailDathang()),this.DetailDathang.update(g=>{if(e!==null)if(console.log(e),console.log(g.sanpham[e]),i==="sldat"){g.sanpham[e].sldat=g.sanpham[e].slgiao=g.sanpham[e].slnhan=h;let M=document.querySelectorAll(".sldat-input");if(e<this.dataSource.filteredData.length-1){let C=M[e+1];C&&(C instanceof HTMLInputElement&&(C.focus(),C.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let k=document.createRange();k.selectNodeContents(C);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(k)}},10))}}else if(i==="ghichu"){g.sanpham[e][i]=h;let M=document.querySelectorAll(".ghichu-input");if(e<this.dataSource.filteredData.length-1){let C=M[e+1];C&&(C instanceof HTMLInputElement&&(C.focus(),C.select()),setTimeout(()=>{if(document.createRange&&window.getSelection){let k=document.createRange();k.selectNodeContents(C);let I=window.getSelection();I?.removeAllRanges(),I?.addRange(k)}},10))}}else if(i==="slgiao"){let M=h;M<g.sanpham[e].sldat?(g.sanpham[e].slgiao=g.sanpham[e].sldat,this._snackBar.open("S\u1ED1 l\u01B0\u1EE3ng giao ph\u1EA3i l\u1EDBn h\u01A1n s\u1ED1 l\u01B0\u1EE3ng \u0111\u1EB7t","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})):g.sanpham[e].slgiao=g.sanpham[e].slnhan=M}else g.sanpham[e][i]=h;else g[i]=h;return g})}Tongcong=0;Tong=0;Tinhtongcong(t){this.Tongcong=t.Tongcong,this.Tong=t.Tong}TinhTong(t,e){return t?.reduce((n,i)=>n+(i[e]||0),0)||0}SelectNhacungcap(t){let e=this.ListNhacungcap().find(n=>n.id===t.value);console.log(e),e&&this.DetailDathang.update(n=>{let i={name:e.name,diachi:e.diachi,sdt:e.sdt,ghichu:e.ghichu};return n.nhacungcapId=e.id,n.nhacungcap=i,n}),console.log(this.DetailDathang())}displayedColumns=["STT","title","masp","dvt","sldat","slnhan","ghichu"];ColumnName={STT:"STT",title:"Ti\xEAu \u0110\u1EC1",masp:"M\xE3 SP",dvt:"\u0110\u01A1n V\u1ECB T\xEDnh",sldat:"SL \u0110\u1EB7t",slnhan:"SL Nh\u1EADn",ghichu:"Ghi Ch\xFA"};dataSource=new Ye([]);CountItem=this.dataSource.data.length;paginator;sort;_GoogleSheetService=y(Qe);LoadDrive(){return v(this,null,function*(){let t={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"DatHImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},e=yield this._GoogleSheetService.getDrive(t),n=Fe(e.values);console.log(n),this.DetailDathang.update(i=>(i.sanpham=n.map(l=>{l.sldat=Number(l.sldat)||0,l.slgiao=Number(l.slgiao)||0,l.slnhan=Number(l.slnhan)||0,l.ttdat=Number(l.ttdat)||0,l.ttgiao=Number(l.ttgiao)||0,l.ttnhan=Number(l.ttnhan)||0;let h=this._SanphamService.ListSanpham().find(f=>f.masp===l.masp);return console.log(h),h?H(H({},h),l):l}),i)),console.log(this.DetailDathang()),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase()}EmptyCart(){this.DetailDathang.update(t=>(t.sanpham=[],t)),this.dataSource.data=this.DetailDathang().sanpham,this.reloadfilter()}getName(t){return this.ListNhacungcap().find(e=>e.id===t)}reloadfilter(){this.filterSanpham=this._SanphamService.ListSanpham().filter(t=>!this.DetailDathang().sanpham.some(e=>e.id===t.id))}DoFindSanpham(t){let e=t.target.value;console.log(e),this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>n.title.toLowerCase().includes(e.toLowerCase()))}SelectSanpham(t){let e=t.value,n=this._SanphamService.ListSanpham().find(i=>i.id===e);this.DetailDathang.update(i=>(i.sanpham?(n.sldat=n.slgiao=1,i.sanpham.push(n)):(i.sanpham=[],n.sldat=n.slgiao=1,i.sanpham.push(n)),this.reloadfilter(),i)),this.dataSource.data=this.DetailDathang().sanpham}RemoveSanpham(t){this.DetailDathang.update(e=>(e.sanpham=e.sanpham.filter(n=>n.id!==t.id),this.reloadfilter(),e)),this.dataSource.data=this.DetailDathang().sanpham}GetGoiy(t){let e=parseFloat(((t.soluongkho-t.soluong)*(1+t.haohut/100)).toString()).toFixed(2);return Number(e)<0?0:e}doFilterSanpham(t){this.filterSanpham=this._SanphamService.ListSanpham().filter(n=>Ue(n.title).includes(t.target.value.toLowerCase())||n.title.toLowerCase().includes(t.target.value.toLowerCase()));let e=t.target.value.toLowerCase()}ListFilter=[];ChosenItem(t){console.log(t);let e=this.filterSanpham.filter(i=>i.id===t.id);this.ListFilter.filter(i=>i.id===t.id).length>0?this.ListFilter=this.ListFilter.filter(i=>i.id!==t.id):this.ListFilter=[...this.ListFilter,...e]}ChosenAll(t){this.ListFilter=t}ResetFilter(){this.ListFilter=this.filterSanpham,this.dataSource.data=this.filterSanpham}EmptyFiter(){this.ListFilter=[]}CheckItem(t){return!!this.ListFilter.find(e=>e.id===t.id)}ApplyFilterColum(t){console.log(this.ListFilter),this.ListFilter.forEach(e=>{e.sldat=e.slgiao=e.slnhan=1}),this.dataSource.data=this.ListFilter,this.DetailDathang.update(e=>(e.sanpham=this.ListFilter,e)),this.dataSource.data.sort((e,n)=>e.order-n.order),t.closeMenu()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ie({type:o,selectors:[["app-detaildathang"]],viewQuery:function(e,n){if(e&1&&(P(A,5),P(R,5)),e&2){let i;G(i=K())&&(n.paginator=i.first),G(i=K())&&(n.sort=i.first)}},decls:17,vars:9,consts:[["menuTrigger","matMenuTrigger"],["menu","matMenu"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"p-2","min-w-28","font-bold","focus:border","focus:rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"blur","contentEditable"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["id","printContent",1,"min-w-[800px]","flex","flex-col","space-y-6","items-center","p-2","border","rounded-lg"],[1,"w-full","flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-[18px]","uppercase"],["class","p-2 rounded-lg border text-red-600",3,"innerHTML",4,"ngIf"],["class","grid lg:grid-cols-3 grid-cols-1 gap-4",4,"ngIf"],["class","w-full flex flex-col overflow-y-auto",4,"ngIf"],["class","w-full border-collapse border mt-4",4,"ngIf"],[1,"p-2","rounded-lg","border","text-red-600",3,"innerHTML"],[1,"grid","lg:grid-cols-3","grid-cols-1","gap-4"],[1,"w-full","flex","flex-col","overflow-y-auto"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"keyup"],["mat-flat-button","","color","primary",3,"disabled","matMenuTriggerFor"],[1,"cursor-pointer","flex","flex-col","space-y-4","p-3",3,"click"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"flex","flex-row","space-x-2","items-center","justify-between"],[1,"text-xs","text-blue-600","underline",3,"click"],[1,"w-full","flex","flex-col","space-y-2","max-h-44","overflow-auto"],["class","flex flex-row space-x-2 items-center p-2 rounded-lg hover:bg-slate-100",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-row","space-x-2","items-end","justify-end"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click","disabled"],["matTooltip","L\xE0m Tr\u1ED1ng Gi\u1ECF H\xE0ng","color","warn","mat-icon-button","",3,"click","disabled"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions","pageSize"],[1,"flex","flex-row","space-x-2","items-center","p-2","rounded-lg","hover:bg-slate-100",3,"click"],["class","material-symbols-outlined text-blue-600",4,"ngIf"],[1,"material-symbols-outlined","text-blue-600"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-20","line-clamp-4","flex","flex-row","items-center"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"contentEditable"],[1,"max-w-40","line-clamp-4"],[1,"sldat-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slgiao-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"slnhan-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],[1,"ghichu-input","p-2","min-w-28","bg-slate-200","focus:border","rounded-lg","focus:border-blue-600","focus:bg-slate-100","focus:outline-none",3,"keydown.enter","contentEditable"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-full","border-collapse","border","mt-4"],[1,"border"],[1,"border","p-2"],[1,"border","p-2","max-w-10"],["colspan","3",1,"border","p-2","text-start"],[1,"border","p-2","text-end","font-bold"],[1,"border","p-2","text-end"],[1,"border","p-2","text-center"],[1,"border","p-2","text-end","max-w-10"]],template:function(e,n){e&1&&(a(0,"div",2)(1,"button",3),_("click",function(){return n.goBack()}),a(2,"mat-icon"),c(3,"arrow_back"),r()(),a(4,"div",4),_("blur",function(l){return n.EnterUpdateValue(l,null,n.DetailDathang(),"madncc","string")}),c(5),r(),a(6,"div",5)(7,"mat-slide-toggle",6),j("ngModelChange",function(l){return z(n.DetailDathang().isActive,l)||(n.DetailDathang().isActive=l),l}),c(8),r(),w(9,dt,3,0,"button",7)(10,_t,3,0,"button",7),a(11,"button",8),_("click",function(){return n.toggleDelete()}),a(12,"mat-icon"),c(13,"delete"),r()()()(),a(14,"div",9),w(15,pt,9,0,"ng-container",10)(16,Bt,11,8,"ng-container",10),r()),e&2&&(s(4),d("contentEditable",!0),s(),x("",n.DetailDathang().madncc||""," "),s(2),O("ngModel",n.DetailDathang().isActive),d("disabled",!n.isEdit()),s(),D(n.DetailDathang().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),s(),d("ngIf",n.isEdit()),s(),d("ngIf",!n.isEdit()),s(5),d("ngIf",n.isDelete()),s(),d("ngIf",!n.isDelete()))},dependencies:[Ee,Me,ye,X,Z,De,J,he,U,W,Ie,we,_e,Y,Q,Je,We,Se,Xe,qe,Ne,Le],encapsulation:2})};export{at as DetailDathangComponent};
