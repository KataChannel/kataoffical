import{a as G,b as K}from"./chunk-K6YNHVTP.js";import"./chunk-3QTQLMWW.js";import"./chunk-NULFSBS2.js";import"./chunk-YLX3H6TM.js";import{b as J}from"./chunk-XKKQQ7FZ.js";import"./chunk-EHGCZ4C4.js";import"./chunk-JLMC2BDS.js";import"./chunk-DA5ME3V7.js";import"./chunk-LPL33NWN.js";import{h as Y}from"./chunk-W2RORM22.js";import"./chunk-MC2RAUNI.js";import"./chunk-ZW44ZSN2.js";import"./chunk-I6B5OHGT.js";import{b as H}from"./chunk-MNBBNJWP.js";import{d as V}from"./chunk-3F7BKIWY.js";import"./chunk-4ZVJO4SQ.js";import"./chunk-2666NGRR.js";import"./chunk-JNVUT6FC.js";import"./chunk-4MLQW4M4.js";import{a as T,b as R}from"./chunk-XVT2LBKL.js";import{n as z,v as j,y as O}from"./chunk-TYZ34WI3.js";import"./chunk-3ZB7GGLY.js";import"./chunk-VUZTNYK4.js";import{a as F}from"./chunk-CJ7XC2KQ.js";import"./chunk-WMULDMNY.js";import{c as N,e as P}from"./chunk-ES5CQDKA.js";import"./chunk-WSCOEG5L.js";import"./chunk-2PPFUFFT.js";import"./chunk-AYYZC3MM.js";import{a as B,c as L}from"./chunk-PBGP5HQW.js";import"./chunk-HAUHSLE7.js";import{r as I,s as b,u as k}from"./chunk-IBBIXZPE.js";import{Dc as i,Eb as E,Ec as p,Fc as r,Ra as m,Sc as g,Tc as w,Uc as C,dc as o,ec as e,fc as x,id as y,oa as u,oc as M,rb as a}from"./chunk-6QR2UCJZ.js";import"./chunk-EU2KAMEK.js";import{j as d}from"./chunk-6DYNGEAS.js";var X=class c{_ListAuditlogComponent=u(K);_AuditlogService=u(G);_route=u(B);_router=u(L);_snackBar=u(F);constructor(){this._route.paramMap.subscribe(t=>{let l=t.get("id");this._AuditlogService.setAuditlogId(l)}),y(()=>d(this,null,function*(){let t=this._AuditlogService.auditlogId();t||(this._router.navigate(["/admin/auditlog"]),this._ListAuditlogComponent.drawer.close()),t==="new"?(this.DetailAuditlog.set({}),this._ListAuditlogComponent.drawer.open(),this.isEdit.update(l=>!l),this._router.navigate(["/admin/auditlog","new"])):(yield this._AuditlogService.getAuditlogBy({id:t,isOne:!0}),this._ListAuditlogComponent.drawer.open(),this._router.navigate(["/admin/auditlog",t]))}))}DetailAuditlog=this._AuditlogService.DetailAuditlog;isEdit=m(!1);isDelete=m(!1);auditlogId=this._AuditlogService.auditlogId;ngOnInit(){return d(this,null,function*(){yield this._AuditlogService.getAuditlogBy({id:this.auditlogId(),isOne:!0}),console.log("DetailAuditlogComponent initialized",this.DetailAuditlog())})}handleAuditlogAction(){return d(this,null,function*(){this.auditlogId()==="new"?yield this.createAuditlog():yield this.updateAuditlog()})}createAuditlog(){return d(this,null,function*(){try{yield this._AuditlogService.CreateAuditlog(this.DetailAuditlog()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o auditlog:",t)}})}updateAuditlog(){return d(this,null,function*(){try{yield this._AuditlogService.updateAuditlog(this.DetailAuditlog()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt auditlog:",t)}})}DeleteData(){return d(this,null,function*(){try{yield this._AuditlogService.DeleteAuditlog(this.DetailAuditlog()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/auditlog"])}catch(t){console.error("L\u1ED7i khi x\xF3a auditlog:",t)}})}goBack(){this._router.navigate(["/admin/auditlog"]),this._ListAuditlogComponent.drawer.close()}trackByFn(t,l){return l.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailAuditlog.update(t=>(t.slug=V(t.title),t))}static \u0275fac=function(l){return new(l||c)};static \u0275cmp=E({type:c,selectors:[["app-detailauditlog"]],decls:43,vars:13,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex-grow"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"bg-white","border","rounded","p-4"],[1,"text-xl","font-semibold","mb-2"],[1,"grid","md:grid-cols-2","gap-4"],[1,"bg-white","border","rounded","p-4","mt-4"],[1,"whitespace-pre-wrap"]],template:function(l,n){if(l&1&&(o(0,"div",0)(1,"button",1),M("click",function(){return n.goBack()}),o(2,"mat-icon"),i(3,"arrow_back"),e()(),o(4,"div",2),i(5),e(),x(6,"div",3),e(),o(7,"div",4)(8,"div",5)(9,"h2",6),i(10,"Audit Log Detail"),e(),o(11,"div",7)(12,"div")(13,"strong"),i(14,"ID:"),e(),i(15),e(),o(16,"div")(17,"strong"),i(18,"Entity Name:"),e(),i(19),e(),o(20,"div")(21,"strong"),i(22,"Action:"),e(),i(23),e(),o(24,"div")(25,"strong"),i(26,"Entity ID:"),e(),i(27),e(),o(28,"div")(29,"strong"),i(30,"IP Address:"),e(),i(31),e(),o(32,"div")(33,"strong"),i(34,"Created At:"),e(),i(35),g(36,"date"),e()()(),o(37,"div",8)(38,"h2",6),i(39,"New Values"),e(),o(40,"pre",9),i(41),g(42,"json"),e()()()),l&2){let s,A,h,v,_,f,D,S;a(5),p(((s=n.DetailAuditlog())==null?null:s.codeId)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),a(10),r(" ",((A=n.DetailAuditlog())==null?null:A.id)||"N/A"," "),a(4),r(" ",((h=n.DetailAuditlog())==null?null:h.entityName)||"N/A"," "),a(4),r(" ",((v=n.DetailAuditlog())==null?null:v.action)||"N/A"," "),a(4),r(" ",((_=n.DetailAuditlog())==null?null:_.entityId)||"N/A"," "),a(4),r(" ",((f=n.DetailAuditlog())==null?null:f.ipAddress)||"N/A"," "),a(4),r(" ",C(36,8,(D=n.DetailAuditlog())==null?null:D.createdAt," HH:mm:ss - dd/MM/YYYY")," "),a(6),p(w(42,11,(S=n.DetailAuditlog())==null?null:S.newValues))}},dependencies:[j,O,z,R,T,P,N,H,Y,k,b,I,J],encapsulation:2})};export{X as DetailAuditlogComponent};
