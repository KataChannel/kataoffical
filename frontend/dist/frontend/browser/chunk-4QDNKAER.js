import{a as ye}from"./chunk-E3HEFRKQ.js";import{a as Se}from"./chunk-EJ32OBMT.js";import{a as Pe}from"./chunk-BODLDY6V.js";import{a as De}from"./chunk-MDNUNJ27.js";import{a as xe}from"./chunk-XG7YC2FV.js";import{a as Ce}from"./chunk-WMYZJPKK.js";import"./chunk-EOEI42HP.js";import{a as pe,b as de}from"./chunk-VHJAUEMN.js";import"./chunk-SXROZ6BE.js";import"./chunk-EF567M4M.js";import"./chunk-OZJ44QR4.js";import{a as _e,b as ge,c as fe,k as ke}from"./chunk-LWOAEHTS.js";import"./chunk-HVTWWBOW.js";import{h as ne}from"./chunk-XSNORXX5.js";import"./chunk-EOTXQRZR.js";import"./chunk-F7EDFTQQ.js";import"./chunk-UNI4TQYF.js";import{a as ce,b as se}from"./chunk-WLWKXC6W.js";import{d as me,e as V}from"./chunk-3F7BKIWY.js";import{a as U,b as Y}from"./chunk-IOVGJBEQ.js";import{a as Q}from"./chunk-A2XWSHFO.js";import"./chunk-DXTPH2AT.js";import"./chunk-5QWI5KXY.js";import"./chunk-YIZAKY6R.js";import"./chunk-EORM6PNZ.js";import{a as H,b as q,d as J}from"./chunk-6BLNE64S.js";import{a as j,c as G}from"./chunk-HB5YUF53.js";import"./chunk-E7ATTI4D.js";import{b as Z,g as $,j as ee,l as te,n as ie,p as oe,r as ae,u as re,v as le,x as he,y as ue}from"./chunk-DITT2JTN.js";import"./chunk-TKCSHFKW.js";import"./chunk-VUZTNYK4.js";import"./chunk-T3Q3DASN.js";import{fa as X}from"./chunk-GYKAV2RU.js";import{l as K,m as z,q as R}from"./chunk-3NKRXC2S.js";import{$b as o,Ac as S,Bc as A,Dc as W,Ec as f,Fc as k,Gb as y,Gc as C,Ic as D,Mc as O,Na as w,Qb as h,Zb as v,_b as M,ac as a,bc as L,cc as b,dc as F,dd as N,fc as P,kc as _,la as g,mc as s,nb as u,ua as m,va as p,xc as B,yc as c,zb as I,zc as T}from"./chunk-276IJWTT.js";import{j as x}from"./chunk-XXD5T5ZZ.js";var ve=()=>({title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"}),Me=()=>({title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"}),be=()=>({title:"Chuy\u1EC3n Kho",value:"chuyenkho"}),Fe=()=>({title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}),Te=(l,n,e,i)=>[l,n,e,i],E=()=>({standalone:!0}),we=(l,n)=>n.id;function Ve(l,n){if(l&1){let e=P();o(0,"button",2),_("click",function(){m(e);let t=s();return p(t.handlePhieukhoAction())}),o(1,"mat-icon"),c(2,"save"),a()()}}function Ie(l,n){if(l&1){let e=P();o(0,"button",2),_("click",function(){m(e);let t=s();return p(t.toggleEdit())}),o(1,"mat-icon"),c(2,"edit"),a()()}}function Le(l,n){if(l&1){let e=P();b(0),o(1,"div",10)(2,"div",11),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),o(4,"div",12)(5,"button",13),_("click",function(){m(e);let t=s();return p(t.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),a(),o(7,"button",14),_("click",function(){m(e);let t=s();return p(t.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),a()()(),F()}}function Be(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.value),u(),S(" ",e.title," ")}}function Ae(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),A(" (",e.makho,")",e.name," ")}}function We(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),S(" ",e.madonhang," ")}}function Oe(l,n){if(l&1){let e=P();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n B\xE1n"),a(),o(3,"mat-select",28),_("selectionChange",function(t){m(e);let r=s(2);return p(r.ChosenDonhang(t,"xuat"))}),y(4,We,2,2,"mat-option",20),a()()}if(l&2){let e=s(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DonhangService.ListDonhang())}}function Ne(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),S(" ",e.madncc," ")}}function Ke(l,n){if(l&1){let e=P();o(0,"mat-form-field",17)(1,"mat-label"),c(2,"\u0110\u01A1n Mua"),a(),o(3,"mat-select",28),_("selectionChange",function(t){m(e);let r=s(2);return p(r.ChosenDonhang(t,"nhap"))}),y(4,Ne,2,2,"mat-option",20),a()()}if(l&2){let e=s(2);u(3),h("disabled",!e.isEdit()),u(),h("ngForOf",e._DathangService.ListDathang())}}function ze(l,n){if(l&1&&(o(0,"mat-option",27),c(1),a()),l&2){let e=n.$implicit;h("value",e.id),u(),W("",e.title," [SL : ",e.soluong,"",e.dvt,"][SL T\u1ED3n : ",e.soluongkho,"",e.dvt,"]")}}function Re(l,n){if(l&1){let e=P();o(0,"div",25)(1,"mat-form-field",17)(2,"mat-label"),c(3,"S\u1EA3n Ph\u1EA9m"),a(),o(4,"mat-select",29),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].sanphamId,t)||(d.DetailPhieukho().sanpham[r].sanphamId=t),p(t)}),o(5,"div",30)(6,"div",4)(7,"mat-form-field",31)(8,"input",32),_("input",function(t){m(e);let r=s(2);return p(r.DoFindSanpham(t))}),a()(),o(9,"button",33)(10,"mat-icon"),c(11,"add_circle"),a()()(),o(12,"div",34),v(13,ze,2,6,"mat-option",27,we),a()()()(),o(15,"mat-form-field",35)(16,"mat-label"),c(17,"SL"),a(),o(18,"input",36),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].sldat,t)||(d.DetailPhieukho().sanpham[r].sldat=t),p(t)}),_("change",function(t){let r=m(e).$implicit,d=s(2);return p(d.onChangeSoluong(r,t))}),a()(),o(19,"mat-form-field",35)(20,"mat-label"),c(21,"SL Th\u1EF1c t\u1EBF"),a(),o(22,"input",37),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].soluong,t)||(d.DetailPhieukho().sanpham[r].soluong=t),p(t)}),_("change",function(t){let r=m(e).$implicit,d=s(2);return p(d.onChangeSoluong(r,t))}),a()(),o(23,"mat-form-field",17)(24,"mat-label"),c(25,"Ghi Ch\xFA"),a(),o(26,"input",38),C("ngModelChange",function(t){let r=m(e).$index,d=s(2);return k(d.DetailPhieukho().sanpham[r].ghichu,t)||(d.DetailPhieukho().sanpham[r].ghichu=t),p(t)}),a()()()}if(l&2){let e=n.$index,i=s(2);u(4),h("disabled",!i.isEdit)("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].sanphamId),h("ngModelOptions",D(13,E)),u(9),M(i.filterSP),u(5),h("disabled",!0),f("ngModel",i.DetailPhieukho().sanpham[e].sldat),h("ngModelOptions",D(14,E)),u(4),h("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].soluong),h("ngModelOptions",D(15,E)),u(4),h("disabled",!i.isEdit()),f("ngModel",i.DetailPhieukho().sanpham[e].ghichu),h("ngModelOptions",D(16,E))}}function je(l,n){if(l&1){let e=P();b(0)(1),o(2,"div",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),c(6,"M\xE3 Phi\u1EBFu"),a(),o(7,"input",18),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().maphieu,t)||(r.DetailPhieukho().maphieu=t),p(t)}),a()(),o(8,"mat-form-field",17)(9,"mat-label"),c(10,"Lo\u1EA1i Phi\u1EBFu"),a(),o(11,"mat-select",19),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().type,t)||(r.DetailPhieukho().type=t),p(t)}),_("selectionChange",function(t){m(e);let r=s();return p(r.ChangeType(t))}),y(12,Be,2,2,"mat-option",20),a()(),o(13,"mat-form-field",17)(14,"mat-label"),c(15,"Kho"),a(),o(16,"mat-select",5),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().khoId,t)||(r.DetailPhieukho().khoId=t),p(t)}),y(17,Ae,2,3,"mat-option",20),a()(),y(18,Oe,5,2,"mat-form-field",21)(19,Ke,5,2,"mat-form-field",21),o(20,"mat-form-field",17)(21,"mat-label"),c(22,"Ng\xE0y"),a(),o(23,"input",22),C("ngModelChange",function(t){m(e);let r=s();return k(r.DetailPhieukho().ngay,t)||(r.DetailPhieukho().ngay=t),p(t)}),a(),L(24,"mat-datepicker-toggle",23)(25,"mat-datepicker",null,0),a()(),o(27,"div",24),v(28,Re,27,17,"div",25,we),a(),o(30,"div")(31,"button",26),_("click",function(){m(e);let t=s();return p(t.AddSanpham())}),o(32,"span"),c(33,"Th\xEAm"),a(),o(34,"mat-icon"),c(35,"add"),a()()()(),F()()}if(l&2){let e=B(26),i=s();u(7),f("ngModel",i.DetailPhieukho().maphieu),h("disabled",!i.isEdit()),u(4),f("ngModel",i.DetailPhieukho().type),h("disabled",!i.isEdit()),u(),h("ngForOf",O(19,Te,D(15,ve),D(16,Me),D(17,be),D(18,Fe))),u(4),f("ngModel",i.DetailPhieukho().khoId),h("disabled",!i.isEdit()),u(),h("ngForOf",i._KhoService.ListKho()),u(),h("ngIf",i.DetailPhieukho().type=="xuat"),u(),h("ngIf",i.DetailPhieukho().type=="nhap"),u(4),h("matDatepicker",e),f("ngModel",i.DetailPhieukho().ngay),h("disabled",!i.isEdit()),u(),h("for",e),u(4),M(i.DetailPhieukho().sanpham),u(3),h("disabled",!i.isEdit())}}var Ee=class l{_ListphieukhoComponent=g(Se);_PhieukhoService=g(Pe);_KhoService=g(ye);_DonhangService=g(xe);_DathangService=g(De);_SanphamService=g(Ce);_route=g(j);_router=g(G);_snackBar=g(Q);filterSP=[];LoaiPhieu=[{title:"Phi\u1EBFu Nh\u1EADp",value:"nhap"},{title:"Phi\u1EBFu Xu\u1EA5t",value:"xuat"},{title:"Chuy\u1EC3n Kho",value:"chuyenkho"},{title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"dieuchinh"}];constructor(){this._route.paramMap.subscribe(n=>x(this,null,function*(){let e=n.get("id");this._PhieukhoService.setPhieukhoId(e),yield this._DonhangService.getAllDonhang(),yield this._DathangService.getAllDathang(),yield this._SanphamService.getAllSanpham(),yield this._KhoService.getAllKho(),this.filterSP=this._SanphamService.ListSanpham()})),N(()=>x(this,null,function*(){let n=this._PhieukhoService.phieukhoId();n||(this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()),n==="0"?(this.DetailPhieukho.set({maphieu:V(8,!1),sanpham:[],ngay:new Date}),this._ListphieukhoComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/phieukho","0"])):(yield this._PhieukhoService.getPhieukhoByid(n),this._ListphieukhoComponent.drawer.open(),this._router.navigate(["/admin/phieukho",n]))}))}ChangeType(n){this.DetailPhieukho.update(e=>(e.sanpham=[],e))}ChosenDonhang(n,e){console.log(n.value),e=="xuat"?this.DetailPhieukho.update(i=>(i.sanpham=this._DonhangService.ListDonhang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)):this.DetailPhieukho.update(i=>(i.sanpham=this._DathangService.ListDathang().find(t=>t.id==n.value).sanpham.map(t=>({sanphamId:t.idSP,sldat:t.sldat||0,soluong:t.sldat||0,ghichu:t.ghichu})),i)),console.log(this.DetailPhieukho())}DetailPhieukho=this._PhieukhoService.DetailPhieukho;isEdit=w(!1);isDelete=w(!1);phieukhoId=this._PhieukhoService.phieukhoId;ngOnInit(){return x(this,null,function*(){})}handlePhieukhoAction(){return x(this,null,function*(){this.phieukhoId()==="0"?yield this.createPhieukho():yield this.updatePhieukho()})}createPhieukho(){return x(this,null,function*(){try{yield this._PhieukhoService.CreatePhieukho(this.DetailPhieukho()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi t\u1EA1o phieukho:",n)}console.log(this.DetailPhieukho())})}updatePhieukho(){return x(this,null,function*(){try{yield this._PhieukhoService.updatePhieukho(this.DetailPhieukho()),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(n=>!n)}catch(n){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt phieukho:",n)}console.log(this.DetailPhieukho())})}DeleteData(){return x(this,null,function*(){try{yield this._PhieukhoService.DeletePhieukho(this.DetailPhieukho()),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/phieukho"])}catch(n){console.error("L\u1ED7i khi x\xF3a phieukho:",n)}})}goBack(){this._router.navigate(["/admin/phieukho"]),this._ListphieukhoComponent.drawer.close()}trackByFn(n,e){return e.id}toggleEdit(){this.isEdit.update(n=>!n)}toggleDelete(){this.isDelete.update(n=>!n)}FillSlug(){this.DetailPhieukho.update(n=>(n.slug=me(n.title),n))}DoFindSanpham(n){let e=n.target.value.toLowerCase();this.filterSP=this._SanphamService.ListSanpham().filter(i=>i.title.toLowerCase().includes(e))}onChangeSoluong(n,e){}AddSanpham(){this.DetailPhieukho.update(n=>(n.sanpham.push({id:V(8,!1),idSP:"",sldat:0,soluong:0,ghichu:""}),n)),console.log(this.DetailPhieukho())}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=I({type:l,selectors:[["app-detailphieukho"]],decls:17,vars:8,consts:[["picker",""],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"ngModelChange","ngModel","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-col","space-y-2"],[1,"w-full","flex","flex-row","space-x-2"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 Phi\u1EBFu",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","selectionChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","w-full","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["matInput","","placeholder","Ch\u1ECDn ng\xE0y",3,"ngModelChange","matDatepicker","ngModel","disabled"],["matSuffix","",3,"for"],[1,"w-full","flex","flex-col","space-y-2","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"],[3,"selectionChange","disabled"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],["mat-icon-button","","color","primary"],[1,"overflow-y-auto","max-h-44"],["appearance","outline","subscriptSizing","dynamic",1,"w-60"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","type","number","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng Th\u1EF1c T\u1EBF",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"button",2),_("click",function(){return i.goBack()}),o(2,"mat-icon"),c(3,"arrow_back"),a()(),o(4,"div",3),c(5),a(),o(6,"div",4)(7,"mat-slide-toggle",5),C("ngModelChange",function(r){return k(i.DetailPhieukho().isActive,r)||(i.DetailPhieukho().isActive=r),r}),c(8),a(),y(9,Ve,3,0,"button",6)(10,Ie,3,0,"button",6),o(11,"button",7),_("click",function(){return i.toggleDelete()}),o(12,"mat-icon"),c(13,"delete"),a()()()(),o(14,"div",8),y(15,Le,9,0,"ng-container",9)(16,je,36,24,"ng-container",9),a()),e&2){let t;u(5),T(((t=i.DetailPhieukho())==null?null:t.title)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),u(2),f("ngModel",i.DetailPhieukho().isActive),h("disabled",!i.isEdit()),u(),T(i.DetailPhieukho().isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),u(),h("ngIf",i.isEdit()),u(),h("ngIf",!i.isEdit()),u(5),h("ngIf",i.isDelete()),u(),h("ngIf",!i.isDelete())}},dependencies:[le,re,oe,ae,ue,he,ie,Z,te,$,ee,Y,U,J,H,q,se,ce,X,ne,R,K,z,de,pe,ke,_e,ge,fe],encapsulation:2})};export{Ee as DetailPhieukhoComponent};
