import{a as xe,b as Ce,c as ye}from"./chunk-PZCQWKVF.js";import{a as De,b as Ke}from"./chunk-ZQX5KQ3L.js";import{a as ve}from"./chunk-O4NH3HCF.js";import"./chunk-MXRERSWW.js";import{b as Ee}from"./chunk-NULFSBS2.js";import"./chunk-PAQNOTG7.js";import"./chunk-JCXO4TSM.js";import"./chunk-3FNN46PZ.js";import"./chunk-IXY23C6B.js";import{d as me}from"./chunk-STTHC4C4.js";import{a as ge}from"./chunk-ZW44ZSN2.js";import"./chunk-OTBM7FCQ.js";import"./chunk-CDVLS2VJ.js";import"./chunk-3MD4EG7P.js";import{a as _e,b as fe}from"./chunk-A7PITCFC.js";import"./chunk-JNFQJYYE.js";import{h as le}from"./chunk-C6ZTKERY.js";import"./chunk-H7UDLENL.js";import"./chunk-RHYJKD3I.js";import"./chunk-KZMYTDV6.js";import"./chunk-GUGI676T.js";import{a as X,c as J}from"./chunk-PWU56VV4.js";import"./chunk-N62VL4FK.js";import"./chunk-P7PTBZX5.js";import"./chunk-JNVUT6FC.js";import{b as de}from"./chunk-MRUSYMHE.js";import"./chunk-DRGFONJ6.js";import{a as se,b as pe}from"./chunk-WGYCBDOD.js";import{b as ce,c as ue}from"./chunk-ZVLEUULZ.js";import{p as ae,r as re,x as he,y as oe}from"./chunk-GPRU6KV3.js";import"./chunk-5HHQ5INI.js";import{a as ie,b as ne}from"./chunk-5BIREHNW.js";import{a as te}from"./chunk-TXVIVA74.js";import"./chunk-PR6DE2EA.js";import"./chunk-OB6UQ2BD.js";import"./chunk-2PPFUFFT.js";import{a as Y,c as Z,e as ee}from"./chunk-SKIRCMX2.js";import{ka as U}from"./chunk-LXJDFCF2.js";import"./chunk-3QZHTKAG.js";import{l as z,m as Q,x as W}from"./chunk-KFQ5FW2D.js";import{Cc as $,Db as P,Dc as c,Ec as k,Fc as O,Gc as R,Kb as C,Mc as w,Oc as j,Ra as x,Ub as u,ec as n,fc as a,hc as b,ic as S,kc as D,nd as q,pa as v,pc as s,rb as o,rc as p,ya as m,za as g}from"./chunk-WYL4U5YK.js";import"./chunk-LWLSKGAV.js";import{a as d,b as _,h as N,j as E}from"./chunk-6DYNGEAS.js";var ke=()=>({value:"khachsi",title:"Kh\xE1ch S\u1EC9"}),we=()=>({value:"khachle",title:"Kh\xE1ch L\u1EBB"}),Ve=(f,t)=>[f,t];function Be(f,t){if(f&1){let e=D();n(0,"button",2),s("click",function(){m(e);let i=p();return g(i.handleKhachhangAction())}),n(1,"mat-icon"),c(2,"save"),a()()}}function Te(f,t){if(f&1){let e=D();n(0,"button",2),s("click",function(){m(e);let i=p();return g(i.toggleEdit())}),n(1,"mat-icon"),c(2,"edit"),a()()}}function Ie(f,t){if(f&1){let e=D();b(0),n(1,"div",10)(2,"div",11),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),a(),n(4,"div",12)(5,"button",13),s("click",function(){m(e);let i=p();return g(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),a(),n(7,"button",14),s("click",function(){m(e);let i=p();return g(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),a()()(),S()}}function Ae(f,t){if(f&1&&(n(0,"mat-option",34),c(1),a()),f&2){let e=t.$implicit;u("value",e.value),o(),O(" ",e.title," ")}}function Fe(f,t){if(f&1){let e=D();n(0,"mat-option",35),s("click",function(){let i=m(e).$implicit,r=p(2);return g(r.onBanggiaSelected(i))}),c(1),a()}if(f&2){let e=t.$implicit;u("value",e),o(),R(" ",e.title," - ",e.mabanggia," ")}}function Me(f,t){if(f&1){let e=D();b(0),n(1,"div",15)(2,"mat-form-field",16)(3,"mat-label"),c(4,"T\xEAn Kh\xE1ch H\xE0ng"),a(),n(5,"input",17),s("input",function(i){m(e);let r=p();return g(r.updateName(i))})("keyup",function(){m(e);let i=p();return g(i.autoSubtitle())}),a()(),n(6,"mat-form-field",16)(7,"mat-label"),c(8,"M\xE3 Kh\xE1ch H\xE0ng"),a(),n(9,"input",18),s("input",function(i){m(e);let r=p();return g(r.updateMakh(i))}),a()(),n(10,"mat-form-field",16)(11,"mat-label"),c(12,"Vi\u1EBFt T\u1EAFt"),a(),n(13,"input",19),s("input",function(i){m(e);let r=p();return g(r.updateSubtitle(i))}),a()(),n(14,"mat-form-field",16)(15,"mat-label"),c(16,"T\xEAn File"),a(),n(17,"input",20),s("input",function(i){m(e);let r=p();return g(r.updateTenfile(i))}),a()(),n(18,"mat-form-field",16)(19,"mat-label"),c(20,"Lo\u1EA1i Kh\xE1ch H\xE0ng"),a(),n(21,"mat-select",21),s("selectionChange",function(i){m(e);let r=p();return g(r.updateLoaikh(i))}),C(22,Ae,2,2,"mat-option",22),a()(),n(23,"mat-form-field",16)(24,"mat-label"),c(25,"Email"),a(),n(26,"input",23),s("input",function(i){m(e);let r=p();return g(r.updateEmail(i))}),a()(),n(27,"mat-form-field",16)(28,"mat-label"),c(29,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),a(),n(30,"input",24),s("input",function(i){m(e);let r=p();return g(r.updateSdt(i))}),a()(),n(31,"mat-form-field",16)(32,"mat-label"),c(33,"M\xE3 S\u1ED1 Thu\u1EBF"),a(),n(34,"input",25),s("input",function(i){m(e);let r=p();return g(r.updateMst(i))}),a()(),n(35,"mat-form-field",16)(36,"mat-label"),c(37,"Gi\u1EDD Nh\u1EADn H\xE0ng"),a(),n(38,"input",26),s("input",function(i){m(e);let r=p();return g(r.updateGionhanhang(i))}),a()(),n(39,"mat-form-field",16)(40,"mat-label"),c(41,"\u0110\u1ECBa Ch\u1EC9"),a(),n(42,"input",27),s("input",function(i){m(e);let r=p();return g(r.updateDiachi(i))}),a()(),n(43,"mat-form-field",16)(44,"mat-label"),c(45,"Qu\u1EADn"),a(),n(46,"input",28),s("input",function(i){m(e);let r=p();return g(r.updateQuan(i))}),a()(),n(47,"mat-form-field",16)(48,"mat-label"),c(49,"B\u1EA3ng Gi\xE1"),a(),n(50,"input",29),s("input",function(i){m(e);let r=p();return g(r.onBanggiaInput(i))}),a(),n(51,"mat-autocomplete",30,0),C(53,Fe,2,3,"mat-option",31),a()(),n(54,"mat-slide-toggle",32),s("change",function(i){m(e);let r=p();return g(r.updateHiengia(i))}),c(55,"Hi\u1EC7n Gi\xE1"),a(),n(56,"mat-slide-toggle",32),s("change",function(i){m(e);let r=p();return g(r.updateIstitle2(i))}),c(57,"Hi\u1EC7n T\xEAn S\u1EA3n Ph\u1EA9m 2"),a(),n(58,"mat-slide-toggle",32),s("change",function(i){m(e);let r=p();return g(r.updateIsshowvat(i))}),c(59,"Hi\u1EC7n VAT"),a(),n(60,"mat-form-field",16)(61,"mat-label"),c(62,"Ghi Ch\xFA"),a(),n(63,"textarea",33),s("input",function(i){m(e);let r=p();return g(r.updateGhichu(i))}),a()()(),S()}if(f&2){let e,l,i,r,K,V,B,T,I,A,F,M,L,H,G,Se=$(52),h=p();o(5),u("value",((e=h.DetailKhachhang())==null?null:e.name)||"")("disabled",!h.isEdit()),o(4),u("value",((l=h.DetailKhachhang())==null?null:l.makh)||"")("disabled",!h.isEdit()),o(4),u("value",((i=h.DetailKhachhang())==null?null:i.subtitle)||"")("disabled",!h.isEdit()),o(4),u("value",((r=h.DetailKhachhang())==null?null:r.tenfile)||"")("disabled",!h.isEdit()),o(4),u("value",(K=h.DetailKhachhang())==null?null:K.loaikh)("disabled",!h.isEdit()),o(),u("ngForOf",j(38,Ve,w(36,ke),w(37,we))),o(4),u("value",((V=h.DetailKhachhang())==null?null:V.email)||"")("disabled",!h.isEdit()),o(4),u("value",((B=h.DetailKhachhang())==null?null:B.sdt)||"")("disabled",!h.isEdit()),o(4),u("value",((T=h.DetailKhachhang())==null?null:T.mst)||"")("disabled",!h.isEdit()),o(4),u("value",((I=h.DetailKhachhang())==null?null:I.gionhanhang)||"")("disabled",!h.isEdit()),o(4),u("value",((A=h.DetailKhachhang())==null?null:A.diachi)||"")("disabled",!h.isEdit()),o(4),u("value",((F=h.DetailKhachhang())==null?null:F.quan)||"")("disabled",!h.isEdit()),o(4),u("value",h.getSelectedBanggiaTitle())("matAutocomplete",Se)("disabled",!h.isEdit()),o(),u("displayWith",h.displayBanggia),o(2),u("ngForOf",h.filteredBanggia()),o(),u("checked",(M=h.DetailKhachhang())==null?null:M.hiengia)("disabled",!h.isEdit()),o(2),u("checked",(L=h.DetailKhachhang())==null?null:L.istitle2)("disabled",!h.isEdit()),o(2),u("checked",(H=h.DetailKhachhang())==null?null:H.isshowvat)("disabled",!h.isEdit()),o(5),u("value",((G=h.DetailKhachhang())==null?null:G.ghichu)||"")("disabled",!h.isEdit())}}var y=class y{_ListkhachhangComponent=v(Ke);_KhachhangService=v(De);_BanggiaService=v(ve);_route=v(X);_router=v(J);_snackBar=v(te);DetailKhachhang=this._KhachhangService.DetailKhachhang;loading=this._KhachhangService.loading;error=this._KhachhangService.error;ListFilter=[];filterItem=[];isEdit=x(!1);isDelete=x(!1);khachhangId=this._KhachhangService.khachhangId;filteredBanggia=x([]);selectedBanggia=x(null);constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");this._KhachhangService.setKhachhangId(e)}),q(()=>E(this,null,function*(){let t=this._KhachhangService.khachhangId();t||(this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()),t==="new"?(this.DetailKhachhang.set({loaikh:"khachsi"}),this._ListkhachhangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/khachhang","new"])):(console.log("KhachhangId:",t),t&&(yield this._KhachhangService.getKhachhangById(t),this.ListFilter=this._KhachhangService.DetailKhachhang().banggia),this._ListkhachhangComponent.drawer.open(),this._router.navigate(["/admin/khachhang",t]))}))}ngOnInit(){return E(this,null,function*(){if(yield this._BanggiaService.getAllBanggia(),this.filterItem=this._BanggiaService.ListBanggia(),this.filteredBanggia.set(this._BanggiaService.ListBanggia()),this.DetailKhachhang()?.banggiaId){let t=this._BanggiaService.ListBanggia().find(e=>e.id===this.DetailKhachhang().banggiaId);this.selectedBanggia.set(t)}console.log("DetailKhachhang:",this.DetailKhachhang())})}handleKhachhangAction(){return E(this,null,function*(){this.khachhangId()==="new"?yield this.createKhachhang():yield this.updateKhachhang()})}autoSubtitle(){this.DetailKhachhang.update(t=>_(d({},t),{subtitle:ge(t.name||"")}))}createKhachhang(){return E(this,null,function*(){try{yield this._KhachhangService.createKhachhang(this.DetailKhachhang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o khachhang:",t)}})}updateKhachhang(){return E(this,null,function*(){try{let t=this.DetailKhachhang(),e=this.khachhangId();e&&e!=="new"&&(yield this._KhachhangService.updateKhachhang(e,t),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(l=>!l))}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt khachhang:",t)}})}DeleteData(){return E(this,null,function*(){try{let t=this.DetailKhachhang();t?.id&&(yield this._KhachhangService.deleteKhachhang(t.id),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/khachhang"]))}catch(t){console.error("L\u1ED7i khi x\xF3a khachhang:",t)}})}goBack(){this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailKhachhang.update(t=>(t.slug=me(t.title),t))}DoOutFilter(t){this.DetailKhachhang.update(e=>(e.banggia=t,e))}onBanggiaInput(t){let e=t.target.value.toLowerCase(),l=this._BanggiaService.ListBanggia().filter(i=>i.title.toLowerCase().includes(e)||i.mabanggia?.toLowerCase().includes(e));this.filteredBanggia.set(l)}onBanggiaSelected(t){console.log("banggia selected:",t),t&&(this.selectedBanggia.set(t),this.DetailKhachhang.update(e=>_(d({},e),{banggiaId:t.id})))}getSelectedBanggiaTitle(){let t=this.selectedBanggia();if(t)return`${t.title} - ${t.mabanggia}`;if(this.DetailKhachhang()?.banggiaId){let e=this._BanggiaService.ListBanggia().find(l=>l.id===this.DetailKhachhang().banggiaId);if(e)return this.selectedBanggia.set(e),`${e.title} - ${e.mabanggia}`}return""}displayBanggia(t){return t?`${t.title} - ${t.mabanggia}`:""}updateHiengia(t){this.DetailKhachhang.update(e=>_(d({},e),{hiengia:t.checked}))}updateIstitle2(t){this.DetailKhachhang.update(e=>_(d({},e),{istitle2:t.checked}))}updateIsshowvat(t){this.DetailKhachhang.update(e=>_(d({},e),{isshowvat:t.checked}))}updateIsActive(t){this.DetailKhachhang.update(e=>_(d({},e),{isActive:t.checked}))}updateName(t){this.DetailKhachhang.update(e=>_(d({},e),{name:t.target.value}))}updateMakh(t){this.DetailKhachhang.update(e=>_(d({},e),{makh:t.target.value}))}updateSubtitle(t){this.DetailKhachhang.update(e=>_(d({},e),{subtitle:t.target.value}))}updateTenfile(t){this.DetailKhachhang.update(e=>_(d({},e),{tenfile:t.target.value}))}updateLoaikh(t){this.DetailKhachhang.update(e=>_(d({},e),{loaikh:t.value}))}updateEmail(t){this.DetailKhachhang.update(e=>_(d({},e),{email:t.target.value}))}updateSdt(t){this.DetailKhachhang.update(e=>_(d({},e),{sdt:t.target.value}))}updateMst(t){this.DetailKhachhang.update(e=>_(d({},e),{mst:t.target.value}))}updateGionhanhang(t){this.DetailKhachhang.update(e=>_(d({},e),{gionhanhang:t.target.value}))}updateDiachi(t){this.DetailKhachhang.update(e=>_(d({},e),{diachi:t.target.value}))}updateQuan(t){this.DetailKhachhang.update(e=>_(d({},e),{quan:t.target.value}))}updateGhichu(t){this.DetailKhachhang.update(e=>_(d({},e),{ghichu:t.target.value}))}static \u0275fac=function(e){return new(e||y)};static \u0275cmp=P({type:y,selectors:[["app-detailkhachhang"]],decls:17,vars:8,consts:[["autoBanggia","matAutocomplete"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"change","checked","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","grid","grid-cols-2","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn Kh\xE1ch H\xE0ng",3,"input","keyup","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 Kh\xE1ch H\xE0ng",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Vi\u1EBFt T\u1EAFt",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn File",3,"input","value","disabled"],[3,"selectionChange","value","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1ED1 Thu\u1EBF",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Gi\u1EDD Nh\u1EADn H\xE0ng",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u1ECBa Ch\u1EC9",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Qu\u1EADn",3,"input","value","disabled"],["matInput","","placeholder","T\xECm ki\u1EBFm b\u1EA3ng gi\xE1...",3,"input","value","matAutocomplete","disabled"],[3,"displayWith"],[3,"value","click",4,"ngFor","ngForOf"],["color","primary",3,"change","checked","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ghi Ch\xFA",3,"input","value","disabled"],[3,"value"],[3,"click","value"]],template:function(e,l){if(e&1&&(n(0,"div",1)(1,"button",2),s("click",function(){return l.goBack()}),n(2,"mat-icon"),c(3,"arrow_back"),a()(),n(4,"div",3),c(5),a(),n(6,"div",4)(7,"mat-slide-toggle",5),s("change",function(r){return l.updateIsActive(r)}),c(8),a(),C(9,Be,3,0,"button",6)(10,Te,3,0,"button",6),n(11,"button",7),s("click",function(){return l.toggleDelete()}),n(12,"mat-icon"),c(13,"delete"),a()()()(),n(14,"div",8),C(15,Ie,9,0,"ng-container",9)(16,Me,64,41,"ng-container",9),a()),e&2){let i,r,K;o(5),k(((i=l.DetailKhachhang())==null?null:i.name)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),o(2),u("checked",(r=l.DetailKhachhang())==null?null:r.isActive)("disabled",!l.isEdit()),o(),k((K=l.DetailKhachhang())!=null&&K.isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),o(),u("ngIf",l.isEdit()),o(),u("ngIf",!l.isEdit()),o(5),u("ngIf",l.isDelete()),o(),u("ngIf",!l.isDelete())}},dependencies:[oe,he,re,ue,ce,ae,ne,ie,ee,Y,Z,pe,se,U,le,W,z,Q,fe,_e,de,ye,xe,Ce],encapsulation:2})};N([Ee(300)],y.prototype,"autoSubtitle",1);var be=y;export{be as DetailKhachhangComponent};
