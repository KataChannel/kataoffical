import{a as Ne}from"./chunk-ZEYFBF7A.js";import{a as Ve,b as Ae}from"./chunk-44FBMLC2.js";import{b as ke}from"./chunk-QJQVWIZ4.js";import{a as Le}from"./chunk-R7ST5IIX.js";import{a as Me}from"./chunk-EP6DW7SW.js";import{a as Ie}from"./chunk-MC6M7SC7.js";import{a as Te}from"./chunk-DNWAPPS6.js";import{a as Fe}from"./chunk-2IDB7QHK.js";import{c as Nt}from"./chunk-XG6MBH2B.js";import{a as be,b as Z}from"./chunk-NULFSBS2.js";import{c as zt,d as Rt,e as Yt,f as Kt,g as Ht,h as Wt}from"./chunk-5P7QWTR6.js";import{a as De,b as we,c as Se,k as ve}from"./chunk-LVZE32FU.js";import{a as Ee}from"./chunk-KFMV33X3.js";import{c as Ce,g as ye}from"./chunk-ZJWFFP6L.js";import{a as ee,b as ne,c as ie,d as ae,e as X,f as oe,g as re,h as le,i as se,j as me,l as ce,m as pe,o as ue,p as de,r as ge,s as he,u as _e,v as fe,w as xe,x as U}from"./chunk-MIK3M6YH.js";import{a as bt,b as kt,c as Mt}from"./chunk-6DMN2Y4X.js";import{a as Zt,b as te}from"./chunk-4LDEQNC7.js";import{a as Re}from"./chunk-JNVUT6FC.js";import{a as Tt,b as Ft,c as Vt,d as At}from"./chunk-DU3FV2IQ.js";import{a as Lt,b as It}from"./chunk-VDT6LLUL.js";import{b as Pt,g as Ot,j as Bt,n as $t,p as Qt,q as jt,r as Xt,u as qt,v as Gt,x as Jt,y as Ut}from"./chunk-TJCNWHB7.js";import{a as vt}from"./chunk-TV5MBD5E.js";import{a as Dt,c as wt,e as St}from"./chunk-LGSPPKE4.js";import{_ as yt,ia as Et,y as xt,z as Ct}from"./chunk-7ROZJMXV.js";import{b as _t,c as ft}from"./chunk-QDKCYXS4.js";import{k as pt,l as ut,m as dt,r as gt,u as ht}from"./chunk-5AAE55N6.js";import{Ac as $,Eb as it,Ec as D,Fc as l,Gc as f,Hc as C,Ic as H,Jc as J,Kc as I,Lb as y,Lc as T,Mc as F,Oc as W,Qc as st,Tc as mt,Uc as Q,Vb as g,Wc as j,Yc as Y,Zb as at,ac as V,cc as ot,dc as N,ec as P,fc as i,gc as o,hc as M,ic as rt,jc as lt,lc as E,ld as ct,oa as v,qc as h,rb as m,sc as c,xa as u,ya as d,yc as O,zc as B}from"./chunk-JY44QJM2.js";import{a as et,b as nt,g as ze,h as K,j as L}from"./chunk-6DYNGEAS.js";var w=ze(Re());var Ye=["drawer"],Ke=["dialogImportExcel"],He=["dialogImportExcelCu"],tt=()=>({standalone:!0}),We=(r,n,t,e,a)=>({"text-blue-500":r,"text-yellow-500":n,"text-green-500":t,"text-purple-500":e,"text-red-500":a}),Qe=(r,n)=>({"text-green-600 font-semibold":r,"text-yellow-600 font-semibold":n}),je=(r,n)=>n.key,Oe=(r,n)=>n.id,Xe=(r,n)=>(n.sanpham==null?null:n.sanpham.id)||r;function qe(r,n){if(r&1){let t=E();i(0,"button",54),h("click",function(a){let s=u(t).$implicit;return c().toggleColumn(s),d(a.stopPropagation())}),i(1,"mat-icon"),l(2),o(),i(3,"span"),l(4),o()()}if(r&2){let t=n.$implicit;m(2),f(t.isShow?"check_box":"check_box_outline_blank"),m(2),f(t.value)}}function Ge(r,n){if(r&1){let t=E();i(0,"button",57),h("click",function(){u(t);let a=c(2),s=D(97);return d(a.openDeleteDialog(s))}),i(1,"mat-icon"),l(2,"delete"),o(),i(3,"span",24),l(4,"Xo\xE1"),o()()}}function Je(r,n){if(r&1){let t=E();i(0,"button",58),h("click",function(){u(t);let a=c(2);return d(a.DoDanhan())}),i(1,"span",24),l(2,"\u0110\xE3 Nh\u1EADn"),o()()}}function Ue(r,n){if(r&1&&y(0,Ge,5,0,"button",55)(1,Je,3,0,"button",56),r&2){let t=c();g("ngIf",t.EditList.length>0),m(),g("ngIf",t.EditList.length>0)}}function Ze(r,n){if(r&1&&(i(0,"th",61)(1,"span",62),l(2),o()()),r&2){let t=c().$implicit,e=c();m(2),C(" ",e.ColumnName[t]," ")}}function tn(r,n){if(r&1&&(i(0,"span",64),l(1),o()),r&2){let t=c().index;m(),C(" ",t+1," ")}}function en(r,n){if(r&1){let t=E();i(0,"span",68),h("click",function(){u(t);let a=c().$implicit,s=c(2);return d(s.goToDetail(a))}),l(1),o()}if(r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",t[e]," ")}}function nn(r,n){if(r&1&&(i(0,"span",64),l(1),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",t[e].length," ")}}function an(r,n){if(r&1&&(i(0,"span",64),l(1),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),H(" (",t[e].mancc,") ",t[e].name," ")}}function on(r,n){if(r&1&&(i(0,"span",66),l(1),Q(2,"date"),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",j(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function rn(r,n){if(r&1&&(i(0,"span",66),l(1),Q(2,"date"),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",j(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function ln(r,n){if(r&1&&(i(0,"span",67),l(1),o()),r&2){let t=c().$implicit,e=c().$implicit,a=c();g("ngClass",mt(2,We,t[e]==="dadat",t[e]==="dagiao",t[e]==="danhan",t[e]==="hoanthanh",t[e]==="huy")),m(),C(" ",a.Trangthaidon[t[e]]," ")}}function sn(r,n){r&1&&(i(0,"mat-icon",69),l(1,"check_circle"),o())}function mn(r,n){r&1&&(i(0,"mat-icon",70),l(1,"cancel"),o())}function cn(r,n){if(r&1&&(i(0,"span",64),y(1,sn,2,0,"mat-icon",69)(2,mn,2,0,"mat-icon",70),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),V(t[e]?1:2)}}function pn(r,n){if(r&1&&(i(0,"span",66),l(1),Q(2,"date"),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",j(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function un(r,n){r&1&&M(0,"span",64)}function dn(r,n){if(r&1&&(i(0,"span",64),l(1),o()),r&2){let t=c().$implicit,e=c().$implicit;m(),C(" ",t[e]," ")}}function gn(r,n){if(r&1&&(i(0,"td",63),y(1,tn,2,1,"span",64)(2,en,2,1,"span",65)(3,nn,2,1,"span",64)(4,an,2,2,"span",64)(5,on,3,4,"span",66)(6,rn,3,4,"span",66)(7,ln,2,8,"span",67)(8,cn,3,1,"span",64)(9,pn,3,4,"span",66)(10,un,1,0,"span",64)(11,dn,2,1,"span",64),o()),r&2){let t,e=c().$implicit;m(),V((t=e)==="STT"?1:t==="madncc"?2:t==="sanpham"?3:t==="nhacungcap"?4:t==="ngaynhan"?5:t==="createdAt"?6:t==="status"?7:t==="isActive"?8:t==="updatedAt"?9:t==="action"?10:11)}}function hn(r,n){if(r&1&&(rt(0,40),y(1,Ze,3,1,"th",59)(2,gn,12,1,"td",60),lt()),r&2){let t=n.$implicit;g("matColumnDef",t)}}function _n(r,n){r&1&&M(0,"tr",71)}function fn(r,n){if(r&1){let t=E();i(0,"tr",72),h("click",function(){let a=u(t).$implicit,s=c();return d(s.AddToEdit(a))}),o()}if(r&2){let t=n.$implicit,e=c();at("hover:bg-slate-100 ",e.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function xn(r,n){r&1&&(i(0,"tr",73)(1,"td",74),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}function Cn(r,n){r&1&&(i(0,"mat-dialog-content")(1,"div",75)(2,"div",76),l(3,"X\xE1c Nh\u1EADn"),o(),i(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),i(6,"div",77)(7,"button",78),l(8,"\u0110\u1ED3ng \xDD"),o(),i(9,"button",79),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function yn(r,n){r&1&&(i(0,"mat-dialog-content")(1,"div",75)(2,"div",76),l(3,"X\xE1c Nh\u1EADn"),o(),i(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),i(6,"div",77)(7,"button",78),l(8,"\u0110\u1ED3ng \xDD"),o(),i(9,"button",79),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function En(r,n){if(r&1){let t=E();l(0),i(1,"button",105),h("click",function(){u(t);let a=c().$implicit,s=c(2);return d(s.removeItemImport(a))}),i(2,"mat-icon"),l(3,"delete"),o()()}if(r&2){let t=c().index;C(" ",t+1," ")}}function Dn(r,n){if(r&1&&(i(0,"mat-option",111),l(1),o()),r&2){let t=n.$implicit;g("value",t.id),m(),f(t.name)}}function wn(r,n){if(r&1){let t=E();i(0,"mat-form-field",30)(1,"mat-label"),l(2,"Nh\xE0 Cung C\u1EA5p"),o(),i(3,"mat-select",106),h("selectionChange",function(a){u(t);let s=c().$implicit,p=c(2);return d(p.SelectNhacungcap(s,a))}),i(4,"div",107)(5,"mat-form-field",108)(6,"input",109),h("input",function(a){u(t);let s=c().index,p=c(2);return d(p.DoFindNhacungcap(a,s))}),o()(),i(7,"div",110),N(8,Dn,2,2,"mat-option",111,Oe),o()()()()}if(r&2){let t=c().index,e=c(2);m(8),P(e.FilterNhacungcap[t])}}function Sn(r,n){if(r&1){let t=E();i(0,"mat-form-field",30)(1,"mat-label"),l(2,"Ng\xE0y Nh\u1EADn "),o(),i(3,"input",112),h("dateChange",function(a){u(t);let s=c().$implicit,p=c(2);return d(p.DoChonNgaynhan(a,s))}),o(),M(4,"mat-datepicker-toggle",37)(5,"mat-datepicker",null,11),o()}if(r&2){let t=D(6),e=c().index,a=c(2);m(3),g("ngModel",a.statusDetails[e]==null?null:a.statusDetails[e].ngaynhan)("matDatepicker",t),m(),g("for",t)}}function vn(r,n){if(r&1&&(i(0,"tr")(1,"td",98),y(2,En,4,1),o(),i(3,"td",99),y(4,wn,10,0,"mat-form-field",30),o(),i(5,"td",100),y(6,Sn,7,3,"mat-form-field",30),o(),i(7,"td",101),l(8),o(),i(9,"td",101),l(10),o(),i(11,"td",102)(12,"span",103),l(13),o()(),i(14,"td",104),l(15),o()()),r&2){let t=n.$implicit;m(2),V(t.status==="Processed"?2:-1),m(2),V(t.status==="Processed"?4:-1),m(2),V(t.status==="Processed"?6:-1),m(2),f(t.fileName),m(2),f(t.tenkhongdau),m(2),g("ngClass",st(8,Qe,t.status==="Processed"||t.status==="Success",t.status==="Skipped")),m(),C(" ",t.status," "),m(2),f(t.message)}}function bn(r,n){if(r&1){let t=E();i(0,"h2",80),l(1,"Import \u0110\u1EB7t H\xE0ng"),o(),i(2,"mat-dialog-content",81)(3,"div",82)(4,"div",83)(5,"table",84)(6,"thead",85)(7,"tr")(8,"th",86),l(9," # "),o(),i(10,"th",87),l(11," Nh\xE0 Cung C\u1EA5p "),o(),i(12,"th",88),l(13," Ng\xE0y Nh\u1EADn "),i(14,"mat-form-field",50)(15,"mat-label"),l(16,"Ng\xE0y Nh\u1EADn All "),o(),i(17,"input",89),h("dateChange",function(a){u(t);let s=c();return d(s.DoChonNgaynhan(a,"All"))}),o(),M(18,"mat-datepicker-toggle",37)(19,"mat-datepicker",null,11),o()(),i(21,"th",90),l(22," File Name"),o(),i(23,"th",90),l(24," T\xEAn Kh\xF4ng D\u1EA5u"),o(),i(25,"th",91),l(26," Status"),o(),i(27,"th",92),l(28," Message"),o()()(),i(29,"tbody",93),y(30,vn,16,11,"tr",94),o()()()()(),i(31,"mat-dialog-actions",95)(32,"button",96),l(33,"\u0110\xF3ng"),o(),i(34,"button",97),h("click",function(){u(t);let a=c();return d(a.DoImportNhacungcapCu())}),l(35,"C\u1EADp Nh\u1EADt"),o()()}if(r&2){let t=D(20),e=c();m(17),g("matDatepicker",t),m(),g("for",t),m(12),g("ngForOf",e.statusDetails)}}function kn(r,n){if(r&1&&(i(0,"tr",141)(1,"td",142),l(2),o(),i(3,"td",143),l(4),o(),i(5,"td",142),l(6),o(),i(7,"td",142),l(8),o(),i(9,"td",144),l(10),o(),i(11,"td",142),l(12),o(),i(13,"td",142),l(14),o(),i(15,"td",145),l(16),o()()),r&2){let t=n.$implicit,e=n.$index;m(2),f(e+1),m(2),f((t.sanpham==null?null:t.sanpham.masp)||t.masp||"N/A"),m(2),f((t.sanpham==null?null:t.sanpham.title)||t.title||"N/A"),m(2),f((t.sanpham==null?null:t.sanpham.dvt)||t.dvt||""),m(2),f(t.sldat||0),m(2),f(t.slgiao||0),m(2),f(t.slnhan||0),m(2),f(t.ghichu||"")}}function Mn(r,n){r&1&&(i(0,"tr")(1,"td",146),l(2,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m"),o()())}function Ln(r,n){if(r&1){let t=E();i(0,"div",124)(1,"div",131)(2,"div",132)(3,"mat-checkbox",133),F("ngModelChange",function(a){let s=u(t).$implicit;return T(s.configOptions.confirmed,a)||(s.configOptions.confirmed=a),d(a)}),h("change",function(){let a=u(t).$implicit,s=c(2);return d(s.toggleOrderConfirmation(a))}),o(),i(4,"div")(5,"h3",134),l(6),o(),i(7,"p",128),l(8),o()()(),i(9,"button",135),h("click",function(){let a=u(t).$implicit,s=c(2);return d(s.removeOrderFromImport(a))}),i(10,"mat-icon"),l(11,"delete"),o()()(),i(12,"div",136)(13,"mat-form-field",50)(14,"mat-label"),l(15,"Ng\xE0y nh\u1EADn"),o(),i(16,"input",120),F("ngModelChange",function(a){let s=u(t).$implicit;return T(s.configOptions.selectedDate,a)||(s.configOptions.selectedDate=a),d(a)}),h("dateChange",function(a){let s=u(t).$implicit,p=c(2);return d(p.updateOrderDate(s,a.value))}),o(),M(17,"mat-datepicker-toggle",37)(18,"mat-datepicker",null,13),o(),i(20,"mat-form-field",50)(21,"mat-label"),l(22,"M\xE3 kho"),o(),i(23,"input",121),F("ngModelChange",function(a){let s=u(t).$implicit;return T(s.configOptions.selectedKho,a)||(s.configOptions.selectedKho=a),d(a)}),h("ngModelChange",function(a){let s=u(t).$implicit,p=c(2);return d(p.updateOrderKho(s,a))}),o()()(),i(24,"div",83)(25,"table",137)(26,"thead",138)(27,"tr")(28,"th",139),l(29,"STT"),o(),i(30,"th",139),l(31,"M\xE3 SP"),o(),i(32,"th",139),l(33,"T\xEAn s\u1EA3n ph\u1EA9m"),o(),i(34,"th",139),l(35,"\u0110VT"),o(),i(36,"th",139),l(37,"SL \u0110\u1EB7t"),o(),i(38,"th",139),l(39,"SL Giao"),o(),i(40,"th",139),l(41,"SL Nh\u1EADn"),o(),i(42,"th",139),l(43,"Ghi ch\xFA"),o()()(),i(44,"tbody",140),N(45,kn,17,8,"tr",141,Xe,!1,Mn,3,0,"tr"),o()()()()}if(r&2){let t=n.$implicit,e=D(19),a=c(2);g("ngClass",t.configOptions!=null&&t.configOptions.confirmed?"border-green-500 bg-green-50":"border-gray-300"),m(3),I("ngModel",t.configOptions.confirmed),m(3),f((t.summary==null?null:t.summary.supplierName)||(t.nhacungcap==null?null:t.nhacungcap.name)||"N/A"),m(2),J(" M\xE3 NCC: ",(t.summary==null?null:t.summary.supplierCode)||(t.nhacungcap==null?null:t.nhacungcap.mancc)||"N/A"," | ",(t.summary==null?null:t.summary.totalProducts)||(t.sanpham==null?null:t.sanpham.length)||0," s\u1EA3n ph\u1EA9m | T\u1ED5ng SL: ",(t.summary==null?null:t.summary.totalQuantity)||a.getTotalQuantity(t)," "),m(8),g("matDatepicker",e),I("ngModel",t.configOptions.selectedDate),m(),g("for",e),m(6),I("ngModel",t.configOptions.selectedKho),m(22),P(t.sanpham)}}function In(r,n){r&1&&(i(0,"div",125)(1,"div",147),l(2,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 import"),o(),i(3,"div",148),l(4,"Vui l\xF2ng ch\u1ECDn file Excel h\u1EE3p l\u1EC7"),o()())}function Tn(r,n){if(r&1){let t=E();i(0,"h2",113)(1,"span"),l(2,"Import \u0110\u1EB7t H\xE0ng t\u1EEB Excel"),o(),i(3,"span",114),l(4),o()(),i(5,"mat-dialog-content",115)(6,"div",116)(7,"div",117)(8,"div",118)(9,"mat-form-field",119)(10,"mat-label"),l(11,"Ng\xE0y nh\u1EADn (T\u1EA5t c\u1EA3)"),o(),i(12,"input",120),F("ngModelChange",function(a){u(t);let s=c();return T(s.ImportConfig.selectedDate,a)||(s.ImportConfig.selectedDate=a),d(a)}),h("dateChange",function(a){u(t);let s=c();return d(s.updateAllOrdersDate(a.value))}),o(),M(13,"mat-datepicker-toggle",37)(14,"mat-datepicker",null,12),o(),i(16,"mat-form-field",119)(17,"mat-label"),l(18,"M\xE3 kho (T\u1EA5t c\u1EA3)"),o(),i(19,"input",121),F("ngModelChange",function(a){u(t);let s=c();return T(s.ImportConfig.selectedKho,a)||(s.ImportConfig.selectedKho=a),d(a)}),h("ngModelChange",function(a){u(t);let s=c();return d(s.updateAllOrdersKho(a))}),o()(),i(20,"button",97),h("click",function(){u(t);let a=c();return d(a.toggleAllOrdersConfirmation())}),i(21,"mat-icon"),l(22),o(),l(23),o()()(),i(24,"div",122)(25,"div",123),N(26,Ln,48,11,"div",124,Oe),o(),y(28,In,5,0,"div",125),o()()(),i(29,"mat-dialog-actions",126)(30,"div",127)(31,"div",128),l(32),o(),i(33,"div",129)(34,"button",79),l(35,"\u0110\xF3ng"),o(),i(36,"button",130),h("click",function(){u(t);let a=c();return d(a.ImportConfirmedDathang())}),l(37),o()()()()}if(r&2){let t=D(15),e=c();m(4),H(" ",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng - ",e.getConfirmedOrdersCount()," \u0111\xE3 x\xE1c nh\u1EADn "),m(8),g("matDatepicker",t),I("ngModel",e.ImportConfig.selectedDate),m(),g("for",t),m(6),I("ngModel",e.ImportConfig.selectedKho),m(3),f(e.getConfirmedOrdersCount()===e.ListImportExcel.length?"check_box":"check_box_outline_blank"),m(),C(" ",e.getConfirmedOrdersCount()===e.ListImportExcel.length?"B\u1ECF ch\u1ECDn t\u1EA5t c\u1EA3":"Ch\u1ECDn t\u1EA5t c\u1EA3"," "),m(3),P(e.ListImportExcel),m(2),V(e.ListImportExcel.length===0?28:-1),m(),g("align","end"),m(3),H(" \u0110\xE3 ch\u1ECDn ",e.getConfirmedOrdersCount()," / ",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng "),m(4),g("disabled",e.getConfirmedOrdersCount()===0),m(),C(" Import ",e.getConfirmedOrdersCount()," \u0111\u01A1n h\xE0ng ")}}var A=class A{Detail={};displayedColumns=["STT","madncc","nhacungcap","sanpham","ngaynhan","status","ghichu","createdAt","updatedAt"];ColumnName={STT:"STT",madncc:"M\xE3 \u0110\u01A1n Nh\u1EADp",nhacungcap:"Nh\xE0 Cung C\u1EA5p",sanpham:"S\u1EA3n Ph\u1EA9m",ngaynhan:"Ng\xE0y Nh\u1EADn",status:"Tr\u1EA1ng Th\xE1i",ghichu:"Ghi Ch\xFA",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt"};FilterColumns=JSON.parse(localStorage.getItem("DathangColFilter")||"[]");Columns=[];isFilter=!1;Trangthaidon=Ne;paginator;sort;drawer;dialogImportExcel;dialogImportExcelCu;filterValues={};_DathangService=v(Le);_breakpointObserver=v(xt);_GoogleSheetService=v(Ee);_NhacungcapService=v(Te);_SanphamService=v(Fe);_BanggiaService=v(Me);_KhachhangService=v(Ie);_router=v(ft);Listdathang=this._DathangService.ListDathang;page=this._DathangService.page;pageCount=this._DathangService.pageCount;total=this._DathangService.total;pageSize=this._DathangService.pageSize;dathangId=this._DathangService.dathangId;dataSource=new U([]);_snackBar=v(vt);CountItem=0;suppliers=[];dialog=v(zt);ListImportExcel=[];searchParam={Batdau:(0,w.default)().toDate(),Ketthuc:(0,w.default)().toDate(),page:this.page(),pageSize:this.pageSize()};totalItems=0;constructor(){ct(()=>L(this,null,function*(){this.dataSource.data=this.Listdathang(),this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page()-1,this.paginator.pageSize=this.pageSize(),this.paginator.length=this.total())}))}createFilter(){return(n,t)=>{let e=JSON.parse(t),a=!0;return this.displayedColumns.forEach(s=>{if(e[s]){let p=n[s]?n[s].toString().toLowerCase():"";a=a&&p.includes(e[s].toLowerCase())}}),a}}onPageSizeChange(n,t){n>this.total()&&(this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.total()}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),n=this.total()),this._DathangService.page.set(1),this._DathangService.getDathangBy(this.searchParam),t.closeMenu()}onPreviousPage(){this.page()>1&&(this._DathangService.page.set(this.page()-1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onNextPage(){this.page()<this.pageCount()&&(this._DathangService.page.set(this.page()+1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onDateChange(){this.ngOnInit()}ngOnInit(){return L(this,null,function*(){yield this._DathangService.getDathangBy(this.searchParam),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new U(this.Listdathang()),this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer(),yield this._NhacungcapService.getAllNhacungcap(),this.FilterNhacungcap=Array(20).fill(null).map(()=>this._NhacungcapService.ListNhacungcap())})}initializeColumns(){this.Columns=Object.entries(this.ColumnName).map(([n,t])=>({key:n,value:t,isShow:!0})),this.FilterColumns=this.FilterColumns.length?this.FilterColumns:this.Columns,localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,{key:t,value:e,isShow:a})=>a?nt(et({},n),{[t]:e}):n,{})}applyFilter(n){let t=n.target.value;if(!t){this.searchParam={page:this.page(),pageSize:this.pageSize()},this._DathangService.getDathangBy(this.searchParam);return}this.searchParam.subtitle=t.trim().toLowerCase(),this._DathangService.getDathangBy(this.searchParam)}setupDrawer(){this._breakpointObserver.observe([Ct.Handset]).subscribe(n=>{n.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(n){let t=this.FilterColumns.find(e=>e.key===n.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(n,t){return n.filter((a,s,p)=>s===p.findIndex(_=>_[t]===a[t]))}doFilterHederColumn(n,t){this.dataSource.filteredData=this.Listdathang().filter(e=>e[t].toLowerCase().includes(n.target.value.toLowerCase()))}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,t)=>(t.isShow&&(n[t.key]=t.value),n),{}),localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(n){let t=n.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(e=>e.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/dathang","new"])}goToDetail(n){this._DathangService.setDathangId(n.id),this.drawer.open(),this._router.navigate(["admin/dathang",n.id])}UpdateDathang(n){n.status="dagiao",this._DathangService.updateDathang(n).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ExportExcel(){return L(this,null,function*(){let n=this.Listdathang(),t=`Danh S\xE1ch \u0110\u1EB7t H\xE0ng ${(0,w.default)().format("DD-MM-YYYY")}`;yield this._NhacungcapService.getAllNhacungcap(),yield this._SanphamService.getAllSanpham(),yield this._BanggiaService.getAllBanggia();let e=Array.isArray(n)&&n.length>0?n.flatMap(a=>Array.isArray(a.sanpham)?a.sanpham.map(s=>({ngaynhan:(0,w.default)(a.ngaynhan).format("DD/MM/YYYY"),mancc:a.nhacungcap?.mancc,name:a.nhacungcap?.name,masp:s?.sanpham?.masp,tensp:s?.sanpham?.title,sldat:Number(s?.sldat)||0,slgiao:Number(s?.slgiao)||0,slnhan:Number(s?.slnhan)||0,ghichu:s?.ghichu,makho:a?.kho?.makho})):[]):[{ngaynhan:(0,w.default)().format("DD/MM/YYYY"),mancc:"",name:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:"",makho:""}];console.log(e),Ce(e,t)})}EditList=[];AddToEdit(n){this.EditList.find(e=>e.id===n.id)?this.EditList=this.EditList.filter(e=>e.id!==n.id):this.EditList.push(n)}CheckItemInEdit(n){return this.EditList.some(t=>t.id===n.id)}DoDanhan(){Promise.all(this.EditList.map(n=>(n.status="danhan",this._DathangService.updateDathang(n)))).then(()=>{this.EditList=[],this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}dialogCreateRef;openDeleteDialog(n,t){this.dialog.open(n,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(a=>L(this,null,function*(){if(a=="true"){if(t){yield this._DathangService.DeleteDathang(t);return}this.DeleteListItem()}}))}openDathangDialog(n){this.dialog.open(n,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(e=>L(this,null,function*(){e=="true"}))}DeleteListItem(){return L(this,null,function*(){if(!this.EditList?.length){this._snackBar.open("Kh\xF4ng c\xF3 m\u1EE5c n\xE0o \u0111\u01B0\u1EE3c ch\u1ECDn \u0111\u1EC3 x\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}try{let n=yield this._DathangService.DeleteBulkDathang(this.EditList.map(t=>t.id));this._snackBar.open(`X\xF3a th\xE0nh c\xF4ng ${n.success} \u0111\u1EB7t h\xE0ng ${n.fail} l\u1ED7i`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(n){console.error("L\u1ED7i khi x\xF3a \u0111\u1EB7t h\xE0ng:",n),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a \u0111\u1EB7t h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.EditList=[],yield this.ngOnInit()}})}statusDetails=[];ListImportData=[];FilterNhacungcap=[];ImportConfig={selectedDate:new Date,selectedKho:"",ListKho:[]};ImporExcel(n){return L(this,null,function*(){let t=Array.from(n.target.files),e=0,a=0,s=0;this.ListImportData=[],this.statusDetails=[],this.ListImportExcel=[],yield this._NhacungcapService.getAllNhacungcap({pageSize:99999}),yield this._SanphamService.getAllSanpham({pageSize:99999});for(let p=0;p<t.length;p++){let _=t[p];try{let S=yield ye(_);if(console.log("Excel data:",S),S&&S.Sheet1&&S.Sheet1.length>0){let b=this.processImportData(S.Sheet1,_.name);console.log("Processed data:",b),b.length>0?(this.ListImportExcel.push(...b),e++):a++}else a++,this.statusDetails.push({fileName:_.name,status:"Skipped",message:"No valid data found"})}catch(S){console.error("Error processing file:",S),s++,this.statusDetails.push({fileName:_.name,status:"Error",message:S.message})}}this.ListImportExcel.length>0?(this.ImportConfig.selectedDate=new Date,this.dialog.open(this.dialogImportExcel,{width:"95vw",maxWidth:"1400px",height:"95vh",disableClose:!0})):this.dialog.open(this.dialogImportExcelCu,{width:"90vw",maxWidth:"1200px",height:"90vh"}),this._snackBar.open(`X\u1EED l\xFD ${t.length} file: ${e} th\xE0nh c\xF4ng, ${a} b\u1ECF qua, ${s} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),n.target.value=""})}processImportData(n,t){let e=this._NhacungcapService.ListNhacungcap(),a=this._SanphamService.ListSanpham(),s=[];console.log("data:",n);try{let p={};for(let _ of n)!_.mancc||!_.masp||(p[_.mancc]||(p[_.mancc]=[]),p[_.mancc].push(_));for(let[_,S]of Object.entries(p)){let b=e.find(x=>x.mancc===_);if(console.log(`Processing supplier: ${_}`,b),!b){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y nh\xE0 cung c\u1EA5p: ${_}`,mancc:_});continue}let z=[],Be=!1;for(let x of S){let k=a.find(q=>q.masp===x.masp);if(!k){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y s\u1EA3n ph\u1EA9m: ${x.masp}`,mancc:_,masp:x.masp}),Be=!0;continue}z.push({sanpham:{id:k.id,masp:k.masp,title:k.title,dvt:k.dvt||""},sldat:Number(x.sldat)||0,slgiao:Number(x.slgiao)||0,slnhan:Number(x.slnhan)||0,ghichu:x.ghichu||"",originalData:x}),this.statusDetails.push({fileName:t,status:"Processed",message:`\u0110\xE3 x\u1EED l\xFD: ${k.title} - SL: ${x.sldat}`,mancc:_,masp:x.masp})}if(z.length>0){let x=S[0],k=new Date;if(x.ngaynhan)try{let[R,G,$e]=x.ngaynhan.split("/");k=(0,w.default)(`${$e}-${G}-${R}`,"YYYY-MM-DD").toDate()}catch(R){console.warn("Error parsing date, using current date:",R)}let q={id:`temp_${_}_${Date.now()}`,title:`\u0110\u01A1n h\xE0ng ${x.ngaynhan||(0,w.default)().format("DD/MM/YYYY")} - ${b.name}`,ngaynhan:k,nhacungcapId:b.id,nhacungcap:b,makho:x.makho||"",status:"dathang",sanpham:z,ghichu:"",fileName:t,configOptions:{canChangeDate:!0,canChangeKho:!0,selectedDate:k,selectedKho:x.makho||"",confirmed:!1},summary:{totalProducts:z.length,totalQuantity:z.reduce((R,G)=>R+G.sldat,0),supplierCode:_,supplierName:b.name}};s.push(q)}}console.log("Processed orders:",s)}catch(p){console.error("Error processing import data:",p),this.statusDetails.push({fileName:t,status:"Error",message:p.message})}return s}generateOrderCode(n){let t=(0,w.default)().format("YYYYMMDD"),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`DH${n}-${t}-${e}`}updateOrderDate(n,t){n.ngaynhan=t,n.configOptions.selectedDate=t,n.title=`\u0110\u01A1n h\xE0ng ${(0,w.default)(t).format("DD/MM/YYYY")} - ${n.nhacungcap.name}`}updateOrderKho(n,t){n.makho=t,n.configOptions.selectedKho=t}updateAllOrdersDate(n){this.ImportConfig.selectedDate=n,this.ListImportExcel.forEach(t=>{this.updateOrderDate(t,n)})}updateAllOrdersKho(n){this.ImportConfig.selectedKho=n,this.ListImportExcel.forEach(t=>{this.updateOrderKho(t,n)})}toggleOrderConfirmation(n){n.configOptions.confirmed=!n.configOptions.confirmed}toggleAllOrdersConfirmation(){let n=this.ListImportExcel.every(t=>t.configOptions.confirmed);this.ListImportExcel.forEach(t=>{t.configOptions.confirmed=!n})}getConfirmedOrdersCount(){return this.ListImportExcel.filter(n=>n.configOptions.confirmed).length}ImportConfirmedDathang(){return L(this,null,function*(){let n=this.ListImportExcel.filter(t=>t.configOptions.confirmed);if(n.length===0){this._snackBar.open("Vui l\xF2ng x\xE1c nh\u1EADn \xEDt nh\u1EA5t m\u1ED9t \u0111\u01A1n h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}try{let t=n.map(a=>({title:a.title,ngaynhan:a.ngaynhan,nhacungcapId:a.nhacungcapId,makho:a.makho,status:a.status,sanpham:a.sanpham.map(s=>({sanpham:s.sanpham,sldat:s.sldat,slgiao:s.slgiao,slnhan:s.slnhan,ghichu:s.ghichu})),ghichu:a.ghichu})),e=yield this._DathangService.ImportDathang(t);this._snackBar.open(`Import th\xE0nh c\xF4ng: ${e.success} \u0111\u01A1n h\xE0ng, ${e.fail} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.dialog.closeAll(),yield this.ngOnInit()}catch(t){console.error("L\u1ED7i khi import \u0111\u1EB7t h\xE0ng:",t),this._snackBar.open(`L\u1ED7i khi import: ${t.message}`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}removeOrderFromImport(n){this.ListImportExcel=this.ListImportExcel.filter(t=>t.id!==n.id),this.ListImportExcel.length===0&&this.dialog.closeAll()}DoChonNgaynhan(n,t){let e=n.value;t&&t!=="All"?t.ngaynhan=(0,w.default)(e).format("YYYY-MM-DD"):this.ListImportExcel.forEach(a=>{a.details?.forEach(s=>{s.ngaynhan=(0,w.default)(e).format("YYYY-MM-DD")})})}removeItemImport(n){this.ListImportExcel.forEach(t=>{t.details&&(t.details=t.details.filter(e=>e!==n))}),this.ListImportExcel=this.ListImportExcel.filter(t=>t.details&&t.details.length>0)}SelectNhacungcap(n,t){let e=t.value;n.nhacungcap=e,n.manhacungcap=e?.id||e?.manhacungcap}DoFindNhacungcap(n,t){let e=n.target.value.toLowerCase();this.suppliers=this.suppliers.filter(a=>a.name?.toLowerCase().includes(e)||a.manhacungcap?.toLowerCase().includes(e))}DoImportNhacungcapCu(){this.ImportConfirmedDathang()}getTotalQuantity(n){return!n.details||!Array.isArray(n.details)?0:n.details.reduce((t,e)=>t+(parseFloat(e.soluong||"0")||0),0)}static \u0275fac=function(t){return new(t||A)};static \u0275cmp=it({type:A,selectors:[["app-listdathang"]],viewQuery:function(t,e){if(t&1&&(O(ie,5),O(X,5),O(Ye,7),O(Ke,5),O(He,5)),t&2){let a;B(a=$())&&(e.paginator=a.first),B(a=$())&&(e.sort=a.first),B(a=$())&&(e.drawer=a.first),B(a=$())&&(e.dialogImportExcel=a.first),B(a=$())&&(e.dialogImportExcelCu=a.first)}},decls:104,vars:32,consts:[["drawer",""],["uploadfile",""],["menu","matMenu"],["pickerBatdau",""],["pickerKetthuc",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["DathangDialog",""],["dialogImportExcelCu",""],["dialogImportExcel",""],["picker",""],["globalDatePicker",""],["orderDatePicker",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["multiple","","type","file",1,"hidden",3,"change"],["mat-icon-button","","color","primary",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[3,"appearance","subscriptSizing"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click",4,"ngIf"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["mat-dialog-title",""],[1,"mat-typography"],[1,"w-full"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","shadow-md","rounded-lg"],[1,"bg-gray-50"],[1,"w-16","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"min-w-[350px]","px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-48","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["matInput","",3,"dateChange","matDatepicker"],[1,"w-40","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-24","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-32","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],["align","end"],["mat-flat-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"click"],[1,"w-16","px-4","py-4","whitespace-nowrap","text-gray-900","items-center"],[1,"min-w-[350px]","px-6","py-4","whitespace-nowrap","text-gray-900"],[1,"w-48","px-4","py-4","whitespace-nowrap","text-gray-900"],[1,"w-40","px-4","py-4","whitespace-nowrap","text-sm","text-gray-900","truncate"],[1,"w-24","px-4","py-4","whitespace-nowrap","text-sm"],[3,"ngClass"],[1,"w-32","px-4","py-4","whitespace-nowrap","text-sm","text-gray-500","truncate"],["mat-icon-button","","color","warn",3,"click"],[3,"selectionChange"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[1,"!whitespace-normal","!h-auto","!py-2",3,"value"],["matInput","",3,"dateChange","ngModel","matDatepicker"],["mat-dialog-title","",1,"flex","items-center","justify-between"],[1,"text-sm","font-normal","text-gray-600"],[1,"!max-h-[90vh]","h-[90vh]","!p-0"],[1,"h-full","flex","flex-col"],[1,"border-b","p-4","bg-gray-50"],[1,"flex","flex-wrap","gap-4","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[200px]"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matInput","","placeholder","VD: TG-LA",3,"ngModelChange","ngModel"],[1,"flex-1","overflow-auto","p-4"],[1,"grid","gap-4"],[1,"border","rounded-lg","p-4",3,"ngClass"],[1,"text-center","py-8"],[1,"border-t","p-4",3,"align"],[1,"flex","items-center","justify-between","w-full"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[3,"ngModelChange","change","ngModel"],[1,"font-semibold","text-lg"],["mat-icon-button","","color","warn","matTooltip","X\xF3a \u0111\u01A1n h\xE0ng n\xE0y",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"min-w-full","border","border-gray-200","text-sm"],[1,"bg-gray-100"],[1,"px-3","py-2","text-left","font-medium","text-gray-700"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-3","py-2"],[1,"px-3","py-2","font-mono"],[1,"px-3","py-2","font-semibold","text-blue-600"],[1,"px-3","py-2","text-gray-600"],["colspan","8",1,"px-3","py-4","text-center","text-gray-500"],[1,"text-gray-500","text-lg","mb-2"],[1,"text-gray-400"]],template:function(t,e){if(t&1){let a=E();i(0,"mat-drawer-container",14)(1,"mat-drawer",15,0),M(3,"router-outlet"),o(),i(4,"div",16)(5,"div",17)(6,"div",18)(7,"div",19)(8,"input",20),h("keyup",function(p){return u(a),d(e.applyFilter(p))}),o(),i(9,"div",21)(10,"span",22),l(11,"search"),o()()(),i(12,"button",23),h("click",function(){return u(a),d(e.create())}),i(13,"mat-icon"),l(14,"add_circle"),o(),i(15,"span",24),l(16,"T\u1EA1o M\u1EDBi"),o()(),i(17,"div",18)(18,"button",25),h("click",function(){u(a);let p=D(22);return d(p.click())}),i(19,"mat-icon"),l(20,"file_upload"),o()(),i(21,"input",26,1),h("change",function(p){return u(a),d(e.ImporExcel(p))}),o(),i(23,"button",27),h("click",function(){return u(a),d(e.ExportExcel())}),i(24,"mat-icon"),l(25,"download"),o()(),i(26,"button",28)(27,"mat-icon"),l(28,"tune"),o()(),i(29,"mat-menu",null,2)(31,"div",29)(32,"mat-form-field",30)(33,"input",31),h("input",function(p){return u(a),d(e.doFilterColumns(p))})("click",function(p){return u(a),d(p.stopPropagation())}),o(),i(34,"mat-icon",32),l(35,"search"),o()()(),i(36,"div",33),N(37,qe,5,2,"button",34,je),o()()(),y(39,Ue,2,2),o()(),i(40,"div",18)(41,"mat-form-field",35)(42,"mat-label"),l(43,"B\u1EAFt \u0110\u1EA7u"),o(),i(44,"input",36),F("ngModelChange",function(p){return u(a),T(e.searchParam.Batdau,p)||(e.searchParam.Batdau=p),d(p)}),o(),M(45,"mat-datepicker-toggle",37)(46,"mat-datepicker",null,3),o(),i(48,"mat-form-field",35)(49,"mat-label"),l(50,"K\u1EBFt Th\xFAc"),o(),i(51,"input",36),F("ngModelChange",function(p){return u(a),T(e.searchParam.Ketthuc,p)||(e.searchParam.Ketthuc=p),d(p)}),o(),M(52,"mat-datepicker-toggle",37)(53,"mat-datepicker",null,4),o(),i(55,"button",27),h("click",function(){return u(a),d(e.onDateChange())}),i(56,"mat-icon"),l(57,"search"),o()()(),i(58,"div",38)(59,"table",39),N(60,hn,3,1,"ng-container",40,ot),y(62,_n,1,0,"tr",41)(63,fn,1,3,"tr",42)(64,xn,3,0,"tr",43),o()(),i(65,"div",44)(66,"div",45)(67,"span",46),l(68,"\u0110ang Xem "),i(69,"strong"),l(70),o(),l(71," - "),i(72,"strong"),l(73),o(),l(74),o(),i(75,"div",47)(76,"span",48,5),l(78),o(),i(79,"mat-menu",null,6)(81,"div",49),h("click",function(p){return u(a),d(p.stopPropagation())}),i(82,"mat-form-field",50)(83,"mat-label"),l(84,"S\u1ED1 l\u01B0\u1EE3ng"),o(),i(85,"input",51),F("ngModelChange",function(p){return u(a),T(e.pageSize,p)||(e.pageSize=p),d(p)}),o()(),i(86,"button",27),h("click",function(){u(a);let p=D(77);return d(e.onPageSizeChange(e.pageSize(),p))}),i(87,"mat-icon"),l(88,"published_with_changes"),o()()()(),i(89,"div",52)(90,"button",53),h("click",function(){return u(a),d(e.onPreviousPage())}),i(91,"mat-icon"),l(92,"keyboard_arrow_left"),o()(),i(93,"button",53),h("click",function(){return u(a),d(e.onNextPage())}),i(94,"mat-icon"),l(95,"keyboard_arrow_right"),o()()()()()()()(),y(96,Cn,11,0,"ng-template",null,7,Y)(98,yn,11,0,"ng-template",null,8,Y)(100,bn,36,3,"ng-template",null,9,Y)(102,Tn,38,14,"ng-template",null,10,Y)}if(t&2){let a=D(30),s=D(47),p=D(54),_=D(80);m(),g("position","end"),m(25),g("matMenuTriggerFor",a),m(11),P(e.FilterColumns),m(2),V(e.EditList.length>0?39:-1),m(2),g("appearance","outline")("subscriptSizing","dynamic"),m(3),g("matDatepicker",s),I("ngModel",e.searchParam.Batdau),g("ngModelOptions",W(29,tt)),m(),g("for",s),m(3),g("appearance","outline")("subscriptSizing","dynamic"),m(3),g("matDatepicker",p),I("ngModel",e.searchParam.Ketthuc),g("ngModelOptions",W(30,tt)),m(),g("for",p),m(7),g("dataSource",e.dataSource),m(),P(e.displayedColumns),m(2),g("matHeaderRowDef",e.displayedColumns),m(),g("matRowDefColumns",e.displayedColumns),m(7),f((e.page()-1)*e.pageSize()+1),m(3),f(e.page()*e.pageSize()>e.total()?e.total():e.page()*e.pageSize()),m(),J(" trong s\u1ED1 ",e.total()," m\u1EE5c, ",e.page(),"/",e.pageCount()," Trang"),m(2),g("matMenuTriggerFor",_),m(2),C("Hi\u1EC7n Th\u1ECB : ",e.pageSize()," m\u1EE5c"),m(7),I("ngModel",e.pageSize),g("ngModelOptions",W(31,tt)),m(5),g("disabled",e.page()===1),m(3),g("disabled",e.page()===e.pageCount())}},dependencies:[Gt,qt,Qt,jt,Xt,Ut,Jt,xe,le,me,de,ce,se,ge,pe,ue,he,_e,fe,re,X,oe,ae,At,Ft,Tt,Vt,Mt,bt,kt,_t,It,Lt,St,Dt,wt,te,Zt,Et,ht,pt,ut,dt,gt,$t,Pt,Ot,Bt,ne,ee,Ae,Ve,ve,De,we,Se,yt,Wt,Rt,Yt,Ht,Kt,Nt,ke],encapsulation:2,changeDetection:0})};K([Z(500)],A.prototype,"applyFilter",1),K([be()],A.prototype,"FilterHederColumn",1),K([Z(300)],A.prototype,"doFilterHederColumn",1);var Pe=A;export{Pe as a};
