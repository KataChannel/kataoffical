import{m as R,n as j,q as U}from"./chunk-7YK4IZ67.js";import{$b as u,A as w,Ab as S,Bb as I,Ga as _,Gb as F,Ha as x,Ic as A,Pb as P,Pc as Q,Qb as l,Sb as B,ac as h,fc as E,ga as T,kc as b,mc as m,nb as d,pb as v,pc as L,rb as N,rc as Z,sb as D,sc as z,tc as y,ua as a,uc as C,va as p,xc as k,yc as M,zb as O,zc as V}from"./chunk-4NDLGA7M.js";var q=["fileSelector"],G=r=>({openFileSelector:r});function H(r,g){if(r&1&&(u(0,"div",8),M(1),h()),r&2){let e=m(2);d(),V(e.dropZoneLabel)}}function $(r,g){if(r&1){let e=E();u(0,"div")(1,"input",9),b("click",function(i){a(e);let n=m(2);return p(n.openFileSelector(i))}),h()()}if(r&2){let e=m(2);d(),L("value",e.browseBtnLabel),l("className",e.browseBtnClassName)}}function J(r,g){if(r&1&&F(0,H,2,1,"div",6)(1,$,2,2,"div",7),r&2){let e=m();l("ngIf",e.dropZoneLabel),d(),l("ngIf",e.showBrowseBtn)}}function K(r,g){}var f=class{constructor(g,e){this.relativePath=g,this.fileEntry=e}},W=(()=>{class r{constructor(e){this.template=e}static{this.\u0275fac=function(t){return new(t||r)(D(v))}}static{this.\u0275dir=I({type:r,selectors:[["","ngx-file-drop-content-tmp",""]],standalone:!1})}}return r})(),X=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e!=null&&`${e}`!="false"}constructor(e,t){this.zone=e,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new _,this.onFileOver=new _,this.onFileLeave=new _,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=i=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",i=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",i=>{this.globalDraggingInProgress=!1})}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(e){this.useDragEnter?(this.preventAndStop(e),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")):!this.isDropzoneDisabled()&&!this.useDragEnter&&e.dataTransfer&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e),e.dataTransfer.dropEffect="copy")}onDragEnter(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragLeave(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}dropFiles(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){let t;e.dataTransfer.items?t=e.dataTransfer.items:t=e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}}uploadFiles(e){if(!this.isDropzoneDisabled()&&e.target){let t=e.target.files||[];this.checkFiles(t),this.resetFileInput()}}getFakeDropEntry(e){let t={name:e.name,isDirectory:!1,isFile:!0,file:i=>i(e)};return new f(t.name,t)}checkFile(e){if(e){if("webkitGetAsEntry"in e){let t=e.webkitGetAsEntry();if(t){if(t.isFile){let i=new f(t.name,t);this.addToQueue(i)}else t.isDirectory&&this.traverseFileTree(t,t.name);return}}this.addToQueue(this.getFakeDropEntry(e))}}checkFiles(e){for(let t=0;t<e.length;t++)this.checkFile(e[t]);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=w(200,200).subscribe(()=>{if(this.files.length>0&&this.numOfActiveReadEntries===0){let t=this.files;this.files=[],this.onFileDrop.emit(t)}})}traverseFileTree(e,t){if(e.isFile){let i=new f(t,e);this.files.push(i)}else{t=t+"/";let i=e.createReader(),n=[],s=()=>{this.numOfActiveReadEntries++,i.readEntries(o=>{if(o.length)n=n.concat(o),s();else if(n.length===0){let c=new f(t,e);this.zone.run(()=>{this.addToQueue(c)})}else for(let c=0;c<n.length;c++)this.zone.run(()=>{this.traverseFileTree(n[c],t+n[c].name)});this.numOfActiveReadEntries--})};s()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){let e=this.fileSelector.nativeElement,t=e.parentElement,i=this.getHelperFormElement(),n=this.getFileInputPlaceholderElement();t!==i&&(this.renderer.insertBefore(t,n,e),this.renderer.appendChild(i,e),i.reset(),this.renderer.insertBefore(t,e,n),this.renderer.removeChild(t,n))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(e){this.files.push(e)}preventAndStop(e){e.stopPropagation(),e.preventDefault()}static{this.\u0275fac=function(t){return new(t||r)(D(x),D(N))}}static{this.\u0275cmp=O({type:r,selectors:[["ngx-file-drop"]],contentQueries:function(t,i,n){if(t&1&&Z(n,W,5,v),t&2){let s;y(s=C())&&(i.contentTemplate=s.first)}},viewQuery:function(t,i){if(t&1&&z(q,7),t&2){let n;y(n=C())&&(i.fileSelector=n.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},standalone:!1,decls:7,vars:15,consts:[["fileSelector",""],["defaultContentTemplate",""],[3,"drop","dragover","dragenter","dragleave","className"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"change","accept","multiple"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"click","className","value"]],template:function(t,i){if(t&1){let n=E();u(0,"div",2),b("drop",function(o){return a(n),p(i.dropFiles(o))})("dragover",function(o){return a(n),p(i.onDragOver(o))})("dragenter",function(o){return a(n),p(i.onDragEnter(o))})("dragleave",function(o){return a(n),p(i.onDragLeave(o))}),u(1,"div",3)(2,"input",4,0),b("change",function(o){return a(n),p(i.uploadFiles(o))}),h(),F(4,J,2,2,"ng-template",null,1,Q)(6,K,0,0,"ng-template",5),h()()}if(t&2){let n=k(5);B("ngx-file-drop__drop-zone--over",i.isDraggingOverDropZone),l("className",i.dropZoneClassName),d(),l("className",i.contentClassName),d(),l("accept",i.accept)("multiple",i.multiple),P("directory",i.directory||void 0)("webkitdirectory",i.directory||void 0)("mozdirectory",i.directory||void 0)("msdirectory",i.directory||void 0)("odirectory",i.directory||void 0),d(4),l("ngTemplateOutlet",i.contentTemplate||n)("ngTemplateOutletContext",A(13,G,i.openFileSelector))}},dependencies:[R,j],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{height:100px;margin:auto;border:2px dotted #0782d0;border-radius:30px}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:#93939380}.ngx-file-drop__content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100px;color:#0782d0}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]})}}return r})(),ce=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=S({type:r,bootstrap:[X]})}static{this.\u0275inj=T({imports:[U]})}}return r})();export{W as a,X as b,ce as c};
