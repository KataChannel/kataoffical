import{a as Ke,b as xe,c as Ce}from"./chunk-342AWNMG.js";import{a as De,b as ve}from"./chunk-Z7365N65.js";import{a as Ee}from"./chunk-NIMXNG65.js";import"./chunk-DFEBKCCY.js";import"./chunk-RRZ644JX.js";import"./chunk-Z4HIZU65.js";import{b as _e}from"./chunk-NULFSBS2.js";import{a as me,b as de}from"./chunk-RLTNMUN6.js";import"./chunk-ESCBPH3J.js";import"./chunk-OVJKPLRU.js";import"./chunk-2PVH7Z6P.js";import"./chunk-SAM22JC7.js";import{h as ae}from"./chunk-EJAZH3JY.js";import{d as pe}from"./chunk-SUUFLDBI.js";import{a as ge}from"./chunk-ZW44ZSN2.js";import"./chunk-Z2ZDGSWT.js";import"./chunk-UQRYBWA2.js";import"./chunk-Q7E7WSHM.js";import{b as fe}from"./chunk-EPAD3OFC.js";import"./chunk-AZMUMNOS.js";import"./chunk-IDXNS6DX.js";import"./chunk-YGTKRZ2Q.js";import"./chunk-POPZSE3V.js";import{a as ue,b as se}from"./chunk-POHUA43U.js";import{n as ne,p as le,v as re,w as he,y as oe,z as ce}from"./chunk-A3B3GZND.js";import"./chunk-AW6ETFJX.js";import{a as te,b as ie}from"./chunk-MGAKVDEP.js";import{a as ee}from"./chunk-CBIWJPH2.js";import"./chunk-2NDWID3Z.js";import"./chunk-KMDUY2WI.js";import"./chunk-2PPFUFFT.js";import{a as U,c as Y,e as Z}from"./chunk-K4TPENAW.js";import{ka as J}from"./chunk-27DT4LBZ.js";import{a as W,c as X}from"./chunk-VF6Z3BLE.js";import"./chunk-HB5OTZ3Y.js";import{l as q,m as z,v as Q}from"./chunk-CNCZQRZQ.js";import{Cc as P,Db as N,Dc as c,Ec as k,Fc as $,Gc as O,Kb as C,Mc as w,Oc as R,Ra as x,Ub as u,ec as n,fc as l,hc as b,ic as S,kc as v,ld as j,pa as D,pc as s,rb as o,rc as p,ya as g,za as m}from"./chunk-TAKLKH4V.js";import{a as d,b as _,h as H,j as E}from"./chunk-WJTR2IJE.js";var Se=()=>({value:"khachsi",title:"Kh\xE1ch S\u1EC9"}),ke=()=>({value:"khachle",title:"Kh\xE1ch L\u1EBB"}),we=(f,t)=>[f,t];function Ve(f,t){if(f&1){let e=v();n(0,"button",2),s("click",function(){g(e);let i=p();return m(i.handleKhachhangAction())}),n(1,"mat-icon"),c(2,"save"),l()()}}function Be(f,t){if(f&1){let e=v();n(0,"button",2),s("click",function(){g(e);let i=p();return m(i.toggleEdit())}),n(1,"mat-icon"),c(2,"edit"),l()()}}function Te(f,t){if(f&1){let e=v();b(0),n(1,"div",10)(2,"div",11),c(3,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),l(),n(4,"div",12)(5,"button",13),s("click",function(){g(e);let i=p();return m(i.DeleteData())}),c(6,"\u0110\u1ED3ng \xDD"),l(),n(7,"button",14),s("click",function(){g(e);let i=p();return m(i.toggleDelete())}),c(8,"Hu\u1EF7 B\u1ECF"),l()()(),S()}}function Ie(f,t){if(f&1&&(n(0,"mat-option",33),c(1),l()),f&2){let e=t.$implicit;u("value",e.value),o(),$(" ",e.title," ")}}function Ae(f,t){if(f&1){let e=v();n(0,"mat-option",34),s("click",function(){let i=g(e).$implicit,r=p(2);return m(r.onBanggiaSelected(i))}),c(1),l()}if(f&2){let e=t.$implicit;u("value",e),o(),O(" ",e.title," - ",e.mabanggia," ")}}function Fe(f,t){if(f&1){let e=v();b(0),n(1,"div",15)(2,"mat-form-field",16)(3,"mat-label"),c(4,"T\xEAn Kh\xE1ch H\xE0ng"),l(),n(5,"input",17),s("input",function(i){g(e);let r=p();return m(r.updateName(i))})("keyup",function(){g(e);let i=p();return m(i.autoSubtitle())}),l()(),n(6,"mat-form-field",16)(7,"mat-label"),c(8,"Vi\u1EBFt T\u1EAFt"),l(),n(9,"input",18),s("input",function(i){g(e);let r=p();return m(r.updateSubtitle(i))}),l()(),n(10,"mat-form-field",16)(11,"mat-label"),c(12,"T\xEAn File"),l(),n(13,"input",19),s("input",function(i){g(e);let r=p();return m(r.updateTenfile(i))}),l()(),n(14,"mat-form-field",16)(15,"mat-label"),c(16,"Lo\u1EA1i Kh\xE1ch H\xE0ng"),l(),n(17,"mat-select",20),s("selectionChange",function(i){g(e);let r=p();return m(r.updateLoaikh(i))}),C(18,Ie,2,2,"mat-option",21),l()(),n(19,"mat-form-field",16)(20,"mat-label"),c(21,"Email"),l(),n(22,"input",22),s("input",function(i){g(e);let r=p();return m(r.updateEmail(i))}),l()(),n(23,"mat-form-field",16)(24,"mat-label"),c(25,"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i"),l(),n(26,"input",23),s("input",function(i){g(e);let r=p();return m(r.updateSdt(i))}),l()(),n(27,"mat-form-field",16)(28,"mat-label"),c(29,"M\xE3 S\u1ED1 Thu\u1EBF"),l(),n(30,"input",24),s("input",function(i){g(e);let r=p();return m(r.updateMst(i))}),l()(),n(31,"mat-form-field",16)(32,"mat-label"),c(33,"Gi\u1EDD Nh\u1EADn H\xE0ng"),l(),n(34,"input",25),s("input",function(i){g(e);let r=p();return m(r.updateGionhanhang(i))}),l()(),n(35,"mat-form-field",16)(36,"mat-label"),c(37,"\u0110\u1ECBa Ch\u1EC9"),l(),n(38,"input",26),s("input",function(i){g(e);let r=p();return m(r.updateDiachi(i))}),l()(),n(39,"mat-form-field",16)(40,"mat-label"),c(41,"Qu\u1EADn"),l(),n(42,"input",27),s("input",function(i){g(e);let r=p();return m(r.updateQuan(i))}),l()(),n(43,"mat-form-field",16)(44,"mat-label"),c(45,"B\u1EA3ng Gi\xE1"),l(),n(46,"input",28),s("input",function(i){g(e);let r=p();return m(r.onBanggiaInput(i))}),l(),n(47,"mat-autocomplete",29,0),C(49,Ae,2,3,"mat-option",30),l()(),n(50,"mat-slide-toggle",31),s("change",function(i){g(e);let r=p();return m(r.updateHiengia(i))}),c(51,"Hi\u1EC7n Gi\xE1"),l(),n(52,"mat-slide-toggle",31),s("change",function(i){g(e);let r=p();return m(r.updateIstitle2(i))}),c(53,"Hi\u1EC7n T\xEAn S\u1EA3n Ph\u1EA9m 2"),l(),n(54,"mat-slide-toggle",31),s("change",function(i){g(e);let r=p();return m(r.updateIsshowvat(i))}),c(55,"Hi\u1EC7n VAT"),l(),n(56,"mat-form-field",16)(57,"mat-label"),c(58,"Ghi Ch\xFA"),l(),n(59,"textarea",32),s("input",function(i){g(e);let r=p();return m(r.updateGhichu(i))}),l()()(),S()}if(f&2){let e,a,i,r,K,V,B,T,I,A,F,M,L,G,be=P(48),h=p();o(5),u("value",((e=h.DetailKhachhang())==null?null:e.name)||"")("disabled",!h.isEdit()),o(4),u("value",((a=h.DetailKhachhang())==null?null:a.subtitle)||"")("disabled",!h.isEdit()),o(4),u("value",((i=h.DetailKhachhang())==null?null:i.tenfile)||"")("disabled",!h.isEdit()),o(4),u("value",(r=h.DetailKhachhang())==null?null:r.loaikh)("disabled",!h.isEdit()),o(),u("ngForOf",R(36,we,w(34,Se),w(35,ke))),o(4),u("value",((K=h.DetailKhachhang())==null?null:K.email)||"")("disabled",!h.isEdit()),o(4),u("value",((V=h.DetailKhachhang())==null?null:V.sdt)||"")("disabled",!h.isEdit()),o(4),u("value",((B=h.DetailKhachhang())==null?null:B.mst)||"")("disabled",!h.isEdit()),o(4),u("value",((T=h.DetailKhachhang())==null?null:T.gionhanhang)||"")("disabled",!h.isEdit()),o(4),u("value",((I=h.DetailKhachhang())==null?null:I.diachi)||"")("disabled",!h.isEdit()),o(4),u("value",((A=h.DetailKhachhang())==null?null:A.quan)||"")("disabled",!h.isEdit()),o(4),u("value",h.getSelectedBanggiaTitle())("matAutocomplete",be)("disabled",!h.isEdit()),o(),u("displayWith",h.displayBanggia),o(2),u("ngForOf",h.filteredBanggia()),o(),u("checked",(F=h.DetailKhachhang())==null?null:F.hiengia)("disabled",!h.isEdit()),o(2),u("checked",(M=h.DetailKhachhang())==null?null:M.istitle2)("disabled",!h.isEdit()),o(2),u("checked",(L=h.DetailKhachhang())==null?null:L.isshowvat)("disabled",!h.isEdit()),o(5),u("value",((G=h.DetailKhachhang())==null?null:G.ghichu)||"")("disabled",!h.isEdit())}}var y=class y{_ListkhachhangComponent=D(ve);_KhachhangService=D(De);_BanggiaService=D(Ee);_route=D(W);_router=D(X);_snackBar=D(ee);DetailKhachhang=this._KhachhangService.DetailKhachhang;loading=this._KhachhangService.loading;error=this._KhachhangService.error;ListFilter=[];filterItem=[];isEdit=x(!1);isDelete=x(!1);khachhangId=this._KhachhangService.khachhangId;filteredBanggia=x([]);selectedBanggia=x(null);constructor(){this._route.paramMap.subscribe(t=>{let e=t.get("id");this._KhachhangService.setKhachhangId(e)}),j(()=>E(this,null,function*(){let t=this._KhachhangService.khachhangId();t||(this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()),t==="new"?(this.DetailKhachhang.set({loaikh:"khachsi"}),this._ListkhachhangComponent.drawer.open(),this.isEdit.update(e=>!e),this._router.navigate(["/admin/khachhang","new"])):(console.log("KhachhangId:",t),t&&(yield this._KhachhangService.getKhachhangById(t),this.ListFilter=this._KhachhangService.DetailKhachhang().banggia),this._ListkhachhangComponent.drawer.open(),this._router.navigate(["/admin/khachhang",t]))}))}ngOnInit(){return E(this,null,function*(){if(yield this._BanggiaService.getAllBanggia(),this.filterItem=this._BanggiaService.ListBanggia(),this.filteredBanggia.set(this._BanggiaService.ListBanggia()),this.DetailKhachhang()?.banggiaId){let t=this._BanggiaService.ListBanggia().find(e=>e.id===this.DetailKhachhang().banggiaId);this.selectedBanggia.set(t)}console.log("DetailKhachhang:",this.DetailKhachhang())})}handleKhachhangAction(){return E(this,null,function*(){this.khachhangId()==="new"?yield this.createKhachhang():yield this.updateKhachhang()})}autoSubtitle(){this.DetailKhachhang.update(t=>_(d({},t),{subtitle:ge(t.name||"")}))}createKhachhang(){return E(this,null,function*(){try{yield this._KhachhangService.createKhachhang(this.DetailKhachhang()),this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(t=>!t)}catch(t){console.error("L\u1ED7i khi t\u1EA1o khachhang:",t)}})}updateKhachhang(){return E(this,null,function*(){try{let t=this.DetailKhachhang(),e=this.khachhangId();e&&e!=="new"&&(yield this._KhachhangService.updateKhachhang(e,t),this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit.update(a=>!a))}catch(t){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt khachhang:",t)}})}DeleteData(){return E(this,null,function*(){try{let t=this.DetailKhachhang();t?.id&&(yield this._KhachhangService.deleteKhachhang(t.id),this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._router.navigate(["/admin/khachhang"]))}catch(t){console.error("L\u1ED7i khi x\xF3a khachhang:",t)}})}goBack(){this._router.navigate(["/admin/khachhang"]),this._ListkhachhangComponent.drawer.close()}trackByFn(t,e){return e.id}toggleEdit(){this.isEdit.update(t=>!t)}toggleDelete(){this.isDelete.update(t=>!t)}FillSlug(){this.DetailKhachhang.update(t=>(t.slug=pe(t.title),t))}DoOutFilter(t){this.DetailKhachhang.update(e=>(e.banggia=t,e))}onBanggiaInput(t){let e=t.target.value.toLowerCase(),a=this._BanggiaService.ListBanggia().filter(i=>i.title.toLowerCase().includes(e)||i.mabanggia?.toLowerCase().includes(e));this.filteredBanggia.set(a)}onBanggiaSelected(t){t&&(this.selectedBanggia.set(t),this.DetailKhachhang.update(e=>(e.banggiaId=t.id,e)))}getSelectedBanggiaTitle(){let t=this.selectedBanggia();if(t)return`${t.title} - ${t.mabanggia}`;if(this.DetailKhachhang()?.banggiaId){let e=this._BanggiaService.ListBanggia().find(a=>a.id===this.DetailKhachhang().banggiaId);if(e)return this.selectedBanggia.set(e),`${e.title} - ${e.mabanggia}`}return""}displayBanggia(t){return t?`${t.title} - ${t.mabanggia}`:""}updateHiengia(t){this.DetailKhachhang.update(e=>_(d({},e),{hiengia:t.checked}))}updateIstitle2(t){this.DetailKhachhang.update(e=>_(d({},e),{istitle2:t.checked}))}updateIsshowvat(t){this.DetailKhachhang.update(e=>_(d({},e),{isshowvat:t.checked}))}updateIsActive(t){this.DetailKhachhang.update(e=>_(d({},e),{isActive:t.checked}))}updateName(t){this.DetailKhachhang.update(e=>_(d({},e),{name:t.target.value}))}updateSubtitle(t){this.DetailKhachhang.update(e=>_(d({},e),{subtitle:t.target.value}))}updateTenfile(t){this.DetailKhachhang.update(e=>_(d({},e),{tenfile:t.target.value}))}updateLoaikh(t){this.DetailKhachhang.update(e=>_(d({},e),{loaikh:t.value}))}updateEmail(t){this.DetailKhachhang.update(e=>_(d({},e),{email:t.target.value}))}updateSdt(t){this.DetailKhachhang.update(e=>_(d({},e),{sdt:t.target.value}))}updateMst(t){this.DetailKhachhang.update(e=>_(d({},e),{mst:t.target.value}))}updateGionhanhang(t){this.DetailKhachhang.update(e=>_(d({},e),{gionhanhang:t.target.value}))}updateDiachi(t){this.DetailKhachhang.update(e=>_(d({},e),{diachi:t.target.value}))}updateQuan(t){this.DetailKhachhang.update(e=>_(d({},e),{quan:t.target.value}))}updateGhichu(t){this.DetailKhachhang.update(e=>_(d({},e),{ghichu:t.target.value}))}static \u0275fac=function(e){return new(e||y)};static \u0275cmp=N({type:y,selectors:[["app-detailkhachhang"]],decls:17,vars:8,consts:[["autoBanggia","matAutocomplete"],[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],[3,"change","checked","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[4,"ngIf"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","grid","grid-cols-2","gap-4"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn Kh\xE1ch H\xE0ng",3,"input","keyup","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Vi\u1EBFt T\u1EAFt",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp T\xEAn File",3,"input","value","disabled"],[3,"selectionChange","value","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Email",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp M\xE3 S\u1ED1 Thu\u1EBF",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Gi\u1EDD Nh\u1EADn H\xE0ng",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp \u0110\u1ECBa Ch\u1EC9",3,"input","value","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Qu\u1EADn",3,"input","value","disabled"],["matInput","","placeholder","T\xECm ki\u1EBFm b\u1EA3ng gi\xE1...",3,"input","value","matAutocomplete","disabled"],[3,"displayWith"],[3,"value","click",4,"ngFor","ngForOf"],["color","primary",3,"change","checked","disabled"],["matInput","","placeholder","Vui l\xF2ng nh\u1EADp Ghi Ch\xFA",3,"input","value","disabled"],[3,"value"],[3,"click","value"]],template:function(e,a){if(e&1&&(n(0,"div",1)(1,"button",2),s("click",function(){return a.goBack()}),n(2,"mat-icon"),c(3,"arrow_back"),l()(),n(4,"div",3),c(5),l(),n(6,"div",4)(7,"mat-slide-toggle",5),s("change",function(r){return a.updateIsActive(r)}),c(8),l(),C(9,Ve,3,0,"button",6)(10,Be,3,0,"button",6),n(11,"button",7),s("click",function(){return a.toggleDelete()}),n(12,"mat-icon"),c(13,"delete"),l()()()(),n(14,"div",8),C(15,Te,9,0,"ng-container",9)(16,Fe,60,39,"ng-container",9),l()),e&2){let i,r,K;o(5),k(((i=a.DetailKhachhang())==null?null:i.name)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),o(2),u("checked",(r=a.DetailKhachhang())==null?null:r.isActive)("disabled",!a.isEdit()),o(),k((K=a.DetailKhachhang())!=null&&K.isActive?"Hi\u1EC3n Th\u1ECB":"\u1EA8n"),o(),u("ngIf",a.isEdit()),o(),u("ngIf",!a.isEdit()),o(5),u("ngIf",a.isDelete()),o(),u("ngIf",!a.isDelete())}},dependencies:[he,re,le,ce,oe,ne,ie,te,Z,U,Y,se,ue,J,ae,Q,q,z,de,me,fe,Ce,Ke,xe],encapsulation:2})};H([_e(300)],y.prototype,"autoSubtitle",1);var ye=y;export{ye as DetailKhachhangComponent};
