import{a as O,b as X,c as Z}from"./chunk-DMZR44QL.js";import{a as R}from"./chunk-HJU6ORFX.js";import"./chunk-E5U5MSVV.js";import"./chunk-YWXC6CCQ.js";import"./chunk-FSCSPFQQ.js";import"./chunk-XRRQRA6S.js";import"./chunk-4ZVJO4SQ.js";import{a as k}from"./chunk-XHVJ7NZ3.js";import"./chunk-IE4L6KDU.js";import"./chunk-H7UDLENL.js";import"./chunk-Q3KOS33T.js";import"./chunk-YIK22J5U.js";import"./chunk-OJMQSPC3.js";import"./chunk-JNVUT6FC.js";import{b as N,g as B,j as G,n as U,p as L,s as W,v as j,w as z,y as H,z as V}from"./chunk-M2YCC4SP.js";import"./chunk-KBSHTQVA.js";import{a as I,b as T}from"./chunk-PYCEOLIX.js";import"./chunk-NBQTKVUV.js";import"./chunk-FME5K2LE.js";import"./chunk-2PPFUFFT.js";import{a as x,c as F,e as A}from"./chunk-BAEDUNPT.js";import"./chunk-DL37TIRW.js";import{k as P}from"./chunk-5LF7WV5H.js";import"./chunk-GKGVKDD5.js";import{Db as S,Dc as a,Ec as f,Ic as c,Jc as g,Kb as M,Kc as w,Ra as E,Tb as u,Ub as d,ec as i,fc as n,gc as _,kc as D,pa as h,pc as p,rb as s,wb as C,ya as b,za as v}from"./chunk-OL5DVADB.js";import"./chunk-LWLSKGAV.js";import"./chunk-6DYNGEAS.js";function K(m,l){if(m&1){let r=D();i(0,"div",23)(1,"span"),a(2,"Drop file Here"),n(),i(3,"span",24),p("click",function(){let o=b(r).openFileSelector;return v(o())}),a(4,"Ch\u1ECDn File"),n()()}}var q=class m{constructor(l){this.sanitizer=l}isLoading=!1;account={};isEditAvatar=!1;files=[];profile=E({});hideCurrentPassword=!0;hideNewPassword=!0;hideConfirmPassword=!0;user={oldpass:"",newpass:"",confirmnewpass:""};_UserService=h(k);_uploadService=h(R);Detail={};getTrustUrl(l){return this.sanitizer.bypassSecurityTrustResourceUrl(l)}handlePaste(l){this.isLoading=!0;let r=l.clipboardData?.items;if(r)for(let e=0;e<r.length;e++){let o=r[e];if(o.type.indexOf("image")!==-1){let t=o.getAsFile();if(t){console.log("Pasted image:",t);let J=new File([t],`${this.account.email.split("@")[0]}_${new Date().getTime()}.png`,{type:t.type});this._uploadService.uploadDriver(J).then(y=>{console.log(y),this.account.Avatar=y.fileId,this.isLoading=!1,this.isEditAvatar=!1,this._UserService.updateUser(this.account)})}}}}dropped(l){this.isLoading=!0,this.files=l;for(let r of l)r.fileEntry.isFile&&r.fileEntry.file(o=>{this._uploadService.uploadDriver(o).then(t=>{console.log(t),this.account.Avatar=t.fileId,this.isLoading=!1,this.isEditAvatar=!1,this._UserService.updateUser(this.account)})})}ChangePass(){if(console.log(this.user),!(this.user.oldpass==""||this.user.newpass==""||this.user.confirmnewpass=="")){if(this.user.newpass==this.user.confirmnewpass){let l={id:this._UserService.profile().id,oldpass:this.user.oldpass,newpass:this.user.newpass};this._UserService.changepass(l).then(r=>{r[0]==200&&(this.user={oldpass:"",newpass:"",confirmnewpass:""})})}}}static \u0275fac=function(r){return new(r||m)(C(P))};static \u0275cmp=S({type:m,selectors:[["app-general"]],decls:47,vars:16,consts:[[1,"w-full","h-full","lg:grid","lg:grid-cols-2","gap-8","p-2"],[1,"w-full","flex","flex-col","gap-4","rounded-lg","p-4","bg-slate-50"],[1,"text-lg","font-bold"],[1,"relative","w-40","h-40","cursor-pointer","rounded-full","bg-slate-300","p-2","mx-auto"],[1,"w-full","h-full"],[1,"w-full","h-full","rounded-full","absolute","opacity-0","group-hover:!opacity-80","bg-black","top-0","right-0","flex","flex-row","justify-center","space-x-2","items-center","py-3",3,"paste"],[1,"!relative"],["browseBtnLabel","Browse files","dropZoneLabel","Drag and drop your files here",1,"whitespace-nowrap",3,"onFileDrop","showBrowseBtn"],["ngx-file-drop-content-tmp",""],[1,"flex","flex-row","justify-center","items-center","gap-2"],["mat-flat-button","","color","primary",1,"flex","flex-row","gap-2"],["mat-flat-button","","color","warn",1,"flex","flex-row","gap-2"],[1,"w-full","rounded-lg","p-4","bg-slate-50"],[1,"w-full","flex","flex-col","gap-4"],[1,"grid","grid-cols-1","gap-2"],["appearance","outline",1,"w-full"],["matInput","","id","currentPassword","name","currentPassword",3,"ngModelChange","type","ngModel"],["mat-icon-button","","color","primary","matSuffix","",3,"click"],["matInput","","id","newPassword","name","newPassword",3,"ngModelChange","type","ngModel"],["matInput","","id","confirmPassword","name","confirmPassword",3,"ngModelChange","type","ngModel"],[1,"flex","justify-end"],["mat-flat-button","","color","primary","type","submit",1,"w-full","sm:w-auto",3,"click"],[1,"w-full","col-span-2","gap-4","rounded-lg","p-4","bg-slate-50"],[1,"!text-white","p-4","flex","flex-col","space-y-3"],[1,"font-bold","p-2","rounded-lg","border",3,"click"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"span",2),a(3,"H\xECnh \u0110\u1EA1i di\u1EC7n"),n(),i(4,"div",3),_(5,"div",4),i(6,"div",5),p("paste",function(t){return e.handlePaste(t)}),i(7,"div",6)(8,"ngx-file-drop",7),p("onFileDrop",function(t){return e.dropped(t)}),M(9,K,5,0,"ng-template",8),n()()()(),i(10,"div",9)(11,"button",10)(12,"span"),a(13,"Upload"),n()(),i(14,"button",11)(15,"span"),a(16,"Reset"),n()()()(),i(17,"div",12)(18,"div",13)(19,"span",2),a(20,"Thay \u0111\u1ED5i m\u1EADt kh\u1EA9u"),n(),i(21,"div",14)(22,"mat-form-field",15)(23,"mat-label"),a(24,"M\u1EADt kh\u1EA9u hi\u1EC7n t\u1EA1i"),n(),i(25,"input",16),w("ngModelChange",function(t){return g(e.user.oldpass,t)||(e.user.oldpass=t),t}),n(),i(26,"button",17),p("click",function(){return e.hideCurrentPassword=!e.hideCurrentPassword}),i(27,"mat-icon"),a(28),n()()(),i(29,"mat-form-field",15)(30,"mat-label"),a(31,"M\u1EADt kh\u1EA9u m\u1EDBi"),n(),i(32,"input",18),w("ngModelChange",function(t){return g(e.user.newpass,t)||(e.user.newpass=t),t}),n(),i(33,"button",17),p("click",function(){return e.hideNewPassword=!e.hideNewPassword}),i(34,"mat-icon"),a(35),n()()(),i(36,"mat-form-field",15)(37,"mat-label"),a(38,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi"),n(),i(39,"input",19),w("ngModelChange",function(t){return g(e.user.confirmnewpass,t)||(e.user.confirmnewpass=t),t}),n(),i(40,"button",17),p("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),i(41,"mat-icon"),a(42),n()()(),i(43,"div",20)(44,"button",21),p("click",function(){return e.ChangePass()}),a(45,"\u0110\u1ED5i m\u1EADt kh\u1EA9u"),n()()()()(),_(46,"div",22),n()),r&2&&(s(8),d("showBrowseBtn",!0),s(17),d("type",e.hideCurrentPassword?"password":"text"),c("ngModel",e.user.oldpass),s(),u("aria-label","Hide password")("aria-pressed",e.hideCurrentPassword),s(2),f(e.hideCurrentPassword?"visibility_off":"visibility"),s(4),d("type",e.hideNewPassword?"password":"text"),c("ngModel",e.user.newpass),s(),u("aria-label","Hide password")("aria-pressed",e.hideNewPassword),s(2),f(e.hideNewPassword?"visibility_off":"visibility"),s(4),d("type",e.hideConfirmPassword?"password":"text"),c("ngModel",e.user.confirmnewpass),s(),u("aria-label","Hide password")("aria-pressed",e.hideConfirmPassword),s(2),f(e.hideConfirmPassword?"visibility_off":"visibility"))},dependencies:[Z,X,O,z,j,L,W,V,H,A,x,F,U,N,B,G,T,I],encapsulation:2})};export{q as GeneralComponent};
