import{a as S}from"./chunk-YQ3XGS4L.js";import"./chunk-FLOPEQPR.js";import"./chunk-TDC46HHM.js";import"./chunk-PKTJEQ3B.js";import{b as R,c as W}from"./chunk-U3PIIE4W.js";import{b as T,c as z,g as V,h as j}from"./chunk-7WTJKXMY.js";import{b as A,f as F,g as I,h as B,i as L,j as N,o as O}from"./chunk-7C4ECVLS.js";import{a as x,b as D}from"./chunk-5SQUK3CW.js";import"./chunk-KDLSUHPH.js";import"./chunk-VR2W35LS.js";import{b as _}from"./chunk-DBWHEJBK.js";import"./chunk-SGYCFQGT.js";import"./chunk-LGNRZZPO.js";import{f as M,h as C}from"./chunk-7Q6IOVRA.js";import"./chunk-5IRBHD2O.js";import"./chunk-42KLW5LA.js";import"./chunk-Z6GF6IU5.js";import{c as P,d as k}from"./chunk-P2UNYZN7.js";import{j as v,p as y}from"./chunk-QPEFVQFW.js";import{$b as f,Ac as h,Bc as w,Cc as E,Fb as c,Fc as b,Pb as l,Zb as e,_b as o,hc as g,ka as m,mb as s,vc as n,zb as p}from"./chunk-5F46NTIF.js";import"./chunk-LWLSKGAV.js";import{j as d}from"./chunk-47CWAPKR.js";var U=()=>({standalone:!0});function q(r,t){r&1&&(e(0,"span"),n(1,"G\u1EEDi link \u0111\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u"),o())}function Y(r,t){r&1&&(e(0,"span"),n(1,"\u0110ang g\u1EEDi..."),o())}var G=class r{forgotPasswordData={email:"",phone:""};isLoading=!1;_snackBar=m(_);_userService=m(S);router=m(P);constructor(){}ngOnInit(){}onSubmit(){return d(this,null,function*(){if(!this.forgotPasswordData.email&&!this.forgotPasswordData.phone||this.forgotPasswordData.email===""&&this.forgotPasswordData.phone===""){this._snackBar.open("Vui l\xF2ng nh\u1EADp email ho\u1EB7c s\u1ED1 \u0111i\u1EC7n tho\u1EA1i","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]});return}this.isLoading=!0;try{let t=yield this._userService.forgotPassword(this.forgotPasswordData);if(t.success){let i="Y\xEAu c\u1EA7u \u0111\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u \u0111\xE3 \u0111\u01B0\u1EE3c x\u1EED l\xFD!";t.data?.emailSent?i=`Link \u0111\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u \u0111\xE3 \u0111\u01B0\u1EE3c g\u1EEDi \u0111\u1EBFn ${t.data.email}`:t.data?.resetToken&&(i="Token \u0111\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u \u0111\xE3 \u0111\u01B0\u1EE3c t\u1EA1o. Vui l\xF2ng ki\u1EC3m tra email ho\u1EB7c li\xEAn h\u1EC7 h\u1ED7 tr\u1EE3.",localStorage.setItem("resetToken",t.data.resetToken)),this._snackBar.open(i,"",{duration:8e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),setTimeout(()=>{this.router.navigate(["/loginctv"])},3e3)}else this._snackBar.open(t.message||"C\xF3 l\u1ED7i x\u1EA3y ra","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}catch(t){console.error("Forgot password error:",t),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.isLoading=!1}})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=p({type:r,selectors:[["app-forgot-password"]],decls:25,vars:6,consts:[[1,"relative","w-screen","h-screen","overflow-hidden","flex","flex-col","bg-slate-100"],[1,"flex","flex-row","items-center","justify-center"],[1,"flex","items-center","justify-center","lg:max-w-lg","w-full","h-full","absolute","-translate-x-1/2","-translate-y-1/2","top-1/2","left-1/2","p-4"],[1,"relative","w-full","grid","lg:grid-cols-1","gap-16","lg:p-16","p-8"],[1,"absolute","top-0","right-0","w-full","h-full","bg-white","opacity-80","rounded-lg","shadow-lg"],[1,"transition","duration-100","relative","flex","flex-col","space-y-6","items-center","mx-auto","lg:max-w-lg","w-full"],[1,"text-center"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-sm","text-gray-600"],[1,"w-full","space-y-4",3,"ngSubmit"],["subscriptSizing","dynamic","appearance","outline",1,"w-full"],["type","email","matInput","","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n",1,"w-full",3,"ngModelChange","ngModel","ngModelOptions"],["matPrefix","",1,"material-symbols-outlined"],[1,"w-full","space-y-4"],["type","submit","mat-raised-button","","color","primary",1,"w-full",3,"disabled"],[4,"ngIf"],["routerLink","/loginctv",1,"text-blue-500","cursor-pointer","font-medium","hover:underline"]],template:function(i,a){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f(4,"div",4),e(5,"div",5)(6,"div",6)(7,"h2",7),n(8,"Qu\xEAn m\u1EADt kh\u1EA9u?"),o(),e(9,"p",8),n(10,"Nh\u1EADp email ho\u1EB7c s\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EC3 nh\u1EADn link \u0111\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u qua email"),o()(),e(11,"form",9),g("ngSubmit",function(){return a.onSubmit()}),e(12,"mat-form-field",10)(13,"mat-label"),n(14,"Email"),o(),e(15,"input",11),E("ngModelChange",function(u){return w(a.forgotPasswordData.email,u)||(a.forgotPasswordData.email=u),u}),o(),e(16,"mat-icon",12),n(17,"email"),o()(),e(18,"div",13)(19,"button",14),c(20,q,2,0,"span",15)(21,Y,2,0,"span",15),o(),e(22,"div",6)(23,"a",16),n(24," \u2190 Quay l\u1EA1i \u0111\u0103ng nh\u1EADp "),o()()()()()()()()()),i&2&&(s(15),h("ngModel",a.forgotPasswordData.email),l("ngModelOptions",b(5,U)),s(4),l("disabled",a.isLoading),s(),l("ngIf",!a.isLoading),s(),l("ngIf",a.isLoading))},dependencies:[y,v,O,N,A,F,I,L,B,j,V,T,z,W,R,C,M,D,x,k],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.snackbar-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important}.snackbar-error[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff!important}.snackbar-warning[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-raised-button[_ngcontent-%COMP%]:disabled{opacity:.6}"]})};export{G as ForgotPasswordComponent};
