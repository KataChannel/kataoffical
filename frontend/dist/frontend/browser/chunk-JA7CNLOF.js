import{a as je}from"./chunk-IJQB52KL.js";import{a as We}from"./chunk-VTCQHFRM.js";import{a as Xe}from"./chunk-YGC2PNZP.js";import{a as He}from"./chunk-SQJ7ETTQ.js";import{a as Ke,b as ot}from"./chunk-NULFSBS2.js";import{a as Fe,b as Ae}from"./chunk-OZKZ3OK7.js";import{a as Z,b as Ne,c as Ve}from"./chunk-AWIJDIBZ.js";import{b as Oe,h as Be}from"./chunk-N62VL4FK.js";import{a as ze}from"./chunk-UV3FSDEF.js";import{a as Ye}from"./chunk-AUZZR3GJ.js";import{a as Re}from"./chunk-POAECDDJ.js";import{a as $e}from"./chunk-HEMVBF4D.js";import{a as Je}from"./chunk-JNVUT6FC.js";import{a as At,b as Nt,c as Vt}from"./chunk-5DTNZ7N6.js";import{a as Kt,b as $t,c as zt,d as Rt}from"./chunk-JQGNFFL5.js";import{b as wt,c as vt}from"./chunk-J2Y4KAF7.js";import{b as ge}from"./chunk-6ABNME4F.js";import{k as Ie,n as q}from"./chunk-ZUE3IRRM.js";import{c as Qt,d as qt,e as Gt,f as Jt,g as Ut,h as Zt}from"./chunk-6FUHXED4.js";import{a as Ft}from"./chunk-4YBUVQ6H.js";import{a as pe,b as ue,c as de,k as he}from"./chunk-3PV2YRJD.js";import{a as ce,b as me}from"./chunk-UHDQTHE3.js";import{e as Yt}from"./chunk-J4PG2A4J.js";import{a as _e,b as fe,c as xe,e as Ce,f as ye,h as Ee,i as Se,k as De,l as we,n as ve,o as be,p as ke,q as at}from"./chunk-3KWMXYFI.js";import{b as Me,f as Te}from"./chunk-BHX4BLPD.js";import{a as Le,b as Pe}from"./chunk-VWVQAVIP.js";import{a as le,b as se}from"./chunk-3U2TZNZV.js";import{b as oe,c as re}from"./chunk-V2GY2FCA.js";import{B as ie,C as ae,b as Ht,g as Xt,j as Wt,s as jt,u as te,x as ee,y as ne}from"./chunk-4CVHWQN7.js";import{a as Ot,b as Bt}from"./chunk-RGDRMKRB.js";import{a as Lt,c as Pt,e as It}from"./chunk-RLVN5MEI.js";import{_ as Mt,la as Tt,y as bt,z as kt}from"./chunk-S5JPUYH3.js";import{k as xt,l as Ct,m as yt,s as Et,v as St,x as Dt}from"./chunk-S4P46B33.js";import{$b as pt,Bc as F,Cc as l,Db as ct,Dc as S,Ec as E,Fc as j,Gc as it,Hc as O,Ic as B,Jc as K,Kb as D,Lc as U,Mc as ht,Nc as gt,Qc as _t,Rc as $,Tb as nt,Tc as z,Ub as f,Xc as Q,Yb as mt,_b as b,ac as G,bc as P,cc as I,dc as a,ec as o,fc as N,gc as ut,hc as dt,jc as v,md as ft,oc as x,pa as L,qc as p,rb as c,wc as Y,xc as H,ya as h,yc as X,za as g}from"./chunk-ZVDIRTLG.js";import{a as lt,b as st,g as Ge,h as J,j as M}from"./chunk-6DYNGEAS.js";var V=Ge(Je());var Ue=["drawer"],Ze=["dialogImportExcel"],tn=["dialogImportExcelCu"],en=["dialogComparePrice"],rt=()=>({standalone:!0}),nn=(r,n,t,e,i)=>({"text-blue-500":r,"text-yellow-500":n,"text-green-500":t,"text-purple-500":e,"text-red-500":i}),an=r=>({"text-red-600":r}),on=(r,n)=>({"text-green-600 font-semibold":r,"text-yellow-600 font-semibold":n}),rn=(r,n)=>n.key,tt=(r,n)=>n.id,ln=(r,n)=>(n.sanpham==null?null:n.sanpham.id)||r;function sn(r,n){if(r&1){let t=v();a(0,"button",56),x("click",function(i){let s=h(t).$implicit;return p().toggleColumn(s),g(i.stopPropagation())}),a(1,"mat-icon"),l(2),o(),a(3,"span"),l(4),o()()}if(r&2){let t=n.$implicit;c(2),S(t.isShow?"check_box":"check_box_outline_blank"),c(2),S(t.value)}}function cn(r,n){if(r&1){let t=v();a(0,"button",59),x("click",function(){h(t);let i=p(2),s=F(100);return g(i.openDeleteDialog(s))}),a(1,"mat-icon"),l(2,"delete"),o(),a(3,"span",25),l(4,"Xo\xE1"),o()()}}function mn(r,n){if(r&1){let t=v();a(0,"button",60),x("click",function(){h(t);let i=p(2);return g(i.DoDanhan())}),a(1,"span",25),l(2,"\u0110\xE3 Nh\u1EADn"),o()()}}function pn(r,n){if(r&1&&D(0,cn,5,0,"button",57)(1,mn,3,0,"button",58),r&2){let t=p();f("ngIf",t.EditList.length>0),c(),f("ngIf",t.EditList.length>0)}}function un(r,n){if(r&1&&(a(0,"th",63)(1,"span",64),l(2),o()()),r&2){let t=p().$implicit,e=p();c(2),E(" ",e.ColumnName[t]," ")}}function dn(r,n){if(r&1&&(a(0,"span",66),l(1),o()),r&2){let t=p().index;c(),E(" ",t+1," ")}}function hn(r,n){if(r&1){let t=v();a(0,"span",72),x("click",function(){h(t);let i=p().$implicit,s=p(2);return g(s.goToDetail(i))}),l(1),o()}if(r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",t[e]," ")}}function gn(r,n){if(r&1&&(a(0,"span",66),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",t[e].length," ")}}function _n(r,n){if(r&1&&(a(0,"span",66),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),j(" (",t[e].mancc,") ",t[e].name," ")}}function fn(r,n){if(r&1&&(a(0,"span",68),l(1),$(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",z(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function xn(r,n){if(r&1&&(a(0,"span",68),l(1),$(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",z(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function Cn(r,n){if(r&1&&(a(0,"span",69),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit,i=p();f("ngClass",_t(2,nn,t[e]==="dadat",t[e]==="dagiao",t[e]==="danhan",t[e]==="hoanthanh",t[e]==="huy")),c(),E(" ",i.Trangthaidon[t[e]]," ")}}function yn(r,n){r&1&&(a(0,"mat-icon",73),l(1,"check_circle"),o())}function En(r,n){r&1&&(a(0,"mat-icon",74),l(1,"cancel"),o())}function Sn(r,n){if(r&1&&(a(0,"span",66),D(1,yn,2,0,"mat-icon",73)(2,En,2,0,"mat-icon",74),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),b(t[e]?1:2)}}function Dn(r,n){if(r&1&&(a(0,"span",68),l(1),$(2,"date"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",z(2,1,t[e],"HH:mm:ss dd/MM/yyyy")," ")}}function wn(r,n){if(r&1){let t=v();a(0,"div",75),x("click",function(i){return h(t),g(i.stopPropagation())}),a(1,"button",76),x("click",function(){h(t);let i=p().$implicit,s=p(2);return g(s.handleCancelDathang(i))}),a(2,"mat-icon"),l(3,"cancel"),o()()()}if(r&2){let t=p().$implicit,e=p(2);c(),f("disabled",!e.cancelOrderService.canCancelOrder(t))("matTooltip",e.cancelOrderService.getCancelButtonTooltip(t))}}function vn(r,n){if(r&1&&(a(0,"span",71),l(1),o()),r&2){let t=p().$implicit;f("ngClass",ht(2,an,t.status==="huy"||t.status==="dahuy")),c(),E(" ",t.lydohuy||"-"," ")}}function bn(r,n){r&1&&N(0,"span",66)}function kn(r,n){if(r&1&&(a(0,"span",66),l(1),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",t[e]," ")}}function Mn(r,n){if(r&1&&(a(0,"td",65),D(1,dn,2,1,"span",66)(2,hn,2,1,"span",67)(3,gn,2,1,"span",66)(4,_n,2,2,"span",66)(5,fn,3,4,"span",68)(6,xn,3,4,"span",68)(7,Cn,2,8,"span",69)(8,Sn,3,1,"span",66)(9,Dn,3,4,"span",68)(10,wn,4,2,"div",70)(11,vn,2,4,"span",71)(12,bn,1,0,"span",66)(13,kn,2,1,"span",66),o()),r&2){let t,e=p().$implicit;c(),b((t=e)==="STT"?1:t==="madncc"?2:t==="sanpham"?3:t==="nhacungcap"?4:t==="ngaynhan"?5:t==="createdAt"?6:t==="status"?7:t==="isActive"?8:t==="updatedAt"?9:t==="actions"?10:t==="lydohuy"?11:t==="action"?12:13)}}function Tn(r,n){if(r&1&&(ut(0,42),D(1,un,3,1,"th",61)(2,Mn,14,1,"td",62),dt()),r&2){let t=n.$implicit;f("matColumnDef",t)}}function Ln(r,n){r&1&&N(0,"tr",77)}function Pn(r,n){if(r&1){let t=v();a(0,"tr",78),x("click",function(){let i=h(t).$implicit,s=p();return g(s.AddToEdit(i))}),o()}if(r&2){let t=n.$implicit,e=p();mt("hover:bg-slate-100 ",e.CheckItemInEdit(t)?"!bg-slate-200":"","")}}function In(r,n){r&1&&(a(0,"tr",79)(1,"td",80),l(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}function Fn(r,n){r&1&&(a(0,"mat-dialog-content")(1,"div",81)(2,"div",82),l(3,"X\xE1c Nh\u1EADn"),o(),a(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),a(6,"div",83)(7,"button",84),l(8,"\u0110\u1ED3ng \xDD"),o(),a(9,"button",85),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function An(r,n){r&1&&(a(0,"mat-dialog-content")(1,"div",81)(2,"div",82),l(3,"X\xE1c Nh\u1EADn"),o(),a(4,"div"),l(5,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),a(6,"div",83)(7,"button",84),l(8,"\u0110\u1ED3ng \xDD"),o(),a(9,"button",85),l(10,"Hu\u1EF7 B\u1ECF"),o()()()())}function Nn(r,n){if(r&1){let t=v();l(0),a(1,"button",111),x("click",function(){h(t);let i=p().$implicit,s=p(2);return g(s.removeItemImport(i))}),a(2,"mat-icon"),l(3,"delete"),o()()}if(r&2){let t=p().index;E(" ",t+1," ")}}function Vn(r,n){if(r&1&&(a(0,"mat-option",117),l(1),o()),r&2){let t=n.$implicit;f("value",t.id),c(),S(t.name)}}function On(r,n){if(r&1){let t=v();a(0,"mat-form-field",31)(1,"mat-label"),l(2,"Nh\xE0 Cung C\u1EA5p"),o(),a(3,"mat-select",112),x("selectionChange",function(i){h(t);let s=p().$implicit,m=p(2);return g(m.SelectNhacungcap(s,i))}),a(4,"div",113)(5,"mat-form-field",114)(6,"input",115),x("input",function(i){h(t);let s=p().index,m=p(2);return g(m.DoFindNhacungcap(i,s))}),o()(),a(7,"div",116),P(8,Vn,2,2,"mat-option",117,tt),o()()()()}if(r&2){let t=p().index,e=p(2);c(8),I(e.FilterNhacungcap[t])}}function Bn(r,n){if(r&1){let t=v();a(0,"mat-form-field",31)(1,"mat-label"),l(2,"Ng\xE0y Nh\u1EADn "),o(),a(3,"input",118),x("dateChange",function(i){h(t);let s=p().$implicit,m=p(2);return g(m.DoChonNgaynhan(i,s))}),o(),N(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",null,12),o()}if(r&2){let t=F(6),e=p().index,i=p(2);c(3),f("ngModel",i.statusDetails[e]==null?null:i.statusDetails[e].ngaynhan)("matDatepicker",t),c(),f("for",t)}}function Kn(r,n){if(r&1&&(a(0,"tr")(1,"td",104),D(2,Nn,4,1),o(),a(3,"td",105),D(4,On,10,0,"mat-form-field",31),o(),a(5,"td",106),D(6,Bn,7,3,"mat-form-field",31),o(),a(7,"td",107),l(8),o(),a(9,"td",107),l(10),o(),a(11,"td",108)(12,"span",109),l(13),o()(),a(14,"td",110),l(15),o()()),r&2){let t=n.$implicit;c(2),b(t.status==="Processed"?2:-1),c(2),b(t.status==="Processed"?4:-1),c(2),b(t.status==="Processed"?6:-1),c(2),S(t.fileName),c(2),S(t.tenkhongdau),c(2),f("ngClass",gt(8,on,t.status==="Processed"||t.status==="Success",t.status==="Skipped")),c(),E(" ",t.status," "),c(2),S(t.message)}}function $n(r,n){if(r&1){let t=v();a(0,"h2",86),l(1,"Import \u0110\u1EB7t H\xE0ng"),o(),a(2,"mat-dialog-content",87)(3,"div",88)(4,"div",89)(5,"table",90)(6,"thead",91)(7,"tr")(8,"th",92),l(9," # "),o(),a(10,"th",93),l(11," Nh\xE0 Cung C\u1EA5p "),o(),a(12,"th",94),l(13," Ng\xE0y Nh\u1EADn "),a(14,"mat-form-field",52)(15,"mat-label"),l(16,"Ng\xE0y Nh\u1EADn All "),o(),a(17,"input",95),x("dateChange",function(i){h(t);let s=p();return g(s.DoChonNgaynhan(i,"All"))}),o(),N(18,"mat-datepicker-toggle",39)(19,"mat-datepicker",null,12),o()(),a(21,"th",96),l(22," File Name"),o(),a(23,"th",96),l(24," T\xEAn Kh\xF4ng D\u1EA5u"),o(),a(25,"th",97),l(26," Status"),o(),a(27,"th",98),l(28," Message"),o()()(),a(29,"tbody",99),D(30,Kn,16,11,"tr",100),o()()()()(),a(31,"mat-dialog-actions",101)(32,"button",102),l(33,"\u0110\xF3ng"),o(),a(34,"button",103),x("click",function(){h(t);let i=p();return g(i.DoImportNhacungcapCu())}),l(35,"C\u1EADp Nh\u1EADt"),o()()}if(r&2){let t=F(20),e=p();c(17),f("matDatepicker",t),c(),f("for",t),c(12),f("ngForOf",e.statusDetails)}}function zn(r,n){if(r&1&&(a(0,"mat-option",130),l(1),o()),r&2){let t=n.$implicit;f("value",t.makho),c(),j(" ",t.makho," (",t.name,") ")}}function Rn(r,n){if(r&1&&(a(0,"mat-option",130),l(1),o()),r&2){let t=n.$implicit;f("value",t),c(),j(" ",t.makho," (",t.name,") ")}}function Yn(r,n){if(r&1&&(a(0,"div",147)(1,"span",153),l(2),o(),a(3,"mat-chip",154),l(4),o()()),r&2){let t=p().$implicit,e=p(2);c(2),E("Excel: ",t.originalMakho,""),c(),f("color",e.getKhoMatchStatusColor(t.configOptions==null?null:t.configOptions.khoMatchStatus)),c(),E(" ",e.getKhoMatchStatusText(t.configOptions==null?null:t.configOptions.khoMatchStatus)," ")}}function Hn(r,n){if(r&1&&(a(0,"tr",152)(1,"td",155),l(2),o(),a(3,"td",156),l(4),o(),a(5,"td",155),l(6),o(),a(7,"td",155),l(8),o(),a(9,"td",157),l(10),o(),a(11,"td",155),l(12),o(),a(13,"td",155),l(14),o(),a(15,"td",158),l(16),o()()),r&2){let t=n.$implicit,e=n.$index;c(2),S(e+1),c(2),S((t.sanpham==null?null:t.sanpham.masp)||t.masp||"N/A"),c(2),S((t.sanpham==null?null:t.sanpham.title)||t.title||"N/A"),c(2),S((t.sanpham==null?null:t.sanpham.dvt)||t.dvt||""),c(2),S(t.sldat||0),c(2),S(t.slgiao||0),c(2),S(t.slnhan||0),c(2),S(t.ghichu||"")}}function Xn(r,n){r&1&&(a(0,"tr")(1,"td",159),l(2,"Kh\xF4ng c\xF3 s\u1EA3n ph\u1EA9m"),o()())}function Wn(r,n){if(r&1){let t=v();a(0,"div",133)(1,"div",140)(2,"div",141)(3,"mat-checkbox",142),K("ngModelChange",function(i){let s=h(t).$implicit;return B(s.configOptions.confirmed,i)||(s.configOptions.confirmed=i),g(i)}),x("change",function(){let i=h(t).$implicit,s=p(2);return g(s.toggleOrderConfirmation(i))}),o(),a(4,"div")(5,"h3",143),l(6),o(),a(7,"p",137),l(8),o()()(),a(9,"button",144),x("click",function(){let i=h(t).$implicit,s=p(2);return g(s.removeOrderFromImport(i))}),a(10,"mat-icon"),l(11,"delete"),o()()(),a(12,"div",145)(13,"mat-form-field",52)(14,"mat-label"),l(15,"Ng\xE0y nh\u1EADn"),o(),a(16,"input",127),K("ngModelChange",function(i){let s=h(t).$implicit;return B(s.configOptions.selectedDate,i)||(s.configOptions.selectedDate=i),g(i)}),x("dateChange",function(i){let s=h(t).$implicit,m=p(2);return g(m.updateOrderDate(s,i.value))}),o(),N(17,"mat-datepicker-toggle",39)(18,"mat-datepicker",null,14),o(),a(20,"div",146)(21,"mat-form-field",52)(22,"mat-label"),l(23,"Kho"),o(),a(24,"mat-select",129),K("ngModelChange",function(i){let s=h(t).$implicit;return B(s.khoSelected,i)||(s.khoSelected=i),g(i)}),x("selectionChange",function(i){let s=h(t).$implicit,m=p(2);return g(m.updateOrderKhoSelection(s,i.value))}),P(25,Rn,2,3,"mat-option",130,tt),o()(),D(27,Yn,5,3,"div",147),o()(),a(28,"div",89)(29,"table",148)(30,"thead",149)(31,"tr")(32,"th",150),l(33,"STT"),o(),a(34,"th",150),l(35,"M\xE3 SP"),o(),a(36,"th",150),l(37,"T\xEAn s\u1EA3n ph\u1EA9m"),o(),a(38,"th",150),l(39,"\u0110VT"),o(),a(40,"th",150),l(41,"SL \u0110\u1EB7t"),o(),a(42,"th",150),l(43,"SL Giao"),o(),a(44,"th",150),l(45,"SL Nh\u1EADn"),o(),a(46,"th",150),l(47,"Ghi ch\xFA"),o()()(),a(48,"tbody",151),P(49,Hn,17,8,"tr",152,ln,!1,Xn,3,0,"tr"),o()()()()}if(r&2){let t=n.$implicit,e=F(19),i=p(2);f("ngClass",t.configOptions!=null&&t.configOptions.confirmed?"border-green-500 bg-green-50":"border-gray-300"),c(3),O("ngModel",t.configOptions.confirmed),c(3),E("",(t.summary==null?null:t.summary.supplierName)||(t.nhacungcap==null?null:t.nhacungcap.name)||"N/A"," "),c(2),it(" M\xE3 NCC: ",(t.summary==null?null:t.summary.supplierCode)||(t.nhacungcap==null?null:t.nhacungcap.mancc)||"N/A"," | ",(t.summary==null?null:t.summary.totalProducts)||(t.sanpham==null?null:t.sanpham.length)||0," s\u1EA3n ph\u1EA9m | T\u1ED5ng SL: ",(t.summary==null?null:t.summary.totalQuantity)||i.getTotalQuantity(t)," "),c(8),f("matDatepicker",e),O("ngModel",t.configOptions.selectedDate),c(),f("for",e),c(7),O("ngModel",t.khoSelected),c(),I(i.ImportConfig.ListKho),c(2),b(t.originalMakho?27:-1),c(22),I(t.sanpham)}}function jn(r,n){r&1&&(a(0,"div",134)(1,"div",160),l(2,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 import"),o(),a(3,"div",161),l(4,"Vui l\xF2ng ch\u1ECDn file Excel h\u1EE3p l\u1EC7"),o()())}function Qn(r,n){if(r&1){let t=v();a(0,"h2",119)(1,"span"),l(2,"Import \u0110\u1EB7t H\xE0ng t\u1EEB Excel"),o(),a(3,"div",120)(4,"span"),l(5),o(),a(6,"span",121),l(7),o()()(),a(8,"mat-dialog-content",122)(9,"div",123)(10,"div",124)(11,"div",125)(12,"mat-form-field",126)(13,"mat-label"),l(14,"Ng\xE0y nh\u1EADn (T\u1EA5t c\u1EA3)"),o(),a(15,"input",127),K("ngModelChange",function(i){h(t);let s=p();return B(s.ImportConfig.selectedDate,i)||(s.ImportConfig.selectedDate=i),g(i)}),x("dateChange",function(i){h(t);let s=p();return g(s.updateAllOrdersDate(i.value))}),o(),N(16,"mat-datepicker-toggle",39)(17,"mat-datepicker",null,13),o(),a(19,"mat-form-field",128)(20,"mat-label"),l(21,"Kho (T\u1EA5t c\u1EA3)"),o(),a(22,"mat-select",129),K("ngModelChange",function(i){h(t);let s=p();return B(s.ImportConfig.selectedKho,i)||(s.ImportConfig.selectedKho=i),g(i)}),x("selectionChange",function(i){h(t);let s=p();return g(s.updateAllOrdersKho(i.value))}),P(23,zn,2,3,"mat-option",130,tt),o()(),a(25,"button",103),x("click",function(){h(t);let i=p();return g(i.toggleAllOrdersConfirmation())}),a(26,"mat-icon"),l(27),o(),l(28),o()()(),a(29,"div",131)(30,"div",132),P(31,Wn,52,12,"div",133,tt),o(),D(33,jn,5,0,"div",134),o()()(),a(34,"mat-dialog-actions",135)(35,"div",136)(36,"div",137),l(37),o(),a(38,"div",138)(39,"button",85),l(40,"\u0110\xF3ng"),o(),a(41,"button",139),x("click",function(){h(t);let i=p();return g(i.ImportConfirmedDathang())}),l(42),o()()()()}if(r&2){let t=F(18),e=p();c(5),E("",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng"),c(2),E("",e.getConfirmedOrdersCount()," \u0111\xE3 x\xE1c nh\u1EADn"),c(8),f("matDatepicker",t),O("ngModel",e.ImportConfig.selectedDate),c(),f("for",t),c(6),O("ngModel",e.ImportConfig.selectedKho),c(),I(e.ImportConfig.ListKho),c(4),S(e.getConfirmedOrdersCount()===e.ListImportExcel.length?"check_box":"check_box_outline_blank"),c(),E(" ",e.getConfirmedOrdersCount()===e.ListImportExcel.length?"B\u1ECF ch\u1ECDn t\u1EA5t c\u1EA3":"Ch\u1ECDn t\u1EA5t c\u1EA3"," "),c(3),I(e.ListImportExcel),c(2),b(e.ListImportExcel.length===0?33:-1),c(),f("align","end"),c(3),j(" \u0110\xE3 ch\u1ECDn ",e.getConfirmedOrdersCount()," / ",e.ListImportExcel.length," \u0111\u01A1n h\xE0ng "),c(4),f("disabled",e.getConfirmedOrdersCount()===0),c(),E(" Import ",e.getConfirmedOrdersCount()," \u0111\u01A1n h\xE0ng ")}}function qn(r,n){if(r&1&&(a(0,"th",176)(1,"div",180),l(2),o()()),r&2){let t=n.$implicit;c(2),S(t)}}function Gn(r,n){r&1&&(a(0,"th",181)(1,"div",182),l(2,"SL \u0111\u1EB7t"),o()(),a(3,"th",181)(4,"div",182),l(5,"Gi\xE1 nh\u1EADp"),o()())}function Jn(r,n){if(r&1&&(a(0,"td",183),l(1),o()),r&2){let t=p().$implicit;nt("rowspan",t._rowspanMasp),c(),E(" ",t["M\xE3 SP"]," ")}}function Un(r,n){if(r&1&&(a(0,"td",184),l(1),o()),r&2){let t=p().$implicit;nt("rowspan",t._rowspanTensp),c(),E(" ",t["T\xEAn SP"]," ")}}function Zn(r,n){if(r&1&&(a(0,"span",187),l(1),$(2,"number"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),S(z(2,1,e[t].sldat,"1.0-0"))}}function ti(r,n){r&1&&(a(0,"span",161),l(1,"-"),o())}function ei(r,n){if(r&1&&(a(0,"span",188),l(1),$(2,"number"),o()),r&2){let t=p().$implicit,e=p().$implicit;c(),E(" ",z(2,1,e[t].gianhap,"1.0-0")," \u0111 ")}}function ni(r,n){r&1&&(a(0,"span",161),l(1,"-"),o())}function ii(r,n){if(r&1&&(a(0,"td",186),D(1,Zn,3,4,"span",187)(2,ti,2,0,"span",161),o(),a(3,"td",186),D(4,ei,3,4,"span",188)(5,ni,2,0,"span",161),o()),r&2){let t=n.$implicit,e=p().$implicit;c(),b(e[t]&&e[t].sldat>0?1:2),c(3),b(e[t]&&e[t].gianhap>0?4:5)}}function ai(r,n){if(r&1&&(a(0,"tr",152),D(1,Jn,2,2,"td",183)(2,Un,2,2,"td",184),a(3,"td",185),l(4),o(),P(5,ii,6,2,null,null,G),o()),r&2){let t=n.$implicit,e=p(2);c(),b(t._showMasp?1:-1),c(),b(t._showTensp?2:-1),c(2),E(" ",t["T\xEAn NCC"]," "),c(),I(e.comparePriceDateColumns)}}function oi(r,n){r&1&&(a(0,"div",177)(1,"mat-icon",189),l(2,"inventory_2"),o(),a(3,"div",190),l(4,"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),o(),a(5,"div",191),l(6,"Vui l\xF2ng ch\u1ECDn kho\u1EA3ng th\u1EDDi gian kh\xE1c"),o()())}function ri(r,n){if(r&1){let t=v();a(0,"div",162)(1,"div")(2,"h2",163),l(3,"So S\xE1nh Gi\xE1 Nh\xE0 Cung C\u1EA5p"),o(),a(4,"div",164),l(5),$(6,"date"),$(7,"date"),o()(),a(8,"button",165)(9,"mat-icon"),l(10,"close"),o()()(),a(11,"mat-dialog-content",166)(12,"div",167)(13,"div",168)(14,"div",169),l(15," Hi\u1EC3n th\u1ECB "),a(16,"span",82),l(17),o(),l(18," / "),a(19,"span",82),l(20),o(),l(21," d\xF2ng "),o(),a(22,"button",103),x("click",function(){h(t);let i=p();return g(i.exportComparePriceExcel())}),a(23,"mat-icon"),l(24,"download"),o(),a(25,"span"),l(26),o()()(),a(27,"div",170)(28,"table",171)(29,"thead",172)(30,"tr")(31,"th",173),l(32,"M\xE3 SP"),o(),a(33,"th",174),l(34,"T\xEAn SP"),o(),a(35,"th",175),l(36,"T\xEAn NCC"),o(),P(37,qn,3,1,"th",176,G),o(),a(39,"tr"),P(40,Gn,6,0,null,null,G),o()(),a(42,"tbody"),P(43,ai,7,3,"tr",152,pt),o()()(),D(45,oi,7,0,"div",177),o()(),a(46,"mat-dialog-actions",178)(47,"button",179),l(48,"\u0110\xF3ng"),o()()}if(r&2){let t=p();c(5),j(" T\u1EEB ",z(6,6,t.searchParam.Batdau,"dd/MM/yyyy")," \u0111\u1EBFn ",z(7,9,t.searchParam.Ketthuc,"dd/MM/yyyy")," "),c(12),S(t.getDisplayedComparePriceData().length),c(3),S(t.comparePriceTotalRecords),c(6),E("Xu\u1EA5t Excel (To\xE0n b\u1ED9 ",t.comparePriceTotalRecords," d\xF2ng)"),c(11),I(t.comparePriceDateColumns),c(3),I(t.comparePriceDateColumns),c(3),I(t.getDisplayedComparePriceData()),c(2),b(t.comparePriceData.length===0?45:-1)}}var W=class W{Detail={};displayedColumns=["STT","madncc","nhacungcap","sanpham","ngaynhan","status","ghichu","createdAt","updatedAt","actions","lydohuy"];ColumnName={STT:"STT",madncc:"M\xE3 \u0110\u01A1n Nh\u1EADp",nhacungcap:"Nh\xE0 Cung C\u1EA5p",sanpham:"S\u1EA3n Ph\u1EA9m",ngaynhan:"Ng\xE0y Nh\u1EADn",status:"Tr\u1EA1ng Th\xE1i",ghichu:"Ghi Ch\xFA",createdAt:"Ng\xE0y T\u1EA1o",updatedAt:"Ng\xE0y C\u1EADp Nh\u1EADt",actions:"Thao T\xE1c",lydohuy:"L\xFD Do H\u1EE7y"};FilterColumns=JSON.parse(localStorage.getItem("DathangColFilter")||"[]");Columns=[];isFilter=!1;Trangthaidon=We;paginator;sort;drawer;dialogImportExcel;dialogImportExcelCu;filterValues={};_DathangService=L(ze);_breakpointObserver=L(bt);_NhacungcapService=L(Ye);_SanphamService=L(Re);_BanggiaService=L(He);_KhoService=L(Xe);_router=L(vt);_timezoneService=L($e);cancelOrderService=L(je);Listdathang=this._DathangService.ListDathang;page=this._DathangService.page;pageCount=this._DathangService.pageCount;total=this._DathangService.total;pageSize=this._DathangService.pageSize;dathangId=this._DathangService.dathangId;dataSource=new at([]);_snackBar=L(Ft);CountItem=0;suppliers=[];dialog=L(Qt);ListImportExcel=[];searchParam={Batdau:(0,V.default)().toDate(),Ketthuc:(0,V.default)().toDate(),page:this.page(),pageSize:this.pageSize()};totalItems=0;constructor(){ft(()=>M(this,null,function*(){this.dataSource.data=this.Listdathang(),this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page()-1,this.paginator.pageSize=this.pageSize(),this.paginator.length=this.total())}))}createFilter(){return(n,t)=>{let e=JSON.parse(t),i=!0;return this.displayedColumns.forEach(s=>{if(e[s]){let m=n[s]?n[s].toString().toLowerCase():"";i=i&&m.includes(e[s].toLowerCase())}}),i}}onPageSizeChange(n,t){n>this.total()&&(this._snackBar.open(`S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a ${this.total()}`,"",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),n=this.total()),this._DathangService.page.set(1),this._DathangService.getDathangBy(this.searchParam),t.closeMenu()}onPreviousPage(){this.page()>1&&(this._DathangService.page.set(this.page()-1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onNextPage(){this.page()<this.pageCount()&&(this._DathangService.page.set(this.page()+1),this.searchParam.page=this.page(),this._DathangService.getDathangBy(this.searchParam))}onDateChange(){this.ngOnInit()}ngOnInit(){return M(this,null,function*(){yield this._DathangService.getDathangBy(this.searchParam),this.displayedColumns=Object.keys(this.ColumnName),this.dataSource=new at(this.Listdathang()),this.dataSource.sort=this.sort,this.initializeColumns(),this.setupDrawer(),yield this._NhacungcapService.getAllNhacungcap(),this.FilterNhacungcap=Array(20).fill(null).map(()=>this._NhacungcapService.ListNhacungcap()),yield this._KhoService.getAllKho(),this.ImportConfig.ListKho=this._KhoService.ListKho(),this.FilterKho=Array(20).fill(null).map(()=>this._KhoService.ListKho())})}initializeColumns(){this.Columns=Object.entries(this.ColumnName).map(([n,t])=>({key:n,value:t,isShow:!0})),this.FilterColumns=this.FilterColumns.length?this.FilterColumns:this.Columns,localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,{key:t,value:e,isShow:i})=>i?st(lt({},n),{[t]:e}):n,{})}applyFilter(n){let t=n.target.value;if(!t){this.searchParam={page:this.page(),pageSize:this.pageSize()},this._DathangService.getDathangBy(this.searchParam);return}this.searchParam.subtitle=t.trim().toLowerCase(),this._DathangService.getDathangBy(this.searchParam)}setupDrawer(){this._breakpointObserver.observe([kt.Handset]).subscribe(n=>{n.matches?this.drawer.mode="over":this.drawer.mode="side"})}toggleColumn(n){let t=this.FilterColumns.find(e=>e.key===n.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}FilterHederColumn(n,t){return n.filter((i,s,m)=>s===m.findIndex(u=>u[t]===i[t]))}doFilterHederColumn(n,t){this.dataSource.filteredData=this.Listdathang().filter(e=>e[t].toLowerCase().includes(n.target.value.toLowerCase()))}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(n=>n.isShow).map(n=>n.key),this.ColumnName=this.FilterColumns.reduce((n,t)=>(t.isShow&&(n[t.key]=t.value),n),{}),localStorage.setItem("DathangColFilter",JSON.stringify(this.FilterColumns))}doFilterColumns(n){let t=n.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(e=>e.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/dathang","new"])}goToDetail(n){this._DathangService.setDathangId(n.id),this.drawer.open(),this._router.navigate(["admin/dathang",n.id])}UpdateDathang(n){n.status="dagiao",this._DathangService.updateDathang(n).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}ExportExcel(){return M(this,null,function*(){this.searchParam.pageSize=99999,yield this._DathangService.getDathangBy(this.searchParam);let n=this.Listdathang(),t=`Danh S\xE1ch \u0110\u1EB7t H\xE0ng ${this._timezoneService.formatForDisplay(new Date,"DD-MM-YYYY")}`;yield this._NhacungcapService.getAllNhacungcap(),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._BanggiaService.getAllBanggia();let e=Array.isArray(n)&&n.length>0?n.flatMap(i=>Array.isArray(i.sanpham)?i.sanpham.map(s=>({ngaynhan:this._timezoneService.formatForDisplay(i.ngaynhan,"DD/MM/YYYY"),mancc:i.nhacungcap?.mancc,name:i.nhacungcap?.name,masp:s?.sanpham?.masp,tensp:s?.sanpham?.title,sldat:Number(s?.sldat)||0,slgiao:Number(s?.slgiao)||0,slnhan:Number(s?.slnhan)||0,ghichu:s?.ghichu,makho:i?.kho?.makho})):[]):[{ngaynhan:this._timezoneService.nowLocal("DD/MM/YYYY"),mancc:"",name:"",masp:"",tensp:"",sldat:0,slgiao:0,slnhan:0,ghichu:"",makho:""}];console.log(e),console.log(this.Listdathang()),Oe(e,t)})}EditList=[];AddToEdit(n){this.EditList.find(e=>e.id===n.id)?this.EditList=this.EditList.filter(e=>e.id!==n.id):this.EditList.push(n)}CheckItemInEdit(n){return this.EditList.some(t=>t.id===n.id)}DoDanhan(){Promise.all(this.EditList.map(n=>(n.status="danhan",this._DathangService.updateDathang(n)))).then(()=>{this.EditList=[],this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})}dialogCreateRef;openDeleteDialog(n,t){this.dialog.open(n,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(i=>M(this,null,function*(){if(i=="true"){if(t){yield this._DathangService.DeleteDathang(t);return}this.DeleteListItem()}}))}openDathangDialog(n){this.dialog.open(n,{hasBackdrop:!0,disableClose:!0}).afterClosed().subscribe(e=>M(this,null,function*(){e=="true"}))}DeleteListItem(){return M(this,null,function*(){if(!this.EditList?.length){this._snackBar.open("Kh\xF4ng c\xF3 m\u1EE5c n\xE0o \u0111\u01B0\u1EE3c ch\u1ECDn \u0111\u1EC3 x\xF3a","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}try{let n=yield this._DathangService.DeleteBulkDathang(this.EditList.map(t=>t.id));this._snackBar.open(`X\xF3a th\xE0nh c\xF4ng ${n.success} \u0111\u1EB7t h\xE0ng ${n.fail} l\u1ED7i`,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(n){console.error("L\u1ED7i khi x\xF3a \u0111\u1EB7t h\xE0ng:",n),this._snackBar.open("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a \u0111\u1EB7t h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}finally{this.EditList=[],yield this.ngOnInit()}})}statusDetails=[];ListImportData=[];FilterNhacungcap=[];FilterKho=[];ImportConfig={selectedDate:new Date,selectedKho:"",ListKho:[]};ImporExcel(n){return M(this,null,function*(){let t=Array.from(n.target.files),e=0,i=0,s=0;this.ListImportData=[],this.statusDetails=[],this.ListImportExcel=[],yield this._NhacungcapService.getAllNhacungcap({pageSize:99999}),yield this._SanphamService.getAllSanpham({pageSize:99999}),yield this._KhoService.getAllKho();for(let m=0;m<t.length;m++){let u=t[m];try{let _=yield Be(u);console.log("Excel data:",_);let k=_.Sheet1||_.dathang;if(k&&k.length>0){let w=this.processImportData(k,u.name);w.length>0?(this.ListImportExcel.push(...w),e++):i++}else i++,this.statusDetails.push({fileName:u.name,status:"Skipped",message:"No valid data found in Sheet1 or dathang sheet"})}catch(_){console.error("Error processing file:",_),s++,this.statusDetails.push({fileName:u.name,status:"Error",message:_.message})}}this.ListImportExcel.length>0?(this.ImportConfig.selectedDate=new Date,this.setDefaultKhoForOrders(),this.dialog.open(this.dialogImportExcel,{width:"95vw",maxWidth:"1400px",height:"95vh",disableClose:!0})):this.dialog.open(this.dialogImportExcelCu,{width:"90vw",maxWidth:"1200px",height:"90vh"}),this._snackBar.open(`X\u1EED l\xFD ${t.length} file: ${e} th\xE0nh c\xF4ng, ${i} b\u1ECF qua, ${s} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]}),n.target.value=""})}processImportData(n,t){let e=this._NhacungcapService.ListNhacungcap(),i=this._SanphamService.ListSanpham(),s=this._KhoService.ListKho(),m=[];try{let u={};for(let _ of n)!_.mancc||!_.masp||(u[_.mancc]||(u[_.mancc]=[]),u[_.mancc].push(_));for(let[_,k]of Object.entries(u)){let w=e.find(d=>d.mancc===_);if(!w){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y nh\xE0 cung c\u1EA5p: ${_}`,mancc:_});continue}let A=[],C=!1;for(let d of k){let y=i.find(T=>T.masp===d.masp);if(!y){this.statusDetails.push({fileName:t,status:"Error",message:`Kh\xF4ng t\xECm th\u1EA5y s\u1EA3n ph\u1EA9m: ${d.masp}`,mancc:_,masp:d.masp}),C=!0;continue}A.push({sanpham:{id:y.id,masp:y.masp,title:y.title,dvt:y.dvt||""},sldat:Number(d.sldat)||0,slgiao:Number(d.sldat)||0,slnhan:Number(d.sldat)||0,ghichu:d.ghichu||"",originalData:d}),this.statusDetails.push({fileName:t,status:"Processed",message:`\u0110\xE3 x\u1EED l\xFD: ${y.title} - SL: ${d.sldat}`,mancc:_,masp:d.masp})}if(A.length>0){let d=k[0],y=new Date;if(d.ngaynhan)try{let[R,et,qe]=d.ngaynhan.split("/");y=(0,V.default)(`${qe}-${et}-${R}`,"YYYY-MM-DD").toDate()}catch(R){console.warn("Error parsing date, using current date:",R)}let T={id:`temp_${_}_${Date.now()}`,title:`\u0110\u01A1n h\xE0ng ${d.ngaynhan||this._timezoneService.nowLocal("DD/MM/YYYY")} - ${w.name}`,ngaynhan:y,nhacungcapId:w.id,nhacungcap:w,makho:this.autoSelectKho(d.makho,s),khoSelected:this.getKhoByMakho(d.makho,s),originalMakho:d.makho||"",status:"dadat",sanpham:A,ghichu:"",fileName:t,configOptions:{canChangeDate:!0,canChangeKho:!0,selectedDate:y,selectedKho:this.autoSelectKho(d.makho,s),confirmed:!1,khoMatchStatus:this.getKhoMatchStatus(d.makho,s)},summary:{totalProducts:A.length,totalQuantity:A.reduce((R,et)=>R+et.sldat,0),supplierCode:_,supplierName:w.name}};m.push(T)}}}catch(u){console.error("Error processing import data:",u),this.statusDetails.push({fileName:t,status:"Error",message:u.message})}return m}generateOrderCode(n){let t=this._timezoneService.formatForDisplay(new Date,"YYYYMMDD"),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`DH${n}-${t}-${e}`}updateOrderDate(n,t){n.ngaynhan=t,n.configOptions.selectedDate=t,n.title=`\u0110\u01A1n h\xE0ng ${this._timezoneService.formatForDisplay(t,"DD/MM/YYYY")} - ${n.nhacungcap.name}`}updateOrderKho(n,t){n.makho=t,n.configOptions.selectedKho=t}updateOrderKhoSelection(n,t){n.makho=t.makho,n.khoSelected=t,n.configOptions.selectedKho=t.makho,n.configOptions.khoMatchStatus="manual"}updateAllOrdersDate(n){this.ImportConfig.selectedDate=n,this.ListImportExcel.forEach(t=>{this.updateOrderDate(t,n)})}updateAllOrdersKho(n){this.ImportConfig.selectedKho=n;let t=this.ImportConfig.ListKho.find(e=>e.makho===n);this.ListImportExcel.forEach(e=>{t&&this.updateOrderKhoSelection(e,t)})}toggleOrderConfirmation(n){n.configOptions.confirmed=!n.configOptions.confirmed}toggleAllOrdersConfirmation(){let n=this.ListImportExcel.every(t=>t.configOptions.confirmed);this.ListImportExcel.forEach(t=>{t.configOptions.confirmed=!n})}getConfirmedOrdersCount(){return this.ListImportExcel.filter(n=>n.configOptions.confirmed).length}getKhoMatchStatusText(n){switch(n){case"exact":return"Kh\u1EDBp ch\xEDnh x\xE1c";case"partial":return"Kh\u1EDBp m\u1ED9t ph\u1EA7n";case"name":return"Kh\u1EDBp theo t\xEAn";case"default":return"M\u1EB7c \u0111\u1ECBnh";case"manual":return"\u0110\xE3 ch\u1EC9nh s\u1EEDa";default:return"Kh\xF4ng t\xECm th\u1EA5y"}}getKhoMatchStatusColor(n){switch(n){case"exact":return"success";case"partial":return"warn";case"name":return"accent";case"manual":return"primary";default:return"warn"}}ImportConfirmedDathang(){return M(this,null,function*(){let n=this.ListImportExcel.filter(t=>t.configOptions.confirmed);if(n.length===0){this._snackBar.open("Vui l\xF2ng x\xE1c nh\u1EADn \xEDt nh\u1EA5t m\u1ED9t \u0111\u01A1n h\xE0ng","",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}yield this._KhoService.getAllKho();try{let t=n.map(i=>{let s=this._KhoService.ListKho().find(u=>u.makho===i.makho),m=this.mergeProductsByMasp(i.sanpham);return{ngaynhan:(0,V.default)(i.ngaynhan).format("YYYY-MM-DD"),mancc:i?.nhacungcap.mancc,makho:i.makho,khoId:s?.id,status:i.status,sanpham:m.map(u=>({masp:u.masp,sldat:Number(u.sldat),slgiao:Number(u.slgiao),slnhan:Number(u.slnhan),ghichu:u.ghichu})),ghichu:i.ghichu}}),e=yield this._DathangService.ImportDathang(t);this._snackBar.open(`Import th\xE0nh c\xF4ng: ${e.success} \u0111\u01A1n h\xE0ng, ${e.fail} l\u1ED7i`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.dialog.closeAll(),yield this.ngOnInit()}catch(t){console.error("L\u1ED7i khi import \u0111\u1EB7t h\xE0ng:",t),this._snackBar.open(`L\u1ED7i khi import: ${t.message}`,"",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-error"]})}})}removeOrderFromImport(n){this.ListImportExcel=this.ListImportExcel.filter(t=>t.id!==n.id),this.ListImportExcel.length===0&&this.dialog.closeAll()}DoChonNgaynhan(n,t){let e=n.value;t&&t!=="All"?t.ngaynhan=this._timezoneService.formatForDisplay(e,"YYYY-MM-DD"):this.ListImportExcel.forEach(i=>{i.details?.forEach(s=>{s.ngaynhan=this._timezoneService.formatForDisplay(e,"YYYY-MM-DD")})})}removeItemImport(n){this.ListImportExcel.forEach(t=>{t.details&&(t.details=t.details.filter(e=>e!==n))}),this.ListImportExcel=this.ListImportExcel.filter(t=>t.details&&t.details.length>0)}SelectNhacungcap(n,t){let e=t.value;n.nhacungcap=e,n.manhacungcap=e?.id||e?.manhacungcap}DoFindNhacungcap(n,t){let e=n.target.value.toLowerCase();this.suppliers=this.suppliers.filter(i=>i.name?.toLowerCase().includes(e)||i.manhacungcap?.toLowerCase().includes(e))}DoImportNhacungcapCu(){this.ImportConfirmedDathang()}mergeProductsByMasp(n){let t=new Map;return n.forEach(e=>{let i=e.sanpham?.masp||e.masp;if(t.has(i)){let s=t.get(i);s.sldat=(Number(s.sldat)||0)+(Number(e.sldat)||0),s.slgiao=(Number(s.slgiao)||0)+(Number(e.slgiao)||0),s.slnhan=(Number(s.slnhan)||0)+(Number(e.slnhan)||0);let m=s.ghichu||"",u=e.ghichu||"";u&&m!==u&&(s.ghichu=m?`${m}; ${u}`:u)}else t.set(i,{masp:i,sanpham:e.sanpham||{masp:i},sldat:Number(e.sldat)||0,slgiao:Number(e.slgiao)||0,slnhan:Number(e.slnhan)||0,ghichu:e.ghichu||"",title:e.sanpham?.title||e.title||"",dvt:e.sanpham?.dvt||e.dvt||""})}),Array.from(t.values())}getTotalQuantity(n){return!n.details||!Array.isArray(n.details)?0:n.details.reduce((t,e)=>t+(parseFloat(e.soluong||"0")||0),0)}autoSelectKho(n,t){if(!n||!t?.length)return t?.[0]?.makho||"";let e=t.find(m=>m.makho===n);if(e)return e.makho;let i=t.find(m=>m.makho?.toLowerCase().includes(n.toLowerCase())||n.toLowerCase().includes(m.makho?.toLowerCase()));if(i)return i.makho;let s=t.find(m=>m.name?.toLowerCase().includes(n.toLowerCase())||n.toLowerCase().includes(m.name?.toLowerCase()));return s?s.makho:t[0]?.makho||""}getKhoByMakho(n,t){let e=this.autoSelectKho(n,t);return t.find(i=>i.makho===e)||t[0]||null}getKhoMatchStatus(n,t){return!n||!t?.length?t?.length?"default":"none":t.find(e=>e.makho===n)?"exact":t.find(e=>e.makho?.toLowerCase().includes(n.toLowerCase())||n.toLowerCase().includes(e.makho?.toLowerCase()))?"partial":t.find(e=>e.name?.toLowerCase().includes(n.toLowerCase())||n.toLowerCase().includes(e.name?.toLowerCase()))?"name":"default"}setDefaultKhoForOrders(){let n=this.ImportConfig.ListKho?.[0];n&&this.ListImportExcel.forEach(t=>{!t.khoSelected&&t.configOptions.khoMatchStatus==="default"&&(t.khoSelected=n,t.makho=n.makho,t.configOptions.selectedKho=n.makho)})}getOrdersStatistics(){let n=this.ListImportExcel.length,t=this.getConfirmedOrdersCount(),e=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="exact").length,i=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="partial").length,s=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="name").length,m=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="default").length,u=this.ListImportExcel.filter(_=>_.configOptions?.khoMatchStatus==="manual").length;return{total:n,confirmed:t,exactMatch:e,partialMatch:i,nameMatch:s,defaultMatch:m,manualMatch:u}}handleCancelDathang(n){return M(this,null,function*(){(yield this.cancelOrderService.cancelDathang(n))&&console.log("\u0110\u01A1n \u0111\u1EB7t h\xE0ng \u0111\xE3 \u0111\u01B0\u1EE3c h\u1EE7y th\xE0nh c\xF4ng")})}getStatusLabel(n){return{choxuly:"Ch\u1EDD x\u1EED l\xFD",dangxuly:"\u0110ang x\u1EED l\xFD",hoanthanh:"Ho\xE0n th\xE0nh",huy:"\u0110\xE3 h\u1EE7y",dahuy:"\u0110\xE3 h\u1EE7y"}[n]||n}getStatusClass(n){return{hoanthanh:"bg-green-100 text-green-800",dangxuly:"bg-blue-100 text-blue-800",choxuly:"bg-yellow-100 text-yellow-800",huy:"bg-red-100 text-red-800",dahuy:"bg-red-100 text-red-800"}[n]||"bg-gray-100 text-gray-800"}dialogComparePrice;comparePriceData=[];comparePriceColumns=[];comparePriceDateColumns=[];comparePriceTotalRecords=0;openComparePriceDialog(){return M(this,null,function*(){try{console.log("[COMPARE-PRICE] Opening dialog..."),console.log("[COMPARE-PRICE] Date range:",this.searchParam.Batdau,"->",this.searchParam.Ketthuc);let n=this._snackBar.open("\u0110ang t\u1EA3i d\u1EEF li\u1EC7u so s\xE1nh gi\xE1...","",{duration:0,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-info"]}),t=yield this.fetchComparePriceData();if(n.dismiss(),!t||t.length===0){this._snackBar.open("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u trong kho\u1EA3ng th\u1EDDi gian n\xE0y","\u0110\xF3ng",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-warning"]});return}this.comparePriceData=t,this.comparePriceTotalRecords=t.length,this.buildComparePriceColumns(),console.log("[COMPARE-PRICE] Data loaded:",t.length,"rows"),console.log("[COMPARE-PRICE] Columns:",this.comparePriceColumns),this.dialog.open(this.dialogComparePrice,{width:"95vw",maxWidth:"95vw",height:"90vh",maxHeight:"90vh",panelClass:"compare-price-dialog"})}catch(n){console.error("[COMPARE-PRICE] Error:",n),this._snackBar.open("L\u1ED7i t\u1EA3i d\u1EEF li\u1EC7u so s\xE1nh gi\xE1","\u0110\xF3ng",{duration:3e3,panelClass:["snackbar-error"]})}})}fetchComparePriceData(){return M(this,null,function*(){let n=this.searchParam.pageSize;this.searchParam.pageSize=99999,yield this._DathangService.getDathangBy(this.searchParam),this.searchParam.pageSize=n;let t=this._DathangService.ListDathang(),e=new Map;t.forEach(s=>{let m=s.nhacungcap?.name||"N/A",u=s.ngaynhan?(0,V.default)(s.ngaynhan).format("D/M/YYYY"):null;u&&s.sanpham?.forEach(_=>{let k=_.sanpham?.masp||_.masp||"N/A",w=_.sanpham?.title||_.title||"N/A",A=parseFloat(_.gianhap)||0,C=parseFloat(_.sldat)||0,d=`${k}_${m}`;e.has(d)||e.set(d,{"M\xE3 SP":k,"T\xEAn SP":w,"T\xEAn NCC":m,dates:{}});let y=e.get(d);y.dates[u]||(y.dates[u]={sldat:0,gianhap:0}),y.dates[u].sldat+=C,A>0&&(y.dates[u].gianhap=A)})});let i=[];return e.forEach(s=>{let m={"M\xE3 SP":s["M\xE3 SP"],"T\xEAn SP":s["T\xEAn SP"],"T\xEAn NCC":s["T\xEAn NCC"]};Object.keys(s.dates).forEach(u=>{m[u]=s.dates[u]}),i.push(m)}),i})}buildComparePriceColumns(){let n=new Set;this.comparePriceData.forEach(e=>{Object.keys(e).forEach(i=>{i!=="M\xE3 SP"&&i!=="T\xEAn SP"&&i!=="T\xEAn NCC"&&n.add(i)})}),this.comparePriceDateColumns=Array.from(n).sort((e,i)=>{let s=(0,V.default)(e,"D/M/YYYY"),m=(0,V.default)(i,"D/M/YYYY");return s.valueOf()-m.valueOf()});let t=[];this.comparePriceDateColumns.forEach(e=>{t.push(`${e}_SL`),t.push(`${e}_GIA`)}),this.comparePriceColumns=["M\xE3 SP","T\xEAn SP","T\xEAn NCC",...t],this.calculateRowspans()}calculateRowspans(){if(!this.comparePriceData||this.comparePriceData.length===0)return;this.comparePriceData.sort((e,i)=>e["M\xE3 SP"]!==i["M\xE3 SP"]?e["M\xE3 SP"].localeCompare(i["M\xE3 SP"]):e["T\xEAn SP"]!==i["T\xEAn SP"]?e["T\xEAn SP"].localeCompare(i["T\xEAn SP"]):e["T\xEAn NCC"].localeCompare(i["T\xEAn NCC"]));let n={};this.comparePriceData.forEach(e=>{let i=`${e["M\xE3 SP"]}_${e["T\xEAn SP"]}`;n[i]=(n[i]||0)+1});let t=new Set;this.comparePriceData.forEach(e=>{let i=`${e["M\xE3 SP"]}_${e["T\xEAn SP"]}`;t.has(i)?(e._rowspanMasp=0,e._rowspanTensp=0,e._showMasp=!1,e._showTensp=!1):(e._rowspanMasp=n[i],e._rowspanTensp=n[i],e._showMasp=!0,e._showTensp=!0,t.add(i))})}getDisplayedComparePriceData(){return this.comparePriceData.slice(0,10)}exportComparePriceExcel(){return M(this,null,function*(){try{console.log("[EXPORT] Exporting",this.comparePriceData.length,"rows...");let n=q.book_new(),t=[],e=["M\xE3 SP","T\xEAn SP","T\xEAn NCC"];this.comparePriceDateColumns.forEach(C=>{e.push(C),e.push("")}),t.push(e);let i=["","",""];this.comparePriceDateColumns.forEach(()=>{i.push("SL \u0111\u1EB7t"),i.push("Gi\xE1 nh\u1EADp")}),t.push(i),this.comparePriceData.forEach(C=>{let d=[];d.push(C["M\xE3 SP"]||""),d.push(C["T\xEAn SP"]||""),d.push(C["T\xEAn NCC"]||""),this.comparePriceDateColumns.forEach(y=>{let T=C[y];T&&typeof T=="object"?(d.push(T.sldat||0),d.push(T.gianhap||0)):(d.push(""),d.push(""))}),t.push(d)});let s=q.aoa_to_sheet(t),m=[];m.push({s:{r:0,c:0},e:{r:1,c:0}},{s:{r:0,c:1},e:{r:1,c:1}},{s:{r:0,c:2},e:{r:1,c:2}}),this.comparePriceDateColumns.forEach((C,d)=>{let y=3+d*2;m.push({s:{r:0,c:y},e:{r:0,c:y+1}})});let u=2,_=0;for(;_<this.comparePriceData.length;){let C=this.comparePriceData[_];C._showMasp&&C._rowspanMasp>1&&m.push({s:{r:u,c:0},e:{r:u+C._rowspanMasp-1,c:0}}),C._showTensp&&C._rowspanTensp>1&&m.push({s:{r:u,c:1},e:{r:u+C._rowspanTensp-1,c:1}}),C._rowspanMasp>1?(u+=C._rowspanMasp,_+=C._rowspanMasp):(u++,_++)}s["!merges"]=m;let k=[{wch:15},{wch:40},{wch:30}];this.comparePriceDateColumns.forEach(()=>{k.push({wch:12}),k.push({wch:15})}),s["!cols"]=k;let w=q.decode_range(s["!ref"]||"A1");for(let C=w.s.r;C<=w.e.r;++C)for(let d=w.s.c;d<=w.e.c;++d){let y=q.encode_cell({r:C,c:d});if(s[y])if(C===0||C===1)s[y].s={font:{bold:!0,color:{rgb:"000000"}},fill:{fgColor:{rgb:C===0&&d>=3?"DBEAFE":"F3F4F6"}},alignment:{horizontal:"center",vertical:"center",wrapText:!0},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}};else{let T={vertical:"center",wrapText:!0};if(d===0||d===1||d===2?T.horizontal="left":T.horizontal="right",s[y].s={alignment:T,border:{top:{style:"thin",color:{rgb:"D1D5DB"}},bottom:{style:"thin",color:{rgb:"D1D5DB"}},left:{style:"thin",color:{rgb:"D1D5DB"}},right:{style:"thin",color:{rgb:"D1D5DB"}}}},d>=3&&s[y].v!==""){let R=(d-3)%2;s[y].z="#,##0"}}}q.book_append_sheet(n,s,"So s\xE1nh gi\xE1");let A=`So_sanh_gia_${(0,V.default)(this.searchParam.Batdau).format("DDMMYYYY")}_${(0,V.default)(this.searchParam.Ketthuc).format("DDMMYYYY")}.xlsx`;Ie(n,A),this._snackBar.open("\u2713 Xu\u1EA5t Excel th\xE0nh c\xF4ng","",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})}catch(n){console.error("[EXPORT] Error:",n),this._snackBar.open("L\u1ED7i xu\u1EA5t Excel","\u0110\xF3ng",{duration:3e3,panelClass:["snackbar-error"]})}})}static \u0275fac=function(t){return new(t||W)};static \u0275cmp=ct({type:W,selectors:[["app-listdathang"]],viewQuery:function(t,e){if(t&1&&(Y(Fe,5),Y(Z,5),Y(Ue,7),Y(Ze,5),Y(tn,5),Y(en,5)),t&2){let i;H(i=X())&&(e.paginator=i.first),H(i=X())&&(e.sort=i.first),H(i=X())&&(e.drawer=i.first),H(i=X())&&(e.dialogImportExcel=i.first),H(i=X())&&(e.dialogImportExcelCu=i.first),H(i=X())&&(e.dialogComparePrice=i.first)}},decls:109,vars:32,consts:[["drawer",""],["uploadfile",""],["menu","matMenu"],["pickerBatdau",""],["pickerKetthuc",""],["menuHienthi","matMenuTrigger"],["menu1","matMenu"],["DeleteDialog",""],["DathangDialog",""],["dialogImportExcelCu",""],["dialogImportExcel",""],["dialogComparePrice",""],["picker",""],["globalDatePicker",""],["orderDatePicker",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"w-full","flex","flex-col","gap-2","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative","w-full"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","w-full","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["color","primary","matTooltip","Th\xEAm m\u1EDBi","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],[1,"whitespace-nowrap"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["multiple","","type","file",1,"hidden",3,"change"],["mat-icon-button","","color","primary",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","So S\xE1nh Gi\xE1","mat-icon-button","","color","primary",3,"click"],[3,"appearance","subscriptSizing"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"cursor-pointer","border","rounded-lg","px-3","p-1","flex","flex-row","space-x-2","items-center","justify-between"],[1,"w-full","flex","lg:p-0","p-2","lg:flex-row","lg:space-x-2","lg:items-center","lg:justify-between","flex-col","justify-center"],[1,"w-full","text-center"],[1,"w-full","flex","flex-row","space-x-2","items-center","lg:justify-end","justify-center"],[1,"font-bold","text-blue-600",3,"matMenuTriggerFor"],[1,"w-full","flex","flex-row","space-x-2","p-4",3,"click"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 L\u01B0\u1EE3ng",3,"ngModelChange","ngModel","ngModelOptions"],[1,"pagination-controls"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["class","flex flex-row items-center","color","warn","matTooltip","Xo\xE1","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click",4,"ngIf"],["color","warn","matTooltip","Xo\xE1","mat-flat-button","",1,"flex","flex-row","items-center",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u0110\xE3 Nh\u1EADn",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600"],[1,"max-w-40","line-clamp-4","text-xs"],[1,"max-w-40","line-clamp-4","font-bold",3,"ngClass"],[1,"flex","items-center","gap-2"],[1,"max-w-40","line-clamp-4",3,"ngClass"],[1,"max-w-40","line-clamp-4","font-bold","text-blue-600",3,"click"],[1,"text-green-500"],[1,"text-red-500"],[1,"flex","items-center","gap-2",3,"click"],["mat-icon-button","","color","warn",1,"text-red-600",3,"click","disabled","matTooltip"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"flex","flex-col","space-y-8","items-center","justify-center"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary","mat-dialog-close","true"],["mat-flat-button","","color","warn","mat-dialog-close","false"],["mat-dialog-title",""],[1,"mat-typography"],[1,"w-full"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","shadow-md","rounded-lg"],[1,"bg-gray-50"],[1,"w-16","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"min-w-[350px]","px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-48","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["matInput","",3,"dateChange","matDatepicker"],[1,"w-40","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-24","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"w-32","px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],["align","end"],["mat-flat-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"click"],[1,"w-16","px-4","py-4","whitespace-nowrap","text-gray-900","items-center"],[1,"min-w-[350px]","px-6","py-4","whitespace-nowrap","text-gray-900"],[1,"w-48","px-4","py-4","whitespace-nowrap","text-gray-900"],[1,"w-40","px-4","py-4","whitespace-nowrap","text-sm","text-gray-900","truncate"],[1,"w-24","px-4","py-4","whitespace-nowrap","text-sm"],[3,"ngClass"],[1,"w-32","px-4","py-4","whitespace-nowrap","text-sm","text-gray-500","truncate"],["mat-icon-button","","color","warn",3,"click"],[3,"selectionChange"],[1,"w-full","flex","flex-col"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[1,"!whitespace-normal","!h-auto","!py-2",3,"value"],["matInput","",3,"dateChange","ngModel","matDatepicker"],["mat-dialog-title","",1,"flex","items-center","justify-between"],[1,"text-sm","font-normal","text-gray-600","flex","items-center","gap-4"],[1,"text-green-600"],[1,"!max-h-[90vh]","h-[90vh]","!p-0"],[1,"h-full","flex","flex-col"],[1,"border-b","p-4","bg-gray-50"],[1,"flex","flex-wrap","gap-4","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[200px]"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["appearance","outline","subscriptSizing","dynamic",1,"min-w-[250px]"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex-1","overflow-auto","p-4"],[1,"grid","gap-4"],[1,"border","rounded-lg","p-4",3,"ngClass"],[1,"text-center","py-8"],[1,"border-t","p-4",3,"align"],[1,"flex","items-center","justify-between","w-full"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[3,"ngModelChange","change","ngModel"],[1,"font-semibold","text-lg"],["mat-icon-button","","color","warn","matTooltip","X\xF3a \u0111\u01A1n h\xE0ng n\xE0y",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","gap-2","text-xs"],[1,"min-w-full","border","border-gray-200","text-sm"],[1,"bg-gray-100"],[1,"px-3","py-2","text-left","font-medium","text-gray-700"],[1,"divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"text-gray-600"],[1,"!text-xs","!py-0","!px-2","!min-h-[20px]",3,"color"],[1,"px-3","py-2"],[1,"px-3","py-2","font-mono"],[1,"px-3","py-2","font-semibold","text-blue-600"],[1,"px-3","py-2","text-gray-600"],["colspan","8",1,"px-3","py-4","text-center","text-gray-500"],[1,"text-gray-500","text-lg","mb-2"],[1,"text-gray-400"],["mat-dialog-title","",1,"flex","justify-between","items-center","border-b","pb-3","mb-4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],["mat-icon-button","","mat-dialog-close",""],[1,"!p-0"],[1,"flex","flex-col","h-full"],[1,"flex","justify-between","items-center","px-4","py-3","bg-blue-50","border-b"],[1,"text-sm","font-medium","text-blue-900"],[1,"overflow-auto","flex-1",2,"max-height","calc(90vh - 200px)"],[1,"w-full","border-collapse","border","border-gray-300"],[1,"sticky","top-0","z-10"],["rowspan","2",1,"!font-semibold","!bg-gray-100","!border","!sticky","!left-0","!z-20","!min-w-[120px]","!p-2"],["rowspan","2",1,"!font-semibold","!bg-gray-100","!border","!sticky","!left-[120px]","!z-20","!min-w-[250px]","!p-2"],["rowspan","2",1,"!font-semibold","!bg-gray-100","!border","!sticky","!left-[370px]","!z-20","!min-w-[200px]","!p-2"],["colspan","2",1,"!font-semibold","!bg-blue-100","!border","!text-center","!p-2","!min-w-[180px]"],[1,"flex","flex-col","items-center","justify-center","py-12"],["align","end",1,"border-t","px-4","py-3"],["mat-stroked-button","","mat-dialog-close",""],[1,"font-bold","text-blue-800"],[1,"!font-semibold","!bg-gray-100","!border","!text-center","!p-2","!min-w-[90px]"],[1,"text-xs","text-gray-700"],[1,"!border","!font-mono","!text-sm","!sticky","!left-0","!z-10","!bg-white","!p-2","!align-top"],[1,"!border","!sticky","!left-[120px]","!z-10","!bg-white","!p-2","!align-top"],[1,"!border","!sticky","!left-[370px]","!z-10","!bg-white","!p-2"],[1,"!border","!text-right","!p-2"],[1,"font-semibold","text-blue-600"],[1,"font-semibold","text-green-600"],[1,"text-gray-300","!text-6xl","mb-4"],[1,"text-gray-500","text-lg"],[1,"text-gray-400","text-sm","mt-1"]],template:function(t,e){if(t&1){let i=v();a(0,"mat-drawer-container",15)(1,"mat-drawer",16,0),N(3,"router-outlet"),o(),a(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"input",21),x("keyup",function(m){return h(i),g(e.applyFilter(m))}),o(),a(9,"div",22)(10,"span",23),l(11,"search"),o()()(),a(12,"button",24),x("click",function(){return h(i),g(e.create())}),a(13,"mat-icon"),l(14,"add_circle"),o(),a(15,"span",25),l(16,"T\u1EA1o M\u1EDBi"),o()(),a(17,"div",19)(18,"button",26),x("click",function(){h(i);let m=F(22);return g(m.click())}),a(19,"mat-icon"),l(20,"file_upload"),o()(),a(21,"input",27,1),x("change",function(m){return h(i),g(e.ImporExcel(m))}),o(),a(23,"button",28),x("click",function(){return h(i),g(e.ExportExcel())}),a(24,"mat-icon"),l(25,"download"),o()(),a(26,"button",29)(27,"mat-icon"),l(28,"tune"),o()(),a(29,"mat-menu",null,2)(31,"div",30)(32,"mat-form-field",31)(33,"input",32),x("input",function(m){return h(i),g(e.doFilterColumns(m))})("click",function(m){return h(i),g(m.stopPropagation())}),o(),a(34,"mat-icon",33),l(35,"search"),o()()(),a(36,"div",34),P(37,sn,5,2,"button",35,rn),o()(),a(39,"button",36),x("click",function(){return h(i),g(e.openComparePriceDialog())}),a(40,"mat-icon"),l(41,"compare"),o()()(),D(42,pn,2,2),o()(),a(43,"div",19)(44,"mat-form-field",37)(45,"mat-label"),l(46,"B\u1EAFt \u0110\u1EA7u"),o(),a(47,"input",38),K("ngModelChange",function(m){return h(i),B(e.searchParam.Batdau,m)||(e.searchParam.Batdau=m),g(m)}),o(),N(48,"mat-datepicker-toggle",39)(49,"mat-datepicker",null,3),o(),a(51,"mat-form-field",37)(52,"mat-label"),l(53,"K\u1EBFt Th\xFAc"),o(),a(54,"input",38),K("ngModelChange",function(m){return h(i),B(e.searchParam.Ketthuc,m)||(e.searchParam.Ketthuc=m),g(m)}),o(),N(55,"mat-datepicker-toggle",39)(56,"mat-datepicker",null,4),o(),a(58,"button",28),x("click",function(){return h(i),g(e.onDateChange())}),a(59,"mat-icon"),l(60,"search"),o()()(),a(61,"div",40)(62,"table",41),P(63,Tn,3,1,"ng-container",42,G),D(65,Ln,1,0,"tr",43)(66,Pn,1,3,"tr",44)(67,In,3,0,"tr",45),o()(),a(68,"div",46)(69,"div",47)(70,"span",48),l(71,"\u0110ang Xem "),a(72,"strong"),l(73),o(),l(74," - "),a(75,"strong"),l(76),o(),l(77),o(),a(78,"div",49)(79,"span",50,5),l(81),o(),a(82,"mat-menu",null,6)(84,"div",51),x("click",function(m){return h(i),g(m.stopPropagation())}),a(85,"mat-form-field",52)(86,"mat-label"),l(87,"S\u1ED1 l\u01B0\u1EE3ng"),o(),a(88,"input",53),K("ngModelChange",function(m){return h(i),B(e.pageSize,m)||(e.pageSize=m),g(m)}),o()(),a(89,"button",28),x("click",function(){h(i);let m=F(80);return g(e.onPageSizeChange(e.pageSize(),m))}),a(90,"mat-icon"),l(91,"published_with_changes"),o()()()(),a(92,"div",54)(93,"button",55),x("click",function(){return h(i),g(e.onPreviousPage())}),a(94,"mat-icon"),l(95,"keyboard_arrow_left"),o()(),a(96,"button",55),x("click",function(){return h(i),g(e.onNextPage())}),a(97,"mat-icon"),l(98,"keyboard_arrow_right"),o()()()()()()()(),D(99,Fn,11,0,"ng-template",null,7,Q)(101,An,11,0,"ng-template",null,8,Q)(103,$n,36,3,"ng-template",null,9,Q)(105,Qn,43,14,"ng-template",null,10,Q)(107,ri,49,12,"ng-template",null,11,Q)}if(t&2){let i=F(30),s=F(50),m=F(57),u=F(83);c(),f("position","end"),c(25),f("matMenuTriggerFor",i),c(11),I(e.FilterColumns),c(5),b(e.EditList.length>0?42:-1),c(2),f("appearance","outline")("subscriptSizing","dynamic"),c(3),f("matDatepicker",s),O("ngModel",e.searchParam.Batdau),f("ngModelOptions",U(29,rt)),c(),f("for",s),c(3),f("appearance","outline")("subscriptSizing","dynamic"),c(3),f("matDatepicker",m),O("ngModel",e.searchParam.Ketthuc),f("ngModelOptions",U(30,rt)),c(),f("for",m),c(7),f("dataSource",e.dataSource),c(),I(e.displayedColumns),c(2),f("matHeaderRowDef",e.displayedColumns),c(),f("matRowDefColumns",e.displayedColumns),c(7),S((e.page()-1)*e.pageSize()+1),c(3),S(e.page()*e.pageSize()>e.total()?e.total():e.page()*e.pageSize()),c(),it(" trong s\u1ED1 ",e.total()," m\u1EE5c, ",e.page(),"/",e.pageCount()," Trang"),c(2),f("matMenuTriggerFor",u),c(2),E("Hi\u1EC7n Th\u1ECB : ",e.pageSize()," m\u1EE5c"),c(7),O("ngModel",e.pageSize),f("ngModelOptions",U(31,rt)),c(5),f("disabled",e.page()===1),c(3),f("disabled",e.page()===e.pageCount())}},dependencies:[ae,ie,te,ee,ne,re,oe,ke,_e,xe,Se,Ce,fe,De,ye,Ee,we,ve,be,Ve,Z,Ne,Ae,Rt,$t,Kt,zt,Vt,At,Nt,wt,Bt,Ot,It,Lt,Pt,se,le,Tt,Dt,xt,Ct,yt,St,Et,jt,Ht,Xt,Wt,Pe,Le,me,ce,he,pe,ue,de,Mt,Zt,qt,Gt,Ut,Jt,Yt,ge,Te,Me],encapsulation:2,changeDetection:0})};J([ot(500)],W.prototype,"applyFilter",1),J([Ke()],W.prototype,"FilterHederColumn",1),J([ot(300)],W.prototype,"doFilterHederColumn",1);var Qe=W;export{Qe as a};
