import{c as L,d as ae,e as b,f as ne,g as oe,h as se,i as le,j as ue,l as ce,m as pe,o as me,p as fe,r as de,s as ye,u as he,v as ge,w as _e,x as ve}from"./chunk-MIK3M6YH.js";import{a as X,b as Y,c as Z}from"./chunk-6DMN2Y4X.js";import{d as te}from"./chunk-DU3FV2IQ.js";import{b as ee}from"./chunk-VDT6LLUL.js";import{v as ie,y as re}from"./chunk-TJCNWHB7.js";import{a as m}from"./chunk-GO3VGP6S.js";import{b as W}from"./chunk-TV5MBD5E.js";import{e as K}from"./chunk-LGSPPKE4.js";import{y as z,z as G}from"./chunk-7ROZJMXV.js";import{b as U,c as M}from"./chunk-QDKCYXS4.js";import{u as B,w as J}from"./chunk-5AAE55N6.js";import{Ac as T,Eb as Q,Ec as H,Fc as p,Hc as h,Lb as f,Oc as $,Ra as q,Vb as c,Wa as I,ac as O,cc as j,dc as A,ec as N,fc as l,gc as s,hc as y,ia as D,ic as F,jc as V,lc as k,na as g,nb as E,oa as R,qc as w,rb as o,sc as d,wb as P,xa as _,ya as v,yc as C,zc as S}from"./chunk-JY44QJM2.js";import{j as u}from"./chunk-6DYNGEAS.js";var x=class r{constructor(i,t,e){this._StorageService=i;this.platformId=t;this.router=e;this.isBrowser=J(this.platformId)}_authenticated=!1;APIURL=m.APIURL;isBrowser;ListQuanlyfile=q([]);Quanlyfile=q({});getAllQuanlyfile(){return u(this,null,function*(){try{let i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${m.APIURL}/upload`,i);t.ok;let e=yield t.json();return this.ListQuanlyfile.set(e),e}catch(i){return console.error(i)}})}SearchQuanlyfile(i){return u(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${m.APIURL}/setting/search`,t);if(!e.ok)if(e.status===401){let n=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===403){let n=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===500){let n=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else{let n=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}let a=yield e.json();return this.Quanlyfile.set(a.items),a}catch(t){return console.error(t)}})}getQuanlyfileByid(i){return u(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},e=yield fetch(`${m.APIURL}/upload/${i}`,t);if(!e.ok)if(e.status===401){let n=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===403){let n=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(e.status===500){let n=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else{let n=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}let a=yield e.json();this.Quanlyfile.set(a)}catch(t){return console.error(t)}})}updateOneQuanlyfile(i){return u(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${m.APIURL}/upload/${i.id}`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();return e.ok,this.getAllQuanlyfile(),a}catch(t){return console.error(t)}})}DeleteQuanlyfile(i){return u(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}},e=yield fetch(`${m.APIURL}/upload/${i.id}`,t);if(!e.ok)if(e.status===401){let a=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(e.status===403){let a=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(e.status===500){let a=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}return this.getAllQuanlyfile(),yield e.json()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||r)(g(W),g(I),g(M))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Me=["drawer"],Le=()=>[5,10,25,100];function be(r,i){if(r&1&&(l(0,"th",22),p(1),s()),r&2){let t=d().$implicit,e=d();o(),h("",e.ColumnName[t]," ")}}function xe(r,i){if(r&1&&(l(0,"td",21),p(1),s()),r&2){let t=i.$implicit;o(),h(" ",t.Metadata.mimetype," ")}}function qe(r,i){r&1&&f(0,xe,2,1,"td",23)}function Pe(r,i){if(r&1&&(l(0,"td",21),y(1,"img",24),s()),r&2){let t=i.$implicit;o(),c("src","https://sandbox.Rau S\u1EA1ch Tr\u1EA7n Gia.com/"+t.Lienket,E)}}function ke(r,i){r&1&&f(0,Pe,2,1,"td",23)}function De(r,i){if(r&1&&(l(0,"td",21),p(1),s()),r&2){let t=i.$implicit,e=i.index,a=d(2).$implicit;o(),h(" ",a==="STT"?e+1:t[a]," ")}}function Re(r,i){r&1&&f(0,De,2,1,"td",23)}function Ie(r,i){if(r&1&&(F(0,15),f(1,be,2,1,"th",20)(2,qe,1,0,"td",21)(3,ke,1,0,"td",21)(4,Re,1,0,"td",21),V()),r&2){let t,e=i.$implicit;c("matColumnDef",e),o(2),O((t=e)==="Metadata"?2:t==="Hinhanh"?3:4)}}function Ee(r,i){r&1&&y(0,"tr",25)}function Qe(r,i){if(r&1){let t=k();l(0,"tr",26),w("click",function(){let a=_(t).$implicit,n=d();return v(n.goToDetail(a))}),s()}}function Oe(r,i){if(r&1&&(l(0,"tr",27)(1,"td",28),p(2),s()()),r&2){d();let t=H(10);o(2),h('Kh\xF4ng t\xECm th\u1EA5y "',t.value,'"')}}var we=class r{constructor(i,t){this._breakpointObserver=i;this._router=t}Detail={};dataSource;displayedColumns=["STT","Title","Hinhanh","Type","Metadata","CreateAt"];ColumnName={STT:"STT",Title:"Ti\xEAu \u0110\u1EC1",Hinhanh:"H\xECnh \u1EA2nh",Type:"Lo\u1EA1i l\u01B0u tr\u1EEF",Metadata:"Th\xF4ng Tin",CreateAt:"Ng\xE0y T\u1EA1o"};paginator;sort;drawer;_QuanlyfilesService=R(x);ListFile=[];ngOnInit(){return u(this,null,function*(){yield this._QuanlyfilesService.getAllQuanlyfile().then(i=>{this.ListFile=i,this.dataSource=new ve(i),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}),this.Detail.id?this.drawer.open():this.drawer.close(),this._breakpointObserver.observe([G.Handset]).subscribe(i=>{i.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i",this.paginator.pageSize=30}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Create(){this.drawer.open(),this._router.navigate(["admin/quanlyfiles",0])}goToDetail(i){this.drawer.open(),this.Detail=i,this._router.navigate(["admin/quanlyfiles",i.id])}static \u0275fac=function(t){return new(t||r)(P(z),P(M))};static \u0275cmp=Q({type:r,selectors:[["app-listquanlyfile"]],viewQuery:function(t,e){if(t&1&&(C(L,5),C(b,5),C(Me,7)),t&2){let a;S(a=T())&&(e.paginator=a.first),S(a=T())&&(e.sort=a.first),S(a=T())&&(e.drawer=a.first)}},decls:24,vars:6,consts:[["drawer",""],["input",""],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","lg:!w-1/3","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","relative","grid","lg:grid-cols-2","gap-2","justify-between","items-center"],[1,"w-full","flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"cursor-pointer","material-symbols-outlined","p-2","rounded-lg","hover:bg-slate-100",3,"click"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["class","whitespace-nowrap","mat-cell","",4,"matCellDef"],[1,"h-10",3,"src"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){if(t&1){let a=k();l(0,"mat-drawer-container",2)(1,"mat-drawer",3,0),y(3,"router-outlet"),s(),l(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"input",9,1),w("keyup",function(Ce){return _(a),v(e.applyFilter(Ce))}),s(),l(11,"div",10)(12,"span",11),p(13,"search"),s()()(),l(14,"span",12),w("click",function(){return _(a),v(e.Create())}),p(15,"add_circle"),s()()(),l(16,"div",13)(17,"table",14),A(18,Ie,5,2,"ng-container",15,j),f(20,Ee,1,0,"tr",16)(21,Qe,1,0,"tr",17)(22,Oe,3,1,"tr",18),s(),y(23,"mat-paginator",19),s()()()()}t&2&&(o(),c("position","end"),o(16),c("dataSource",e.dataSource),o(),N(e.displayedColumns),o(2),c("matHeaderRowDef",e.displayedColumns),o(),c("matRowDefColumns",e.displayedColumns),o(2),c("pageSizeOptions",$(5,Le)))},dependencies:[ie,re,_e,se,ue,fe,ce,le,de,pe,me,ye,he,ge,oe,b,ne,ae,L,te,Z,X,Y,U,ee,K,B],encapsulation:2})};export{we as a};
