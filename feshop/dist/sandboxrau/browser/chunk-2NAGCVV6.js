import{a as Ne}from"./chunk-RWN7QG6G.js";import{b as le,c as de,d as ce}from"./chunk-6DJAFDTV.js";import{a as M,b as ge,c as Ce,d as Te,e as ye,f as be,h as Se,i as _e,k as ve,l as we,n as ke,o as xe,q as De,r as Me,s as Ae,t as Le}from"./chunk-G2W2EW2N.js";import{a as ne,b as re,c as oe,d as se}from"./chunk-PGBUMDHU.js";import{b as ie,c as ae}from"./chunk-G2JGHO3B.js";import{b as D,c as fe}from"./chunk-OPSDER4V.js";import{b as he}from"./chunk-Y4AWVQ5M.js";import{c as W,g as ee,h as te}from"./chunk-HNUPK34J.js";import{a as Ie,b as Ee}from"./chunk-BALLAHYH.js";import{a as ue,c as pe,e as me}from"./chunk-ACURKAFZ.js";import{q as K,r as Y}from"./chunk-H6K2N2AQ.js";import{a as Pe}from"./chunk-UJFQ3LGV.js";import{a as g}from"./chunk-KQPDVZYA.js";import{o as U,p as x}from"./chunk-XPJYUAXQ.js";import{q as j,s as J,u as Q}from"./chunk-UAZLFQKL.js";import{$b as E,Ac as $,Bc as c,Cc as F,Dc as p,Gb as b,Lc as Z,Oa as X,Rc as O,Sb as m,Tc as z,Zb as G,_b as H,ac as N,bc as o,cc as s,dc as S,ec as B,fa as R,fc as V,hc as _,ka as y,la as L,mb as l,mc as T,nb as P,oc as d,ua as h,ub as I,va as f,vc as v,wc as w,xc as k,zb as q}from"./chunk-QJD4TKMG.js";import{i as u}from"./chunk-66YHNWRR.js";var $e=[{id:1,Title:"H\u1ECD T\xEAn",value:"Hoten",Type:"text",required:!0,isShow:!0},{id:2,Title:"Email",value:"email",Type:"select",required:!0,isShow:!0},{id:3,Title:"SDT",value:"SDT",Type:"textarea",required:!1},{id:4,Title:"M\u1EADt Kh\u1EA9u",value:"password",Type:"radio",required:!0},{id:5,Title:"Tr\u1EA1ng Th\xE1i",value:"Status",Type:"toggle",required:!0}];var A=class a{constructor(i,e,t){this._StorageService=i;this.platformId=e;this.router=t;this.isBrowser=Q(this.platformId)}isBrowser;ListXuatnhapton=I([]);Xuatnhapton=I({});CreateXuatnhapton(i){return u(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},t=yield fetch(`${g.APIURL}/phieukho`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let n=yield t.json();return t.ok,this.getAllXuatnhapton(),n}catch(e){return console.error(e)}})}getAllXuatnhapton(){return u(this,null,function*(){try{let i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},e=yield fetch(`${g.APIURL}/phieukho`,i);e.ok;let t=yield e.json();return this.ListXuatnhapton.set(t),t}catch(i){return console.error(i)}})}SearchXuatnhapton(i){return u(this,null,function*(){try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},t=yield fetch(`${g.APIURL}/setting/search`,e);if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let n=yield t.json();return this.Xuatnhapton.set(n.items),n}catch(e){return console.error(e)}})}getXuatnhaptonByid(i){return u(this,null,function*(){try{let e={method:"GET",headers:{"Content-Type":"application/json"}},t=yield fetch(`${g.APIURL}/phieukho/findid/${i}`,e);if(!t.ok)if(t.status===401){let r=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===403){let r=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(t.status===500){let r=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let n=yield t.json();return this.Xuatnhapton.set(n),n}catch(e){return console.error(e)}})}updateOneXuatnhapton(i){return u(this,null,function*(){try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},t=yield fetch(`${g.APIURL}/phieukho/${i.id}`,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let n=yield t.json();return t.ok,this.getAllXuatnhapton(),n}catch(e){return console.error(e)}})}DeleteXuatnhapton(i){return u(this,null,function*(){try{let e={method:"DELETE",headers:{"Content-Type":"application/json"}},t=yield fetch(`${g.APIURL}/phieukho/${i.id}`,e);if(!t.ok)if(t.status===401){let n=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(t.status===403){let n=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else if(t.status===500){let n=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}else{let n=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:n}})}return this.getAllXuatnhapton(),yield t.json()}catch(e){return console.error(e)}})}static \u0275fac=function(e){return new(e||a)(y(Pe),y(X),y(x))};static \u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"})};var Re=["drawer"],Xe=(a,i)=>i.key,qe=()=>[5,10,25,100];function Ge(a,i){if(a&1){let e=_();o(0,"button",29),T("click",function(n){let r=h(e).$implicit;return d().toggleColumn(r),f(n.stopPropagation())}),o(1,"mat-icon"),c(2),s(),o(3,"span"),c(4),s()()}if(a&2){let e=i.$implicit;l(2),F(e.isShow?"check_box":"check_box_outline_blank"),l(2),F(e.value)}}function He(a,i){if(a&1&&(o(0,"th",32)(1,"span",33),c(2),s()()),a&2){let e=d().$implicit,t=d();l(2),p(" ",t.ColumnName[e]," ")}}function Be(a,i){if(a&1&&(o(0,"span",33),c(1),s()),a&2){let e=d().index;l(),p(" ",e+1," ")}}function Ve(a,i){if(a&1&&(o(0,"span",33),c(1),s()),a&2){let e,t=d().$implicit,n=d().$implicit,r=d();l(),p(" ",(e=r.getKhohang(t[n]))==null?null:e.Title," ")}}function Ze(a,i){if(a&1&&(o(0,"span",33),c(1),O(2,"date"),s()),a&2){let e=d().$implicit,t=d().$implicit;l(),p(" ",z(2,1,e[t],"dd/MM/yyyy")," ")}}function je(a,i){if(a&1&&(o(0,"span",33),c(1),O(2,"date"),s()),a&2){let e=d().$implicit,t=d().$implicit;l(),p(" ",z(2,1,e[t],"dd/MM/yyyy")," ")}}function Je(a,i){if(a&1&&(o(0,"span",33),c(1),s()),a&2){let e=d().$implicit,t=d().$implicit;l(),p(" ",e[t]," ")}}function Qe(a,i){if(a&1&&(o(0,"td",34),b(1,Be,2,1,"span",33)(2,Ve,2,1,"span",33)(3,Ze,3,4,"span",33)(4,je,3,4,"span",33)(5,Je,2,1,"span",33),s()),a&2){let e,t=d().$implicit;l(),G((e=t)==="STT"?1:e==="idKhohang"?2:e==="CreateAt"?3:e==="Ngaylapphieu"?4:5)}}function Ue(a,i){if(a&1&&(B(0,24),b(1,He,3,1,"th",30)(2,Qe,6,1,"td",31),V()),a&2){let e=i.$implicit;m("matColumnDef",e)}}function Ke(a,i){a&1&&S(0,"tr",35)}function Ye(a,i){if(a&1){let e=_();o(0,"tr",36),T("click",function(){let n=h(e).$implicit,r=d();return f(r.goToDetail(n))}),s()}}function We(a,i){if(a&1&&(o(0,"tr",37)(1,"td",38),c(2),s()()),a&2){d();let e=$(10);l(2),p('Kh\xF4ng t\xECm th\u1EA5y "',e.value,'"')}}var Fe=class a{constructor(i,e){this._breakpointObserver=i;this._router=e}Detail={};dataSource;displayedColumns=["STT","MaPhieu","Donhang","idKhohang","Ngaylapphieu","Type","CreateAt","idCreate","status"];ColumnName={STT:"STT",MaPhieu:"M\xE3 Phi\u1EBFu",Donhang:"\u0110\u01A1n H\xE0ng",idKhohang:"Kho H\xE0ng",Ngaylapphieu:"Ng\xE0y L\u1EADp Phi\u1EBFu",Type:"Lo\u1EA1i Phi\u1EBFu",CreateAt:"Ng\xE0y T\u1EA1o",idCreate:"Ng\u01B0\u1EDDi T\u1EA1o",status:"Tr\u1EA1ng Th\xE1i"};Forms=$e;FilterColumns=JSON.parse(localStorage.getItem("xuatnhapton_FilterColumns")||"[]");Columns=[];Listxuatnhapton=[];ListKhohang=[];paginator;sort;drawer;_xuatnhaptonsService=L(A);_QuanlykhosService=L(Ne);CountItem=0;ngOnInit(){return u(this,null,function*(){yield this._xuatnhaptonsService.getAllXuatnhapton(),this.Listxuatnhapton=this._xuatnhaptonsService.ListXuatnhapton(),this.CountItem=this.Listxuatnhapton.length,console.log(this._xuatnhaptonsService.ListXuatnhapton()),this._QuanlykhosService.getAllQuanlykho().then(i=>{this.ListKhohang=i}),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(i=>({key:i,value:this.ColumnName[i],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("xuatnhapton_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,e)=>(e.isShow&&(i[e.key]=e.value),i),{})}setupDataSource(){this.dataSource=new Le(this.Listxuatnhapton),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}setupDrawer(){this._breakpointObserver.observe([Y.Handset]).subscribe(i=>{i.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(i){let e=this.FilterColumns.find(t=>t.key===i.key);e&&(e.isShow=!e.isShow,this.updateDisplayedColumns())}getKhohang(i){return this.ListKhohang.find(e=>e.id===i)}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,e)=>(e.isShow&&(i[e.key]=e.value),i),{}),this.setupDataSource(),localStorage.setItem("xuatnhapton_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let e=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(t=>t.value.toLowerCase().includes(e))}applyFilter(i){let e=i.target.value;this.dataSource.filter=e.trim().toLowerCase(),console.log(this.dataSource),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}create(){this.drawer.open(),this._router.navigate(["admin/xuatnhapton",0])}goToDetail(i){this.drawer.open(),this.Detail=i,this._router.navigate(["admin/xuatnhapton",i.id])}static \u0275fac=function(e){return new(e||a)(P(K),P(x))};static \u0275cmp=q({type:a,selectors:[["app-listxuatnhapton"]],viewQuery:function(e,t){if(e&1&&(v(D,5),v(M,5),v(Re,7)),e&2){let n;w(n=k())&&(t.paginator=n.first),w(n=k())&&(t.sort=n.first),w(n=k())&&(t.drawer=n.first)}},decls:43,vars:8,consts:[["drawer",""],["input",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","lg:!w-2/3","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","flex","flex-row","space-x-2","items-center","justify-between","bg-white","rounded-lg","p-2"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["mat-flat-button","","color","primary",3,"click"],[1,"whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[1,"w-full","opverflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4"],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,t){if(e&1){let n=_();o(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),S(3,"router-outlet"),s(),o(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"input",10,1),T("keyup",function(C){return h(n),f(t.applyFilter(C))}),s(),o(11,"div",11)(12,"span",12),c(13,"search"),s()()(),o(14,"button",13),T("click",function(){return h(n),f(t.create())}),o(15,"span"),c(16,"Th\xEAm"),s(),o(17,"mat-icon"),c(18,"add_circle"),s()()(),o(19,"div",8)(20,"span",14),c(21),s(),o(22,"button",15)(23,"mat-icon"),c(24,"tune"),s()(),o(25,"mat-menu",null,2)(27,"div",16)(28,"mat-form-field",17)(29,"input",18),T("input",function(C){return h(n),f(t.doFilterColumns(C))})("click",function(C){return h(n),f(C.stopPropagation())}),s(),o(30,"mat-icon",19),c(31,"search"),s()()(),o(32,"div",20),E(33,Ge,5,2,"button",21,Xe),s()()()(),o(35,"div",22)(36,"table",23),E(37,Ue,3,1,"ng-container",24,H),b(39,Ke,1,0,"tr",25)(40,Ye,1,0,"tr",26)(41,We,3,1,"tr",27),s(),S(42,"mat-paginator",28),s()()()()}if(e&2){let n=$(26);l(),m("position","end"),l(20),p(" ",t.CountItem," Phi\u1EBFu Kho "),l(),m("matMenuTriggerFor",n),l(11),N(t.FilterColumns),l(3),m("dataSource",t.dataSource),l(),N(t.displayedColumns),l(2),m("matHeaderRowDef",t.displayedColumns),l(),m("matRowDefColumns",t.displayedColumns),l(2),m("pageSizeOptions",Z(7,qe))}},dependencies:[te,ee,W,ae,ie,Ae,Te,be,we,Se,ye,ke,_e,ve,xe,De,Me,Ce,M,ge,fe,D,se,re,ne,oe,ce,le,de,U,Ee,Ie,me,ue,pe,he,J,j],encapsulation:2})};export{A as a,Fe as b};
