import{a as qe,b as Je,c as Ue,k as Xe}from"./chunk-G5UUSW7Z.js";import{b as Te,c as ve,d as De}from"./chunk-6DJAFDTV.js";import{a as Y,b as ke,c as Ee,d as Le,e as Ie,f as Ye,g as Be,h as Oe,i as Ne,j as Re,k as Ke,l as He,m as Ae,n as Ge,o as ze,p as We,q as Qe,r as $e,s as je,t as A}from"./chunk-G2W2EW2N.js";import{a as ye,b as Se,c as Me,d as we}from"./chunk-PGBUMDHU.js";import{a as at}from"./chunk-AUNJNMHO.js";import{b as _e,c as Ce}from"./chunk-G2JGHO3B.js";import{b as I,c as Pe}from"./chunk-OPSDER4V.js";import{a as be,b as Fe}from"./chunk-Y4AWVQ5M.js";import{a as ue,c as ce,d as he,g as fe,h as ge}from"./chunk-HNUPK34J.js";import"./chunk-TRXUX2Y2.js";import{b as ae,g as oe,j as re,r as le}from"./chunk-DXUZJIEG.js";import"./chunk-ZAOL63WT.js";import{a as Ze,b as et}from"./chunk-BALLAHYH.js";import{a as tt}from"./chunk-ZTXOZSEW.js";import{c as xe,e as Ve}from"./chunk-ACURKAFZ.js";import{R as pe,_ as de,q as me,r as se}from"./chunk-H6K2N2AQ.js";import"./chunk-JE6TT6BP.js";import"./chunk-UJFQ3LGV.js";import"./chunk-KQPDVZYA.js";import{o as te,p as ie,q as ne}from"./chunk-XPJYUAXQ.js";import{q as X,r as Z,s as ee}from"./chunk-UAZLFQKL.js";import{$b as T,Ac as L,Bc as p,Cc as D,Dc as _,Gb as w,Hc as x,Ic as V,Jc as b,Kc as q,Lc as y,Mc as J,Nc as U,Rc as S,Sb as m,Tc as M,Zb as K,_b as F,ac as v,bc as l,cc as r,dc as g,ec as $,fc as j,gb as z,hc as H,la as G,mb as o,mc as C,nb as R,oc as d,ua as c,ub as W,va as h,vc as P,wc as k,xc as E,zb as Q}from"./chunk-QJD4TKMG.js";import"./chunk-EU2KAMEK.js";import{a as O,g as nt,i as N}from"./chunk-66YHNWRR.js";var f=nt(at());var ot=["drawer"],rt=(i,e)=>e.key,B=()=>({standalone:!0}),lt=()=>({id:1,Title:"\u0110\u01A1n S\u1EC9",value:"donsi"}),mt=()=>({id:2,Title:"\u0110\u01A1n L\u1EBB",value:"donle"}),st=(i,e)=>[i,e],pt=()=>[10,25,100],dt=i=>["donsi",i];function ut(i,e){if(i&1){let t=H();l(0,"button",38),C("click",function(s){let u=c(t).$implicit;return d().toggleColumn(u),h(s.stopPropagation())}),l(1,"mat-icon"),p(2),r(),l(3,"span"),p(4),r()()}if(i&2){let t=e.$implicit;o(2),D(t.isShow?"check_box":"check_box_outline_blank"),o(2),D(t.value)}}function ct(i,e){if(i&1&&(l(0,"mat-option",27),p(1),r()),i&2){let t=e.$implicit;m("value",t.value),o(),D(t.Title)}}function ht(i,e){if(i&1&&(l(0,"mat-option",27),p(1),r()),i&2){let t=e.$implicit;m("value",t.value),o(),D(t.Title)}}function ft(i,e){if(i&1&&(l(0,"th",42),p(1),r()),i&2){let t=d().$implicit,n=d();o(),_("",n.ColumnName[t]," ")}}function gt(i,e){if(i&1&&p(0),i&2){let t=d().index;_(" ",t+1," ")}}function _t(i,e){if(i&1&&(p(0),S(1,"date")),i&2){let t=d().$implicit,n=d().$implicit;_(" ",M(1,1,t[n],"dd/MM/yyyy")," ")}}function Ct(i,e){if(i&1&&(p(0),S(1,"date")),i&2){let t=d().$implicit,n=d().$implicit;_(" ",M(1,1,t[n],"dd/MM/yyyy")," ")}}function yt(i,e){if(i&1&&g(0,"div",45),i&2){let t=d().$implicit,n=d().$implicit;m("innerHTML",t[n],z)}}function St(i,e){if(i&1&&(l(0,"td",43)(1,"a",44),w(2,gt,1,1)(3,_t,2,4)(4,Ct,2,4)(5,yt,1,1,"div",45),r()()),i&2){let t=e.$implicit,n=d().$implicit;o(),m("routerLink",J(2,dt,t.id)),o(),K(n==="STT"?2:n==="Ngaygiao"?3:n==="CreateAt"?4:5)}}function Mt(i,e){i&1&&p(0," T\u1ED5ng C\u1ED9ng ")}function wt(i,e){if(i&1&&(p(0),S(1,"number")),i&2){let t=d(3);_(" ",M(1,1,t.TinhTong(t.dataSource.filteredData,"Soluong"),"1.0-2")," ")}}function Tt(i,e){if(i&1&&(p(0),S(1,"number")),i&2){let t=d(3);_(" ",M(1,1,t.TinhTong(t.dataSource.filteredData,"SLTN"),"1.0-2")," ")}}function vt(i,e){if(i&1&&(p(0),S(1,"number")),i&2){let t=d(3);_(" ",M(1,1,t.TinhTong(t.dataSource.filteredData,"SLTG"),"1.0-2")," ")}}function Dt(i,e){}function xt(i,e){if(i&1&&(l(0,"td",46),w(1,Mt,1,0)(2,wt,2,4)(3,Tt,2,4)(4,vt,2,4)(5,Dt,0,0),r()),i&2){let t=d().$implicit;o(),K(t==="STT"?1:t==="Soluong"?2:t==="SLTN"?3:t==="SLTG"?4:5)}}function Vt(i,e){if(i&1&&($(0,32),w(1,ft,2,1,"th",39)(2,St,6,4,"td",40)(3,xt,6,1,"td",41),j()),i&2){let t=e.$implicit;m("matColumnDef",t)}}function bt(i,e){i&1&&g(0,"tr",47)}function Ft(i,e){i&1&&g(0,"tr",48)}function Pt(i,e){i&1&&g(0,"tr",49)}function kt(i,e){i&1&&(l(0,"tr",50)(1,"td",51),p(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}var it=class i{constructor(e,t){this._breakpointObserver=e;this._router=t}Detail={};dataSource;displayedColumns=["MaDonHang","TenKH","SDT","Diachi","MaSP","giagoc","Title","dvt","Soluong","SLTG","SLTN","Tongtien","TongtienG","TongtienN","Ghichu","CreateAt","Status"];ColumnName={MaDonHang:"M\xE3 \u0110\u01A1n H\xE0ng",TenKH:"T\xEAn Kh\xE1ch H\xE0ng",SDT:"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",Diachi:"\u0110\u1ECBa Ch\u1EC9",MaSP:"M\xE3 SP",Title:"T\xEAn S\u1EA3n Ph\u1EA9m",giagoc:"Gi\xE1 G\u1ED1c",dvt:"\u0110VT",Soluong:"SL \u0110\u1EB7t",SLTG:"SL Giao",SLTN:"SL Nh\u1EADn",Tongtien:"TT \u0110\u1EB7t",TongtienG:"TT Giao",TongtienN:"TT Nh\u1EADn",Ghichu:"Ghi Ch\xFA",CreateAt:"Ng\xE0y T\u1EA1o",Status:"Tr\u1EA1ng Th\xE1i"};Columns=[];ListDate=[{id:1,Title:"1 Ng\xE0y",value:"day"},{id:2,Title:"1 Tu\u1EA7n",value:"week"},{id:3,Title:"1 Th\xE1ng",value:"month"},{id:4,Title:"1 N\u0103m",value:"year"}];paginator;sort;drawer;_DonhangsService=G(tt);CountItem=0;ListDonhang=W([]);ListVandon=[];SearchParams={Batdau:(0,f.default)().format("YYYY-MM-DD"),Ketthuc:(0,f.default)().add(1,"day").format("YYYY-MM-DD"),Type:"donsi",pageSize:9999,pageNumber:0};Chonthoigian="day";FilterColumns=JSON.parse(localStorage.getItem("Vandon_FilterColumns")||"[]");ngOnInit(){return N(this,null,function*(){yield this.loadData(),this.setupBreakpointObserver(),this.initializeColumns()})}ApplyDate(){this.loadData()}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("Vandon_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}loadData(){return N(this,null,function*(){yield this._DonhangsService.SearchDonhang(this.SearchParams),this.ListDonhang=this._DonhangsService.ListDonhang,this.ListVandon=this.ListDonhang().flatMap(e=>{let t={MaDonHang:e?.MaDonHang,TenKH:e?.Khachhang?.TenKH,SDT:e?.Khachhang?.SDT,Diachi:e?.Khachhang?.Diachi,CreateAt:e.CreateAt,Status:e.Status};return e.Giohangs.map(n=>O(O({},n),t))}),this.dataSource=new A(this.ListVandon),this.CountItem=this.dataSource.data.length,this.sort&&(this.dataSource.sort=this.sort),this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i")})}setupBreakpointObserver(){this._breakpointObserver.observe([se.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="over"})}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(n=>n.value.toLowerCase().includes(t))}onBatdauChange(e){e.value&&this.loadData()}onKetthucChange(e){e.value&&this.loadData()}toggleColumn(e){let t=this.FilterColumns.find(n=>n.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}TinhTong(e,t){return e?.reduce((n,s)=>n+(s[t]||0),0)||0}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),this.setupDataSource(),localStorage.setItem("Vandon_FilterColumns",JSON.stringify(this.FilterColumns))}setupDataSource(){this.dataSource=new A(this.ListVandon),this.CountItem=this.dataSource.data.length,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}onSelectionChange(e){({day:()=>{this.SearchParams.Batdau=(0,f.default)().startOf("day").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,f.default)().endOf("day").add(1,"day").format("YYYY-MM-DD")},week:()=>{this.SearchParams.Batdau=(0,f.default)().startOf("week").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,f.default)().endOf("week").format("YYYY-MM-DD")},month:()=>{this.SearchParams.Batdau=(0,f.default)().startOf("month").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,f.default)().endOf("month").format("YYYY-MM-DD")},year:()=>{this.SearchParams.Batdau=(0,f.default)().startOf("year").format("YYYY-MM-DD"),this.SearchParams.Ketthuc=(0,f.default)().endOf("year").format("YYYY-MM-DD")}})[e.value]?.(),this.loadData()}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.CountItem=this.dataSource.filteredData.length,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Create(){this.drawer.open(),this._router.navigate(["admin/donhang/donsi",0])}static \u0275fac=function(t){return new(t||i)(R(me),R(ie))};static \u0275cmp=Q({type:i,selectors:[["app-vandon"]],viewQuery:function(t,n){if(t&1&&(P(I,7),P(Y,5),P(ot,7)),t&2){let s;k(s=E())&&(n.paginator=s.first),k(s=E())&&(n.sort=s.first),k(s=E())&&(n.drawer=s.first)}},features:[q([pe()])],decls:66,vars:39,consts:[["drawer",""],["input",""],["menu","matMenu"],["pickerBatdau",""],["pickerKetthuc",""],["paginator",""],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","relative","flex","flex-col","space-y-2","justify-between","items-center","bg-white","rounded-lg","p-2"],[1,"w-full","flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],[1,"p-2","rounded-lg","bg-slate-200"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[1,"w-full","grid","lg:grid-cols-4","grid-cols-2","gap-2","items-center"],[3,"appearance","subscriptSizing"],[3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[3,"value"],["matInput","",3,"dateChange","ngModelChange","matDatepicker","ngModel","ngModelOptions"],["matIconSuffix","",3,"for"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-slate-100",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","lg:whitespace-normal whitespace-nowrap","mat-cell","",4,"matCellDef"],["class","font-bold","mat-footer-cell","",4,"matFooterCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["mat-cell","",1,"lg:whitespace-normal","whitespace-nowrap"],[1,"hover:text-blue-500",3,"routerLink"],[3,"innerHTML"],["mat-footer-cell","",1,"font-bold"],["mat-header-row",""],["mat-row","",1,"hover:bg-slate-100"],["mat-footer-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,n){if(t&1){let s=H();l(0,"mat-drawer-container",6)(1,"mat-drawer",7,0),g(3,"router-outlet"),r(),l(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"input",13,1),C("keyup",function(a){return c(s),h(n.applyFilter(a))}),r(),l(11,"div",14)(12,"span",15),p(13,"search"),r()()(),l(14,"span",16),p(15),r(),l(16,"button",17)(17,"mat-icon"),p(18,"tune"),r()(),l(19,"mat-menu",null,2)(21,"div",18)(22,"mat-form-field",19)(23,"input",20),C("input",function(a){return c(s),h(n.doFilterColumns(a))})("click",function(a){return c(s),h(a.stopPropagation())}),r(),l(24,"mat-icon",21),p(25,"search"),r()()(),l(26,"div",22),T(27,ut,5,2,"button",23,rt),r()()(),l(29,"div",24)(30,"mat-form-field",25)(31,"mat-label"),p(32,"Lo\u1EA1i \u0110\u01A1n"),r(),l(33,"mat-select",26),b("ngModelChange",function(a){return c(s),V(n.SearchParams.Type,a)||(n.SearchParams.Type=a),h(a)}),C("selectionChange",function(a){return c(s),h(n.onSelectionChange(a))}),T(34,ct,2,2,"mat-option",27,F),r()(),l(36,"mat-form-field",25)(37,"mat-label"),p(38,"Ch\u1ECDn Th\u1EDDi Gian"),r(),l(39,"mat-select",26),b("ngModelChange",function(a){return c(s),V(n.Chonthoigian,a)||(n.Chonthoigian=a),h(a)}),C("selectionChange",function(a){return c(s),h(n.onSelectionChange(a))}),T(40,ht,2,2,"mat-option",27,F),r()(),l(42,"mat-form-field",25)(43,"mat-label"),p(44,"B\u1EAFt \u0110\u1EA7u"),r(),l(45,"input",28),C("dateChange",function(a){return c(s),h(n.onBatdauChange(a))}),b("ngModelChange",function(a){return c(s),V(n.SearchParams.Batdau,a)||(n.SearchParams.Batdau=a),h(a)}),r(),g(46,"mat-datepicker-toggle",29)(47,"mat-datepicker",null,3),r(),l(49,"mat-form-field",25)(50,"mat-label"),p(51,"K\u1EBFt Th\xFAc"),r(),l(52,"input",28),C("dateChange",function(a){return c(s),h(n.onKetthucChange(a))}),b("ngModelChange",function(a){return c(s),V(n.SearchParams.Ketthuc,a)||(n.SearchParams.Ketthuc=a),h(a)}),r(),g(53,"mat-datepicker-toggle",29)(54,"mat-datepicker",null,4),r()()(),l(56,"div",30)(57,"table",31),T(58,Vt,4,1,"ng-container",32,F),w(60,bt,1,0,"tr",33)(61,Ft,1,0,"tr",34)(62,Pt,1,0,"tr",35)(63,kt,3,0,"tr",36),r(),g(64,"mat-paginator",37,5),r()()()()}if(t&2){let s=L(20),u=L(48),a=L(55);m("@.disabled",!0),o(),m("position","end"),o(14),_(" ",n.CountItem," S\u1EA3n Ph\u1EA9m "),o(),m("matMenuTriggerFor",s),o(11),v(n.FilterColumns),o(3),m("appearance","outline")("subscriptSizing","dynamic"),o(3),x("ngModel",n.SearchParams.Type),m("ngModelOptions",y(29,B)),o(),v(U(32,st,y(30,lt),y(31,mt))),o(2),m("appearance","outline")("subscriptSizing","dynamic"),o(3),x("ngModel",n.Chonthoigian),m("ngModelOptions",y(35,B)),o(),v(n.ListDate),o(2),m("appearance","outline")("subscriptSizing","dynamic"),o(3),m("matDatepicker",u),x("ngModel",n.SearchParams.Batdau),m("ngModelOptions",y(36,B)),o(),m("for",u),o(3),m("appearance","outline")("subscriptSizing","dynamic"),o(3),m("matDatepicker",a),x("ngModel",n.SearchParams.Ketthuc),m("ngModelOptions",y(37,B)),o(),m("for",a),o(4),m("dataSource",n.dataSource),o(),v(n.displayedColumns),o(2),m("matHeaderRowDef",n.displayedColumns),o(),m("matRowDefColumns",n.displayedColumns),o(),m("matFooterRowDef",n.displayedColumns),o(2),m("pageSizeOptions",y(38,pt))}},dependencies:[ge,fe,ue,ce,he,Ce,_e,je,Le,Ye,He,Oe,Ie,Ge,Be,Ae,Ne,Ke,Re,ze,Qe,We,$e,Ee,Y,ke,Pe,I,we,Se,ye,Me,De,Te,ve,te,et,Ze,Ve,xe,Fe,be,de,le,ae,oe,re,Xe,qe,Je,Ue,ne,ee,Z,X],encapsulation:2,changeDetection:0})};export{it as VandonComponent};
