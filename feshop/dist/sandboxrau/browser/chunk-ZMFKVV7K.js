import{a as Qt}from"./chunk-WKI54F45.js";import{a as jt}from"./chunk-AXZK7U5C.js";import{b as _t,c as ft,d as ht}from"./chunk-6DJAFDTV.js";import{a as T,b as Mt,c as Tt,d as Ft,e as bt,f as Et,h as Lt,i as kt,k as Nt,l as Vt,n as It,o as Rt,q as Ot,r as Pt,s as At,t as Bt}from"./chunk-G2W2EW2N.js";import{a as wt,c as xt}from"./chunk-ZAG3K7T2.js";import{a as mt,b as pt,c as ut,d as dt}from"./chunk-PGBUMDHU.js";import{b as ct,c as st}from"./chunk-G2JGHO3B.js";import{b as M,c as Dt}from"./chunk-OPSDER4V.js";import{b as St}from"./chunk-Y4AWVQ5M.js";import{a as at,c as ot,g as rt,h as lt}from"./chunk-HNUPK34J.js";import{b as U,g as Y,j as tt,r as et}from"./chunk-DXUZJIEG.js";import{a as yt,b as vt}from"./chunk-ZAOL63WT.js";import{a as Ht,b as zt}from"./chunk-BALLAHYH.js";import{a as $t}from"./chunk-UHVDGNAF.js";import{c as gt,e as Ct}from"./chunk-ACURKAFZ.js";import{q as it,r as nt}from"./chunk-H6K2N2AQ.js";import{o as W,p as Z}from"./chunk-XPJYUAXQ.js";import{l as J,m as K,q as X,s as G}from"./chunk-UAZLFQKL.js";import{$b as E,Ac as k,Bc as m,Cc as D,Dc as h,Fc as $,Gb as g,Hc as H,Ic as z,Jc as Q,Lc as N,Rc as j,Sb as _,Tc as q,Wb as I,Zb as R,_b as O,ac as L,bc as o,cc as r,dc as x,ec as P,fc as A,hc as C,la as w,mb as c,mc as f,nb as b,oc as s,sc as B,ua as u,va as d,vc as S,wc as y,xc as v,zb as V}from"./chunk-QJD4TKMG.js";import{i as F}from"./chunk-66YHNWRR.js";var Gt=["drawer"],Wt=(n,e)=>e.key,Zt=()=>[5,10,25,100],Ut=()=>({standalone:!0});function Yt(n,e){if(n&1){let t=C();o(0,"button",30),f("click",function(a){let l=u(t).$implicit;return s().toggleColumn(l),d(a.stopPropagation())}),o(1,"mat-icon"),m(2),r(),o(3,"span"),m(4),r()()}if(n&2){let t=e.$implicit;c(2),D(t.isShow?"check_box":"check_box_outline_blank"),c(2),D(t.value)}}function te(n,e){if(n&1){let t=C();o(0,"mat-form-field",33)(1,"mat-label"),m(2),r(),o(3,"input",34),f("keyup",function(){u(t);let a=s(2);return d(a.applyFilter())}),Q("ngModelChange",function(a){let l=u(t).$implicit,p=s(2);return z(p.filterValues[l],a)||(p.filterValues[l]=a),d(a)}),r()()}if(n&2){let t=e.$implicit,i=s(2);c(2),D(t),c(),B("placeholder","Vui l\xF2ng Nh\u1EADp ",t,""),H("ngModel",i.filterValues[t]),_("ngModelOptions",N(5,Ut))}}function ee(n,e){if(n&1&&(o(0,"div",31),g(1,te,4,6,"mat-form-field",32),r()),n&2){let t=s();c(),_("ngForOf",t.displayedColumns)}}function ie(n,e){if(n&1&&(o(0,"th",37)(1,"span",38),m(2),r()()),n&2){let t=s().$implicit,i=s();c(2),h(" ",i.ColumnName[t]," ")}}function ne(n,e){if(n&1&&(o(0,"span",40),m(1),r()),n&2){let t=s().$implicit,i=s().$implicit;c(),h(" ",t[i].length," ")}}function ae(n,e){if(n&1&&(o(0,"span",40),m(1),r()),n&2){let t,i=s().$implicit,a=s().$implicit,l=s();c(),$(" ",(t=l.GetNhacungcap(i[a]))==null?null:t.Title," ",(t=l.GetNhacungcap(i[a]))==null?null:t.email," ",(t=l.GetNhacungcap(i[a]))==null?null:t.SDT," ")}}function oe(n,e){if(n&1&&(o(0,"span",40),m(1),r()),n&2){let t=s().index;c(),h(" ",t+1," ")}}function re(n,e){if(n&1&&(o(0,"span",40),m(1),j(2,"date"),r()),n&2){let t=s().$implicit,i=s().$implicit;c(),h(" ",q(2,1,t[i],"dd/MM/yyyy")," ")}}function le(n,e){if(n&1&&(o(0,"span",40),m(1),r()),n&2){let t=s().$implicit,i=s().$implicit;c(),h(" ",t[i]," ")}}function ce(n,e){if(n&1&&(o(0,"td",39),g(1,ne,2,1,"span",40)(2,ae,2,3,"span",40)(3,oe,2,1,"span",40)(4,re,3,4,"span",40)(5,le,2,1,"span",40),r()),n&2){let t,i=s().$implicit;c(),R((t=i)==="Sanpham"?1:t==="idNCC"?2:t==="STT"?3:t==="CreateAt"?4:5)}}function se(n,e){if(n&1&&(P(0,25),g(1,ie,3,1,"th",35)(2,ce,6,1,"td",36),A()),n&2){let t=e.$implicit;_("matColumnDef",t)}}function me(n,e){n&1&&x(0,"tr",41)}function pe(n,e){if(n&1){let t=C();o(0,"tr",42),f("click",function(){let a=u(t).$implicit,l=s();return d(l.goToDetail(a))}),r()}}function ue(n,e){n&1&&(o(0,"tr",43)(1,"td",44),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),r()())}var qt=class n{constructor(e,t){this._breakpointObserver=e;this._router=t;this.displayedColumns.forEach(i=>{this.filterValues[i]=""})}Detail={};dataSource;displayedColumns=["STT","MaDH","idNCC","Sanpham","CreateAt"];ColumnName={STT:"STT",MaDH:"M\xE3 \u0110\u01A1n h\xE0ng",idNCC:"Nh\xE0 Cung C\u1EA5p",Sanpham:"S\u1EA3n Ph\u1EA9m",CreateAt:"Ng\xE0y T\u1EA1o"};FilterColumns=JSON.parse(localStorage.getItem("dathangncc_FilterColumns")||"[]");Columns=[];Listdathangncc=[];ListNhacungcap=[];isFilter=!1;paginator;sort;drawer;filterValues={};_nhacungcapsService=w(jt);_DonnccsService=w(Qt);createFilter(){return(e,t)=>{let i=JSON.parse(t),a=!0;return console.log(e,t),this.displayedColumns.forEach(l=>{i[l]&&(a=a&&e[l].toString().toLowerCase().includes(i[l].toLowerCase()))}),a}}applyFilter(){this.dataSource.filter=JSON.stringify(this.filterValues)}ngOnInit(){return F(this,null,function*(){yield this._DonnccsService.getAllDonncc(),this.Listdathangncc=this._DonnccsService.ListDonncc(),this.CountItem=this.Listdathangncc.length;let e=this.Listdathangncc.map(t=>t.idNCC);console.log(e),this._nhacungcapsService.Findlistid(e).then(t=>{t&&(this.ListNhacungcap=t)}),console.log(this.Listdathangncc),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}GetNhacungcap(e){return this.ListNhacungcap.find(t=>t.id===e)}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("dathangncc_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDataSource(){this.dataSource=new Bt(this.Listdathangncc),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=this.createFilter(),this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}setupDrawer(){this._breakpointObserver.observe([nt.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(i=>i.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),this.setupDataSource(),localStorage.setItem("dathangncc_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(i=>i.value.toLowerCase().includes(t))}create(){this.drawer.open(),this._router.navigate(["admin/dathangncc",0])}goToDetail(e){this.drawer.open(),this.Detail=e,this._router.navigate(["admin/dathangncc",e.id])}_snackBar=w($t);CountItem=0;LoadDrive(){return F(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"Khachhangimport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"}})}readExcelFile(e){let t=e.target.files[0],i=new FileReader;i.onload=a=>{let l=new Uint8Array(a.target.result),p=wt(l,{type:"array"}),Jt=p.SheetNames[0],Kt=p.Sheets[Jt],Xt=xt.sheet_to_json(Kt,{raw:!0});console.log(Xt)}}writeExcelFile(){}saveAsExcelFile(e,t){}static \u0275fac=function(t){return new(t||n)(b(it),b(Z))};static \u0275cmp=V({type:n,selectors:[["app-listdathangncc"]],viewQuery:function(t,i){if(t&1&&(S(M,5),S(T,5),S(Gt,7)),t&2){let a;y(a=v())&&(i.paginator=a.first),y(a=v())&&(i.sort=a.first),y(a=v())&&(i.drawer=a.first)}},decls:48,vars:12,consts:[["drawer",""],["menu","matMenu"],["uploadfile",""],["autosize","",1,"w-full","h-full"],["mode","over",1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","p-2"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","color","primary","mat-icon-button","",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","B\u1ED9 L\u1ECDc","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["class","w-full grid grid-cols-2 gap-2 lg:flex lg:flex-row lg:space-x-2 items-center",4,"ngIf"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],[1,"w-full","grid","grid-cols-2","gap-2","lg:flex","lg:flex-row","lg:space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",4,"ngFor","ngForOf"],["appearance","outline","subscriptSizing","dynamic"],["matInput","",3,"keyup","ngModelChange","ngModel","ngModelOptions","placeholder"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4","me-4"],["mat-cell",""],[1,"max-w-40","line-clamp-4"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){if(t&1){let a=C();o(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),x(3,"router-outlet"),r(),o(4,"div",5)(5,"div",6)(6,"div",7)(7,"button",8),f("click",function(){return u(a),d(i.create())}),o(8,"mat-icon"),m(9,"add_circle"),r()(),o(10,"button",9)(11,"mat-icon"),m(12,"tune"),r()(),o(13,"mat-menu",null,1)(15,"div",10)(16,"mat-form-field",11)(17,"input",12),f("input",function(p){return u(a),d(i.doFilterColumns(p))})("click",function(p){return u(a),d(p.stopPropagation())}),r(),o(18,"mat-icon",13),m(19,"search"),r()()(),o(20,"div",14),E(21,Yt,5,2,"button",15,Wt),r()(),o(23,"button",16),f("click",function(){return u(a),d(i.isFilter=!i.isFilter)}),o(24,"mat-icon"),m(25,"filter_list"),r()(),o(26,"button",17),f("click",function(){return u(a),d(i.writeExcelFile())}),o(27,"mat-icon"),m(28,"file_download"),r()(),o(29,"button",18),f("click",function(){u(a);let p=k(33);return d(p.click())}),o(30,"mat-icon"),m(31,"file_upload"),r()(),o(32,"input",19,2),f("change",function(p){return u(a),d(i.readExcelFile(p))}),r(),o(34,"button",20),f("click",function(){return u(a),d(i.LoadDrive())}),o(35,"mat-icon"),m(36,"cloud_download"),r()(),o(37,"span",21),m(38),r()()(),g(39,ee,2,1,"div",22),o(40,"div",23)(41,"table",24),E(42,se,3,1,"ng-container",25,O),g(44,me,1,0,"tr",26)(45,pe,1,0,"tr",27)(46,ue,3,0,"tr",28),r(),x(47,"mat-paginator",29),r()()()}if(t&2){let a=k(14);c(),_("position","end"),c(9),_("matMenuTriggerFor",a),c(11),L(i.FilterColumns),c(2),I(i.isFilter?"!bg-slate-200":""),c(15),h(" ",i.CountItem," \u0110\u01A1n h\xE0ng "),c(),_("ngIf",i.isFilter),c(2),_("dataSource",i.dataSource),c(),L(i.displayedColumns),c(2),_("matHeaderRowDef",i.displayedColumns),c(),_("matRowDefColumns",i.displayedColumns),c(2),_("pageSizeOptions",N(11,Zt))}},dependencies:[lt,rt,at,ot,st,ct,At,Ft,Et,Vt,Lt,bt,It,kt,Nt,Rt,Ot,Pt,Tt,T,Mt,Dt,M,dt,pt,mt,ut,ht,_t,ft,W,zt,Ht,Ct,gt,St,G,J,K,X,et,U,Y,tt,vt,yt],encapsulation:2})};export{qt as a};
