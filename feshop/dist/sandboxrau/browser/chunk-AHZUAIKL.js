import{a as ye,b as Ce}from"./chunk-YHWHLYTE.js";import{a as _e,b as ve,c as Me}from"./chunk-LS7V7LRN.js";import{a as se,b as de,c as ue,d as ce,e as ge,f as fe}from"./chunk-LYWDQE74.js";import{e as pe}from"./chunk-A2VD6KMK.js";import"./chunk-BQMX5VTD.js";import"./chunk-6DJAFDTV.js";import"./chunk-PE3P6YPM.js";import"./chunk-AGFA4FXT.js";import{a as he}from"./chunk-AFOPNQET.js";import{a as le}from"./chunk-LOEYHAVB.js";import"./chunk-34EKSO5Y.js";import"./chunk-G2W2EW2N.js";import"./chunk-ZAG3K7T2.js";import"./chunk-PGBUMDHU.js";import{b as Q,c as Y}from"./chunk-G2JGHO3B.js";import{a as $,b as ee,c as te,d as ie,e as ne}from"./chunk-F7YZZGJG.js";import"./chunk-OPSDER4V.js";import{a as X,b as Z}from"./chunk-Y4AWVQ5M.js";import{a as H,g as G}from"./chunk-HNUPK34J.js";import"./chunk-TRXUX2Y2.js";import{b as N,g as U,j as x,r as R,s as K}from"./chunk-DXUZJIEG.js";import"./chunk-L2LY7JSF.js";import{g as oe}from"./chunk-7PW7EJWC.js";import"./chunk-VMAIQUWX.js";import{a as me}from"./chunk-7E7YA44Z.js";import"./chunk-ZAOL63WT.js";import{a as re}from"./chunk-UHVDGNAF.js";import{a as q,e as J}from"./chunk-ACURKAFZ.js";import{D as j,_ as z}from"./chunk-H6K2N2AQ.js";import"./chunk-JE6TT6BP.js";import{a as ae}from"./chunk-KQPDVZYA.js";import{n as O,q as P}from"./chunk-XPJYUAXQ.js";import{l as k,s as W}from"./chunk-UAZLFQKL.js";import{Ac as D,Bc as s,Cc as L,Dc as w,Gb as C,Hc as h,Ic as f,Jc as _,Lc as g,Rb as E,Sb as p,bc as a,cc as o,hc as T,la as y,mb as m,mc as M,nb as B,oc as F,ua as d,va as u,vc as I,wc as A,xc as V,zb as b}from"./chunk-QJD4TKMG.js";import"./chunk-EU2KAMEK.js";import{i as S}from"./chunk-66YHNWRR.js";var Se=["inputAuto"],Te=()=>["../"],v=()=>({standalone:!0});function De(c,r){if(c&1&&(a(0,"mat-option",28),s(1),o()),c&2){let i=r.$implicit;p("value",i.id),m(),L(i.Title)}}function Be(c,r){if(c&1){let i=T();a(0,"mat-chip-row",29),M("removed",function(){let n=d(i).$implicit,l=F();return u(l.remove(n))}),s(1),a(2,"button",30)(3,"span",31),s(4,"cancel"),o()()()}if(c&2){let i=r.$implicit;m(),w(" ",i.Title," "),m(),E("aria-label","remove "+i)}}function be(c,r){if(c&1&&(a(0,"mat-option",28),s(1),o()),c&2){let i=r.$implicit;p("value",i),m(),w(" ",i.Title," ")}}var we=class c{constructor(r){this._snackBar=r;this.idSP=this.route.snapshot.params.id}route=y(O);_BaivietAdminComponent=y(Ce);_BaivietService=y(ye);_DanhmucService=y(me);_UploadService=y(he);idSP;Detail={MetaTags:{author:"",description:"",keywords:""}};Danhmuc=[];ListsBaiviet=[];FilterListsBaiviet=[];TypeArticle=[];filteredDanhmuc=[];ChoosenTag;separatorKeysCodes=[13,188];announcer=y(j);inputAuto;remove(r){console.log(),this.Detail.Tags=this.Detail.Tags.filter(i=>i.id!==r.id),this.FilterListsBaiviet=this.ListsBaiviet.filter(i=>!this.Detail?.Tags?.some(e=>e.id===i.id))}ngOnInit(){return S(this,null,function*(){this.idSP&&(this.Detail=(yield this._BaivietService.SearchBaiviet({id:this.idSP})).items[0],this.Danhmuc=(yield this._DanhmucService.SearchDanhmuc({Type:"baiviet"}))?.items,this.ListsBaiviet=(yield this._BaivietService.SearchBaiviet({pageSize:9999,pageNumber:0}))?.items,this.FilterListsBaiviet=this.ListsBaiviet.filter(r=>!this.Detail?.Tags?.some(i=>i.id===r.id)),this._BaivietAdminComponent.drawer.open())})}CloseDrawer(){this._BaivietAdminComponent.drawer.close()}GetUpload(r){console.log(r),this.Detail.Image.Hinhchinh=r,this._BaivietService.UpdateBaiviet(this.Detail)}FillSlug(){this.Detail.Slug=oe(this.Detail.Title)}UpdateBaivietadmin(){this._BaivietService.UpdateBaiviet(this.Detail).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{horizontalPosition:"end",verticalPosition:"top",panelClass:"success",duration:1e3})})}onFilterTags(r){let i=r.target.value,e=this.ListsBaiviet.filter(n=>!this.Detail?.Tags?.some(l=>l.id===n.id));this.FilterListsBaiviet=e.filter(n=>n.Title.toLowerCase().includes(i.toLowerCase()))}onChoosenTags(r){let i=r.option.value,e=this.Detail.Tags.find(n=>n.id===i.id);console.log(i),e?this.FilterListsBaiviet=this.ListsBaiviet.filter(n=>!this.Detail?.Tags?.some(l=>l.id===n.id)):(this.Detail.Tags.push({id:i.id,Title:i.Title,Slug:"blog/"+i.Danhmuc.Slug+"/"+i.Slug}),this.FilterListsBaiviet=this.ListsBaiviet.filter(n=>!this.Detail?.Tags?.some(l=>l.id===n.id)),this.inputAuto.nativeElement.value="")}RemoveTag(r){console.log(r)}displayFn(r){return r&&r.Title?r.Title:""}APITINYMCE=ae.APITINYMCE;configTiny={relative_urls:!1,remove_script_host:!1,content_style:".mce-content-body { border: 1px dashed blue; padding: 10px;  } .mce-content-body p {margin-top: 0;margin-bottom: 0;}",menubar:!1,inline:!1,toolbar:"undo redo |fontfamily forecolor backcolor fontsize blocks | bold italic underline | alignleft aligncenter alignright alignjustify | fullscreen preview code | link image media",plugins:["textcolor","quickbars","advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help"],branding:!1,image_advtab:!0,autoresize_bottom_margin:20,autoresize_min_height:50,height:"300",statusbar:!1,deprecation_warnings:!1,default_link_target:"_blank",block_unsupported_drop:!0,entity_encoding:"raw",images_upload_handler:r=>{let i=r.blob();return new Promise((n,l)=>S(this,null,function*(){let t=yield this._UploadService.uploadDriver(i);t&&(console.log(t),n(t.src))}))}};static \u0275fac=function(i){return new(i||c)(B(re))};static \u0275cmp=b({type:c,selectors:[["app-baivietadmin-chitiet"]],viewQuery:function(i,e){if(i&1&&I(Se,5),i&2){let n;A(n=V())&&(e.inputAuto=n.first)}},decls:66,vars:49,consts:[["chipGrid",""],["inputAuto",""],["auto","matAutocomplete"],[1,"bg-gray-50","relative","p-4","w-full","h-full","md:h-auto"],[1,"relative","bg-white","rounded-2xl","shadow-gray-700"],[1,"flex","justify-between","space-x-4","items-center","p-5","rounded-t","border-b"],[3,"click","routerLink"],[1,"material-symbols-outlined"],[1,"lg:text-xl","text-xs","font-semibold"],["mat-flat-button","",3,"click","color"],[1,"p-4","grid","lg:grid-cols-3","grid-cols-1","gap-4"],[1,"flex","flex-col","space-y-4"],[3,"UploadEmit","Title","height","width","Image"],[1,"flex","flex-col","space-y-3"],["appearance","outline"],[3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-full","text-xs"],["type","text","matInput","",1,"w-full","px-3","py-2","border","border-gray-200","rounded",3,"input","ngModelChange","ngModel","ngModelOptions","placeholder"],["type","text","matInput","",1,"w-full","px-3","py-2","border","border-gray-200","rounded",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["matInput","","rows","8",3,"ngModelChange","ngModel","ngModelOptions"],[1,"col-span-2","flex","flex-col","space-y-3"],[1,"flex","flex-col","space-y-2"],[1,"font-bold"],[3,"ngModelChange","apiKey","ngModel","ngModelOptions","init"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Th\xEAm M\u1EDBi",3,"input","matChipInputFor","matAutocomplete","matChipInputSeparatorKeyCodes"],[3,"optionSelected"],[3,"value"],[3,"removed"],["matChipRemove",""],[1,"material-symbols-outlined","text-red-500"]],template:function(i,e){if(i&1){let n=T();a(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6),M("click",function(){return d(n),u(e.CloseDrawer())}),a(4,"span",7),s(5," close "),o()(),a(6,"span",8),s(7),o(),a(8,"button",9),M("click",function(){return d(n),u(e.UpdateBaivietadmin())}),s(9,"L\u01B0u"),o()(),a(10,"div",10)(11,"div",11)(12,"div")(13,"app-hinhanh",12),M("UploadEmit",function(t){return d(n),u(e.GetUpload(t))}),o()(),a(14,"div",13)(15,"mat-form-field",14)(16,"mat-label"),s(17,"Danh M\u1EE5c"),o(),a(18,"mat-select",15),_("ngModelChange",function(t){return d(n),f(e.Detail.idDM,t)||(e.Detail.idDM=t),u(t)}),C(19,De,2,2,"mat-option",16),o()(),a(20,"mat-form-field",17)(21,"mat-label"),s(22,"Ti\xEAu \u0111\u1EC1"),o(),a(23,"input",18),M("input",function(){return d(n),u(e.FillSlug())}),_("ngModelChange",function(t){return d(n),f(e.Detail.Title,t)||(e.Detail.Title=t),u(t)}),o()(),a(24,"mat-form-field",17)(25,"mat-label"),s(26,"Slug"),o(),a(27,"input",19),_("ngModelChange",function(t){return d(n),f(e.Detail.Slug,t)||(e.Detail.Slug=t),u(t)}),o()(),a(28,"mat-form-field",17)(29,"mat-label"),s(30,"Meta Author"),o(),a(31,"input",19),_("ngModelChange",function(t){return d(n),f(e.Detail.MetaTags.author,t)||(e.Detail.MetaTags.author=t),u(t)}),o()(),a(32,"mat-form-field",17)(33,"mat-label"),s(34,"Meta Keywords"),o(),a(35,"textarea",20),_("ngModelChange",function(t){return d(n),f(e.Detail.MetaTags.keywords,t)||(e.Detail.MetaTags.keywords=t),u(t)}),o()(),a(36,"mat-form-field",17)(37,"mat-label"),s(38,"Meta Description"),o(),a(39,"textarea",20),_("ngModelChange",function(t){return d(n),f(e.Detail.MetaTags.description,t)||(e.Detail.MetaTags.description=t),u(t)}),o()(),a(40,"mat-form-field",17)(41,"mat-label"),s(42,"Meta Abstract"),o(),a(43,"input",19),_("ngModelChange",function(t){return d(n),f(e.Detail.MetaTags.abstract,t)||(e.Detail.MetaTags.abstract=t),u(t)}),o()()()(),a(44,"div",21)(45,"div",22)(46,"span",23),s(47,"N\u1ED9i dung"),o(),a(48,"editor",24),_("ngModelChange",function(t){return d(n),f(e.Detail.Noidung,t)||(e.Detail.Noidung=t),u(t)}),o()(),a(49,"div",22)(50,"div",22)(51,"mat-form-field",14)(52,"mat-label"),s(53,"Tags"),o(),a(54,"mat-chip-grid",null,0),C(56,Be,5,2,"mat-chip-row",25),o(),a(57,"input",26,1),M("input",function(t){return d(n),u(e.onFilterTags(t))}),o(),a(59,"mat-autocomplete",27,2),M("optionSelected",function(t){return d(n),u(e.onChoosenTags(t))}),C(61,be,2,2,"mat-option",16),o()()()(),a(62,"div",22)(63,"span",23),s(64,"Footer"),o(),a(65,"editor",24),_("ngModelChange",function(t){return d(n),f(e.Detail.Mota,t)||(e.Detail.Mota=t),u(t)}),o()()()()()()}if(i&2){let n=D(55),l=D(60);m(3),p("routerLink",g(39,Te)),m(4),w(" ",e.Detail.Title," "),m(),p("color","primary"),m(5),p("Title","H\xECnh Ch\xEDnh")("height","h-60")("width","w-60")("Image",e.Detail==null||e.Detail.Image==null?null:e.Detail.Image.Hinhchinh),m(5),h("ngModel",e.Detail.idDM),p("ngModelOptions",g(40,v)),m(),p("ngForOf",e.Danhmuc),m(4),h("ngModel",e.Detail.Title),p("ngModelOptions",g(41,v))("placeholder","Ti\xEAu \u0111\u1EC1"),m(4),h("ngModel",e.Detail.Slug),p("ngModelOptions",g(42,v))("placeholder","Slug"),m(4),h("ngModel",e.Detail.MetaTags.author),p("ngModelOptions",g(43,v))("placeholder","Meta Author"),m(4),h("ngModel",e.Detail.MetaTags.keywords),p("ngModelOptions",g(44,v)),m(4),h("ngModel",e.Detail.MetaTags.description),p("ngModelOptions",g(45,v)),m(4),h("ngModel",e.Detail.MetaTags.abstract),p("ngModelOptions",g(46,v))("placeholder","Meta Abstract"),m(5),p("apiKey",e.APITINYMCE),h("ngModel",e.Detail.Noidung),p("ngModelOptions",g(47,v))("init",e.configTiny),m(8),p("ngForOf",e.Detail.Tags),m(),p("matChipInputFor",n)("matAutocomplete",l)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes),m(4),p("ngForOf",e.FilterListsBaiviet),m(4),p("apiKey",e.APITINYMCE),h("ngModel",e.Detail.Mota),p("ngModelOptions",g(48,v))("init",e.configTiny)}},dependencies:[le,Z,G,H,X,z,R,N,U,x,W,k,P,J,q,pe,se,de,Y,Q,ue,fe,ge,ce,Me,_e,ve,ne,te,ie,$,ee,K],encapsulation:2})};export{we as BaivietadminChitietComponent};
