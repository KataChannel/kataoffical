import{a as p,b as u}from"./chunk-RYZLHJBJ.js";import{a as h}from"./chunk-UJFQ3LGV.js";import{a as n}from"./chunk-KQPDVZYA.js";import{Oa as m,fa as f,ka as o,o as t}from"./chunk-QJD4TKMG.js";import{i as c}from"./chunk-66YHNWRR.js";var l=class i{constructor(r,e,a){this._userService=r;this._LocalStorageService=e;this.platformId=a;this._secret="rausachtrangia"}_secret;_authenticated=!1;APIURL=n.APIURL;set accessToken(r){this._LocalStorageService.setItem("token",r)}get accessToken(){return this._LocalStorageService.getItem("token")??""}Dangnhap(r){return c(this,null,function*(){if(this._authenticated)return t([!1,"User \u0110\xE3 \u0110\u0103ng Nh\u1EADp"]);try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},a=yield fetch(`${n.APIURL}/users/dangnhap`,e);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let s=yield a.json();return s[0]&&(this._authenticated=!0,this.accessToken=s[1].access_token),s}catch(e){return console.error(e)}})}checkDangnhap(){return this._authenticated?t(!0):!this.accessToken||this.accessToken==="undefined"?(this._LocalStorageService.removeItem("token"),t(!1)):p.isTokenExpired(this.accessToken)?t(!1):t(!0)}Dangxuat(){return this._LocalStorageService.removeItem("token"),this._authenticated=!1,!0}static \u0275fac=function(e){return new(e||i)(o(u),o(h),o(m))};static \u0275prov=f({token:i,factory:i.\u0275fac})};export{l as a};
