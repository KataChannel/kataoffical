import{a as ke}from"./chunk-DIM43NV6.js";import{b as X,c as Y,d as Z}from"./chunk-6DJAFDTV.js";import{a as S,b as oe,c as re,d as le,e as se,f as me,h as ue,i as pe,k as ce,l as de,n as he,o as fe,q as ye,r as _e,s as Ce,t as we}from"./chunk-G2W2EW2N.js";import{a as G,b as J,c as U,d as W}from"./chunk-PGBUMDHU.js";import{b as j,c as A}from"./chunk-G2JGHO3B.js";import{b as k,c as ne}from"./chunk-OPSDER4V.js";import{b as ae}from"./chunk-Y4AWVQ5M.js";import{c as $,g as z,h as K}from"./chunk-HNUPK34J.js";import{a as ge,b as ve}from"./chunk-BALLAHYH.js";import{a as ee,c as te,e as ie}from"./chunk-ACURKAFZ.js";import{q as B,r as H}from"./chunk-H6K2N2AQ.js";import{o as N,p as O}from"./chunk-XPJYUAXQ.js";import{s as P}from"./chunk-UAZLFQKL.js";import{$b as b,Ac as D,Bc as s,Cc as F,Dc as y,Gb as x,Lc as V,Sb as m,_b as I,ac as T,bc as o,cc as r,dc as _,ec as q,fc as R,hc as C,la as Q,mb as l,mc as f,nb as M,oc as d,ua as p,va as c,vc as w,wc as g,xc as v,zb as E}from"./chunk-QJD4TKMG.js";import{i as L}from"./chunk-66YHNWRR.js";var Me=["drawer"],xe=(a,e)=>e.key,be=()=>[5,10,25,100];function Te(a,e){if(a&1){let t=C();o(0,"button",29),f("click",function(n){let u=p(t).$implicit;return d().toggleColumn(u),c(n.stopPropagation())}),o(1,"mat-icon"),s(2),r(),o(3,"span"),s(4),r()()}if(a&2){let t=e.$implicit;l(2),F(t.isShow?"check_box":"check_box_outline_blank"),l(2),F(t.value)}}function De(a,e){if(a&1&&(o(0,"th",32)(1,"span",33),s(2),r()()),a&2){let t=d().$implicit,i=d();l(2),y(" ",i.ColumnName[t]," ")}}function Fe(a,e){if(a&1&&(o(0,"td",34)(1,"span",33),s(2),r()()),a&2){let t=e.$implicit,i=e.index,n=d().$implicit;l(2),y(" ",n==="STT"?i+1:t[n]," ")}}function Le(a,e){if(a&1&&(q(0,24),x(1,De,3,1,"th",30)(2,Fe,3,1,"td",31),R()),a&2){let t=e.$implicit;m("matColumnDef",t)}}function Qe(a,e){a&1&&_(0,"tr",35)}function Ee(a,e){if(a&1){let t=C();o(0,"tr",36),f("click",function(){let n=p(t).$implicit,u=d();return c(u.goToDetail(n))}),r()}}function Ie(a,e){if(a&1&&(o(0,"tr",37)(1,"td",38),s(2),r()()),a&2){d();let t=D(10);l(2),y('Kh\xF4ng t\xECm th\u1EA5y "',t.value,'"')}}var Se=class a{constructor(e,t){this._breakpointObserver=e;this._router=t}Detail={};dataSource;displayedColumns=["STT","MaKho","Title","Diachi","SDT","Ghichu"];ColumnName={STT:"STT",MaKho:"M\xE3 kho",Title:"T\xEAn kho",Diachi:"\u0110\u1ECBa ch\u1EC9",SDT:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",Ghichu:"Ghi ch\xFA"};FilterColumns=JSON.parse(localStorage.getItem("quanlykho_FilterColumns")||"[]");Columns=[];Listquanlykho=[];CountItem=0;paginator;sort;drawer;_quanlykhosService=Q(ke);ngOnInit(){return L(this,null,function*(){yield this._quanlykhosService.getAllQuanlykho(),this.Listquanlykho=this._quanlykhosService.ListQuanlykho(),this.CountItem=this.Listquanlykho.length,console.log(this._quanlykhosService.ListQuanlykho()),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("quanlykho_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDataSource(){this.dataSource=new we(this.Listquanlykho),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}setupDrawer(){this._breakpointObserver.observe([H.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(i=>i.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),this.setupDataSource(),localStorage.setItem("quanlykho_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(i=>i.value.toLowerCase().includes(t))}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.CountItem=this.dataSource.filteredData.length,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}create(){this.drawer.open(),this._router.navigate(["admin/quanlykho",0])}goToDetail(e){this.drawer.open(),this.Detail=e,this._router.navigate(["admin/quanlykho",e.id])}static \u0275fac=function(t){return new(t||a)(M(B),M(O))};static \u0275cmp=E({type:a,selectors:[["app-listquanlykho"]],viewQuery:function(t,i){if(t&1&&(w(k,5),w(S,5),w(Me,7)),t&2){let n;g(n=v())&&(i.paginator=n.first),g(n=v())&&(i.sort=n.first),g(n=v())&&(i.drawer=n.first)}},decls:43,vars:8,consts:[["drawer",""],["input",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","lg:!w-1/3","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","flex","flex-row","space-x-2","items-center","justify-between","bg-white","rounded-lg","p-2"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["mat-flat-button","","color","primary",3,"click"],[1,"whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[1,"w-full","opverflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","","mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4"],["mat-cell","",1,""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,i){if(t&1){let n=C();o(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),_(3,"router-outlet"),r(),o(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"input",10,1),f("keyup",function(h){return p(n),c(i.applyFilter(h))}),r(),o(11,"div",11)(12,"span",12),s(13,"search"),r()()(),o(14,"button",13),f("click",function(){return p(n),c(i.create())}),o(15,"span"),s(16,"Th\xEAm"),r(),o(17,"mat-icon"),s(18,"add_circle"),r()()(),o(19,"div",8)(20,"span",14),s(21),r(),o(22,"button",15)(23,"mat-icon"),s(24,"tune"),r()(),o(25,"mat-menu",null,2)(27,"div",16)(28,"mat-form-field",17)(29,"input",18),f("input",function(h){return p(n),c(i.doFilterColumns(h))})("click",function(h){return p(n),c(h.stopPropagation())}),r(),o(30,"mat-icon",19),s(31,"search"),r()()(),o(32,"div",20),b(33,Te,5,2,"button",21,xe),r()()()(),o(35,"div",22)(36,"table",23),b(37,Le,3,1,"ng-container",24,I),x(39,Qe,1,0,"tr",25)(40,Ee,1,0,"tr",26)(41,Ie,3,1,"tr",27),r(),_(42,"mat-paginator",28),r()()()()}if(t&2){let n=D(26);l(),m("position","end"),l(20),y(" ",i.CountItem," Kho "),l(),m("matMenuTriggerFor",n),l(11),T(i.FilterColumns),l(3),m("dataSource",i.dataSource),l(),T(i.displayedColumns),l(2),m("matHeaderRowDef",i.displayedColumns),l(),m("matRowDefColumns",i.displayedColumns),l(2),m("pageSizeOptions",V(7,be))}},dependencies:[K,z,$,A,j,Ce,le,me,de,ue,se,he,pe,ce,fe,ye,_e,re,S,oe,ne,k,W,J,G,U,Z,X,Y,N,ve,ge,ie,ee,te,ae,P],encapsulation:2})};export{Se as a};
