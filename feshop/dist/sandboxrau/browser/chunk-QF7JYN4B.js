import{a as s}from"./chunk-KQPDVZYA.js";import{K as h,fa as l,g as c}from"./chunk-QJD4TKMG.js";import{i as o}from"./chunk-66YHNWRR.js";var u=class p{_sanphams=new c(null);_sanpham=new c(null);_totalCount=new c(null);get sanphams$(){return this._sanphams.asObservable()}get sanpham$(){return this._sanpham.asObservable()}get totalCount$(){return this._totalCount.asObservable()}constructor(){}getDrive(){return o(this,null,function*(){try{return yield(yield fetch("https://sheets.googleapis.com/v4/spreadsheets/1VghpYpLVKug07LJm1-pdcpeQcEoh5VaCOgBvOfQ0-L8/values/sanpham?key=AIzaSyCWh10EgrjVBm8qKpnsGOgXrIsT5uqroMc",{method:"GET",headers:{"Content-Type":"application/json"}})).json()}catch(a){return console.error(a)}})}getAllSanpham(){return o(this,null,function*(){try{let a={method:"GET",headers:{"Content-Type":"application/json"}},n=yield(yield fetch(`${s.APIURL}/sanpham`,a)).json();return this._sanphams.next(n),n}catch(a){return console.error(a)}})}getSanphamBySlug(a){return o(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},e=yield(yield fetch(`${s.APIURL}/sanpham/findslug/${a}`,t)).json();return this._sanpham.next(e),e}catch(t){return console.error(t)}})}getSanphamByid(a){return o(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},n=yield fetch(`${s.APIURL}/sanpham/findid/${a}`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return this._sanpham.next(e),e}catch(t){return console.error(t)}})}SearchSanpham(a){return o(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},n=yield fetch(`${s.APIURL}/sanpham/search`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return this._sanphams.next(e.items),this._totalCount.next(e.totalCount),e}catch(t){return console.error(t)}})}CreateSanpham(a){return o(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},n=yield fetch(`${s.APIURL}/sanpham`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return console.log(e),e}catch(t){return console.error(t)}})}SyncSanpham(a){return o(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},n=yield fetch(`${s.APIURL}/sanpham/sync`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return console.log(e),e}catch(t){return console.error(t)}})}UpdateSanpham(a){return o(this,null,function*(){let t=yield this.sanphams$.pipe(h(1)).toPromise();try{let n={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e=yield fetch(`${s.APIURL}/sanpham/${a.id}`,n);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let r=yield e.json();this._sanpham.next(r);let y=t.map(i=>i.id===r.id?r:i);return this._sanphams.next(y),r}catch(n){return console.error(n)}})}DeleteSanpham(a){return o(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};return yield(yield fetch(`${s.APIURL}/sanpham/${a.id}`,t)).json()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||p)};static \u0275prov=l({token:p,factory:p.\u0275fac,providedIn:"root"})};export{u as a};
