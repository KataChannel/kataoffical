import{a as at,b as lt}from"./chunk-2NAGCVV6.js";import{a as ot}from"./chunk-RWN7QG6G.js";import{a as rt}from"./chunk-WKI54F45.js";import{a as it}from"./chunk-5AS6OWQO.js";import"./chunk-6DJAFDTV.js";import"./chunk-G2W2EW2N.js";import"./chunk-PGBUMDHU.js";import{b as q,c as Q}from"./chunk-G2JGHO3B.js";import"./chunk-OPSDER4V.js";import{a as $,b as Y}from"./chunk-Y4AWVQ5M.js";import{a as O,g as G,h as z}from"./chunk-HNUPK34J.js";import"./chunk-TRXUX2Y2.js";import{b as B,g as I,j as W,r as K}from"./chunk-DXUZJIEG.js";import{h as J}from"./chunk-7PW7EJWC.js";import"./chunk-ZAOL63WT.js";import{a as tt,b as et}from"./chunk-BALLAHYH.js";import{a as Z}from"./chunk-UHVDGNAF.js";import{a as nt}from"./chunk-47N5HEQD.js";import{a as j,c as R,e as U}from"./chunk-ACURKAFZ.js";import{_ as N}from"./chunk-H6K2N2AQ.js";import"./chunk-JE6TT6BP.js";import"./chunk-UJFQ3LGV.js";import"./chunk-KQPDVZYA.js";import{n as H,p as P}from"./chunk-XPJYUAXQ.js";import{m as k,s as A}from"./chunk-UAZLFQKL.js";import{$b as y,Bc as s,Cc as M,Ec as V,Gb as F,Gc as L,Hc as g,Ic as C,Jc as D,Lc as S,Sb as m,Zb as T,ac as v,bc as n,cc as o,hc as f,la as h,mb as p,mc as _,oc as c,ua as u,va as d,zb as X}from"./chunk-QJD4TKMG.js";import"./chunk-EU2KAMEK.js";import{i as b}from"./chunk-66YHNWRR.js";var E=(l,i)=>i.id,w=()=>({standalone:!0});function st(l,i){if(l&1){let t=f();n(0,"button",1),_("click",function(){u(t);let e=c();return d(e.SaveData())}),n(1,"mat-icon"),s(2,"save"),o()()}}function mt(l,i){if(l&1){let t=f();n(0,"button",1),_("click",function(){u(t);let e=c();return d(e.isEdit=!0)}),n(1,"mat-icon"),s(2,"edit"),o()()}}function ct(l,i){if(l&1){let t=f();n(0,"div",7)(1,"div",9),s(2,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),o(),n(3,"div",10)(4,"button",11),_("click",function(){u(t);let e=c();return d(e.DeleteData())}),s(5," \u0110\u1ED3ng \xDD "),o(),n(6,"button",12),_("click",function(){u(t);let e=c();return d(e.isDelete=!1)}),s(7," Hu\u1EF7 B\u1ECF "),o()()()}}function ut(l,i){if(l&1&&(n(0,"mat-option",18),s(1),o()),l&2){let t=i.$implicit;m("value",t.value),p(),M(t.Title)}}function dt(l,i){if(l&1&&(n(0,"mat-option",18),s(1),o()),l&2){let t=i.$implicit;m("value",t.id),p(),V("",t.Title," ",t.MaKho,"")}}function _t(l,i){if(l&1){let t=f();n(0,"mat-option",23),_("click",function(){let e=u(t).$implicit,r=c(3);return d(r.SelectDonncc(e))}),s(1),o()}if(l&2){let t=i.$implicit;m("value",t.id),p(),M(t.MaDH)}}function ht(l,i){if(l&1){let t=f();n(0,"mat-form-field",14)(1,"mat-label"),s(2,"\u0110\u01A1n H\xE0ng Nh\xE0 Cung C\u1EA5p"),o(),n(3,"mat-select",15),D("ngModelChange",function(e){u(t);let r=c(2);return C(r.Detail.idDonhang,e)||(r.Detail.idDonhang=e),d(e)}),n(4,"div",16)(5,"div",3)(6,"mat-form-field",19)(7,"input",20),_("input",function(e){u(t);let r=c(2);return d(r.DoFindDonncc(e))}),o()()(),n(8,"div",17),y(9,_t,2,2,"mat-option",18,E),o()()()()}if(l&2){let t=c(2);p(3),m("disabled",!t.isEdit),g("ngModel",t.Detail.idDonhang),m("ngModelOptions",S(3,w)),p(6),v(t.FilterDonncc)}}function ft(l,i){if(l&1){let t=f();n(0,"mat-option",23),_("click",function(){let e=u(t).$implicit,r=c(3);return d(r.SelectDonhang(e))}),s(1),o()}if(l&2){let t=i.$implicit;m("value",t.id),p(),M(t.MaDonHang)}}function gt(l,i){if(l&1){let t=f();n(0,"mat-form-field",14)(1,"mat-label"),s(2,"\u0110\u01A1n H\xE0ng B\xE1n"),o(),n(3,"mat-select",15),D("ngModelChange",function(e){u(t);let r=c(2);return C(r.Detail.idDonhang,e)||(r.Detail.idDonhang=e),d(e)}),n(4,"div",16)(5,"div",3)(6,"mat-form-field",19)(7,"input",20),_("input",function(e){u(t);let r=c(2);return d(r.DoFindDonhang(e))}),o()()(),n(8,"div",17),y(9,ft,2,2,"mat-option",18,E),o()()()()}if(l&2){let t=c(2);p(3),m("disabled",!t.isEdit),g("ngModel",t.Detail.idDonhang),m("ngModelOptions",S(3,w)),p(6),v(t.FilterDonHang)}}function Ct(l,i){if(l&1&&(n(0,"mat-option",25),s(1),o()),l&2){let t=i.$implicit;m("value",t.id),p(),L(" ",t.Title," - (SL : ",t.Soluong,"",t.dvt,") - (SLTT :",t.SoluongTT,"",t.dvt,") ")}}function Dt(l,i){if(l&1){let t=f();n(0,"div",13)(1,"mat-form-field",14)(2,"mat-label"),s(3,"S\u1EA3n Ph\u1EA9m"),o(),n(4,"mat-select",15),D("ngModelChange",function(e){let r=u(t).$index,x=c(2);return C(x.Detail.Sanpham[r].idSP,e)||(x.Detail.Sanpham[r].idSP=e),d(e)}),n(5,"div",16)(6,"div",3)(7,"mat-form-field",19)(8,"input",20),_("input",function(e){u(t);let r=c(2);return d(r.DoFindSanpham(e))}),o()(),n(9,"button",4)(10,"mat-icon"),s(11,"add_circle"),o()()(),n(12,"div",24),y(13,Ct,2,6,"mat-option",25,E),o()()()(),n(15,"mat-form-field",26)(16,"mat-label"),s(17,"S\u1ED1 L\u01B0\u1EE3ng"),o(),n(18,"input",27),D("ngModelChange",function(e){let r=u(t).$implicit;return C(r.Soluong,e)||(r.Soluong=e),d(e)}),_("change",function(e){let r=u(t).$implicit,x=c(2);return d(x.onChangeSoluong(r,e))}),o()(),n(19,"mat-form-field",14)(20,"mat-label"),s(21,"Ghi Ch\xFA"),o(),n(22,"input",28),D("ngModelChange",function(e){let r=u(t).$index,x=c(2);return C(x.Detail.Sanpham[r].Ghichu,e)||(x.Detail.Sanpham[r].Ghichu=e),d(e)}),o()()()}if(l&2){let t=i.$implicit,a=i.$index,e=c(2);p(4),m("disabled",!e.isEdit),g("ngModel",e.Detail.Sanpham[a].idSP),m("ngModelOptions",S(9,w)),p(9),v(e.FilterSanpham),p(5),m("disabled",!e.isEdit),g("ngModel",t.Soluong),m("ngModelOptions",S(10,w)),p(4),m("disabled",!e.isEdit),g("ngModel",e.Detail.Sanpham[a].Ghichu),m("ngModelOptions",S(11,w))}}function St(l,i){if(l&1){let t=f();n(0,"div",8)(1,"div",13)(2,"mat-form-field",14)(3,"mat-label"),s(4,"Lo\u1EA1i Phi\u1EBFu"),o(),n(5,"mat-select",15),D("ngModelChange",function(e){u(t);let r=c();return C(r.Detail.Type,e)||(r.Detail.Type=e),d(e)}),n(6,"div",16)(7,"div",17),y(8,ut,2,2,"mat-option",18,E),o()()()(),n(10,"mat-form-field",14)(11,"mat-label"),s(12,"Kho h\xE0ng"),o(),n(13,"mat-select",15),D("ngModelChange",function(e){u(t);let r=c();return C(r.Detail.idKhohang,e)||(r.Detail.idKhohang=e),d(e)}),n(14,"div",16)(15,"div",3)(16,"mat-form-field",19)(17,"input",20),_("input",function(e){u(t);let r=c();return d(r.DoFindKhohang(e))}),o()()(),n(18,"div",17),y(19,dt,2,3,"mat-option",18,E),o()()()(),F(21,ht,11,4,"mat-form-field",21)(22,gt,11,4,"mat-form-field",21),o(),n(23,"div",8),y(24,Dt,23,12,"div",13,E),o(),n(26,"div")(27,"button",22),_("click",function(){u(t);let e=c();return d(e.Detail.Sanpham.push({idSP:"",Soluong:0,Ghichu:""}))}),n(28,"span"),s(29,"Th\xEAm"),o(),n(30,"mat-icon"),s(31,"add"),o()()()()}if(l&2){let t=c();p(5),m("disabled",!t.isEdit),g("ngModel",t.Detail.Type),m("ngModelOptions",S(9,w)),p(3),v(t.ListType),p(5),m("disabled",!t.isEdit),g("ngModel",t.Detail.idKhohang),m("ngModelOptions",S(10,w)),p(6),v(t.FilterKhohang),p(2),m("ngIf",t.Detail.Type=="NHAP"),p(),m("ngIf",t.Detail.Type=="XUAT"),p(2),v(t.Detail.Sanpham),p(3),m("disabled",!t.isEdit)}}var pt=class l{_ListxuatnhaptonComponent=h(lt);_SanphamService=h(it);_XuatnhaptonsService=h(at);_DonnccsService=h(rt);_DonhangsService=h(nt);_QuanlykhosService=h(ot);_router=h(H);_route=h(P);_snackBar=h(Z);constructor(){}Detail={Sanpham:[]};isEdit=!1;isDelete=!1;idXuatnhapton;FilterDonncc=[];ListDonncc=[];FilterDonHang=[];ListDonHang=[];FilterSanpham=[];ListSanpham=[];FilterKhohang=[];ListKhohang=[];ListType=[{id:1,Title:"Nh\u1EADp",value:"NHAP"},{id:2,Title:"Xu\u1EA5t",value:"XUAT"},{id:3,Title:"\u0110i\u1EC1u Ch\u1EC9nh",value:"DIEUCHINH"},{id:4,Title:"Chuy\u1EC3n Kho",value:"CHUYENKHO"}];ngOnInit(){this._router.paramMap.subscribe(i=>b(this,null,function*(){this.idXuatnhapton=i.get("id"),this.isEdit=this.idXuatnhapton==="0",this.idXuatnhapton?(this._ListxuatnhaptonComponent.drawer.open(),this._DonnccsService.getAllDonncc().then(t=>{this.FilterDonncc=this.ListDonncc=t}),this._QuanlykhosService.getAllQuanlykho().then(t=>{this.FilterKhohang=this.ListKhohang=t}),this._DonhangsService.getAllDonhang().then(t=>{this.FilterDonHang=this.ListDonHang=t}),this._SanphamService.getAllSanpham().then(t=>{this.FilterSanpham=this.ListSanpham=t}),this.idXuatnhapton!=="0"?this._XuatnhaptonsService.getXuatnhaptonByid(this.idXuatnhapton).then(t=>{t&&(this.Detail=t,console.log(t))}):(this.Detail={Sanpham:[]},this.Detail.MaPhieu=J(8,!1))):this._route.navigate(["/admin/xuatnhapton"])}))}DoFindSanpham(i){let t=i.target.value.toLowerCase();this.FilterSanpham=this.ListSanpham.filter(a=>a.Title.toLowerCase().includes(t))}DoFindDonncc(i){let t=i.target.value.toLowerCase();this.FilterDonncc=this.ListDonncc.filter(a=>a.MaDH.toLowerCase().includes(t))}DoFindDonhang(i){let t=i.target.value.toLowerCase();this.FilterDonHang=this.ListDonHang.filter(a=>a.MaDonHang.toLowerCase().includes(t))}SelectDonncc(i){this.Detail.Sanpham=i.Sanpham}DoFindKhohang(i){let t=i.target.value.toLowerCase();this.FilterDonHang=this.ListDonHang.filter(a=>a.MaKho.toLowerCase().includes(t))}SelectKhohang(i){this.Detail.Sanpham=i.Sanpham}DoFindDonHang(i){let t=i.target.value.toLowerCase();this.FilterDonHang=this.ListDonHang.filter(a=>a.MaDH.toLowerCase().includes(t))}SelectDonhang(i){this.Detail.Sanpham=i.Giohangs.map(t=>({idSP:t.id,Soluong:t.Soluong,Ghichu:t.Ghichu}))}onChangeSoluong(i,t){this.Detail.Soluong=t.target.value,this.Detail.Thanhtien=this.Detail.Soluong*this.Detail.Dongia}SaveData(){this.idXuatnhapton=="0"?this._XuatnhaptonsService.CreateXuatnhapton(this.Detail).then(i=>{this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._route.navigate(["/admin/xuatnhapton",i.id])}):this._XuatnhaptonsService.updateOneXuatnhapton(this.Detail).then(i=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit=!1})}DeleteData(){this._XuatnhaptonsService.DeleteXuatnhapton(this.Detail).then(i=>{this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._route.navigate(["/admin/xuatnhapton"])})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=X({type:l,selectors:[["app-detailxuatnhapton"]],decls:15,vars:3,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"w-full","flex","flex-col","space-y-2"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"w-full","flex","flex-row","space-x-2","items-center"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],[3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],[1,"overflow-y-auto","max-h-44"],[3,"value"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],["class","w-full","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"click","value"],[1,"overflow-y-auto","max-h-44","space-y-2"],[1,"p-2","border","rounded-lg",3,"value"],["appearance","outline","subscriptSizing","dynamic",1,"w-40"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"button",1),_("click",function(){return a._ListxuatnhaptonComponent.drawer.close()}),n(2,"mat-icon"),s(3,"arrow_back"),o()(),n(4,"div",2),s(5),o(),n(6,"div",3),F(7,st,3,0,"button",4)(8,mt,3,0,"button",4),n(9,"button",5),_("click",function(){return a.isDelete=!0}),n(10,"mat-icon"),s(11,"delete"),o()()()(),n(12,"div",6),F(13,ct,8,0,"div",7)(14,St,32,11,"div",8),o()),t&2&&(p(5),M((a.Detail==null?null:a.Detail.MaPhieu)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),p(2),T(a.isEdit==!0?7:8),p(6),T(a.isDelete==!0?13:14))},dependencies:[z,G,O,Q,q,K,B,I,W,et,tt,U,j,R,A,k,Y,$,N],encapsulation:2})};export{pt as DetailXuatnhaptonComponent};
