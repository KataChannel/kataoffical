import{a as r}from"./chunk-4CDWKZS5.js";import{K as u,fa as d,g as i}from"./chunk-QJD4TKMG.js";import{i as a}from"./chunk-66YHNWRR.js";var p=class c{_danhmucs=new i(null);_danhmuc=new i(null);get danhmucs$(){return this._danhmucs.asObservable()}get danhmuc$(){return this._danhmuc.asObservable()}constructor(){}getAllDanhmuc(){return a(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},n=yield fetch(`${r.APIURL}/danhmuc`,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let e=yield n.json();return this._danhmucs.next(e),e}catch(t){return console.error(t)}})}getDanhmucByid(t){return a(this,null,function*(){try{let n={method:"GET",headers:{"Content-Type":"application/json"}},e=yield fetch(`${r.APIURL}/danhmuc/findid/${t}`,n);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return yield e.json()}catch(n){return console.error(n)}})}SearchDanhmuc(t){return a(this,null,function*(){try{let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},o=yield(yield fetch(`${r.APIURL}/danhmuc/search`,n)).json();return this._danhmucs.next(o.items),o}catch(n){return console.error(n)}})}CreateDanhmuc(t){return a(this,null,function*(){console.log(t);try{let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return yield(yield fetch(`${r.APIURL}/danhmuc`,n)).json()}catch(n){return console.error(n)}})}UpdateDanhmuc(t){return a(this,null,function*(){let n=yield this.danhmuc$.pipe(u(1)).toPromise();try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},s=yield(yield fetch(`${r.APIURL}/danhmuc/${t.id}`,e)).json();this._danhmuc.next(s);let m=n.map(h=>h.id===s.id?s:h);return this._danhmucs.next(m),s}catch(e){return console.error(e)}})}DeleteDanhmuc(t){return a(this,null,function*(){try{let n={method:"DELETE",headers:{"Content-Type":"application/json"}};return yield(yield fetch(`${r.APIURL}/danhmuc/${t.id}`,n)).json()}catch(n){return console.error(n)}})}static \u0275fac=function(n){return new(n||c)};static \u0275prov=d({token:c,factory:c.\u0275fac,providedIn:"root"})};export{p as a};
