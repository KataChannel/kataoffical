import{a as Oe}from"./chunk-DIM43NV6.js";import{b as le,c as ue,d as de}from"./chunk-6DJAFDTV.js";import{a as P,b as ge,c as ye,d as Ce,e as Te,f as Se,h as be,i as ve,k as _e,l as ke,n as we,o as xe,q as De,r as Pe,s as Le,t as Me}from"./chunk-G2W2EW2N.js";import{a as ne,b as re,c as oe,d as se}from"./chunk-PGBUMDHU.js";import{b as ie,c as ae}from"./chunk-G2JGHO3B.js";import{b as D,c as fe}from"./chunk-OPSDER4V.js";import{b as he}from"./chunk-Y4AWVQ5M.js";import{c as W,g as ee,h as te}from"./chunk-HNUPK34J.js";import{a as Ne,b as Ie}from"./chunk-BALLAHYH.js";import{a as ce,c as pe,e as me}from"./chunk-ACURKAFZ.js";import{q as K,r as Y}from"./chunk-H6K2N2AQ.js";import{a as Ae}from"./chunk-UJFQ3LGV.js";import{a as g}from"./chunk-4CDWKZS5.js";import{o as U,p as x}from"./chunk-XPJYUAXQ.js";import{q as Z,s as j,u as Q}from"./chunk-UAZLFQKL.js";import{$b as I,Ac as E,Bc as d,Cc as $,Dc as p,Gb as S,Lc as V,Oa as R,Rc as q,Sb as m,Tc as F,Zb as J,_b as G,ac as O,bc as o,cc as s,dc as b,ec as B,fa as z,fc as H,hc as v,ka as T,la as M,mb as l,mc as C,nb as A,oc as u,ua as h,ub as N,va as f,vc as _,wc as k,xc as w,zb as X}from"./chunk-QJD4TKMG.js";import{i as c}from"./chunk-66YHNWRR.js";var Ee=[{id:1,Title:"H\u1ECD T\xEAn",value:"Hoten",Type:"text",required:!0,isShow:!0},{id:2,Title:"Email",value:"email",Type:"select",required:!0,isShow:!0},{id:3,Title:"SDT",value:"SDT",Type:"textarea",required:!1},{id:4,Title:"M\u1EADt Kh\u1EA9u",value:"password",Type:"radio",required:!0},{id:5,Title:"Tr\u1EA1ng Th\xE1i",value:"Status",Type:"toggle",required:!0}];var L=class n{constructor(i,t,e){this._StorageService=i;this.platformId=t;this.router=e;this.isBrowser=Q(this.platformId)}isBrowser;ListXuatnhapton=N([]);Xuatnhapton=N({});CreateXuatnhapton(i){return c(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${g.APIURL}/phieukho`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();if(!e.ok)if(e.status===401){let r=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===403){let r=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===500){let r=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}return this.getAllXuatnhapton(),a}catch(t){return console.error(t)}})}getAllXuatnhapton(){return c(this,null,function*(){try{let i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._StorageService.getItem("token")}},t=yield fetch(`${g.APIURL}/phieukho`,i);if(!t.ok)if(t.status===401){let a=JSON.stringify({code:t.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===403){let a=JSON.stringify({code:t.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(t.status===500){let a=JSON.stringify({code:t.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:t.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}let e=yield t.json();return this.ListXuatnhapton.set(e),e}catch(i){return console.error(i)}})}SearchXuatnhapton(i){return c(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${g.APIURL}/setting/search`,t);if(!e.ok)if(e.status===401){let r=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===403){let r=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===500){let r=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let a=yield e.json();return this.Xuatnhapton.set(a.items),a}catch(t){return console.error(t)}})}getXuatnhaptonByid(i){return c(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},e=yield fetch(`${g.APIURL}/phieukho/findid/${i}`,t);if(!e.ok)if(e.status===401){let r=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===403){let r=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===500){let r=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}let a=yield e.json();return this.Xuatnhapton.set(a),a}catch(t){return console.error(t)}})}updateOneXuatnhapton(i){return c(this,null,function*(){try{let t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e=yield fetch(`${g.APIURL}/phieukho/${i.id}`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let a=yield e.json();if(!e.ok)if(e.status===401){let r=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===403){let r=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else if(e.status===500){let r=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}else{let r=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:r}})}return this.getAllXuatnhapton(),a}catch(t){return console.error(t)}})}DeleteXuatnhapton(i){return c(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}},e=yield fetch(`${g.APIURL}/phieukho/${i.id}`,t);if(!e.ok)if(e.status===401){let a=JSON.stringify({code:e.status,title:"Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(e.status===403){let a=JSON.stringify({code:e.status,title:"B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else if(e.status===500){let a=JSON.stringify({code:e.status,title:"L\u1ED7i m\xE1y ch\u1EE7, vui l\xF2ng th\u1EED l\u1EA1i sau"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}else{let a=JSON.stringify({code:e.status,title:"L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh"});this.router.navigate(["/errorserver"],{queryParams:{data:a}})}return this.getAllXuatnhapton(),yield e.json()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||n)(T(Ae),T(R),T(x))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var ze=["drawer"],Re=(n,i)=>i.key,Xe=()=>[5,10,25,100];function Je(n,i){if(n&1){let t=v();o(0,"button",29),C("click",function(a){let r=h(t).$implicit;return u().toggleColumn(r),f(a.stopPropagation())}),o(1,"mat-icon"),d(2),s(),o(3,"span"),d(4),s()()}if(n&2){let t=i.$implicit;l(2),$(t.isShow?"check_box":"check_box_outline_blank"),l(2),$(t.value)}}function Ge(n,i){if(n&1&&(o(0,"th",32)(1,"span",33),d(2),s()()),n&2){let t=u().$implicit,e=u();l(2),p(" ",e.ColumnName[t]," ")}}function Be(n,i){if(n&1&&(o(0,"span",33),d(1),s()),n&2){let t=u().index;l(),p(" ",t+1," ")}}function He(n,i){if(n&1&&(o(0,"span",33),d(1),s()),n&2){let t,e=u().$implicit,a=u().$implicit,r=u();l(),p(" ",(t=r.getKhohang(e[a]))==null?null:t.Title," ")}}function Ve(n,i){if(n&1&&(o(0,"span",33),d(1),q(2,"date"),s()),n&2){let t=u().$implicit,e=u().$implicit;l(),p(" ",F(2,1,t[e],"dd/MM/yyyy")," ")}}function Ze(n,i){if(n&1&&(o(0,"span",33),d(1),q(2,"date"),s()),n&2){let t=u().$implicit,e=u().$implicit;l(),p(" ",F(2,1,t[e],"dd/MM/yyyy")," ")}}function je(n,i){if(n&1&&(o(0,"span",33),d(1),s()),n&2){let t=u().$implicit,e=u().$implicit;l(),p(" ",t[e]," ")}}function Qe(n,i){if(n&1&&(o(0,"td",34),S(1,Be,2,1,"span",33)(2,He,2,1,"span",33)(3,Ve,3,4,"span",33)(4,Ze,3,4,"span",33)(5,je,2,1,"span",33),s()),n&2){let t,e=u().$implicit;l(),J((t=e)==="STT"?1:t==="idKhohang"?2:t==="CreateAt"?3:t==="Ngaylapphieu"?4:5)}}function Ue(n,i){if(n&1&&(B(0,24),S(1,Ge,3,1,"th",30)(2,Qe,6,1,"td",31),H()),n&2){let t=i.$implicit;m("matColumnDef",t)}}function Ke(n,i){n&1&&b(0,"tr",35)}function Ye(n,i){if(n&1){let t=v();o(0,"tr",36),C("click",function(){let a=h(t).$implicit,r=u();return f(r.goToDetail(a))}),s()}}function We(n,i){if(n&1&&(o(0,"tr",37)(1,"td",38),d(2),s()()),n&2){u();let t=E(10);l(2),p('Kh\xF4ng t\xECm th\u1EA5y "',t.value,'"')}}var $e=class n{constructor(i,t){this._breakpointObserver=i;this._router=t}Detail={};dataSource;displayedColumns=["STT","MaPhieu","Donhang","idKhohang","Ngaylapphieu","Type","CreateAt","idCreate","status"];ColumnName={STT:"STT",MaPhieu:"M\xE3 Phi\u1EBFu",Donhang:"\u0110\u01A1n H\xE0ng",idKhohang:"Kho H\xE0ng",Ngaylapphieu:"Ng\xE0y L\u1EADp Phi\u1EBFu",Type:"Lo\u1EA1i Phi\u1EBFu",CreateAt:"Ng\xE0y T\u1EA1o",idCreate:"Ng\u01B0\u1EDDi T\u1EA1o",status:"Tr\u1EA1ng Th\xE1i"};Forms=Ee;FilterColumns=JSON.parse(localStorage.getItem("xuatnhapton_FilterColumns")||"[]");Columns=[];Listxuatnhapton=[];ListKhohang=[];paginator;sort;drawer;_xuatnhaptonsService=M(L);_QuanlykhosService=M(Oe);CountItem=0;ngOnInit(){return c(this,null,function*(){yield this._xuatnhaptonsService.getAllXuatnhapton(),this.Listxuatnhapton=this._xuatnhaptonsService.ListXuatnhapton(),this.CountItem=this.Listxuatnhapton.length,console.log(this._xuatnhaptonsService.ListXuatnhapton()),this._QuanlykhosService.getAllQuanlykho().then(i=>{this.ListKhohang=i}),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(i=>({key:i,value:this.ColumnName[i],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("xuatnhapton_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,t)=>(t.isShow&&(i[t.key]=t.value),i),{})}setupDataSource(){this.dataSource=new Me(this.Listxuatnhapton),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i"}setupDrawer(){this._breakpointObserver.observe([Y.Handset]).subscribe(i=>{i.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(i){let t=this.FilterColumns.find(e=>e.key===i.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}getKhohang(i){return this.ListKhohang.find(t=>t.id===i)}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(i=>i.isShow).map(i=>i.key),this.ColumnName=this.FilterColumns.reduce((i,t)=>(t.isShow&&(i[t.key]=t.value),i),{}),this.setupDataSource(),localStorage.setItem("xuatnhapton_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(i){let t=i.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(e=>e.value.toLowerCase().includes(t))}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),console.log(this.dataSource),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}create(){this.drawer.open(),this._router.navigate(["admin/xuatnhapton",0])}goToDetail(i){this.drawer.open(),this.Detail=i,this._router.navigate(["admin/xuatnhapton",i.id])}static \u0275fac=function(t){return new(t||n)(A(K),A(x))};static \u0275cmp=X({type:n,selectors:[["app-listxuatnhapton"]],viewQuery:function(t,e){if(t&1&&(_(D,5),_(P,5),_(ze,7)),t&2){let a;k(a=w())&&(e.paginator=a.first),k(a=w())&&(e.sort=a.first),k(a=w())&&(e.drawer=a.first)}},decls:43,vars:8,consts:[["drawer",""],["input",""],["menu","matMenu"],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","lg:!w-2/3","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","flex","flex-row","space-x-2","items-center","justify-between","bg-white","rounded-lg","p-2"],[1,"flex","flex-row","space-x-2","items-center"],[1,"relative"],["type","text","placeholder","T\xECm Ki\u1EBFm...",1,"block","pl-10","pr-4","py-2","text-gray-700","bg-white","border","border-gray-300","rounded-lg","focus:border-blue-400","focus:ring-blue-400","focus:outline-none","focus:ring","focus:ring-opacity-40",3,"keyup"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"material-symbols-outlined","text-gray-500"],["mat-flat-button","","color","primary",3,"click"],[1,"whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],[1,"w-full","opverflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4"],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){if(t&1){let a=v();o(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),b(3,"router-outlet"),s(),o(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"input",10,1),C("keyup",function(y){return h(a),f(e.applyFilter(y))}),s(),o(11,"div",11)(12,"span",12),d(13,"search"),s()()(),o(14,"button",13),C("click",function(){return h(a),f(e.create())}),o(15,"span"),d(16,"Th\xEAm"),s(),o(17,"mat-icon"),d(18,"add_circle"),s()()(),o(19,"div",8)(20,"span",14),d(21),s(),o(22,"button",15)(23,"mat-icon"),d(24,"tune"),s()(),o(25,"mat-menu",null,2)(27,"div",16)(28,"mat-form-field",17)(29,"input",18),C("input",function(y){return h(a),f(e.doFilterColumns(y))})("click",function(y){return h(a),f(y.stopPropagation())}),s(),o(30,"mat-icon",19),d(31,"search"),s()()(),o(32,"div",20),I(33,Je,5,2,"button",21,Re),s()()()(),o(35,"div",22)(36,"table",23),I(37,Ue,3,1,"ng-container",24,G),S(39,Ke,1,0,"tr",25)(40,Ye,1,0,"tr",26)(41,We,3,1,"tr",27),s(),b(42,"mat-paginator",28),s()()()()}if(t&2){let a=E(26);l(),m("position","end"),l(20),p(" ",e.CountItem," Phi\u1EBFu Kho "),l(),m("matMenuTriggerFor",a),l(11),O(e.FilterColumns),l(3),m("dataSource",e.dataSource),l(),O(e.displayedColumns),l(2),m("matHeaderRowDef",e.displayedColumns),l(),m("matRowDefColumns",e.displayedColumns),l(2),m("pageSizeOptions",V(7,Xe))}},dependencies:[te,ee,W,ae,ie,Le,Ce,Se,ke,be,Te,we,ve,_e,xe,De,Pe,ye,P,ge,fe,D,se,re,ne,oe,de,le,ue,U,Ie,Ne,me,ce,pe,he,j,Z],encapsulation:2})};export{L as a,$e as b};
