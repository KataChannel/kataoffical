import './polyfills.server.mjs';
import{a as De}from"./chunk-U7USLBPV.mjs";import{b as ee,c as te,d as ie}from"./chunk-OB6WK4UN.mjs";import{a as k,b as ce,c as me,d as ue,e as pe,f as de,h as he,i as fe,k as ge,l as _e,n as Ce,o as we,q as Se,r as ve,s as ye,t as Me}from"./chunk-AWVOBO46.mjs";import{a as re,c as oe}from"./chunk-JA5FUANC.mjs";import{a as Z,b as U,c as Y,d as W}from"./chunk-2SPWQTUK.mjs";import{b,c as se}from"./chunk-AN7XHSP3.mjs";import{b as J,c as G}from"./chunk-TMXDKQ3S.mjs";import{b as le}from"./chunk-2ORIYJC7.mjs";import{c as q,g as K,h as X}from"./chunk-BSNIFGO2.mjs";import{a as ke,b as Ee}from"./chunk-3SMMAAF6.mjs";import{a as be}from"./chunk-7LSZI76F.mjs";import{a as xe}from"./chunk-VZM6J5LW.mjs";import{b as Te}from"./chunk-L4NLH23U.mjs";import{c as ae,e as ne}from"./chunk-T3MZ2PZ5.mjs";import{q as j,r as $}from"./chunk-T45AR7GG.mjs";import{s as z,u as Q}from"./chunk-CKIW7MJC.mjs";import{u as H}from"./chunk-SJCEIPIQ.mjs";import{Ac as y,Bb as V,Bc as M,Ec as L,Fc as m,Gc as I,Hc as T,Ib as D,Pc as O,Wb as h,_b as R,cc as P,dc as N,ec as F,fc as n,gc as o,hc as w,ic as A,jc as B,la as C,lc as S,ob as s,pb as x,qc as d,sc as f,ua as u,va as p,zc as v}from"./chunk-T45FBOIK.mjs";import{a as E,i as _}from"./chunk-AFOT676I.mjs";var Ie=["drawer"],Ve=(r,e)=>e.key,Re=()=>[5,10,25,100];function Pe(r,e){if(r&1){let t=S();n(0,"button",30),d("click",function(a){let l=u(t).$implicit;return f().toggleColumn(l),p(a.stopPropagation())}),n(1,"mat-icon"),m(2),o(),n(3,"span"),m(4),o()()}if(r&2){let t=e.$implicit;s(2),I(t.isShow?"check_box":"check_box_outline_blank"),s(2),I(t.value)}}function Ae(r,e){if(r&1&&(n(0,"th",33)(1,"span",34),m(2),o()()),r&2){let t=f().$implicit,i=f();s(2),T(" ",i.ColumnName[t]," ")}}function Be(r,e){if(r&1&&(n(0,"td",35)(1,"span",34),m(2),o()()),r&2){let t=e.$implicit,i=e.index,a=f().$implicit;s(2),T(" ",a==="STT"?i+1:t[a]," ")}}function Oe(r,e){if(r&1&&(A(0,25),D(1,Ae,3,1,"th",31)(2,Be,3,1,"td",32),B()),r&2){let t=e.$implicit;h("matColumnDef",t)}}function He(r,e){r&1&&w(0,"tr",36)}function ze(r,e){if(r&1){let t=S();n(0,"tr",37),d("click",function(){let a=u(t).$implicit,l=f();return p(l.goToDetail(a))}),o()}}function Qe(r,e){r&1&&(n(0,"tr",38)(1,"td",39),m(2,"Kh\xF4ng t\xECm th\u1EA5y"),o()())}var Ne=class r{constructor(e,t){this._breakpointObserver=e;this._router=t}Detail={};dataSource;displayedColumns=["STT","MaNCC","Title","DiaChi","SDT","Email","Ghichu"];ColumnName={STT:"STT",MaNCC:"M\xE3 Nh\xE0 Cung C\u1EA5p",Title:"T\xEAn Nh\xE0 Cung C\u1EA5p",DiaChi:"\u0110\u1ECBa Ch\u1EC9",SDT:"S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",Email:"Email",Ghichu:"Ghi Ch\xFA"};FilterColumns=JSON.parse(localStorage.getItem("nhacungcap_FilterColumns")||"[]");Columns=[];Listnhacungcap=[];isFilter=!1;CountItem=0;paginator;sort;drawer;_snackBar=C(be);_nhacungcapsService=C(De);_DonhangsService=C(xe);ngOnInit(){return _(this,null,function*(){yield this._nhacungcapsService.getAllNhacungcap(),this.Listnhacungcap=this._nhacungcapsService.ListNhacungcap(),this.CountItem=this.Listnhacungcap.length,console.log(this._nhacungcapsService.ListNhacungcap()),this.initializeColumns(),this.setupDataSource(),this.setupDrawer()})}initializeColumns(){this.Columns=Object.keys(this.ColumnName).map(e=>({key:e,value:this.ColumnName[e],isShow:!0})),this.FilterColumns.length===0?this.FilterColumns=this.Columns:localStorage.setItem("nhacungcap_FilterColumns",JSON.stringify(this.FilterColumns)),this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{})}setupDataSource(){this.dataSource=new Me(this.Listnhacungcap),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}setupDrawer(){this._breakpointObserver.observe([$.Handset]).subscribe(e=>{e.matches?(this.drawer.mode="over",this.paginator.hidePageSize=!0):this.drawer.mode="side"})}toggleColumn(e){let t=this.FilterColumns.find(i=>i.key===e.key);t&&(t.isShow=!t.isShow,this.updateDisplayedColumns())}updateDisplayedColumns(){this.displayedColumns=this.FilterColumns.filter(e=>e.isShow).map(e=>e.key),this.ColumnName=this.FilterColumns.reduce((e,t)=>(t.isShow&&(e[t.key]=t.value),e),{}),this.setupDataSource(),localStorage.setItem("nhacungcap_FilterColumns",JSON.stringify(this.FilterColumns))}doFilterColumns(e){let t=e.target.value.toLowerCase();this.FilterColumns=this.Columns.filter(i=>i.value.toLowerCase().includes(t))}ngAfterViewInit(){this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.paginator&&(this.paginator._intl.itemsPerPageLabel="S\u1ED1 l\u01B0\u1EE3ng 1 trang",this.paginator._intl.nextPageLabel="Ti\u1EBFp Theo",this.paginator._intl.previousPageLabel="V\u1EC1 Tr\u01B0\u1EDBc",this.paginator._intl.firstPageLabel="Trang \u0110\u1EA7u",this.paginator._intl.lastPageLabel="Trang Cu\u1ED1i")}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.CountItem=this.dataSource.filteredData.length,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}create(){this.drawer.open(),this._router.navigate(["admin/nhacungcap",0])}goToDetail(e){console.log(e),this.drawer.open(),this._router.navigate(["admin/nhacungcap",e.id])}LoadDrive(){return _(this,null,function*(){let e={IdSheet:"15npo25qyH5FmfcEjl1uyqqyFMS_vdFnmxM_kt0KYmZk",SheetName:"NhacungcapImport",ApiKey:"AIzaSyD33kgZJKdFpv1JrKHacjCQccL_O0a2Eao"},t=yield this._DonhangsService.getDrive(e),a=Te(t.values).map(l=>_(this,null,function*(){let c=this.Listnhacungcap.find(g=>g.MaNCC===l.MaNCC);if(c){let g=E(E({},c),l);yield this._nhacungcapsService.updateOneNhacungcap(g)}else yield this._nhacungcapsService.CreateNhacungcap(l)}));Promise.all(a).then(()=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]})})})}readExcelFile(e){let t=e.target.files[0],i=new FileReader;i.onload=a=>{let l=new Uint8Array(a.target.result),c=re(l,{type:"array"}),g=c.SheetNames[0],Fe=c.Sheets[g],Le=oe.sheet_to_json(Fe,{raw:!0});console.log(Le)}}writeExcelFile(){}saveAsExcelFile(e,t){}static \u0275fac=function(t){return new(t||r)(x(j),x(Q))};static \u0275cmp=V({type:r,selectors:[["app-listnhacungcap"]],viewQuery:function(t,i){if(t&1&&(v(b,5),v(k,5),v(Ie,7)),t&2){let a;y(a=M())&&(i.paginator=a.first),y(a=M())&&(i.sort=a.first),y(a=M())&&(i.drawer=a.first)}},decls:48,vars:11,consts:[["drawer",""],["menu","matMenu"],["uploadfile",""],["autosize","",1,"w-full","h-full"],[1,"flex","flex-col","lg:!w-1/2","!w-full","h-full",3,"position"],[1,"flex","flex-col","space-y-2","h-screen-12","w-full","justify-between","p-2"],[1,"flex","flex-col","space-y-2","w-full","p-2"],[1,"cursor-pointer","w-full","relative","flex","lg:flex-row","lg:space-y-2","space-y-0","flex-col","space-x-2","justify-between","items-center","p-2","bg-white","rounded-lg"],[1,"flex","flex-row","space-x-2","items-center"],["matTooltip","Th\xEAm m\u1EDBi","color","primary","mat-icon-button","",3,"click"],["matTooltip","\u1EA8n hi\u1EC7n c\u1ED9t","mat-icon-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"p-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input","click"],["matPrefix",""],[1,"flex","flex-col","max-h-80","overflow-auto"],["mat-menu-item",""],["matTooltip","B\u1ED9 L\u1ECDc","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i file excel M\u1EABu","color","primary","mat-icon-button","",3,"click"],["matTooltip","T\u1EA3i l\xEAn file excel","color","primary","mat-icon-button","",3,"click"],["type","file",1,"hidden",3,"change"],["matTooltip","T\u1EA3i d\u1EEF li\u1EC7u t\u1EEB drive","color","primary","mat-icon-button","",3,"click"],[1,"lg:flex","hidden","whitespace-nowrap","p-2","rounded-lg","bg-slate-200"],[1,"w-full","opverflow-auto"],["mat-table","","matSort","",1,"!border","w-full","cursor-pointer",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-menu-item","",3,"click"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","","mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],[1,"max-w-40","line-clamp-4"],["mat-cell","",1,""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,i){if(t&1){let a=S();n(0,"mat-drawer-container",3)(1,"mat-drawer",4,0),w(3,"router-outlet"),o(),n(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"button",9),d("click",function(){return u(a),p(i.create())}),n(9,"mat-icon"),m(10,"add_circle"),o()(),n(11,"button",10)(12,"mat-icon"),m(13,"tune"),o()(),n(14,"mat-menu",null,1)(16,"div",11)(17,"mat-form-field",12)(18,"input",13),d("input",function(c){return u(a),p(i.doFilterColumns(c))})("click",function(c){return u(a),p(c.stopPropagation())}),o(),n(19,"mat-icon",14),m(20,"search"),o()()(),n(21,"div",15),N(22,Pe,5,2,"button",16,Ve),o()(),n(24,"button",17),d("click",function(){return u(a),p(i.isFilter=!i.isFilter)}),n(25,"mat-icon"),m(26,"filter_list"),o()(),n(27,"button",18),d("click",function(){return u(a),p(i.writeExcelFile())}),n(28,"mat-icon"),m(29,"file_download"),o()(),n(30,"button",19),d("click",function(){u(a);let c=L(34);return p(c.click())}),n(31,"mat-icon"),m(32,"file_upload"),o()(),n(33,"input",20,2),d("change",function(c){return u(a),p(i.readExcelFile(c))}),o(),n(35,"button",21),d("click",function(){return u(a),p(i.LoadDrive())}),n(36,"mat-icon"),m(37,"cloud_download"),o()(),n(38,"span",22),m(39),o()()(),n(40,"div",23)(41,"table",24),N(42,Oe,3,1,"ng-container",25,P),D(44,He,1,0,"tr",26)(45,ze,1,0,"tr",27)(46,Qe,3,0,"tr",28),o(),w(47,"mat-paginator",29),o()()()()}if(t&2){let a=L(15);s(),h("position","end"),s(10),h("matMenuTriggerFor",a),s(11),F(i.FilterColumns),s(2),R(i.isFilter?"!bg-slate-200":""),s(15),T(" ",i.CountItem," Nh\xE0 Cung C\u1EA5p "),s(2),h("dataSource",i.dataSource),s(),F(i.displayedColumns),s(2),h("matHeaderRowDef",i.displayedColumns),s(),h("matRowDefColumns",i.displayedColumns),s(2),h("pageSizeOptions",O(10,Re))}},dependencies:[X,K,q,G,J,ye,ue,de,_e,he,pe,Ce,fe,ge,we,Se,ve,me,k,ce,se,b,W,U,Z,Y,ie,ee,te,z,Ee,ke,ne,ae,le,H],encapsulation:2})};export{Ne as a};
