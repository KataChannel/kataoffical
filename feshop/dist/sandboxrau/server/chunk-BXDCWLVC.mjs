import './polyfills.server.mjs';
import{a as r}from"./chunk-VMEWTXZI.mjs";import{K as d,fa as p,g as i}from"./chunk-T45FBOIK.mjs";import{i as n}from"./chunk-AFOT676I.mjs";var h=class c{_slides=new i(null);_slide=new i(null);_totalCount=new i(null);get slides$(){return this._slides.asObservable()}get slide$(){return this._slide.asObservable()}get totalCount$(){return this._totalCount.asObservable()}constructor(){}getDrive(){return n(this,null,function*(){try{return yield(yield fetch("https://sheets.googleapis.com/v4/spreadsheets/1VghpYpLVKug07LJm1-pdcpeQcEoh5VaCOgBvOfQ0-L8/values/slide?key=AIzaSyCWh10EgrjVBm8qKpnsGOgXrIsT5uqroMc",{method:"GET",headers:{"Content-Type":"application/json"}})).json()}catch(o){return console.error(o)}})}getAllSlide(){return n(this,null,function*(){try{let o={method:"GET",headers:{"Content-Type":"application/json"}},e=yield(yield fetch(`${r.APIURL}/slide`,o)).json();return this._slides.next(e),e}catch(o){return console.error(o)}})}getSlideBySlug(o){return n(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},s=yield(yield fetch(`${r.APIURL}/slide/findslug/Slug`,t)).json();return this._slide.next(s),s}catch(t){return console.error(t)}})}getSlideByid(o){return n(this,null,function*(){try{let t={method:"GET",headers:{"Content-Type":"application/json"}},e=yield fetch(`${r.APIURL}/slide/findid/id`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let s=yield e.json();return this._slide.next(s),s}catch(t){return console.error(t)}})}SearchSlide(o){return n(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e=yield fetch(`${r.APIURL}/slide/search`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let s=yield e.json();return this._slides.next(s.items),this._totalCount.next(s.totalCount),s}catch(t){return console.error(t)}})}CreateSlide(o){return n(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e=yield fetch(`${r.APIURL}/slide`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let s=yield e.json();return console.log(s),s}catch(t){return console.error(t)}})}SyncSlide(o){return n(this,null,function*(){try{let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},e=yield fetch(`${r.APIURL}/slide/sync`,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let s=yield e.json();return console.log(s),s}catch(t){return console.error(t)}})}UpdateSlide(o){return n(this,null,function*(){let t=yield this.slides$.pipe(d(1)).toPromise();try{let e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},s=yield fetch(`${r.APIURL}/slide/${o.id}`,e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);let a=yield s.json();this._slide.next(a);let u=t.map(l=>l.id===a.id?a:l);return this._slides.next(u),a}catch(e){return console.error(e)}})}DeleteSlide(o){return n(this,null,function*(){try{let t={method:"DELETE",headers:{"Content-Type":"application/json"}};return yield(yield fetch(`${r.APIURL}/slide/${o.id}`,t)).json()}catch(t){return console.error(t)}})}static \u0275fac=function(t){return new(t||c)};static \u0275prov=p({token:c,factory:c.\u0275fac,providedIn:"root"})};export{h as a};
