import './polyfills.server.mjs';
import{a as _t}from"./chunk-WFLYXQLI.mjs";import{a as ut}from"./chunk-ZMIGELLI.mjs";import{a as pt}from"./chunk-NNGEXLRE.mjs";import"./chunk-OB6WK4UN.mjs";import{a as dt}from"./chunk-WBXYT6KQ.mjs";import"./chunk-AWVOBO46.mjs";import"./chunk-JA5FUANC.mjs";import"./chunk-2SPWQTUK.mjs";import"./chunk-AN7XHSP3.mjs";import{b as Y,c as Z}from"./chunk-TMXDKQ3S.mjs";import{a as ot,b as lt}from"./chunk-2ORIYJC7.mjs";import{a as X,g as J,h as Q}from"./chunk-BSNIFGO2.mjs";import"./chunk-RWP2M6BI.mjs";import{b as $,g as K,j as q,r as U}from"./chunk-UB2O3VBN.mjs";import"./chunk-JGATIPIB.mjs";import{a as st,b as mt}from"./chunk-3SMMAAF6.mjs";import{a as rt}from"./chunk-7LSZI76F.mjs";import{a as tt,f as et}from"./chunk-MBT5KBOH.mjs";import"./chunk-ZC6PNHZU.mjs";import{h as ct}from"./chunk-WJTKY5FD.mjs";import{a as nt,c as it,e as at}from"./chunk-T3MZ2PZ5.mjs";import{_ as H}from"./chunk-T45AR7GG.mjs";import"./chunk-AF4BUXQF.mjs";import"./chunk-VMEWTXZI.mjs";import"./chunk-5YH22JMS.mjs";import{r as j,u as z}from"./chunk-CKIW7MJC.mjs";import{n as O,o as G,s as W,u as R}from"./chunk-SJCEIPIQ.mjs";import{Bb as L,Fc as c,Gc as w,Hc as b,Ib as f,Ic as F,Jc as B,Lc as C,Mc as x,Nc as S,Pc as v,Vc as A,Wb as u,Xc as P,bc as T,dc as y,ec as E,fc as n,gc as i,la as g,lc as D,ob as d,qc as _,sc as s,ua as m,va as p}from"./chunk-T45FBOIK.mjs";import"./chunk-KB5IWD3E.mjs";import{a as V,b as k,i as I}from"./chunk-AFOT676I.mjs";var N=(l,a)=>a.id,M=()=>({standalone:!0});function gt(l,a){if(l&1){let t=D();n(0,"button",1),_("click",function(){m(t);let e=s();return p(e.SaveData())}),n(1,"mat-icon"),c(2,"save"),i()()}}function Dt(l,a){if(l&1){let t=D();n(0,"button",1),_("click",function(){m(t);let e=s();return p(e.isEdit=!0)}),n(1,"mat-icon"),c(2,"edit"),i()()}}function ft(l,a){if(l&1){let t=D();n(0,"div",7)(1,"div",8),c(2,"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n xo\xE1 kh\xF4ng?"),i(),n(3,"div",9)(4,"button",10),_("click",function(){m(t);let e=s();return p(e.DeleteData())}),c(5," \u0110\u1ED3ng \xDD "),i(),n(6,"button",11),_("click",function(){m(t);let e=s();return p(e.isDelete=!1)}),c(7," Hu\u1EF7 B\u1ECF "),i()()()}}function Ct(l,a){if(l&1&&(n(0,"tr")(1,"td",21),c(2),i(),n(3,"td",21),c(4),i(),n(5,"td",21),c(6),i(),n(7,"td",21),c(8),i()()),l&2){let t,o,e=a.$implicit,r=a.index,h=s(3);d(2),b(" ",r+1," "),d(2),b(" ",(t=h.GetInfoSanpham(e.idSP))==null?null:t.Title," "),d(2),F(" ",e.Soluong," ",(o=h.GetInfoSanpham(e.idSP))==null?null:o.dvt," "),d(2),b(" ",e.Ghichu," ")}}function xt(l,a){if(l&1&&(n(0,"div",14)(1,"div",15),c(2),i(),n(3,"div"),c(4),A(5,"date"),i(),n(6,"table",16)(7,"thead",17)(8,"tr")(9,"th",18),c(10," STT "),i(),n(11,"th",18),c(12," S\u1EA3n Ph\u1EA9m "),i(),n(13,"th",18),c(14," S\u1ED1 L\u01B0\u1EE3ng "),i(),n(15,"th",18),c(16," Ghi Ch\xFA "),i()()(),n(17,"tbody",19),f(18,Ct,9,5,"tr",20),i()()()),l&2){let t=s(2);d(2),w(t.Detail==null||t.Detail.Nhacungcap==null?null:t.Detail.Nhacungcap.Title),d(2),w(P(5,3,t.Detail==null?null:t.Detail.CreateAt,"dd/MM/yyyy")),d(14),u("ngForOf",t.Detail.Sanpham)}}function St(l,a){if(l&1&&(n(0,"mat-option",29),c(1),i()),l&2){let t=a.$implicit;u("value",t.id),d(),F("",t.MaNCC," - ",t.Title,"")}}function vt(l,a){if(l&1&&(n(0,"mat-option",29),c(1),i()),l&2){let t=a.$implicit;u("value",t.id),d(),B("",t.Title," [T\u1ED3n : ",t.Soluong,"",t.dvt,"]")}}function yt(l,a){if(l&1){let t=D();n(0,"mat-form-field",23)(1,"mat-label"),c(2,"S\u1EA3n Ph\u1EA9m"),i(),n(3,"mat-select",24),S("ngModelChange",function(e){let r=m(t).$index,h=s(3);return x(h.Detail.Sanpham[r].idSP,e)||(h.Detail.Sanpham[r].idSP=e),p(e)}),_("selectionChange",function(e){m(t);let r=s(3);return p(r.SelectSanpham(e))}),n(4,"div",25)(5,"div",3)(6,"mat-form-field",26)(7,"input",27),_("input",function(e){m(t);let r=s(3);return p(r.DoFindSanpham(e))}),i()(),n(8,"button",4)(9,"mat-icon"),c(10,"add_circle"),i()()(),n(11,"div",28),y(12,vt,2,4,"mat-option",29,N),i()()()(),n(14,"mat-form-field",32)(15,"mat-label"),c(16,"S\u1ED1 L\u01B0\u1EE3ng"),i(),n(17,"input",33),S("ngModelChange",function(e){let r=m(t).$implicit;return x(r.Soluong,e)||(r.Soluong=e),p(e)}),_("change",function(e){let r=m(t).$implicit,h=s(3);return p(h.onChangeSoluong(r,e))}),i()(),n(18,"mat-form-field",32)(19,"mat-label"),c(20,"Ghi Ch\xFA"),i(),n(21,"input",34),S("ngModelChange",function(e){let r=m(t).$index,h=s(3);return x(h.Detail.Sanpham[r].Ghichu,e)||(h.Detail.Sanpham[r].Ghichu=e),p(e)}),i()()}if(l&2){let t=a.$implicit,o=a.$index,e=s(3);d(3),u("disabled",!e.isEdit),C("ngModel",e.Detail.Sanpham[o].idSP),u("ngModelOptions",v(9,M)),d(9),E(e.FilterSanpham),d(5),u("disabled",!e.isEdit),C("ngModel",t.Soluong),u("ngModelOptions",v(10,M)),d(4),u("disabled",!e.isEdit),C("ngModel",e.Detail.Sanpham[o].Ghichu),u("ngModelOptions",v(11,M))}}function Et(l,a){if(l&1){let t=D();n(0,"div",22)(1,"mat-form-field",23)(2,"mat-label"),c(3,"Nh\xE0 Cung C\u1EA5p"),i(),n(4,"mat-select",24),S("ngModelChange",function(e){m(t);let r=s(2);return x(r.Detail.idNCC,e)||(r.Detail.idNCC=e),p(e)}),_("selectionChange",function(e){m(t);let r=s(2);return p(r.SelectNhacungcap(e))}),n(5,"div",25)(6,"div",3)(7,"mat-form-field",26)(8,"input",27),_("input",function(e){m(t);let r=s(2);return p(r.DoFindNhacungcap(e))}),i()(),n(9,"button",1),_("click",function(){m(t);let e=s(2);return p(e.CreateNCC())}),n(10,"mat-icon"),c(11,"add_circle"),i()()(),n(12,"div",28),y(13,St,2,3,"mat-option",29,N),i()()()(),n(15,"div",30),y(16,yt,22,12,null,null,N),i(),n(18,"div")(19,"button",31),_("click",function(){m(t);let e=s(2);return p(e.Detail.Sanpham.push({idSP:"",Soluong:0,Ghichu:""}))}),n(20,"span"),c(21,"Th\xEAm"),i(),n(22,"mat-icon"),c(23,"add"),i()()()()}if(l&2){let t=s(2);d(4),u("disabled",!t.isEdit),C("ngModel",t.Detail.idNCC),u("ngModelOptions",v(4,M)),d(9),E(t.FilterNhacungcap),d(3),E(t.Detail.Sanpham),d(3),u("disabled",!t.isEdit)}}function wt(l,a){if(l&1&&f(0,xt,19,6,"div",12)(1,Et,24,5,"div",13),l&2){let t=s();u("ngIf",!t.isEdit),d(),u("ngIf",t.isEdit)}}var ht=class l{_ListdathangnccComponent=g(_t);_NhacungcapsService=g(ut);_DonnccsService=g(pt);_SanphamService=g(dt);_router=g(j);_route=g(z);_snackBar=g(rt);constructor(){}Detail={Sanpham:[]};Nhacungcap={};isEdit=!1;isDelete=!1;idDathangncc;FilterNhacungcap=[];ListNhacungcap=[];FilterSanpham=[];ListSanpham=[];ngOnInit(){this._router.paramMap.subscribe(a=>I(this,null,function*(){this.idDathangncc=a.get("id"),this.isEdit=this.idDathangncc==="0",this.idDathangncc?(this._ListdathangnccComponent.drawer.open(),this._NhacungcapsService.getAllNhacungcap().then(t=>{this.FilterNhacungcap=this.ListNhacungcap=t}),this._SanphamService.getAllSanpham().then(t=>{this.FilterSanpham=this.ListSanpham=t}),this.idDathangncc!=="0"?this._DonnccsService.getDonnccByid(this.idDathangncc).then(t=>{t&&(this.Detail=t,this.Detail.Nhacungcap=this.ListNhacungcap.find(o=>o.id===this.Detail.idNCC),console.log(t))}):(this.Detail={Sanpham:[]},this.Detail.MaDH=ct(8,!1))):this._route.navigate(["/admin/dathangncc"])}))}SaveData(){this.idDathangncc=="0"?this._DonnccsService.CreateDonncc(this.Detail).then(a=>{this._snackBar.open("T\u1EA1o M\u1EDBi Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._route.navigate(["/admin/dathangncc",a.id])}):this._DonnccsService.updateOneDonncc(this.Detail).then(a=>{this._snackBar.open("C\u1EADp Nh\u1EADt Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this.isEdit=!1})}DeleteData(){this._DonnccsService.DeleteDonncc(this.Detail).then(a=>{this._snackBar.open("X\xF3a Th\xE0nh C\xF4ng","",{duration:1e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["snackbar-success"]}),this._route.navigate(["/admin/dathangncc"])})}goBack(){this._route.navigate(["/admin/dathangncc"]),this._ListdathangnccComponent.drawer.close()}DoFindNhacungcap(a){let t=a.target.value.toLowerCase();this.FilterNhacungcap=this.ListNhacungcap.filter(o=>o.Title.toLowerCase().includes(t)||o.MaNCC.toLowerCase().includes(t))}SelectNhacungcap(a){let t=this.ListNhacungcap.find(o=>o.id===a.value);t&&(this.Detail.Nhacungcap=k(V({},this.Detail.Nhacungcap),{TenKH:t.TenKH,SDT:t.SDT,Diachi:t.Diachi}),this.Detail.idBanggia=t.idBanggia)}DoFindSanpham(a){let t=a.target.value.toLowerCase();this.FilterSanpham=this.ListSanpham.filter(o=>o.Title.toLowerCase().includes(t))}SelectSanpham(a){}onChangeSoluong(a,t){this.Detail.Soluong=t.target.value,this.Detail.Thanhtien=this.Detail.Soluong*this.Detail.Dongia}dialog=g(tt);dialogRef;OpenDialogAddNhacungcap(a){this.dialogRef=this.dialog.open(a)}CreateNCC(){this._route.navigate(["admin/nhacungcap",0])}GetInfoSanpham(a){return this.ListSanpham.find(t=>t.id===a)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=L({type:l,selectors:[["app-detaildathangncc"]],decls:15,vars:3,consts:[[1,"flex","flex-row","justify-between","items-center","space-x-2","p-2"],["mat-icon-button","","color","primary",3,"click"],[1,"font-bold"],[1,"flex","flex-row","space-x-2","items-center"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn",3,"click"],[1,"relative","flex","flex-col","w-full","p-4","overflow-auto"],[1,"flex","flex-col","space-y-4","items-center","justify-center"],[1,"font-bold","text-2xl"],[1,"flex","flex-row","space-x-2","items-center","justify-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"],["class","flex flex-col space-y-2 justify-center items-center border p-4 rounded-lg",4,"ngIf"],["class","flex flex-col space-y-2",4,"ngIf"],[1,"flex","flex-col","space-y-2","justify-center","items-center","border","p-4","rounded-lg"],[1,"font-bold","p-2","rounded-lg","border"],[1,"min-w-full","divide-y","divide-gray-200","border"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"flex","flex-col","space-y-2"],["appearance","outline","subscriptSizing","dynamic"],[3,"ngModelChange","selectionChange","disabled","ngModel","ngModelOptions"],[1,"w-full","flex","flex-col","px-4"],["appearance","outline","subscriptSizing","dynamic",1,"w-full","p-2"],["matInput","","placeholder","T\xECm Ki\u1EBFm",3,"input"],[1,"overflow-y-auto","max-h-44"],[3,"value"],[1,"grid","grid-cols-3","gap-2"],["mat-flat-button","","color","primary",3,"click","disabled"],["appearance","outline","subscriptSizing","dynamic",1,"w-full"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp S\u1ED1 \u0110i\u1EC7n Tho\u1EA1i",3,"ngModelChange","change","disabled","ngModel","ngModelOptions"],["matInput","","placeholder","Vui l\xF2ng Nh\u1EADp Ghi Ch\xFA",3,"ngModelChange","disabled","ngModel","ngModelOptions"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"button",1),_("click",function(){return o.goBack()}),n(2,"mat-icon"),c(3,"arrow_back"),i()(),n(4,"div",2),c(5),i(),n(6,"div",3),f(7,gt,3,0,"button",4)(8,Dt,3,0,"button",4),n(9,"button",5),_("click",function(){return o.isDelete=!0}),n(10,"mat-icon"),c(11,"delete"),i()()()(),n(12,"div",6),f(13,ft,8,0,"div",7)(14,wt,2,2),i()),t&2&&(d(5),w((o.Detail==null?null:o.Detail.MaDH)||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),d(2),T(o.isEdit==!0?7:8),d(6),T(o.isDelete==!0?13:14))},dependencies:[Q,J,X,Z,Y,U,$,K,q,mt,st,at,nt,it,lt,ot,H,et,R,O,G,W],encapsulation:2})};export{ht as DetailDathangnccComponent};
